{"version":3,"sources":["node_modules/_browser-pack@6.1.0@browser-pack/_prelude.js","src/game.ts","src/main.ts","src/veryengine/action/actionBehaviour.ts","src/veryengine/action/actions.ts","src/veryengine/action/assignment.ts","src/veryengine/action/assignmentTypeJudge.ts","src/veryengine/action/index.ts","src/veryengine/babylon/babylonVariables.ts","src/veryengine/babylon/engine.ts","src/veryengine/babylon/index.ts","src/veryengine/babylon/time.ts","src/veryengine/dataSource/dataSource.ts","src/veryengine/dataSource/fsmData.ts","src/veryengine/dataSource/index.ts","src/veryengine/dataSource/stateActionData.ts","src/veryengine/dataSource/stateData.ts","src/veryengine/dataSource/stateTriggerData.ts","src/veryengine/dataSource/variableData.ts","src/veryengine/enum/enumTypes.ts","src/veryengine/enum/index.ts","src/veryengine/expression/expChar.ts","src/veryengine/expression/expManager.ts","src/veryengine/expression/expressionEnum.ts","src/veryengine/expression/expressionParsing.ts","src/veryengine/expression/expressions.ts","src/veryengine/expression/forwardQuery.ts","src/veryengine/expression/functionExpression.ts","src/veryengine/expression/functions.ts","src/veryengine/expression/index.ts","src/veryengine/expression/positions.ts","src/veryengine/expression/scope.ts","src/veryengine/expression/token.ts","src/veryengine/expression/tokenReader.ts","src/veryengine/expression/tokenizer.ts","src/veryengine/expression/variable.ts","src/veryengine/expression/variableExpression.ts","src/veryengine/expression/veryExpressions.ts","src/veryengine/global/errorManager.ts","src/veryengine/global/gameGlobal.ts","src/veryengine/global/index.ts","src/veryengine/global/triggerGlobal.ts","src/veryengine/html/index.ts","src/veryengine/html/showError.ts","src/veryengine/index.ts","src/veryengine/library/action/debug.ts","src/veryengine/library/action/index.ts","src/veryengine/library/action/transform.ts","src/veryengine/library/action/vector3.ts","src/veryengine/library/trigger/index.ts","src/veryengine/library/trigger/input.ts","src/veryengine/library/trigger/system.ts","src/veryengine/loader/createInstance.ts","src/veryengine/loader/index.ts","src/veryengine/loader/loaderManager.ts","src/veryengine/manager/index.ts","src/veryengine/manager/manager.ts","src/veryengine/manager/projects.ts","src/veryengine/manager/reset.ts","src/veryengine/object/index.ts","src/veryengine/object/objects.ts","src/veryengine/object/veryengineObject.ts","src/veryengine/scene/index.ts","src/veryengine/scene/verySceneVariables.ts","src/veryengine/state/associatedState.ts","src/veryengine/state/fsm.ts","src/veryengine/state/index.ts","src/veryengine/state/sequenceActions.ts","src/veryengine/state/state.ts","src/veryengine/state/stateAction.ts","src/veryengine/state/stateConst.ts","src/veryengine/template/index.ts","src/veryengine/template/template.ts","src/veryengine/template/templates.ts","src/veryengine/trigger/index.ts","src/veryengine/trigger/triggerBehaviour.ts","src/veryengine/trigger/triggers.ts","src/veryengine/utility/arrayUtility.ts","src/veryengine/utility/dictionary.ts","src/veryengine/utility/errorInfo.ts","src/veryengine/utility/index.ts","src/veryengine/utility/keyboardMap.ts","src/veryengine/utility/paraParserUtility.ts","src/veryengine/utility/stringFormat.ts","src/veryengine/utility/typeConvert.ts","src/veryengine/utility/vector3Utility.ts","src/veryengine/utility/veryParas.ts","src/veryengine/variables/index.ts","src/veryengine/variables/varTools.ts","src/veryengine/variables/variables.ts","src/veryengine/variables/veryExpression.ts","src/veryengine/variables/veryVarManager.ts","src/veryengine/variables/veryVariables.ts","src/veryengine/veryEngine.ts","src/verytable/index.ts","src/verytable/veryTable.ts","src/verytable/veryTableRow.ts","src/verytable/veryTableSet.ts"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","veryEngine_1","babylon_1","Game","canvasElement","fps","this","_showFps","_canvas","BabylonEngine","Canvas","_fps","_table","document","getElementById","prototype","createScene","_engine","VE_Manager","dispose","BABYLON","Engine","engine","window","addEventListener","resize","_scene","Scene","camera","ArcRotateCamera","Vector3","setPosition","attachControl","lowerBetaLimit","upperBetaLimit","Math","PI","lowerRadiusLimit","displayLoadingUI","SceneLoader","Append","scene","hideLoadingUI","entrance","VeryEngine","console","log","hot1","countEmptyRows","init","getData","projectName","error","objects","onBeforeRenderObservable","add","count","objectID","getObjectID","getVeryObject","update","animate","_this","runRenderLoop","width","clientWidth","render","updateFpsPos","toggleDebug","scenes","debugLayer","isVisible","hide","show","embedMode","style","right","body","innerHTML","getFps","toFixed","game","game_1","__importDefault","dataLoaded","canvas","fpsLabel","default","initGame","setTimeout","enum_1","VE_ActionBehaviour","_enabled","_projectName","gameObject","veryObject","_objectID","_actionID","_erveryFrame","isSequence","_sequenceState","SequenceActionState","Initial","_sequenceAction","Object","defineProperty","val","ActionType","Normal","set","setEveryFrame","is_every_frame","setActionID","project_name","object_id","action_id","setVeryObject","very_object","action","action_val","every_frame","active","onUpdate","sequenceAction","sequence","Running","pause","Pause","resume","stop","finish","finishAction","enabled","state_1","manager_1","global_1","utility_1","VE_Actions","addAction","action_class","GameGlobal","PlatformLoaded","tempAction","constructor","ids","ID","split","id","trim","toLowerCase","_actionFunctionDics","VE_ErrorManager","Add","VE_Error","className","Severity","hasAction","createAction","action_type","action_para","init_val","error_info","isRight","message","variable","paraParser","clear","everyFrameFlag","VE_TypeConvert","boolConvert","remove","findAction","isCreatedAction","getAction","actionArray","StateConst","STATE_SEPARATOR","actionID","isCreated","otherObject","html_1","assignmentTypeJudge_1","VE_Assignment","state","total_string","_totalStr","_leftType","AssignType","Variable","_rightType","_leftVariable","_leftTemplate","_leftVarID","_rightConstStr","_rightConstValue","_rightVariable","_rightTemplate","_rightVarID","_pos","_state","setPos","pos","setLeftVariable","setLeftTemplate","template","Template","setLeftTemplateVar","var_id","TemplateVariable","setRightVariable","setRightTemplate","setRightNull","setRightTemplateVariable","setRightConst","const_str","Const","setRightConstValue","const_value","assign","rightAssignment","unload","templateInstance","ShowError","showError","Fsm","fsmID","templateVarID","isCreatedExpression","isCreatedVariable","getVariable","isCreatedFsm","getFsm","fsmVar","setValue","getValue","errorInfo","ErrorInfo","initValue","exp","getExpression","VE_AssignmentTypeJudge","allowExpression","evaluate","v","allow","first","second","varType","expType","__export","engine_1","GameObject","name","mesh","node","_transform","Transform","transform","isEmpty","Find","getNodeByName","AbstractMesh","TransformNode","getClassName","CreateInstance","game_object","Mesh","createInstance","sourceMesh","transformNode","clone","_transformNode","_mesh","_name","_tempVec","Zero","_parent","forward","Forward","localScale","tempParent","parent","setParent","copyFrom","position","getAbsolutePosition","setAbsolutePosition","para","rotation","multiplyByFloats","parent_1","result","parent_2","parent_3","parent_4","translate","translation","relativeTo","translateRelativeTo","trans","direction","transformDirection","Space","WORLD","transformPosition","local_position","matrix","computeWorldMatrix","TransformCoordinates","local_direction","subtract","inverseTransformPosition","global_position","Matrix","Invert","inverseTransformDirection","global_direction","pointA","pointOrigin","Time","_frame","getDeltaTime","_sum","fsmData_1","VE_DataSource","name_id","is_template","_templateID","_isTemplate","_fsmIDs","_fsmDic","_fsmPosDic","_triggerIDs","_triggerDic","_triggerPosDic","_actionIDs","_actionDic","_actionInitValue","_actionPosDic","fsm_id","createFsm","push","VE_FsmData","getFsmData","getFsmPos","hasFsmIndex","index","getFsmID","isCreatedTrigger","trigger_id","addTrigger","trigger_data","getTrigger","getTriggerPos","hasTriggerIndex","getTriggerID","getTriggerPara","action_data","action_init_val","getActionPara","getActionPos","getActionInitVal","hasActionIndex","getActionID","data_source","_fsmType","_initialValStr","_states","_dataSource","_fsmID","initFsm","fsm_type","initial_var","addState","state_data","getStateData","VE_StateActionData","type","StateActionType","Action","totalString","varID","varValue","everyFrame","setNormalAction","setAssignmentAction","var_value","Assignment","VE_StateData","fsm_data","val_str","is_initial_value","logicalExp","rowIndex","_triggers","_triggersPos","_actions","_actionsPos","_associatedStates","_associatedStatesPos","_isSequence","_fsmData","_valStr","_isInitialValue","hasTrigger","hasAssociatedState","addAssociatedState","associated_state_data","getAssociatedState","getAssociatedStatePos","setSequence","VE_StateTriggerData","triggerID","logicalSwitch","VE_VariableData","_variableIDs","_varDics","_varPosDic","addVariable","var_paras","getVariableID","getVariableParas","getPos","AssignmentType","AssociatedFsmType","VariableScope","ParaType","ExpChar","value","line","_value","_line","getLine","isDigit","test","isLetterOrCharactor","escape","indexOf","isWhiteSpace","isNewLine","isEndOfInput","is","_i","arguments","toString","scope_1","positions_1","expressionParsing_1","ExpManager","_scope","Scope","Create","_expVariable","createVariable","errors","ParseError","NameLocation","setVariable","createExpression","exp_str","VE_ExpressionParsing","parsing","find","printError","ExpressionType","tokenizer_1","expressions_1","expressionEnum_1","functionExpression_1","functions_1","variableExpression_1","veryExpressions_1","_bracketPair","input_exp","scope","var_scope","_varScope","replace","_tokenizer","Tokenizer","parse","str","resultExp","buildExpression","current","isEnd","addError","getSource","consume","getProblemCollector","left","relationalExp","isOperator","reOrder","BinaryOperator","Or","algebraExp","LT","LT_EQ","EQ","GT_EQ","GT","NEQ","productExp","Subtract","exponentExp","Multiply","Divide","Modulo","atomExp","BinaryExpression","Not","ConstantExpression","setSeal","next","isIdentifier","isKeyword","isStartBracket","newValue","Empty","isConstant","getContents","varExpression","VE_Expressions","getParseExpression","getTemplateExpression","endBracket","expectTrigger","OPERATOR","typeStr","isBool","isNumber","parseFloat","endStart","functionCall","loc","variableID","endsWith","VariableExpression","VeryTemplateExpression","fsm","VeryVarExpression","isSpecialIdentifier","op","rightOp","isSealed","getPriority","getPriorityOp","replaceLeft","target","newLeft","getLeftExp","leftOp","setLeftExp","end_bracket","FunctionExpression","funcToken","CustomFunctions","hasFunction","fun","createFunction","setFunction","paraCount","addPara","parameterNumber","trigger","matches","getProjectCollector","Local","dictionary_1","template_1","TrueExpression","_expType","left_exp","right_exp","_op","_isSealed","_left","_right","resultAutoType","_opDic","Power","And","_priority","setRightExp","getOp","getRightExp","leftValue","rightValue","pow","l","getBoolean","x","y","z","Vector2","GetValue","Dictionary","_template","VE_Template","setTemplate","varExp","ForwardQuery","itemBuffer","endReached","problemCollector","endOfInputIndicator","undefined","nextOffset","offset","item","fetch","endOfInput","consumeNext","numberOfItems","shift","setProblemCollector","_paras","_function","func","expClone","printStr","Pow","args","NaN","Ln","Infinity","Lg","log10","Sqrt","sqrt","Abs","abs","Random","start","distance","random","Round","round","Sin","sin","ASin","asin","Cos","cos","ACos","acos","Tan","tan","ATan","atan","func_name","_functionsDic","addFunction","tempFunc","funcName","SeverityExp","msg","severity","_message","_severity","Warning","getPosition","getMessage","getSeverity","variable_1","_context","GetRootScope","_root","makeConstant","E","CreateWithParent","setType","Token","STRING","_source","_contents","_trigger","CreateAndFill","ch","addToTrigger","addToSource","addToContentChar","addToContent","getTokenType","setTokenType","new_type","setTrigger","setContent","content","setSource","source","EOI","symbols","isEndBracket","isStartSquareBracket","isEndSquareBracket","isStartBrace","isEndBrace","keywords","KEYWORD","values","triggers","SPECIAL_ID","isSpecialIdentifierWithContent","contents","NUMBER","BOOL","isString","forwardQuery_1","expChar_1","TokenReader","_super","_inputExp","_count","_operator","__extends","readChar","token_1","tokenReader_1","_decimalSeparator","_lineComment","_blockCommentStart","_blockCommentEnd","_brackets","_treatSinglePipeAsBracket","_specialIdStarters","_specialIdTerminators","_keywords","_keywordsCaseSensitive","_stringDelimiters","_boolConstant","isAtStartOfLineComment","skipToEndOfLine","isAtStartOfBlockComment","skipBlockComment","isAtStartOfNumber","fetchNumber","isAtStartOfIdentifier","fetchId","fetchString","isAtBracket","isAtStartOfSpecialId","fetchSpecialId","fetchOperator","hasDecimal","isIdentifierChar","specialId","handleKeywords","separator","canConsumeThisString","check_string","isAtEndOfBlockComment","in_symbol","id_token","keyword","keywordToken","addWarning","_constant","getName","scene_1","createSceneExpression","expression_str","sceneExp","errorMessage","createGlobalExpression","globalExp","Global","createLocalExpression","localExp","createFsmExpression","fsmExp","varArray","substring","startsWith","VARIABLE_SYMBOL","getParseGlobal","getParseScene","variables","VerySceneVariables","Variables","errorStr","isCreatedTemplate","getTemplate","table_name","_tableName","warning","getTableName","_errorList","GetError","Print","prefix","splice","warn","PrintWarnning","PrintError","TriggerGlobal","Init","AddKeyboard","key","_scenes","onKeyboardObservable","kbInfo","KeyboardEventTypes","KEYDOWN","_keyUpdate","event","_triggerList","RemoveKeyboard","KeyboardUpdate","_keysDic","unionID","clearProject","KEYMAP","_initialized","initZone","errorZone","showMsg","error_msg","errorContentNow","errorContentPrefix","display","closeBtn","querySelector","that","showWarn","close","TypeVar","action_1","variables_1","Action_Debug","apply","_debugMode","_typeList","_veryVarDic","_templateDic","_constDic","_separator","_strBuilder","VeryVar","para_array","ParaParserUtility","ParaNumbers","debugArray","VarTools","IsVarID","veryVar","GetVeryVarWithExpression","GetTemplate","destroy","Action_SetPosition","_posvalue","VeryNumber","_posVec","VeryVector3","_space","LOCAL","_isVec","_x","_y","_z","_axis","_trans","VeryGameObject","_ref","localPosition","oriFather","para1","VeryParas","GameObjectPara","BONE","para2","para4","Vector3OrNumberParaWithExpression","isVec","vector3","vecNumbers","NumberParaWithExpression","number","Action_Translate","_refType","_translateObj","_refObj","_isDeltaTime","VeryBool","_vecVar","_xVar","_yVar","_zVar","_paraTime","_paraVec","deltaTime","para3","BoolParaWithExpression","bool","Action_Vector3_Interpolate","_switch","_timer","_isLinear","_acceptVec","_timeFloat","_isVec1","_vecUnit1","_vecFloat1","_isVec2","_vecUnit2","_vecFloat2","Animation","timesUp","vec1","vec2","Lerp","Vector3Utility","Slerp","para5","Vector3Para","index_1","trigger_1","Trigger_MouseDown","_mouseButtonIndex","_downFlag","_observer","Trigger","onPointerObservable","pointInfo","PointerEventTypes","POINTERDOWN","button","sendEvent","POINTERUP","VE_TriggerBehaviour","Trigger_MouseUp","Trigger_MouseButton","_mouseUpdate","Trigger_Keyboard","_keyboard","VE_KeyboardMap","GetKey","Trigger_KeyDown","Trigger_KeyUp","Trigger_KeyboardCombine","_keyboards","_lastKey","all","VE_Triggers","Trigger_Start","Trigger_Continuous","expression_1","createProject","templates","globalVars","varData","varPara","VeryVarManager","hasVarType","newVar","addTemplate","addExpression","k","dataSource","fsmCount","fsmData","VeryString","initialValStr","VE_Fsm","addFsm","triggerCount","triggerPara","createTrigger","slice","actionCount","actionPara","stateData","hasStateValue","ValStr","VE_State","setConstValue","logicalAssociated","s","triggerData","triggerPos","findTrigger","addTriggerTarget","addLogicalSwitch","actionData","actionPos","enableVar","enableStr","everyFrameVar","everyFrameStr","isSequenceStr","stateAction","VE_StateAction","setAction","assignmentAction","getStateInSequence","associatedStateCount","associatedStateInfo","associatedPos","associatedState","VE_AssociatedState","multipleAssociatedState","www","stateValue","STATE_VALUE","strArray","aFsmID","stateArray","q","aObject","aObjectID","aFsm","toState","getState","global_vars","assignment","valArray","tObject","varParas","VE_StringFormat","isFormulaString","AssignmentFormulaCount","AssignmentPrefix","VeryExpression","rightVar","rightTemplate","leftType","leftVariable","setAssignment","object_name","destroy_on_create_new","AnalisysType","object_1","dataSource_1","createInstance_1","LoaderManager","_currentType","_lastFsmID","_lastObjectID","_activeTemplate","_activeObject","_activeFsmData","_activeStateData","_emptyLine","load","table","RowCount","getRow","templateID","isIDLegal","objName","nameArray","activeGameObject","tempObject","VeryEngineObject","paraData","paraSegment","paraArray","para2Array","hasState","StateCount","TriggerCount","idTemp","tempStr","newActionID","LogCount","equalIndex","actionNames","ActionCount","projects_1","_projects","VE_Projects","projects","addProject","isCreatedObjects","addObjects","VE_Objects","isCreatedTemplates","addTemplates","VE_Templates","isCreatedVariables","addVariables","VE_Variables","globalVarData","isCreatedGlobals","getGlobalVars","getTemplates","getVariables","getObjects","_objects","_variables","_templates","disposeProject","sleep","VE_Reset","_objectIDs","_objectDics","unloadObject","ArrayUtility","_expressions","_fsms","exp_id","expression","template_id","isCreatedVar","keys","forEach","_hasLoaded","initIfNeeded","stateConst_1","from_state","_types","_indexs","_posArray","_stateValues","_templateFsmIDs","_fromState","state_value","connect","currentType","Key","ASSOCIATED_STATE_PREFIX","fsm_variable","_id","_stateDics","_frameCount","_fsmVar","_veryObject","isCreatedState","state_index","Value","removeState","receiveEvent","getFrameId","VE_SequenceActions","_activeActionIndex","_stateActions","_activeActions","actions","associated_states","SequenceState","Prepared","activate","checkActionsFinished","start_index","StateActions","ActiveActions","actionRecover","AssociatedStates","stateAction_1","sequenceActions_1","_assignmentType","_isTemplateVar","_varID","_templateVar","_assignmentStr","_logicalExpression","_index","_stateVariable","_sequenceActions","_fsm","setInitialValue","setLogicalExpression","logical_exp","setTemplateInfo","assign_str","setStateVariable","very_var","state_action","addAssignment","associated_state","getTemplateVar","_type","_action","_assignment","_everyFrame","STATE_INDEX","_templateVarID","backupInstances","_instanceCount","instanceCount","setInstance","instance_obj","increase","template_var_id","cloneTemplate","_instanceDic","isCreatedInstance","getInstance","destory_on_create_new","errorPos","hasCreated","newObjectID","instance","_logicalSwitch","_logicalExp","_triggerTargets","VeryObject","_triggerID","isEnabled","setTriggerID","eventProcess","trigger_class","tempTrigger","_triggerFunctionDics","trigger_type","trigger_para","triggerArray","arr","ele","_keys","_values","Count","Remove","SetValue","ContainsKey","ks","GetKeys","GetValues","_keyMap","key_str","errorInfo_1","typeConvert_1","para_type","current_number","required_number","requiredStr","paras","var_str","GetVeryVar","vString","GameObjectParaOnlyVar","StringPara","StringParaOnlyVar","string","StringParaWithExpression","setExpression","NumberPara","NumberParaOnlyVar","isNaN","BoolPara","BoolParaOnlyVar","Vector3OrNumberPara","floatsArray","privateNumberPara","Vector3ParaWithExpression","privateNumberParaWithExpression","privateNumberParaOnlyVar","_escapeCharacters","_illegalChar","_formulaChar","strEscapeCharacterAction","para_str","tmpStr","getEscapeCharacter","strSubsectionAction","strBuilder","rStr","bracketFlag","hasQuote","para_char","getEscapeCharacter2","is_escape","strSubsection","needSpace","getParaArrayAll","coloneStr","newPara","j","innerBracket","saveBracket","quotationMark","isEscape","needSaveBracket","hasBracket","info","intConvert","num","floatConvert","end","veryExpression_1","GetGlobalVar","GetSceneVar","GetGlobalVarWithExpression","GetSceneVarWithExpression","_veryVars","_tempalteVars","value_str","newVal","var_type","_veryVarFunctions","addVarType","var_function","tempVar","getVarType","getSceneVariable","getGlobalVariable","getTemplateVariable","veryVarManager_1","babylonVariables_1","_isExpression","_expression","varClone","rValue","vec3Str","n1","n2","n3","showError_1","loaderManager_1","data","tableData","VeryTable","showErrorTest","veryTableRow_1","_columnIDs","_rows","newRow","VeryTableRow","row_index","column_index","getColumnID","floor","b","addRow","row_data","_rowData","array","insert","tempData","removeEnd","pop","VeryTableSet","tables","_tables","getTable","addTable","removeTable"],"mappings":"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","file":"veryengine.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","///// <reference path=\"./dts/babylon.d.ts\"/>\r\n\r\nimport { VeryEngine, VE_Objects, VE_Manager } from \"./veryengine/veryEngine\";\r\n\r\nimport { BabylonEngine } from \"./veryengine/babylon\";\r\n\r\nexport default class Game {\r\n\tprivate _canvas: HTMLCanvasElement;\r\n\tprivate _fps: HTMLElement;\r\n\tprivate _table!: HTMLElement;\r\n\tprivate _showFps: boolean = true;\r\n\tprivate _engine!: BABYLON.Engine;\r\n\tprivate _scene!: BABYLON.Scene;\r\n\t// private _camera!: BABYLON.FreeCamera;\r\n\r\n\tconstructor(canvasElement: HTMLCanvasElement, fps: HTMLElement) {\r\n\t\tthis._canvas = canvasElement;\r\n\t\tBabylonEngine.Canvas = this._canvas;\r\n\t\tthis._fps = fps;\r\n\t\t// this._engine = new BABYLON.Engine(this._canvas, true);\r\n\t\tthis._table = document.getElementById(\"VeryTable\")!;\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\tcreateScene(): Game {\r\n\t\t// engine\r\n\t\tif (this._engine) {\r\n\t\t\t// TODO: dispose\r\n\t\t\tVE_Manager.dispose();\r\n\t\t\t// console.log(VE_Manager.projects.projects);\r\n\t\t\tthis._engine.dispose();\r\n\t\t}\r\n\t\tthis._engine = new BABYLON.Engine(this._canvas, true);\r\n\t\tBabylonEngine.Engine = this._engine;\r\n\t\t// Resize\r\n\t\tlet engine = this._engine;\r\n\t\twindow.addEventListener(\"resize\", function () {\r\n\t\t\tengine.resize();\r\n\t\t});\r\n\r\n\t\tthis._scene = new BABYLON.Scene(this._engine);\r\n\t\tBabylonEngine.Scene = this._scene;\r\n\r\n\t\t// TODO: \r\n\t\tvar camera = new BABYLON.ArcRotateCamera(\"MainCamera\", 0, 0, 10, new BABYLON.Vector3(0, 0, 0), this._scene);\r\n\t\tcamera.setPosition(new BABYLON.Vector3(20, 200, 400));\r\n\t\tcamera.attachControl(this._canvas, true);\r\n\t\tcamera.lowerBetaLimit = 0.1;\r\n\t\tcamera.upperBetaLimit = (Math.PI / 2) * 0.99;\r\n\t\tcamera.lowerRadiusLimit = 150;\r\n\r\n\t\tlet inputMap: { [key: string]: boolean } = {};\r\n\r\n\t\t// \r\n\t\tengine.displayLoadingUI();\r\n\r\n\t\t// TODO: scene.babylon\r\n\t\tBABYLON.SceneLoader.Append(\"./scene/\", \"scene.babylon\", this._scene, function (scene) {\r\n\t\t\t// do something with the scene\r\n\t\t\t// \r\n\t\t\tengine.hideLoadingUI();\r\n\r\n\t\t\t// Keyboard events\r\n\t\t\t// var blue = scene.getMeshByName('blue')!;\r\n\r\n\t\t\t// scene.actionManager = new BABYLON.ActionManager(scene);\r\n\t\t\t// scene.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnKeyDownTrigger, function (evt) {\r\n\t\t\t// \tinputMap[evt.sourceEvent.key] = evt.sourceEvent.type == \"keydown\";\r\n\t\t\t// }));\r\n\t\t\t// scene.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnKeyUpTrigger, function (evt) {\r\n\t\t\t// \tinputMap[evt.sourceEvent.key] = evt.sourceEvent.type == \"keydown\";\r\n\t\t\t// }));\r\n\r\n\r\n\t\t\t// // Game/Render loop\r\n\t\t\t// scene.onBeforeRenderObservable.add(() => {\r\n\r\n\t\t\t// \tif (inputMap[\"w\"] || inputMap[\"ArrowUp\"]) {\r\n\t\t\t// \t\tblue.position.z -= 100 * engine.getDeltaTime() / 1000;\r\n\t\t\t// \t}\r\n\t\t\t// \tif (inputMap[\"a\"] || inputMap[\"ArrowLeft\"]) {\r\n\t\t\t// \t\tblue.position.x += 100 * engine.getDeltaTime() / 1000;\r\n\t\t\t// \t}\r\n\t\t\t// \tif (inputMap[\"s\"] || inputMap[\"ArrowDown\"]) {\r\n\t\t\t// \t\tblue.position.z += 100 * engine.getDeltaTime() / 1000;\r\n\t\t\t// \t}\r\n\t\t\t// \tif (inputMap[\"d\"] || inputMap[\"ArrowRight\"]) {\r\n\t\t\t// \t\tblue.position.x -= 100 * engine.getDeltaTime() / 1000;\r\n\t\t\t// \t}\r\n\t\t\t// })\r\n\r\n\t\t\t// // sphere\r\n\t\t\t// var sphere = scene.getMeshByName('sphere')!;\r\n\t\t\t// sphere.actionManager = new BABYLON.ActionManager(scene);\r\n\r\n\t\t\t// sphere.actionManager.registerAction(new BABYLON.SetValueAction(\r\n\t\t\t// \t{ trigger: BABYLON.ActionManager.OnIntersectionEnterTrigger, parameter: blue },\r\n\t\t\t// \tsphere, \"scaling\", new BABYLON.Vector3(2, 2, 2)));\r\n\r\n\t\t\t// sphere.actionManager.registerAction(new BABYLON.SetValueAction(\r\n\t\t\t// \t{ trigger: BABYLON.ActionManager.OnIntersectionExitTrigger, parameter: blue }\r\n\t\t\t// \t, sphere, \"scaling\", new BABYLON.Vector3(1, 1, 1)));\r\n\r\n\t\t\t// TODO: \r\n\t\t\t// console.log(hot1.getData());\r\n\t\t\tlet entrance: VeryEngine = new VeryEngine();\r\n\t\t\tconsole.log(`${hot1.countEmptyRows()}`);\r\n\t\t\ttry {\r\n\t\t\t\tentrance.init(hot1.getData(), projectName);\r\n\t\t\t} catch (e) { // TODO: \r\n\t\t\t\tconsole.error(e);\r\n\t\t\t}\r\n\r\n\t\t\tlet objects: VE_Objects = VE_Manager.objects(projectName);\r\n\t\t\t// \r\n\t\t\tscene.onBeforeRenderObservable.add(() => {\r\n\t\t\t\t// \r\n\t\t\t\t// Time._sum();\r\n\r\n\t\t\t\t// \r\n\t\t\t\tfor (let i: number = 0; i < objects.count; i++) {\r\n\t\t\t\t\tlet objectID: string = objects.getObjectID(i);\r\n\t\t\t\t\tobjects.getVeryObject(objectID).update();\r\n\t\t\t\t}\r\n\r\n\t\t\t})\r\n\r\n\t\t});\r\n\r\n\r\n\t\t// const lightPos = new BABYLON.Vector3(0, 1, 0);\r\n\t\t// new BABYLON.HemisphericLight('hemlight', lightPos, this._scene);\r\n\r\n\t\t// const sphereOpts = { segments: 16, diameter: 1 };\r\n\t\t// let sphere = BABYLON.MeshBuilder.CreateSphere(\r\n\t\t// \t'mainsphere',\r\n\t\t// \tsphereOpts,\r\n\t\t// \tthis._scene\r\n\t\t// );\r\n\t\t// sphere.position.y = 1;\r\n\r\n\t\t// const groundOpts = { width: 6, height: 6, subdivisions: 2 };\r\n\t\t// BABYLON.MeshBuilder.CreateGround('mainground', groundOpts, this._scene);\r\n\r\n\r\n\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\tanimate(): Game {\r\n\t\tthis._engine.runRenderLoop(() => {\r\n\t\t\tif (this._canvas.width !== this._canvas.clientWidth) {\r\n\t\t\t\tthis._engine.resize();\r\n\t\t\t}\r\n\r\n\t\t\tif (this._scene) {\r\n\t\t\t\tthis._scene.render();\r\n\t\t\t}\r\n\r\n\t\t\tif (this._showFps) {\r\n\t\t\t\tthis.updateFpsPos();\r\n\t\t\t}\r\n\r\n\r\n\t\t});\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * UI\r\n\t */\r\n\ttoggleDebug(): Game {\r\n\t\tif (this._engine) {\r\n\t\t\t// Always showing the debug layer, because you can close it by itself\r\n\t\t\tvar scene = this._engine.scenes[0];\r\n\t\t\tif (scene.debugLayer.isVisible()) {\r\n\t\t\t\tscene.debugLayer.hide();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// babylon.d.ts\r\n\t\t\t\tscene.debugLayer.show({ embedMode: true });\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * fps\r\n\t */\r\n\tupdateFpsPos(): void {\r\n\t\tif (this._fps) {\r\n\t\t\tthis._fps.style.right = document.body.clientWidth - (this._table.clientWidth + this._canvas.clientWidth) + \"px\";\r\n\r\n\t\t\tthis._fps.innerHTML = this._engine.getFps().toFixed() + \" fps\";\r\n\t\t}\r\n\t}\r\n}\r\n","\r\n\r\nimport Game from \"./game\";\r\n\r\nlet game!: Game;\r\nlet initFlag: boolean = false;\r\n\r\n/**\r\n * \r\n */\r\nfunction initGame(): void {\r\n  let canvas = <HTMLCanvasElement>document.getElementById(\"renderCanvas\");\r\n  let fpsLabel = document.getElementById(\"fpsLabel\");\r\n  if (canvas !== null && fpsLabel !== null) {\r\n    game = new Game(canvas, fpsLabel);\r\n    game.createScene().animate();  // \r\n  }\r\n}\r\n\r\nfunction runBtn(): void {\r\n  if (game) {\r\n    game.createScene().animate();\r\n  }\r\n}\r\n\r\nfunction toggleDebug(): void {\r\n  if (game) {\r\n    game.toggleDebug();\r\n  }\r\n}\r\n\r\nfunction init(): void {\r\n  // \r\n  if(dataLoaded) {\r\n    initGame();\r\n  } else {\r\n    setTimeout(init, 500);\r\n  }\r\n}\r\n\r\n// \r\ndocument.getElementById(\"runButton\")!.addEventListener(\"click\", runBtn);\r\n\r\n// \r\ndocument.getElementById(\"debugButton\")!.addEventListener(\"click\", toggleDebug);\r\n\r\n// \r\n// \r\ninit();\r\n// loadData2()\r\n//   .then(function (hot: HandTable) {\r\n//     console.log(hot.getData());\r\n//   }\r\n//   );\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import { ActionType, SequenceActionState } from \"../enum\";\r\nimport { GameObject } from \"../babylon\";\r\nimport { VeryEngineObject } from \"../object\";\r\nimport { VE_SequenceActions } from \"../state\";\r\n\r\nexport abstract class VE_ActionBehaviour {\r\n\r\n  public abstract get ID(): string;\r\n\r\n  public abstract get className(): string;\r\n\r\n  protected scene!: BABYLON.Scene;\r\n\r\n  public get enabled(): boolean {\r\n    return this._enabled;\r\n  }\r\n  public set enabled(val: boolean) {\r\n    this._enabled = val;\r\n  }\r\n  private _enabled: boolean = true;\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  };\r\n  private _projectName: string = '';\r\n\r\n  protected gameObject: Nullable<GameObject> = null;\r\n  protected veryObject: Nullable<VeryEngineObject> = null;\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  };\r\n  private _objectID: string = '';\r\n\r\n  public get actionID(): string {\r\n    return this._actionID;\r\n  }\r\n  private _actionID: string = '';\r\n\r\n  public get type(): ActionType {\r\n    return ActionType.Normal;\r\n  }\r\n\r\n  private _erveryFrame: boolean = false;\r\n  public get everyFrame(): boolean {\r\n    return this._erveryFrame;\r\n  }\r\n\r\n\r\n  public isSequence: boolean = false;\r\n\r\n  public get SequenceState(): SequenceActionState {\r\n    return this._sequenceState;\r\n  }\r\n  public set SequenceState(val: SequenceActionState) {\r\n    this._sequenceState = val;\r\n  }\r\n  private _sequenceState: SequenceActionState = SequenceActionState.Initial;\r\n\r\n  private _sequenceAction: Nullable<VE_SequenceActions> = null;\r\n\r\n  public set(scene: BABYLON.Scene): void {\r\n    this.scene = scene;\r\n  }\r\n\r\n  public setEveryFrame(is_every_frame: boolean): void {\r\n    this._erveryFrame = is_every_frame;\r\n  }\r\n\r\n  public setActionID(project_name: string, object_id: string, action_id: string): void {\r\n    this._projectName = project_name;\r\n    this._objectID = object_id;\r\n    this._actionID = action_id;\r\n  }\r\n\r\n  public setVeryObject(very_object: VeryEngineObject): void {\r\n    this.veryObject = very_object;\r\n    this.gameObject = very_object.gameObject;\r\n  }\r\n\r\n  public abstract paraParser(para_array: string[]): boolean;\r\n\r\n  public action(action_val: boolean, every_frame: boolean): void {\r\n    this._enabled = action_val;\r\n    this._erveryFrame = every_frame;\r\n    if (this._enabled) {\r\n      this.active()\r\n      if (!this._erveryFrame) {\r\n        this.onUpdate();\r\n      }\r\n    }\r\n  }\r\n\r\n  public sequenceAction(sequence: VE_SequenceActions, action_val: boolean, every_frame: boolean): void {\r\n    this._sequenceAction = sequence;\r\n    this._sequenceState = SequenceActionState.Running;\r\n    this.action(action_val, every_frame);\r\n  }\r\n\r\n  public abstract active(): void;\r\n\r\n\r\n  public update(): void {\r\n    if (this._enabled && this._erveryFrame) {\r\n      this.onUpdate();\r\n    }\r\n  }\r\n\r\n  public onUpdate(): void {\r\n\r\n  }\r\n\r\n  public pause(): void {\r\n    this._sequenceState = SequenceActionState.Pause;\r\n  }\r\n\r\n  public resume(): void {\r\n    this._sequenceState = SequenceActionState.Running;\r\n  }\r\n\r\n  public stop(): void {\r\n    this._sequenceState = SequenceActionState.Initial;\r\n  }\r\n\r\n  public finish(): void {\r\n    this._sequenceState = SequenceActionState.Initial;\r\n    if(this._sequenceAction !== null) {\r\n      this._sequenceAction.finishAction(this);\r\n      this._sequenceAction = null;\r\n    }\r\n    this.enabled = false;\r\n  }\r\n\r\n  // add callbackdestroy\r\n  public abstract destroy(): void;\r\n\r\n\r\n}","import { VE_ActionBehaviour } from \"./actionBehaviour\";\r\nimport { VeryEngineObject, VE_Objects } from \"../object\";\r\nimport { StateConst } from \"../state\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { GameGlobal, VE_ErrorManager, VE_Error } from \"../global\";\r\nimport { ErrorInfo, VE_TypeConvert } from \"../utility\";\r\nimport { BabylonEngine } from \"../babylon\";\r\nimport { Severity } from \"../enum\";\r\n\r\nexport class VE_Actions {\r\n\r\n  // private static _actionDics: { [key: string]: VE_ActionBehaviour } = {};\r\n\r\n  private static _actionFunctionDics: { [key: string]: Function } = {};\r\n\r\n  // public static addAction(action: VE_ActionBehaviour): void {\r\n  //   // \r\n  //   if (!GameGlobal.PlatformLoaded) {\r\n  //     let ids: string[] = action.ID.split('|');\r\n  //     for (let i: number = 0; i < ids.length; i++) {\r\n  //       let id: string = ids[i].trim().toLowerCase();\r\n  //       if (this._actionDics[id]) {\r\n  //         ShowError.showError(`IDID${id}ID`);\r\n  //       } else {\r\n  //         this._actionDics[id] = action;\r\n  //       }\r\n  //     }\r\n  //   }\r\n  // }\r\n\r\n  public static addAction(action_class: Function): void {\r\n    // \r\n    if (!GameGlobal.PlatformLoaded) {\r\n      let tempAction: any = new action_class.prototype.constructor();\r\n      // console.log(`ID  ${tempAction.ID}  ${tempAction.className} `);\r\n      let ids: string[] = tempAction.ID.split('|');\r\n      for (let i: number = 0; i < ids.length; i++) {\r\n        let id: string = ids[i].trim().toLowerCase();\r\n        if (this._actionFunctionDics[id]) {\r\n          VE_ErrorManager.Add(new VE_Error('', `IDID${id}${tempAction.className}ID`, '', Severity.Error));\r\n        } else {\r\n          this._actionFunctionDics[id] = action_class;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public static hasAction(action_id: string): boolean {\r\n    action_id = action_id.toLowerCase();\r\n    if (this._actionFunctionDics[action_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static createAction(very_object: VeryEngineObject, action_id: string, action_type: string, action_para: string[], init_val: string[], error_info: ErrorInfo): Nullable<VE_ActionBehaviour> {\r\n    action_type = action_type.toLowerCase();\r\n    if (!this._actionFunctionDics[action_type]) {\r\n      error_info.isRight = false;\r\n      error_info.message = `` + action_type;\r\n      return null;\r\n    }\r\n    // console.log(this._actionFunctionDics[action_type]);\r\n    let variable: any;\r\n    try {\r\n      // variable = Object.create(this._actionDics[action_type]);\r\n      // newObject.createprototype\r\n      variable = new this._actionFunctionDics[action_type].prototype.constructor();\r\n      if (!variable) {\r\n        error_info.isRight = false;\r\n        error_info.message = '' + action_type;\r\n        return null;\r\n      }\r\n\r\n      let action: VE_ActionBehaviour = <VE_ActionBehaviour>variable;\r\n      action.set(BabylonEngine.Scene);\r\n      action.setVeryObject(very_object);\r\n      action.setActionID(very_object.projectName, very_object.objectID, action_id);\r\n      if (!action.paraParser(action_para)) {\r\n        error_info.isRight = false;\r\n        error_info.message = \"\";\r\n        return null;\r\n      }\r\n      // TODO:\r\n      error_info.clear();\r\n      let everyFrameFlag = VE_TypeConvert.boolConvert(init_val[1], error_info);\r\n      if(!error_info.isRight) {\r\n        error_info.isRight = false;\r\n        error_info.message = \"booltruefalse\";\r\n        return null;\r\n      }\r\n      action.setEveryFrame(everyFrameFlag);\r\n      action.enabled = false;\r\n      return action;\r\n    } catch (error) {\r\n      console.error(`${error.message}`);\r\n      error_info.isRight = false;\r\n      error_info.message = '' + action_type + '' + error.message;\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static remove(action_type: string): void {\r\n    action_type = action_type.toLowerCase();\r\n    delete this._actionFunctionDics[action_type];\r\n  }\r\n\r\n  public static findAction(very_object: VeryEngineObject, action_id: string): Nullable<VE_ActionBehaviour> {\r\n    if (very_object.isCreatedAction(action_id)) {\r\n      return very_object.getAction(action_id);\r\n    }\r\n    else {\r\n      let actionArray: string[] = action_id.split(StateConst.STATE_SEPARATOR);\r\n      if (actionArray.length === 2) {\r\n        let objects: VE_Objects = VE_Manager.objects(very_object.projectName);\r\n        let objectID: string = actionArray[0].trim();\r\n        let actionID: string = actionArray[1].trim();\r\n        if (objects.isCreated(objectID)) {\r\n          let otherObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n          if (otherObject.isCreatedAction(actionID)) {\r\n            return otherObject.getAction(actionID);\r\n          }\r\n          else {\r\n            return null;\r\n          }\r\n        }\r\n        else {\r\n          return null;\r\n        }\r\n      }\r\n      else {\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public static dispose(): void {\r\n    VE_Actions._actionFunctionDics = {};\r\n  }\r\n}","import { VE_State } from \"../state\";\r\nimport { AssignType } from \"../enum\";\r\nimport { IVeryVar } from \"../variables\";\r\nimport { VE_Template } from \"../template\";\r\nimport { ShowError } from \"../html\";\r\nimport { ErrorInfo } from \"../utility\";\r\nimport { IExpression } from \"../expression\";\r\nimport { VE_AssignmentTypeJudge } from \"./assignmentTypeJudge\";\r\n\r\nexport class VE_Assignment {\r\n\r\n  public get state(): VE_State {\r\n    return this._state;\r\n  }\r\n  private _state: VE_State;\r\n\r\n  private _totalStr: string = '';\r\n\r\n  public get leftType(): AssignType {\r\n    return this._leftType;\r\n  }\r\n  private _leftType: AssignType = AssignType.Variable;\r\n\r\n  public get rightType(): AssignType {\r\n    return this._rightType;\r\n  }\r\n  private _rightType: AssignType = AssignType.Variable;\r\n\r\n  public get leftVariable(): Nullable<IVeryVar> {\r\n    return this._leftVariable;\r\n  }\r\n  private _leftVariable: Nullable<IVeryVar> = null;\r\n  private _leftTemplate: Nullable<VE_Template> = null;\r\n  private _leftVarID: string = '';\r\n\r\n  private _rightConstStr: string = '';\r\n  private _rightConstValue: any = null;\r\n  public get rightVariable(): Nullable<IVeryVar> {\r\n    return this._leftVariable;\r\n  }\r\n  private _rightVariable: Nullable<IVeryVar> = null;\r\n  private _rightTemplate: Nullable<VE_Template> = null;\r\n  private _rightVarID: string = '';\r\n\r\n  private _pos: string = '';\r\n\r\n  constructor(state: VE_State, total_string: string) {\r\n    this._state = state;\r\n    this._totalStr = total_string;\r\n  }\r\n\r\n  public setPos(pos: string): void {\r\n    this._pos = pos;\r\n  }\r\n\r\n  public setLeftVariable(variable: IVeryVar): void {\r\n    this._leftType = AssignType.Variable;\r\n    this._leftVariable = variable;\r\n  }\r\n\r\n  public setLeftTemplate(template: VE_Template): void {\r\n    this._leftType = AssignType.Template;\r\n    this._leftTemplate = template;\r\n  }\r\n\r\n  public setLeftTemplateVar(template: VE_Template, var_id: string): void {\r\n    this._leftType = AssignType.TemplateVariable;\r\n    this._leftTemplate = template;\r\n    this._leftVarID = var_id;\r\n  }\r\n\r\n  public setRightVariable(variable: IVeryVar): void {\r\n    this._rightType = AssignType.Variable;\r\n    this._rightVariable = variable;\r\n  }\r\n\r\n  public setRightTemplate(template: VE_Template): void {\r\n    this._rightType = AssignType.Template;\r\n    this._rightTemplate = template;\r\n  }\r\n\r\n  public setRightNull(): void {\r\n    this._rightType = AssignType.Template;\r\n    this._rightTemplate = null;\r\n  }\r\n\r\n  public setRightTemplateVariable(template: VE_Template, var_id: string): void {\r\n    this._rightType = AssignType.TemplateVariable;\r\n    this._rightTemplate = template;\r\n    this._rightVarID = var_id;\r\n  }\r\n\r\n  public setRightConst(const_str: string): void {\r\n    this._rightType = AssignType.Const;\r\n    this._rightConstStr = const_str;\r\n  }\r\n\r\n  public setRightConstValue(const_value: any) {\r\n    this._rightType = AssignType.Const;\r\n    this._rightConstValue = const_value;\r\n  }\r\n\r\n  public finish(): void {\r\n\r\n  }\r\n\r\n  public assign(): void {\r\n    // \r\n    if (this._leftType === AssignType.Variable) {\r\n      this.rightAssignment();\r\n    }\r\n    // \r\n    else if (this._leftType === AssignType.Template) {\r\n      if (this._rightTemplate == null) {\r\n        if (this._leftTemplate !== null) {\r\n          this._leftTemplate.unload();\r\n        }\r\n      }\r\n      else {\r\n        this._leftTemplate = this._rightTemplate;\r\n      }\r\n    }\r\n    // .\r\n    else {\r\n      if (this._leftTemplate!.templateInstance !== null) {\r\n        if (this._leftTemplate!.templateInstance.isCreatedExpression(this._leftVarID)) {\r\n          ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n          return;\r\n        }\r\n        else if (this._leftTemplate!.templateInstance.isCreatedVariable(this._leftVarID)) {\r\n          this._leftVariable = this._leftTemplate!.templateInstance.getVariable(this._leftVarID);\r\n          this.rightAssignment();\r\n        }\r\n        else if (this._leftTemplate!.templateInstance.isCreatedFsm(this._leftVarID)) {\r\n          this._leftVariable = this._leftTemplate!.templateInstance.getFsm(this._leftVarID).fsmVar;\r\n          this.rightAssignment();\r\n        }\r\n        else {\r\n          ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n          return;\r\n        }\r\n      }\r\n      else {\r\n        ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._leftTemplate!.templateVarID);\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n  private rightAssignment(): void {\r\n    // \r\n    if (this._rightType === AssignType.Variable) {\r\n      this._leftVariable!.setValue(this._rightVariable!.getValue());\r\n    }\r\n    // \r\n    else if (this._rightType === AssignType.Const) {\r\n      if (this._rightConstValue === null) {\r\n        let errorInfo: ErrorInfo = new ErrorInfo();\r\n        this._rightConstValue = this._leftVariable!.initValue(this._rightConstStr, errorInfo);\r\n        if (!errorInfo.isRight) {\r\n          ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightConstStr);\r\n          return;\r\n        }\r\n        else {\r\n          //UnityEngine.Debug.Log(\"1 - \" + _totalStr + \"\" + this._rightConstValue);\r\n          this._leftVariable!.setValue(this._rightConstValue);\r\n        }\r\n      }\r\n      else {\r\n        //UnityEngine.Debug.Log(\"2 - \" + _totalStr + \"\" + this._rightConstValue);\r\n        this._leftVariable!.setValue(this._rightConstValue);\r\n      }\r\n    }\r\n    else  //.\r\n    {\r\n      if (this._rightTemplate!.templateInstance != null) {\r\n        if (this._rightTemplate!.templateInstance.isCreatedExpression(this._rightVarID)) {\r\n          let exp: IExpression = this._rightTemplate!.templateInstance.getExpression(this._rightVarID);\r\n          if (VE_AssignmentTypeJudge.allowExpression(this._leftVariable!, exp)) {\r\n            this._leftVariable!.setValue(exp.evaluate());\r\n          }\r\n          else {\r\n            ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n            return;\r\n          }\r\n        }\r\n        else if (this._rightTemplate!.templateInstance.isCreatedVariable(this._rightVarID)) {\r\n          let v: IVeryVar = this._rightTemplate!.templateInstance.getVariable(this._rightVarID);\r\n          if (VE_AssignmentTypeJudge.allow(this._leftVariable!, v)) {\r\n            this._leftVariable!.setValue(v.getValue());\r\n          }\r\n          else {\r\n            ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n            return;\r\n          }\r\n        }\r\n        else if (this._rightTemplate!.templateInstance.isCreatedFsm(this._rightVarID)) {\r\n          let v: IVeryVar = this._rightTemplate!.templateInstance.getFsm(this._rightVarID).fsmVar;\r\n          if (VE_AssignmentTypeJudge.allow(this._leftVariable!, v)) {\r\n            this._leftVariable!.setValue(v.getValue());\r\n          }\r\n          else {\r\n            ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n            return;\r\n          }\r\n        }\r\n        else {\r\n          ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n          return;\r\n        }\r\n      }\r\n      else {\r\n        ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n}","import { IVeryVar } from \"../variables\";\r\nimport { IExpression } from \"../expression\";\r\n\r\nexport class VE_AssignmentTypeJudge {\r\n\r\n  public static allow(first: IVeryVar, second: IVeryVar): boolean {\r\n    if (first.varType === second.varType) {\r\n      return true;\r\n    }\r\n    else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static allowExpression(first: IVeryVar, second: IExpression): boolean {\r\n    if (first.varType === second.expType) {\r\n      return true;\r\n    }\r\n    else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n}","export * from './actionBehaviour';\r\nexport * from './assignment';\r\nexport * from './actions';","import { BabylonEngine } from \"./engine\";\r\n\r\n\r\nexport class GameObject {\r\n\r\n\r\n  public get gameObject(): GameObject {\r\n    return this;\r\n  }\r\n\r\n  public get transform(): Transform {\r\n    return this._transform;\r\n  }\r\n  public set transform(val: Transform) {\r\n    this._transform = val;\r\n  }\r\n  private _transform: Transform;\r\n\r\n  public get name(): string {\r\n    return this.transform.name;\r\n  }\r\n  public set name(val: string) {\r\n    this.transform.name = val;\r\n  }\r\n\r\n  public get isEmpty(): boolean {\r\n    return this._transform.isEmpty;\r\n  }\r\n\r\n  public get mesh(): Nullable<BABYLON.AbstractMesh> {\r\n    return this._transform.mesh;\r\n  }\r\n\r\n  constructor(name?: string, mesh: Nullable<BABYLON.AbstractMesh> = null, node: Nullable<BABYLON.TransformNode> = null) {\r\n    if (mesh) {\r\n      this._transform = new Transform('', mesh);\r\n    } else {\r\n      if (node) {\r\n        this._transform = new Transform('', null, node);\r\n      } else if (name) {\r\n        this._transform = new Transform(name);\r\n      } else {\r\n        this._transform = new Transform();\r\n      }\r\n    }\r\n  }\r\n\r\n  // TODO\r\n  public static Find(name: string, scene?: BABYLON.Scene): Nullable<GameObject> {\r\n    if (!scene) {\r\n      scene = BabylonEngine.Scene;\r\n    }\r\n    let node: Nullable<BABYLON.Node> = scene.getNodeByName(name);\r\n    if (!node) {\r\n      return null;\r\n    } else {\r\n      if (node instanceof BABYLON.AbstractMesh) {\r\n        return new GameObject('', <BABYLON.AbstractMesh>node);\r\n      } else if (node instanceof BABYLON.TransformNode) {\r\n        return new GameObject('', null, <BABYLON.TransformNode>node);\r\n      } else {\r\n        console.error('GameObject.Find' + node.getClassName());\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public static CreateInstance(game_object: GameObject): Nullable<GameObject> {\r\n    if (!game_object) {\r\n      return null;\r\n    }\r\n\r\n    if (game_object.isEmpty) {\r\n      return new GameObject();\r\n    } else {\r\n      if (game_object.transform.mesh) {\r\n        let tempMesh: BABYLON.AbstractMesh;\r\n        if (game_object.transform.mesh instanceof BABYLON.Mesh) {\r\n          tempMesh = (<BABYLON.Mesh>game_object.transform.mesh).createInstance(game_object.name + '_instance');\r\n        } else {\r\n          tempMesh = (<BABYLON.InstancedMesh>game_object.transform.mesh).sourceMesh.createInstance(game_object.name + '_instance');\r\n        }\r\n        return new GameObject('', tempMesh);\r\n      } else {\r\n        let newNode: Nullable<BABYLON.TransformNode> = game_object.transform.transformNode!.clone(game_object.name + '_intance');\r\n        return new GameObject('', null, newNode);\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  // public static empty(name: string): GameObject {\r\n\r\n  // }\r\n\r\n}\r\n\r\n\r\nexport class Transform {\r\n\r\n  // public get gameObject(): GameObject {\r\n  //   return this._gameObject;\r\n  // }\r\n  // private _gameObject: GameObject;\r\n\r\n  private _transformNode: BABYLON.Nullable<BABYLON.TransformNode> = null;\r\n  private _mesh: BABYLON.Nullable<BABYLON.AbstractMesh> = null;\r\n\r\n  public get transformNode(): Nullable<BABYLON.TransformNode> {\r\n    if (this._mesh) {\r\n      return this._mesh;\r\n    } else if (this._transformNode) {\r\n      return this._transformNode;\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public get mesh(): Nullable<BABYLON.AbstractMesh> {\r\n    return this._mesh;\r\n  }\r\n\r\n  public get isMesh(): boolean {\r\n    if (this._mesh) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public get isEmpty(): boolean {\r\n    if (this._transformNode || this._mesh) {\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  // public get parent(): Nullable<BABYLON.TransformNode>\r\n\r\n  public get name(): string {\r\n    return this._name;\r\n  }\r\n  public set name(val: string) {\r\n    if (this._transformNode) {\r\n      this._transformNode.name = val;\r\n    }\r\n    if (this._mesh) {\r\n      this._mesh.name = val;\r\n    }\r\n    this._name = val;\r\n  }\r\n  private _name: string = '';\r\n\r\n  private _tempVec: BABYLON.Vector3 = BABYLON.Vector3.Zero();\r\n\r\n  public get parent(): Nullable<Transform> {\r\n    return this._parent;\r\n  }\r\n  private _parent: Nullable<Transform> = null;\r\n\r\n  public set parent(val: Nullable<Transform>) {\r\n    if (!this.isEmpty) {\r\n      if (val && !val.isEmpty) {\r\n        this._transformNode!.setParent(val.transformNode);\r\n        this._parent = val;\r\n      } else {\r\n        this._transformNode!.setParent(null);\r\n        this._parent = null;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public get localPosition(): BABYLON.Vector3 {\r\n    if (this.isEmpty) {\r\n      return BABYLON.Vector3.Zero();\r\n    } else {\r\n      this._tempVec.copyFrom(this.transformNode!.position);\r\n      return this._tempVec;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public set localPosition(val: BABYLON.Vector3) {\r\n    if (!this.isEmpty) {\r\n      this.transformNode!.position = val;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public get position(): BABYLON.Vector3 {\r\n    if (this.isEmpty) {\r\n      return BABYLON.Vector3.Zero();\r\n    } else {\r\n      this._tempVec.copyFrom(this.transformNode!.getAbsolutePosition());\r\n      return this._tempVec;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public set position(val: BABYLON.Vector3) {\r\n    if (!this.isEmpty) {\r\n      this.transformNode!.setAbsolutePosition(val);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public get localEulerAngles(): BABYLON.Vector3 {\r\n    if (this.isEmpty) {\r\n      return BABYLON.Vector3.Zero();\r\n    } else {\r\n      let para: number = 180 / Math.PI;\r\n      return this.transformNode!.rotation.multiplyByFloats(para, para, para);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public set localEulerAngles(val: BABYLON.Vector3) {\r\n    if (!this.isEmpty) {\r\n      let para: number = Math.PI / 180;\r\n      this.transformNode!.rotation = val.multiplyByFloats(para, para, para);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public get localRotation(): BABYLON.Vector3 {\r\n    if (this.isEmpty) {\r\n      return BABYLON.Vector3.Zero();\r\n    } else {\r\n      this._tempVec.copyFrom(this.transformNode!.rotation);\r\n      return this._tempVec;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public set localRotation(val: BABYLON.Vector3) {\r\n    if (!this.isEmpty) {\r\n      this.transformNode!.rotation = val;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public get eulerAngles(): BABYLON.Vector3 {\r\n    if (this.isEmpty) {\r\n      return BABYLON.Vector3.Zero();\r\n    } else {\r\n      let parent: Nullable<BABYLON.Node> = this.transformNode!.parent;\r\n      let para: number = 180 / Math.PI;\r\n      this.transformNode!.setParent(null);\r\n      let result: BABYLON.Vector3 = this.transformNode!.rotation.multiplyByFloats(para, para, para);\r\n      this.transformNode!.setParent(parent);\r\n      return result;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public set eulerAngles(val: BABYLON.Vector3) {\r\n    if (!this.isEmpty) {\r\n      let parent: Nullable<BABYLON.Node> = this.transformNode!.parent;\r\n      let para: number = Math.PI / 180;\r\n      this.transformNode!.setParent(null);\r\n      this.transformNode!.rotation = val.multiplyByFloats(para, para, para);\r\n      this.transformNode!.setParent(parent);\r\n\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public get rotation(): BABYLON.Vector3 {\r\n    if (this.isEmpty) {\r\n      return BABYLON.Vector3.Zero();\r\n    } else {\r\n      let parent: Nullable<BABYLON.Node> = this.transformNode!.parent;\r\n      this.transformNode!.setParent(null);\r\n      this._tempVec.copyFrom(this.transformNode!.rotation);\r\n      this.transformNode!.setParent(parent);\r\n      return this._tempVec;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public set rotation(val: BABYLON.Vector3) {\r\n    if (!this.isEmpty) {\r\n      let parent: Nullable<BABYLON.Node> = this.transformNode!.parent;\r\n      this.transformNode!.setParent(null);\r\n      this.transformNode!.rotation = val;\r\n      this.transformNode!.setParent(parent);\r\n    }\r\n  }\r\n\r\n\r\n  public get childCount(): number {\r\n    return 0;\r\n  }\r\n\r\n  public forward: BABYLON.Vector3 = BABYLON.Vector3.Forward();\r\n\r\n\r\n  public get hierarchyCount(): number {\r\n    return 0;\r\n  }\r\n\r\n  public localScale: BABYLON.Vector3 = new BABYLON.Vector3(1, 1, 1);\r\n\r\n\r\n\r\n  constructor(name?: string, mesh: Nullable<BABYLON.AbstractMesh> = null, node: Nullable<BABYLON.TransformNode> = null) {\r\n    if (mesh) {\r\n      this._mesh = mesh;\r\n      this._transformNode = mesh;\r\n      this._name = mesh.name;\r\n    } else {\r\n      if (node) {\r\n        this._mesh = null;\r\n        this._transformNode = node;\r\n        this._name = node.name;\r\n      } else if (name) {\r\n        this._mesh = null;\r\n        this._transformNode = new BABYLON.TransformNode(name);\r\n        this._name = name;\r\n      } else {\r\n        this._mesh = null;\r\n        this._transformNode = null;\r\n        this._name = '';\r\n      }\r\n    }\r\n\r\n    // \r\n    if (this._transformNode) {\r\n      let tempParent: Nullable<BABYLON.Node> = this._transformNode.parent;\r\n      if (tempParent) {\r\n        if (tempParent instanceof BABYLON.AbstractMesh) {\r\n          this._parent = new Transform(tempParent.name, <BABYLON.AbstractMesh>tempParent);\r\n        } else {\r\n          this._parent = new Transform(tempParent.name, null, <BABYLON.TransformNode>tempParent);\r\n        }\r\n      }\r\n    } else {\r\n      this._parent = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param translation \r\n   * @param relativeTo LOCALWORLD\r\n   */\r\n  public translate(translation: BABYLON.Vector3, relativeTo: BABYLON.Space): void {\r\n    if (this.transformNode) {\r\n      this.transformNode.translate(translation, 1, relativeTo);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * null\r\n   * @param translation \r\n   * @param trans \r\n   */\r\n  public translateRelativeTo(translation: BABYLON.Vector3, trans: Transform): void {\r\n    if (this.transformNode) {\r\n      let direction: BABYLON.Vector3 = translation.clone();\r\n      if (trans && trans.transformNode) {\r\n        direction = this.transformDirection(direction);\r\n      }\r\n      this.transformNode.translate(direction, 1, BABYLON.Space.WORLD);\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  /**\r\n   * \r\n   * @param local_position \r\n   * Vector3\r\n   */\r\n  public transformPosition(local_position: BABYLON.Vector3): BABYLON.Vector3 {\r\n    if (this.transformNode) {\r\n      let matrix: BABYLON.Matrix = this.transformNode.computeWorldMatrix();\r\n      return BABYLON.Vector3.TransformCoordinates(local_position, matrix);\r\n    } else {\r\n      return local_position;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param local_direction \r\n   * Vector3\r\n   */\r\n  public transformDirection(local_direction: BABYLON.Vector3): BABYLON.Vector3 {\r\n    if (this.transformNode) {\r\n      let matrix: BABYLON.Matrix = this.transformNode.computeWorldMatrix();\r\n      return BABYLON.Vector3.TransformCoordinates(local_direction, matrix).subtract(this.transformNode.getAbsolutePosition());\r\n    } else {\r\n      return local_direction;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param global_position \r\n   * Vector3\r\n   */\r\n  public inverseTransformPosition(global_position: BABYLON.Vector3): BABYLON.Vector3 {\r\n    if (this.transformNode) {\r\n      let matrix: BABYLON.Matrix = BABYLON.Matrix.Invert(this.transformNode.computeWorldMatrix());\r\n      return BABYLON.Vector3.TransformCoordinates(global_position, matrix);\r\n    } else {\r\n      return global_position;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param global_direction \r\n   * Vector3\r\n   */\r\n  public inverseTransformDirection(global_direction: BABYLON.Vector3): BABYLON.Vector3 {\r\n    if (this.transformNode) {\r\n      let matrix: BABYLON.Matrix = BABYLON.Matrix.Invert(this.transformNode.computeWorldMatrix());\r\n      let pointA: BABYLON.Vector3 = BABYLON.Vector3.TransformCoordinates(global_direction, matrix);\r\n      let pointOrigin: BABYLON.Vector3 = BABYLON.Vector3.TransformCoordinates(BABYLON.Vector3.Zero(), matrix);\r\n      return pointA.subtract(pointOrigin);\r\n    } else {\r\n      return global_direction;\r\n    }\r\n  }\r\n\r\n}\r\n\r\n\r\n// let trans: Transform = new Transform();\r\n// let trans2: Transform = new Transform(null, null, 'my name');\r\n// let trans3: Transform = new Transform(new BABYLON.TransformNode('a', null));","export class BabylonEngine {\r\n  public static Canvas: HTMLCanvasElement;\r\n  public static Engine: BABYLON.Engine;\r\n  public static Scene: BABYLON.Scene;\r\n}","export * from './babylonVariables';\r\nexport * from './time';\r\nexport * from './engine';","import { BabylonEngine } from \"./engine\";\r\n\r\nexport class Time {\r\n  \r\n  public static get frameCount(): number {\r\n    return this._frame;\r\n  }\r\n  private static _frame: number = 0;\r\n\r\n\r\n  public static get deltaTime(): number {\r\n    // return 1.0 / GameGlobal.Engine.getFps();\r\n    return BabylonEngine.Engine.getDeltaTime() * 0.001;\r\n  }\r\n\r\n  public static _sum(): void {\r\n    this._frame++;\r\n  }\r\n}","import { VE_FsmData } from \"./fsmData\";\r\n\r\nexport class VE_DataSource {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = '';\r\n\r\n  public get templateID(): string {\r\n    return this._templateID;\r\n  }\r\n  private _templateID: string = '';\r\n\r\n  public get isTemplate(): boolean {\r\n    return this._isTemplate;\r\n  }\r\n  private _isTemplate: boolean = false;\r\n\r\n  public get id(): string {\r\n    if (this._isTemplate) {\r\n      return this._templateID;\r\n    } else {\r\n      return this._objectID;\r\n    }\r\n  }\r\n\r\n  private _fsmIDs: string[] = [];\r\n  private _fsmDic: { [key: string]: VE_FsmData } = {};\r\n  private _fsmPosDic: { [key: string]: string } = {};\r\n\r\n  private _triggerIDs: string[] = [];\r\n  private _triggerDic: { [key: string]: string[] } = {};\r\n  private _triggerPosDic: { [key: string]: string } = {};\r\n\r\n  private _actionIDs: string[] = [];\r\n  private _actionDic: { [key: string]: string[] } = {};\r\n  private _actionInitValue: { [key: string]: string[] } = {};\r\n  private _actionPosDic: { [key: string]: string } = {};\r\n\r\n  public get triggerCount(): number {\r\n    return this._triggerIDs.length;\r\n  }\r\n\r\n  public get actionCount(): number {\r\n    return this._actionIDs.length;\r\n  }\r\n\r\n  public get fsmCount(): number {\r\n    return this._fsmIDs.length;\r\n  }\r\n\r\n\r\n  constructor(project_name: string, name_id: string, is_template: boolean) {\r\n    this._projectName = project_name;\r\n    this._isTemplate = is_template;\r\n    if(is_template) {\r\n      this._templateID = name_id;\r\n    } else {\r\n      this._objectID = name_id;\r\n    }\r\n  }\r\n\r\n  public isCreatedFsm(fsm_id: string): boolean {\r\n    if(this._fsmDic[fsm_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public createFsm(fsm_id: string, pos: string): void {\r\n    this._fsmIDs.push(fsm_id);\r\n    this._fsmDic[fsm_id] = new VE_FsmData(fsm_id, this);\r\n    this._fsmPosDic[fsm_id] = pos;\r\n  }\r\n\r\n  public getFsmData(fsm_id: string): VE_FsmData {\r\n    return this._fsmDic[fsm_id];\r\n  }\r\n\r\n  public getFsmPos(fsm_id: string): string {\r\n    return this._fsmPosDic[fsm_id];\r\n  }\r\n\r\n  public hasFsmIndex(index: number): boolean {\r\n    if(index >= 0 && index < this._fsmIDs.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getFsmID(index: number): string {\r\n    return this._fsmIDs[index];\r\n  }\r\n\r\n  public isCreatedTrigger(trigger_id: string): boolean {\r\n    if(this._triggerDic[trigger_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTrigger(trigger_id: string, trigger_data: string[], pos: string): void {\r\n    this._triggerIDs.push(trigger_id);\r\n    this._triggerDic[trigger_id] = trigger_data;\r\n    this._triggerPosDic[trigger_id] = pos;\r\n  }\r\n\r\n  public getTrigger(trigger_id: string): string[] {\r\n    return this._triggerDic[trigger_id];\r\n  }\r\n\r\n  public getTriggerPos(trigger_id: string): string {\r\n    return this._triggerPosDic[trigger_id];\r\n  }\r\n\r\n  public hasTriggerIndex(index: number): boolean {\r\n    if(index >=0 && index < this._triggerIDs.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getTriggerID(index: number): string {\r\n    return this._triggerIDs[index];\r\n  }\r\n\r\n  public getTriggerPara(trigger_id: string): string[] {\r\n    return this._triggerDic[trigger_id];\r\n  }\r\n\r\n  public isCreatedAction(action_id: string): boolean {\r\n    if(this._actionDic[action_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addAction(action_id: string, action_data: string[], action_init_val: string[], pos: string): void {\r\n    this._actionIDs.push(action_id);\r\n    this._actionDic[action_id] = action_data;\r\n    this._actionInitValue[action_id] = action_init_val;\r\n    this._actionPosDic[action_id] = pos;\r\n  }\r\n\r\n  public getActionPara(action_id: string): string[] {\r\n    return this._actionDic[action_id];\r\n  }\r\n\r\n  public getActionPos(action_id: string): string {\r\n    return this._actionPosDic[action_id];\r\n  }\r\n\r\n  public getActionInitVal(action_id: string): string[] {\r\n    return this._actionInitValue[action_id];\r\n  }\r\n\r\n  public hasActionIndex(index: number): boolean {\r\n    if(index >= 0 && index < this._actionIDs.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getActionID(index: number): string {\r\n    return this._actionIDs[index];\r\n  }\r\n\r\n  public clear(): void {\r\n    this._fsmIDs = [];\r\n    this._fsmDic = {};\r\n    this._triggerIDs = [];\r\n    this._triggerDic = {};\r\n    this._actionIDs = [];\r\n    this._actionDic = {};\r\n    this._actionInitValue = {};\r\n  }\r\n\r\n\r\n\r\n}","import { VE_DataSource, VE_StateData } from \"./index\";\r\n\r\nexport class VE_FsmData {\r\n  public get dataSource(): VE_DataSource {\r\n    return this._dataSource;\r\n  }\r\n  private _dataSource: VE_DataSource;\r\n\r\n  public get fsmID(): string {\r\n    return this._fsmID;\r\n  }\r\n  private _fsmID: string;\r\n\r\n  public get fsmType(): string {\r\n    return this._fsmType;\r\n  }\r\n  private _fsmType: string = '';\r\n\r\n  public get initialValStr(): string {\r\n    return this._initialValStr;\r\n  }\r\n  private _initialValStr: string = '';\r\n\r\n  private _states: VE_StateData[] = [];\r\n\r\n  public get count(): number {\r\n    return this._states.length;\r\n  }\r\n\r\n  constructor(fsm_id: string, data_source: VE_DataSource) {\r\n    this._dataSource = data_source;\r\n    this._fsmID = fsm_id;\r\n  }\r\n\r\n  public initFsm(fsm_type: string, initial_var: string): void {\r\n    this._fsmType = fsm_type;\r\n    this._initialValStr = initial_var;\r\n  }\r\n\r\n  public addState(state_data: VE_StateData): void {\r\n    this._states.push(state_data);\r\n  }\r\n\r\n  public getStateData(index: number): VE_StateData {\r\n    return this._states[index];\r\n  }\r\n\r\n}","export * from './variableData';\r\nexport * from './fsmData';\r\nexport * from './stateActionData';\r\nexport * from './stateTriggerData';\r\nexport * from './stateData';\r\nexport * from './dataSource';\r\n\r\n","import { StateActionType } from \"../enum\";\r\n\r\nexport class VE_StateActionData {\r\n\r\n  public actionID: string;\r\n  // 1///2true/false3/bool\r\n  public enabled: string;\r\n  public everyFrame: string;\r\n  public isSequence: string;\r\n  public type: StateActionType;\r\n  public totalString: string = '';\r\n  public varID: string = '';\r\n  public varValue: string = '';\r\n\r\n  constructor(action_id: string, enabled: string = 'false', every_frame: string = 'false', sequence: string = 'false', type: StateActionType = StateActionType.Action) {\r\n    this.actionID = action_id;\r\n    this.enabled = enabled;\r\n    this.everyFrame = every_frame;\r\n    this.isSequence = sequence;\r\n    this.type = type;\r\n  }\r\n\r\n  public setNormalAction(action_id: string, enabled: string = 'false', every_frame: string = 'false', sequence: string = 'false'): void {\r\n    this.actionID = action_id;\r\n    this.enabled = enabled;\r\n    this.everyFrame = every_frame;\r\n    this.isSequence = sequence;\r\n    this.type = StateActionType.Action;\r\n  }\r\n\r\n  public setAssignmentAction(total_string: string, var_id: string, var_value: string): void {\r\n    this.totalString = total_string;\r\n    this.varID = var_id;\r\n    this.varValue = var_value;\r\n    this.type = StateActionType.Assignment;\r\n  }\r\n\r\n}","import { VE_FsmData } from \"./index\";\r\nimport { StateConst } from \"../state\";\r\nimport { VE_StateTriggerData } from \"./stateTriggerData\";\r\nimport { VE_StateActionData } from \"./stateActionData\";\r\n\r\nexport class VE_StateData {\r\n\r\n  public get fsmData(): VE_FsmData {\r\n    return this._fsmData;\r\n  }\r\n  private _fsmData: VE_FsmData;\r\n\r\n  public get ValStr(): string {\r\n    return this._valStr;\r\n  }\r\n  private _valStr: string;\r\n\r\n  public get isInitialValue(): boolean {\r\n    return this._isInitialValue;\r\n  }\r\n  private _isInitialValue: boolean;\r\n\r\n  public logicalExp: string = '';\r\n\r\n  public rowIndex: number = -1;\r\n\r\n  private _triggers: VE_StateTriggerData[] = [];\r\n  private _triggersPos: string[] = [];\r\n  private _actions: VE_StateActionData[] = [];\r\n  private _actionsPos: string[] = [];\r\n  private _associatedStates: string[] = [];\r\n  private _associatedStatesPos: string[] = [];\r\n\r\n  public get isSequence(): boolean {\r\n    return this._isSequence;\r\n  }\r\n  private _isSequence: boolean = false;\r\n\r\n  public get triggerCount(): number {\r\n    return this._triggers.length;\r\n  }\r\n\r\n  public get actionCount(): number {\r\n    return this._actions.length;\r\n  }\r\n\r\n  public get associatedStateCount(): number {\r\n    return this._associatedStates.length;\r\n  }\r\n\r\n  constructor(fsm_data: VE_FsmData, val_str: string, is_initial_value: boolean) {\r\n    this._fsmData = fsm_data;\r\n    this._valStr = val_str;\r\n    this._isInitialValue = is_initial_value;\r\n  }\r\n\r\n  public hasTrigger(index: number): boolean {\r\n    if(index >= 0 && index < this._triggers.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTrigger(trigger_data: VE_StateTriggerData, pos: string): void {\r\n    this._triggers.push(trigger_data);\r\n    this._triggersPos.push(pos);\r\n  }\r\n\r\n  public getTrigger(index: number): VE_StateTriggerData {\r\n    return this._triggers[index];\r\n  }\r\n\r\n  public getTriggerPos(index: number): string {\r\n    return this._triggersPos[index];\r\n  }\r\n\r\n  public hasAction(index: number): boolean {\r\n    if(index >= 0 && index < this._actions.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addAction(action_data: VE_StateActionData, pos: string): void {\r\n    this._actions.push(action_data);\r\n    this._actionsPos.push(pos);\r\n  }\r\n\r\n  public getAction(index: number): VE_StateActionData {\r\n    return this._actions[index];\r\n  }\r\n\r\n  public getActionPos(index: number): string {\r\n    return this._actionsPos[index];\r\n  }\r\n\r\n  public hasAssociatedState(index: number): boolean {\r\n    if(index >= 0 && index < this._associatedStates.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addAssociatedState(associated_state_data: string, pos: string): void {\r\n    this._associatedStates.push(associated_state_data);\r\n    this._associatedStatesPos.push(pos);\r\n  }\r\n\r\n  public getAssociatedState(index: number): string {\r\n    return this._associatedStates[index];\r\n  }\r\n\r\n  public getAssociatedStatePos(index: number): string {\r\n    return this._associatedStatesPos[index];\r\n  }\r\n\r\n  public setSequence(): void {\r\n    this._isSequence = true;\r\n  }\r\n\r\n}","export class VE_StateTriggerData {\r\n\r\n  public triggerID: string;\r\n  public logicalSwitch: string;\r\n  public logicalExp: string;\r\n\r\n  public static get Empty(): VE_StateTriggerData {\r\n    return new VE_StateTriggerData('');\r\n  }\r\n\r\n  constructor(trigger_id: string) {\r\n    this.triggerID = trigger_id;\r\n    this.logicalSwitch = '';\r\n    this.logicalExp = '';\r\n   }\r\n}","export class VE_VariableData {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  private _variableIDs: string[] = [];\r\n  private _varDics: { [key: string]: string[] } = {};\r\n  private _varPosDic: { [key: string]: string } = {};\r\n\r\n  public get count(): number {\r\n    return this._variableIDs.length;\r\n  }\r\n\r\n  constructor(project_name: string) {\r\n    this._projectName = project_name;\r\n  }\r\n\r\n  public isCreatedVariable(var_id: string): boolean {\r\n    if (this._varDics[var_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addVariable(var_id: string, var_paras: string[], pos: string): void {\r\n    this._varDics[var_id] = var_paras;\r\n    this._variableIDs.push(var_id);\r\n    this._varPosDic[var_id] = pos;\r\n  }\r\n\r\n  public getVariableID(index: number): string {\r\n    if (index >= 0 && index < this._variableIDs.length) {\r\n      return this._variableIDs[index];\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n\r\n  public getVariableParas(var_id: string): string[] {\r\n    return this._varDics[var_id];\r\n  }\r\n\r\n  public getPos(var_id: string): string {\r\n    return this._varPosDic[var_id];\r\n  }\r\n\r\n  public clear(): void {\r\n    this._variableIDs = [];\r\n    this._varDics = {};\r\n  }\r\n}","\r\n\r\n\r\nexport enum ActionType {\r\n  Normal, Animation\r\n}\r\n\r\nexport enum SequenceActionState {\r\n  Initial, Prepared, Running, Pause\r\n}\r\n\r\nexport enum StateActionType {\r\n  Action, Assignment\r\n}\r\n\r\nexport enum AssignType {\r\n  Variable = 0,\r\n  Template,\r\n  TemplateVariable,\r\n  Const,\r\n}\r\n\r\nexport enum AssignmentType {\r\n  Const = 0,\r\n  Variable,\r\n  Expression\r\n}\r\n\r\nexport enum AssociatedFsmType {\r\n  Object = 0,\r\n  Template\r\n}\r\n\r\nexport enum VariableScope {\r\n  Local = 0,\r\n  Fsm,\r\n  Global,\r\n  Scene\r\n}\r\n\r\nexport enum Severity {\r\n  Warning,\r\n  Error\r\n}\r\n\r\nexport enum ParaType {\r\n  Action = 0,\r\n  Trigger\r\n}\r\n\r\n","export * from './enumTypes';","import { IPosition } from \"./positions\";\r\n\r\nexport class ExpChar implements IPosition {\r\n\r\n  private _value: string = '';\r\n  private _line: number = 0;\r\n  private _pos: number = 0;\r\n\r\n\r\n  constructor(value: string, line: number, pos: number) {\r\n    this._value = value;\r\n    this._line = line;\r\n    this._pos = pos;\r\n  }\r\n\r\n  public getValue(): string {\r\n    return this._value;\r\n  }\r\n\r\n  public getLine(): number {\r\n    return this._line;\r\n  }\r\n\r\n  public getPos(): number {\r\n\r\n    return this._pos;\r\n  }\r\n\r\n  public isDigit(): boolean {\r\n    return (/\\d/).test(this._value);\r\n  }\r\n\r\n  public isLetterOrCharactor(): boolean {\r\n    if((/[]/).test(this._value)) {\r\n      return false;\r\n    }\r\n    var result: boolean = (/[a-zA-Z]/).test(this._value);\r\n    // \r\n    if (!result) {\r\n      result = escape(this._value).indexOf('%u') > -1;\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public isWhiteSpace(): boolean {\r\n    return this._value === ' ';\r\n  }\r\n\r\n  public isNewLine(): boolean {\r\n    return this._value === '\\n';\r\n  }\r\n\r\n  public isEndOfInput(): boolean {\r\n    return this._value === '\\0';\r\n  }\r\n\r\n  public is(...val: string[]): boolean {\r\n    for (let i: number = 0; i < val.length; i++) {\r\n      if (val[i] === this._value && val[i] !== '\\0') {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public toString(): string {\r\n    return this._value;\r\n  }\r\n\r\n}\r\n\r\n","import { Scope } from \"./scope\";\r\nimport { IExpression } from \"./expressions\";\r\nimport { ParseError, NameLocation } from \"./positions\";\r\nimport { VE_ExpressionParsing } from \"./expressionParsing\";\r\nimport { VariableScope } from \"../enum\";\r\nimport { Variable } from \"./variable\";\r\nimport { ShowError } from \"../html\";\r\n\r\nexport class ExpManager {\r\n\r\n  private static _scope: Scope;\r\n  private static _expVariable: { [key: string]: IExpression } = {};\r\n\r\n  public static errors: ParseError[] = [];\r\n\r\n  private static _projectName = '';\r\n  private static _objectID = '';\r\n\r\n  public static init() {\r\n    this._scope = Scope.Create();\r\n  }\r\n\r\n  public static isCreated(name_id: string): boolean {\r\n    if (this._scope.isCreated(name_id)) {\r\n      return true;\r\n    }\r\n    if (this._expVariable[name_id]) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public static isCreatedVariable(name_id: string): boolean {\r\n    if (this._scope.isCreated(name_id)) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static isCreatedExpression(name_id: string): boolean {\r\n    if (this._expVariable[name_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static createVariable(name_id: string, type: string, value: any): boolean {\r\n    this.errors = [];\r\n    if (this.isCreated(name_id)) {\r\n      this.errors.push(ParseError.Error(new NameLocation(name_id), `${name_id}${type}`));\r\n      return false;\r\n    }\r\n    this._scope.setVariable(name_id, type, value);\r\n    return true;\r\n  }\r\n\r\n  public static createExpression(name_id: string, exp_str: string): boolean {\r\n    this.errors = [];\r\n    if (this.isCreated(name_id)) {\r\n      this.errors.push(ParseError.Error(new NameLocation(name_id), `${name_id}${exp_str}`));\r\n      return false;\r\n    }\r\n    let exp: IExpression = VE_ExpressionParsing.parsing(name_id, exp_str, this._scope, this._projectName, '', '', VariableScope.Scene);\r\n    if (VE_ExpressionParsing.errors.length > 0) {\r\n      for (let i: number = 0; i < VE_ExpressionParsing.errors.length; i++) {\r\n        this.errors.push(VE_ExpressionParsing.errors[i]);\r\n      }\r\n      return false;\r\n    }\r\n    this._expVariable[name_id] = exp;\r\n    return true;\r\n  }\r\n\r\n  public static getValue(name_id: string): any {\r\n    if (this.isCreated(name_id)) {\r\n      if (this.isCreatedVariable(name_id)) {\r\n        return this._scope.find(name_id)!.getValue();\r\n      } else {\r\n        return this._expVariable[name_id].evaluate();\r\n      }\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static getExpression(name_id: string): IExpression | null {\r\n    if (this._expVariable[name_id]) {\r\n      return this._expVariable[name_id];\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static getVariable(name_id: string): Variable | null {\r\n    if (this.isCreatedVariable(name_id)) {\r\n      return this._scope.find(name_id);\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n\r\n  public static printError(): void {\r\n    if (this.errors.length > 0) {\r\n      for (let i: number = 0; i < this.errors.length; i++) {\r\n        console.error(this.errors[i].toString());\r\n        ShowError.showError(this.errors[i].toString());\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n}\r\n\r\nExpManager.init();\r\n\r\n// try {\r\n//   ExpManager.createVariable('first', 'number', 1);\r\n//   ExpManager.createVariable('second', 'number', 2);\r\n//   ExpManager.createVariable('third', 'bool', true);\r\n//   console.log(ExpManager.getValue('third'));\r\n\r\n//   // ExpManager.createExpression('add', '(1 + first + second * (first + second + 3)) / 2');\r\n//   // ExpManager.createExpression('add', 'cos(PI/2) + sin(PI/2)');\r\n//   // console.log(ExpManager.getExpression('add')!.toString());\r\n//   // console.log(' ' + ExpManager.getExpression('add')!.evaluate());\r\n\r\n//   // ExpManager.createExpression('exp1', 'second + 2 * second + abs(-10)');\r\n//   ExpManager.createExpression('exp1', 'first * second + second > 10');\r\n//   console.log('2 ' + ExpManager.getExpression('exp1')!.evaluate());\r\n\r\n//   // ExpManager.createExpression('multiply', 'x * y');\r\n//   // ExpManager.createExpression('substract', 'x - y');\r\n\r\n//   // console.log(ExpManager.getExpression('add')!.evaluate());\r\n\r\n//   // console.log(ExpManager.getExpression('multiply')!.evaluate());\r\n//   // console.log(ExpManager.getExpression('substract')!.evaluate());\r\n\r\n// }\r\n// catch {\r\n\r\n// }\r\n\r\n// ExpManager.printError();\r\n\r\n\r\n","export enum ExpressionType {\r\n  ID, SPECIAL_ID, KEYWORD, STRING, NUMBER, BOOL, OPERATOR, INTEGER, FLOAT, DOUBLE, EOI\r\n}","import { Scope } from \"./scope\";\r\nimport { Tokenizer } from \"./tokenizer\";\r\nimport { ParseError, IPosition } from \"./positions\";\r\nimport { IExpression, BinaryOperator, BinaryExpression, ConstantExpression, VeryTemplateExpression, VeryVarExpression } from \"./expressions\";\r\nimport { ExpressionType } from \"./expressionEnum\";\r\nimport { FunctionExpression } from \"./functionExpression\";\r\nimport { Token } from \"./token\";\r\nimport { IFunction, CustomFunctions } from \"./functions\";\r\nimport { Variable } from \"./variable\";\r\nimport { VariableExpression } from \"./variableExpression\";\r\nimport { VariableScope } from \"../enum\";\r\nimport { VE_Expressions } from \"./veryExpressions\";\r\nimport { VE_Objects, VeryEngineObject } from \"../object\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { VE_Fsm } from \"../state\";\r\n\r\n\r\n\r\nexport class VE_ExpressionParsing {\r\n\r\n  private static _bracketPair: { [key: string]: string } = {};\r\n\r\n  private static _scope: Scope;\r\n  private static _tokenizer: Tokenizer;\r\n\r\n  public static errors: ParseError[] = [];\r\n\r\n  private static _projectName: string = '';\r\n  private static _objectID: string = '';\r\n  private static _fsmID = '';\r\n\r\n  private static _varScope: VariableScope = VariableScope.Local;\r\n\r\n\r\n  public static init(): void {\r\n    this._bracketPair['('] = ')';\r\n    this._bracketPair['['] = ']';\r\n    this._bracketPair['{'] = '}';\r\n    this._bracketPair[''] = '';\r\n    this._bracketPair[''] = '';\r\n  }\r\n\r\n  public static parsing(name_id: string, input_exp: string, scope: Scope, project_name: string, object_id: string, fsm_id: string, var_scope: VariableScope): IExpression {\r\n    this._scope = scope;\r\n    this._projectName = project_name;\r\n    this._objectID = object_id;\r\n    this._fsmID = fsm_id;\r\n    this._varScope = var_scope;\r\n    input_exp = this.replace(input_exp);\r\n    // console.warn(` ${input_exp}`);\r\n    this._tokenizer = new Tokenizer(input_exp);\r\n    // while(!this._tokenizer.current().isEnd()) {\r\n    //   console.log(this._tokenizer.consume());\r\n    // }\r\n    this.errors = [];\r\n    return this.parse();\r\n  }\r\n\r\n  private static replace(str: string): string {\r\n    str = str.replace(//g, '(');\r\n    str = str.replace(//g, ')');\r\n    str = str.replace(//g, '!');\r\n    return str;\r\n  }\r\n\r\n  private static parse(): IExpression {\r\n    let resultExp: IExpression = this.buildExpression();\r\n    // console.log(this._tokenizer.current());\r\n    if (!this._tokenizer.current().isEnd()) {\r\n      this._tokenizer.addError(this._tokenizer.current(), `${this._tokenizer.current().getSource()} `);\r\n      this._tokenizer.consume();\r\n    }\r\n    this.errors = this._tokenizer.getProblemCollector();\r\n    return resultExp;\r\n  }\r\n\r\n\r\n  private static buildExpression(): IExpression {\r\n    let left: IExpression = this.relationalExp();\r\n    if (this._tokenizer.current().isOperator('&&')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.buildExpression();\r\n      return this.reOrder(left, right, BinaryOperator.Add);\r\n    }\r\n    if (this._tokenizer.current().isOperator('||')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.buildExpression();\r\n      return this.reOrder(left, right, BinaryOperator.Or);\r\n    }\r\n    return left;\r\n  }\r\n\r\n\r\n  private static relationalExp(): IExpression {\r\n    let left: IExpression = this.algebraExp();\r\n    if (this._tokenizer.current().isOperator('<')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.LT);\r\n    }\r\n    if (this._tokenizer.current().isOperator('<=')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.LT_EQ);\r\n    }\r\n    if (this._tokenizer.current().isOperator('==')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.EQ);\r\n    }\r\n    if (this._tokenizer.current().isOperator('>=')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.GT_EQ);\r\n    }\r\n    if (this._tokenizer.current().isOperator('>')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.GT);\r\n    }\r\n    if (this._tokenizer.current().isOperator('!=')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.NEQ);\r\n    }\r\n    return left;\r\n  }\r\n\r\n  private static algebraExp(): IExpression {\r\n    let left: IExpression = this.productExp();\r\n    if (this._tokenizer.current().isOperator('+')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.algebraExp();\r\n      return this.reOrder(left, right, BinaryOperator.Add);\r\n    }\r\n    if (this._tokenizer.current().isOperator('-')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.algebraExp();\r\n      return this.reOrder(left, right, BinaryOperator.Subtract);\r\n    }\r\n    return left;\r\n  }\r\n\r\n  private static productExp(): IExpression {\r\n    let left: IExpression = this.exponentExp();\r\n    if (this._tokenizer.current().isOperator('*')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.productExp();\r\n      return this.reOrder(left, right, BinaryOperator.Multiply);\r\n    }\r\n    if (this._tokenizer.current().isOperator('/')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.productExp();\r\n      return this.reOrder(left, right, BinaryOperator.Divide);\r\n    }\r\n    if (this._tokenizer.current().isOperator('%')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.productExp();\r\n      return this.reOrder(left, right, BinaryOperator.Modulo);\r\n    }\r\n    return left;\r\n  }\r\n\r\n  // TODO\r\n  private static exponentExp(): IExpression {\r\n    let left: IExpression = this.atomExp();\r\n    if (this._tokenizer.current().isOperator('!', '')) {\r\n      left = new BinaryExpression(left, left, BinaryOperator.Not);\r\n    }\r\n    return left;\r\n  }\r\n\r\n  private static atomExp(): IExpression {\r\n    // console.warn(this._tokenizer.current());\r\n    // -\r\n    if (this._tokenizer.current().isOperator('-')) {\r\n      this._tokenizer.consume();\r\n      let result: BinaryExpression = new BinaryExpression(new ConstantExpression(0, 'number'), this.atomExp(), BinaryOperator.Subtract);\r\n      result.setSeal();\r\n      return result;\r\n    }\r\n    // \r\n    if (this._tokenizer.current().isOperator('!', '') && (this._tokenizer.next().isIdentifier() || this._tokenizer.next().isKeyword() || this._tokenizer.next().isStartBracket())) {\r\n      this._tokenizer.consume();\r\n      let newValue: IExpression = this.atomExp();\r\n      if (newValue.expType === 'bool') {\r\n        let notExp: BinaryExpression = new BinaryExpression(newValue, newValue, BinaryOperator.Not);\r\n        return notExp;\r\n      } else {\r\n        \r\n        this._tokenizer.addError(this._tokenizer.current(), '(!)bool');\r\n        return ConstantExpression.Empty();\r\n      }\r\n    }\r\n    // +\r\n    if (this._tokenizer.current().isOperator('+') && this._tokenizer.next().isStartBracket()) {\r\n      this._tokenizer.consume();\r\n    }\r\n    // +\r\n    if (this._tokenizer.current().isOperator('+') && this._tokenizer.next().isConstant()) {\r\n      this._tokenizer.consume();\r\n    }\r\n    // +\r\n    if (this._tokenizer.current().isOperator('+') && this._tokenizer.next().isIdentifier()) {\r\n      this._tokenizer.consume();\r\n    }\r\n\r\n    // VeryVar\r\n    // \r\n    // 1**null2.**null3*.*4.*.*\r\n\r\n    // 1.*==null\r\n    // 2..*\r\n    if (this._tokenizer.current().isOperator(\"*\") && this._tokenizer.next().isIdentifier())  //*VeryVarVeryVarExpression\r\n    {\r\n      this._tokenizer.consume();\r\n      let varID: string = \"*\" + this._tokenizer.current().getContents();\r\n      let varExpression: Nullable<IExpression> = VE_Expressions.getParseExpression(this._projectName, this._objectID, varID, this._varScope);\r\n      if (varExpression === null) {\r\n        // \r\n        let templateExpression: Nullable<VeryTemplateExpression> = VE_Expressions.getTemplateExpression(this._projectName, this._objectID, varID, this._varScope);\r\n        if (templateExpression === null) {\r\n          this._tokenizer.addError(this._tokenizer.current(), \"VeryVar\" + varID + \"VeryVar\");\r\n          this._tokenizer.consume();\r\n          return ConstantExpression.Empty();\r\n        }\r\n        else {\r\n          //UnityEngine.Debug.LogError(\"\" + _tokenizer.current());\r\n          // this._tokenizer.consume();\r\n          // return templateExpression;\r\n          // TODO: \r\n          this._tokenizer.addError(this._tokenizer.current(), \"VeryVar\" + varID + \"\");\r\n          this._tokenizer.consume();\r\n          return ConstantExpression.Empty();\r\n        }\r\n      }\r\n      else {\r\n        this._tokenizer.consume();\r\n        return varExpression;\r\n      }\r\n    }\r\n\r\n    // \r\n    if (this._tokenizer.current().isStartBracket()) {\r\n      let endBracket: string = this._bracketPair[this._tokenizer.consume().getTrigger()];\r\n      let result: IExpression = this.buildExpression();\r\n      if (result.className === 'BinaryExpression') {\r\n        (<BinaryExpression>result).setSeal();\r\n      }\r\n      this.expectTrigger(ExpressionType.OPERATOR, endBracket); // \r\n      return result;\r\n    }\r\n    // \r\n    if (this._tokenizer.current().isConstant()) {\r\n      let value: any;\r\n      let typeStr: string = 'string';\r\n      if (this._tokenizer.current().isBool()) {\r\n        value = this._tokenizer.current().getContents().toLowerCase() === 'true' ? true : false;\r\n        typeStr = 'bool';\r\n      } else if (this._tokenizer.current().isNumber()) {\r\n        value = parseFloat(this._tokenizer.current().getContents());\r\n        typeStr = 'number';\r\n        // console.log('' + value);\r\n      } else {\r\n        value = this._tokenizer.current().getContents();\r\n        typeStr = 'string';\r\n      }\r\n      this._tokenizer.consume();\r\n      let constantExp: IExpression = new ConstantExpression(value, typeStr);\r\n      return constantExp;\r\n    }\r\n    // \r\n    if (this._tokenizer.current().isIdentifier()) {\r\n      if (this._tokenizer.next().isStartBracket()) { // \r\n        // \r\n        let endStart: string = this._bracketPair[this._tokenizer.next().getTrigger()];\r\n        return this.functionCall(endStart);\r\n      } else { // \r\n        // VryVar\r\n        let varValue: Variable | null;\r\n        let loc: IPosition = this._tokenizer.current();\r\n        let variableID: string = this._tokenizer.consume().getContents();\r\n        if (variableID.endsWith('.') && this._tokenizer.current().isOperator('*') && this._tokenizer.next().isIdentifier()) { // .*\r\n          // VeryVar.*\r\n          this._tokenizer.consume();\r\n          let varID: string = variableID + '*' + this._tokenizer.current().getContents();\r\n          let varExpression: Nullable<IExpression> = VE_Expressions.getParseExpression(this._projectName, this._objectID, varID, this._varScope);\r\n          if (varExpression === null) {\r\n            // TODO\r\n            let templateExpression: Nullable<VeryTemplateExpression> = VE_Expressions.getTemplateExpression(this._projectName, this._objectID, varID, this._varScope);\r\n            if (templateExpression === null) {\r\n              this._tokenizer.addError(loc, `VeryVar${varID}VeryVar`);\r\n            } else {\r\n              this._tokenizer.addError(this._tokenizer.current(), \"VeryVar\" + varID + \"\");\r\n            }\r\n            this._tokenizer.consume();\r\n            return ConstantExpression.Empty();\r\n          } else {\r\n            this._tokenizer.consume();\r\n            return varExpression;\r\n          }\r\n          // return ConstantExpression.Empty();\r\n        } else {\r\n          // \r\n          varValue = this._scope.find(variableID);\r\n          // console.log(variableID + '  ---  ' + varValue);\r\n          if (varValue === null) {\r\n            this._tokenizer.addError(loc, `${variableID}`);\r\n            return ConstantExpression.Empty();\r\n          } else {\r\n            return new VariableExpression(varValue);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    // TODO\r\n    if (this._tokenizer.current().isKeyword()) {\r\n      // this\r\n      if (this._tokenizer.current().getContents().toLowerCase().trim() === \"this\") {\r\n        if (this._varScope === VariableScope.Fsm && this._fsmID !== \"\") {\r\n          // \r\n          let objects: VE_Objects = VE_Manager.objects(this._projectName);\r\n          if (objects !== null) {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(this._objectID);\r\n            if (veryObject != null) {\r\n              let fsm: VE_Fsm = veryObject.getFsm(this._fsmID);\r\n              if (fsm != null) {\r\n                this._tokenizer.consume();\r\n                return new VeryVarExpression(fsm.fsmVar);\r\n              }\r\n            }\r\n          }\r\n        }\r\n        this._tokenizer.addError(this._tokenizer.current(), \"this\");\r\n        this._tokenizer.consume();\r\n        return ConstantExpression.Empty();\r\n      }\r\n      //   == null \r\n      else if (this._tokenizer.current().getContents().toLowerCase().trim() === \"null\" || this._tokenizer.current().getContents().toLowerCase().trim() === \"none\") {\r\n        //UnityEngine.Debug.LogError(\"\" + _tokenizer.current());\r\n        this._tokenizer.consume();\r\n        // TODO: \r\n        return new VeryTemplateExpression();\r\n      }\r\n      else {\r\n        this._tokenizer.addError(this._tokenizer.current(), \"\" + this._tokenizer.current().getContents() + \"\");\r\n        this._tokenizer.consume();\r\n        return ConstantExpression.Empty();\r\n      }\r\n    }\r\n\r\n    // \r\n    if (this._tokenizer.current().isSpecialIdentifier()) {\r\n      this._tokenizer.addError(this._tokenizer.current(), `ID${this._tokenizer.current().getSource()}`);\r\n      this._tokenizer.consume();\r\n      return ConstantExpression.Empty();\r\n    }\r\n\r\n    // \r\n    // console.warn(this._tokenizer.current());\r\n    this._tokenizer.addError(this._tokenizer.current(), `${this._tokenizer.current().getSource()}`);\r\n    this._tokenizer.consume();\r\n\r\n    return ConstantExpression.Empty();\r\n  }\r\n\r\n  private static reOrder(left: IExpression, right: IExpression, op: BinaryOperator): IExpression {\r\n    if (right.className === 'BinaryExpression') {\r\n      let rightOp: BinaryExpression = <BinaryExpression>right;\r\n      if (!rightOp.isSealed() && rightOp.getPriority() === rightOp.getPriorityOp(op)) {\r\n        this.replaceLeft(rightOp, left, op);\r\n        return right;\r\n      }\r\n    }\r\n    return new BinaryExpression(left, right, op);\r\n  }\r\n\r\n  private static replaceLeft(target: BinaryExpression, newLeft: IExpression, op: BinaryOperator): void {\r\n    if (target.getLeftExp().className === 'BinaryExpression') {\r\n      let leftOp: BinaryExpression = <BinaryExpression>target.getLeftExp();\r\n      if (!leftOp.isSealed() && leftOp.getPriority() === leftOp.getPriorityOp(op)) {\r\n        this.replaceLeft(leftOp, newLeft, op);\r\n        return;\r\n      }\r\n    }\r\n    target.setLeftExp(new BinaryExpression(newLeft, target.getLeftExp(), op));\r\n  }\r\n\r\n  private static functionCall(end_bracket: string): IExpression {\r\n    let call: FunctionExpression = new FunctionExpression();\r\n    let funcToken: Token = this._tokenizer.consume();\r\n    if (!CustomFunctions.hasFunction(funcToken.getContents())) {\r\n      this._tokenizer.addError(funcToken, `${funcToken.getContents()}`);\r\n      return ConstantExpression.Empty();\r\n    }\r\n    let fun: IFunction = CustomFunctions.createFunction(funcToken.getContents());\r\n    call.setFunction(fun);\r\n    this._tokenizer.consume(); // \r\n    while (!this._tokenizer.current().isOperator(end_bracket) && !this._tokenizer.current().isEnd()) {\r\n      if (call.paraCount() !== 0) {\r\n        this.expectTrigger(ExpressionType.OPERATOR, ',');\r\n      }\r\n      call.addPara(this.buildExpression());\r\n    }\r\n    this.expectTrigger(ExpressionType.OPERATOR, end_bracket);\r\n    call.evaluate();\r\n    if (call.paraCount() > fun.parameterNumber() && fun.parameterNumber() >= 0) {\r\n      this._tokenizer.addError(funcToken, `${funcToken.getContents()}Max${fun.parameterNumber()}${call.paraCount()}`);\r\n      return ConstantExpression.Empty();\r\n    }\r\n    return call;\r\n  }\r\n\r\n  private static expectTrigger(type: ExpressionType, trigger: string): void {\r\n    if (this._tokenizer.current().matches(type, trigger)) {\r\n      this._tokenizer.consume();\r\n    } else {\r\n      this._tokenizer.addError(this._tokenizer.current(), `${trigger}${this._tokenizer.current().getTrigger()}`);\r\n    }\r\n  }\r\n\r\n  public static getProjectCollector(): ParseError[] {\r\n    return this._tokenizer.getProblemCollector();\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\n\r\nVE_ExpressionParsing.init();","import { Dictionary } from \"../utility/dictionary\";\r\nimport { IVeryVar } from \"../variables\";\r\nimport { VE_Template } from \"../template\";\r\n\r\nexport interface IExpression {\r\n  expType: string;\r\n  className: string;\r\n  evaluate(): any;\r\n  clone(): IExpression;\r\n}\r\n\r\nexport class TrueExpression implements IExpression {\r\n  public get expType(): string {\r\n    return 'bool';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'TrueExpression';\r\n  }\r\n\r\n  public get value(): boolean {\r\n    return true;\r\n  }\r\n\r\n  constructor() {\r\n  }\r\n\r\n  public evaluate(): any {\r\n    return true;\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let exp: TrueExpression = new TrueExpression();\r\n    return exp;\r\n  }\r\n\r\n  public toString(): string {\r\n    return 'true';\r\n  }\r\n}\r\n\r\nexport class ConstantExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    return this._expType;\r\n  }\r\n  private _expType: string = 'string';\r\n\r\n  public get className(): string {\r\n    return 'ConstantExpression';\r\n  }\r\n\r\n  private _value: any;\r\n\r\n  constructor(value: any, type: string) {\r\n    this._value = value;\r\n    this._expType = type;\r\n  }\r\n\r\n  public evaluate(): any {\r\n    return this._value;\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let expClone: ConstantExpression = new ConstantExpression(this._value, this._expType);\r\n    return expClone;\r\n  }\r\n\r\n  public static Empty(): ConstantExpression {\r\n    return new ConstantExpression(null, 'string');\r\n  }\r\n\r\n  public isEmpty(): boolean {\r\n    if (this._expType === 'string' && this._value === null) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public toString(): string {\r\n    if (this._value !== null) {\r\n      return this._value.toString();\r\n    } else {\r\n      return 'null';\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport enum BinaryOperator {\r\n  Add = '+', Subtract = '-', Multiply = '*', Divide = '/', Modulo = '%', Power = '^', LT = '<', LT_EQ = '<=', EQ = '=', GT_EQ = '>=', GT = '>', NEQ = '!=', And = '&&', Or = '||', Not = '!'\r\n}\r\n\r\nexport class BinaryExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    return this._expType;\r\n  }\r\n  private _expType = '';\r\n\r\n  public get className(): string {\r\n    return 'BinaryExpression';\r\n  }\r\n\r\n  public isRight: boolean = true;\r\n\r\n  private _op: BinaryOperator = BinaryOperator.EQ;\r\n\r\n  private _left: IExpression;\r\n  private _right: IExpression;\r\n  private _isSealed: boolean = false;\r\n\r\n  private static _opDic: { [key: string]: BinaryOperator } = {};\r\n\r\n  private static _priority: Dictionary<BinaryOperator, number> = new Dictionary<BinaryOperator, number>();\r\n\r\n  // private static _priorityKey: BinaryOperator[] = [BinaryOperator.Not, BinaryOperator.Power, BinaryOperator.Multiply, BinaryOperator.Divide, BinaryOperator.Modulo, BinaryOperator.Add, BinaryOperator.Subtract, BinaryOperator.LT, BinaryOperator.LT_EQ, BinaryOperator.EQ, BinaryOperator.GT_EQ, BinaryOperator.GT, BinaryOperator.NEQ, BinaryOperator.And, BinaryOperator.Or];\r\n\r\n  // private static _priorityValue: number[] = [2, 3, 4, 4, 4, 5, 5, 6, 6, 6, 6, 6, 6, 7, 7];\r\n\r\n  public static init(): void {\r\n    this._opDic[\"+\"] = BinaryOperator.Add;\r\n    this._opDic[\"-\"] = BinaryOperator.Subtract;\r\n    this._opDic[\"*\"] = BinaryOperator.Multiply;\r\n    this._opDic[\"/\"] = BinaryOperator.Divide;\r\n    this._opDic[\"%\"] = BinaryOperator.Modulo;\r\n    this._opDic[\"**\"] = BinaryOperator.Power;\r\n    this._opDic[\"^\"] = BinaryOperator.Power;\r\n    this._opDic[\"<\"] = BinaryOperator.LT;\r\n    this._opDic[\"<=\"] = BinaryOperator.LT_EQ;\r\n    this._opDic[\"==\"] = BinaryOperator.EQ;\r\n    this._opDic[\">=\"] = BinaryOperator.GT_EQ;\r\n    this._opDic[\">\"] = BinaryOperator.GT;\r\n    this._opDic[\"!=\"] = BinaryOperator.NEQ;\r\n    this._opDic[\"&&\"] = BinaryOperator.And;\r\n    this._opDic[\"||\"] = BinaryOperator.Or;\r\n    this._opDic[\"!\"] = BinaryOperator.Not;\r\n    this._opDic[\"\"] = BinaryOperator.Not;\r\n\r\n    this._priority.Add(BinaryOperator.Not, 2);\r\n    this._priority.Add(BinaryOperator.Power, 3);\r\n    this._priority.Add(BinaryOperator.Multiply, 4); this._priority.Add(BinaryOperator.Divide, 4); this._priority.Add(BinaryOperator.Modulo, 4);\r\n    this._priority.Add(BinaryOperator.Add, 5); this._priority.Add(BinaryOperator.Subtract, 5);\r\n    this._priority.Add(BinaryOperator.LT, 6); this._priority.Add(BinaryOperator.LT_EQ, 6); this._priority.Add(BinaryOperator.EQ, 6); this._priority.Add(BinaryOperator.GT_EQ, 6); this._priority.Add(BinaryOperator.GT, 6); this._priority.Add(BinaryOperator.NEQ, 6);\r\n    this._priority.Add(BinaryOperator.And, 7); this._priority.Add(BinaryOperator.Or, 7);\r\n  }\r\n\r\n  constructor(left_exp: IExpression, right_exp: IExpression, op: BinaryOperator) {\r\n    this._left = left_exp;\r\n    this._right = right_exp;\r\n    this._op = op;\r\n    // console.log(this._left);\r\n    // console.log(this._right);\r\n    this._expType = this.resultAutoType(left_exp, right_exp, op);\r\n    if (this._expType === 'null') {\r\n      // TODO\r\n      this.isRight = false;\r\n      console.error(\"\" + left_exp.expType + \"\" + right_exp.expType + \"\" + op.toString());\r\n    }\r\n  }\r\n\r\n  private resultAutoType(left: IExpression, right: IExpression, op: BinaryOperator): string {\r\n    if (op === BinaryOperator.Add) {\r\n      if (left.expType === 'string' || right.expType === 'string') {\r\n        return 'string';\r\n      }\r\n      else if (left.expType === 'bool' || right.expType === 'bool') {\r\n        return 'null';\r\n      }\r\n      else if (left.expType === 'number' || right.expType === 'number') {\r\n        return 'number';\r\n      }\r\n      else if (left.expType === 'vector3' || right.expType === 'vector3') {\r\n        return 'vector3';\r\n      }\r\n      else if (left.expType === 'vector2' || right.expType === 'vector2') {\r\n        return 'vector2';\r\n      }\r\n      else {\r\n        return 'null';\r\n      }\r\n    } else if (op === BinaryOperator.Divide || op === BinaryOperator.Multiply || op === BinaryOperator.Modulo || op === BinaryOperator.Power || op === BinaryOperator.Subtract) {\r\n      if (left.expType === 'string' || right.expType === 'string' || left.expType === 'bool' || left.expType === 'bool') {\r\n        return 'null';\r\n      }\r\n      else if (left.expType === 'vector3' && right.expType === 'vector3' && op === BinaryOperator.Subtract) {\r\n        return 'vector3';\r\n      }\r\n      else if (left.expType === 'vector2' && right.expType === 'vector2' && op === BinaryOperator.Subtract) {\r\n        return 'vector2';\r\n      }\r\n      else if ((left.expType === 'number' && right.expType === 'vector3' && op === BinaryOperator.Multiply) || (left.expType === 'vector3' && right.expType === 'number' && op == BinaryOperator.Multiply)) {\r\n        return 'vector3';\r\n      }\r\n      else if ((left.expType === 'number' && right.expType === 'vector2' && op === BinaryOperator.Multiply) || (left.expType === 'vector2' && right.expType === 'number' && op == BinaryOperator.Multiply)) {\r\n        return 'vector2';\r\n      }\r\n      else if (left.expType === 'vector3' && right.expType === 'number' && op === BinaryOperator.Divide) {\r\n        return 'vector3';\r\n      }\r\n      else if (left.expType === 'vector2' && right.expType === 'number' && op === BinaryOperator.Divide) {\r\n        return 'vector2';\r\n      }\r\n      else if (left.expType === 'number' || right.expType === 'number') {\r\n        return 'number';\r\n      }\r\n      else {\r\n        return 'null';\r\n      }\r\n    } else if (op === BinaryOperator.LT || op === BinaryOperator.LT_EQ || op === BinaryOperator.GT_EQ || op === BinaryOperator.GT) {\r\n      if (left.expType === 'string' || right.expType === 'string' || left.expType === 'bool' || right.expType === 'bool') {\r\n        return 'null';\r\n      } else {\r\n        return 'bool';\r\n      }\r\n    } else if (op === BinaryOperator.NEQ || op === BinaryOperator.EQ) {\r\n      if (right.expType !== left.expType) {\r\n        return 'null';\r\n      } else {\r\n        return 'bool';\r\n      }\r\n    } else if (op === BinaryOperator.Not) {\r\n      if (right.expType !== 'bool') {\r\n        return 'null';\r\n      } else {\r\n        return 'bool';\r\n      }\r\n    } else {\r\n      return 'string';\r\n    }\r\n  }\r\n\r\n  public setLeftExp(left_exp: IExpression): void {\r\n    this._left = left_exp;\r\n  }\r\n\r\n  public setRightExp(right_exp: IExpression): void {\r\n    this._right = right_exp;\r\n  }\r\n\r\n  public getOp(): BinaryOperator {\r\n    return this._op;\r\n  }\r\n\r\n  public getLeftExp(): IExpression {\r\n    return this._left;\r\n  }\r\n\r\n  public getRightExp(): IExpression {\r\n    return this._right;\r\n  }\r\n\r\n  public isSealed(): boolean {\r\n    return this._isSealed;\r\n  }\r\n\r\n  public setSeal(): void {\r\n    this._isSealed = true;\r\n  }\r\n\r\n  public toString(): string {\r\n    return \"(\" + this._left.toString() + \" \" + this._op.toString() + \" \" + this._right.toString() + \")\";\r\n    // return this._left.toString() + this._op.toString() + this._right.toString();\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let expClone: BinaryExpression = new BinaryExpression(this._left.clone(), this._right.clone(), this._op);\r\n    return expClone;\r\n  }\r\n\r\n  public evaluate(): any {\r\n    if (this._expType === 'null') {\r\n      return null;\r\n    }\r\n    if (this._left.className === 'FunctionExpression') {\r\n      this._left.evaluate();\r\n    }\r\n    if (this._right.className === 'FunctionExpression') {\r\n      this._right.evaluate();\r\n    }\r\n    this._expType = this.resultAutoType(this._left, this._right, this._op);\r\n    let leftValue: any = this._left.evaluate();\r\n    let rightValue: any = this._right.evaluate();\r\n    if (leftValue === null || rightValue === null) {\r\n      return null;\r\n    }\r\n    if (this._op === BinaryOperator.Add) {\r\n      if (this._expType === 'string') {\r\n        return leftValue.toString() + rightValue.toString();\r\n      } else if (this._expType === 'number') {\r\n        return leftValue + rightValue;\r\n      } else if (this._expType === 'vector3') {\r\n        return (<BABYLON.Vector3>leftValue).add((<BABYLON.Vector3>rightValue));\r\n      } else if (this._expType === 'vector2') {\r\n        return (<BABYLON.Vector2>leftValue).add((<BABYLON.Vector2>rightValue));\r\n      } else {\r\n        return null;\r\n      }\r\n    } else if (this._op === BinaryOperator.Subtract) {\r\n      if (this._expType === 'number') {\r\n        return leftValue - rightValue;\r\n      } else if (this._expType === 'vector3') {\r\n        return (<BABYLON.Vector3>leftValue).subtract((<BABYLON.Vector3>rightValue));\r\n      } else if (this._expType === 'vector2') {\r\n        return (<BABYLON.Vector2>leftValue).subtract((<BABYLON.Vector2>rightValue));\r\n      } else {\r\n        return null;\r\n      }\r\n    } else if (this._op === BinaryOperator.Multiply) {\r\n      if (this._expType === 'number') {\r\n        return leftValue * rightValue;\r\n      } else if (this._expType === 'vector3') {\r\n        if (typeof (leftValue) === 'number') {\r\n          return (<BABYLON.Vector3>rightValue).multiplyByFloats(leftValue, leftValue, leftValue);\r\n        } else if (typeof (rightValue) === 'number') {\r\n          return (<BABYLON.Vector3>leftValue).multiplyByFloats(rightValue, rightValue, rightValue);\r\n        } else {\r\n          return null;\r\n        }\r\n      } else if (this._expType === 'vector2') {\r\n        if (typeof (leftValue) === 'number') {\r\n          return (<BABYLON.Vector2>rightValue).multiplyByFloats(leftValue, leftValue);\r\n        } else if (typeof (rightValue) === 'number') {\r\n          return (<BABYLON.Vector2>leftValue).multiplyByFloats(rightValue, rightValue);\r\n        } else {\r\n          return null;\r\n        }\r\n      }\r\n    } else if (this._op === BinaryOperator.Divide) {\r\n      if (this._expType === 'number') {\r\n        return leftValue / rightValue;\r\n      } else if (this._expType === 'vector3') {\r\n        if (typeof (rightValue) === 'number') {\r\n          return new BABYLON.Vector3((<BABYLON.Vector3>leftValue).x / rightValue, (<BABYLON.Vector3>leftValue).y / rightValue, (<BABYLON.Vector3>leftValue).z / rightValue);\r\n        } else {\r\n          return null;\r\n        }\r\n      } else if (this._expType === 'vector2') {\r\n        if (typeof (rightValue) === 'number') {\r\n          return new BABYLON.Vector2((<BABYLON.Vector2>leftValue).x / rightValue, (<BABYLON.Vector2>leftValue).y / rightValue);\r\n        } else {\r\n          return null;\r\n        }\r\n      }\r\n    } else if (this._op === BinaryOperator.Modulo) {\r\n      if (typeof (leftValue) === 'number' && typeof (rightValue) === 'number') {\r\n        return leftValue % rightValue;\r\n      } else {\r\n        return null;\r\n      }\r\n    } else if (this._op === BinaryOperator.Power) {\r\n      if (typeof (leftValue) === 'number' && typeof (rightValue) === 'number') {\r\n        return Math.pow(leftValue, rightValue);\r\n      } else {\r\n        return null;\r\n      }\r\n    } else if (this._op === BinaryOperator.And) {\r\n      let l: boolean = this.getBoolean(leftValue);\r\n      let r: boolean = this.getBoolean(rightValue);\r\n      return l && r;\r\n    } else if (this._op === BinaryOperator.Or) {\r\n      let l: boolean = this.getBoolean(leftValue);\r\n      let r: boolean = this.getBoolean(rightValue);\r\n      return l || r;\r\n    } else if (this._op === BinaryOperator.LT) {\r\n      return leftValue < rightValue;\r\n    } else if (this._op === BinaryOperator.LT_EQ) {\r\n      return leftValue <= rightValue;\r\n    } else if (this._op === BinaryOperator.GT_EQ) {\r\n      return leftValue >= rightValue;\r\n    } else if (this._op === BinaryOperator.GT) {\r\n      return leftValue > rightValue;\r\n    } else if (this._op === BinaryOperator.EQ) {\r\n      return leftValue === rightValue;\r\n    } else if (this._op === BinaryOperator.NEQ) {\r\n      return leftValue !== rightValue;\r\n    } else if (this._op === BinaryOperator.Not) {\r\n      return !this.getBoolean(rightValue);\r\n    } else {\r\n      return !this.getBoolean(leftValue);\r\n    }\r\n  }\r\n\r\n  private getBoolean(value: any): boolean {\r\n    if (typeof (value) === 'number') {\r\n      if (value === 0) {\r\n        return false;\r\n      } else {\r\n        return true;\r\n      }\r\n    } else if (typeof (value) === 'string') {\r\n      if (value === '') {\r\n        return false;\r\n      } else {\r\n        return true;\r\n      }\r\n    } else if (typeof (value) === 'boolean') {\r\n      return value;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getPriority(): number {\r\n    // let p: number = BinaryExpression._priorityKey.indexOf(this._op);\r\n    // if(p > -1) {\r\n    //   return BinaryExpression._priorityValue[p];\r\n    // } else {\r\n    //   return 100;\r\n    // }\r\n    let p: number | null = BinaryExpression._priority.GetValue(this._op);\r\n    if (p === null) {\r\n      return 100;\r\n    } else {\r\n      return p;\r\n    }\r\n  }\r\n\r\n  public getPriorityOp(op: BinaryOperator): number {\r\n    // let p: number = BinaryExpression._priorityKey.indexOf(op);\r\n    // if(p > -1) {\r\n    //   return BinaryExpression._priorityValue[p];\r\n    // } else {\r\n    //   return 100;\r\n    // }\r\n    let p: number | null = BinaryExpression._priority.GetValue(op);\r\n    if (p === null) {\r\n      return 100;\r\n    } else {\r\n      return p;\r\n    }\r\n  }\r\n}\r\n\r\nexport class VeryVarExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    if (this._value) {\r\n      return this._value.varType;\r\n    } else {\r\n      return 'null';\r\n    }\r\n  }\r\n\r\n  private _value: IVeryVar;\r\n\r\n  public get className(): string {\r\n    return 'VeryVarExpression';\r\n  }\r\n\r\n  public get value(): IVeryVar {\r\n    return this._value;\r\n  }\r\n\r\n  constructor(value: IVeryVar) {\r\n    this._value = value;\r\n  }\r\n\r\n  public evaluate(): any {\r\n    return this._value.getValue();\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let expClone: VeryVarExpression = new VeryVarExpression(this._value.clone());\r\n    return expClone;\r\n  }\r\n\r\n  public toString(): string {\r\n    if (this._value) {\r\n      return this._value.toString();\r\n    } else {\r\n      return 'null';\r\n    }\r\n  }\r\n}\r\n\r\nexport class VeryTemplateExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    return 'bool';\r\n  }\r\n\r\n  private _isTemplate: boolean = false;\r\n  private _template: VE_Template;\r\n\r\n  public get className(): string {\r\n    return 'VeryTemplateExpression';\r\n  }\r\n\r\n  // public get value(): IVeryVar {\r\n  //   return this._value;\r\n  // }\r\n\r\n  // TODO \r\n  constructor() {\r\n    this._template = new VE_Template('', '');\r\n  }\r\n\r\n  public setTemplate(template: VE_Template): void {\r\n    this._isTemplate = true;\r\n    this._template = template;\r\n  }\r\n\r\n  public evaluate(): any {\r\n    if (this._isTemplate) {\r\n      if (!this._template) {\r\n        return false;\r\n      }\r\n      else {\r\n        return this._template.templateInstance !== null;\r\n      }\r\n    }\r\n    else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let varExp: VeryTemplateExpression = new VeryTemplateExpression();\r\n    varExp._template = this._template;\r\n    varExp._isTemplate = this._isTemplate;\r\n    return varExp;\r\n  }\r\n\r\n  public toString(): string {\r\n    if (this._isTemplate) {\r\n      if (!this._template) {\r\n        return \"false\";\r\n      }\r\n      else {\r\n        return (this._template.templateInstance === null).toString();\r\n      }\r\n    }\r\n    else {\r\n      return \"false\";\r\n    }\r\n  }\r\n}\r\n\r\n\r\nBinaryExpression.init();","import { ParseError } from \"./positions\";\r\n\r\nexport abstract class ForwardQuery<T> {\r\n\r\n  protected itemBuffer: Array<T> = [];\r\n\r\n  protected endReached: boolean = false;\r\n\r\n  protected problemCollector: Array<ParseError> = [];\r\n\r\n  protected endOfInputIndicator: T | undefined = undefined;\r\n\r\n  public next(): T {\r\n    return this.nextOffset(1);\r\n  }\r\n\r\n  public nextOffset(offset: number): T {\r\n    while (this.itemBuffer.length <= offset && !this.endReached) {\r\n      let item: T | undefined = this.fetch();\r\n      if (item !== undefined) {\r\n        this.itemBuffer.push(item);\r\n      } else {\r\n        this.endReached = true;\r\n      }\r\n    }\r\n    if (offset >= this.itemBuffer.length) {\r\n      if (this.endOfInputIndicator === undefined) {\r\n        this.endOfInputIndicator = this.endOfInput();\r\n      }\r\n      return this.endOfInputIndicator;\r\n    } else {\r\n      return this.itemBuffer[offset];\r\n    }\r\n  }\r\n\r\n  public current(): T {\r\n    return this.nextOffset(0);\r\n  }\r\n\r\n  protected abstract endOfInput(): T;\r\n\r\n  protected abstract fetch(): T | undefined;\r\n\r\n  public consume(): T {\r\n    let result: T = this.current();\r\n    this.consumeNext(1);\r\n    return result;\r\n  }\r\n\r\n  public consumeNext(numberOfItems: number): void {\r\n    if (numberOfItems < 0) {\r\n      return;\r\n    }\r\n    while (numberOfItems-- > 0) {\r\n      if (this.itemBuffer.length !== 0) {\r\n        this.itemBuffer.shift();\r\n      } else {\r\n        if (this.endReached) {\r\n          return;\r\n        } else {\r\n          let item: T | undefined = this.fetch();\r\n          if (item === undefined) {\r\n            this.endReached = true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public getProblemCollector(): Array<ParseError> {\r\n    return this.problemCollector;\r\n  }\r\n\r\n  public setProblemCollector(problemCollector: Array<ParseError>): void {\r\n    this.problemCollector = problemCollector;\r\n  }\r\n\r\n\r\n}","import { IExpression } from \"./expressions\";\r\nimport { IFunction } from \"./functions\";\r\n\r\nexport class FunctionExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    return this._function.expType;\r\n  }\r\n\r\n  public get className(): string {\r\n    return this._function.className;\r\n  }\r\n\r\n  private _function!: IFunction;\r\n  private _paras: IExpression[] = [];\r\n\r\n  public setFunction(func: IFunction): void {\r\n    this._function = func;\r\n  }\r\n\r\n  public addPara(exp: IExpression): void {\r\n    this._paras.push(exp);\r\n  }\r\n\r\n  public paraCount(): number {\r\n    return this._paras.length;\r\n  }\r\n\r\n  public evaluate(): any {\r\n    let r: any = null;\r\n    try {\r\n      r = this._function.evaluate(this._paras);\r\n    } catch (e) {\r\n      console.error('' + e);\r\n      return null;\r\n    }\r\n    return r;\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let expClone: FunctionExpression = new FunctionExpression();\r\n    expClone._function = this._function;\r\n    for (let i: number = 0; i < this._paras.length; i++) {\r\n      expClone._paras.push(this._paras[i].clone());\r\n    }\r\n    return expClone;\r\n  }\r\n\r\n  public toString(): string {\r\n    let printStr: string = this._function.className + '(';\r\n    for(let i: number = 0; i < this._paras.length; i++) {\r\n      if(i > 0) {\r\n        printStr += ',' + this._paras[i].toString();\r\n      } else {\r\n        printStr += this._paras[i].toString();\r\n      }\r\n    }\r\n    return printStr + ')';\r\n  }\r\n\r\n}","import { IExpression } from \"./expressions\";\r\nimport { ShowError } from \"../html\";\r\nimport { VE_ErrorManager, VE_Error } from \"../global\";\r\nimport { Severity } from \"../enum\";\r\n\r\nexport interface IFunction {\r\n  expType: string;\r\n  className: string;\r\n  parameterNumber(): number;\r\n  evaluate(args: Array<IExpression>): any;\r\n}\r\n\r\nexport class Pow implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'pow';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 2;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.pow(args[0].evaluate(), args[1].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Pow1${args[0].expType}1${args[0].evaluate()}2${args[1].expType}2${args[1].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Ln implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'ln';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.log(args[0].evaluate());\r\n    if (value === NaN || value === Infinity) {\r\n      ShowError.showError(`Ln${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Lg implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'lg';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.log10(args[0].evaluate());\r\n    if (value === NaN || value === Infinity) {\r\n      ShowError.showError(`Lg${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Sqrt implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'sqrt';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.sqrt(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Sqrt${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Abs implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'abs';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.abs(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Abs${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Random implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'random';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 2;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let start: number = args[0].evaluate();\r\n    let distance: number = args[1].evaluate() - args[0].evaluate();\r\n    let value: number = Math.random() * distance + start;\r\n    if (value === NaN) {\r\n      ShowError.showError(`Random1${args[0].expType}1${args[0].evaluate()}2${args[1].expType}2${args[1].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Round implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'round';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.round(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Round${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Sin implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'sin';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.sin(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Sin${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class ASin implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'asin';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.asin(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`ASin${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Cos implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'cos';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.cos(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Cos${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class ACos implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'acos';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.acos(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`ACos${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Tan implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'tan';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.tan(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Tan${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class ATan implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'atan';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.atan(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`ATan${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\n\r\nexport class CustomFunctions {\r\n\r\n  // private static _functions: {[key:string]: IFunction} = {};\r\n\r\n  private static _functionsDic: { [key: string]: Function } = {};\r\n\r\n  public static hasFunction(func_name: string): boolean {\r\n    func_name = func_name.toLowerCase();\r\n    if (this._functionsDic[func_name]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // public static addFunction(func: IFunction): void {\r\n  //   let funcName: string = func.className.toLowerCase();\r\n  //   if(this._functions[funcName]) {\r\n  //     ShowError.showError(`IDID${funcName}ID`);\r\n  //   } else {\r\n  //     this._functions[funcName] = func;\r\n  //   }\r\n  // }\r\n\r\n  public static addFunction(func: Function): void {\r\n    let tempFunc: any = new func.prototype.constructor();\r\n    let funcName: string = tempFunc.className.toLowerCase();\r\n    if (this._functionsDic[funcName]) {\r\n      VE_ErrorManager.Add(new VE_Error('', `IDID${tempFunc.className}ID`, '', Severity.Error));\r\n    } else {\r\n      this._functionsDic[funcName] = func;\r\n    }\r\n  }\r\n\r\n  public static createFunction(func_name: string): IFunction {\r\n    let tempFunc: any = new this._functionsDic[func_name.trim().toLowerCase()].prototype.constructor();\r\n    return <IFunction>tempFunc;\r\n  }\r\n\r\n  public static remove(func_name: string): void {\r\n    func_name = func_name.toLowerCase();\r\n    delete this._functionsDic[func_name];\r\n  }\r\n}\r\n\r\n\r\nCustomFunctions.addFunction(Pow);\r\nCustomFunctions.addFunction(Ln);\r\nCustomFunctions.addFunction(Lg);\r\nCustomFunctions.addFunction(Sqrt);\r\nCustomFunctions.addFunction(Abs);\r\nCustomFunctions.addFunction(Random);\r\nCustomFunctions.addFunction(Round);\r\nCustomFunctions.addFunction(Sin);\r\nCustomFunctions.addFunction(ASin);\r\nCustomFunctions.addFunction(Cos);\r\nCustomFunctions.addFunction(ACos);\r\nCustomFunctions.addFunction(Tan);\r\nCustomFunctions.addFunction(ATan);\r\n\r\n","export * from './expressionEnum';\r\nexport * from './expressions';\r\nexport * from './functions';\r\nexport * from './positions';\r\nexport * from './expChar';\r\nexport * from './token';\r\nexport * from './forwardQuery';\r\nexport * from './tokenizer';\r\nexport * from './tokenReader';\r\nexport * from './variable';\r\nexport * from './variableExpression';\r\nexport * from './scope';\r\nexport * from './functionExpression';\r\nexport * from './expressionParsing';\r\nexport * from './expManager';\r\nexport * from './veryExpressions';","export interface IPosition {\r\n  getValue(): string;\r\n  getLine(): number;\r\n  getPos(): number;\r\n}\r\n\r\n\r\nexport class NameLocation implements IPosition {\r\n\r\n  private _value: string = '';\r\n  private _line: number = 0;\r\n  private _pos: number = 0;\r\n\r\n\r\n  constructor(value: string) {\r\n    this._value = value;\r\n    this._line = 1;\r\n    this._pos = 1;\r\n  }\r\n\r\n\r\n  public getValue(): string {\r\n    return this._value;\r\n  }\r\n\r\n  public getLine(): number {\r\n    return this._line;\r\n  }  \r\n  \r\n  \r\n  public getPos(): number {\r\n    return this._pos;\r\n  }\r\n}\r\n\r\nexport enum SeverityExp{\r\n  Warning,\r\n  Error\r\n}\r\n\r\nexport class ParseError{\r\n\r\n  private _pos: IPosition;\r\n  private _message: string;\r\n  private _severity: SeverityExp;\r\n\r\n  constructor(pos: IPosition, msg: string, severity: SeverityExp) {\r\n    this._pos = pos;\r\n    this._message = msg;\r\n    this._severity = severity;\r\n  }\r\n\r\n  public static Warning(pos: IPosition, msg: string): ParseError {\r\n    let message: string = msg;\r\n    if(pos.getLine() > 0) {\r\n      message = ` >>> ${pos.getPos()}${msg}`;\r\n    }\r\n    return new ParseError(pos, message, SeverityExp.Warning);\r\n  }\r\n\r\n  public static Error(pos: IPosition, msg: string): ParseError {\r\n    let message: string = msg;\r\n    if(pos.getLine() > 0) {\r\n      message = ` >>> ${pos.getPos()}${msg}`;\r\n    }\r\n    return new ParseError(pos, message, SeverityExp.Error);\r\n  }\r\n\r\n  public getPosition(): IPosition {\r\n    return this._pos;\r\n  }\r\n\r\n  public getMessage(): string {\r\n    return this._message;\r\n  }\r\n\r\n  public getSeverity(): SeverityExp {\r\n    return this._severity;\r\n  }\r\n\r\n  public toString(): string {\r\n    return `${this._severity.toString()}${this._message}`;\r\n  }\r\n\r\n}","import { Variable } from \"./variable\";\r\n\r\nexport class Scope {\r\n\r\n  private _parent: Scope | undefined = undefined;\r\n\r\n  private _context: { [key: string]: Variable } = {};\r\n\r\n  private static _root: Scope;\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public static Create(): Scope {\r\n    let result: Scope = new Scope();\r\n    result._parent = Scope.GetRootScope();\r\n    return result;\r\n  }\r\n\r\n  public static GetRootScope(): Scope {\r\n    if (Scope._root === undefined) {\r\n      Scope._root = new Scope();\r\n      Scope._root.setVariable(\"PI\", 'number', Math.PI).makeConstant(Math.PI);\r\n      Scope._root.setVariable(\"EULER\", 'number', Math.E).makeConstant(Math.E);\r\n    }\r\n    return Scope._root;\r\n  }\r\n\r\n  public static CreateWithParent(parent: Scope): Scope {\r\n    let result: Scope = Scope.Create();\r\n    result._parent = parent;\r\n    return result;\r\n  }\r\n\r\n  public find(name: string): Variable | null {\r\n    if (this._context[name]) {\r\n      return this._context[name];\r\n    }\r\n    if (this._parent !== undefined) {\r\n      return this._parent.find(name);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  public setVariable(name: string, type: string, value: any): Variable {\r\n    let result: Variable | null = this.find(name);\r\n    if (result !== null) {\r\n      result.setType(type);\r\n      result.setValue(value);\r\n      return result;\r\n    }\r\n    return this.createVariable(name, type, value);\r\n  }\r\n\r\n  public createVariable(name: string, type: string, value: any): Variable {\r\n    if (this._context[name]) {\r\n      this._context[name].setType(type);\r\n      this._context[name].setValue(value);\r\n      return this._context[name];\r\n    }\r\n    let result: Variable = new Variable(name, type, value);\r\n    this._context[name] = result;\r\n    return result;\r\n  }\r\n\r\n\r\n  public setValue(name: string, value: any): void {\r\n    if (this._context[name]) {\r\n      this._context[name].setValue(value);\r\n    }\r\n  }\r\n\r\n  public isCreated(name: string): boolean {\r\n    if (this._context[name]) {\r\n      return true;\r\n    }\r\n    if (this._parent !== undefined) {\r\n      if (this._parent.find(name) !== null) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public clear(): void {\r\n    this._context = {};\r\n  }\r\n\r\n}","import { IPosition } from \"./positions\";\r\nimport { ExpressionType } from \"./expressionEnum\";\r\nimport { ExpChar } from \"./expChar\";\r\n\r\nexport class Token implements IPosition {\r\n\r\n  public type: ExpressionType = ExpressionType.STRING;\r\n\r\n  private _source: string = '';\r\n  private _contents: string = '';\r\n  private _trigger: string = '';\r\n\r\n  private _line: number = 0;\r\n  private _pos: number = 0;\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public static Create(type: ExpressionType, pos: IPosition): Token {\r\n    let result: Token = new Token();\r\n    result.type = type;\r\n    result._line = pos.getLine();\r\n    result._pos = pos.getPos();\r\n    return result;\r\n  }\r\n\r\n  public static CreateAndFill(type: ExpressionType, ch: ExpChar): Token {\r\n    let result: Token = new Token();\r\n    result.type = type;\r\n    result._line = ch.getLine();\r\n    result._pos = ch.getPos();\r\n    result._contents = ch.getValue();\r\n    result._trigger = ch.getValue();\r\n    result._source = ch.toString();\r\n    return result;\r\n  }\r\n\r\n  public addToTrigger(ch: ExpChar): Token {\r\n    this._trigger += ch.getValue();\r\n    this._source += ch.getValue();\r\n    return this;\r\n  }\r\n\r\n  public addToSource(ch: ExpChar): Token {\r\n    this._source += ch.getValue();\r\n    return this;\r\n  }\r\n\r\n  public addToContentChar(ch: ExpChar): Token {\r\n    this.addToContent(ch.getValue());\r\n    return this;\r\n  }\r\n\r\n  public addToContent(ch: string): Token {\r\n    this._contents += ch;\r\n    this._source += ch;\r\n    return this;\r\n  }\r\n\r\n  public getTrigger(): string {\r\n    return this._trigger;\r\n  }\r\n\r\n  public getTokenType(): ExpressionType {\r\n    return this.type;\r\n  }\r\n\r\n  public getContents(): string {\r\n    return this._contents;\r\n  }\r\n\r\n  public getSource(): string {\r\n    return this._source;\r\n  }\r\n\r\n  public getValue(): string {\r\n    return this._source;\r\n  }\r\n\r\n  public getLine(): number {\r\n    return this._line;\r\n  }\r\n\r\n  public getPos(): number {\r\n    return this._pos;\r\n  }\r\n\r\n  public setTokenType(new_type: ExpressionType): void {\r\n    this.type = new_type;\r\n  }\r\n\r\n  public setTrigger(trigger: string): void {\r\n    this._trigger = trigger;\r\n  }\r\n\r\n  public setContent(content: string): void {\r\n    this._contents = content;\r\n  }\r\n\r\n  public setSource(source: string): void {\r\n    this._source = source;\r\n  }\r\n\r\n  public isEnd(): boolean {\r\n    return this.type === ExpressionType.EOI;\r\n  }\r\n\r\n  public is(type: ExpressionType): boolean {\r\n    return this.type === type;\r\n  }\r\n\r\n  public matches(type: ExpressionType, trigger: string): boolean {\r\n    if (!this.is(type)) {\r\n      return false;\r\n    }\r\n    if (trigger === '') {\r\n      return false;\r\n    }\r\n    return this.getTrigger() === trigger;\r\n  }\r\n\r\n  public isOperator(...symbols: string[]): boolean {\r\n    if (symbols.length === 0) {\r\n      return this.is(ExpressionType.OPERATOR);\r\n    }\r\n    for (let i: number = 0; i < symbols.length; i++) {\r\n      if (this.matches(ExpressionType.OPERATOR, symbols[i])) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public isStartBracket(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === '(' || this._trigger === '') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isEndBracket(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === ')' || this._trigger === '') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isStartSquareBracket(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === '[' || this._trigger === '') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isEndSquareBracket(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === ']' || this._trigger === '') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isStartBrace(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === '{') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isEndBrace(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === '}') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isKeyword(...keywords: string[]): boolean {\r\n    if (keywords.length === 0) {\r\n      return this.is(ExpressionType.KEYWORD);\r\n    }\r\n    for (let i: number = 0; i < keywords.length; i++) {\r\n      if (this.matches(ExpressionType.KEYWORD, keywords[i])) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public isIdentifier(...values: string[]): boolean {\r\n    if (values.length === 0) {\r\n      return this.is(ExpressionType.ID);\r\n    }\r\n    for (let i: number = 0; i < values.length; i++) {\r\n      if (this.matches(ExpressionType.ID, values[i])) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public isSpecialIdentifier(...triggers: string[]): boolean {\r\n    if (triggers.length === 0) {\r\n      return this.is(ExpressionType.SPECIAL_ID);\r\n    }\r\n    for (let i: number = 0; i < triggers.length; i++) {\r\n      if (this.matches(ExpressionType.SPECIAL_ID, triggers[i])) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public isSpecialIdentifierWithContent(trigger: string, ...contents: string[]): boolean {\r\n    if (!this.matches(ExpressionType.SPECIAL_ID, trigger)) {\r\n      return false;\r\n    }\r\n    if (contents.length === 0) {\r\n      return true;\r\n    }\r\n    for (let i: number = 0; i < contents.length; i++) {\r\n      if (this.getContents() === contents[i]) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public isNumber(): boolean {\r\n    return this.is(ExpressionType.NUMBER);\r\n  }\r\n\r\n  public isBool(): boolean {\r\n    return this.is(ExpressionType.BOOL);\r\n  }\r\n\r\n  public isString(): boolean {\r\n    return this.is(ExpressionType.STRING);\r\n  }\r\n\r\n  public isConstant(): boolean {\r\n    return this.isNumber() || this.isBool() || this.isString();\r\n  }\r\n\r\n  public toString(): string {\r\n    return this.getTokenType().toString() + ': ' + this.getContents() + ' (' + this._line + ': ' + this._pos + '), Trigger: ' + this.getTrigger();\r\n  }\r\n\r\n\r\n\r\n\r\n}","import { ForwardQuery } from \"./forwardQuery\";\r\nimport { ExpChar } from \"./expChar\";\r\n\r\nexport class TokenReader extends ForwardQuery<ExpChar> {\r\n\r\n  private _inputExp: string = '';\r\n  private _line: number = 1;\r\n  private _pos: number = 0;\r\n  private _count: number = 0;\r\n  private _operator: number = 0;\r\n\r\n  constructor(input_exp: string) {\r\n    super();\r\n    if (input_exp === '') {\r\n\r\n    }\r\n    this._inputExp = input_exp;\r\n    this._count = input_exp.length;\r\n    this._operator = 0;\r\n  }\r\n\r\n  protected endOfInput(): ExpChar {\r\n    return new ExpChar('\\0', this._line, this._pos);\r\n  }\r\n\r\n\r\n  protected fetch(): ExpChar | undefined {\r\n    if (this._operator <= this._count - 1) {\r\n      let readChar: string = this._inputExp[this._operator];\r\n      this._operator++;\r\n      if (readChar === '\\n') {\r\n        this._line++;\r\n        this._pos = 0;\r\n      }\r\n      this._pos++;\r\n      return new ExpChar(readChar, this._line, this._pos);\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  public toString(): string {\r\n    if (this.itemBuffer.length === 0) {\r\n      return this._line + ':' + this._pos + ': Buffer empty';\r\n    }\r\n    if (this.itemBuffer.length < 2) {\r\n      return this._line + ':' + this._pos + ': ' + this.current().toString();\r\n    }\r\n    return this._line + ':' + this._pos + ': ' + this.current().toString() + ', ' + this.next().toString();\r\n  }\r\n\r\n}","import { ForwardQuery } from \"./forwardQuery\";\r\nimport { Token } from \"./token\";\r\nimport { TokenReader } from \"./tokenReader\";\r\nimport { ExpressionType } from \"./expressionEnum\";\r\nimport { ParseError, IPosition } from \"./positions\";\r\nimport { ExpChar } from \"./expChar\";\r\n\r\nexport class Tokenizer extends ForwardQuery<Token> {\r\n\r\n  private _inputExp: TokenReader;\r\n\r\n  private _decimalSeparator: string = '.';\r\n  private _lineComment: string = '//';\r\n  private _blockCommentStart: string = '/*';\r\n  private _blockCommentEnd: string = '*/';\r\n  private _brackets: string[] = ['(', ')', '', '', '[', ']', '{', '}', '', ''];\r\n  private _treatSinglePipeAsBracket: boolean = true;\r\n  private _specialIdStarters: string[] = [];\r\n  private _specialIdTerminators: string[] = [];\r\n  private _keywords: { [key: string]: string } = {};\r\n  private _keywordsCaseSensitive: boolean = false;\r\n  private _stringDelimiters: { [key: string]: string } = {};\r\n  private _boolConstant: string[] = [];\r\n\r\n  constructor(input_exp: string) {\r\n    super();\r\n    this._inputExp = new TokenReader(input_exp);\r\n    this._stringDelimiters = {};\r\n    this._stringDelimiters['\\\"'] = '\\\\';\r\n    this._stringDelimiters['\\''] = '\\0';\r\n    this._boolConstant = [];\r\n    this._boolConstant.push('false');\r\n    this._boolConstant.push('true');\r\n    this._keywords = {};\r\n    this._keywords['this'] = 'this';\r\n    this._keywords['null'] = 'null';\r\n    this._keywords['none'] = 'none';\r\n    this._keywords['undefined'] = 'undefined';\r\n  }\r\n\r\n  public endOfInput(): Token {\r\n    return Token.CreateAndFill(ExpressionType.EOI, this._inputExp.current());\r\n  }\r\n\r\n  public fetch(): Token | undefined {\r\n    // \r\n    while (this._inputExp.current().isWhiteSpace()) {\r\n      this._inputExp.consume();\r\n    }\r\n\r\n    // \r\n    if (this._inputExp.current().isEndOfInput()) {\r\n      return undefined;\r\n    }\r\n\r\n    // \r\n    if (this.isAtStartOfLineComment(true)) {\r\n      this.skipToEndOfLine();\r\n      return this.fetch();\r\n    }\r\n\r\n    // \r\n    if (this.isAtStartOfBlockComment(true)) {\r\n      this.skipBlockComment();\r\n      return this.fetch();\r\n    }\r\n\r\n    // \r\n    if (this.isAtStartOfNumber()) {\r\n      return this.fetchNumber();\r\n    }\r\n\r\n    // \r\n    if (this.isAtStartOfIdentifier()) {\r\n      return this.fetchId();\r\n    }\r\n\r\n    // \r\n    if (this._stringDelimiters[this._inputExp.current().getValue()]) {\r\n      return this.fetchString();\r\n    }\r\n\r\n    //\r\n    if (this.isAtBracket(false)) {\r\n      return Token.CreateAndFill(ExpressionType.OPERATOR, this._inputExp.consume());\r\n    }\r\n\r\n    // ID$Test$\r\n    if (this.isAtStartOfSpecialId()) {\r\n      return this.fetchSpecialId();\r\n    }\r\n\r\n    // \r\n    if (this.isOperator(this._inputExp.current())) {\r\n      return this.fetchOperator();\r\n    }\r\n\r\n    //\r\n    this.problemCollector.push(ParseError.Error(this._inputExp.current(), \": \" + this._inputExp.current().getValue()));\r\n\r\n    this._inputExp.consume();\r\n    return this.fetch();\r\n  }\r\n\r\n  private fetchNumber(): Token {\r\n    let result: Token = Token.Create(ExpressionType.NUMBER, this._inputExp.current());\r\n    result.addToContentChar(this._inputExp.consume());\r\n    let hasDecimal: boolean = false;\r\n    while (this._inputExp.current().isDigit() || this._inputExp.current().is(this._decimalSeparator)) {\r\n      if (this._inputExp.current().is(this._decimalSeparator)) {\r\n        if (hasDecimal) {\r\n          this.problemCollector.push(ParseError.Error(this._inputExp.current(), \"\"));\r\n        }\r\n        hasDecimal = true;\r\n        result.addToContentChar(this._inputExp.consume());\r\n      } else {\r\n        result.addToContentChar(this._inputExp.consume());\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  private fetchId(): Token {\r\n    let result: Token = Token.Create(ExpressionType.ID, this._inputExp.current());\r\n    result.addToContentChar(this._inputExp.consume());\r\n    while (this.isIdentifierChar(this._inputExp.current())) {\r\n      result.addToContentChar(this._inputExp.consume());\r\n    }\r\n    //UnityEngine.Debug.LogWarning(result.GetContents());\r\n    if (!this._inputExp.current().isEndOfInput() && this._specialIdTerminators.indexOf(this._inputExp.current().getValue()) > -1) {\r\n      let specialId: Token = Token.Create(ExpressionType.SPECIAL_ID, result);\r\n      specialId.setTrigger(this._inputExp.current().getValue());\r\n      specialId.setContent(result.getContents());\r\n      specialId.setSource(result.getContents());\r\n      specialId.addToSource(this._inputExp.current());\r\n      this._inputExp.consume();\r\n      return this.handleKeywords(specialId);\r\n    }\r\n    return this.handleKeywords(result);\r\n  }\r\n\r\n  private fetchString(): Token {\r\n    //\r\n    let separator: string = this._inputExp.current().getValue();\r\n    //\r\n    //char escapeChar = _stringDelimiters[_inputExp.current().GetValue()];\r\n    let result: Token = Token.Create(ExpressionType.STRING, this._inputExp.current());\r\n    result.addToTrigger(this._inputExp.consume());\r\n    while (!this._inputExp.current().isNewLine() && !this._inputExp.current().is(separator) && !this._inputExp.current().isEndOfInput()) {\r\n      result.addToContentChar(this._inputExp.consume());\r\n    }\r\n    if (this._inputExp.current().is(separator)) {\r\n      result.addToSource(this._inputExp.consume());\r\n    }\r\n    else {\r\n      this.problemCollector.push(ParseError.Error(this._inputExp.current(), \"\"));\r\n    }\r\n    return result;\r\n  }\r\n\r\n  private isAtStartOfLineComment(consume: boolean): boolean {\r\n    if (this._lineComment !== '') {\r\n      return this.canConsumeThisString(this._lineComment, consume);\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  private canConsumeThisString(check_string: string, consume: boolean): boolean {\r\n    for (let i: number = 0; i < check_string.length; i++) {\r\n      //next//\r\n      if (!(this._inputExp.nextOffset(i).is(check_string[i]))) {\r\n        return false;\r\n      }\r\n    }\r\n    if (consume) {\r\n      this._inputExp.consumeNext(check_string.length);\r\n    }\r\n    return true;\r\n  }\r\n\r\n  private skipToEndOfLine(): void {\r\n    while (!this._inputExp.current().isEndOfInput() && !this._inputExp.current().isNewLine()) {\r\n      this._inputExp.consume();\r\n    }\r\n  }\r\n\r\n  private isAtStartOfBlockComment(consume: boolean): boolean {\r\n    return this.canConsumeThisString(this._blockCommentStart, consume);\r\n  }\r\n\r\n  private skipBlockComment(): void {\r\n    while (!this._inputExp.current().isEndOfInput()) {\r\n      if (this.isAtEndOfBlockComment()) {\r\n        return;\r\n      }\r\n      this._inputExp.consume();\r\n    }\r\n    this.problemCollector.push(ParseError.Error(this._inputExp.current(), ''));\r\n  }\r\n\r\n  private isAtEndOfBlockComment(): boolean {\r\n    return this.canConsumeThisString(this._blockCommentEnd, true);\r\n  }\r\n\r\n  private isAtStartOfNumber(): boolean {\r\n    if (this._inputExp.current().isDigit()) {\r\n      return true;\r\n    } else if (this._inputExp.current().is('.') && this._inputExp.next().isDigit()) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  private isAtStartOfIdentifier(): boolean {\r\n    return this._inputExp.current().isLetterOrCharactor() || this._inputExp.current().is('_') || this._inputExp.current().is('#');\r\n  }\r\n\r\n  private isIdentifierChar(current: ExpChar): boolean {\r\n    return current.isDigit() || current.isLetterOrCharactor() || current.is('_') || current.is('.') || current.is('#') || current.is(':') || current.is('');\r\n  }\r\n\r\n  private isAtBracket(in_symbol: boolean): boolean {\r\n    let r: boolean = true;\r\n    for (let i: number = 0; i < this._brackets.length; i++) {\r\n      if (!this._inputExp.current().is(this._brackets[i])) {\r\n        r = false;\r\n      }\r\n    }\r\n    if (r) {\r\n      return true;\r\n    }\r\n    if (!in_symbol && this._treatSinglePipeAsBracket && this._inputExp.current().is('|') && this._inputExp.next().is('|')) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private isAtStartOfSpecialId(): boolean {\r\n    return this._specialIdStarters.indexOf(this._inputExp.current().getValue()) > -1;\r\n  }\r\n\r\n  private fetchSpecialId(): Token {\r\n    let result: Token = Token.Create(ExpressionType.SPECIAL_ID, this._inputExp.current());\r\n    result.addToTrigger(this._inputExp.consume());\r\n    while (this.isIdentifierChar(this._inputExp.current())) {\r\n      result.addToContentChar(this._inputExp.consume());\r\n    }\r\n    return this.handleKeywords(result);\r\n  }\r\n\r\n  private handleKeywords(id_token: Token): Token {\r\n    let keyword: string = \"\";\r\n    if (this._keywordsCaseSensitive) {\r\n      if (this._keywords[id_token.getContents()]) {\r\n        keyword = this._keywords[id_token.getContents()];\r\n      }\r\n    } else {\r\n      if (this._keywords[id_token.getContents().toLowerCase()]) {\r\n        keyword = this._keywords[id_token.getContents().toLowerCase()];\r\n      }\r\n    }\r\n    if (keyword != \"\") { //\r\n      let keywordToken: Token = Token.Create(ExpressionType.KEYWORD, id_token);\r\n      keywordToken.setTrigger(keyword);\r\n      keywordToken.setContent(id_token.getContents());\r\n      keywordToken.setSource(id_token.getSource());\r\n      return keywordToken;\r\n    } else if (!id_token.is(ExpressionType.SPECIAL_ID)) { //bool\r\n      keyword = id_token.getContents().toLowerCase();\r\n      if (this._boolConstant.indexOf(keyword) > -1) {\r\n        id_token.setTokenType(ExpressionType.BOOL);\r\n      }\r\n    }\r\n    return id_token;\r\n  }\r\n\r\n  private isOperator(ch: ExpChar): boolean {\r\n    if (ch.isEndOfInput() || ch.isDigit() || ch.isLetterOrCharactor() || ch.isWhiteSpace()) {\r\n      return false;\r\n    }\r\n\r\n    // let c: string = ch.getValue();\r\n    // if (char.IsControl(c)) {\r\n    // \treturn false;\r\n    // }\r\n\r\n    if (this.isAtBracket(true) || this.isAtStartOfBlockComment(false) || this.isAtStartOfLineComment(false) || this.isAtStartOfNumber() || this.isAtStartOfIdentifier() || this._stringDelimiters[ch.getValue()]) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  private fetchOperator(): Token {\r\n    let result: Token = Token.Create(ExpressionType.OPERATOR, this._inputExp.current());\r\n    result.addToTrigger(this._inputExp.consume());\r\n    if (result.isOperator(\"*\") && this._inputExp.current().is('*')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\"&\") && this._inputExp.current().is('&')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\"|\") && this._inputExp.current().is('|')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\"<\") && this._inputExp.current().is('=')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\">\") && this._inputExp.current().is('=')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if ((result.isOperator(\"!\") || result.isOperator(\"\")) && this._inputExp.current().is('=')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\"=\") && this._inputExp.current().is('=')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public addError(pos: IPosition, msg: string): void {\r\n    this.getProblemCollector().push(ParseError.Error(pos, msg));\r\n  }\r\n\r\n  public addWarning(pos: IPosition, msg: string): void {\r\n    this.getProblemCollector().push(ParseError.Warning(pos, msg));\r\n  }\r\n\r\n\r\n\r\n}","export class Variable {\r\n\r\n  public get expType(): string {\r\n    return this._expType;\r\n  }\r\n  private _expType: string = 'string';\r\n\r\n  private _value: any = null;\r\n\r\n  private _name: string = '';\r\n\r\n  private _constant: boolean = false;\r\n\r\n  constructor(name: string, type: string, value: any) {\r\n    this._name = name;\r\n    this._expType = type;\r\n    this._value = value;\r\n  }\r\n\r\n  public setType(type: string): void {\r\n    if(!this._constant) {\r\n      this._expType = type;\r\n    }\r\n  }\r\n\r\n  public setValue(value: any): void {\r\n    if(!this._constant) {\r\n      this._value = value;\r\n    }\r\n  }\r\n\r\n  public makeConstant(value: any): void {\r\n    this.setValue(value);\r\n    this._constant = true;\r\n  }\r\n\r\n  public getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  public getName(): string {\r\n    return this._name;\r\n  }\r\n\r\n  public isConstant(): boolean {\r\n    return this._constant;\r\n  }\r\n\r\n  public toString(): string {\r\n    return `Type: ${this._expType} --- ${this._name}: ${this._value.toString()}`;\r\n  }\r\n\r\n}","import { IExpression } from \"./expressions\";\r\nimport { Variable } from \"./variable\";\r\n\r\nexport class VariableExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    return this._value.expType;\r\n  }  \r\n\r\n  public get className(): string {\r\n    return 'VariableExpression';\r\n  }\r\n\r\n  private _value: Variable;\r\n  \r\n  constructor(value: Variable) {\r\n    this._value = value;\r\n  }\r\n  \r\n  public evaluate(): any {\r\n    return this._value.getValue();\r\n  }\r\n\r\n  public toString(): string {\r\n    return this._value.getName();\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let expClone: VariableExpression = new VariableExpression(this._value);\r\n    return expClone;\r\n  }\r\n  \r\n\r\n}","import { Scope } from \"./scope\";\r\nimport { ErrorInfo } from \"../utility\";\r\nimport { IExpression, VeryVarExpression, VeryTemplateExpression } from \"./expressions\";\r\nimport { VE_ExpressionParsing } from \"./expressionParsing\";\r\nimport { VariableScope } from \"../enum\";\r\nimport { ParseError } from \"./positions\";\r\nimport { VerySceneVariables } from \"../scene\";\r\nimport { IVeryVar, VE_Variables } from \"../variables\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { StateConst } from \"../state\";\r\nimport { VE_Objects, VeryEngineObject } from \"../object\";\r\nimport { Variable } from \"./variable\";\r\nimport { VE_Template } from \"../template\";\r\n\r\n\r\nexport class VE_Expressions {\r\n\r\n  public static _scope: Scope = Scope.Create();\r\n\r\n  // 1 - \r\n  // 2 -  + \r\n  // 3 -  +  +  + \r\n  // 4 -  +  +  + \r\n  // 5 -  +  +  + bool\r\n  // 6 - \r\n\r\n\r\n  // TODO == GameObject\r\n  // \r\n  public static createSceneExpression(name_id: string, expression_str: string, error_info: ErrorInfo): IExpression {\r\n    let sceneExp: IExpression = VE_ExpressionParsing.parsing(name_id, expression_str, VE_Expressions._scope, '', '', '', VariableScope.Scene);\r\n    if (VE_ExpressionParsing.errors.length > 0) {\r\n      error_info.isRight = false;\r\n      error_info.message = VE_Expressions.errorMessage(VE_ExpressionParsing.errors);\r\n    }\r\n    return sceneExp;\r\n  }\r\n\r\n  // \r\n  public static createGlobalExpression(name_id: string, expression_str: string, project_name: string, error_info: ErrorInfo): IExpression {\r\n    let globalExp: IExpression = VE_ExpressionParsing.parsing(name_id, expression_str, VE_Expressions._scope, project_name, '', '', VariableScope.Global);\r\n    if (VE_ExpressionParsing.errors.length > 0) {\r\n      error_info.isRight = false;\r\n      error_info.message = VE_Expressions.errorMessage(VE_ExpressionParsing.errors);\r\n    }\r\n    return globalExp;\r\n  }\r\n\r\n  // \r\n  public static createLocalExpression(name_id: string, expression_str: string, project_name: string, object_id: string, error_info: ErrorInfo): IExpression {\r\n    let localExp: IExpression = VE_ExpressionParsing.parsing(name_id, expression_str, VE_Expressions._scope, project_name, object_id, '', VariableScope.Local);\r\n    if (VE_ExpressionParsing.errors.length > 0) {\r\n      error_info.isRight = false;\r\n      error_info.message = VE_Expressions.errorMessage(VE_ExpressionParsing.errors);\r\n    }\r\n    return localExp;\r\n  }\r\n\r\n  // \r\n  public static createFsmExpression(name_id: string, expression_str: string, project_name: string, object_id: string, fsm_id: string, error_info: ErrorInfo): IExpression {\r\n    let fsmExp: IExpression = VE_ExpressionParsing.parsing(name_id, expression_str, VE_Expressions._scope, project_name, object_id, fsm_id, VariableScope.Fsm);\r\n    if (VE_ExpressionParsing.errors.length > 0) {\r\n      error_info.isRight = false;\r\n      error_info.message = VE_Expressions.errorMessage(VE_ExpressionParsing.errors);\r\n    }\r\n    return fsmExp;\r\n  }\r\n\r\n\r\n  // \r\n  public static getParseExpression(project_name: string, object_id: string, var_id: string, var_scope: VariableScope): Nullable<IExpression> {\r\n    // TODO: \r\n    // .*\r\n    if (var_id.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n      let varArray: string[] = var_id.split(StateConst.STATE_SEPARATOR);\r\n      if (varArray.length !== 2) {\r\n        return null;\r\n      } else {\r\n        object_id = varArray[0].trim();\r\n        var_id = varArray[1].trim().substring(1);\r\n        if (var_scope === VariableScope.Local || var_scope === VariableScope.Fsm) {\r\n          //  +  +  + \r\n          // 1. \r\n          // 2. \r\n          // 3. \r\n          // 4. \r\n          let objects: VE_Objects = VE_Manager.objects(project_name);\r\n          if (!objects) {\r\n            return null;\r\n          } else {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n            if (!veryObject) {\r\n              return null;\r\n            } else {\r\n              // \r\n              if (veryObject.isCreatedVariable(var_id)) {\r\n                let v: IVeryVar = veryObject.getVariable(var_id);\r\n                return new VeryVarExpression(v);\r\n              }\r\n              // \r\n              else if (veryObject.isCreatedExpression(var_id)) {\r\n                return veryObject.getExpression(var_id);\r\n              }\r\n              // \r\n              else if (veryObject.isCreatedFsm(var_id)) {\r\n                let v: IVeryVar = veryObject.getFsm(var_id).fsmVar;\r\n                return new VeryVarExpression(v);\r\n              }\r\n              else {\r\n                // \r\n                return null;\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          return null;\r\n        }\r\n      }\r\n    }\r\n    // *\r\n    else {\r\n      if (var_id.startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n        var_id = var_id.substring(1);\r\n        if (var_scope === VariableScope.Local || var_scope === VariableScope.Fsm) {\r\n          //  +  +  + \r\n          // 1. \r\n          // 2. \r\n          // 3. \r\n          // 4. \r\n          let objects: VE_Objects = VE_Manager.objects(project_name);\r\n          if (!objects) {\r\n            return null;\r\n          } else {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n            if (!veryObject) {\r\n              return null;\r\n            } else {\r\n              //\r\n              if (veryObject.isCreatedVariable(var_id)) {\r\n                let v: IVeryVar = veryObject.getVariable(var_id);\r\n                return new VeryVarExpression(v);\r\n              }\r\n              //\r\n              else if (veryObject.isCreatedExpression(var_id)) {\r\n                return veryObject.getExpression(var_id);\r\n              }\r\n              //\r\n              else if (veryObject.isCreatedFsm(var_id)) {\r\n                let v: IVeryVar = veryObject.getFsm(var_id).fsmVar;\r\n                return new VeryVarExpression(v);\r\n              }\r\n              else {\r\n                //\r\n                return this.getParseGlobal(project_name, var_id);\r\n              }\r\n            }\r\n          }\r\n        } else if (var_scope === VariableScope.Global) {\r\n          // \r\n          return this.getParseGlobal(project_name, var_id);\r\n        } else {\r\n          // \r\n          return this.getParseScene(var_id);\r\n        }\r\n      } else {\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n  private static getParseGlobal(project_name: string, var_id: string): Nullable<IExpression> {\r\n    // \r\n    let variables: VE_Variables = VE_Manager.variables(project_name);\r\n    if (!variables) {\r\n      return null;\r\n    } else {\r\n      if (variables.isCreatedVariable(var_id)) {\r\n        let v: IVeryVar = variables.getVariable(var_id);\r\n        return new VeryVarExpression(v);\r\n      } else if (variables.isCreatedExpression(var_id)) {\r\n        return variables.getExpression(var_id);\r\n      } else {\r\n        // \r\n        return this.getParseScene(var_id);\r\n      }\r\n    }\r\n  }\r\n\r\n  // \r\n  private static getParseScene(var_id: string): Nullable<IExpression> {\r\n    // \r\n    if (VerySceneVariables.Variables.isCreated(var_id)) {\r\n      let v: IVeryVar = VerySceneVariables.Variables.getVariable(var_id);\r\n      return new VeryVarExpression(v);\r\n    } else if (VerySceneVariables.Variables.isCreatedExpression(var_id)) {\r\n      return VerySceneVariables.Variables.getExpression(var_id);\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  private static errorMessage(errors: ParseError[]): string {\r\n    let errorStr: string = '';\r\n    for (let i: number = 0; i < errors.length; i++) {\r\n      errorStr += `\\n(${(i+1)}) ${errors[i].getMessage()} ;`;\r\n    }\r\n    errorStr += '\\n';\r\n    return errorStr;\r\n  }\r\n\r\n\r\n  public static getTemplateExpression(project_name: string, object_id: string, var_id: string, var_scope: VariableScope): Nullable<VeryTemplateExpression> {\r\n    // .*\r\n    if (var_id.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n      let varArray: string[] = var_id.split(StateConst.STATE_SEPARATOR);\r\n      if (varArray.length !== 2) {\r\n        //error_info = \".*ID\" + var_id + \"\";\r\n        return null;\r\n      }\r\n      else {\r\n        object_id = varArray[0].trim();\r\n        var_id = varArray[1].trim().substring(1);\r\n        if (var_scope === VariableScope.Local || var_scope === VariableScope.Fsm) {\r\n          let objects: VE_Objects = VE_Manager.objects(project_name);\r\n          if (!objects) {\r\n            return null;\r\n          }\r\n          else {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n            if (!veryObject) {\r\n              return null;\r\n            }\r\n            else {\r\n              // \r\n              if (veryObject.isCreatedTemplate(var_id)) {\r\n                let template: VE_Template = veryObject.getTemplate(var_id);\r\n                let r = new VeryTemplateExpression();\r\n                r.setTemplate(template);\r\n                return r;\r\n              }\r\n              else {\r\n                // \r\n                return null;\r\n              }\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          return null;\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      // *\r\n      if (var_id.startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n        var_id = var_id.substring(1);\r\n        if (var_scope === VariableScope.Local || var_scope === VariableScope.Fsm) {\r\n          let objects: VE_Objects = VE_Manager.objects(project_name);\r\n          if (!objects) {\r\n            return null;\r\n          }\r\n          else {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n            if (!veryObject) {\r\n              return null;\r\n            }\r\n            else {\r\n              // \r\n              if (veryObject.isCreatedTemplate(var_id)) {\r\n                let template: VE_Template = veryObject.getTemplate(var_id);\r\n                let r: VeryTemplateExpression = new VeryTemplateExpression();\r\n                r.setTemplate(template);\r\n                return r;\r\n              }\r\n              else {\r\n                // \r\n                let variables: VE_Variables = VE_Manager.variables(project_name);\r\n                if (!variables) {\r\n                  return null;\r\n                }\r\n                else {\r\n                  if (variables.isCreatedTemplate(var_id)) {\r\n                    let template: VE_Template = variables.getTemplate(var_id);\r\n                    let r: VeryTemplateExpression = new VeryTemplateExpression();\r\n                    r.setTemplate(template);\r\n                    return r;\r\n                  }\r\n                  else {\r\n                    // \r\n                    return null;\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        else if (var_scope === VariableScope.Global) {\r\n          // \r\n          let variables: VE_Variables = VE_Manager.variables(project_name);\r\n          if (!variables) {\r\n            return null;\r\n          }\r\n          else {\r\n            if (variables.isCreatedTemplate(var_id)) {\r\n              let template: VE_Template = variables.getTemplate(var_id);\r\n              let r: VeryTemplateExpression = new VeryTemplateExpression();\r\n              r.setTemplate(template);\r\n              return r;\r\n            }\r\n            else {\r\n              //\r\n              return null;\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          return null;\r\n        }\r\n      }\r\n      else {\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\r\n\r\n","import { Severity } from \"../enum\";\r\n\r\nexport class VE_Error {\r\n  private _pos: string = '';\r\n  private _message: string = '';\r\n  private _tableName: string = '';\r\n  private _severity: Severity = Severity.Error;\r\n\r\n  /**\r\n   * \r\n   * @param pos \r\n   * @param message \r\n   * @param table_name \r\n   * @param severity \r\n   */\r\n  constructor(pos: string, message: string, table_name: string, severity: Severity) {\r\n    this._pos = pos;\r\n    this._message = message;\r\n    this._severity = severity;\r\n    this._tableName = table_name;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param pos \r\n   * @param msg \r\n   * @param table_name \r\n   */\r\n  public static warning(pos: string, msg: string, table_name: string): VE_Error {\r\n    return new VE_Error(pos, msg, table_name, Severity.Warning);\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param pos \r\n   * @param msg \r\n   * @param table_name \r\n   */\r\n  public static error(pos: string, msg: string, table_name: string): VE_Error {\r\n    return new VE_Error(pos, msg, table_name, Severity.Error);\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public getPos(): string {\r\n    return this._pos;\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public getMessage(): string {\r\n    return this._message;\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public getTableName(): string {\r\n    return this._tableName;\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public getSeverity(): Severity {\r\n    return this._severity;\r\n  }\r\n\r\n  public toString(): string {\r\n    return \"\" + this._pos + \"\" + this._message + \"\" + this._tableName;\r\n  }\r\n}\r\n\r\n\r\nexport class VE_ErrorManager {\r\n\r\n  private static _errorList: VE_Error[] = [];\r\n\r\n  /// <summary>\r\n  /// \r\n  /// </summary>\r\n  public static get Count() {\r\n    return this._errorList.length;\r\n  }\r\n\r\n  /// <summary>\r\n  /// \r\n  /// </summary>\r\n  /// <param name=\"error\"></param>\r\n  public static Add(error: VE_Error): void {\r\n    this._errorList.push(error);\r\n  }\r\n\r\n  /// <summary>\r\n  /// \r\n  /// </summary>\r\n  /// <param name=\"index\"></param>\r\n  /// <returns></returns>\r\n  public static GetError(index: number): VE_Error {\r\n    return this._errorList[index];\r\n  }\r\n\r\n  /// <summary>\r\n  /// TODO: \r\n  /// </summary>\r\n  /// <param name=\"prefix\"></param>\r\n  public static Print(prefix?: string): void {\r\n    if (prefix) {\r\n      for (let i: number = 0; i < this._errorList.length; i++) {\r\n        if (this._errorList[i].getSeverity() === Severity.Error) {\r\n          console.error(' >>> ' + prefix + \" -> \" + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n        else if (this._errorList[i].getSeverity() === Severity.Warning) {\r\n          console.warn(' >>> ' + prefix + \" -> \" + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n    } else {\r\n      for (let i: number = 0; i < this._errorList.length; i++) {\r\n        if (this._errorList[i].getSeverity() === Severity.Error) {\r\n          console.error(' >>> ' + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n        else if (this._errorList[i].getSeverity() === Severity.Warning) {\r\n          console.warn(' >>> ' + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /// <summary>\r\n  /// \r\n  /// </summary>\r\n  /// <param name=\"prefix\"></param>\r\n  public static PrintWarnning(prefix?: string): void {\r\n    if (prefix) {\r\n      for (let i: number = 0; i < this._errorList.length; i++) {\r\n        if (this._errorList[i].getSeverity() === Severity.Warning) {\r\n          console.warn(' >>> ' + prefix + \" -> \" + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n    } else {\r\n      for (let i: number = 0; i < this._errorList.length; i++) {\r\n        if (this._errorList[i].getSeverity() === Severity.Warning) {\r\n          console.warn(' >>> ' + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /// <summary>\r\n  /// \r\n  /// </summary>\r\n  /// <param name=\"prefix\"></param>\r\n  public static PrintError(prefix: string): void {\r\n    if (prefix) {\r\n      for (let i: number = 0; i < this._errorList.length; i++) {\r\n        if (this._errorList[i].getSeverity() === Severity.Error) {\r\n          console.error(' >>> ' + prefix + \" -> \" + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n    } else {\r\n      for (let i: number = 0; i < this._errorList.length; i++) {\r\n        if (this._errorList[i].getSeverity() === Severity.Error) {\r\n          console.error(' >>> ' + prefix + \" -> \" + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}","export class GameGlobal {\r\n\r\n  \r\n  public static PlatformLoaded: boolean = false;\r\n  \r\n\r\n}","export * from './gameGlobal';\r\nexport * from './errorManager';\r\nexport * from './triggerGlobal';","import { VE_TriggerBehaviour } from \"../trigger\";\r\n\r\nexport class TriggerGlobal {\r\n\r\n  private static KEYMAP: {[key: string]: string} = {};\r\n  private static _keyUpdate: {[key: string]: boolean} = {};\r\n\r\n  private static _keysDic: { [key: string]: string } = {};\r\n\r\n  private static _triggerList: VE_TriggerBehaviour[] = [];\r\n\r\n  private static _scenes: BABYLON.Scene[] = [];\r\n  private static _initialized: boolean = false;\r\n\r\n  public static Init(): void {\r\n    \r\n\r\n  }\r\n\r\n  public static AddKeyboard(key: string, trigger: VE_TriggerBehaviour): void {\r\n    // TODO\r\n    // \r\n    if(this._scenes.indexOf(trigger.scene) === -1) {\r\n      this._scenes.push(trigger.scene);\r\n      trigger.scene.onKeyboardObservable.add( kbInfo => {\r\n        if(kbInfo.type === BABYLON.KeyboardEventTypes.KEYDOWN) {\r\n          this._keyUpdate[kbInfo.event.key.toLowerCase()] = true;\r\n        } else {\r\n          this._keyUpdate[kbInfo.event.key.toLowerCase()] = false;\r\n        }\r\n      });\r\n    }\r\n    this._triggerList.push(trigger);\r\n    // this._keysDic\r\n\r\n  }\r\n\r\n\r\n  public static RemoveKeyboard(trigger_id: string): void {\r\n\r\n  }\r\n\r\n  // \r\n\r\n  public static KeyboardUpdate(): void {\r\n\r\n    \r\n\r\n    for(let i = 0; i < this._triggerList.length; i++) {\r\n      if(this._triggerList[i].enabled) {\r\n        if(this._keyUpdate[this._keysDic[this._triggerList[i].unionID]]) {\r\n\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public static clear(): void {\r\n\r\n  }\r\n\r\n  public static clearProject(project_name: string): void {\r\n    this._scenes[0].onKeyboardObservable.clear();\r\n  }\r\n\r\n}","export * from './showError';","export class ShowError {\r\n\r\n  public static errorContentPrefix: string = '<div class=\"alert alert-error\"><button type=\"button\" class=\"close\" data-dismiss=\"alert\">&times;</button>';\r\n  public static errorContentNow: string;\r\n  public static errorZone: HTMLElement;\r\n\r\n  public static initZone(): void {\r\n    if (!this.errorZone) {\r\n      this.errorZone = document.getElementById(\"errorZone\")!;\r\n    }\r\n  }\r\n  /**\r\n   * \r\n   * TODO: logerrorwarn\r\n   * @param error_msg \r\n   */\r\n  private static showMsg(prefix: string, error_msg: string): void {\r\n    this.initZone();\r\n    if (!this.errorContentNow) {\r\n      this.errorContentNow = this.errorContentPrefix;\r\n    }\r\n    this.errorContentNow += prefix + error_msg + \"<br/>\";\r\n    this.errorZone.style.display = \"block\";\r\n    this.errorZone.innerHTML = this.errorContentNow + '</div>';\r\n    // Close button error\r\n    let closeBtn = this.errorZone.querySelector(\".close\")!;\r\n    let that = this;\r\n    closeBtn.addEventListener(\"click\", function () {\r\n      that.errorZone.style.display = \"none\";\r\n    });\r\n  }\r\n\r\n  public static show(error_msg: string): void {\r\n    this.showMsg('>>>', error_msg);\r\n  }\r\n\r\n  public static showError(error_msg: string): void {\r\n    this.showMsg('>>>', error_msg);\r\n  }\r\n\r\n  public static showWarn(error_msg: string): void {\r\n    this.showMsg('>>>', error_msg);\r\n  }\r\n\r\n  public static clear(): void {\r\n    ShowError.initZone();\r\n    ShowError.errorContentNow = ShowError.errorContentPrefix;\r\n    ShowError.errorZone.innerHTML = ShowError.errorContentNow + '</div>';\r\n    // Close button error\r\n    let closeBtn = ShowError.errorZone.querySelector(\".close\")!;\r\n    let that = ShowError;\r\n    closeBtn.addEventListener(\"click\", function () {\r\n      that.errorZone.style.display = \"none\";\r\n    });\r\n  }\r\n\r\n  public static close(): void {\r\n    ShowError.initZone();\r\n    if(ShowError.errorZone.style.display === \"none\") {\r\n      ShowError.errorZone.style.display = \"block\";\r\n    } else {\r\n      ShowError.errorZone.style.display = \"none\";\r\n    }\r\n  }\r\n}","export * from './utility/index';\r\n\r\nexport * from './action/index';\r\nexport * from './dataSource/index';\r\nexport * from './enum/index';\r\nexport * from './expression/index';\r\nexport * from './global/index';\r\nexport * from './html/index';\r\nexport * from './manager/index';\r\nexport * from './object/index';\r\nexport * from './state/index';\r\nexport * from './template/index';\r\nexport * from './trigger/index';\r\nexport * from './loader/index';\r\n\r\nexport * from './variables/index';\r\nexport * from './scene/index';\r\n\r\nexport * from '../verytable/index';\r\n\r\nexport * from './library/action/index';\r\nexport * from './library/trigger/index';\r\n","import { VE_ActionBehaviour, VE_Actions } from \"../../action\";\r\nimport { IVeryVar, VarTools } from \"../../variables\";\r\nimport { VE_Template } from \"../../template\";\r\nimport { ParaParserUtility, ErrorInfo } from \"../../utility\";\r\nimport { ParaType, Severity } from \"../../enum\";\r\nimport { VE_ErrorManager, VE_Error } from \"../../global\";\r\n\r\nenum TypeVar { VeryVar, Template, Const };\r\n\r\nexport class Action_Debug extends VE_ActionBehaviour {\r\n\r\n  public get ID(): string {\r\n    return 'Debug|';\r\n  };\r\n\r\n  public get className(): string {\r\n    return 'Action_Debug';\r\n  };\r\n\r\n  private _debugMode: number = 0;\r\n\r\n  private _typeList: Array<TypeVar> = [];\r\n  private _veryVarDic: { [key: number]: IVeryVar } = {};\r\n  private _templateDic: { [key: number]: VE_Template } = {};\r\n  private _constDic: { [key: number]: string } = {};\r\n\r\n  private _separator: string = \" \";\r\n\r\n  private _strBuilder: string = '';\r\n\r\n  public active(): void {\r\n\r\n  }\r\n\r\n  public onUpdate(): void {\r\n    this._strBuilder = '';\r\n    for (let i: number = 0; i < this._typeList.length; i++) {\r\n      if (this._typeList[i] === TypeVar.Const) {\r\n        this._strBuilder += this._constDic[i];\r\n      }\r\n      else if (this._typeList[i] === TypeVar.VeryVar) {\r\n        this._strBuilder += this._veryVarDic[i].getValue();\r\n      }\r\n      else if (this._typeList[i] === TypeVar.Template) { // TODO\r\n        //this._templateDic[i].\r\n        //_strBuilder.Append(_toString.GetString(_blueVarDic[i].VarType, _blueVarDic[i].GetValue()));\r\n      }\r\n      this._strBuilder += this._separator;\r\n    }\r\n    this._strBuilder = this._strBuilder.trim();\r\n    if (this._debugMode === 0) {\r\n      // console.log(` >>> ${this._strBuilder}`);\r\n      console.log(this._strBuilder);\r\n    }\r\n    else if (this._debugMode == 1) {\r\n      // console.warn(` >>> ${this._strBuilder}`);\r\n      console.warn(this._strBuilder);\r\n    }\r\n    else if (this._debugMode == 2) {\r\n      // console.error(` >>> ${this._strBuilder}`);\r\n      console.error(this._strBuilder);\r\n    }\r\n  }\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    if (!ParaParserUtility.ParaNumbers(this.ID, ParaType.Action, para_array.length, 2)) {\r\n      return false;\r\n    } else {\r\n      // 1\r\n      if (para_array[0].toLowerCase() === \"log\" || para_array[0] === \"\") {\r\n        this._debugMode = 0;\r\n      }\r\n      else if (para_array[0].toLowerCase() === \"warn\" || para_array[0] === \"\") {\r\n        this._debugMode = 1;\r\n      }\r\n      else if (para_array[0].toLowerCase() === \"error\" || para_array[0] === \"\") {\r\n        this._debugMode = 2;\r\n      }\r\n      else {\r\n        VE_ErrorManager.Add(new VE_Error('', this.ID + \"  LogWarnError \" + para_array[0] + \"\", '', Severity.Error));\r\n        return false;\r\n      }\r\n\r\n      // 2\r\n      //12*3.*4*5.*6*.*7.*.*\r\n      let debugArray: string[] = para_array[1].split('+');\r\n      for (let i: number = 0; i < debugArray.length; i++) {\r\n        debugArray[i] = debugArray[i].trim();\r\n        if (VarTools.IsVarID(debugArray[i])) {\r\n          let errorInfo: ErrorInfo = new ErrorInfo();\r\n          let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVarWithExpression(this.projectName, this.objectID, debugArray[i], errorInfo);\r\n          if (veryVar === null) {\r\n            errorInfo.clear();\r\n            let template: Nullable<VE_Template> = VarTools.GetTemplate(this.projectName, this.objectID, debugArray[i], errorInfo);\r\n            if (template === null) {\r\n              VE_ErrorManager.Add(new VE_Error('', this.ID + \"  \" + debugArray[i] + \"\", '', Severity.Error));\r\n              this._constDic[this._typeList.length] = debugArray[i];\r\n              this._typeList.push(TypeVar.Const);\r\n            }\r\n            else {\r\n              this._templateDic[this._typeList.length] = template;\r\n              this._typeList.push(TypeVar.Template);\r\n            }\r\n          }\r\n          else {\r\n            this._veryVarDic[this._typeList.length] = veryVar;\r\n            this._typeList.push(TypeVar.VeryVar);\r\n          }\r\n        }\r\n        else {\r\n          this._constDic[this._typeList.length] = debugArray[i];\r\n          this._typeList.push(TypeVar.Const);\r\n        }\r\n      }\r\n\r\n      return true;\r\n    }\r\n  }\r\n\r\n\r\n  public destroy(): void {\r\n\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\nVE_Actions.addAction(Action_Debug);","export * from './transform';\r\nexport * from './debug';\r\nexport * from './vector3';","import { VE_ActionBehaviour, VE_Actions } from '../../action';\r\nimport { VeryGameObject, VeryBool, VeryVector3, VeryNumber } from '../../variables';\r\nimport { Time, Transform } from '../../babylon';\r\nimport { ParaParserUtility, VeryParas } from '../../utility';\r\nimport { ParaType, Severity } from '../../enum';\r\nimport { VE_ErrorManager, VE_Error } from '../../global';\r\n\r\nexport class Action_SetPosition extends VE_ActionBehaviour {\r\n\r\n\r\n  public get ID(): string {\r\n    return 'Set_Position|';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'Action_SetPosition';\r\n  }\r\n\r\n\r\n  private _posvalue: VeryNumber = new VeryNumber();\r\n  private _posVec: VeryVector3 = new VeryVector3();\r\n\r\n  private _space: BABYLON.Space = BABYLON.Space.LOCAL;\r\n\r\n  private _isVec: boolean = false;\r\n  private _x: VeryNumber = new VeryNumber();\r\n  private _y: VeryNumber = new VeryNumber();\r\n  private _z: VeryNumber = new VeryNumber();\r\n\r\n  private _axis: number = 0;\r\n\r\n  private _trans: VeryGameObject = new VeryGameObject();\r\n  private _ref: VeryGameObject = new VeryGameObject();\r\n\r\n  public active(): void {\r\n\r\n  }\r\n\r\n  public onUpdate(): void {\r\n    if (this._trans !== null && this._trans.value !== null) {\r\n      if (this._space === BABYLON.Space.LOCAL) {\r\n        if (this._axis === 0) {\r\n          this._trans.value.transform.localPosition = new BABYLON.Vector3(this._posvalue.value, this._trans.value.transform.localPosition.y, this._trans.value.transform.localPosition.z);\r\n        }\r\n        else if (this._axis === 1) {\r\n          this._trans.value.transform.localPosition = new BABYLON.Vector3(this._trans.value.transform.localPosition.x, this._posvalue.value, this._trans.value.transform.localPosition.z);\r\n        }\r\n        else if (this._axis === 2) {\r\n          this._trans.value.transform.localPosition = new BABYLON.Vector3(this._trans.value.transform.localPosition.x, this._trans.value.transform.localPosition.y, this._posvalue.value);\r\n        }\r\n        else {\r\n          if (this._isVec) {\r\n            this._trans.value.transform.localPosition = this._posVec.value;\r\n          }\r\n          else {\r\n            this._trans.value.transform.localPosition = new BABYLON.Vector3(this._x.value, this._y.value, this._z.value);\r\n          }\r\n        }\r\n      }\r\n      else if (this._space === BABYLON.Space.WORLD) {\r\n        if (this._axis === 0) {\r\n          this._trans.value.transform.position = new BABYLON.Vector3(this._posvalue.value, this._trans.value.transform.position.y, this._trans.value.transform.position.z);\r\n        }\r\n        else if (this._axis === 1) {\r\n          this._trans.value.transform.position = new BABYLON.Vector3(this._trans.value.transform.position.x, this._posvalue.value, this._trans.value.transform.position.z);\r\n        }\r\n        else if (this._axis === 2) {\r\n          this._trans.value.transform.position = new BABYLON.Vector3(this._trans.value.transform.position.x, this._trans.value.transform.position.y, this._posvalue.value);\r\n        }\r\n        else {\r\n          if (this._isVec) {\r\n            this._trans.value.transform.position = this._posVec.value;\r\n          }\r\n          else {\r\n            this._trans.value.transform.position = new BABYLON.Vector3(this._x.value, this._y.value, this._z.value);\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        if (this._ref.value !== null) {\r\n          let oriFather: Nullable<Transform> = this._trans.value.transform.parent;\r\n          this._trans.value.transform.parent = this._ref.value.transform;\r\n          if (this._axis === 0)  //X\r\n          {\r\n            this._trans.value.transform.localPosition = new BABYLON.Vector3(this._posvalue.value, this._trans.value.transform.localPosition.y, this._trans.value.transform.localPosition.z);\r\n          }\r\n          else if (this._axis === 1)  //Y\r\n          {\r\n            this._trans.value.transform.localPosition = new BABYLON.Vector3(this._trans.value.transform.localPosition.x, this._posvalue.value, this._trans.value.transform.localPosition.z);\r\n          }\r\n          else if (this._axis === 2)  //Z\r\n          {\r\n            this._trans.value.transform.localPosition = new BABYLON.Vector3(this._trans.value.transform.localPosition.x, this._trans.value.transform.localPosition.y, this._posvalue.value);\r\n          }\r\n          else {\r\n            if (this._isVec) {\r\n              this._trans.value.transform.localPosition = this._posVec.value;\r\n            }\r\n            else {\r\n              this._trans.value.transform.localPosition = new BABYLON.Vector3(this._x.value, this._y.value, this._z.value);\r\n            }\r\n          }\r\n          this._trans.value.transform.parent = oriFather;\r\n        }\r\n        else {\r\n          console.warn(this.ID + \" \");\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    if (!ParaParserUtility.ParaNumbers(this.ID, ParaType.Action, para_array.length, 4)) {\r\n      return false;\r\n    } else {\r\n      // 1\r\n      let para1: VeryParas = new VeryParas();\r\n      if (!ParaParserUtility.GameObjectPara(this.projectName, this.objectID, this.ID, ParaType.Action, para1, para_array[0])) {\r\n        return false;\r\n      }\r\n      this._trans = para1.gameObject;\r\n\r\n      // 2\r\n      // \r\n      if (para_array[1].toLowerCase() === \"self\" || para_array[1] === \"\") {\r\n        this._space = BABYLON.Space.LOCAL;\r\n      }\r\n      else if (para_array[1].toLowerCase() === \"world\" || para_array[1] === \"\") {\r\n        this._space = BABYLON.Space.WORLD;\r\n      }\r\n      else {\r\n        this._space = BABYLON.Space.BONE;\r\n        let para2: VeryParas = new VeryParas();\r\n        if (!ParaParserUtility.GameObjectPara(this.projectName, this.objectID, this.ID, ParaType.Action, para2, para_array[1])) {\r\n          return false;\r\n        }\r\n        this._ref = para2.gameObject;\r\n        if (this._ref.value === null) {\r\n          VE_ErrorManager.Add(new VE_Error('', this.ID + \"   \" + para_array[1] + \"\", '', Severity.Error));\r\n          return false;\r\n        }\r\n      }\r\n\r\n      // 3\r\n      if (para_array[2].toLowerCase() === \"x\") {\r\n        this._axis = 0;\r\n      }\r\n      else if (para_array[2].toLowerCase() === \"y\") {\r\n        this._axis = 1;\r\n      }\r\n      else if (para_array[2].toLowerCase() === \"z\") {\r\n        this._axis = 2;\r\n      }\r\n      else if (para_array[2].toLowerCase() === \"vector3\") {\r\n        this._axis = 3;\r\n      }\r\n      else {\r\n        VE_ErrorManager.Add(new VE_Error('', this.ID + \" xyzvector3\" + para_array[2] + \"\", '', Severity.Error));\r\n        return false;\r\n      }\r\n\r\n      // 4\r\n      if (this._axis === 3) {\r\n        let para4: VeryParas = new VeryParas();\r\n        if (!ParaParserUtility.Vector3OrNumberParaWithExpression(this.projectName, this.objectID, this.ID, ParaType.Action, para4, para_array[3])) {\r\n          return false;\r\n        }\r\n        this._isVec = para4.isVec;\r\n        this._posVec = para4.vector3;\r\n        this._x = para4.vecNumbers[0];\r\n        this._y = para4.vecNumbers[1];\r\n        this._z = para4.vecNumbers[2];\r\n      }\r\n      else {\r\n        let para4: VeryParas = new VeryParas();\r\n        if (!ParaParserUtility.NumberParaWithExpression(this.projectName, this.objectID, this.ID, ParaType.Action, para4, para_array[3])) {\r\n          return false;\r\n        }\r\n        this._posvalue = para4.number;\r\n      }\r\n\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public destroy(): void {\r\n\r\n  }\r\n\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport class Action_Translate extends VE_ActionBehaviour {\r\n\r\n  public get ID(): string {\r\n    return '|Translate';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'Action_Translate';\r\n  }\r\n\r\n  private _refType: BABYLON.Space = BABYLON.Space.LOCAL;\r\n\r\n  private _translateObj: VeryGameObject = new VeryGameObject();\r\n  private _refObj: VeryGameObject = new VeryGameObject();\r\n\r\n  private _isDeltaTime: VeryBool = new VeryBool();\r\n\r\n  private _isVec: boolean = true;\r\n  private _vecVar: VeryVector3 = new VeryVector3();\r\n  private _xVar: VeryNumber = new VeryNumber();\r\n  private _yVar: VeryNumber = new VeryNumber();\r\n  private _zVar: VeryNumber = new VeryNumber();\r\n\r\n  private _paraTime: number = 1;\r\n  private _paraVec: VeryVector3 = new VeryVector3();\r\n\r\n  public active(): void {\r\n    // console.log(this.actionID);\r\n  }\r\n\r\n\r\n  public onUpdate(): void {\r\n    if (!this._translateObj || !this._translateObj.value) {\r\n      return;\r\n    } else {\r\n      // \r\n      if (this._isDeltaTime && this._isDeltaTime.value) {\r\n        this._paraTime = Time.deltaTime;\r\n      } else {\r\n        this._paraTime = 1;\r\n      }\r\n\r\n      // \r\n      if (this._isVec) {\r\n        // \r\n        this._paraVec.value.copyFrom(this._vecVar.value);\r\n      } else {\r\n        this._paraVec.value.x = this._xVar.value;\r\n        this._paraVec.value.y = this._yVar.value;\r\n        this._paraVec.value.z = this._zVar.value;\r\n      }\r\n      this._paraVec.value = this._paraVec.value.multiplyByFloats(this._paraTime, this._paraTime, this._paraTime);\r\n\r\n      // \r\n      if (this._refType === BABYLON.Space.LOCAL || this._refType === BABYLON.Space.WORLD) {\r\n        this._translateObj.value.transform.translate(this._paraVec.value, this._refType);\r\n      }\r\n      // \r\n      else {\r\n        if (this._refObj && this._refObj.value) {\r\n          this._translateObj.value.transform.translateRelativeTo(this._paraVec.value, this._refObj.value.transform);\r\n        } else {\r\n          this._translateObj.value.transform.translate(this._paraVec.value, BABYLON.Space.WORLD);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    if (!ParaParserUtility.ParaNumbers(this.ID, ParaType.Action, para_array.length, 4)) {\r\n      return false;\r\n    } else {\r\n      // 1\r\n      let para1: VeryParas = new VeryParas();\r\n      if (!ParaParserUtility.GameObjectPara(this.projectName, this.objectID, this.ID, ParaType.Action, para1, para_array[0])) {\r\n        return false;\r\n      }\r\n      this._translateObj = para1.gameObject;\r\n\r\n      // 2\r\n      let para2: VeryParas = new VeryParas();\r\n      if (!ParaParserUtility.Vector3OrNumberParaWithExpression(this.projectName, this.objectID, this.ID, ParaType.Action, para2, para_array[1])) {\r\n        return false;\r\n      }\r\n      this._vecVar = para2.vector3;\r\n      this._xVar = para2.vecNumbers[0];\r\n      this._yVar = para2.vecNumbers[1];\r\n      this._zVar = para2.vecNumbers[2];\r\n      this._isVec = para2.isVec;\r\n\r\n      // 3\r\n      if (para_array[2].toLowerCase() === \"world\" || para_array[2] === \"\") {\r\n        this._refType = BABYLON.Space.WORLD;\r\n      }\r\n      else if (para_array[2].toLowerCase() === \"self\" || para_array[2] === \"\") {\r\n        this._refType = BABYLON.Space.LOCAL;\r\n      }\r\n      else {\r\n      let para3: VeryParas = new VeryParas();\r\n        if (!ParaParserUtility.GameObjectPara(this.projectName, this.objectID, this.ID, ParaType.Action, para3, para_array[2])) {\r\n          return false;\r\n        }\r\n        this._refObj = para3.gameObject;\r\n        if (this._refObj.value === null) {\r\n          VE_ErrorManager.Add(new VE_Error('', this.ID + \"   \" + para_array[2] + \"\", '', Severity.Error));\r\n        }\r\n      }\r\n\r\n      // 4\r\n      let para4: VeryParas = new VeryParas();\r\n      if (!ParaParserUtility.BoolParaWithExpression(this.projectName, this.objectID, this.ID, ParaType.Action, para4, para_array[3])) {\r\n        return false;\r\n      }\r\n      this._isDeltaTime = para4.bool;\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public destroy(): void {\r\n    // \r\n  }\r\n\r\n\r\n}\r\n\r\nVE_Actions.addAction(Action_SetPosition);\r\nVE_Actions.addAction(Action_Translate);\r\n\r\n","import { VE_ActionBehaviour, VE_Actions } from \"../../action\";\r\nimport { Vector3Utility, ParaParserUtility, VeryParas } from \"../../utility\";\r\nimport { ParaType, ActionType, Severity } from \"../../enum\";\r\nimport { VeryVector3, VeryNumber } from \"../../variables\";\r\nimport { VE_ErrorManager, VE_Error } from \"../../global\";\r\nimport { Time } from \"../../babylon\";\r\n\r\nexport class Action_Vector3_Interpolate extends VE_ActionBehaviour {\r\n\r\n  public get ID(): string {\r\n    return \"Vector3_Interpolate|\";\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"Action_Vector3_Interpolate\";\r\n  }\r\n\r\n  public get type(): ActionType {\r\n    return ActionType.Animation;\r\n  }\r\n\r\n  private _switch: boolean = false;\r\n  private _timer: number = 0;\r\n  private _isLinear: boolean = true;\r\n\r\n  private _acceptVec: VeryVector3 = new VeryVector3();\r\n\r\n  private _timeFloat: VeryNumber = new VeryNumber();\r\n\r\n  private _isVec1: boolean = false;\r\n  private _vecUnit1: VeryVector3 = new VeryVector3();\r\n  private _vecFloat1: VeryNumber[] = [];\r\n\r\n  private _isVec2: boolean = false;\r\n  private _vecUnit2: VeryVector3 = new VeryVector3();\r\n  private _vecFloat2: VeryNumber[] = [];\r\n\r\n\r\n  public active(): void {\r\n    if (this._timeFloat.value === 0) {\r\n      this.timesUp();\r\n    }\r\n    else {\r\n      this._timer = 0;\r\n      this._switch = true;\r\n    }\r\n  }\r\n\r\n\r\n  public onUpdate(): void {\r\n    if (this._switch) {\r\n      this._timer += Time.deltaTime;\r\n\r\n      let vec1: BABYLON.Vector3 = this._vecUnit1.value;\r\n      if (!this._isVec1) {\r\n        vec1 = new BABYLON.Vector3(this._vecFloat1[0].value, this._vecFloat1[1].value, this._vecFloat1[2].value);\r\n      }\r\n\r\n      let vec2: BABYLON.Vector3 = this._vecUnit2.value;\r\n      if (!this._isVec2) {\r\n        vec2 = new BABYLON.Vector3(this._vecFloat2[0].value, this._vecFloat2[1].value, this._vecFloat2[2].value);\r\n      }\r\n\r\n      if (this._timer > this._timeFloat.value) {\r\n        this._switch = false;\r\n        this._timer = 0;\r\n        if (this._isLinear) {\r\n          this._acceptVec.value = BABYLON.Vector3.Lerp(vec1, vec2, 1);\r\n        }\r\n        else {\r\n          this._acceptVec.value = Vector3Utility.Slerp(vec1, vec2, 1);\r\n        }\r\n        this._acceptVec.value.set(vec2.x, vec2.y, vec2.z);\r\n        this.timesUp();\r\n      }\r\n      else {\r\n        if (this._isLinear) {\r\n          this._acceptVec.value = BABYLON.Vector3.Lerp(vec1, vec2, this._timer / this._timeFloat.value);\r\n        }\r\n        else {\r\n          this._acceptVec.value = Vector3Utility.Slerp(vec1, vec2, this._timer / this._timeFloat.value);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public pause(): void {\r\n    this._switch = false;\r\n    super.pause();\r\n  }\r\n\r\n  public resume(): void {\r\n    this._switch = true;\r\n    super.resume();\r\n  }\r\n\r\n  public stop(): void {\r\n    this.timesUp();\r\n    super.stop();\r\n  }\r\n\r\n  private timesUp(): void {\r\n    this._switch = false;\r\n    this._timer = 0;\r\n    this.finish();\r\n  }\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    if (!ParaParserUtility.ParaNumbers(this.ID, ParaType.Action, para_array.length, 5)) {\r\n      return false;\r\n    } else {\r\n      // 1\r\n      if (para_array[0].toLowerCase() === \"linear\" || para_array[0] === \"\") {\r\n        this._isLinear = true;\r\n      }\r\n      else if (para_array[0].toLowerCase() === \"smooth\" || para_array[0] === \"\") {\r\n        this._isLinear = false;\r\n      }\r\n      else {\r\n        VE_ErrorManager.Add(new VE_Error('', this.ID + \"  LogWarnError \" + para_array[0] + \"\", '', Severity.Error));\r\n        return false;\r\n      }\r\n\r\n      // 2\r\n      let para2 = new VeryParas();\r\n      if (!ParaParserUtility.Vector3OrNumberParaWithExpression(this.projectName, this.objectID, this.ID, ParaType.Action, para2, para_array[1])) {\r\n        return false;\r\n      }\r\n      this._isVec1 = para2.isVec;\r\n      this._vecFloat1 = para2.vecNumbers;\r\n      this._vecUnit1 = para2.vector3;\r\n\r\n      // 3\r\n      let para3 = new VeryParas();\r\n      if (!ParaParserUtility.Vector3OrNumberParaWithExpression(this.projectName, this.objectID, this.ID, ParaType.Action, para3, para_array[2])) {\r\n        return false;\r\n      }\r\n      this._isVec2 = para3.isVec;\r\n      this._vecFloat2 = para3.vecNumbers;\r\n      this._vecUnit2 = para3.vector3;\r\n\r\n      // 4\r\n      let para4 = new VeryParas();\r\n      if (!ParaParserUtility.NumberParaWithExpression(this.projectName, this.objectID, this.ID, ParaType.Action, para4, para_array[3])) {\r\n        return false;\r\n      }\r\n      this._timeFloat = para4.number;\r\n\r\n      // 5\r\n      let para5 = new VeryParas();\r\n      if (!ParaParserUtility.Vector3Para(this.projectName, this.objectID, this.ID, ParaType.Action, para5, para_array[4])) {\r\n        return false;\r\n      }\r\n      this._acceptVec = para5.vector3;\r\n\r\n      return true;\r\n    }\r\n  }\r\n\r\n\r\n  public destroy(): void {\r\n\r\n  }\r\n\r\n\r\n}\r\n\r\n\r\nVE_Actions.addAction(Action_Vector3_Interpolate);","export * from './input';\r\nexport * from './system';","import { VE_TriggerBehaviour } from '../../index';\r\nimport { VE_Triggers } from '../../trigger';\r\nimport { ParaParserUtility, VE_KeyboardMap } from '../../utility';\r\nimport { ParaType, Severity } from '../../enum';\r\nimport { VE_ErrorManager, VE_Error } from '../../global';\r\n\r\n// \r\nexport class Trigger_MouseDown extends VE_TriggerBehaviour {\r\n\r\n  public get ID(): string {\r\n    return 'Mouse_Down|';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'Trigger_MouseDown';\r\n  }\r\n\r\n  private _mouseButtonIndex: number = 0;\r\n  private _downFlag: boolean = false;\r\n\r\n  private _observer: Nullable<BABYLON.Observer<BABYLON.PointerInfo>> = null;\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    if (!ParaParserUtility.ParaNumbers(this.ID, ParaType.Trigger, para_array.length, 1)) {\r\n      return false;\r\n    } else {\r\n      // 1\r\n      if (para_array[0] === \"0\" || para_array[0].toLowerCase() === \"left\" || para_array[0] === \"\") {\r\n        this._mouseButtonIndex = 0;\r\n      }\r\n      else if (para_array[0] === \"1\" || para_array[0].toLowerCase() === \"right\" || para_array[0] === \"\") {\r\n        this._mouseButtonIndex = 2;\r\n      }\r\n      else if (para_array[0] === \"2\" || para_array[0].toLowerCase() === \"middle\" || para_array[0] === \"\") {\r\n        this._mouseButtonIndex = 1;\r\n      }\r\n      else {\r\n        VE_ErrorManager.Add(new VE_Error('', this.ID + \"  \" + para_array[0] + \"012leftrightmiddle\", '', Severity.Error));\r\n        return false;\r\n      }\r\n\r\n      this._observer = this._scene.onPointerObservable.add(pointInfo => {\r\n        if (pointInfo.type === BABYLON.PointerEventTypes.POINTERDOWN) {\r\n          if (!this._downFlag && pointInfo.event.button === this._mouseButtonIndex) {\r\n            this._downFlag = true;\r\n            this.sendEvent();\r\n          }\r\n        } else if (pointInfo.type === BABYLON.PointerEventTypes.POINTERUP) {\r\n          if (this._downFlag && pointInfo.event.button === this._mouseButtonIndex) {\r\n            this._downFlag = false;\r\n          }\r\n        }\r\n      })\r\n\r\n      return true;\r\n    }\r\n\r\n  }\r\n\r\n  public destroy(): void {\r\n    if (this._observer) {\r\n      this._scene.onPointerObservable.remove(this._observer);\r\n    }\r\n  }\r\n\r\n}\r\n\r\n// \r\nexport class Trigger_MouseUp extends VE_TriggerBehaviour {\r\n\r\n  public get ID(): string {\r\n    return 'Mouse_Up|';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'Trigger_MouseUp';\r\n  }\r\n\r\n  private _mouseButtonIndex: number = 0;\r\n  private _downFlag: boolean = false;\r\n\r\n  private _observer: Nullable<BABYLON.Observer<BABYLON.PointerInfo>> = null;\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    if (!ParaParserUtility.ParaNumbers(this.ID, ParaType.Trigger, para_array.length, 1)) {\r\n      return false;\r\n    } else {\r\n      // 1\r\n      if (para_array[0] === \"0\" || para_array[0].toLowerCase() === \"left\" || para_array[0] === \"\") {\r\n        this._mouseButtonIndex = 0;\r\n      }\r\n      else if (para_array[0] === \"1\" || para_array[0].toLowerCase() === \"right\" || para_array[0] === \"\") {\r\n        this._mouseButtonIndex = 2;\r\n      }\r\n      else if (para_array[0] === \"2\" || para_array[0].toLowerCase() === \"middle\" || para_array[0] === \"\") {\r\n        this._mouseButtonIndex = 1;\r\n      }\r\n      else {\r\n        VE_ErrorManager.Add(new VE_Error('', this.ID + \"  \" + para_array[0] + \"012leftrightmiddle\", '', Severity.Error));\r\n        return false;\r\n      }\r\n\r\n      this._observer = this._scene.onPointerObservable.add(pointInfo => {\r\n        if (pointInfo.type === BABYLON.PointerEventTypes.POINTERDOWN) {\r\n          if (!this._downFlag && pointInfo.event.button === this._mouseButtonIndex) {\r\n            this._downFlag = true;\r\n          }\r\n        } else if (pointInfo.type === BABYLON.PointerEventTypes.POINTERUP) {\r\n          if (this._downFlag && pointInfo.event.button === this._mouseButtonIndex) {\r\n            this._downFlag = false;\r\n            this.sendEvent();\r\n          }\r\n        }\r\n      })\r\n\r\n      return true;\r\n    }\r\n\r\n  }\r\n\r\n  public destroy(): void {\r\n    if (this._observer) {\r\n      this._scene.onPointerObservable.remove(this._observer);\r\n    }\r\n  }\r\n\r\n}\r\n\r\n// \r\nexport class Trigger_MouseButton extends VE_TriggerBehaviour {\r\n\r\n  public get ID(): string {\r\n    return 'Mouse_Button|';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'Trigger_MouseButton';\r\n  }\r\n\r\n  private _mouseButtonIndex: number = 0;\r\n  private _mouseUpdate: { [key: number]: boolean } = {};\r\n  private _observer: Nullable<BABYLON.Observer<BABYLON.PointerInfo>> = null;\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    if (!ParaParserUtility.ParaNumbers(this.ID, ParaType.Trigger, para_array.length, 1)) {\r\n      return false;\r\n    } else {\r\n      // 1\r\n      if (para_array[0] === \"0\" || para_array[0].toLowerCase() === \"left\" || para_array[0] === \"\") {\r\n        this._mouseButtonIndex = 0;\r\n      }\r\n      else if (para_array[0] === \"1\" || para_array[0].toLowerCase() === \"right\" || para_array[0] === \"\") {\r\n        this._mouseButtonIndex = 2;\r\n      }\r\n      else if (para_array[0] === \"2\" || para_array[0].toLowerCase() === \"middle\" || para_array[0] === \"\") {\r\n        this._mouseButtonIndex = 1;\r\n      }\r\n      else {\r\n        VE_ErrorManager.Add(new VE_Error('', this.ID + \"  \" + para_array[0] + \"012leftrightmiddle\", '', Severity.Error));\r\n        return false;\r\n      }\r\n\r\n      this._observer = this._scene.onPointerObservable.add(pointInfo => {\r\n        if (pointInfo.type === BABYLON.PointerEventTypes.POINTERDOWN) {\r\n          this._mouseUpdate[pointInfo.event.button] = true;\r\n        } else if (pointInfo.type === BABYLON.PointerEventTypes.POINTERUP) {\r\n          this._mouseUpdate[pointInfo.event.button] = false;\r\n        }\r\n      })\r\n\r\n      return true;\r\n    }\r\n\r\n  }\r\n\r\n  public onUpdate(): void {\r\n    if (this._mouseUpdate[this._mouseButtonIndex]) {\r\n      this.sendEvent();\r\n    }\r\n  }\r\n\r\n  public destroy(): void {\r\n    if (this._observer) {\r\n      this._scene.onPointerObservable.remove(this._observer);\r\n    }\r\n  }\r\n\r\n}\r\n\r\n// \r\nexport class Trigger_Keyboard extends VE_TriggerBehaviour {\r\n\r\n  public get ID(): string {\r\n    return '|Key_Button';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'Trigger_Keyboard';\r\n  }\r\n\r\n  private _keyboard: string = '';\r\n  private _keyUpdate: { [key: string]: boolean } = {};\r\n  private _observer: Nullable<BABYLON.Observer<BABYLON.KeyboardInfo>> = null;\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n\r\n    if (!ParaParserUtility.ParaNumbers(this.ID, ParaType.Trigger, para_array.length, 1)) {\r\n      return false;\r\n    } else {\r\n      // 1\r\n      this._keyboard = VE_KeyboardMap.GetKey(para_array[0]).toLowerCase();\r\n      if (this._keyboard === 'null') {\r\n        VE_ErrorManager.Add(new VE_Error('', this.ID + \"  \" + para_array[0] + \"\", '', Severity.Error));\r\n        return false;\r\n      }\r\n\r\n      this._observer = this.scene.onKeyboardObservable.add(kbInfo => {\r\n        if (kbInfo.type === BABYLON.KeyboardEventTypes.KEYDOWN) {\r\n          this._keyUpdate[kbInfo.event.key.toLowerCase()] = true;\r\n        } else {\r\n          this._keyUpdate[kbInfo.event.key.toLowerCase()] = false;\r\n        }\r\n      });\r\n\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public onUpdate(): void {\r\n    if (this._keyUpdate[this._keyboard]) {\r\n      // console.log(this.triggerID);\r\n      this.sendEvent();\r\n    }\r\n  }\r\n\r\n  public destroy(): void {\r\n    if (this._observer) {\r\n      this._scene.onKeyboardObservable.remove(this._observer);\r\n    }\r\n  }\r\n\r\n\r\n}\r\n\r\n// \r\nexport class Trigger_KeyDown extends VE_TriggerBehaviour {\r\n\r\n  public get ID(): string {\r\n    return '|Key_Down';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'Trigger_KeyDown';\r\n  }\r\n\r\n  private _keyboard: string = '';\r\n  private _downFlag: boolean = false;\r\n\r\n  private _observer: Nullable<BABYLON.Observer<BABYLON.KeyboardInfo>> = null;\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n\r\n    if (!ParaParserUtility.ParaNumbers(this.ID, ParaType.Trigger, para_array.length, 1)) {\r\n      return false;\r\n    } else {\r\n      // 1\r\n      this._keyboard = VE_KeyboardMap.GetKey(para_array[0]).toLowerCase();\r\n      if (this._keyboard === 'null') {\r\n        VE_ErrorManager.Add(new VE_Error('', this.ID + \"  \" + para_array[0] + \"\", '', Severity.Error));\r\n        return false;\r\n      }\r\n\r\n      this._observer = this.scene.onKeyboardObservable.add(kbInfo => {\r\n        if (kbInfo.type === BABYLON.KeyboardEventTypes.KEYDOWN) {\r\n          if (!this._downFlag && kbInfo.event.key.toLowerCase() === this._keyboard) {\r\n            this._downFlag = true;\r\n            this.sendEvent();\r\n          }\r\n        } else {\r\n          if (this._downFlag && kbInfo.event.key.toLowerCase() === this._keyboard) {\r\n            this._downFlag = false;\r\n          }\r\n        }\r\n      });\r\n\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public destroy(): void {\r\n    if (this._observer) {\r\n      this._scene.onKeyboardObservable.remove(this._observer);\r\n    }\r\n  }\r\n\r\n\r\n}\r\n\r\n// \r\nexport class Trigger_KeyUp extends VE_TriggerBehaviour {\r\n\r\n  public get ID(): string {\r\n    return '|Key_Up';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'Trigger_KeyUp';\r\n  }\r\n\r\n  private _keyboard: string = '';\r\n  private _downFlag: boolean = false;\r\n\r\n  private _observer: Nullable<BABYLON.Observer<BABYLON.KeyboardInfo>> = null;\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n\r\n    if (!ParaParserUtility.ParaNumbers(this.ID, ParaType.Trigger, para_array.length, 1)) {\r\n      return false;\r\n    } else {\r\n      // 1\r\n      this._keyboard = VE_KeyboardMap.GetKey(para_array[0]).toLowerCase();\r\n      if (this._keyboard === 'null') {\r\n        VE_ErrorManager.Add(new VE_Error('', this.ID + \"  \" + para_array[0] + \"\", '', Severity.Error));\r\n        return false;\r\n      }\r\n\r\n      this._observer = this.scene.onKeyboardObservable.add(kbInfo => {\r\n        if (kbInfo.type === BABYLON.KeyboardEventTypes.KEYDOWN) {\r\n          if (!this._downFlag && kbInfo.event.key.toLowerCase() === this._keyboard) {\r\n            this._downFlag = true;\r\n          }\r\n        } else {\r\n          if (this._downFlag && kbInfo.event.key.toLowerCase() === this._keyboard) {\r\n            this._downFlag = false;\r\n            this.sendEvent();\r\n          }\r\n        }\r\n      });\r\n\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public destroy(): void {\r\n    if (this._observer) {\r\n      this._scene.onKeyboardObservable.remove(this._observer);\r\n    }\r\n  }\r\n\r\n\r\n}\r\n\r\n// \r\nexport class Trigger_KeyboardCombine extends VE_TriggerBehaviour {\r\n\r\n  public get ID(): string {\r\n    return 'Key_Combination|';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'Trigger_KeyboardCombine';\r\n  }\r\n\r\n  private _keyboards: string[] = [];\r\n  private _lastKey: string = '';\r\n  private _downFlag: boolean = false;\r\n  private _trigger: boolean = false;\r\n\r\n  private _keyUpdate: { [key: string]: boolean } = {};\r\n  private _observer: Nullable<BABYLON.Observer<BABYLON.KeyboardInfo>> = null;\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n\r\n    if (para_array.length < 2) {\r\n      VE_ErrorManager.Add(new VE_Error('', this.ID + \"  2\", '', Severity.Error));\r\n      return false;\r\n    } else {\r\n      // n\r\n      for (let i: number = 0; i < para_array.length; i++) {\r\n        let key: string = VE_KeyboardMap.GetKey(para_array[i]).toLowerCase();\r\n        if (key === 'null') {\r\n          VE_ErrorManager.Add(new VE_Error('', this.ID + \"  \" + para_array[i] + \"\", '', Severity.Error));\r\n          return false;\r\n        }\r\n        this._keyboards.push(key);\r\n      }\r\n      this._lastKey = this._keyboards[this._keyboards.length - 1];\r\n\r\n      this._observer = this.scene.onKeyboardObservable.add(kbInfo => {\r\n        if (kbInfo.type === BABYLON.KeyboardEventTypes.KEYDOWN) {\r\n          if (!this._downFlag && this._lastKey === kbInfo.event.key.toLowerCase()) {\r\n            this._downFlag = true;\r\n            this._trigger = true;\r\n          }\r\n          this._keyUpdate[kbInfo.event.key.toLowerCase()] = true;\r\n        } else {\r\n          if (this._downFlag && this._lastKey === kbInfo.event.key.toLowerCase()) {\r\n            this._downFlag = false;\r\n            this._trigger = false;\r\n          }\r\n          this._keyUpdate[kbInfo.event.key.toLowerCase()] = false;\r\n        }\r\n      });\r\n\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public onUpdate(): void {\r\n    if (this._keyboards && this._keyboards.length > 0) {\r\n      let all: boolean = true;\r\n      for (let i: number = 0; i < this._keyboards.length; i++) {\r\n        if (i === this._keyboards.length - 1) {\r\n          if (all && this._downFlag && this._trigger) {\r\n            this._trigger = false;\r\n            this.sendEvent();\r\n          }\r\n        } else {\r\n          if (!this._keyUpdate[this._keyboards[i]]) {\r\n            all = false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    // if (this._keyUpdate[this._keyboard]) {\r\n    //   // console.log(this.triggerID);\r\n    //   this.sendEvent();\r\n    // }\r\n  }\r\n\r\n  public destroy(): void {\r\n    if (this._observer) {\r\n      this._scene.onKeyboardObservable.remove(this._observer);\r\n    }\r\n  }\r\n\r\n\r\n}\r\n\r\n\r\n// Mouse Input\r\nVE_Triggers.addTrigger(Trigger_MouseDown);\r\nVE_Triggers.addTrigger(Trigger_MouseUp);\r\nVE_Triggers.addTrigger(Trigger_MouseButton);\r\n\r\n// Keyboard Input\r\nVE_Triggers.addTrigger(Trigger_Keyboard);\r\nVE_Triggers.addTrigger(Trigger_KeyDown);\r\nVE_Triggers.addTrigger(Trigger_KeyUp);\r\nVE_Triggers.addTrigger(Trigger_KeyboardCombine);","import { VE_TriggerBehaviour, VE_Triggers } from \"../../trigger\";\r\n\r\nexport class Trigger_Start extends VE_TriggerBehaviour {\r\n\r\n  public get ID(): string {\r\n    return 'Start|';\r\n  };\r\n\r\n  public get className(): string {\r\n    return 'Trigger_Start';\r\n  };\r\n\r\n  private _observer: Nullable<BABYLON.Observer<BABYLON.Scene>> = null;\r\n\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    this._observer = this.scene.onBeforeRenderObservable.add(() => {\r\n      this.sendEvent();\r\n      this.destroy();\r\n    });\r\n    return true;\r\n  }\r\n\r\n\r\n  public destroy(): void {\r\n    if (this._observer) {\r\n      this.scene.onBeforeRenderObservable.remove(this._observer);\r\n    }\r\n  }\r\n\r\n\r\n}\r\n\r\nexport class Trigger_Continuous extends VE_TriggerBehaviour {\r\n\r\n  public get ID(): string {\r\n    return 'Continuous|';\r\n  };\r\n\r\n  public get className(): string {\r\n    return 'Trigger_Continuous';\r\n  };\r\n\r\n  private _observer: Nullable<BABYLON.Observer<BABYLON.Scene>> = null;\r\n\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    this._observer = this.scene.onBeforeRenderObservable.add(() => {\r\n      this.sendEvent();\r\n    });\r\n    return true;\r\n  }\r\n\r\n\r\n  public destroy(): void {\r\n    if (this._observer) {\r\n      this.scene.onBeforeRenderObservable.remove(this._observer);\r\n    }\r\n  }\r\n\r\n\r\n}\r\n\r\n\r\nVE_Triggers.addTrigger(Trigger_Start);\r\nVE_Triggers.addTrigger(Trigger_Continuous);","import { VE_Templates, VE_Template } from \"../template\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { VE_Objects, VeryEngineObject } from \"../object\";\r\nimport { VE_Variables, VeryVarManager, IVeryVar, VeryExpression, VeryString, VarTools, VeryBool } from \"../variables\";\r\nimport { ErrorInfo, VE_StringFormat } from \"../utility\";\r\nimport { VE_ErrorManager, VE_Error } from \"../global\";\r\nimport { VE_Expressions, IExpression } from \"../expression\";\r\nimport { VE_FsmData, VE_StateData, VE_StateTriggerData, VE_StateActionData } from \"../dataSource\";\r\nimport { VE_Fsm, VE_State, VE_StateAction, VE_AssociatedState, StateConst } from \"../state\";\r\nimport { VE_Triggers, VE_TriggerBehaviour } from \"../trigger\";\r\nimport { VE_Actions, VE_ActionBehaviour, VE_Assignment } from \"../action\";\r\nimport { StateActionType, AssignType } from \"../enum\";\r\nimport { VE_TypeConvert } from \"../utility/typeConvert\";\r\nimport { VE_AssignmentTypeJudge } from \"../action/assignmentTypeJudge\";\r\nimport { VerySceneVariables } from \"../scene\";\r\n\r\nexport class CreateInstance {\r\n\r\n\r\n\r\n\r\n\r\n  public static createProject(project_name: string): boolean {\r\n    let templates: VE_Templates = VE_Manager.templates(project_name);\r\n    let objects: VE_Objects = VE_Manager.objects(project_name);\r\n    let globalVars: VE_Variables = VE_Manager.variables(project_name);\r\n\r\n    // 1. \r\n    // (1).\r\n    for (let i: number = 0; i < globalVars.varData.count; i++) {\r\n      let varID: string = globalVars.varData.getVariableID(i);\r\n      let varPara: string[] = globalVars.varData.getVariableParas(varID);\r\n      // 1.2.3.\r\n      // 1.\r\n      if (varPara[0] === \"\" || varPara[0].toLowerCase() === \"expression\") {\r\n        continue;\r\n      }\r\n      // 2.IVeryVar\r\n      else if (VeryVarManager.hasVarType(varPara[0])) {\r\n        let errorInfo: ErrorInfo = new ErrorInfo();\r\n        let newVar: Nullable<IVeryVar> = VeryVarManager.createVariable(varID, varPara[0], varPara[1], errorInfo);\r\n        // TODO: ListDictionary\r\n        if (!errorInfo.isRight || newVar === null) {\r\n          VE_ErrorManager.Add(VE_Error.error(globalVars.varData.getPos(varID), \"\" + project_name + \"\" + varID + \"\" + varPara[0] + \"\" + varPara[1] + \"\" + errorInfo.message + \"\", ''));\r\n          return false;\r\n        } else {\r\n          globalVars.addVariable(varID, newVar);\r\n        }\r\n      }\r\n      // 3.\r\n      else if (templates.isCreatedTemplate(varPara[0])) {\r\n        globalVars.addTemplate(varID, templates.getTemplate(varPara[0]).clone('__global__', varID));\r\n      }\r\n      // \r\n      else {\r\n        VE_ErrorManager.Add(VE_Error.error(globalVars.varData.getPos(varID), \"\" + project_name + \"\" + varID + \"\" + varPara[0] + \"\" + varPara[1] + \"\", ''));\r\n        return false;\r\n      }\r\n    }\r\n\r\n    // (2).\r\n    for (let i: number = 0; i < globalVars.varData.count; i++) {\r\n      let varID: string = globalVars.varData.getVariableID(i);\r\n      let varPara: string[] = globalVars.varData.getVariableParas(varID);\r\n      // \r\n      // 1.\r\n      if (varPara[0] === \"\" || varPara[0].toLowerCase() === \"expression\") {\r\n        // \r\n        let errorInfo: ErrorInfo = new ErrorInfo();\r\n        let globalExp: IExpression = VE_Expressions.createGlobalExpression(varID, varPara[1], project_name, errorInfo);\r\n        if (!errorInfo.isRight || !globalExp) {\r\n          VE_ErrorManager.Add(VE_Error.error(globalVars.varData.getPos(varID), \"\" + project_name + \"\" + varID + \",\" + varPara[0] + \",\" + varPara[1] + \"\\n\" + errorInfo.message, \"\"));\r\n          return false;\r\n        }\r\n        globalVars.addExpression(varID, globalExp);\r\n      }\r\n      else {\r\n        continue;\r\n      }\r\n    }\r\n\r\n    // 2. ----\r\n    // 1.\r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.varData.count; k++) {\r\n        // (1). \r\n        let varID: string = veryObject.varData.getVariableID(k);\r\n        let varPara: string[] = veryObject.varData.getVariableParas(varID);\r\n        // 1.2.3.\r\n        // 1.\r\n        if (varPara[0] === \"\" || varPara[0].toLowerCase().trim() === \"expression\") {\r\n          continue;\r\n        }\r\n        // 2.IVeryVar\r\n        else if (VeryVarManager.hasVarType(varPara[0])) {\r\n          let errorInfo: ErrorInfo = new ErrorInfo();\r\n          let newVar: Nullable<IVeryVar> = VeryVarManager.createVariable(varID, varPara[0], varPara[1], errorInfo);\r\n          // TODO: ListDictionary\r\n          if (newVar === null || !errorInfo.isRight) {\r\n            VE_ErrorManager.Add(VE_Error.error(veryObject.varData.getPos(varID), \"\" + project_name + \"\" + varID + \"\" + varPara[0] + \"\" + varPara[1] + \"\" + errorInfo.message + \"\", ''));\r\n            return false;\r\n          } else {\r\n            globalVars.addVariable(varID, newVar);\r\n          }\r\n        }\r\n        // 3.\r\n        else if (templates.isCreatedTemplate(varPara[0])) {\r\n          veryObject.addTemplate(varID, templates.getTemplate(varPara[0]).clone(objectID, varID));\r\n        }\r\n        // \r\n        else {\r\n          VE_ErrorManager.Add(VE_Error.error(veryObject.varData.getPos(varID), \"\" + project_name + \"\" + objectID + \"\" + varID + \",\" + varPara[0] + \",\" + varPara[1] + \"\", \"\"));\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    // 3.   \r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.dataSource.fsmCount; k++) {\r\n        let fsmID: string = veryObject.dataSource.getFsmID(k);\r\n        let fsmData: VE_FsmData = veryObject.dataSource.getFsmData(fsmID);\r\n        // string\r\n        let newVar: VeryString = new VeryString();\r\n        newVar.setValue(fsmData.initialValStr);\r\n        /* *\r\n        let errorInfo: ErrorInfo = new ErrorInfo();\r\n        let newVar: Nullable<IVeryVar> = VeryVarManager.createVariable(fsmID, fsmData.fsmType, fsmData.initialValStr, errorInfo);\r\n        // TODO: ListDictionary\r\n        if (newVar === null || !errorInfo.isRight) {\r\n          VE_ErrorManager.Add(VE_Error.error(veryObject.dataSource.getFsmPos(fsmID), \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + errorInfo.message + \"\", ''));\r\n          return false;\r\n        }\r\n        */\r\n        // \r\n        let fsm: VE_Fsm = new VE_Fsm(project_name, objectID, fsmID, newVar, veryObject);\r\n        veryObject.addFsm(fsmID, fsm);\r\n      }\r\n    }\r\n    // \r\n    // 4. \r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.varData.count; k++) {\r\n        // (1). \r\n        let varID: string = veryObject.varData.getVariableID(k);\r\n        let varPara: string[] = veryObject.varData.getVariableParas(varID);\r\n        // 1.2.3.\r\n        // 1.\r\n        if (varPara[0] === \"\" || varPara[0].toLowerCase().trim() === \"expression\") {\r\n          // \r\n          let errorInfo: ErrorInfo = new ErrorInfo();\r\n          let newVar: IExpression = VE_Expressions.createLocalExpression(varID, varPara[1], project_name, objectID, errorInfo);\r\n          if (!errorInfo.isRight || !newVar) {\r\n            VE_ErrorManager.Add(VE_Error.error(veryObject.varData.getPos(varID), \"\" + project_name + \"\" + objectID + \"\" + varID + \",\" + varPara[0] + \",\" + varPara[1] + \"\\n\" + errorInfo.message, ''));\r\n            return false;\r\n          }\r\n          veryObject.addExpression(varID, newVar);\r\n        }\r\n        else {\r\n          continue;\r\n        }\r\n      }\r\n    }\r\n\r\n    // TODO: UI\r\n\r\n    // 6. \r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.dataSource.triggerCount; k++) {\r\n        let triggerID: string = veryObject.dataSource.getTriggerID(k);\r\n        //Debug.Log(\"ID\" + triggerID);\r\n        let triggerPara: string[] = veryObject.dataSource.getTriggerPara(triggerID);\r\n\r\n        if (!VE_Triggers.hasTrigger(triggerPara[0])) {\r\n          VE_ErrorManager.Add(VE_Error.error(veryObject.dataSource.getTriggerPos(triggerID), \"\" + project_name + \"\" + objectID + \"\" + triggerID + \"\" + triggerPara[0] + \"\", \"\"));\r\n          return false;\r\n        } else {\r\n          // Trigger\r\n          let errorInfo: ErrorInfo = new ErrorInfo();\r\n          let trigger: Nullable<VE_TriggerBehaviour> = VE_Triggers.createTrigger(veryObject, triggerID, triggerPara[0], triggerPara.slice(1), errorInfo);\r\n\r\n          if (!errorInfo.isRight || !trigger) {\r\n            VE_ErrorManager.Add(VE_Error.error(veryObject.dataSource.getTriggerPos(triggerID), \"\" + project_name + \"\" + objectID + \"\" + triggerID + \"\" + errorInfo.message + \"\", \"\"));\r\n            return false;\r\n          }\r\n\r\n          veryObject.addTrigger(triggerID, trigger!);\r\n        }\r\n      }\r\n    }\r\n\r\n    // 5. \r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.dataSource.actionCount; k++) {\r\n        let actionID: string = veryObject.dataSource.getActionID(k);\r\n        let actionPara: string[] = veryObject.dataSource.getActionPara(actionID);\r\n        // console.log(actionID);\r\n        // console.log(actionPara);\r\n        if (!VE_Actions.hasAction(actionPara[0])) {\r\n          VE_ErrorManager.Add(VE_Error.error(veryObject.dataSource.getActionPos(actionID), \"\" + project_name + \"\" + objectID + \"\" + actionID + \"\" + actionPara[0] + \"\", \"\"));\r\n          return false;\r\n        } else {\r\n          // Action\r\n          let errorInfo: ErrorInfo = new ErrorInfo();\r\n          let action: Nullable<VE_ActionBehaviour> = VE_Actions.createAction(veryObject, actionID, actionPara[0], actionPara.slice(1), veryObject.dataSource.getActionInitVal(actionID), errorInfo);\r\n\r\n          if (!errorInfo.isRight || !action) {\r\n            VE_ErrorManager.Add(VE_Error.error(veryObject.dataSource.getActionPos(actionID), \"\" + project_name + \"\" + objectID + \"\" + actionID + \"\" + errorInfo.message + \"\", \"\"));\r\n            return false;\r\n          }\r\n\r\n          veryObject.addAction(actionID, action!);\r\n        }\r\n      }\r\n    }\r\n\r\n    // 7.    +  + \r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.dataSource.fsmCount; k++) {\r\n        let fsmID: string = veryObject.dataSource.getFsmID(k);\r\n        let fsmData: VE_FsmData = veryObject.dataSource.getFsmData(fsmID);\r\n        // \r\n        let fsm: VE_Fsm = veryObject.getFsm(fsmID);\r\n        // \r\n        for (let p: number = 0; p < fsmData.count; p++) {\r\n          let stateData: VE_StateData = fsmData.getStateData(p);\r\n          if (fsm.hasStateValue(stateData.ValStr)) {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\" + stateData.rowIndex + \"F\", \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\", \"\"));\r\n            return false;\r\n          }\r\n          // \r\n          let state: VE_State = new VE_State(fsm, fsm.count + 1);\r\n          state.setConstValue(stateData.ValStr);\r\n\r\n          /*\r\n          if (stateData.isInitialValue) {\r\n            state.setInitialValue(fsm.fsmVar.getValue());\r\n          }\r\n          else {\r\n            // TODO: \r\n            // if (!this.stateAssignment(project_name, objectID, fsmID, globalVars, objects, veryObject, fsm, stateData, state)) {\r\n            //   return false;\r\n            // }\r\n          }\r\n          */\r\n\r\n          // \r\n          if (stateData.isSequence) {\r\n            state.setSequence();\r\n          }\r\n\r\n          // \r\n          if (stateData.logicalExp !== '') {\r\n            let errorInfo: ErrorInfo = new ErrorInfo();\r\n            let logicalExp: IExpression = VE_Expressions.createFsmExpression('', stateData.logicalExp, project_name, objectID, fsmID, errorInfo);\r\n            if (!errorInfo.isRight || !logicalExp) {\r\n              VE_ErrorManager.Add(VE_Error.error(\"\" + stateData.rowIndex.toString() + \"E\", \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + stateData.logicalExp + \"\\n\" + errorInfo.message, \"\"));\r\n              return false;\r\n            }\r\n            state.logicalAssociated = logicalExp;\r\n          }\r\n\r\n          // \r\n          for (let s: number = 0; s < stateData.triggerCount; s++) {\r\n            let triggerData: VE_StateTriggerData = stateData.getTrigger(s);\r\n            let triggerPos: string = stateData.getTriggerPos(s);\r\n            // \r\n            let trigger: Nullable<VE_TriggerBehaviour> = VE_Triggers.findTrigger(veryObject, triggerData.triggerID);\r\n            if (trigger === null) {\r\n              VE_ErrorManager.Add(VE_Error.error(triggerPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + triggerData.triggerID + \"\", \"\"));\r\n              return false;\r\n            }\r\n            // \r\n            let logicalExp: Nullable<IExpression> = null;\r\n            // Debug.LogWarning(\"\" + triggerData.LogicalExp);\r\n            if (triggerData.logicalExp !== '') {\r\n              // \r\n              let errorInfo: ErrorInfo = new ErrorInfo();\r\n              logicalExp = VE_Expressions.createFsmExpression('', triggerData.logicalExp, project_name, objectID, fsmID, errorInfo);\r\n              // Debug.LogWarning(logicalExp);\r\n              if (!errorInfo.isRight || logicalExp === null) {\r\n                VE_ErrorManager.Add(VE_Error.error(triggerPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + triggerData.logicalExp + \"\\n\" + errorInfo.message, \"\"));\r\n                return false;\r\n              }\r\n            }\r\n            // console.log(state);\r\n            // console.log(trigger);\r\n            trigger.addTriggerTarget(logicalExp!, state);\r\n            // \r\n            if (triggerData.logicalSwitch !== '') {\r\n              // \r\n              let errorInfo: ErrorInfo = new ErrorInfo();\r\n              let logicalSwitch: IExpression = VE_Expressions.createFsmExpression('', triggerData.logicalSwitch, project_name, objectID, fsmID, errorInfo);\r\n              if (!errorInfo.isRight || logicalSwitch === null) {\r\n                VE_ErrorManager.Add(VE_Error.error(triggerPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + triggerData.logicalSwitch + \"\\n\" + errorInfo.message, \"\"));\r\n                return false;\r\n              }\r\n              trigger.addLogicalSwitch(logicalSwitch);\r\n            }\r\n          }\r\n\r\n          // \r\n          for (let s: number = 0; s < stateData.actionCount; s++) {\r\n            let actionData: VE_StateActionData = stateData.getAction(s);\r\n            let actionPos: string = stateData.getActionPos(s);\r\n            // \r\n            if (actionData.type === StateActionType.Action) {\r\n              // \r\n              let action: Nullable<VE_ActionBehaviour> = VE_Actions.findAction(veryObject, actionData.actionID);\r\n              if (action === null) {\r\n                VE_ErrorManager.Add(VE_Error.error(actionPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + actionData.actionID + \"\", \"\"));\r\n                return false;\r\n              }\r\n              // bool\r\n              // \r\n              let errorInfo: ErrorInfo = new ErrorInfo();\r\n              let enableVar: Nullable<IVeryVar> = null;\r\n              let enableStr: string = actionData.enabled.trim().toLowerCase();\r\n              if (enableStr === 'false' || enableStr === '') {\r\n                enableVar = new VeryBool();\r\n                enableVar.setValue(false);\r\n              } else if (enableStr === 'true' || enableStr === '') {\r\n                enableVar = new VeryBool();\r\n                enableVar.setValue(true);\r\n              } else {\r\n                // 1*2.*boolean\r\n                if (actionData.enabled.indexOf(StateConst.VARIABLE_SYMBOL) > -1) {\r\n                  errorInfo.clear();\r\n                  enableVar = VarTools.GetVeryVarWithExpression(project_name, objectID, actionData.enabled, errorInfo);\r\n                  if (!errorInfo.isRight || enableVar === null) {\r\n                    VE_ErrorManager.Add(VE_Error.error(actionPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + actionData.actionID + \"\" + actionData.enabled + \"\" + errorInfo.message, \"\"));\r\n                    return false;\r\n                  }\r\n                  if (enableVar.varType !== 'bool') {\r\n                    VE_ErrorManager.Add(VE_Error.error(actionPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + actionData.actionID + \"\" + actionData.enabled + \"bool\" + enableVar.varType, \"\"));\r\n                    return false;\r\n                  }\r\n\r\n                } else {\r\n                  VE_ErrorManager.Add(VE_Error.error(actionPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + actionData.actionID + \"\" + actionData.enabled + \"/true/false*.*bool\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n\r\n              // \r\n              let everyFrameVar: Nullable<IVeryVar> = null;\r\n              let everyFrameStr: string = actionData.everyFrame.trim().toLowerCase();\r\n              if (everyFrameStr === 'false' || everyFrameStr === '') {\r\n                everyFrameVar = new VeryBool();\r\n                everyFrameVar.setValue(false);\r\n              } else if (everyFrameStr === 'true' || everyFrameStr === '') {\r\n                everyFrameVar = new VeryBool();\r\n                everyFrameVar.setValue(true);\r\n              } else {\r\n                // 1*2.*boolean\r\n                if (actionData.everyFrame.indexOf(StateConst.VARIABLE_SYMBOL) > -1) {\r\n                  errorInfo.clear();\r\n                  everyFrameVar = VarTools.GetVeryVarWithExpression(project_name, objectID, actionData.everyFrame, errorInfo);\r\n                  if (!errorInfo.isRight || everyFrameVar === null) {\r\n                    VE_ErrorManager.Add(VE_Error.error(actionPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + actionData.actionID + \"\" + actionData.everyFrame + \"\" + errorInfo.message, \"\"));\r\n                    return false;\r\n                  }\r\n                  if (everyFrameVar.varType !== 'bool') {\r\n                    VE_ErrorManager.Add(VE_Error.error(actionPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + actionData.actionID + \"\" + actionData.everyFrame + \"bool\" + everyFrameVar.varType, \"\"));\r\n                    return false;\r\n                  }\r\n\r\n                } else {\r\n                  VE_ErrorManager.Add(VE_Error.error(actionPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + actionData.actionID + \"\" + actionData.everyFrame + \"/true/false*.*bool\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n\r\n              // \r\n              let isSequenceStr: string = actionData.isSequence.trim().toLowerCase();\r\n              let isSequence: boolean = false;\r\n              if (isSequenceStr === 'false' || isSequenceStr === '') {\r\n                isSequence = false;\r\n              } else if (isSequenceStr === 'true' || isSequenceStr === '') {\r\n                isSequence = true;\r\n              } else {\r\n                VE_ErrorManager.Add(VE_Error.error(actionPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + actionData.actionID + \"\" + actionData.isSequence + \"/false/true\", \"\"));\r\n                return false;\r\n              }\r\n\r\n              // \r\n              let stateAction: VE_StateAction = new VE_StateAction();\r\n              stateAction.setAction(action, enableVar, everyFrameVar, isSequence);\r\n              state.addAction(stateAction);\r\n            }\r\n            // \r\n            else {\r\n              // TODO\r\n              if (!this.assignmentAction(project_name, objectID, fsmID, globalVars, objects, veryObject, actionData, state)) {\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n\r\n          fsm.addState(state);\r\n\r\n          /*\r\n          // \r\n          if (fsm.isCreatedState(stateData.stateIndex)) {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\" + stateData.rowIndex.toString() + \"I\", \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + stateData.ValStr + \"ID\", \"\"));\r\n            return false;\r\n          }\r\n          else {\r\n            fsm.addState(state, stateData.stateIndex);\r\n          }\r\n          */\r\n        }\r\n      }\r\n    }\r\n\r\n    // 8.   \r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.dataSource.fsmCount; k++) {\r\n        let fsmID: string = veryObject.dataSource.getFsmID(k);\r\n        let fsmData: VE_FsmData = veryObject.dataSource.getFsmData(fsmID);\r\n        // \r\n        let fsm: VE_Fsm = veryObject.getFsm(fsmID);\r\n        // \r\n        for (let p: number = 0; p < fsmData.count; p++) {\r\n          let stateData: VE_StateData = fsmData.getStateData(p);\r\n          let state: Nullable<VE_State> = fsm.getStateInSequence(p);\r\n          // \r\n          for (let s: number = 0; s < stateData.associatedStateCount; s++) {\r\n            let associatedStateInfo: string = stateData.getAssociatedState(s);\r\n            let associatedPos: string = stateData.getAssociatedStatePos(s);\r\n            let associatedState: VE_AssociatedState = new VE_AssociatedState(state!);\r\n            let multipleAssociatedState: string[] = associatedStateInfo.split(/,|/);\r\n            for (let www: number = 0; www < multipleAssociatedState.length; www++) {\r\n              associatedStateInfo = multipleAssociatedState[www].trim();\r\n              // let stateIndex: number = StateConst.STATE_INDEX;\r\n\r\n              let stateValue: string = StateConst.STATE_VALUE;\r\n\r\n              let strArray: string[] = associatedStateInfo.split('=');\r\n              if (strArray.length === 1) {\r\n              }\r\n              else if (strArray.length === 2) {\r\n                stateValue = strArray[1].trim();\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \" = \", \"\"));\r\n                return false;\r\n              }\r\n\r\n              // 1. \r\n              // 2. .\r\n              // 3. *.\r\n              // 4. .*.\r\n\r\n              let aFsmID: string = strArray[0].trim();\r\n              if (aFsmID.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n                let stateArray: string[] = aFsmID.split(StateConst.STATE_SEPARATOR);\r\n                for (let q: number = 0; q < stateArray.length; q++) {\r\n                  stateArray[q] = stateArray[q].trim();\r\n                }\r\n                // .*.\r\n                if (stateArray.length === 3) {\r\n                  if (objects.isCreated(stateArray[0])) {\r\n                    let aObject: VeryEngineObject = objects.getVeryObject(stateArray[0]);\r\n                    if (stateArray[1].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n                      let varID: string = stateArray[1].substring(1);\r\n                      if (aObject.isCreatedTemplate(varID)) {\r\n                        let template: VE_Template = aObject.getTemplate(varID);\r\n                        if (template.dataSource.isCreatedFsm(stateArray[2])) {\r\n                          associatedState.addTemplate(template, stateArray[2], stateValue, associatedPos);\r\n                          // VE_AssociatedState associatedState = new VE_AssociatedState(state, template, stateArray[2], stateIndex);\r\n                          // state.AddAssociatedState(associatedState);\r\n                        }\r\n                        else {\r\n                          VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".*.\", \"\"));\r\n                          return false;\r\n                        }\r\n                      }\r\n                      else {\r\n                        VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".*.\", \"\"));\r\n                        return false;\r\n                      }\r\n                    }\r\n                    else {\r\n                      VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".*.\", \"\"));\r\n                      return false;\r\n                    }\r\n                  }\r\n                  else {\r\n                    VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".*.\", \"\"));\r\n                    return false;\r\n                  }\r\n                }\r\n                else if (stateArray.length === 2) {\r\n                  let aObjectID: string = stateArray[0].trim();\r\n                  aFsmID = stateArray[1].trim();\r\n                  // *.\r\n                  if (aObjectID.startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n                    aObjectID = aObjectID.substring(1);\r\n                    if (veryObject.isCreatedTemplate(aObjectID)) {\r\n                      let template: VE_Template = veryObject.getTemplate(aObjectID);\r\n                      if (template.dataSource.isCreatedFsm(stateArray[1])) {\r\n                        associatedState.addTemplate(template, stateArray[1], stateValue, associatedPos);\r\n                        // VE_AssociatedState associatedState = new VE_AssociatedState(state, template, stateArray[1], stateIndex);\r\n                        // state.AddAssociatedState(associatedState);\r\n                      }\r\n                      else {\r\n                        VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"*.\", \"\"));\r\n                        return false;\r\n                      }\r\n                    }\r\n                    else {\r\n                      if (globalVars.isCreatedTemplate(aObjectID)) {\r\n                        let template: VE_Template = globalVars.getTemplate(aObjectID);\r\n                        if (template.dataSource.isCreatedFsm(stateArray[1])) {\r\n                          associatedState.addTemplate(template, stateArray[1], stateValue, associatedPos);\r\n                          // VE_AssociatedState associatedState = new VE_AssociatedState(state, template, stateArray[1], stateIndex);\r\n                          // state.AddAssociatedState(associatedState);\r\n                        }\r\n                        else {\r\n                          VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"*.\", \"\"));\r\n                          return false;\r\n                        }\r\n                      }\r\n                      else {\r\n                        VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"*.\", \"\"));\r\n                        return false;\r\n                      }\r\n                    }\r\n                  }\r\n                  // .\r\n                  else {\r\n                    let aObject: VeryEngineObject = objects.getVeryObject(aObjectID);\r\n                    if (aObject === null) {\r\n                      VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".\", \"\"));\r\n                      return false;\r\n                    }\r\n                    let aFsm: VE_Fsm = aObject.getFsm(aFsmID);\r\n                    if (aFsm === null) {\r\n                      VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".\", \"\"));\r\n                      return false;\r\n                    }\r\n                    let toState: Nullable<VE_State> = aFsm.getState(stateValue);\r\n                    if (toState === null) {\r\n                      VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".\", \"\"));\r\n                      return false;\r\n                    }\r\n                    associatedState.add(toState, stateValue, associatedPos);\r\n                    // VE_AssociatedState associatedState = new VE_AssociatedState(state, toState);\r\n                    // state.AddAssociatedState(associatedState);\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              //\r\n              else {\r\n                let aFsm: VE_Fsm = veryObject.getFsm(aFsmID);\r\n                if (aFsm === null) {\r\n                  VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"\", \"\"));\r\n                  return false;\r\n                }\r\n                let toState: Nullable<VE_State> = aFsm.getState(stateValue);\r\n                if (toState === null) {\r\n                  VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"\", \"\"));\r\n                  return false;\r\n                }\r\n\r\n                associatedState.add(toState, stateValue, associatedPos);\r\n                //VE_AssociatedState associatedState = new VE_AssociatedState(state, toState);\r\n                //state.AddAssociatedState(associatedState);\r\n              }\r\n            }\r\n            state!.addAssociatedState(associatedState);\r\n\r\n          }\r\n\r\n        }\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n  private static stateAssignment(project_name: string, object_id: string, fsm_id: string, global_vars: VE_Variables, objects: VE_Objects, very_object: VeryEngineObject, fsm: VE_Fsm, state_data: VE_StateData, state: VE_State): boolean {\r\n    // \r\n    // \r\n    let assignStr: string = state_data.ValStr;\r\n    // *\r\n    // .*\r\n    // *.*\r\n    // .*.*\r\n    if (assignStr.indexOf(StateConst.VARIABLE_SYMBOL) > -1)  // \r\n    {\r\n      if (assignStr.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n        let valArray: string[] = assignStr.split(StateConst.STATE_SEPARATOR);\r\n        for (let q: number = 0; q < valArray.length; q++) {\r\n          valArray[q] = valArray[q].trim();\r\n        }\r\n        if (valArray.length === 2) {\r\n          if (!valArray[1].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"1*2.*3*.*4.*.*\", \"\"));\r\n            return false;\r\n          }\r\n          else {\r\n            // *.*\r\n            if (valArray[0].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n              let templateVarID: string = valArray[0].substring(1);\r\n              let varID: string = valArray[1].substring(1);\r\n              if (very_object.isCreatedTemplate(templateVarID)) {\r\n                let template: VE_Template = very_object.getTemplate(templateVarID);\r\n                if (template.varData.isCreatedVariable(varID) || template.dataSource.isCreatedFsm(varID)) {\r\n                  state.setTemplateInfo(template, varID, assignStr);\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"*.***\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                if (global_vars.isCreatedTemplate(templateVarID)) {\r\n                  let template: VE_Template = global_vars.getTemplate(templateVarID);\r\n                  if (template.varData.isCreatedVariable(varID) || template.dataSource.isCreatedFsm(varID)) {\r\n                    state.setTemplateInfo(template, varID, assignStr);\r\n                  }\r\n                  else {\r\n                    VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"*.***\", \"\"));\r\n                    return false;\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"*.**\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n            }\r\n            // .*\r\n            else {\r\n              if (valArray[0] === object_id && valArray[1].substring(1) === fsm_id) {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \".*\", \"\"));\r\n                return false;\r\n              }\r\n              let errorInfo: ErrorInfo = new ErrorInfo();\r\n\r\n              let veryVar: Nullable<IVeryVar> = VeryVarManager.getVariable(valArray[1].substring(1), project_name, valArray[0], errorInfo);\r\n              if (!errorInfo.isRight || veryVar === null) {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \".**\" + valArray[1] + \"\" + errorInfo.message, \"\"));\r\n                return false;\r\n              }\r\n              else {\r\n                // \r\n                if (VE_AssignmentTypeJudge.allow(fsm.fsmVar, veryVar)) {\r\n                  state.setStateVariable(veryVar);\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \".*\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        else if (valArray.length === 3) {\r\n          // .*.*\r\n          if (valArray[0].startsWith(StateConst.STATE_SEPARATOR) || !valArray[1].startsWith(StateConst.STATE_SEPARATOR) || !valArray[2].startsWith(StateConst.STATE_SEPARATOR)) {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"1*2.*3*.*4.*.*\", \"\"));\r\n            return false;\r\n          }\r\n          else {\r\n            let templateVarID: string = valArray[1].substring(1);\r\n            let varID: string = valArray[2].substring(1);\r\n            if (objects.isCreated(valArray[0])) {\r\n              let tObject: VeryEngineObject = objects.getVeryObject(valArray[0]);\r\n              if (tObject.isCreatedTemplate(templateVarID)) {\r\n                let template: VE_Template = tObject.getTemplate(templateVarID);\r\n                if (template.varData.isCreatedVariable(varID) || template.dataSource.isCreatedFsm(varID)) {\r\n                  state.setTemplateInfo(template, varID, assignStr);\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \".*.*.**\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \".*.**\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n            else {\r\n              VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \".*.*\", \"\"));\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"1*2.*3*.*4.*.*\", \"\"));\r\n          return false;\r\n        }\r\n      }\r\n      else {\r\n        // *\r\n        let varID: string = assignStr.substring(1);\r\n        if (varID == fsm_id) {\r\n          VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"*\", \"\"));\r\n          return false;\r\n        }\r\n        let errorInfo: ErrorInfo = new ErrorInfo();\r\n        let stateVar: Nullable<IVeryVar> = VeryVarManager.getVariable(varID, project_name, object_id, errorInfo);\r\n        if (stateVar === null) {\r\n          VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"\" + errorInfo.message, \"\"));\r\n          return false;\r\n        }\r\n        else {\r\n          //\r\n          if (VE_AssignmentTypeJudge.allow(fsm.fsmVar, stateVar)) {\r\n            state.setStateVariable(stateVar);\r\n          }\r\n          else {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"*\", \"\"));\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    //\r\n    else {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let val: any = fsm.fsmVar.initValue(assignStr, errorInfo);\r\n      if (!errorInfo.isRight) {\r\n        VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"\", \"\"));\r\n        return false;\r\n      }\r\n      state.setConstValue(val);\r\n    }\r\n    return true;\r\n  }\r\n  **/\r\n\r\n  private static assignmentAction(project_name: string, object_id: string, fsm_id: string, global_vars: VE_Variables, objects: VE_Objects, very_object: VeryEngineObject, action_data: VE_StateActionData, state: VE_State): boolean {\r\n    // \r\n    let assignment: VE_Assignment = new VE_Assignment(state, action_data.totalString);\r\n    let varID: string = action_data.varID;\r\n    // Debug.LogWarning(\"\" + action_data.TotalString);\r\n    // 1 1*2.*3*.*4.*.*\r\n    if (varID.indexOf(StateConst.VARIABLE_SYMBOL) > -1)  // \r\n    {\r\n      if (varID.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n        let valArray: string[] = varID.split(StateConst.STATE_SEPARATOR);\r\n        for (let q: number = 0; q < valArray.length; q++) {\r\n          valArray[q] = valArray[q].trim();\r\n        }\r\n        // .* or *.*\r\n        if (valArray.length === 2) {\r\n          // *.*\r\n          if (valArray[0].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n            let templateVarID: string = valArray[0].substring(1);\r\n            varID = valArray[1].substring(1);\r\n            if (very_object.isCreatedTemplate(templateVarID)) {\r\n              let template: VE_Template = very_object.getTemplate(templateVarID);\r\n              if (template.varData.isCreatedVariable(varID)) {\r\n                let varPara: string[] = template.varData.getVariableParas(varID);\r\n                if (varPara[1].toLowerCase() === \"expression\" || varPara[1].toLowerCase() === \"\") {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.*\", \"\"));\r\n                  return false;\r\n                }\r\n                else {\r\n                  assignment.setLeftTemplateVar(template, varID);\r\n                }\r\n              }\r\n              else if (template.dataSource.isCreatedFsm(varID)) {\r\n                assignment.setLeftTemplateVar(template, varID);\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.***\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n            else {\r\n              if (global_vars.isCreatedTemplate(templateVarID)) {\r\n                let template: VE_Template = global_vars.getTemplate(templateVarID);\r\n                if (template.varData.isCreatedVariable(varID)) {\r\n                  let varPara: string[] = template.varData.getVariableParas(varID);\r\n                  if (varPara[1].toLowerCase() === \"expression\" || varPara[1].toLowerCase() === \"\") {\r\n                    VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.*\", \"\"));\r\n                    return false;\r\n                  }\r\n                  else {\r\n                    assignment.setLeftTemplateVar(template, varID);\r\n                  }\r\n                }\r\n                else if (template.dataSource.isCreatedFsm(varID)) {\r\n                  assignment.setLeftTemplateVar(template, varID);\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.***\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.**\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          //.*\r\n          else {\r\n            if (objects.isCreated(valArray[0])) {\r\n              let aObject: VeryEngineObject = objects.getVeryObject(valArray[0]);\r\n              varID = varID.substring(1);\r\n              if (aObject.isCreatedExpression(varID)) {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*\", \"\"));\r\n                return false;\r\n              }\r\n              else if (aObject.isCreatedFsm(varID)) {\r\n                let v: IVeryVar = aObject.getFsm(varID).fsmVar;\r\n                assignment.setLeftVariable(v);\r\n              }\r\n              else if (aObject.isCreatedVariable(varID)) {\r\n                let v: IVeryVar = aObject.getVariable(varID);\r\n                assignment.setLeftVariable(v);\r\n              }\r\n              else if (aObject.isCreatedTemplate(varID)) {\r\n                let template: VE_Template = aObject.getTemplate(varID);\r\n                assignment.setLeftTemplate(template);\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n            else {\r\n              VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*\", \"\"));\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        else if (valArray.length === 3)  // .*.*\r\n        {\r\n          // .*.*\r\n          if (valArray[0].startsWith(StateConst.STATE_SEPARATOR) || !valArray[1].startsWith(StateConst.STATE_SEPARATOR) || !valArray[2].startsWith(StateConst.STATE_SEPARATOR)) {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"1*2.*3*.*4.*.*\", \"\"));\r\n            return false;\r\n          }\r\n          else {\r\n            let templateVarID: string = valArray[1].substring(1);\r\n            varID = valArray[2].substring(1);\r\n            if (objects.isCreated(valArray[0])) {\r\n              let tObject: VeryEngineObject = objects.getVeryObject(valArray[0]);\r\n              if (tObject.isCreatedTemplate(templateVarID)) {\r\n                let template: VE_Template = tObject.getTemplate(templateVarID);\r\n                if (template.dataSource.isCreatedFsm(varID)) {\r\n                  assignment.setLeftTemplateVar(template, varID);\r\n                }\r\n                else if (template.varData.isCreatedVariable(varID)) {\r\n                  let varParas: string[] = template.varData.getVariableParas(varID);\r\n                  if (varParas[1].toLowerCase() === \"expression\" || varParas[1].toLowerCase() === \"\") {\r\n                    VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.*.*.*\", \"\"));\r\n                    return false;\r\n                  }\r\n                  else {\r\n                    assignment.setLeftTemplateVar(template, varID);\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.*.**\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.**\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n            else {\r\n              VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.*\", \"\"));\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"1*2.*3*.*4.*.*\", \"\"));\r\n          return false;\r\n        }\r\n      }\r\n      else // *\r\n      {\r\n        varID = varID.substring(1);\r\n        if (very_object.isCreatedExpression(varID)) {\r\n          VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*\", \"\"));\r\n          return false;\r\n        }\r\n        else if (very_object.isCreatedFsm(varID)) {\r\n          let v: IVeryVar = very_object.getFsm(varID).fsmVar;\r\n          assignment.setLeftVariable(v);\r\n        }\r\n        else if (very_object.isCreatedVariable(varID)) {\r\n          let v: IVeryVar = very_object.getVariable(varID);\r\n          assignment.setLeftVariable(v);\r\n        }\r\n        else if (very_object.isCreatedTemplate(varID)) {\r\n          let template: VE_Template = very_object.getTemplate(varID);\r\n          assignment.setLeftTemplate(template);\r\n        }\r\n        else {\r\n          // \r\n          if (global_vars.isCreatedExpression(varID)) {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*\", \"\"));\r\n            return false;\r\n          }\r\n          else if (global_vars.isCreatedVariable(varID)) {\r\n            let v: IVeryVar = global_vars.getVariable(varID);\r\n            assignment.setLeftVariable(v);\r\n          }\r\n          else if (global_vars.isCreatedTemplate(varID)) {\r\n            let template: VE_Template = global_vars.getTemplate(varID);\r\n            assignment.setLeftTemplate(template);\r\n          }\r\n          else {\r\n            // \r\n            // if (VerySceneVariables.Variables.isCreatedExpression(varID)) {\r\n            //   VE_ErrorManager.Add(VE_Error.Error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.TotalString + \"*\", \"\"));\r\n            //   return false;\r\n            // }\r\n            // else if (VerySceneVariables.Variables.IsCreatedVariable(varID)) {\r\n            //   IVeryVar v = VerySceneVariables.Variables.GetVariable(varID);\r\n            //   assignment.SetLeft(v);\r\n            // }\r\n            // else {\r\n            //   VE_ErrorManager.Add(VE_Error.Error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.TotalString + \"*\", \"\"));\r\n            //   return false;\r\n            // }\r\n            VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*\", \"\"));\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n      return false;\r\n    }\r\n\r\n\r\n    // 2 1*2.*3*.*4.*.*5\r\n    varID = action_data.varValue.trim();\r\n\r\n    // \r\n    if (varID.startsWith(\"\\\"\") || varID.startsWith(\"'\") || varID.startsWith(\"\") || varID.startsWith(\"\")) {\r\n      assignment.setRightConst(varID.substring(1, varID.length - 2).trim());\r\n    }\r\n    else if (VE_StringFormat.isFormulaString(varID))  // \r\n    {\r\n      // Debug.LogError(varID);\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      StateConst.AssignmentFormulaCount++;\r\n      let localExp: IExpression = VE_Expressions.createLocalExpression(StateConst.AssignmentPrefix + StateConst.AssignmentFormulaCount.toString(), varID, project_name, object_id, errorInfo);\r\n      if (!errorInfo.isRight || !localExp) {\r\n        // errorInfo = \"\\n\" + errorInfo + \"\" + errorPos;\r\n        // return null;\r\n        VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\" + errorInfo.message, \"\"));\r\n        return false;\r\n      }\r\n      assignment.setRightVariable(new VeryExpression(localExp));\r\n    }\r\n    else {\r\n      if (varID.indexOf(StateConst.VARIABLE_SYMBOL) > -1)  // \r\n      {\r\n        if (varID.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n          let valArray: string[] = varID.split(StateConst.STATE_SEPARATOR);\r\n          for (let q: number = 0; q < valArray.length; q++) {\r\n            valArray[q] = valArray[q].trim();\r\n          }\r\n          // .* or *.*\r\n          if (valArray.length === 2) {\r\n            // *.*\r\n            if (valArray[0].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n              let templateVarID: string = valArray[0].substring(1);\r\n              varID = valArray[1].substring(1);\r\n              if (very_object.isCreatedTemplate(templateVarID)) {\r\n                let template: VE_Template = very_object.getTemplate(templateVarID);\r\n                if (template.varData.isCreatedVariable(varID) || template.dataSource.isCreatedFsm(varID)) {\r\n                  // \r\n                  assignment.setRightTemplateVariable(template, varID);\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.***\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                if (global_vars.isCreatedTemplate(templateVarID)) {\r\n                  let template: VE_Template = global_vars.getTemplate(templateVarID);\r\n                  if (template.varData.isCreatedVariable(varID) || template.dataSource.isCreatedFsm(varID)) {\r\n                    // \r\n                    assignment.setRightTemplateVariable(template, varID);\r\n                  }\r\n                  else {\r\n                    VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.***\", \"\"));\r\n                    return false;\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.**\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n            }\r\n            // .*\r\n            else {\r\n              if (objects.isCreated(valArray[0])) {\r\n                let aObject: VeryEngineObject = objects.getVeryObject(valArray[0]);\r\n                varID = varID.substring(1);\r\n                let rightVar: Nullable<IVeryVar> = null;\r\n                let rightTemplate: Nullable<VE_Template> = null;\r\n                if (aObject.isCreatedExpression(varID)) {\r\n                  rightVar = new VeryExpression(aObject.getExpression(varID));\r\n                }\r\n                else if (aObject.isCreatedFsm(varID)) {\r\n                  rightVar = aObject.getFsm(varID).fsmVar;\r\n                }\r\n                else if (aObject.isCreatedVariable(varID)) {\r\n                  rightVar = aObject.getVariable(varID);\r\n                }\r\n                else if (aObject.isCreatedTemplate(varID)) {\r\n                  rightTemplate = aObject.getTemplate(varID);\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*\", \"\"));\r\n                  return false;\r\n                }\r\n                // \r\n                if (rightVar !== null) {\r\n                  if (assignment.leftType === AssignType.Template) {\r\n                    VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n                    return false;\r\n                  }\r\n                  else if (assignment.leftType === AssignType.Variable) {\r\n                    if (VE_AssignmentTypeJudge.allow(assignment.leftVariable!, rightVar)) {\r\n                      assignment.setRightVariable(rightVar);\r\n                    }\r\n                    else {\r\n                      VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n                      return false;\r\n                    }\r\n                  }\r\n                  else {\r\n                    // \r\n                    assignment.setRightVariable(rightVar);\r\n                  }\r\n                }\r\n                else if (rightTemplate != null) {\r\n                  if (assignment.leftType === AssignType.Template) {\r\n                    assignment.setRightTemplate(rightTemplate);\r\n                  }\r\n                  else {\r\n                    VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n                    return false;\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          else if (valArray.length === 3)  // .*.*\r\n          {\r\n            // .*.*\r\n            if (valArray[0].startsWith(StateConst.STATE_SEPARATOR) || !valArray[1].startsWith(StateConst.STATE_SEPARATOR) || !valArray[2].startsWith(StateConst.STATE_SEPARATOR)) {\r\n              VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"1*2.*3*.*4.*.*\", \"\"));\r\n              return false;\r\n            }\r\n            else {\r\n              let templateVarID: string = valArray[1].substring(1);\r\n              varID = valArray[2].substring(1);\r\n              if (objects.isCreated(valArray[0])) {\r\n                let tObject: VeryEngineObject = objects.getVeryObject(valArray[0]);\r\n                if (tObject.isCreatedTemplate(templateVarID)) {\r\n                  let template: VE_Template = tObject.getTemplate(templateVarID);\r\n                  // \r\n                  if (template.dataSource.isCreatedFsm(varID) || template.varData.isCreatedVariable(varID)) {\r\n                    // \r\n                    assignment.setRightTemplateVariable(template, varID);\r\n                  }\r\n                  else {\r\n                    VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.*.**\", \"\"));\r\n                    return false;\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.**\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.*\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          else {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"1*2.*3*.*4.*.*\", \"\"));\r\n            return false;\r\n          }\r\n        }\r\n        else // *\r\n        {\r\n          varID = varID.substring(1);\r\n          let rightVar: Nullable<IVeryVar> = null;\r\n          let rightTemplate: Nullable<VE_Template> = null;\r\n          if (very_object.isCreatedExpression(varID)) {\r\n            rightVar = new VeryExpression(very_object.getExpression(varID));\r\n          }\r\n          else if (very_object.isCreatedFsm(varID)) {\r\n            rightVar = very_object.getFsm(varID).fsmVar;\r\n          }\r\n          else if (very_object.isCreatedVariable(varID)) {\r\n            rightVar = very_object.getVariable(varID);\r\n          }\r\n          else if (very_object.isCreatedTemplate(varID)) {\r\n            rightTemplate = very_object.getTemplate(varID);\r\n          }\r\n          else {\r\n            // \r\n            if (global_vars.isCreatedExpression(varID)) {\r\n              rightVar = new VeryExpression(global_vars.getExpression(varID));\r\n            }\r\n            else if (global_vars.isCreatedVariable(varID)) {\r\n              rightVar = global_vars.getVariable(varID);\r\n            }\r\n            else if (global_vars.isCreatedTemplate(varID)) {\r\n              rightTemplate = global_vars.getTemplate(varID);\r\n            }\r\n            else {\r\n              //\r\n              if (VerySceneVariables.Variables.isCreatedExpression(varID)) {\r\n                rightVar = new VeryExpression(VerySceneVariables.Variables.getExpression(varID));\r\n              }\r\n              else if (VerySceneVariables.Variables.isCreatedVariable(varID)) {\r\n                rightVar = VerySceneVariables.Variables.getVariable(varID);\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          // \r\n          if (rightVar != null) {\r\n            if (assignment.leftType === AssignType.Template) {\r\n              VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n              return false;\r\n            }\r\n            else if (assignment.leftType === AssignType.Variable) {\r\n              if (VE_AssignmentTypeJudge.allow(assignment.leftVariable!, rightVar)) {\r\n                assignment.setRightVariable(rightVar);\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n            else {\r\n              // \r\n              assignment.setRightVariable(rightVar);\r\n            }\r\n          }\r\n          else if (rightTemplate != null) {\r\n            if (assignment.leftType === AssignType.Template) {\r\n              assignment.setRightTemplate(rightTemplate);\r\n            }\r\n            else {\r\n              VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n              return false;\r\n            }\r\n          }\r\n          else {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n      else  // \r\n      {\r\n        if (assignment.leftType === AssignType.Template) {\r\n          if (varID.trim().toLowerCase() === \"null\") {\r\n            assignment.setRightNull();\r\n          }\r\n          else {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"null\", \"\"));\r\n            return false;\r\n          }\r\n        }\r\n        else if (assignment.leftType === AssignType.TemplateVariable) {\r\n          assignment.setRightConst(varID);\r\n        }\r\n        else {\r\n          if (assignment.leftVariable !== null) {\r\n            let errorInfo: ErrorInfo = new ErrorInfo();\r\n            let newValue: any = assignment.leftVariable.initValue(varID, errorInfo);\r\n            if (!errorInfo.isRight || !newValue) {\r\n              VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\" + errorInfo.message + \"\", \"\"));\r\n              return false;\r\n            }\r\n            else {\r\n              assignment.setRightConstValue(newValue);\r\n            }\r\n          }\r\n          else {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    let stateAction: VE_StateAction = new VE_StateAction();\r\n    stateAction.setAssignment(assignment);\r\n    state.addAction(stateAction);\r\n    return true;\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n  public static createInstance(project_name: string, object_id: string, var_id: string, template: VE_Template, object_name: string, error_info: ErrorInfo, destroy_on_create_new: boolean): VE_Template {\r\n\r\n\r\n    return template;\r\n  }\r\n\r\n\r\n}","export * from './loaderManager';\r\nexport * from './createInstance';","import { VeryTable } from '../index';\r\nimport { VE_Template, VE_Templates } from '../template';\r\nimport { VeryEngineObject, VE_Objects } from '../object';\r\nimport { VE_FsmData, VE_StateData, VE_StateTriggerData, VE_StateActionData } from '../dataSource';\r\nimport { VE_Manager } from '../manager';\r\nimport { VE_Variables, VeryVarManager } from '../variables';\r\nimport { VE_StringFormat } from '../utility';\r\nimport { VE_ErrorManager, VE_Error } from '../global';\r\nimport { StateConst } from '../state';\r\nimport { CreateInstance } from './createInstance';\r\nimport { GameObject } from '../babylon';\r\n\r\n\r\nexport enum AnalisysType { Global, Object, Template }\r\n\r\nexport class LoaderManager {\r\n\r\n  private _currentType: AnalisysType = AnalisysType.Global;\r\n\r\n  private _table!: VeryTable;\r\n\r\n  private _projectName: string = '';\r\n\r\n  private _lastFsmID: string = '';\r\n  private _lastObjectID: string = '';\r\n  private _activeTemplate: Nullable<VE_Template> = null;\r\n  private _activeObject: Nullable<VeryEngineObject> = null;\r\n  private _activeFsmData: Nullable<VE_FsmData> = null;\r\n  private _activeStateData: Nullable<VE_StateData> = null;\r\n  private _emptyLine: boolean = false;\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public load(project_name: string, table: VeryTable): boolean {\r\n    this._projectName = project_name;\r\n    this._table = table;\r\n\r\n    // \r\n    VE_Manager.createProject(project_name);\r\n\r\n    let templates: VE_Templates = VE_Manager.templates(project_name);\r\n    let objects: VE_Objects = VE_Manager.objects(project_name);\r\n    let globalVars: VE_Variables = VE_Manager.variables(project_name);\r\n\r\n    // console.log(table);\r\n    if (table) {\r\n      for (let i: number = 1; i < table.RowCount; i++) {\r\n        // console.log(`${i+1}${table.getData(i, 0)}`);\r\n        // \r\n        if (table.getData(i, 0).startsWith('//')) {\r\n          continue;\r\n        }\r\n        // \r\n        if (table.getRow(i)!.isEmpty()) {\r\n          // console.log('' + (i + 1));\r\n          // TODO\r\n          this._emptyLine = true;\r\n          continue;\r\n        }\r\n        // 1\r\n        if (table.getData(i, 0).startsWith(\"_\")) {\r\n          this._activeFsmData = null;\r\n          this._activeStateData = null;\r\n          this._currentType = AnalisysType.Template;\r\n          let templateID = table.getData(i, 0).replace(/ /g, '').substring(3);\r\n          // TODO: \r\n          if (templateID.indexOf(':') > -1 || templateID.indexOf('') > -1) {\r\n\r\n          } else {\r\n            if (!VE_StringFormat.isIDLegal(templateID)) {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 0), \"\" + table.getData(i, 0) + \"\", table.ID))\r\n              return false;\r\n            }\r\n            if (!templates.isCreatedTemplate(templateID)) {\r\n              this._lastObjectID = templateID;\r\n              this._emptyLine = true;\r\n              let template: VE_Template = new VE_Template(project_name, templateID);\r\n              templates.addTemplate(templateID, template);\r\n              this._activeTemplate = template;\r\n            } else {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 0), \"\" + table.getData(i, 0) + \"\", table.ID))\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        // 2\r\n        else if (table.getData(i, 0) !== '') {\r\n          this._activeFsmData = null;\r\n          this._activeStateData = null;\r\n          this._currentType = AnalisysType.Object;\r\n          let objectID: string = table.getData(i, 0);\r\n          let objName: string = '';\r\n          if (objectID.indexOf('=') > -1) {\r\n            let nameArray: string[] = objectID.split('=');\r\n            if (nameArray.length === 2) {\r\n              objectID = nameArray[0].trim();\r\n              objName = nameArray[1].trim();\r\n            } else {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 0), \"\" + table.getData(i, 0) + \"=\", table.ID))\r\n              return false;\r\n            }\r\n          }\r\n\r\n          if (!VE_StringFormat.isIDLegal(objectID)) {\r\n            VE_ErrorManager.Add(VE_Error.error(table.pos(i, 0), \"\" + table.getData(i, 0) + \"\", table.ID))\r\n            return false;\r\n          }\r\n          // GameObject\r\n          let activeGameObject: Nullable<GameObject> = null;\r\n          if (objName === '') {\r\n            activeGameObject = new GameObject(`__${objectID}_Empty`);\r\n          } else {\r\n            activeGameObject = GameObject.Find(objName);\r\n            if (activeGameObject === null) {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 0), \"\" + objName + \"\", table.ID))\r\n              return false;\r\n            }\r\n          }\r\n          this._lastObjectID = objectID;\r\n          this._emptyLine = true;\r\n          if (!objects.isCreated(objectID)) {\r\n            // \r\n            let tempObject: VeryEngineObject = new VeryEngineObject(project_name, objectID, activeGameObject);\r\n            objects.add(objectID, tempObject);\r\n            this._activeObject = tempObject;\r\n          } else {\r\n            VE_ErrorManager.Add(VE_Error.error(table.pos(i, 0), \"\" + table.getData(i, 0) + \"\", table.ID))\r\n            return false;\r\n          }\r\n        }\r\n        // 3\r\n        else if (table.getData(i, 5) !== \"\" && table.getData(i, 1) === \"\" && table.getData(i, 2) === \"\" && table.getData(i, 3) === \"\" && table.getData(i, 4) === \"\" && table.getData(i, 6) === \"\" && table.getData(i, 7) === \"\" && table.getData(i, 8) === \"\") {\r\n          let paraData: string = table.getData(i, 5);\r\n          // \r\n          if (this._currentType === AnalisysType.Global) {\r\n            this._emptyLine = true;\r\n            // \r\n            let varArray: string[] = VE_StringFormat.paraSegment(paraData);\r\n            if (varArray.length === 2 || varArray.length === 3) {\r\n              let varID: string = varArray[0].trim();\r\n              if (!VE_StringFormat.isIDLegal(varID)) {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              }\r\n              let paraArray: string[] = [varArray[1].trim()];\r\n              if (varArray.length === 2) {\r\n                paraArray[1] = '';\r\n              } else {\r\n                paraArray[1] = varArray[2].trim();\r\n              }\r\n              if (!globalVars.varData.isCreatedVariable(varID)) {\r\n                globalVars.varData.addVariable(varID, paraArray, table.pos(i, 5));\r\n              } else {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              }\r\n            } else {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n              return false;\r\n            }\r\n          }\r\n          // \r\n          else if (paraData.indexOf('=') > -1) {\r\n            let paraArray: string[] = paraData.split('=');\r\n            // \r\n            // \r\n            if (paraArray.length === 2 && paraArray[0].trim() === this._lastFsmID) {\r\n              this._emptyLine = false;\r\n              if (this._activeFsmData === null) {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              } else {\r\n                // let stateInfo: string[] = paraArray[1].trim().split(/,|/);\r\n                // let stateIndex: number = StateConst.STATE_INDEX;\r\n                // let stateData: Nullable<VE_StateData> = null;\r\n                // if (stateInfo.length === 2) {\r\n                //   stateInfo[0] = stateInfo[0].trim();\r\n                //   stateInfo[1] = stateInfo[1].trim();\r\n                //   if (stateInfo[1].startsWith('#')) {\r\n                //     stateIndex = parseInt(stateInfo[1].substring(1));\r\n                //     if (stateIndex === NaN) {\r\n                //       VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"IDIDID=#ID\", table.ID))\r\n                //       return false;\r\n                //     }\r\n                //   } else {\r\n                //     VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"IDIDID=#ID\", table.ID))\r\n                //     return false;\r\n                //   }\r\n                // }\r\n                let stateData: VE_StateData = new VE_StateData(this._activeFsmData, paraArray[1].trim(), false);\r\n                stateData.rowIndex = i;\r\n                this._activeFsmData.addState(stateData);\r\n                this._activeStateData = stateData;\r\n              }\r\n            }\r\n            // \r\n            else {\r\n              this._emptyLine = true;\r\n              let varArray: string[] = VE_StringFormat.paraSegment(paraData);\r\n              if (varArray.length === 3) {\r\n                let varID: string = varArray[0].trim();\r\n                if (!VE_StringFormat.isIDLegal(varID)) {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                let para2Array: string[] = [varArray[1].trim(), varArray[2].trim()];\r\n                // \r\n                if (this._currentType === AnalisysType.Object) {\r\n                  if (this._activeObject!.varData.isCreatedVariable(varID)) {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeObject!.objectID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  // \r\n                  if (this._activeObject!.dataSource.isCreatedFsm(varID)) {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeObject!.objectID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  this._activeObject!.varData.addVariable(varID, para2Array, table.pos(i, 5));\r\n                }\r\n                else if (this._currentType === AnalisysType.Template) {\r\n                  if (this._activeTemplate!.varData.isCreatedVariable(varID)) {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeTemplate!.templateID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  // \r\n                  if (this._activeTemplate!.dataSource.isCreatedFsm(varID)) {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  this._activeTemplate!.varData.addVariable(varID, para2Array, table.pos(i, 5));\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n              } else {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          // \r\n          else {\r\n            this._emptyLine = true;\r\n            let varArray: string[] = VE_StringFormat.paraSegment(paraData);\r\n            if (varArray.length === 2 || varArray.length === 3) {\r\n              let varID: string = varArray[0].trim();\r\n              if (!VE_StringFormat.isIDLegal(varID)) {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              }\r\n              let paraArray: string[] = [varArray[1].trim()];\r\n              if (varArray.length === 2) {\r\n                paraArray[1] = '';\r\n              } else {\r\n                paraArray[1] = varArray[2].trim();\r\n              }\r\n              // \r\n              if (this._currentType === AnalisysType.Object) {\r\n                if (this._activeObject!.varData.isCreatedVariable(varID)) {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeObject!.objectID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                // \r\n                if (this._activeObject!.dataSource.isCreatedFsm(varID)) {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeObject!.objectID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                this._activeObject!.varData.addVariable(varID, paraArray, table.pos(i, 5));\r\n              }\r\n              else if (this._currentType === AnalisysType.Template) {\r\n                if (this._activeTemplate!.varData.isCreatedVariable(varID)) {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeTemplate!.templateID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                // \r\n                if (this._activeTemplate!.dataSource.isCreatedFsm(varID)) {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeTemplate!.templateID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                this._activeTemplate!.varData.addVariable(varID, paraArray, table.pos(i, 5));\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              }\r\n            } else {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        // 4 +  +  +  + \r\n        else {\r\n          // \r\n          let hasState: boolean = false;\r\n          let paraData: string = table.getData(i, 5);\r\n          if (paraData !== '') {\r\n            hasState = true;\r\n            this._emptyLine = false;\r\n          }\r\n          // \r\n          else {\r\n            if (this._emptyLine) {\r\n              this._emptyLine = false;\r\n              hasState = true;\r\n              paraData = (this._lastObjectID + '__' + StateConst.StateCount++) + ',' + StateConst.STATE_VALUE;\r\n            }\r\n          }\r\n\r\n          // string\r\n          if (hasState) {\r\n            // \r\n            if (paraData.indexOf('=') > -1) {\r\n              let stateArray: string[] = paraData.split('=');\r\n              let fsmID: string = stateArray[0].trim();\r\n              // \r\n              if (stateArray.length === 2 && fsmID === this._lastFsmID) {\r\n                if (this._activeFsmData === null) {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                } else {\r\n                  // let stateIndex: number = StateConst.STATE_INDEX;\r\n                  let stateData: VE_StateData = new VE_StateData(this._activeFsmData, stateArray[1].trim(), false);\r\n                  stateData.rowIndex = i;\r\n                  this._activeFsmData.addState(stateData);\r\n                  this._activeStateData = stateData;\r\n                }\r\n              } else {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\" + fsmID + \"\", table.ID))\r\n                return false;\r\n              }\r\n            }\r\n            // \r\n            else {\r\n              let varArray: string[] = VE_StringFormat.paraSegment(paraData);\r\n              if (varArray.length === 2) {\r\n                let fsmID: string = varArray[0].trim();\r\n                if (!VE_StringFormat.isIDLegal(fsmID)) {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                varArray[1] = varArray[1].trim();\r\n                this._lastFsmID = fsmID;\r\n                // let stateIndex: number = StateConst.STATE_INDEX;\r\n                // \r\n                if (this._currentType === AnalisysType.Object) {\r\n                  if (this._activeObject!.varData.isCreatedVariable(fsmID)) {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._lastObjectID + \"\" + fsmID + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  // \r\n                  if (this._activeObject!.dataSource.isCreatedFsm(fsmID)) {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._lastObjectID + \"\" + fsmID + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  // \r\n                  this._activeObject!.dataSource.createFsm(fsmID, table.pos(i, 5));\r\n                  this._activeFsmData = this._activeObject!.dataSource.getFsmData(fsmID);\r\n                  // \r\n                  this._activeFsmData.initFsm('string', varArray[1]);\r\n                  // \r\n                  let stateData: VE_StateData = new VE_StateData(this._activeFsmData, varArray[1], true);\r\n                  stateData.rowIndex = i;\r\n                  this._activeFsmData.addState(stateData);\r\n                  this._activeStateData = stateData;\r\n                }\r\n                else if (this._currentType === AnalisysType.Template) {\r\n                  if (this._activeTemplate!.varData.isCreatedVariable(fsmID)) {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._lastObjectID + \"\" + fsmID + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  // \r\n                  if (this._activeTemplate!.dataSource.isCreatedFsm(fsmID)) {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._lastObjectID + \"\" + fsmID + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  // \r\n                  this._activeTemplate!.dataSource.createFsm(fsmID, table.pos(i, 5));\r\n                  this._activeFsmData = this._activeTemplate!.dataSource.getFsmData(fsmID);\r\n                  // \r\n                  this._activeFsmData.initFsm('string', varArray[1]);\r\n                  // \r\n                  let stateData: VE_StateData = new VE_StateData(this._activeFsmData, varArray[1], true);\r\n                  stateData.rowIndex = i;\r\n                  this._activeFsmData.addState(stateData);\r\n                  this._activeStateData = stateData;\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n              } else {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID));\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n\r\n          // \r\n          if (table.getData(i, 2) !== '' || table.getData(i, 3) !== '') {\r\n            if (this._activeFsmData === null || this._activeStateData === null) {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 2), \"\" + table.getData(i, 2) + \"\", table.ID));\r\n              return false;\r\n            }\r\n            // DataSource\r\n            let triggerID: string = table.getData(i, 2);\r\n            if (table.getData(i, 2) === '') {\r\n              triggerID = this._lastObjectID + '_' + this._lastFsmID + '__' + StateConst.TriggerCount++;\r\n            }\r\n            let idTemp: string = triggerID.replace(/./g, '');\r\n            if (!VE_StringFormat.isIDLegal(idTemp)) {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 2), \"\" + table.getData(i, 2) + \"\", table.ID))\r\n              return false;\r\n            }\r\n\r\n            if (table.getData(i, 3) !== '') {\r\n              if (!this._activeFsmData!.dataSource.isCreatedTrigger(triggerID)) {\r\n                this._activeFsmData!.dataSource.addTrigger(triggerID, VE_StringFormat.paraSegment(table.getData(i, 3)), table.pos(i, 2));\r\n              } else {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 2), \"\" + table.getData(i, 2) + \"\", table.ID))\r\n                return false;\r\n              }\r\n            }\r\n\r\n            // StateData\r\n            let triggerData: VE_StateTriggerData = new VE_StateTriggerData(triggerID);\r\n            this._activeStateData.addTrigger(triggerData, table.pos(i, 2));\r\n\r\n            // \r\n            if (table.getData(i, 1) !== '') {\r\n              triggerData.logicalSwitch = table.getData(i, 1);\r\n            }\r\n\r\n            // \r\n            if (table.getData(i, 4) !== '') {\r\n              triggerData.logicalExp = table.getData(i, 4);\r\n            }\r\n          } else {\r\n            // \r\n            if (table.getData(i, 1) !== '') {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 1), \"\" + table.getData(i, 1) + \"\", table.ID))\r\n              return false;\r\n            }\r\n\r\n            //  --- \r\n            if (table.getData(i, 4) !== '') {\r\n              if (this._activeFsmData === null || this._activeStateData === null) {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 4), \"\" + table.getData(i, 4) + \"\", table.ID))\r\n                return false;\r\n              }\r\n              if (this._activeStateData.logicalExp !== '') {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 4), \"\" + table.getData(i, 4) + \"12\", table.ID))\r\n                return false;\r\n              } else {\r\n                this._activeStateData.logicalExp = table.getData(i, 4);\r\n              }\r\n            }\r\n\r\n            // if (table.getData(i, 3) !== '') {\r\n            //   VE_ErrorManager.Add(VE_Error.warning(table.pos(i, 3), \"\" + table.getData(i, 3) + \"\", table.ID))\r\n            // }\r\n          }\r\n\r\n          // \r\n          if (table.getData(i, 6) !== '' || table.getData(i, 7) !== '') {\r\n            if (this._activeFsmData === null || this._activeStateData === null) {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 6), \"\" + table.getData(i, 6) + \"\", table.ID))\r\n              return false;\r\n            }\r\n\r\n            // 32\r\n            if (table.getData(i, 7) !== '') {\r\n              // log\r\n              let tempStr: string = table.getData(i, 7).toLowerCase();\r\n              if (tempStr.startsWith('log(') || tempStr.startsWith('log') || tempStr.startsWith('') || tempStr.startsWith('(')) {\r\n                let newActionID: string = project_name + '__log__' + StateConst.LogCount++;\r\n                let actionData: VE_StateActionData = new VE_StateActionData(newActionID, 'true', 'false');\r\n                this._activeStateData.addAction(actionData, table.pos(i, 7));\r\n                let actionPara: string = table.getData(i, 7).substring(4);\r\n                if (tempStr.startsWith('')) {\r\n                  actionPara = table.getData(i, 7).substring(3);\r\n                }\r\n                this._activeFsmData.dataSource.addAction(newActionID, ['', '', actionPara.substring(0, actionPara.length - 1)], ['true', 'false'], table.pos(i, 7));\r\n                if (table.getData(i, 6) !== '') {\r\n                  VE_ErrorManager.Add(VE_Error.warning(table.pos(i, 6), \"\" + table.getData(i, 6) + \"\", table.ID))\r\n                }\r\n              }\r\n              else if (tempStr.startsWith('error(') || tempStr.startsWith('error') || tempStr.startsWith('') || tempStr.startsWith('(')) {\r\n                let newActionID: string = project_name + '__log__' + StateConst.LogCount++;\r\n                let actionData: VE_StateActionData = new VE_StateActionData(newActionID, 'true', 'false');\r\n                this._activeStateData.addAction(actionData, table.pos(i, 7));\r\n                let actionPara: string = table.getData(i, 7).substring(6);\r\n                if (tempStr.startsWith('')) {\r\n                  actionPara = table.getData(i, 7).substring(3);\r\n                }\r\n                this._activeFsmData.dataSource.addAction(newActionID, ['', '', actionPara.substring(0, actionPara.length - 1)], ['true', 'false'], table.pos(i, 7));\r\n                if (table.getData(i, 6) !== '') {\r\n                  VE_ErrorManager.Add(VE_Error.warning(table.pos(i, 6), \"\" + table.getData(i, 6) + \"\", table.ID))\r\n                }\r\n              }\r\n              else if (tempStr.startsWith('warn(') || tempStr.startsWith('warn') || tempStr.startsWith('') || tempStr.startsWith('(')) {\r\n                let newActionID: string = project_name + '__log__' + StateConst.LogCount++;\r\n                let actionData: VE_StateActionData = new VE_StateActionData(newActionID, 'true', 'false');\r\n                this._activeStateData.addAction(actionData, table.pos(i, 7));\r\n                let actionPara: string = table.getData(i, 7).substring(5);\r\n                if (tempStr.startsWith('')) {\r\n                  actionPara = table.getData(i, 7).substring(3);\r\n                }\r\n                this._activeFsmData.dataSource.addAction(newActionID, ['', '', actionPara.substring(0, actionPara.length - 1)], ['true', 'false'], table.pos(i, 7));\r\n                if (table.getData(i, 6) !== '') {\r\n                  VE_ErrorManager.Add(VE_Error.warning(table.pos(i, 6), \"\" + table.getData(i, 6) + \"\", table.ID))\r\n                }\r\n              }\r\n              else {\r\n                // ID\r\n                let actionArray: string[] = VE_StringFormat.paraSegment(table.getData(i, 7));\r\n                // TODO  \r\n                // = \r\n                if (actionArray.length === 1 && actionArray[0].indexOf('=') > -1) {\r\n                  if (table.getData(i, 6) !== '') {\r\n                    VE_ErrorManager.Add(VE_Error.warning(table.pos(i, 6), \"\" + table.getData(i, 6) + \"\", table.ID))\r\n                  }\r\n\r\n                  // = \r\n                  let equalIndex: number = table.getData(i, 7).indexOf('=');\r\n                  let actionData: VE_StateActionData = new VE_StateActionData('');\r\n                  actionData.setAssignmentAction(table.getData(i, 7), table.getData(i, 7).substring(0, equalIndex).trim(), table.getData(i, 7).substring(equalIndex + 1).trim());\r\n                  this._activeStateData.addAction(actionData, table.pos(i, 7));\r\n                } else {\r\n\r\n                  let actionNames: string[];\r\n                  if (table.getData(i, 6) !== '') {\r\n                    actionNames = VE_StringFormat.paraSegment(table.getData(i, 6));\r\n                  } else {\r\n                    actionNames = [this._lastObjectID + '_' + this._lastFsmID + '__' + StateConst.ActionCount++, 'true', 'false', 'false'];\r\n                  }\r\n\r\n                  // console.log(actionArray);\r\n                  if (actionNames.length === 2 || actionNames.length === 3 || actionNames.length === 4) {\r\n                    let actionData: VE_StateActionData;\r\n                    if (actionNames.length === 2) {\r\n                      actionData = new VE_StateActionData(actionNames[0], actionNames[1]);\r\n                    } else if (actionNames.length === 3) {\r\n                      actionData = new VE_StateActionData(actionNames[0], actionNames[1], actionNames[2]);\r\n                    } else {\r\n                      actionData = new VE_StateActionData(actionNames[0], actionNames[1], actionNames[2], actionNames[3]);\r\n                    }\r\n                    this._activeStateData.addAction(actionData, table.pos(i, 6));\r\n                  } else {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 6), \"\" + table.getData(i, 6) + \"IDboolbool\", table.ID))\r\n                    return false;\r\n                  }\r\n\r\n                  // \r\n                  if (!VE_StringFormat.isIDLegal(actionNames[0])) {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 6), \"\" + table.getData(i, 6) + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  if (!this._activeFsmData.dataSource.isCreatedAction(actionNames[0])) {\r\n                    if (actionNames.length == 2) {\r\n                      this._activeFsmData.dataSource.addAction(actionNames[0], VE_StringFormat.paraSegment(table.getData(i, 7)), [actionNames[1], 'false'], table.pos(i, 6));\r\n                    } else {\r\n                      this._activeFsmData.dataSource.addAction(actionNames[0], VE_StringFormat.paraSegment(table.getData(i, 7)), [actionNames[1], actionNames[2]], table.pos(i, 6));\r\n                    }\r\n                  } else {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 6), \"\" + table.getData(i, 6) + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                }\r\n              }\r\n            } else {\r\n              // \r\n              let actionArray: string[] = VE_StringFormat.paraSegment(table.getData(i, 6));\r\n              // console.log(actionArray);\r\n              if (actionArray.length === 2 || actionArray.length === 3 || actionArray.length === 4) {\r\n                let actionData: VE_StateActionData;\r\n                if (actionArray.length === 2) {\r\n                  actionData = new VE_StateActionData(actionArray[0], actionArray[1]);\r\n                } else if (actionArray.length === 3) {\r\n                  actionData = new VE_StateActionData(actionArray[0], actionArray[1], actionArray[2]);\r\n                } else {\r\n                  actionData = new VE_StateActionData(actionArray[0], actionArray[1], actionArray[2], actionArray[3]);\r\n                }\r\n                this._activeStateData.addAction(actionData, table.pos(i, 6));\r\n              } else {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 6), \"\" + table.getData(i, 6) + \"IDboolbool\", table.ID))\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n\r\n          // \r\n          if (table.getData(i, 8) !== '') {\r\n            if (this._activeFsmData === null || this._activeStateData === null) {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 8), \"\" + table.getData(i, 8) + \"\", table.ID))\r\n              return false;\r\n            }\r\n            this._activeStateData!.addAssociatedState(table.getData(i, 8), table.pos(i, 8));\r\n          }\r\n        }\r\n      }\r\n\r\n      return CreateInstance.createProject(project_name);\r\n    } else {\r\n      VE_ErrorManager.Add(VE_Error.error('', '', 'null'));\r\n      return false;\r\n    }\r\n\r\n  }\r\n\r\n\r\n}","export * from './projects';\r\nexport * from './manager';\r\nexport * from './reset';","import { VE_Projects } from \"./projects\";\r\nimport { VE_Objects } from \"../object\";\r\nimport { VE_Templates } from \"../template\";\r\nimport { VE_Variables } from \"../variables\";\r\nimport { VE_VariableData } from \"../dataSource\";\r\nimport { StateConst } from \"../state\";\r\n\r\nexport class VE_Manager {\r\n\r\n  public static get projects(): VE_Projects {\r\n    if (this._projects === null) {\r\n      this._projects = new VE_Projects();\r\n    }\r\n    return this._projects;\r\n  }\r\n  private static _projects: VE_Projects | null = null;\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public static createProject(project_name: string): void {\r\n    VE_Manager.projects.addProject(project_name);\r\n    if (!VE_Manager.projects.isCreatedObjects(project_name)) {\r\n      VE_Manager.projects.addObjects(project_name, new VE_Objects(project_name));\r\n    }\r\n    if (!VE_Manager.projects.isCreatedTemplates(project_name)) {\r\n      VE_Manager.projects.addTemplates(project_name, new VE_Templates(project_name));\r\n    }\r\n    if (!VE_Manager.projects.isCreatedVariables(project_name)) {\r\n      VE_Manager.projects.addVariables(project_name, new VE_Variables(project_name));\r\n    }\r\n  }\r\n\r\n  public static globalVarData(project_name: string): VE_VariableData {\r\n    if (!VE_Manager.projects.isCreatedGlobals(project_name)) {\r\n      VE_Manager.projects.addVariables(project_name, new VE_Variables(project_name));\r\n    }\r\n    return VE_Manager.projects.getGlobalVars(project_name);\r\n  }\r\n\r\n  public static templates(project_name: string): VE_Templates {\r\n    if (!VE_Manager.projects.isCreatedTemplates(project_name)) {\r\n      VE_Manager.projects.addTemplates(project_name, new VE_Templates(project_name));\r\n    }\r\n    return VE_Manager.projects.getTemplates(project_name);\r\n  }\r\n\r\n  public static variables(project_name: string): VE_Variables {\r\n    if (!VE_Manager.projects.isCreatedVariables(project_name)) {\r\n      VE_Manager.projects.addVariables(project_name, new VE_Variables(project_name));\r\n    }\r\n    return VE_Manager.projects.getVariables(project_name);\r\n  }\r\n\r\n  public static objects(project_name: string): VE_Objects {\r\n    if (!VE_Manager.projects.isCreatedObjects(project_name)) {\r\n      VE_Manager.projects.addObjects(project_name, new VE_Objects(project_name));\r\n    }\r\n    return VE_Manager.projects.getObjects(project_name);\r\n  }\r\n\r\n  public static clear(): void {\r\n    VE_Manager.projects.clear()\r\n    this._projects = null;\r\n  }\r\n\r\n  public static clearProject(project_name: string): void {\r\n    VE_Manager.projects.clearProject(project_name);\r\n  }\r\n\r\n  public static dispose(): void {\r\n    if (VE_Manager.projects) {\r\n      VE_Manager.clear();\r\n      StateConst.LogCount = 0;\r\n      StateConst.AssignmentFormulaCount = 0;\r\n      StateConst.TriggerCount = 0;\r\n      StateConst.ActionCount = 0;\r\n      StateConst.StateCount = 0;\r\n    }\r\n  }\r\n\r\n}","import { VE_Objects } from \"../object\";\r\nimport { VE_VariableData } from \"../dataSource\";\r\nimport { VE_Templates } from \"../template\";\r\nimport { VE_Variables } from \"../variables\";\r\n\r\n\r\nexport class VE_Projects {\r\n\r\n  private _objects: { [key: string]: VE_Objects } = {};\r\n  private _variables: { [key: string]: VE_Variables } = {};\r\n  private _templates: { [key: string]: VE_Templates } = {};\r\n\r\n  public projects: string[] = [];\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public addProject(project_name: string): void {\r\n    if (this.projects.indexOf(project_name) === -1) {\r\n      this.projects.push(project_name);\r\n    }\r\n  }\r\n\r\n  public isCreatedObjects(project_name: string): boolean {\r\n    if (this._objects[project_name]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addObjects(project_name: string, objects: VE_Objects): void {\r\n    this._objects[project_name] = objects;\r\n  }\r\n\r\n  public getObjects(project_name: string): VE_Objects {\r\n    return this._objects[project_name];\r\n  }\r\n\r\n  public isCreatedVariables(project_name: string): boolean {\r\n    if (this._variables[project_name]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addVariables(project_name: string, variables: VE_Variables): void {\r\n    this._variables[project_name] = variables;\r\n  }\r\n\r\n  public getVariables(project_name: string): VE_Variables {\r\n    return this._variables[project_name];\r\n  }\r\n\r\n  public isCreatedTemplates(project_name: string): boolean {\r\n    if (this._templates[project_name]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTemplates(project_name: string, templates: VE_Templates): void {\r\n    this._templates[project_name] = templates;\r\n  }\r\n\r\n  public getTemplates(project_name: string): VE_Templates {\r\n    return this._templates[project_name];\r\n  }\r\n\r\n  public isCreatedGlobals(project_name: string): boolean {\r\n    if (this._variables[project_name]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getGlobalVars(project_name: string): VE_VariableData {\r\n    return this._variables[project_name].varData;\r\n  }\r\n\r\n  public clear(): void {\r\n    for (let i: number = 0; i < this.projects.length; i++) {\r\n      this.disposeProject(this.projects[i]);\r\n    }\r\n    this.projects = [];\r\n  }\r\n\r\n\r\n\r\n  public clearProject(project_name: string): void {\r\n    this.disposeProject(project_name);\r\n    let index: number = this.projects.indexOf(project_name);\r\n    if (index > -1) {\r\n      this.projects.splice(index, 1);\r\n    }\r\n  }\r\n\r\n  private disposeProject(project_name: string): void {\r\n    if (this._objects[project_name]) {\r\n      this._objects[project_name].clear();\r\n    }\r\n    delete this._objects[project_name];\r\n    if (this._templates[project_name]) {\r\n      this._templates[project_name].clear();\r\n    }\r\n    delete this._templates[project_name];\r\n    if (this._variables[project_name]) {\r\n      this._variables[project_name].clear();\r\n    }\r\n    delete this._variables[project_name];\r\n  }\r\n\r\n  public sleep(): void {\r\n\r\n  }\r\n\r\n  public dispose(): void {\r\n    this.clear();\r\n  }\r\n\r\n}","import { VE_Manager } from \"./manager\";\r\n\r\nexport class VE_Reset {\r\n\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public static dispose(): void {\r\n\r\n    // \r\n    VE_Manager.clear();\r\n\r\n    // \r\n\r\n    // \r\n\r\n    // \r\n\r\n  }\r\n\r\n\r\n\r\n}","export * from './veryengineObject';\r\nexport * from './objects';","import { VeryEngineObject } from \"./veryengineObject\";\r\nimport { ArrayUtility } from \"../utility\";\r\n\r\nexport class VE_Objects {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  private _objectIDs: string[] = [];\r\n  private _objectDics: { [key: string]: VeryEngineObject } = {};\r\n\r\n  public get count(): number {\r\n    return this._objectIDs.length;\r\n  }\r\n\r\n  constructor(project_name: string) {\r\n    this._projectName = project_name;\r\n  }\r\n\r\n  public isCreated(object_id: string): boolean {\r\n    if (this._objectDics[object_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public add(object_id: string, very_object: VeryEngineObject): void {\r\n    if (!this.isCreated(object_id)) {\r\n      this._objectIDs.push(object_id);\r\n      this._objectDics[object_id] = very_object;\r\n    }\r\n  }\r\n\r\n  public getObjectID(index: number): string {\r\n    if(index >= 0 && index < this._objectIDs.length) {\r\n      return this._objectIDs[index];\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n\r\n  public getVeryObject(object_id: string): VeryEngineObject {\r\n    return this._objectDics[object_id];\r\n  }\r\n\r\n  public unloadObject(object_id: string): void {\r\n    // this._objectIDs.re\r\n    ArrayUtility.remove(this._objectIDs, object_id);\r\n    delete this._objectDics.object_id;\r\n\r\n  }\r\n\r\n  public clear(): void {\r\n    for(let i: number = 0; i < this._objectIDs.length; i++) {\r\n      let tempObject = this._objectDics[this._objectIDs[i]];\r\n      if(tempObject) {\r\n        tempObject.clear();\r\n      }\r\n    }\r\n    this._objectIDs = [];\r\n    this._objectDics = {};\r\n  }\r\n}","import { IVeryVar } from \"../variables\";\r\nimport { IExpression } from \"../expression\";\r\nimport { VE_ActionBehaviour } from \"../action\";\r\nimport { VE_TriggerBehaviour } from \"../trigger\";\r\nimport { VE_Fsm } from \"../state\";\r\nimport { VE_Template } from \"../template\";\r\nimport { VE_DataSource, VE_VariableData } from \"../dataSource\";\r\nimport { GameObject } from \"../babylon\";\r\n\r\nexport class VeryEngineObject {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = '';\r\n\r\n  public gameObject: GameObject = new GameObject('');\r\n\r\n  private _variables: { [key: string]: IVeryVar } = {};\r\n  private _expressions: { [key: string]: IExpression } = {};\r\n  private _actions: { [key: string]: VE_ActionBehaviour } = {};\r\n  private _triggers: { [key: string]: VE_TriggerBehaviour } = {};\r\n  private _fsms: { [key: string]: VE_Fsm } = {};\r\n  private _templates: { [key: string]: VE_Template } = {};\r\n\r\n  public dataSource: VE_DataSource;\r\n\r\n  public varData: VE_VariableData;\r\n\r\n\r\n\r\n  constructor(project_name: string, object_id: string, game_object: GameObject) {\r\n    this._projectName = projectName;\r\n    this._objectID = object_id;\r\n    this.gameObject = game_object;\r\n    this.dataSource = new VE_DataSource(project_name, object_id, false);\r\n    this.varData = new VE_VariableData(project_name);\r\n  }\r\n\r\n  public isCreatedFsm(fsm_id: string): boolean {\r\n    if (this._fsms[fsm_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addFsm(fsm_id: string, fsm: VE_Fsm): void {\r\n    this._fsms[fsm_id] = fsm;\r\n  }\r\n\r\n  public getFsm(fsm_id: string): VE_Fsm {\r\n    return this._fsms[fsm_id];\r\n  }\r\n\r\n  public isCreatedTrigger(trigger_id: string): boolean {\r\n    if (this._triggers[trigger_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTrigger(trigger_id: string, trigger: VE_TriggerBehaviour): void {\r\n    this._triggers[trigger_id] = trigger;\r\n  }\r\n\r\n  public getTrigger(trigger_id: string): VE_TriggerBehaviour {\r\n    return this._triggers[trigger_id];\r\n  }\r\n\r\n  public isCreatedAction(action_id: string): boolean {\r\n    if (this._actions[action_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addAction(action_id: string, action: VE_ActionBehaviour): void {\r\n    this._actions[action_id] = action;\r\n  }\r\n\r\n  public getAction(action_id: string): VE_ActionBehaviour {\r\n    return this._actions[action_id];\r\n  }\r\n\r\n  public isCreatedVariable(var_id: string): boolean {\r\n    if (this._variables[var_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addVariable(var_id: string, variable: IVeryVar): void {\r\n    this._variables[var_id] = variable;\r\n  }\r\n\r\n  public getVariable(var_id: string): IVeryVar {\r\n    return this._variables[var_id];\r\n  }\r\n\r\n  public isCreatedExpression(exp_id: string): boolean {\r\n    if (this._expressions[exp_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addExpression(exp_id: string, expression: IExpression): void {\r\n    this._expressions[exp_id] = expression;\r\n  }\r\n\r\n  public getExpression(exp_id: string): IExpression {\r\n    return this._expressions[exp_id];\r\n  }\r\n\r\n  public isCreatedTemplate(template_id: string): boolean {\r\n    if (this._templates[template_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTemplate(template_id: string, template: VE_Template): void {\r\n    this._templates[template_id] = template;\r\n  }\r\n\r\n  public getTemplate(template_id: string): VE_Template {\r\n    return this._templates[template_id];\r\n  }\r\n\r\n  public isCreatedVar(var_id: string): boolean {\r\n    if (this._variables[var_id] || this._expressions[var_id] || this._templates[var_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // getState(fsm_id: string, index: number): VE_State {\r\n\r\n  // }\r\n\r\n  // TODO\r\n  public unload(): void { \r\n\r\n  }\r\n\r\n  // setUnloadCallback(callback): void {}\r\n\r\n\r\n  public update(): void {\r\n    // trigger update\r\n    Object.keys(this._triggers).forEach( key => {\r\n      this._triggers[key].update();\r\n    })\r\n    // action update\r\n    Object.keys(this._actions).forEach( key => {\r\n      this._actions[key].update();\r\n    })\r\n    // TODO: template\r\n    \r\n  }\r\n\r\n\r\n  public clear(): void {\r\n\r\n    if (this.dataSource) {\r\n      this.dataSource.clear();\r\n    }\r\n    if (this.varData) {\r\n      this.varData.clear();\r\n    }\r\n    this._variables = {};\r\n    this._expressions = {};\r\n\r\n    if (this._templates) {\r\n      Object.keys(this._templates).forEach(key => {\r\n        this._templates[key].clear();\r\n      })\r\n      this._templates = {};\r\n    }\r\n\r\n    this._fsms = {};\r\n\r\n    if (this._actions) {\r\n      Object.keys(this._actions).forEach(key => {\r\n        this._actions[key].destroy();\r\n      })\r\n      this._actions = {};\r\n    }\r\n\r\n    if (this._triggers) {\r\n      Object.keys(this._triggers).forEach(key => {\r\n        this._triggers[key].destroy();\r\n      })\r\n      this._triggers = {};\r\n    }\r\n  }\r\n\r\n\r\n}","export * from './verySceneVariables';","import { VE_Variables } from \"../variables\";\r\n\r\nexport class VerySceneVariables {\r\n\r\n  public static get Variables(): VE_Variables {\r\n    if(VerySceneVariables._variables === null) {\r\n      VerySceneVariables._variables = new VE_Variables('__scene_varibale__');\r\n    }\r\n    return VerySceneVariables._variables;\r\n  }\r\n  private static _variables: Nullable<VE_Variables> = null;\r\n\r\n  public static get HasLoaded(): boolean {\r\n    return this._hasLoaded;\r\n  }\r\n  private static _hasLoaded: boolean = false;\r\n\r\n  public static initIfNeeded(): void {\r\n    if(!this._hasLoaded) {\r\n      console.log('TODO: ');\r\n    }\r\n  }\r\n}","import { VE_State } from \"./state\";\r\nimport { AssociatedFsmType } from \"../enum\";\r\nimport { VE_Template } from \"../template\";\r\nimport { StateConst } from \"./stateConst\";\r\nimport { VE_Fsm } from \"./fsm\";\r\n\r\nexport class VE_AssociatedState {\r\n\r\n  private _types: AssociatedFsmType[] = [];\r\n  private _indexs: number[] = [];\r\n\r\n  private _posArray: string[] = [];\r\n\r\n  private _stateValues: { [key: number]: string } = {};\r\n  private _states: { [key: number]: VE_State } = {};\r\n  private _templates: { [key: number]: VE_Template } = {};\r\n  private _templateFsmIDs: { [key: number]: string } = {};\r\n\r\n  public get FromState(): VE_State {\r\n    return this._fromState;\r\n  }\r\n  private _fromState: VE_State;\r\n\r\n  constructor(from_state: VE_State) {\r\n    this._fromState = from_state;\r\n  }\r\n\r\n  public add(state: VE_State, state_value: string, pos: string): void {\r\n    this._types.push(AssociatedFsmType.Object);\r\n    let key: number = this._types.length;\r\n    this._indexs.push(key);\r\n    this._stateValues[key] = state_value;\r\n    this._states[key] = state;\r\n    this._posArray.push(pos);\r\n  }\r\n\r\n  public addTemplate(template: VE_Template, fsm_id: string, state_value: string, pos: string): void {\r\n    this._types.push(AssociatedFsmType.Template);\r\n    let key: number = this._types.length;\r\n    this._indexs.push(key);\r\n    this._stateValues[key] = state_value;\r\n    this._templates[key] = template;\r\n    this._templateFsmIDs[key] = fsm_id;\r\n    this._posArray.push(pos);\r\n  }\r\n\r\n  public connect(): void {\r\n    for (let i: number = 0; i < this._types.length; i++) {\r\n      let currentType: AssociatedFsmType = this._types[i];\r\n      let Key: number = this._indexs[i];\r\n\r\n      // \r\n      if (currentType === AssociatedFsmType.Object) {\r\n        let toState: VE_State = this._states[Key];\r\n        if (toState.logicalAssociated === null || toState.logicalAssociated.evaluate() === true) {\r\n          toState.action(StateConst.ASSOCIATED_STATE_PREFIX + this._fromState.Fsm.ID);\r\n          // \r\n          return;\r\n        }\r\n      }\r\n      // State\r\n      else {\r\n        let template: VE_Template = this._templates[Key];\r\n        let fsmID: string = this._templateFsmIDs[Key];\r\n        let stateValue: string = this._stateValues[Key];\r\n\r\n        if (template.templateInstance !== null) {\r\n          if (template.templateInstance.isCreatedFsm(fsmID)) {\r\n            let fsm: VE_Fsm = template.templateInstance.getFsm(fsmID);\r\n            let toState: Nullable<VE_State> = fsm.getState(stateValue);\r\n            if (toState !== null) {\r\n              toState.action(StateConst.ASSOCIATED_STATE_PREFIX + this._fromState.Fsm.ID);\r\n              //\r\n              return;\r\n            }\r\n            else {\r\n              console.error(' >>> ' + this._posArray[i] + '' + \"\" + this._fromState.Fsm.projectName + \"\" + this._fromState.Fsm.objectID + \"\" + this._fromState.Fsm.fsmID + \"\" + template.templateVarID + \"\" + fsmID + \"\" + stateValue + \"\");\r\n              return;\r\n            }\r\n          }\r\n          else {\r\n            console.error(' >>> ' + this._posArray[i] + '' + \"\" + this._fromState.Fsm.projectName + \"\" + this._fromState.Fsm.objectID + \"\" + this._fromState.Fsm.fsmID + \"\" + template.templateVarID + \"\" + fsmID + \"\");\r\n            return;\r\n          }\r\n        }\r\n        else {\r\n          console.error(' >>> ' + this._posArray[i] + '' + \"\" + this._fromState.Fsm.projectName + \"\" + this._fromState.Fsm.objectID + \"\" + this._fromState.Fsm.fsmID + \"\" + template.templateVarID + \"\");\r\n          return;\r\n        }\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n\r\n}","import { VE_State } from \"./state\";\r\nimport { BabylonEngine } from \"../babylon\";\r\nimport { StateConst } from \"./stateConst\";\r\nimport { IVeryVar, VeryString } from \"../variables\";\r\nimport { VeryEngineObject } from \"../object\";\r\n\r\nexport class VE_Fsm {\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = \"\";\r\n\r\n  public get ID(): string {\r\n    return this._id;\r\n  }\r\n  private _id: string = \"\";\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = \"\";\r\n\r\n  public get fsmID(): string {\r\n    return this._fsmID;\r\n  }\r\n  private _fsmID: string = \"\";\r\n\r\n  public get fsmVar(): VeryString {\r\n    return this._fsmVar;\r\n  }\r\n  private _fsmVar: VeryString;\r\n\r\n  public get VeryObject(): VeryEngineObject {\r\n    return this._veryObject;\r\n  }\r\n  private _veryObject: VeryEngineObject;\r\n\r\n  private _stateDics: { [key: number]: VE_State } = {};\r\n  private _states: VE_State[] = [];\r\n\r\n  public get count(): number {\r\n    return this._states.length;\r\n  }\r\n\r\n  private _frameCount: number = -1;\r\n  private _triggerIDs: string[] = [];\r\n\r\n  constructor(\r\n    project_name: string,\r\n    object_id: string,\r\n    fsm_id: string,\r\n    fsm_variable: VeryString,\r\n    very_object: VeryEngineObject\r\n  ) {\r\n    this._projectName = project_name;\r\n    this._objectID = object_id;\r\n    this._fsmID = fsm_id;\r\n    this._fsmVar = fsm_variable;\r\n    this._veryObject = very_object;\r\n  }\r\n\r\n  public isCreatedState(state_index: number): boolean {\r\n    if (this._stateDics[state_index]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addState(state: VE_State): void {\r\n    this._states.push(state);\r\n  }\r\n\r\n  public getState(state_value: string): Nullable<VE_State> {\r\n    for(let i: number = 0; i < this._states.length; i++) {\r\n      if(this._states[i].Value === state_value) {\r\n        return this._states[i];\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  // public getState(state_index: number): Nullable<VE_State> {\r\n  //   if (state_index === StateConst.STATE_INDEX) {\r\n  //     return this._states[0];\r\n  //   } else {\r\n  //     if (this._stateDics[state_index]) {\r\n  //       return this._stateDics[state_index];\r\n  //     } else {\r\n  //       return null;\r\n  //     }\r\n  //   }\r\n  // }\r\n\r\n  public getStateInSequence(index: number): Nullable<VE_State> {\r\n    if (index >= 0 && index < this._states.length) {\r\n      return this._states[index];\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public removeState(state_index: number): void {\r\n    delete this._stateDics[state_index];\r\n  }\r\n\r\n  public receiveEvent(trigger_id: string): boolean {\r\n\r\n    if (BabylonEngine.Scene.getFrameId() != this._frameCount) {\r\n      this._frameCount = BabylonEngine.Scene.getFrameId();\r\n      this._triggerIDs = [];\r\n      this._triggerIDs.push(trigger_id);\r\n      return true;\r\n    } else {\r\n      if (trigger_id.startsWith(StateConst.ASSOCIATED_STATE_PREFIX)) {\r\n        // console.log(`ID: ${trigger_id} Return True`);\r\n        return true;\r\n      } else {\r\n        if (this._triggerIDs.indexOf(trigger_id) !== -1) {\r\n          return false;\r\n        } else {\r\n          this._triggerIDs.push(trigger_id);\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public setValue(value: any): void {\r\n    this._fsmVar.setValue(value);\r\n  }\r\n\r\n  public hasStateValue(val: string): boolean {\r\n    for (let i = 0; i < this._states.length; i++) {\r\n      if (this._states[i].Value === val) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n}\r\n","export * from './state';\r\nexport * from './fsm';\r\nexport * from './stateAction';\r\nexport * from './associatedState';\r\nexport * from './stateConst';\r\nexport * from './sequenceActions';","import { SequenceActionState, StateActionType, ActionType } from \"../enum\";\r\nimport { VE_StateAction } from \"./stateAction\";\r\nimport { VE_AssociatedState } from \"./associatedState\";\r\nimport { VE_ActionBehaviour } from \"../action\";\r\nimport { BabylonEngine } from \"../babylon\";\r\n\r\nexport class VE_SequenceActions {\r\n\r\n  public get sequenceState(): SequenceActionState {\r\n    return this._sequenceState;\r\n  }\r\n  private _sequenceState: SequenceActionState = SequenceActionState.Initial;\r\n\r\n  private _activeActionIndex: number = -1;\r\n\r\n  public get StateActions(): VE_StateAction[] {\r\n    return this._stateActions;\r\n  }\r\n  private _stateActions: VE_StateAction[] = [];\r\n\r\n  public get ActiveActions(): VE_StateAction[] {\r\n    return this._activeActions;\r\n  }\r\n  private _activeActions: VE_StateAction[] = [];\r\n\r\n  public get AssociatedStates(): VE_AssociatedState[] {\r\n    return this._associatedStates;\r\n  }\r\n  private _associatedStates: VE_AssociatedState[] = [];\r\n\r\n  private _observer: Nullable<BABYLON.Observer<BABYLON.Scene>> = null;\r\n\r\n\r\n  public sequenceAction(actions: VE_StateAction[], associated_states: VE_AssociatedState[]) {\r\n    //this._actionDic.Clear();\r\n    this._activeActions = [];\r\n    this._stateActions = [];\r\n    this._associatedStates = [];\r\n    this._sequenceState = SequenceActionState.Running;\r\n    for (let i: number = 0; i < actions.length; i++) {\r\n      if (actions[i].type === StateActionType.Action && actions[i].action!.type === ActionType.Animation) {\r\n        actions[i].action!.SequenceState = SequenceActionState.Prepared;\r\n      }\r\n      this._stateActions.push(actions[i]);\r\n    }\r\n    for (let i: number = 0; i < associated_states.length; i++) {\r\n      this._associatedStates.push(associated_states[i]);\r\n    }\r\n    if (this.activate(0)) {\r\n      this.checkActionsFinished();\r\n    }\r\n\r\n    this._observer = BabylonEngine.Scene.onBeforeRenderObservable.add(() => {\r\n      this.update();\r\n    });\r\n  }\r\n\r\n  private activate(start_index: number): boolean {\r\n    for (let i: number = start_index; i < this.StateActions.length; i++) {\r\n      this._activeActionIndex = i;\r\n      if (this.StateActions[i].type === StateActionType.Assignment) {\r\n        this.StateActions[i].assignment!.assign();\r\n      }\r\n      else {\r\n        let action: VE_ActionBehaviour = this.StateActions[i].action!;\r\n        if (action.type === ActionType.Normal || !action.isSequence) {\r\n          action.action(this.StateActions[i].enabled.getValue(), this.StateActions[i].everyFrame.getValue());\r\n        }\r\n        else {\r\n          this.ActiveActions.push(this.StateActions[i]);\r\n          action.sequenceAction(this, this.StateActions[i].enabled.getValue(), this.StateActions[i].everyFrame.getValue());\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n\r\n  public pause(): void {\r\n    if (this.ActiveActions.length > 0) {\r\n      this._sequenceState = SequenceActionState.Pause;\r\n      this.ActiveActions[0].action!.pause();\r\n    }\r\n  }\r\n\r\n  public resume(): void {\r\n    if (this.ActiveActions.length > 0) {\r\n      this._sequenceState = SequenceActionState.Running;\r\n      this.ActiveActions[0].action!.resume();\r\n    }\r\n  }\r\n\r\n\r\n  public stop(): void {\r\n    if (this.ActiveActions.length > 0) {\r\n      this._sequenceState = SequenceActionState.Initial;\r\n      this.ActiveActions[0].action!.stop();\r\n      this.actionRecover();\r\n      // \r\n      this.destroy();\r\n    }\r\n  }\r\n\r\n  private checkActionsFinished(): void {\r\n    if (this.ActiveActions.length == 0 && (++this._activeActionIndex >= this.StateActions.length || this.activate(this._activeActionIndex))) {\r\n      this._sequenceState = SequenceActionState.Initial;\r\n      this.actionRecover();\r\n      // Debug.Log(this.AssociatedStates.Count);\r\n      // \r\n      if (this.AssociatedStates.length > 0) {\r\n        for (let i: number = 0; i < this.AssociatedStates.length; i++) {\r\n          this.AssociatedStates[i].connect();\r\n        }\r\n        // \r\n        this.destroy();\r\n      }\r\n    }\r\n  }\r\n\r\n  private actionRecover(): void {\r\n    for (let i: number = 0; i < this.StateActions.length; i++) {\r\n      if (this.StateActions[i].type === StateActionType.Action && this.StateActions[i].action!.type === ActionType.Animation) {\r\n        this.StateActions[i].action!.SequenceState = SequenceActionState.Initial;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public finishAction(action: VE_ActionBehaviour): void {\r\n    if (this.ActiveActions.length > 0) {\r\n      for (let i: number = 0; i < this.ActiveActions.length; i++) {\r\n        if (this.ActiveActions[i].type === StateActionType.Action && this.ActiveActions[i].action === action) {\r\n          this._activeActions.splice(i, 1);\r\n          return;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  private update(): void {\r\n    if (this._sequenceState === SequenceActionState.Running) {\r\n      // this.StateTime += Time.deltaTime;\r\n      this.checkActionsFinished();\r\n    }\r\n  }\r\n\r\n  public destroy(): void {\r\n    if (this._observer) {\r\n      BabylonEngine.Scene.onBeforeRenderObservable.remove(this._observer);\r\n    }\r\n    this._observer = null;\r\n  }\r\n\r\n}","import { VE_Fsm } from \"./fsm\";\r\nimport { VE_StateAction } from \"./stateAction\";\r\nimport { VE_AssociatedState } from \"./associatedState\";\r\nimport {\r\n  AssignmentType,\r\n  StateActionType,\r\n  ActionType,\r\n  SequenceActionState\r\n} from \"../enum\";\r\nimport { VE_Template } from \"../template\";\r\nimport { IVeryVar, VeryExpression } from \"../variables\";\r\nimport { IExpression } from \"../expression\";\r\nimport { VE_Assignment } from \"../action\";\r\nimport { VE_SequenceActions } from \"./sequenceActions\";\r\n\r\nexport class VE_State {\r\n  public get Fsm(): VE_Fsm {\r\n    return this._fsm;\r\n  }\r\n  private _fsm: VE_Fsm;\r\n\r\n  public get isInitialValue(): boolean {\r\n    return this._isInitialValue;\r\n  }\r\n  private _isInitialValue: boolean = false;\r\n\r\n  public get Value(): string {\r\n    return this._value;\r\n  }\r\n  private _value: string = \"\";\r\n\r\n  private _assignmentType: AssignmentType = AssignmentType.Const;\r\n\r\n  public get isTemplateVar(): boolean {\r\n    return this._isTemplateVar;\r\n  }\r\n  private _isTemplateVar: boolean = false;\r\n\r\n  private _template: Nullable<VE_Template> = null;\r\n  private _varID: string = \"\";\r\n  private _templateVar: Nullable<IVeryVar> = null;\r\n  private _assignmentStr: string = \"\";\r\n\r\n  public get logicalExpression(): Nullable<IExpression> {\r\n    return this._logicalExpression;\r\n  }\r\n  private _logicalExpression: Nullable<IExpression> = null;\r\n\r\n  public get index(): number {\r\n    return this._index;\r\n  }\r\n  private _index: number = 0;\r\n\r\n  public get stateVariable(): Nullable<IVeryVar> {\r\n    return this._stateVariable;\r\n  }\r\n  private _stateVariable: Nullable<IVeryVar> = null;\r\n\r\n  public logicalAssociated: Nullable<IExpression> = null;\r\n\r\n  private _stateActions: VE_StateAction[] = [];\r\n  private _associatedStates: VE_AssociatedState[] = [];\r\n\r\n  public get IsSequence(): boolean {\r\n    return this._isSequence;\r\n  }\r\n  private _isSequence: boolean = false;\r\n\r\n  public _sequenceActions: VE_SequenceActions = new VE_SequenceActions();\r\n\r\n  // \r\n  // 1.\r\n\r\n  constructor(fsm: VE_Fsm, index: number) {\r\n    this._fsm = fsm;\r\n    this._index = index;\r\n  }\r\n\r\n  public setInitialValue(value: any): void {\r\n    this._value = value;\r\n    this._assignmentType = AssignmentType.Const;\r\n  }\r\n\r\n  public setSequence(): void {\r\n    this._isSequence = true;\r\n  }\r\n\r\n  public setLogicalExpression(logical_exp: IExpression): void {\r\n    this._logicalExpression = logical_exp;\r\n  }\r\n\r\n  public setTemplateInfo(\r\n    template: VE_Template,\r\n    var_id: string,\r\n    assign_str: string\r\n  ): void {\r\n    this._isTemplateVar = true;\r\n    this._template = template;\r\n    this._varID = var_id;\r\n    this._assignmentStr = assign_str;\r\n  }\r\n\r\n  public setConstValue(value: any): void {\r\n    this._value = value;\r\n    this._assignmentType = AssignmentType.Const;\r\n  }\r\n\r\n  public setStateVariable(very_var: IVeryVar): void {\r\n    this._stateVariable = very_var;\r\n    this._assignmentType = AssignmentType.Variable;\r\n  }\r\n\r\n  public addAction(state_action: VE_StateAction): void {\r\n    this._stateActions.push(state_action);\r\n    if (\r\n      state_action.type === StateActionType.Action &&\r\n      state_action.action!.isSequence\r\n    ) {\r\n      this._isSequence = true;\r\n    }\r\n  }\r\n\r\n  public addAssignment(assignment: VE_Assignment): void {\r\n    let stateAction: VE_StateAction = new VE_StateAction();\r\n    stateAction.setAssignment(assignment);\r\n    this._stateActions.push(stateAction);\r\n  }\r\n\r\n  public addAssociatedState(associated_state: VE_AssociatedState): void {\r\n    this._associatedStates.push(associated_state);\r\n  }\r\n\r\n\r\n  public action(trigger_id: string): void {\r\n    // Parent\r\n    if (this._fsm.receiveEvent(trigger_id)) {\r\n      // \r\n      this.Fsm.setValue(this.Value);\r\n\r\n      if (!this._isSequence) {\r\n        // \r\n        for (let i: number = 0; i < this._stateActions.length; i++) {\r\n          let stateAction: VE_StateAction = this._stateActions[i];\r\n          // \r\n          if (stateAction.type === StateActionType.Action) {\r\n            // TODO: \r\n            stateAction!.action!.action(\r\n              stateAction.enabled.getValue(),\r\n              stateAction.everyFrame.getValue()\r\n            );\r\n          }\r\n          // \r\n          else {\r\n            stateAction!.assignment!.assign();\r\n          }\r\n        }\r\n        // \r\n        if (this._associatedStates.length > 0) {\r\n          // \r\n          // \r\n          for (let i: number = 0; i < this._associatedStates.length; i++) {\r\n            this._associatedStates[i].connect();\r\n          }\r\n        }\r\n      } else {\r\n        // \r\n        for (let i: number = 0; i < this._stateActions.length; i++) {\r\n          //\r\n          if (this._stateActions[i].type === StateActionType.Action && this._stateActions[i]!.action!.type === ActionType.Animation\r\n          ) {\r\n            if (this._stateActions[i]!.action!.SequenceState === SequenceActionState.Prepared || this._stateActions[i]!.action!.SequenceState === SequenceActionState.Running\r\n            ) {\r\n              console.error(\r\n                \" >>> \" +\r\n                this._fsm.projectName +\r\n                \"\" +\r\n                this._fsm.objectID +\r\n                \"\" +\r\n                this._fsm.fsmID +\r\n                \"ID\" +\r\n                this._index +\r\n                \"\" +\r\n                this._stateActions[i]!.action!.actionID +\r\n                \"\"\r\n              );\r\n              return;\r\n            } else if (this._stateActions[i]!.action!.SequenceState === SequenceActionState.Pause) {\r\n              console.error(\r\n                \" >>> \" +\r\n                this._fsm.projectName +\r\n                \"\" +\r\n                this._fsm.objectID +\r\n                \"\" +\r\n                this._fsm.fsmID +\r\n                \"ID\" +\r\n                this._index +\r\n                \"\" +\r\n                this._stateActions[i]!.action!.actionID +\r\n                \"\"\r\n              );\r\n              return;\r\n            }\r\n          }\r\n        }\r\n\r\n        this._sequenceActions!.sequenceAction(this._stateActions, this._associatedStates);\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  /*\r\n  // TODO\r\n  public action(trigger_id: string): void {\r\n    // Parent\r\n    if (this._fsm.receiveEvent(trigger_id)) {\r\n      if (this._isTemplateVar) {\r\n        // TODO:null\r\n        if (this._templateVar === null) {\r\n          this.getTemplateVar();\r\n        } else {\r\n          if (this._templateVar.className === \"VeryExpression\") {\r\n            // TODO\r\n            if ((<VeryExpression>this._templateVar).isNull) {\r\n              this.getTemplateVar();\r\n            } else {\r\n              this.Fsm.setValue(this._templateVar.getValue());\r\n            }\r\n          } else {\r\n            this.Fsm.setValue(this._templateVar.getValue());\r\n          }\r\n        }\r\n      } else {\r\n        // \r\n        if (this._assignmentType == AssignmentType.Const) {\r\n          // \r\n          this.Fsm.setValue(this.Value);\r\n        } else if (this._assignmentType == AssignmentType.Variable) {\r\n          // \r\n          this.Fsm.setValue(this._stateVariable!.getValue());\r\n        } // \r\n        else {\r\n          // \r\n          // this.Fsm.setValue(this._stateExpression.evaluate());\r\n        }\r\n      }\r\n\r\n      // \r\n      for (let i: number = 0; i < this._stateActions.length; i++) {\r\n        //\r\n        if (\r\n          this._stateActions[i].type === StateActionType.Action &&\r\n          this._stateActions[i]!.action!.Type === ActionType.Animation\r\n        ) {\r\n          if (\r\n            this._stateActions[i]!.action!.SequenceState ===\r\n            SequenceActionState.Prepared ||\r\n            this._stateActions[i]!.action!.SequenceState ===\r\n            SequenceActionState.Running\r\n          ) {\r\n            console.error(\r\n              \" >>> \" +\r\n              this._fsm.projectName +\r\n              \"\" +\r\n              this._fsm.objectID +\r\n              \"\" +\r\n              this._fsm.fsmID +\r\n              \"ID\" +\r\n              this._index +\r\n              \"\" +\r\n              this._stateActions[i]!.action!.actionID +\r\n              \"\"\r\n            );\r\n            return;\r\n          } else if (\r\n            this._stateActions[i]!.action!.SequenceState ===\r\n            SequenceActionState.Pause\r\n          ) {\r\n            console.error(\r\n              \" >>> \" +\r\n              this._fsm.projectName +\r\n              \"\" +\r\n              this._fsm.objectID +\r\n              \"\" +\r\n              this._fsm.fsmID +\r\n              \"ID\" +\r\n              this._index +\r\n              \"\" +\r\n              this._stateActions[i]!.action!.actionID +\r\n              \"\"\r\n            );\r\n            return;\r\n          }\r\n        }\r\n\r\n        //, TODO: \r\n        if (this._isSequence) {\r\n          // TODO: \r\n          console.log('');\r\n          // this._sequenceActions = this._fsm.VeryObject.gameObject.AddComponent<\r\n          //   VE_SequenceActions\r\n          // >();\r\n          // this._sequenceActions!.sequenceAction(\r\n          //   this._stateActions,\r\n          //   this._associatedStates\r\n          // );\r\n        } else {\r\n          // \r\n          for (let i: number = 0; i < this._stateActions.length; i++) {\r\n            let stateAction: VE_StateAction = this._stateActions[i];\r\n            // \r\n            if (stateAction.type === StateActionType.Action) {\r\n              // TODO: \r\n              stateAction!.action!.action(\r\n                stateAction.enabled,\r\n                stateAction.everyFrame\r\n              );\r\n            }\r\n            // \r\n            else {\r\n              stateAction!.assignment!.assign();\r\n            }\r\n          }\r\n          // \r\n          if (this._assocaitedStates.length > 0) {\r\n            // \r\n            // \r\n            for (let i: number = 0; i < this._assocaitedStates.length; i++) {\r\n              this._assocaitedStates[i].connect();\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  */\r\n\r\n  private getTemplateVar(): void {\r\n    if (this._template!.templateInstance === null) {\r\n      console.error(\r\n        \" >>> \" +\r\n        this._fsm.projectName +\r\n        \"\" +\r\n        this._fsm.objectID +\r\n        \"\" +\r\n        this._fsm.fsmID +\r\n        \"\" +\r\n        this._assignmentStr +\r\n        \"\"\r\n      );\r\n      this._templateVar = null;\r\n      return;\r\n    } else {\r\n      if (this._template!.templateInstance.isCreatedVariable(this._varID)) {\r\n        this._templateVar = this._template!.templateInstance.getVariable(\r\n          this._varID\r\n        );\r\n      } else if (\r\n        this._template!.templateInstance.isCreatedExpression(this._varID)\r\n      ) {\r\n        this._templateVar = new VeryExpression(\r\n          this._template!.templateInstance.getExpression(this._varID)\r\n        );\r\n      } else if (this._template!.templateInstance.isCreatedFsm(this._varID)) {\r\n        this._templateVar = this._template!.templateInstance.getFsm(\r\n          this._varID\r\n        ).fsmVar;\r\n      } else {\r\n        console.error(\r\n          \" >>> \" +\r\n          this._fsm.projectName +\r\n          \"\" +\r\n          this._fsm.objectID +\r\n          \"\" +\r\n          this._fsm.fsmID +\r\n          \"\" +\r\n          this._assignmentStr +\r\n          \"\" +\r\n          this._varID +\r\n          \"\"\r\n        );\r\n        this._templateVar = null;\r\n        return;\r\n      }\r\n      this._fsm.setValue(this._templateVar.getValue());\r\n    }\r\n  }\r\n}\r\n","\r\nimport { VE_ActionBehaviour } from \"../action/actionBehaviour\";\r\nimport { StateActionType } from \"../enum\";\r\nimport { VE_Assignment } from \"../action\";\r\nimport { IVeryVar, VeryBool } from \"../variables\";\r\n\r\nexport class VE_StateAction {\r\n\r\n  public get type(): StateActionType {\r\n    return this._type;\r\n  }\r\n  private _type: StateActionType = StateActionType.Action;\r\n\r\n  public get action(): Nullable<VE_ActionBehaviour> {\r\n    return this._action;\r\n  }\r\n  private _action: Nullable<VE_ActionBehaviour> = null;\r\n\r\n  public get enabled(): IVeryVar {\r\n    return this._enabled;\r\n  }\r\n  private _enabled: IVeryVar;\r\n\r\n  public get everyFrame(): IVeryVar {\r\n    return this._everyFrame;\r\n  }\r\n  private _everyFrame: IVeryVar;\r\n\r\n  public get assignment(): Nullable<VE_Assignment> {\r\n    return this._assignment;\r\n  }\r\n  private _assignment: Nullable<VE_Assignment> = null;\r\n\r\n  constructor() {\r\n    this._enabled = new VeryBool();\r\n    this._everyFrame = new VeryBool();\r\n  }\r\n\r\n  public setAction(action: VE_ActionBehaviour, enabled: IVeryVar = new VeryBool(), every_frame: IVeryVar = new VeryBool(), sequence: boolean = false): void {\r\n    this._action = action;\r\n    this._enabled = enabled;\r\n    this._everyFrame = every_frame;\r\n    this._action.isSequence = sequence;\r\n    this._type = StateActionType.Action; \r\n  }\r\n\r\n  public setAssignment(assignment: VE_Assignment): void {\r\n    this._assignment = assignment;\r\n    this._type = StateActionType.Assignment; \r\n  }\r\n\r\n\r\n}","export class StateConst {\r\n\r\n  public static readonly STATE_SEPARATOR: string = '.';\r\n  public static readonly ASSOCIATED_STATE_PREFIX: string = ':';\r\n  public static readonly VARIABLE_SYMBOL: string = '*';\r\n  public static readonly STATE_INDEX: number = -1;\r\n  public static LogCount: number = 0;\r\n\r\n  public static readonly AssignmentPrefix: string = '_';\r\n  public static AssignmentFormulaCount: number = 0;\r\n\r\n  public static TriggerCount: number = 0;\r\n  public static ActionCount: number = 0;\r\n  public static StateCount: number = 0;\r\n  public static readonly STATE_VALUE: string = '';\r\n\r\n}","export * from './template';\r\nexport * from './templates';","import { VeryEngineObject } from \"../object\";\r\nimport { VE_DataSource, VE_VariableData } from \"../dataSource\";\r\n\r\nexport class VE_Template {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  public get templateID(): string {\r\n    return this._templateID;\r\n  }\r\n  private _templateID: string = '';\r\n\r\n  public get templateVarID(): string {\r\n    return this._templateVarID;\r\n  }\r\n  private _templateVarID: string = '';\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = '';\r\n\r\n  public templateInstance: Nullable<VeryEngineObject> = null;\r\n\r\n  public backupInstances: VeryEngineObject[] = [];\r\n\r\n  public dataSource: VE_DataSource;\r\n\r\n  public varData: VE_VariableData;\r\n\r\n  public instanceCount(): number {\r\n    return this._instanceCount;\r\n  }\r\n  private _instanceCount: number = 0;\r\n\r\n\r\n  constructor(project_name: string, template_id: string) {\r\n    this._projectName = project_name;\r\n    this._templateID = template_id;\r\n    this.dataSource = new VE_DataSource(project_name, template_id, true);\r\n    this.varData = new VE_VariableData(project_name);\r\n  }\r\n\r\n  public setInstance(instance_obj: Nullable<VeryEngineObject>): void {\r\n    this.templateInstance = instance_obj;\r\n  }\r\n\r\n  public isCreatedVariable(var_id: string): boolean {\r\n    return this.varData.isCreatedVariable(var_id);\r\n  }\r\n\r\n  public addVariable(var_id: string, var_paras: string[], pos: string): void {\r\n    this.varData.addVariable(var_id, var_paras, pos);\r\n  }\r\n\r\n  public increase(): void {\r\n    this._instanceCount++;\r\n  }\r\n\r\n  public unload(): void {\r\n    //TODO: \r\n  }\r\n\r\n  public clone(object_id: string, template_var_id: string): VE_Template {\r\n    let cloneTemplate: VE_Template = new VE_Template(this._projectName, this._templateID);\r\n    cloneTemplate._objectID = object_id;\r\n    cloneTemplate._templateVarID = template_var_id;\r\n    cloneTemplate.dataSource = this.dataSource;\r\n    cloneTemplate.varData = this.varData;\r\n    cloneTemplate._instanceCount = this._instanceCount;\r\n    return cloneTemplate;\r\n  }\r\n\r\n  public clear(): void {\r\n    if (this.dataSource) {\r\n      this.dataSource.clear();\r\n    }\r\n    if (this.varData) {\r\n      this.varData.clear();\r\n    }\r\n    if (this.templateInstance) {\r\n      this.templateInstance.clear();\r\n    }\r\n  }\r\n\r\n}","import { VE_Template } from \"./template\";\r\nimport { ErrorInfo } from \"../utility\";\r\nimport { StateConst } from \"../state\";\r\nimport { GameObject } from \"../babylon\";\r\nimport { VE_Objects, VeryEngineObject } from \"../object\";\r\nimport { VE_Manager } from \"../manager\";\r\n\r\nexport class VE_Templates {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  private _templateDic: { [key: string]: VE_Template } = {};\r\n\r\n  private _instanceDic: { [key: string]: { [key: string]: VE_Template } } = {};\r\n\r\n\r\n  constructor(project_name: string) {\r\n    this._projectName = project_name;\r\n  }\r\n\r\n  public isCreatedTemplate(template_id: string): boolean {\r\n    if (this._templateDic[template_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTemplate(template_id: string, template: VE_Template): void {\r\n    this._templateDic[template_id] = template;\r\n  }\r\n\r\n  public getTemplate(template_id: string): VE_Template {\r\n    return this._templateDic[template_id];\r\n  }\r\n\r\n  public isCreatedInstance(object_id: string, var_id: string): boolean {\r\n    if (this._instanceDic[object_id] && this._instanceDic[object_id][var_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getInstance(object_id: string, var_id: string): VE_Template {\r\n    return this._instanceDic[object_id][var_id];\r\n  }\r\n\r\n  // public getState(var_id: string, state_id: string, index: number): VE_State {\r\n\r\n  // } \r\n\r\n  public clear(): void {\r\n    if (this._templateDic) {\r\n      Object.keys(this._templateDic).forEach(key => {\r\n        this._templateDic[key].clear();\r\n      })\r\n      this._templateDic = {};\r\n    }\r\n  }\r\n\r\n  // TODO\r\n  public createInstance(object_id: string, var_id: string, template: VE_Template, object_name: string, error_info: ErrorInfo, destory_on_create_new: boolean): Nullable<VE_Template> {\r\n\r\n    let errorPos: string = \"\" + this._projectName + \"\" + object_id + \"\" + var_id + \"\" + template.templateID + \"\";\r\n\r\n    // \r\n    if (template.templateInstance !== null && destory_on_create_new) {\r\n      template.templateInstance.unload();\r\n      template.setInstance(null);\r\n    } else {\r\n      // TODO: backup\r\n\r\n    }\r\n\r\n    // 1GameObject312ResourcesPrefabprefab + 3null\r\n    let gameObject: Nullable<GameObject> = null;\r\n    let hasCreated: boolean = false;\r\n    let newObjectID: string = template.templateID + \"_\" + var_id.replace(StateConst.VARIABLE_SYMBOL, \"\");\r\n    if (object_name === '' || object_name.toLowerCase() === \"null\" || object_name.toLowerCase() === \"none\") {\r\n      gameObject = new GameObject(newObjectID + \"_Empty\");\r\n      hasCreated = true;\r\n    }\r\n    else {\r\n      gameObject = GameObject.Find(object_name);\r\n      if(gameObject === null) {\r\n        error_info.isRight = false;\r\n        error_info.message = \"TResources\" + object_name + \"\" + errorPos;\r\n        return null;\r\n      }\r\n      // TODO: prefab\r\n      /*\r\n      try {\r\n        gameObject = Resources.Load(object_name) as GameObject;\r\n        if (gameObject == null) {\r\n          gameObject = GameObjectTools.FindGameObject(object_name);\r\n          if (gameObject == null) {\r\n            error_info = \"TResources\" + object_name + \"\" + errorPos;\r\n            return null;\r\n          }\r\n        }\r\n      }\r\n      catch\r\n      {\r\n        gameObject = GameObjectTools.FindGameObject(object_name);\r\n        if (gameObject == null) {\r\n          error_info = \"TResources\" + object_name + \"\" + errorPos;\r\n          return null;\r\n        }\r\n      }\r\n      */\r\n    }\r\n    // \r\n    if (!hasCreated) {\r\n      gameObject = GameObject.CreateInstance(gameObject);\r\n    }\r\n    // gameObject!.SetActive(true);\r\n    gameObject!.name += \"_\" + template.instanceCount;\r\n    newObjectID += \"_\" + template.instanceCount;\r\n    template.increase();\r\n    // Object\r\n    let instance: VeryEngineObject = new VeryEngineObject(this._projectName, newObjectID, gameObject!);\r\n    template.setInstance(instance);\r\n\r\n    let objects: VE_Objects = VE_Manager.objects(this._projectName);\r\n    // \r\n    objects.add(newObjectID, instance);\r\n    // TODO: Objects\r\n    // instance.setUnloadCallback(objects.unloadObject);\r\n\r\n\r\n    \r\n\r\n    return new VE_Template(this._projectName, var_id);\r\n  }\r\n\r\n}","export * from './triggerBehaviour';\r\nexport * from './triggers';","import { VE_State } from \"../state/state\";\r\nimport { StateConst } from \"../state/stateConst\";\r\nimport { IExpression } from \"../expression\";\r\nimport { VeryEngineObject } from \"../object\";\r\n\r\nexport abstract class VE_TriggerBehaviour {\r\n\r\n  public abstract get ID(): string;\r\n\r\n  public abstract get className(): string;\r\n\r\n  public get scene(): BABYLON.Scene {\r\n    return this._scene;\r\n  }\r\n  public _scene!: BABYLON.Scene;\r\n\r\n  public get enabled(): boolean {\r\n    return this._enabled && this.isEnabled;\r\n  }\r\n  public set enabled(val: boolean) {\r\n    this._enabled = val;\r\n  }\r\n  private _enabled: boolean = true;\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  public get isEnabled(): boolean {\r\n    if (this._logicalSwitch) {\r\n      for (let i: number = 0; i < this._logicalSwitch.length; i++) {\r\n        if (this._logicalSwitch[i] && !this._logicalSwitch[i].evaluate()) {\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // Logical\r\n  private _logicalSwitch: IExpression[] = [];\r\n  private _logicalExp: IExpression[] = [];\r\n  // State\r\n  private _triggerTargets: VE_State[] = [];\r\n\r\n  // protected GameObject ObjectInstance = null;\r\n  protected VeryObject: Nullable<VeryEngineObject> = null;\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = 'object-axxx';\r\n\r\n  public get triggerID(): string {\r\n    return this._triggerID;\r\n  }\r\n  private _triggerID: string = '';\r\n\r\n  public get unionID(): string {\r\n    return this._id;\r\n  }\r\n  private _id: string = '';\r\n\r\n  public test(): void {\r\n    console.log(this._objectID);\r\n  }\r\n\r\n\r\n  public set(scene: BABYLON.Scene): void {\r\n    this._scene = scene;\r\n  }\r\n\r\n  public setTriggerID(project_name: string, trigger_id: string, object_id: string): void {\r\n    this._projectName = project_name;\r\n    this._triggerID = trigger_id;\r\n    this._objectID = object_id;\r\n    this._id = object_id + StateConst.STATE_SEPARATOR + trigger_id;\r\n  }\r\n\r\n  public addLogicalSwitch(exp: IExpression): void {\r\n    this._logicalSwitch.push(exp);\r\n  }\r\n\r\n  public addTriggerTarget(exp: IExpression, state: VE_State): void {\r\n    this._logicalExp.push(exp);\r\n    this._triggerTargets.push(state);\r\n  }\r\n\r\n  public setVeryObject(very_object: VeryEngineObject): void {\r\n    this.VeryObject = very_object;\r\n  }\r\n\r\n  public sendEvent(): void {\r\n    this.eventProcess();\r\n  }\r\n\r\n  // \r\n  private eventProcess(): void {\r\n    if (this._triggerTargets) {\r\n      // console.log(`ID: ${this.triggerID} --- Count: ${this._triggerTargets.length}`);\r\n      for (let i: number = 0; i < this._triggerTargets.length; i++) {\r\n        if (!this._logicalExp[i] || this._logicalExp[i].evaluate()) {\r\n          this._triggerTargets[i].action(this._id);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public abstract paraParser(para_array: string[]): boolean;\r\n\r\n  public update(): void {\r\n    if (this.isEnabled) {\r\n      this.onUpdate();\r\n    }\r\n  }\r\n\r\n  public onUpdate(): void {\r\n\r\n  }\r\n\r\n  public abstract destroy(): void;\r\n\r\n\r\n}","import { VE_TriggerBehaviour } from \"./triggerBehaviour\";\r\nimport { VeryEngineObject, VE_Objects } from \"../object\";\r\nimport { StateConst } from \"../state\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { GameGlobal, VE_ErrorManager, VE_Error } from \"../global\";\r\nimport { ErrorInfo } from \"../utility\";\r\nimport { BabylonEngine } from \"../babylon\";\r\nimport { Severity } from \"../enum\";\r\n\r\nexport class VE_Triggers {\r\n\r\n  // private static _triggerDics: { [key: string]: VE_TriggerBehaviour } = {};\r\n\r\n  private static _triggerFunctionDics: { [key: string]: Function } = {};\r\n\r\n  // public static addTrigger(trigger: VE_TriggerBehaviour): void {\r\n  //   // \r\n  //   if (!GameGlobal.PlatformLoaded) {\r\n  //     let ids: string[] = trigger.ID.split('|');\r\n  //     for (let i: number = 0; i < ids.length; i++) {\r\n  //       let id: string = ids[i].trim().toLowerCase();\r\n  //       if (this._triggerDics[id]) {\r\n  //         ShowError.showError(`IDID${id}ID`);\r\n  //       } else {\r\n  //         this._triggerDics[id] = trigger;\r\n  //       }\r\n  //     }\r\n  //   }\r\n  // }\r\n\r\n  public static addTrigger(trigger_class: Function): void {\r\n    // \r\n    if (!GameGlobal.PlatformLoaded) {\r\n      let tempTrigger: any = new trigger_class.prototype.constructor();\r\n      // console.log(`ID  ${tempTrigger.ID}  ${tempTrigger.className} `);\r\n      let ids: string[] = tempTrigger.ID.split('|');\r\n      for (let i: number = 0; i < ids.length; i++) {\r\n        let id: string = ids[i].trim().toLowerCase();\r\n        if (this._triggerFunctionDics[id]) {\r\n          VE_ErrorManager.Add(new VE_Error('', `IDID${id}${tempTrigger.className}ID`, '', Severity.Error));\r\n        } else {\r\n          this._triggerFunctionDics[id] = trigger_class;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public static hasTrigger(trigger_type: string): boolean {\r\n    trigger_type = trigger_type.toLowerCase();\r\n    if (this._triggerFunctionDics[trigger_type]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static createTrigger(very_object: VeryEngineObject, trigger_id: string, trigger_type: string, trigger_para: string[], error_info: ErrorInfo): Nullable<VE_TriggerBehaviour> {\r\n    trigger_type = trigger_type.toLowerCase();\r\n    // console.log(this._triggerFunctionDics[trigger_type]);\r\n    if (!this._triggerFunctionDics[trigger_type]) {\r\n      error_info.isRight = false;\r\n      error_info.message = `` + trigger_type;\r\n      return null;\r\n    }\r\n    let variable: any;\r\n    try {\r\n      // newObject.createprototype\r\n      variable = new this._triggerFunctionDics[trigger_type].prototype.constructor();\r\n\r\n      if (!variable) {\r\n        error_info.isRight = false;\r\n        error_info.message = `` + trigger_type;\r\n        return null;\r\n      }\r\n\r\n      let trigger: VE_TriggerBehaviour = <VE_TriggerBehaviour>variable;\r\n      trigger.set(BabylonEngine.Scene);\r\n      trigger.setVeryObject(very_object);\r\n      trigger.setTriggerID(very_object.projectName, trigger_id, very_object.objectID);\r\n      if (!trigger.paraParser(trigger_para)) {\r\n        error_info.isRight = false;\r\n        error_info.message = \"\";\r\n        return null;\r\n      }\r\n      return trigger;\r\n    } catch (error) {\r\n      console.error(`${error.message}`);\r\n      error_info.isRight = false;\r\n      error_info.message = '' + trigger_type + '' + error.message;\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static remove(trigger_type: string): void {\r\n    trigger_type = trigger_type.toLowerCase();\r\n    delete this._triggerFunctionDics[trigger_type];\r\n  }\r\n\r\n  public static findTrigger(very_object: VeryEngineObject, trigger_id: string): Nullable<VE_TriggerBehaviour> {\r\n    if (very_object.isCreatedTrigger(trigger_id)) {\r\n      return very_object.getTrigger(trigger_id);\r\n    } else {\r\n      let triggerArray: string[] = trigger_id.split(StateConst.STATE_SEPARATOR);\r\n      if (triggerArray.length === 2) {\r\n        let objects: VE_Objects = VE_Manager.objects(very_object.projectName);\r\n        let objectID: string = triggerArray[0].trim();\r\n        let triggerID: string = triggerArray[1].trim();\r\n        if (objects.isCreated(objectID)) {\r\n          let otherObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n          if (otherObject.isCreatedTrigger(triggerID)) {\r\n            return otherObject.getTrigger(triggerID);\r\n          } else {\r\n            return null;\r\n          }\r\n        } else {\r\n          return null;\r\n        }\r\n      } else {\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n  public static dispose(): void {\r\n    VE_Triggers._triggerFunctionDics = {};\r\n  }\r\n\r\n}","export class ArrayUtility {\r\n  public static remove<T>(arr: Array<T>, ele: T): void {\r\n    let index = arr.indexOf(ele);\r\n    if (index > -1) {\r\n      arr.splice(index, 1);\r\n    }\r\n  }\r\n\r\n  public static clear<T>(arr: Array<T>): void {\r\n    arr = [];\r\n  }\r\n\r\n  // public static T[] RemoveAt<T>(T[] array, int index) {\r\n  //   List < T > list = new List<T>(array);\r\n  //   list.RemoveAt(index);\r\n  //   return list.ToArray();\r\n  // }\r\n\r\n}\r\n\r\n","/** */\r\nexport class Dictionary<KT, VT> {\r\n  private _keys: KT[] = [];\r\n  private _values: VT[] = [];\r\n  public get count(): number {\r\n    return this.Count();\r\n  }\r\n\r\n  public constructor() {\r\n  }\r\n\r\n  /**, */\r\n  public Add(key: any, value: any): number {\r\n    this._keys.push(key);\r\n    return this._values.push(value);\r\n  }\r\n\r\n  public Remove(key: any) {\r\n    var index = this._keys.indexOf(key, 0);\r\n    this._keys.splice(index, 1);\r\n    this._values.splice(index, 1);\r\n  }\r\n\r\n  private Count(): number {\r\n    return this._keys.length;\r\n  }\r\n\r\n  /**SetValue() */\r\n  public SetValue(key: any, value: any): boolean {\r\n    var index = this._keys.indexOf(key, 0);\r\n    if (index != -1) {\r\n      this._keys[index] = key;\r\n      this._values[index] = value;\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n  public GetValue(key: KT): VT | null {\r\n    var index = this._keys.indexOf(key, 0);\r\n    if (index != -1) {\r\n      return this._values[index];\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public ContainsKey(key: any): boolean {\r\n    let ks = this._keys;\r\n    for (let i = 0; i < ks.length; ++i) {\r\n      if (ks[i] == key) {\r\n        return true;;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public GetKeys(): KT[] {\r\n    return this._keys;\r\n  }\r\n\r\n  public GetValues(): VT[] {\r\n    return this._values;\r\n  }\r\n}","export class ErrorInfo {\r\n\r\n  public isRight: boolean = true;\r\n  public message: string = '';\r\n\r\n  constructor() {\r\n    \r\n  }\r\n\r\n  public clear(): void {\r\n    this.isRight = true;\r\n    this.message = '';\r\n  }\r\n\r\n}","export * from './arrayUtility';\r\nexport * from './dictionary';\r\nexport * from './errorInfo';\r\nexport * from './stringFormat';\r\nexport * from './paraParserUtility';\r\nexport * from './keyboardMap';\r\nexport * from './typeConvert';\r\nexport * from './vector3Utility';\r\nexport * from './veryParas';","export class VE_KeyboardMap {\r\n\r\n  private static _keyMap: { [key: string]: string } = {};\r\n  private static _initialized = false;\r\n\r\n  private static init(): void {\r\n    this._keyMap['backspace'] = 'Backspace';\r\n    this._keyMap[''] = 'Backspace';\r\n    this._keyMap['tab'] = 'Tab';\r\n    this._keyMap['enter'] = 'Enter';\r\n    this._keyMap[''] = 'Enter';\r\n    this._keyMap['shift'] = 'Shift';\r\n    this._keyMap['control'] = 'Control';\r\n    this._keyMap['ctrl'] = 'Control';\r\n    this._keyMap['alt'] = 'Alt';\r\n    this._keyMap['pause'] = 'Pause';\r\n    this._keyMap['capsLock'] = 'CapsLock';\r\n    this._keyMap['escape'] = 'Escape';\r\n    this._keyMap['pageup'] = 'PageUp';\r\n    this._keyMap[''] = 'PageUp';\r\n    this._keyMap['pagedown'] = 'PageDown';\r\n    this._keyMap[''] = 'PageDown';\r\n    this._keyMap['end'] = 'End';\r\n    this._keyMap['home'] = 'Home';\r\n    this._keyMap['arrowleft'] = 'ArrowLeft';\r\n    this._keyMap[''] = 'ArrowLeft';\r\n    this._keyMap['arrowup'] = 'ArrowUp';\r\n    this._keyMap[''] = 'ArrowUp';\r\n    this._keyMap['arrowright'] = 'ArrowRight';\r\n    this._keyMap[''] = 'ArrowRight';\r\n    this._keyMap['arrowdown'] = 'ArrowDown';\r\n    this._keyMap[''] = 'ArrowDown';\r\n    this._keyMap['insert'] = 'Insert';\r\n    this._keyMap[''] = 'Insert';\r\n    this._keyMap['delete'] = 'Delete';\r\n    this._keyMap[''] = 'Delete';\r\n    this._keyMap['0'] = '0';\r\n    this._keyMap['1'] = '1';\r\n    this._keyMap['2'] = '2';\r\n    this._keyMap['3'] = '3';\r\n    this._keyMap['4'] = '4';\r\n    this._keyMap['5'] = '5';\r\n    this._keyMap['6'] = '6';\r\n    this._keyMap['7'] = '7';\r\n    this._keyMap['8'] = '8';\r\n    this._keyMap['9'] = '9';\r\n    this._keyMap[')'] = ')';\r\n    this._keyMap[''] = ')';\r\n    this._keyMap['!'] = '!';\r\n    this._keyMap[''] = '!';\r\n    this._keyMap['@'] = '@';\r\n    this._keyMap['#'] = '#';\r\n    this._keyMap['$'] = '$';\r\n    this._keyMap[''] = '$';\r\n    this._keyMap['%'] = '%';\r\n    this._keyMap['^'] = '^';\r\n    this._keyMap[''] = '^';\r\n    this._keyMap['&'] = '&';\r\n    this._keyMap['*'] = '*';\r\n    this._keyMap['('] = '(';\r\n    this._keyMap[''] = '(';\r\n    this._keyMap['meta'] = 'meta';\r\n    this._keyMap['windows'] = 'meta';\r\n    this._keyMap['contextmenu'] = 'ContextMenu';\r\n    this._keyMap[''] = 'ContextMenu';\r\n    this._keyMap['f1'] = 'F1';\r\n    this._keyMap['f2'] = 'F2';\r\n    this._keyMap['f3'] = 'F3';\r\n    this._keyMap['f4'] = 'F4';\r\n    this._keyMap['f5'] = 'F5';\r\n    this._keyMap['f6'] = 'F6';\r\n    this._keyMap['f7'] = 'F7';\r\n    this._keyMap['f8'] = 'F8';\r\n    this._keyMap['f9'] = 'F9';\r\n    this._keyMap['f10'] = 'F10';\r\n    this._keyMap['f11'] = 'F11';\r\n    this._keyMap['f12'] = 'F12';\r\n    this._keyMap['scrolllock'] = 'ScrollLock';\r\n    this._keyMap[';'] = ';';\r\n    this._keyMap[''] = ';';\r\n    this._keyMap[':'] = ':';\r\n    this._keyMap[''] = ':';\r\n    this._keyMap['='] = '=';\r\n    this._keyMap['+'] = '+';\r\n    this._keyMap['-'] = '-';\r\n    this._keyMap['_'] = '_';\r\n    this._keyMap[''] = '_';\r\n    this._keyMap[','] = ',';\r\n    this._keyMap[''] = ',';\r\n    this._keyMap['<'] = '<';\r\n    this._keyMap[''] = '<';\r\n    this._keyMap['.'] = '.';\r\n    this._keyMap[''] = '.';\r\n    this._keyMap['>'] = '>';\r\n    this._keyMap[''] = '>';\r\n    this._keyMap['?'] = '?';\r\n    this._keyMap[''] = '?';\r\n    this._keyMap['/'] = '/';\r\n    this._keyMap['`'] = '`';\r\n    this._keyMap[''] = '`';\r\n    this._keyMap['~'] = '~';\r\n    this._keyMap['|'] = '|';\r\n    this._keyMap['\\\\'] = '\\\\';\r\n    this._keyMap['\\\\'] = '\\\\';\r\n    this._keyMap['numlock'] = 'NumLock';\r\n    this._keyMap['a'] = 'a';\r\n    this._keyMap['b'] = 'b';\r\n    this._keyMap['c'] = 'c';\r\n    this._keyMap['d'] = 'd';\r\n    this._keyMap['e'] = 'e';\r\n    this._keyMap['f'] = 'f';\r\n    this._keyMap['g'] = 'g';\r\n    this._keyMap['h'] = 'h';\r\n    this._keyMap['i'] = 'i';\r\n    this._keyMap['j'] = 'j';\r\n    this._keyMap['k'] = 'k';\r\n    this._keyMap['l'] = 'l';\r\n    this._keyMap['m'] = 'm';\r\n    this._keyMap['n'] = 'n';\r\n    this._keyMap['o'] = 'o';\r\n    this._keyMap['p'] = 'p';\r\n    this._keyMap['q'] = 'q';\r\n    this._keyMap['r'] = 'r';\r\n    this._keyMap['s'] = 's';\r\n    this._keyMap['t'] = 't';\r\n    this._keyMap['u'] = 'u';\r\n    this._keyMap['v'] = 'v';\r\n    this._keyMap['w'] = 'w';\r\n    this._keyMap['x'] = 'x';\r\n    this._keyMap['y'] = 'y';\r\n    this._keyMap['z'] = 'z';\r\n    \r\n\r\n  }\r\n\r\n  public static GetKey(key_str: string): string {\r\n    if(!this._initialized) {\r\n      this.init();\r\n      this._initialized = true;\r\n    }\r\n    key_str = key_str.trim().toLowerCase();\r\n    if (this._keyMap[key_str]) {\r\n      return this._keyMap[key_str];\r\n    } else {\r\n      return 'null';\r\n    }\r\n  }\r\n\r\n\r\n\r\n}","import { ParaType, Severity } from \"../enum\";\r\nimport { VE_ErrorManager, VE_Error } from \"../global\";\r\nimport { VeryGameObject, VeryVarManager, VarTools, IVeryVar, VeryString, VeryExpression, VeryNumber, VeryBool, VeryVector3 } from \"../variables\";\r\nimport { ErrorInfo } from \"./errorInfo\";\r\nimport { VE_Template } from \"../template\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { GameObject } from \"../babylon\";\r\nimport { VeryEngineObject } from \"../object\";\r\nimport { VE_TypeConvert } from \"./typeConvert\";\r\nimport { VeryParas } from \"./veryParas\";\r\n\r\nexport class ParaParserUtility {\r\n\r\n  /**\r\n   * \r\n   * @param id \r\n   * @param para_type \r\n   * @param current_number \r\n   * @param required_number \r\n   */\r\n  public static ParaNumbers(id: string, para_type: ParaType, current_number: number, ...required_number: number[]): boolean {\r\n    for (let i: number = 0; i < required_number.length; i++) {\r\n      if (required_number[i] === current_number) {\r\n        return true;\r\n      }\r\n    }\r\n    let requiredStr: string = \"\";\r\n    for (let i: number = 0; i < required_number.length; i++) {\r\n      if (i === 0) {\r\n        requiredStr += (required_number[i] + 1).toString() + \"\";\r\n      }\r\n      else {\r\n        requiredStr += \"\" + (required_number[i] + 1).toString() + \"\";\r\n      }\r\n    }\r\n    if (para_type === ParaType.Action) {\r\n\r\n      VE_ErrorManager.Add(new VE_Error('', id + \"  \" + requiredStr + \"\" + (current_number + 1) + \"\", '', Severity.Error));\r\n    }\r\n    else {\r\n      VE_ErrorManager.Add(new VE_Error('', id + \"  \" + requiredStr + \"\" + (current_number + 1) + \"\", '', Severity.Error));\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * VeryGameObject\r\n   * @param project_name \r\n   * @param object_id \r\n   * @param id ID\r\n   * @param para_type \r\n   * @param very_var \r\n   * @param var_str \r\n   * @param log \r\n   * \r\n   */\r\n  public static GameObjectPara(project_name: string, object_id: string, id: string, para_type: ParaType, paras: VeryParas, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVar(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        // Template\r\n        errorInfo.clear();\r\n        let template: Nullable<VE_Template> = VarTools.GetTemplate(project_name, object_id, var_str, errorInfo);\r\n        if (template === null) {\r\n          if (log) {\r\n            VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}`, '', Severity.Error));\r\n          }\r\n          return false;\r\n        }\r\n        else {\r\n          if (template.templateInstance === null) {\r\n            if (log) {\r\n              VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}GameObject`, '', Severity.Error));\r\n            }\r\n            return false;\r\n          }\r\n          else {\r\n            paras.gameObject.value = template.templateInstance.gameObject;\r\n            return true;\r\n          }\r\n        }\r\n      }\r\n      else if (veryVar.className === 'VeryGameObject') {\r\n        paras.gameObject = <VeryGameObject>veryVar;\r\n        return true;\r\n      }\r\n      else if (veryVar.className === 'VeryString') {\r\n        let vString: VeryString = <VeryString>veryVar;\r\n        paras.gameObject.value = GameObject.Find(vString.value);\r\n        if (paras.gameObject.value === null) {\r\n          if (log) {\r\n            VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${vString.value}`, '', Severity.Error));\r\n          }\r\n          return false;\r\n        }\r\n        return true;\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}GameObject`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      if (var_str.toLowerCase().trim() === \"this\") {\r\n        let veryObject: VeryEngineObject = VE_Manager.objects(project_name).getVeryObject(object_id);\r\n        if (veryObject === null) {\r\n          if (log) {\r\n            VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''}  ${object_id}`, '', Severity.Error));\r\n          }\r\n          return false;\r\n        }\r\n        else {\r\n          paras.gameObject.value = veryObject.gameObject;\r\n        }\r\n      }\r\n      else if (var_str.toLowerCase().trim() === \"null\" || var_str.toLowerCase().trim() === \"none\" || var_str.toLowerCase().trim() === \"\") {\r\n        paras.gameObject.value = null;\r\n      }\r\n      else if (var_str.startsWith(\"/\")) {\r\n        let veryObject: VeryEngineObject = VE_Manager.objects(project_name).getVeryObject(object_id);\r\n        if (!veryObject) {\r\n          if (log) {\r\n            VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''}  ${object_id}`, '', Severity.Error));\r\n          }\r\n          return false;\r\n        }\r\n        else {\r\n          let parentObj: GameObject = veryObject.gameObject;\r\n          let childName: string = var_str.substring(1).trim();\r\n          // TODO: \r\n          // very_var.value = GameObject.FindChild(parentObj, childName);\r\n          if (paras.gameObject.value === null) {\r\n            if (log) {\r\n              VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${object_id}${var_str}`, '', Severity.Error));\r\n            }\r\n            return false;\r\n          }\r\n          return true;\r\n        }\r\n      }\r\n      else {\r\n        paras.gameObject.value = GameObject.Find(var_str);\r\n        if (paras.gameObject.value === null) {\r\n          if (log) {\r\n            VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''}  ${object_id}`, '', Severity.Error));\r\n          }\r\n          return false;\r\n        }\r\n      }\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public static GameObjectParaOnlyVar(project_name: string, object_id: string, id: string, para_type: ParaType, paras: VeryParas, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVar(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}GameObject`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryGameObject') {\r\n        paras.gameObject = <VeryGameObject>veryVar;\r\n        return true;\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}GameObject`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      if (log) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}GameObject`, '', Severity.Error));\r\n      }\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static StringPara(project_name: string, object_id: string, id: string, para_type: ParaType, paras: VeryParas, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      return ParaParserUtility.StringParaOnlyVar(project_name, object_id, id, para_type, paras, var_str, log);\r\n    }\r\n    else {\r\n      paras.string.value = var_str;\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public static StringParaWithExpression(project_name: string, object_id: string, id: string, para_type: ParaType, paras: VeryParas, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVarWithExpression(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}${errorInfo.message}`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryString') {\r\n        paras.string = <VeryString>veryVar;\r\n        return true;\r\n      }\r\n      else if (veryVar.className === 'VeryExpression') {\r\n        if (veryVar.varType === 'string') {\r\n          paras.string.setExpression(<VeryExpression>veryVar);\r\n          return true;\r\n        }\r\n        else {\r\n          if (log) {\r\n            VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}String`, '', Severity.Error));\r\n          }\r\n          return false;\r\n        }\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}String`, '', Severity.Error));\r\n        }\r\n      }\r\n      return false;\r\n    }\r\n    else {\r\n      paras.string.value = var_str;\r\n      return true;\r\n    }\r\n  }\r\n\r\n\r\n  public static StringParaOnlyVar(project_name: string, object_id: string, id: string, para_type: ParaType, paras: VeryParas, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVar(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}${errorInfo.message}`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryString') {\r\n        paras.string = <VeryString>veryVar;\r\n        return true;\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}String`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      if (log) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}String`, '', Severity.Error));\r\n      }\r\n      return false;\r\n    }\r\n  }\r\n\r\n\r\n  public static NumberPara(project_name: string, object_id: string, id: string, para_type: ParaType, paras: VeryParas, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      return ParaParserUtility.NumberParaOnlyVar(project_name, object_id, id, para_type, paras, var_str, log);\r\n    }\r\n    else {\r\n      paras.number.value = parseFloat(var_str);\r\n      if (isNaN(paras.number.value)) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}number`, '', Severity.Error));\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  public static NumberParaWithExpression(project_name: string, object_id: string, id: string, para_type: ParaType, paras: VeryParas, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVarWithExpression(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}${errorInfo.message}`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryNumber') {\r\n        paras.number = <VeryNumber>veryVar;\r\n        return true;\r\n      }\r\n      else if (veryVar.className === 'VeryExpression') {\r\n        if (veryVar.varType === 'number') {\r\n          paras.number.setExpression(<VeryExpression>veryVar);\r\n          return true;\r\n        }\r\n        else {\r\n          if (log) {\r\n            VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}number`, '', Severity.Error));\r\n          }\r\n          return false;\r\n        }\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}number`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      paras.number.value = parseFloat(var_str);\r\n      if (isNaN(paras.number.value)) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}number`, '', Severity.Error));\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public static NumberParaOnlyVar(project_name: string, object_id: string, id: string, para_type: ParaType, paras: VeryParas, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVar(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}${errorInfo.message}`, '', Severity.Error));\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryNumber') {\r\n        paras.number = <VeryNumber>veryVar;\r\n        return true;\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}number`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      if (log) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}number`, '', Severity.Error));\r\n      }\r\n      return false;\r\n    }\r\n  }\r\n\r\n\r\n  public static BoolPara(project_name: string, object_id: string, id: string, para_type: ParaType, paras: VeryParas, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      return ParaParserUtility.BoolParaOnlyVar(project_name, object_id, id, para_type, paras, var_str, log);\r\n    }\r\n    else {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      paras.bool.value = VE_TypeConvert.boolConvert(var_str, errorInfo);\r\n      if (errorInfo.isRight === false) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}bool`, '', Severity.Error));\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n  }\r\n\r\n\r\n  public static BoolParaWithExpression(project_name: string, object_id: string, id: string, para_type: ParaType, paras: VeryParas, var_str: string, log: boolean = true) {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVar(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}${errorInfo.message}`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryBool') {\r\n        paras.bool = <VeryBool>veryVar;\r\n        return true;\r\n      }\r\n      else if (veryVar.className === 'VeryExpression') {\r\n        if (veryVar.varType === 'bool') {\r\n          paras.bool.setExpression(<VeryExpression>veryVar);\r\n          return true;\r\n        }\r\n        else {\r\n          if (log) {\r\n            VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}bool`, '', Severity.Error));\r\n          }\r\n          return false;\r\n        }\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}bool`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      paras.bool.value = VE_TypeConvert.boolConvert(var_str, errorInfo);\r\n      if (errorInfo.isRight === false) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}bool`, '', Severity.Error));\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public static BoolParaOnlyVar(project_name: string, object_id: string, id: string, para_type: ParaType, paras: VeryParas, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVar(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}${errorInfo.message}`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryBool') {\r\n        paras.bool = <VeryBool>veryVar;\r\n        return true;\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}bool`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      if (log) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}bool`, '', Severity.Error));\r\n      }\r\n      return false;\r\n    }\r\n  }\r\n\r\n\r\n  public static Vector3Para(project_name: string, object_id: string, id: string, para_type: ParaType, paras: VeryParas, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVar(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}${errorInfo.message}`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryVector3') {\r\n        paras.vector3 = <VeryVector3>veryVar;\r\n        return true;\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}Vector3`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      if (log) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}Vector3`, '', Severity.Error));\r\n      }\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static Vector3OrNumberPara(project_name: string, object_id: string, id: string, para_type: ParaType, paras: VeryParas, var_str: string, log: boolean = true): boolean {\r\n    if (var_str.indexOf(\",\") > -1 || var_str.indexOf(\"\") > -1) {\r\n      paras.isVec = false;\r\n      let floatsArray: string[] = var_str.split(/,|/);\r\n      if (floatsArray.length === 3) {\r\n        if (!this.privateNumberPara(project_name, object_id, id, para_type, paras, floatsArray[0].trim(), 0, log)) {\r\n          return false;\r\n        }\r\n        if (!this.privateNumberPara(project_name, object_id, id, para_type, paras, floatsArray[1].trim(), 1, log)) {\r\n          return false;\r\n        }\r\n        if (!this.privateNumberPara(project_name, object_id, id, para_type, paras, floatsArray[2].trim(), 2, log)) {\r\n          return false;\r\n        }\r\n        return true;\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}1, 2, 3number`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      paras.isVec = true;\r\n      return this.Vector3Para(project_name, object_id, id, para_type, paras, var_str, log);\r\n    }\r\n  }\r\n\r\n\r\n  public static Vector3ParaWithExpression(project_name: string, object_id: string, id: string, para_type: ParaType, paras: VeryParas, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVarWithExpression(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}${errorInfo.message}`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryVector3') {\r\n        paras.vector3 = <VeryVector3>veryVar;\r\n        return true;\r\n      }\r\n      else if (veryVar.className === 'VeryExpression') {\r\n        if (veryVar.varType === 'Vector3') {\r\n          paras.vector3.setExpression(<VeryExpression>veryVar);\r\n          return true;\r\n        }\r\n        else {\r\n          if (log) {\r\n            VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}Vector3`, '', Severity.Error));\r\n          }\r\n          return false;\r\n        }\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}Vector3`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      if (log) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}Vector3`, '', Severity.Error));\r\n      }\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static Vector3OrNumberParaWithExpression(project_name: string, object_id: string, id: string, para_type: ParaType, paras: VeryParas, var_str: string, log: boolean = true): boolean {\r\n    if (var_str.indexOf(\",\") > -1 || var_str.indexOf(\"\") > -1) {\r\n      paras.isVec = false;\r\n      let floatsArray: string[] = var_str.split(/,|/);\r\n      if (floatsArray.length === 3) {\r\n        if (!this.privateNumberParaWithExpression(project_name, object_id, id, para_type, paras, floatsArray[0].trim(), 0, log)) {\r\n          return false;\r\n        }\r\n        if (!this.privateNumberParaWithExpression(project_name, object_id, id, para_type, paras, floatsArray[1].trim(), 1, log)) {\r\n          return false;\r\n        }\r\n        if (!this.privateNumberParaWithExpression(project_name, object_id, id, para_type, paras, floatsArray[2].trim(), 2, log)) {\r\n          return false;\r\n        }\r\n        return true;\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}1, 2, 3Vector3`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      paras.isVec = true;\r\n      return this.Vector3ParaWithExpression(project_name, object_id, id, para_type, paras, var_str, log);\r\n    }\r\n  }\r\n\r\n  private static privateNumberParaWithExpression(project_name: string, object_id: string, id: string, para_type: ParaType, paras: VeryParas, var_str: string, index: number, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVarWithExpression(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}${errorInfo.message}`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryNumber') {\r\n        paras.vecNumbers[index] = <VeryNumber>veryVar;\r\n        return true;\r\n      }\r\n      else if (veryVar.className === 'VeryExpression') {\r\n        if (veryVar.varType === 'number') {\r\n          paras.vecNumbers[index].setExpression(<VeryExpression>veryVar);\r\n          return true;\r\n        }\r\n        else {\r\n          if (log) {\r\n            VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}number`, '', Severity.Error));\r\n          }\r\n          return false;\r\n        }\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}number`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      paras.vecNumbers[index].value = parseFloat(var_str);\r\n      if (isNaN(paras.vecNumbers[index].value)) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}number`, '', Severity.Error));\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n  }\r\n\r\n  private static privateNumberPara(project_name: string, object_id: string, id: string, para_type: ParaType, paras: VeryParas, var_str: string, index: number, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      return ParaParserUtility.privateNumberParaOnlyVar(project_name, object_id, id, para_type, paras, var_str, index, log);\r\n    }\r\n    else {\r\n      paras.vecNumbers[index].value = parseFloat(var_str);\r\n      if (isNaN(paras.vecNumbers[index].value)) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}number`, '', Severity.Error));\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  private static privateNumberParaOnlyVar(project_name: string, object_id: string, id: string, para_type: ParaType, paras: VeryParas, var_str: string, index: number, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVar(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}${errorInfo.message}`, '', Severity.Error));\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryNumber') {\r\n        paras.vecNumbers[index] = <VeryNumber>veryVar;\r\n        return true;\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}number`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      if (log) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}number`, '', Severity.Error));\r\n      }\r\n      return false;\r\n    }\r\n  }\r\n\r\n\r\n}","export class VE_StringFormat {\r\n\r\n  private static _illegalChar: { [key: string]: boolean } = {};\r\n  private static _formulaChar: { [key: string]: boolean } = {};\r\n  private static _escapeCharacters: { [key: string]: string } = {};\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public static init() {\r\n    this._escapeCharacters['n'] = '\\n';\r\n    this._escapeCharacters['b'] = '\\b';\r\n    this._escapeCharacters['r'] = '\\r';\r\n    this._escapeCharacters['t'] = '\\t';\r\n    this._escapeCharacters['v'] = '\\v';\r\n    this._escapeCharacters['f'] = '\\f';\r\n    this._escapeCharacters['0'] = '\\0';\r\n\r\n    this._illegalChar['='] = true;\r\n    this._illegalChar[','] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar[':'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['*'] = true;\r\n    this._illegalChar['('] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar[')'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['@'] = true;\r\n    this._illegalChar['#'] = true;\r\n    this._illegalChar['$'] = true;\r\n    this._illegalChar['%'] = true;\r\n    this._illegalChar['&'] = true;\r\n    this._illegalChar['^'] = true;\r\n    this._illegalChar['-'] = true;\r\n    this._illegalChar['+'] = true;\r\n    this._illegalChar['|'] = true;\r\n    this._illegalChar['/'] = true;\r\n    this._illegalChar['['] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar[']'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['{'] = true;\r\n    this._illegalChar['}'] = true;\r\n    this._illegalChar['.'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['<'] = true;\r\n    this._illegalChar['>'] = true;\r\n    this._illegalChar[';'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['?'] = true;\r\n    this._illegalChar['\\\"'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['\\''] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['!'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['`'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['~'] = true;\r\n\r\n    this._formulaChar['('] = true; this._formulaChar[')'] = true; this._formulaChar[''] = true; this._formulaChar[''] = true;\r\n    this._formulaChar['!'] = true; this._formulaChar[''] = true;\r\n    this._formulaChar['^'] = true; this._formulaChar['%'] = true; this._formulaChar['&'] = true; this._formulaChar['-'] = true; this._formulaChar['+'] = true; this._formulaChar['='] = true;\r\n    this._formulaChar['<'] = true; this._formulaChar['>'] = true; this._formulaChar['|'] = true;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param para_str \r\n   */\r\n  public static strEscapeCharacterAction(para_str: string): string {\r\n    let tmpStr: string = \"\";\r\n    for (let i: number = 0; i < para_str.length; i++) {\r\n      if (para_str[i] == '\\\\' && i != para_str.length - 1) {\r\n        tmpStr += this.getEscapeCharacter(para_str[i + 1]);\r\n        i++;\r\n      }\r\n      else {\r\n        tmpStr += para_str[i];\r\n      }\r\n    }\r\n    return tmpStr;\r\n  }\r\n\r\n  /**\r\n   *  \r\n   * @param para_str \r\n   */\r\n  public static strSubsectionAction(para_str: string): string[] {\r\n    let strBuilder: string = '';\r\n    let rStr: string[] = [];\r\n    let bracketFlag: boolean = false;\r\n    let hasQuote: boolean = false;\r\n    for (let i: number = 0; i < para_str.length; i++) {\r\n      if (para_str[i] == '\\\\') {\r\n        if (i < para_str.length - 1) {\r\n          strBuilder += para_str[i + 1];\r\n          i++;\r\n          continue;\r\n        }\r\n        else {\r\n          strBuilder += para_str[i];\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (!hasQuote && (para_str[i] === '\\\"' || para_str[i] === '')) {\r\n        hasQuote = true;\r\n        bracketFlag = true;\r\n        strBuilder += '\\\"';\r\n      }\r\n      else if (hasQuote && (para_str[i] === '\\\"' || para_str[i] === '')) {\r\n        strBuilder += '\\\"';\r\n        bracketFlag = false;\r\n        hasQuote = false;\r\n        if (strBuilder !== '') {\r\n          rStr.push(strBuilder);\r\n        }\r\n        strBuilder = '';\r\n      }\r\n      else if (para_str[i] === ',' || para_str[i] === '') {\r\n        if (!bracketFlag) {\r\n          if (strBuilder !== \"\") {\r\n            rStr.push(strBuilder);\r\n          }\r\n          strBuilder = '';\r\n        }\r\n        else {\r\n          strBuilder += para_str[i];\r\n        }\r\n      }\r\n      else if (para_str[i] === ' ') {\r\n        continue;\r\n      }\r\n      else {\r\n        strBuilder += para_str[i];\r\n      }\r\n    }\r\n    if (strBuilder !== \"\") {\r\n      rStr.push(strBuilder);\r\n    }\r\n    return rStr;\r\n  }\r\n\r\n\r\n  private static getEscapeCharacter(para_char: string): string {\r\n    if (this._escapeCharacters[para_char])\r\n      return this._escapeCharacters[para_char];\r\n    else\r\n      return para_char;\r\n  }\r\n\r\n  private static getEscapeCharacter2(para_char: string, is_escape: boolean[]): string {\r\n    if (this._escapeCharacters[para_char]) {\r\n      is_escape[0] = true;\r\n      return this._escapeCharacters[para_char];\r\n    }\r\n    else {\r\n      is_escape[0] = false;\r\n      return para_char;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \"XXX\"\"XXX\"XXX\r\n   * @param para_str \r\n   */\r\n  public static strSubsection(para_str: string): string[] {\r\n    let strBuilder: string = '';\r\n    let rStr: string[] = [];\r\n    let bracketFlag: boolean = false;\r\n    let needSpace: boolean = false;\r\n    for (let i: number = 0; i < para_str.length; i++) {\r\n      if (para_str[i] == '\\\\') {\r\n        if (i < para_str.length - 1) {\r\n          strBuilder += this.getEscapeCharacter(para_str[i + 1]);\r\n          i++;\r\n          continue;\r\n        }\r\n        else {\r\n          strBuilder += para_str[i];\r\n          break;\r\n        }\r\n      }\r\n      if (para_str[i] === '(' || para_str[i] === '' || para_str[i] === '\\\"' || para_str[i] === '') {\r\n        bracketFlag = true;\r\n        needSpace = false;\r\n      }\r\n      else if (para_str[i] === ')' || para_str[i] === '' || para_str[i] === '\\\"' || para_str[i] === '') {\r\n        bracketFlag = false;\r\n        if (strBuilder !== \"\") {\r\n          rStr.push(strBuilder);\r\n        }\r\n        strBuilder = '';\r\n        needSpace = false;\r\n      }\r\n      else if (para_str[i] === ',' || para_str[i] === '') {\r\n        if (!bracketFlag) {\r\n          if (strBuilder !== \"\") {\r\n            rStr.push(strBuilder);\r\n          }\r\n          strBuilder = '';\r\n        }\r\n        else {\r\n          strBuilder += para_str[i];\r\n        }\r\n        needSpace = false;\r\n      }\r\n      else if (para_str[i] === ' ' && !needSpace) {\r\n        continue;\r\n      }\r\n      else {\r\n        strBuilder += para_str[i];\r\n        needSpace = true;\r\n      }\r\n    }\r\n    if (strBuilder !== \"\") {\r\n      rStr.push(strBuilder);\r\n    }\r\n    return rStr;\r\n  }\r\n\r\n  /**\r\n   * $\r\n   * @param project_name \r\n   * @param para_array \r\n   */\r\n  public static getParaArrayAll(project_name: string, para_array: string[]): string[] {\r\n    let coloneStr: string[] = para_array.slice();\r\n    for (let i: number = 0; i < coloneStr.length; i++) {\r\n      if (coloneStr[i].startsWith(\"$\")) {\r\n        //\r\n        if (coloneStr[i].indexOf(\",\") > -1 || coloneStr[i].indexOf(\"\")) {\r\n          let paraArray: string[] = coloneStr[i].split(/,|/);\r\n          paraArray = this.getParaArrayAll(project_name, paraArray);\r\n          let newPara: string = '';\r\n          for (let j: number = 0; j < paraArray.length; j++) {\r\n            if (j === paraArray.length - 1) {\r\n              newPara += paraArray[j];\r\n            }\r\n            else {\r\n              newPara += paraArray[j];\r\n              newPara += \",\";\r\n            }\r\n          }\r\n          coloneStr[i] = newPara;\r\n        }\r\n        else {\r\n          // TODO\r\n          console.error(\"\" + coloneStr[i] + \"\");\r\n        }\r\n      }\r\n      else if (coloneStr[i].startsWith(\"%\")) {\r\n        //\r\n        if (coloneStr[i].indexOf(\",\") > -1 || coloneStr[i].indexOf(\"\") > -1) {\r\n          let paraArray: string[] = coloneStr[i].split(/,|/);\r\n          paraArray = this.getParaArrayAll(project_name, paraArray);\r\n          let newPara: string = '';\r\n          for (let j: number = 0; j < paraArray.length; j++) {\r\n            if (j == paraArray.length - 1) {\r\n              newPara += paraArray[j];\r\n            }\r\n            else {\r\n              newPara += paraArray[j];\r\n              newPara += \",\";\r\n            }\r\n          }\r\n          coloneStr[i] = newPara;\r\n        }\r\n        else {\r\n          // TODO\r\n          console.error(\"\" + coloneStr[i] + \"BlurVar\");\r\n        }\r\n      }\r\n      //\r\n      else if (coloneStr[i].indexOf(\",\") > -1 || coloneStr[i].indexOf(\"\") > -1) {\r\n        let paraArray: string[] = coloneStr[i].split(/,|/);\r\n        paraArray = this.getParaArrayAll(project_name, paraArray);\r\n        let newPara: string = '';\r\n        for (let j: number = 0; j < paraArray.length; j++) {\r\n          if (j == paraArray.length - 1) {\r\n            newPara += paraArray[j];\r\n          }\r\n          else {\r\n            newPara += paraArray[j];\r\n            newPara += \",\";\r\n          }\r\n        }\r\n        coloneStr[i] = newPara;\r\n      }\r\n    }\r\n    return coloneStr;\r\n  }\r\n\r\n  /**\r\n   * \r\n     1\r\n     2\r\n        1\r\n        2 +\r\n        3+ \r\n        412123\r\n    \r\n   * @param para_str \r\n   */\r\n  public static paraSegment(para_str: string): string[] {\r\n    let strBuilder = '';\r\n    let rStr: string[] = [];\r\n    let bracketFlag: boolean = false;\r\n    let innerBracket: number = 0;\r\n    let saveBracket: boolean = false;\r\n\r\n    let quotationMark: boolean = false;\r\n\r\n    for (let i: number = 0; i < para_str.length; i++) {\r\n      //\r\n      if (para_str[i] == '\\\\') {\r\n        if (i < para_str.length - 1) {\r\n          let isEscape: boolean[] = [true];\r\n          let c: string = this.getEscapeCharacter2(para_str[i + 1], isEscape);\r\n          if (isEscape[0]) {\r\n            i++;\r\n            strBuilder += c;\r\n          }\r\n          else {\r\n            i++;\r\n            strBuilder += para_str[i];\r\n          }\r\n          continue;\r\n        }\r\n        else {\r\n          strBuilder += para_str[i];\r\n          break;\r\n        }\r\n      }\r\n      if (para_str[i] === '(' || para_str[i] === '') {\r\n        if (quotationMark) {\r\n          strBuilder += para_str[i];\r\n        }\r\n        else {\r\n          if (bracketFlag) {\r\n            innerBracket++;\r\n            strBuilder += para_str[i];\r\n          }\r\n          else if (strBuilder.trim() !== \"\") {\r\n            strBuilder += para_str[i];\r\n            saveBracket = true;\r\n          }\r\n          else if (i < para_str.length - 1) {\r\n            if (this.needSaveBracket(para_str.substring(i + 1))) {\r\n              strBuilder += para_str[i];\r\n              saveBracket = true;\r\n            }\r\n          }\r\n          bracketFlag = true;\r\n        }\r\n      }\r\n      else if (para_str[i] === ')' || para_str[i] === '') {\r\n        if (quotationMark) {\r\n          strBuilder += para_str[i];\r\n        }\r\n        else {\r\n          if (innerBracket > 0) {\r\n            innerBracket--;\r\n            bracketFlag = true;\r\n            strBuilder += para_str[i];\r\n          }\r\n          else if (bracketFlag && saveBracket) {\r\n            strBuilder += para_str[i];\r\n            saveBracket = false;\r\n            bracketFlag = false;\r\n          }\r\n          else {\r\n            bracketFlag = false;\r\n          }\r\n        }\r\n      }\r\n      else if (para_str[i] === '\"' || para_str[i] === '\\'' || para_str[i] === '' || para_str[i] === '' || para_str[i] === '' || para_str[i] === '') {\r\n        strBuilder += para_str[i];\r\n        quotationMark = !quotationMark;\r\n      }\r\n      else if (para_str[i] === ',' || para_str[i] === '') {\r\n        if (quotationMark) {\r\n          strBuilder += para_str[i];\r\n        }\r\n        else {\r\n          if (!bracketFlag) {\r\n            if (strBuilder !== \"\") {\r\n              rStr.push(strBuilder.trim());\r\n            }\r\n            strBuilder = '';\r\n          }\r\n          else {\r\n            strBuilder += para_str[i];\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        strBuilder += para_str[i];\r\n      }\r\n    }\r\n    if (strBuilder !== \"\") {\r\n      rStr.push(strBuilder.trim());\r\n    }\r\n    return rStr;\r\n  }\r\n\r\n\r\n  private static needSaveBracket(str: string): boolean {\r\n    let hasBracket: boolean = false;\r\n    let innerBracket: number = 0;\r\n    for (let i: number = 0; i < str.length; i++) {\r\n      if (hasBracket) {\r\n        if (str[i] === ' ') {\r\n          continue;\r\n        }\r\n        else if (str[i] === ',' || str[i] === '') {\r\n          return false;\r\n        }\r\n        else {\r\n          return true;\r\n        }\r\n      }\r\n      else {\r\n        if (str[i] === '(' || str[i] === '') {\r\n          innerBracket++;\r\n        }\r\n        else if (str[i] === ')' || str[i] === '') {\r\n          if (innerBracket > 0) {\r\n            innerBracket--;\r\n          }\r\n          else {\r\n            hasBracket = true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n\r\n  public static isIDLegal(id: string): boolean {\r\n    for (let i: number = 0; i < id.length; i++) {\r\n      if (this._illegalChar[id[i]]) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n\r\n  public static isFormulaString(var_str: string): boolean {\r\n    for (let i: number = 0; i < var_str.length; i++)\r\n    {\r\n      if (this._formulaChar[var_str[i]]) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n\r\n}\r\n\r\nVE_StringFormat.init();\r\n\r\n// console.log(VE_StringFormat.paraSegment(\", Main Camera, *\"));\r\n// console.log(VE_StringFormat.paraSegment(`, *Float1, *Float2, 0.0001, >=`));\r\n// console.log(VE_StringFormat.paraSegment(`.*1 = 'ksd./,.34'`));\r\n\r\n// console.log(VE_StringFormat.paraSegment(\", *, Pin, Example/SpinAPin/Pin , null, (0, -6, 0), (0,0,90),false\"));","import { ErrorInfo } from \"./errorInfo\";\r\n\r\nexport class VE_TypeConvert {\r\n\r\n\r\n  public static boolConvert(info: string, errorInfo: ErrorInfo): boolean {\r\n    info = info.toLowerCase().trim();\r\n    if(info === 'true' || info === '') {\r\n      return true;\r\n    } else if(info === 'false' || info === '') {\r\n      return false;\r\n    } else {\r\n      errorInfo.isRight = false;\r\n      errorInfo.message = 'bool|' + info;\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static intConvert(info: string, errorInfo: ErrorInfo): number {\r\n    info = info.toLowerCase().trim();\r\n    let num: number = parseFloat(info);\r\n    if(isNaN(num)) {\r\n      errorInfo.isRight = false;\r\n      errorInfo.message = 'number|' + info;\r\n      return - 1;\r\n    } else {\r\n      return Math.round(num);\r\n    }\r\n  }\r\n\r\n  public static floatConvert(info: string, errorInfo: ErrorInfo): number {\r\n    info = info.toLowerCase().trim();\r\n    let num: number = parseFloat(info);\r\n    if(isNaN(num)) {\r\n      errorInfo.isRight = false;\r\n      errorInfo.message = 'number|' + info;\r\n      return - 1;\r\n    } else {\r\n      return num;\r\n    }\r\n  }\r\n\r\n\r\n}","\r\nexport class Vector3Utility {\r\n\r\n\r\n  /**\r\n   * Vector3\r\n   * @param start \r\n   * @param end \r\n   * @param t 0~1\r\n   * Vector3\r\n   */\r\n  public static Slerp(start: BABYLON.Vector3, end: BABYLON.Vector3, t: number): BABYLON.Vector3 {\r\n    if (t < 0) {\r\n      t = 0;\r\n    } else if (t > 1) {\r\n      t = 1;\r\n    }\r\n    // sin\r\n    let result: BABYLON.Vector3 = new BABYLON.Vector3();\r\n    let para: number = (Math.sin(Math.PI * (t - 0.5)) + 1) * 0.5;\r\n    result.x = start.x + (end.x - start.x) * para;\r\n    result.y = start.y + (end.y - start.y) * para;\r\n    result.z = start.z + (end.z - start.z) * para;\r\n\r\n\r\n    return result;\r\n  }\r\n\r\n}","import { VeryGameObject, VeryBool, VeryNumber, VeryString, VeryVector3 } from \"../variables\";\r\n\r\nexport class VeryParas {\r\n\r\n  public gameObject: VeryGameObject = new VeryGameObject();\r\n\r\n  public bool: VeryBool = new VeryBool();\r\n\r\n  public number: VeryNumber = new VeryNumber();\r\n\r\n  public string: VeryString = new VeryString();\r\n\r\n  public vector3: VeryVector3 = new VeryVector3();\r\n\r\n  public vecNumbers: VeryNumber[] = [new VeryNumber(), new VeryNumber(), new VeryNumber()];\r\n\r\n  public isVec: boolean = true;\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n\r\n  public clear(): void {\r\n\r\n  }\r\n\r\n\r\n\r\n}\r\n","export * from './IVeryVar';\r\nexport * from './veryExpression';\r\nexport * from './veryVarManager';\r\nexport * from './veryVariables';\r\nexport * from './variables';\r\nexport * from './varTools';","import { StateConst } from \"../state\";\r\nimport { IVeryVar } from \"./IVeryVar\";\r\nimport { ErrorInfo } from \"../utility\";\r\nimport { VerySceneVariables } from \"../scene\";\r\nimport { VE_Variables } from \"./variables\";\r\nimport { VE_Objects, VeryEngineObject } from \"../object\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { VE_Template } from \"../template\";\r\nimport { VeryExpression } from \"./veryExpression\";\r\n\r\nexport class VarTools {\r\n\r\n  /**\r\n   * ID\r\n   * @param var_id ID\r\n   */\r\n  public static IsVarID(var_id: string): boolean {\r\n    return var_id.indexOf(StateConst.VARIABLE_SYMBOL) > -1;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * 1. * -  ->  -> \r\n   * 2. .* - \r\n   * @param project_name \r\n   * @param object_id \r\n   * @param var_id ID\r\n   * @param error_info \r\n   */\r\n  public static GetVeryVar(project_name: string, object_id: string, var_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (var_id.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n      let varArray: string[] = var_id.split(StateConst.STATE_SEPARATOR);\r\n      if (varArray.length !== 2) {\r\n        error_info.isRight = false;\r\n        error_info.message = \".*ID\" + var_id + \"\";\r\n        return null;\r\n      }\r\n      else {\r\n        for (let i: number = 0; i < varArray.length; i++) {\r\n          varArray[i] = varArray[i].trim();\r\n        }\r\n        // .*\r\n        if (varArray[1].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n          let objects: VE_Objects = VE_Manager.objects(project_name);\r\n          if (objects.isCreated(varArray[0])) {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(varArray[0]);\r\n            let varID: string = varArray[1].substring(1);\r\n            if (veryObject.isCreatedVariable(varID)) {\r\n              return veryObject.getVariable(varID);\r\n            }\r\n            else if (veryObject.isCreatedFsm(varID)) {\r\n              error_info.isRight = false;\r\n              error_info.message = \"ID\" + var_id + \"\";\r\n              return null;\r\n            }\r\n            else if (veryObject.isCreatedExpression(varID)) {\r\n              error_info.isRight = false;\r\n              error_info.message = \"ID\" + var_id + \"\";\r\n              return null;\r\n            }\r\n            else if (veryObject.isCreatedTemplate(varID)) {\r\n              error_info.isRight = false;\r\n              error_info.message = \"ID\" + var_id + \"\";\r\n              return null;\r\n            }\r\n            else {\r\n              error_info.isRight = false;\r\n              error_info.message = \".*ID\" + var_id + \"\";\r\n              return null;\r\n            }\r\n          }\r\n          else {\r\n            error_info.isRight = false;\r\n            error_info.message = \".*ID\" + var_id + \"\";\r\n            return null;\r\n          }\r\n        }\r\n        else {\r\n          error_info.isRight = false;\r\n          error_info.message = \".*ID\" + var_id + \"\";\r\n          return null;\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      // *\r\n      if (var_id.startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n        var_id = var_id.substring(1);\r\n        let objects: VE_Objects = VE_Manager.objects(project_name);\r\n        if (objects.isCreated(object_id)) {\r\n          let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n          if (veryObject.isCreatedVariable(var_id)) {\r\n            return veryObject.getVariable(var_id);\r\n          }\r\n          else if (veryObject.isCreatedFsm(var_id)) {\r\n            error_info.isRight = false;\r\n            error_info.message = \"ID\" + var_id + \"\";\r\n            return null;\r\n          }\r\n          else if (veryObject.isCreatedExpression(var_id)) {\r\n            error_info.isRight = false;\r\n            error_info.message = \"ID\" + var_id + \"\";\r\n            return null;\r\n          }\r\n          else if (veryObject.isCreatedTemplate(var_id)) {\r\n            error_info.isRight = false;\r\n            error_info.message = \"ID\" + var_id + \"\";\r\n            return null;\r\n          }\r\n          else {\r\n            return VarTools.GetGlobalVar(VE_Manager.variables(project_name), var_id, error_info);\r\n          }\r\n        }\r\n        else {\r\n          return VarTools.GetGlobalVar(VE_Manager.variables(project_name), var_id, error_info);\r\n        }\r\n      }\r\n      else {\r\n        error_info.isRight = false;\r\n        error_info.message = \"*ID\" + var_id + \"\";\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param global_vars \r\n   * @param var_id ID\r\n   * @param error_info \r\n   */\r\n  public static GetGlobalVar(global_vars: VE_Variables, var_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (global_vars.isCreatedVariable(var_id)) {\r\n      return global_vars.getVariable(var_id);\r\n    }\r\n    else if (global_vars.isCreatedExpression(var_id)) {\r\n      error_info.isRight = false;\r\n      error_info.message = \"ID\" + var_id + \"\";\r\n      return null;\r\n    }\r\n    else if (global_vars.isCreatedTemplate(var_id)) {\r\n      error_info.isRight = false;\r\n      error_info.message = \"ID\" + var_id + \"\";\r\n      return null;\r\n    }\r\n    else {\r\n      return VarTools.GetSceneVar(var_id, error_info);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param var_id ID\r\n   * @param error_info \r\n   */\r\n  public static GetSceneVar(var_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (VerySceneVariables.Variables.isCreatedVariable(var_id)) {\r\n      return VerySceneVariables.Variables.getVariable(var_id);\r\n    }\r\n    else if (VerySceneVariables.Variables.isCreatedExpression(var_id)) {\r\n      error_info.isRight = false;\r\n      error_info.message = \"ID\" + var_id + \"\";\r\n      return null;\r\n    }\r\n    else {\r\n      error_info.isRight = false;\r\n      error_info.message = \"ID\" + var_id + \"\";\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * 1. * -  -> \r\n   * 2. .* - \r\n   * @param project_name \r\n   * @param object_id \r\n   * @param var_id ID\r\n   * @param error_info \r\n   */\r\n  public static GetTemplate(project_name: string, object_id: string, var_id: string, error_info: ErrorInfo): Nullable<VE_Template> {\r\n    if (var_id.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n      let varArray: string[] = var_id.split(StateConst.STATE_SEPARATOR);\r\n      if (varArray.length !== 2) {\r\n        error_info.isRight = false;\r\n        error_info.message = \".*ID\" + var_id + \"\";\r\n        return null;\r\n      }\r\n      else {\r\n        for (let i: number = 0; i < varArray.length; i++) {\r\n          varArray[i] = varArray[i].trim();\r\n        }\r\n        // .*\r\n        if (varArray[1].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n          let objects: VE_Objects = VE_Manager.objects(project_name);\r\n          if (objects.isCreated(varArray[0])) {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(varArray[0]);\r\n            let varID: string = varArray[1].substring(1);\r\n            if (veryObject.isCreatedTemplate(varID)) {\r\n              return veryObject.getTemplate(varID);\r\n            }\r\n            else {\r\n              error_info.isRight = false;\r\n              error_info.message = \".*ID\" + var_id + \"\";\r\n              return null;\r\n            }\r\n          }\r\n          else {\r\n            error_info.isRight = false;\r\n            error_info.message = \".*ID\" + var_id + \"\";\r\n            return null;\r\n          }\r\n        }\r\n        else {\r\n          error_info.isRight = false;\r\n          error_info.message = \".*ID\" + var_id + \"\";\r\n          return null;\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      // *\r\n      if (var_id.startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n        var_id = var_id.substring(1);\r\n        let objects: VE_Objects = VE_Manager.objects(project_name);\r\n        if (objects.isCreated(object_id)) {\r\n          let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n          if (veryObject.isCreatedTemplate(var_id)) {\r\n            return veryObject.getTemplate(var_id);\r\n          }\r\n        }\r\n        let globalVars: VE_Variables = VE_Manager.variables(project_name);\r\n        if (globalVars.isCreatedTemplate(var_id)) {\r\n          return globalVars.getTemplate(var_id);\r\n        }\r\n        else {\r\n          error_info.isRight = false;\r\n          error_info.message = \"*ID\" + var_id + \"\";\r\n          return null;\r\n        }\r\n      }\r\n      else {\r\n        error_info.isRight = false;\r\n        error_info.message = \"*ID\" + var_id + \"\";\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public static GetVeryVarWithExpression(project_name: string, object_id: string, var_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (var_id.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n      let varArray: string[] = var_id.split(StateConst.STATE_SEPARATOR);\r\n      if (varArray.length !== 2) {\r\n        error_info.isRight = false;\r\n        error_info.message = \".*ID\" + var_id + \"\";\r\n        return null;\r\n      }\r\n      else {\r\n        for (let i: number = 0; i < varArray.length; i++) {\r\n          varArray[i] = varArray[i].trim();\r\n        }\r\n        // .*\r\n        if (varArray[1].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n          let objects: VE_Objects = VE_Manager.objects(project_name);\r\n          if (objects.isCreated(varArray[0])) {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(varArray[0]);\r\n            let varID: string = varArray[1].substring(1);\r\n            if (veryObject.isCreatedVariable(varID)) {\r\n              return veryObject.getVariable(varID);\r\n            }\r\n            else if (veryObject.isCreatedFsm(varID)) {\r\n              return veryObject.getFsm(varID).fsmVar;\r\n            }\r\n            else if (veryObject.isCreatedExpression(varID)) {\r\n              return new VeryExpression(veryObject.getExpression(varID));\r\n            }\r\n            else if (veryObject.isCreatedTemplate(varID)) {\r\n              error_info.isRight = false;\r\n              error_info.message = \"ID\" + var_id + \"\";\r\n              return null;\r\n            }\r\n            else {\r\n              error_info.isRight = false;\r\n              error_info.message = \".*ID\" + var_id + \"\";\r\n              return null;\r\n            }\r\n          }\r\n          else {\r\n            error_info.isRight = false;\r\n            error_info.message = \".*ID\" + var_id + \"\";\r\n            return null;\r\n          }\r\n        }\r\n        else {\r\n          error_info.isRight = false;\r\n          error_info.message = \".*ID\" + var_id + \"\";\r\n          return null;\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      // *\r\n      if (var_id.startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n        var_id = var_id.substring(1);\r\n        let objects: VE_Objects = VE_Manager.objects(project_name);\r\n        if (objects.isCreated(object_id)) {\r\n          let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n          if (veryObject.isCreatedVariable(var_id)) {\r\n            return veryObject.getVariable(var_id);\r\n          }\r\n          else if (veryObject.isCreatedFsm(var_id)) {\r\n            return veryObject.getFsm(var_id).fsmVar;\r\n          }\r\n          else if (veryObject.isCreatedExpression(var_id)) {\r\n            return new VeryExpression(veryObject.getExpression(var_id));\r\n          }\r\n          else if (veryObject.isCreatedTemplate(var_id)) {\r\n            error_info.isRight = false;\r\n            error_info.message = \"ID\" + var_id + \"\";\r\n            return null;\r\n          }\r\n          else {\r\n            return VarTools.GetGlobalVarWithExpression(VE_Manager.variables(project_name), var_id, error_info);\r\n          }\r\n        }\r\n        else {\r\n          return VarTools.GetGlobalVarWithExpression(VE_Manager.variables(project_name), var_id, error_info);\r\n        }\r\n      }\r\n      else {\r\n        error_info.isRight = false;\r\n        error_info.message = \"*ID\" + var_id + \"\";\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public static GetGlobalVarWithExpression(global_vars: VE_Variables, var_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (global_vars.isCreatedVariable(var_id)) {\r\n      return global_vars.getVariable(var_id);\r\n    }\r\n    else if (global_vars.isCreatedExpression(var_id)) {\r\n      return new VeryExpression(global_vars.getExpression(var_id));\r\n    }\r\n    else if (global_vars.isCreatedTemplate(var_id)) {\r\n      error_info.isRight = false;\r\n      error_info.message = \"ID\" + var_id + \"\";\r\n      return null;\r\n    }\r\n    else {\r\n      return VarTools.GetSceneVarWithExpression(var_id, error_info);\r\n    }\r\n  }\r\n\r\n  public static GetSceneVarWithExpression(var_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (VerySceneVariables.Variables.isCreatedVariable(var_id)) {\r\n      return VerySceneVariables.Variables.getVariable(var_id);\r\n    }\r\n    else if (VerySceneVariables.Variables.isCreatedExpression(var_id)) {\r\n      return new VeryExpression(VerySceneVariables.Variables.getExpression(var_id));\r\n    }\r\n    else {\r\n      error_info.isRight = false;\r\n      error_info.message = \"ID\" + var_id + \"\";\r\n      return null;\r\n    }\r\n  }\r\n\r\n}","import { VE_VariableData } from \"../dataSource\";\r\nimport { IVeryVar } from \"./IVeryVar\";\r\nimport { VE_Template } from \"../template\";\r\nimport { IExpression } from \"../expression\";\r\n\r\nexport class VE_Variables {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  public varData: VE_VariableData;\r\n\r\n  private _veryVars: { [key: string]: IVeryVar } = {};\r\n  private _tempalteVars: { [key: string]: VE_Template } = {};\r\n  private _expressions: { [key: string]: IExpression } = {};\r\n\r\n  constructor(project_name: string) {\r\n    this._projectName = project_name;\r\n    this.varData = new VE_VariableData(project_name);\r\n  }\r\n\r\n  public isCreated(id: string): boolean {\r\n    if(this._veryVars[id] || this._tempalteVars[id] || this._expressions[id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isCreatedVariable(id: string): boolean {\r\n    if(this._veryVars[id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addVariable(id: string, very_var: IVeryVar): void {\r\n    this._veryVars[id] = very_var;\r\n  }\r\n\r\n  public getVariable(id: string): IVeryVar {\r\n    return this._veryVars[id];\r\n  }\r\n\r\n  public isCreatedTemplate(id: string): boolean {\r\n    if(this._tempalteVars[id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTemplate(id: string, template: VE_Template): void {\r\n    this._tempalteVars[id] = template;\r\n  }\r\n\r\n  public getTemplate(id: string): VE_Template {\r\n    return this._tempalteVars[id];\r\n  }\r\n\r\n  public isCreatedExpression(id: string): boolean {\r\n    if(this._expressions[id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addExpression(id: string, exp: IExpression): void {\r\n    this._expressions[id] = exp;\r\n  }\r\n\r\n  public getExpression(id: string): IExpression {\r\n    return this._expressions[id];\r\n  }\r\n\r\n\r\n  public clear(): void {\r\n    if(this.varData) {\r\n      this.varData.clear();\r\n    }\r\n    this._veryVars = {};\r\n    this._expressions = {};\r\n    this._tempalteVars = {};\r\n  }\r\n\r\n\r\n\r\n}","import { IVeryVar } from \"./IVeryVar\";\r\nimport { IExpression, ConstantExpression } from \"../expression\";\r\nimport { ErrorInfo } from \"../utility\";\r\n\r\nexport class VeryExpression implements IVeryVar {\r\n  public get varType(): string {\r\n    return this._value.expType;\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"VeryExpression\";\r\n  }\r\n\r\n  public get ID(): string {\r\n    return \"VeryExpression|\";\r\n  }\r\n\r\n  public name: string = '';\r\n\r\n  public get value(): IExpression {\r\n    return this._value;\r\n  }\r\n  public set value(val: IExpression) {\r\n    this._value = val;\r\n  }\r\n  private _value: IExpression = ConstantExpression.Empty();\r\n\r\n  public get isNull(): boolean {\r\n    return this._value === null;\r\n  }\r\n\r\n  constructor(val: IExpression) {\r\n    this._value = val;\r\n  }\r\n\r\n  public setValue(val: any) {\r\n    this._value = val;\r\n  }\r\n\r\n  // \r\n  public getValue(): any {\r\n    return this._value.evaluate();\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n    let newVal = parseFloat(value_str);\r\n    if (!isNaN(newVal)) {\r\n      return newVal;\r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message =\r\n        \": \" +\r\n        this.varType +\r\n        \"\" +\r\n        value_str +\r\n        \"\";\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    return new VeryExpression(this._value);\r\n  }\r\n}","import { ShowError } from \"../html/showError\";\r\nimport { IVeryVar } from \"./IVeryVar\";\r\nimport { ErrorInfo } from \"../utility\";\r\nimport { VE_Variables } from \"./variables\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { VE_Objects, VeryEngineObject } from \"../object\";\r\nimport { VE_Template } from \"../template\";\r\nimport { GameGlobal, VE_ErrorManager, VE_Error } from \"../global\";\r\nimport { VeryExpression } from \"./veryExpression\";\r\nimport { Severity } from \"../enum\";\r\n\r\nexport class VeryVarManager {\r\n\r\n  // private static _veryVarTypes: { [key: string]: IVeryVar } = {};\r\n\r\n  private static _veryVarFunctions: { [key: string]: Function } = {};\r\n\r\n  public static hasVarType(var_type: string): boolean {\r\n    var_type = var_type.toLowerCase();\r\n    if (this._veryVarFunctions[var_type]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // public static addVarType(var_type: string, var_prototype: IVeryVar): void {\r\n  //   // \r\n  //   if (!GameGlobal.PlatformLoaded) {\r\n  //     var_type = var_type.toLowerCase().trim();\r\n  //     // \r\n  //     if (this._veryVarTypes[var_type]) {\r\n  //       ShowError.showError('VeryVar' + var_type + '' + var_prototype.className);\r\n  //     } else {\r\n  //       // console.log(var_proto.VarType);\r\n  //       this._veryVarTypes[var_type] = var_prototype;\r\n  //       // let a = Object.create(this.GetVarType(var_type));\r\n  //       // console.log(a.Value);\r\n  //       // a.Value = true;\r\n  //       // console.log(a.Value);\r\n  //       // a.Value = 1234;\r\n  //       // console.log(a.getValue());\r\n  //       // console.log(this.GetVarType(var_type).__proto__);\r\n  //     }\r\n  //   }\r\n  // }\r\n\r\n  public static addVarType(var_function: Function): void {\r\n    // \r\n    if (!GameGlobal.PlatformLoaded) {\r\n      let tempVar: any = new var_function.prototype.constructor();\r\n      // console.log(`ID  ${tempVar.ID}  ${tempVar.className} `);\r\n      let ids: string[] = tempVar.ID.split('|');\r\n      for (let i: number = 0; i < ids.length; i++) {\r\n        let id: string = ids[i].trim().toLowerCase();\r\n        if (this._veryVarFunctions[id]) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}${tempVar.className}`, '', Severity.Error));\r\n        } else {\r\n          this._veryVarFunctions[id] = var_function;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public static createVariable(var_id: string, var_type: string, value: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    var_type = var_type.toLowerCase();\r\n    if (!this._veryVarFunctions[var_type]) {\r\n      error_info.isRight = false;\r\n      error_info.message = `` + var_type;\r\n      return null;\r\n    }\r\n\r\n    let variable: any;\r\n    try {\r\n      // variable = Object.create(this.getVarType(var_type));\r\n      // newObject.createprototype\r\n      variable = new this._veryVarFunctions[var_type].prototype.constructor();\r\n\r\n      if (!variable) {\r\n        error_info.isRight = false;\r\n        error_info.message = '' + var_type;\r\n        return null;\r\n      }\r\n      let result: any = (<IVeryVar>variable).initValue(value, error_info);\r\n      if (error_info.isRight) {\r\n        (<IVeryVar>variable).setValue(result);\r\n        (<IVeryVar>variable).name = var_id;\r\n        return <IVeryVar>variable;\r\n      } else {\r\n        return null;\r\n      }\r\n    } catch (error) {\r\n      console.log(`${error.message}`);\r\n      error_info.isRight = false;\r\n      error_info.message = '' + var_type + '' + error.message;\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static getVarType(var_type: string): any {\r\n    var_type = var_type.toLowerCase();\r\n    if (this._veryVarFunctions && this._veryVarFunctions[var_type]) {\r\n      return this._veryVarFunctions[var_type];\r\n    }\r\n    return null;\r\n  }\r\n\r\n\r\n  public static remove(var_type: string): void {\r\n    var_type = var_type.toLowerCase();\r\n    delete this._veryVarFunctions[var_type];\r\n  }\r\n\r\n  // *\r\n  // .*\r\n  public static getVariable(var_id: string, project_name: string, object_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (project_name === '') {\r\n      return this.getSceneVariable(var_id, error_info);\r\n    } else if (object_id === '') {\r\n      return this.getGlobalVariable(var_id, project_name, error_info);\r\n    } else {\r\n      let objects: VE_Objects = VE_Manager.objects(project_name);\r\n      if (objects) {\r\n        let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n        if (veryObject) {\r\n          if (veryObject.isCreatedVariable(var_id)) {\r\n            return veryObject.getVariable(var_id);\r\n          } else if (veryObject.isCreatedExpression(var_id)) {\r\n            return new VeryExpression(veryObject.getExpression(var_id));\r\n          } else if (veryObject.isCreatedFsm(var_id)) {\r\n            return veryObject.getFsm(var_id).fsmVar;\r\n          } else {\r\n            return this.getGlobalVariable(var_id, project_name, error_info);\r\n          }\r\n        } else {\r\n          return this.getGlobalVariable(var_id, project_name, error_info);\r\n        }\r\n      } else {\r\n        return this.getGlobalVariable(var_id, project_name, error_info);\r\n      }\r\n    }\r\n  }\r\n\r\n  // *.*\r\n  // .*.*\r\n  public static getTemplateVariable(template_var_id: string, var_id: string, project_name: string, object_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (project_name === '') {\r\n      // \r\n      error_info.isRight = false;\r\n      error_info.message = \"\" + template_var_id + \"\\n\";\r\n      return null;\r\n    }\r\n    else {\r\n      if (object_id !== '')  //\r\n      {\r\n        let objects: VE_Objects = VE_Manager.objects(project_name);\r\n        if (!objects) {\r\n          error_info.isRight = false;\r\n          error_info.message += \"\" + object_id + \"\\n\";\r\n          return null;\r\n        }\r\n        else {\r\n          if (objects.isCreated(object_id)) {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n            if (veryObject.isCreatedTemplate(template_var_id)) {\r\n              let template: VE_Template = veryObject.getTemplate(template_var_id);\r\n              if (template.templateInstance === null) {\r\n                error_info.isRight = false;\r\n                error_info.message += \"\" + template_var_id + \"\\n\";\r\n                return null;\r\n              }\r\n              else {\r\n                if (template.templateInstance.isCreatedVariable(var_id)) {\r\n                  return template.templateInstance.getVariable(var_id);\r\n                }\r\n                else if (template.templateInstance.isCreatedExpression(var_id)) {\r\n                  return new VeryExpression(template.templateInstance.getExpression(var_id));\r\n                }\r\n                else if (template.templateInstance.isCreatedFsm(var_id)) {\r\n                  return template.templateInstance.getFsm(var_id).fsmVar;\r\n                }\r\n                else {\r\n                  error_info.isRight = false;\r\n                  error_info.message += \"\" + template_var_id + \"\" + var_id + \"\\n\";\r\n                  return null;\r\n                }\r\n              }\r\n            }\r\n            else {\r\n              error_info.isRight = false;\r\n              error_info.message += \"\" + template_var_id + \"\\n\";\r\n              return null;\r\n            }\r\n          }\r\n          else {\r\n            error_info.isRight = false;\r\n            error_info.message += \"\" + object_id + \"\\n\";\r\n            return null;\r\n          }\r\n        }\r\n      }\r\n      // \r\n      else {\r\n        let variables: VE_Variables = VE_Manager.variables(project_name);\r\n        if (!variables) {\r\n          error_info.isRight = false;\r\n          error_info.message += \"\" + template_var_id + \"\\n\";\r\n          return null;\r\n        }\r\n        else {\r\n          if (variables.isCreatedTemplate(template_var_id)) {\r\n            let template: VE_Template = variables.getTemplate(template_var_id);\r\n            if (template.templateInstance === null) {\r\n              error_info.isRight = false;\r\n              error_info.message += \"\" + template_var_id + \"\\n\";\r\n              return null;\r\n            }\r\n            else {\r\n              if (template.templateInstance.isCreatedVariable(var_id)) {\r\n                return template.templateInstance.getVariable(var_id);\r\n              }\r\n              else if (template.templateInstance.isCreatedExpression(var_id)) {\r\n                return new VeryExpression(template.templateInstance.getExpression(var_id));\r\n              }\r\n              else if (template.templateInstance.isCreatedFsm(var_id)) {\r\n                return template.templateInstance.getFsm(var_id).fsmVar;\r\n              }\r\n              else {\r\n                error_info.isRight = false;\r\n                error_info.message += \"\" + template_var_id + \"\" + var_id + \"\\n\";\r\n                return null;\r\n              }\r\n            }\r\n          }\r\n          else {\r\n            error_info.isRight = false;\r\n            error_info.message += \"\" + template_var_id + \"\\n\";\r\n            return null;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public static getGlobalVariable(var_id: string, project_name: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (project_name === '') {\r\n      return this.getSceneVariable(var_id, error_info);\r\n    } else {\r\n      let variables: VE_Variables = VE_Manager.variables(project_name);\r\n      if (variables) {\r\n        if (variables.isCreatedVariable(var_id)) {\r\n          return variables.getVariable(var_id);\r\n        } else if (variables.isCreatedExpression(var_id)) {\r\n          return new VeryExpression(variables.getExpression(var_id));\r\n        } else {\r\n          return this.getSceneVariable(var_id, error_info);\r\n        }\r\n      } else {\r\n        return this.getSceneVariable(var_id, error_info);\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public static getSceneVariable(var_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    error_info.isRight = false;\r\n    error_info.message = ''\r\n    return null;\r\n  }\r\n\r\n  public static dispose(): void {\r\n    VeryVarManager._veryVarFunctions = {};\r\n  }\r\n}\r\n","import { IVeryVar } from \"./IVeryVar\";\r\nimport { ErrorInfo } from \"../utility/errorInfo\";\r\nimport { VeryVarManager } from \"./veryVarManager\";\r\nimport { GameObject } from \"../babylon/babylonVariables\";\r\nimport { VeryExpression } from \"./veryExpression\";\r\n\r\nexport class VeryBool implements IVeryVar {\r\n  public get varType(): string {\r\n    return \"bool\";\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"VeryBool\";\r\n  }\r\n\r\n  public get ID(): string {\r\n    return 'bool|';\r\n  }\r\n\r\n  public name: string = '';\r\n\r\n  private _isExpression: boolean = false;\r\n  private _expression: Nullable<VeryExpression> = null;\r\n\r\n  public get value(): boolean {\r\n    if (this._isExpression) {\r\n      return this._expression!.value.evaluate();\r\n    }\r\n    return this._value;\r\n  }\r\n  public set value(val: boolean) {\r\n    this._value = val;\r\n  }\r\n  private _value: boolean = false;\r\n\r\n  constructor() {\r\n    this._value = false;\r\n  }\r\n\r\n  public setValue(val: any): void {\r\n    this._value = val;\r\n  }\r\n\r\n  public getValue(): any {\r\n    if (this._isExpression) {\r\n      return this._expression!.value.evaluate();\r\n    }\r\n    return this._value;\r\n  }\r\n\r\n  public setExpression(expression: VeryExpression): void {\r\n    this._expression = expression;\r\n    this._isExpression = true;\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n    value_str = value_str.trim();\r\n    if (value_str.toLowerCase() === \"false\" || value_str === \"\") {\r\n      return false;\r\n    } else if (value_str.toLowerCase() === \"true\" || value_str === \"\") {\r\n      return true;\r\n    } else if (\r\n      value_str === \"\" ||\r\n      value_str.toLowerCase() === \"null\" ||\r\n      value_str.toLowerCase() === \"none\"\r\n    ) {\r\n      return false;\r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message =\r\n        \": \" +\r\n        this.varType +\r\n        \"\" +\r\n        value_str +\r\n        \"\";\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    let varClone: VeryBool = new VeryBool();\r\n    varClone.setValue(this._value);\r\n    return varClone;\r\n  }\r\n}\r\n\r\nexport class VeryNumber implements IVeryVar {\r\n  public get varType(): string {\r\n    return \"number\";\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"VeryNumber\";\r\n  }\r\n\r\n  public get ID(): string {\r\n    return 'number|';\r\n  }\r\n\r\n  public name: string = '';\r\n\r\n  private _isExpression: boolean = false;\r\n  private _expression: Nullable<VeryExpression> = null;\r\n\r\n  public get value(): number {\r\n    if (this._isExpression && this._expression) {\r\n      return this._expression.value.evaluate();\r\n    }\r\n    return this._value;\r\n  }\r\n  public set value(val: number) {\r\n    this._value = val;\r\n  }\r\n  private _value: number = 0;\r\n\r\n  constructor() {\r\n    this._value = 0;\r\n  }\r\n\r\n  public setValue(val: number): void {\r\n    this._value = val;\r\n  }\r\n\r\n  public setExpression(expression: VeryExpression): void {\r\n    this._expression = expression;\r\n    this._isExpression = true;\r\n  }\r\n\r\n  public getValue(): any {\r\n    if (this._isExpression && this._expression) {\r\n      return this._expression.value.evaluate();\r\n    }\r\n    return this._value;\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n    let newVal = parseFloat(value_str);\r\n    if (!isNaN(newVal)) {\r\n      return newVal;\r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message =\r\n        \": \" +\r\n        this.varType +\r\n        \"\" +\r\n        value_str +\r\n        \"\";\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    let varClone: VeryNumber = new VeryNumber();\r\n    varClone.setValue(this._value);\r\n    return varClone;\r\n  }\r\n}\r\n\r\nexport class VeryString implements IVeryVar {\r\n  public get varType(): string {\r\n    return \"string\";\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"VeryString\";\r\n  }\r\n\r\n  public get ID(): string {\r\n    return 'string|';\r\n  }\r\n\r\n  public name: string = '';\r\n\r\n  private _isExpression: boolean = false;\r\n  private _expression: Nullable<VeryExpression> = null;\r\n\r\n  public get value(): string {\r\n    if (this._isExpression) {\r\n      return this._expression!.value.evaluate().toString();\r\n    }\r\n    return this._value;\r\n  }\r\n  public set value(val: string) {\r\n    this._value = val;\r\n  }\r\n  private _value: string = \"\";\r\n\r\n  constructor() {\r\n    this._value = \"\";\r\n  }\r\n\r\n  public getValue(): any {\r\n    if (this._isExpression) {\r\n      return this._expression!.value.evaluate().toString();\r\n    }\r\n    return this._value;\r\n  }\r\n\r\n  public setValue(val: any): void {\r\n    this._value = val;\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n    let rValue: string;\r\n    if (\r\n      value_str.startsWith(\"'\") ||\r\n      value_str.startsWith('\"') ||\r\n      value_str.startsWith(\"\") ||\r\n      value_str.startsWith(\"\")\r\n    ) {\r\n      rValue = value_str.substring(1, value_str.length - 2);\r\n    } else {\r\n      rValue = value_str;\r\n    }\r\n    return rValue;\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    let varClone: VeryString = new VeryString();\r\n    varClone.setValue(this._value);\r\n    return varClone;\r\n  }\r\n\r\n  public setExpression(expression: VeryExpression): void {\r\n    this._isExpression = true;\r\n    this._expression = expression;\r\n  }\r\n}\r\n\r\nexport class VeryVector3 implements IVeryVar {\r\n  public get varType(): string {\r\n    return \"Vector3\";\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"VeryVector3\";\r\n  }\r\n\r\n  public get ID(): string {\r\n    return 'Vector3|';\r\n  }\r\n\r\n  public name: string = '';\r\n\r\n  private _isExpression: boolean = false;\r\n  private _expression: Nullable<VeryExpression> = null;\r\n\r\n  public get value(): BABYLON.Vector3 {\r\n    if (this._isExpression && this._expression) {\r\n      return this._expression.value.evaluate();\r\n    }\r\n    return this._value;\r\n  }\r\n  public set value(val: BABYLON.Vector3) {\r\n    this._value = val;\r\n  }\r\n  private _value: BABYLON.Vector3 = BABYLON.Vector3.Zero();\r\n\r\n  constructor() {\r\n    this._value = BABYLON.Vector3.Zero();\r\n  }\r\n\r\n  public getValue(): any {\r\n    if (this._isExpression && this._expression) {\r\n      return this._expression.value.evaluate();\r\n    }\r\n    return this._value;\r\n  }\r\n\r\n  public setValue(val: any) {\r\n    this._value = val;\r\n  }\r\n\r\n  public setExpression(expression: VeryExpression): void {\r\n    this._isExpression = true;\r\n    this._expression = expression;\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n    let rValue: BABYLON.Vector3 = BABYLON.Vector3.Zero();\r\n    if (value_str === \"none\" || value_str === \"null\" || value_str === \"\") {\r\n      return rValue;\r\n    } else {\r\n      let vec3Str: string[] = value_str.split(/,|/);\r\n      if (vec3Str.length !== 3) {\r\n        error_info.isRight = false;\r\n        error_info.message =\r\n          \": \" +\r\n          this.varType +\r\n          \", : \" +\r\n          value_str +\r\n          \"Vector3|\";\r\n        return null;\r\n      } else {\r\n        let n1: number = parseFloat(vec3Str[0]);\r\n        let n2: number = parseFloat(vec3Str[1]);\r\n        let n3: number = parseFloat(vec3Str[2]);\r\n        if (isNaN(n1) || isNaN(n2) || isNaN(n3)) {\r\n          error_info.isRight = false;\r\n          error_info.message =\r\n            \": \" +\r\n            this.varType +\r\n            \", : \" +\r\n            value_str +\r\n            \"Vector3|\";\r\n          return null;\r\n        } else {\r\n          rValue = new BABYLON.Vector3(n1, n2, n3);\r\n        }\r\n      }\r\n    }\r\n    return rValue;\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    let varClone: VeryVector3 = new VeryVector3();\r\n    let r: BABYLON.Vector3 = new BABYLON.Vector3(\r\n      this._value.x,\r\n      this._value.y,\r\n      this._value.z\r\n    );\r\n    varClone.setValue(r);\r\n    return varClone;\r\n  }\r\n}\r\n\r\nexport class VeryGameObject implements IVeryVar {\r\n  public get varType(): string {\r\n    return \"GameObject\";\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"VeryGameObject\";\r\n  }\r\n\r\n  public get ID(): string {\r\n    return 'GameObject|';\r\n  }\r\n\r\n  public name: string = '';\r\n\r\n  public get value(): Nullable<GameObject> {\r\n    return this._value;\r\n  }\r\n  public set value(val: Nullable<GameObject>) {\r\n    this._value = val;\r\n  }\r\n  private _value: Nullable<GameObject> = null;\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public setValue(val: any) {\r\n    this._value = val;\r\n  }\r\n\r\n  // \r\n  public getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n\r\n    if (value_str === '' || value_str.toLowerCase() === 'null' || value_str.toLowerCase() === 'none') {\r\n      return null;\r\n    } else {\r\n      let rValue: Nullable<GameObject> = GameObject.Find(value_str);\r\n      if (rValue === null) {\r\n        error_info.isRight = false;\r\n        error_info.message =\r\n          \": \" +\r\n          this.varType +\r\n          \"\" +\r\n          value_str +\r\n          \"\";\r\n      }\r\n      return rValue;\r\n    }\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    let varClone: VeryGameObject = new VeryGameObject();\r\n    varClone.setValue(this._value);\r\n    return varClone;\r\n  }\r\n}\r\n\r\n\r\nVeryVarManager.addVarType(VeryBool);\r\nVeryVarManager.addVarType(VeryNumber);\r\nVeryVarManager.addVarType(VeryString);\r\nVeryVarManager.addVarType(VeryVector3);\r\nVeryVarManager.addVarType(VeryGameObject);\r\n\r\n","import { VeryTable } from \"../verytable/index\";\r\nimport { ShowError } from \"./html/showError\";\r\nimport { LoaderManager } from \"./loader/loaderManager\";\r\nimport { ErrorInfo } from \"./utility\";\r\nimport { IVeryVar, VeryVarManager, VeryBool } from \"./variables\";\r\nimport { VE_Expressions } from \"./expression\";\r\nimport { VE_ErrorManager, GameGlobal } from \"./global\";\r\nimport { VE_Reset } from \"./manager\";\r\n\r\n// entrance\r\nexport * from \"./index\";\r\n\r\nexport class VeryEngine {\r\n\r\n  \r\n\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n\r\n  public init(data: Array<Array<string>>, project_name: string): void {\r\n\r\n    // \r\n    VE_Reset.dispose();\r\n\r\n    // TODO: sTable1\r\n    let tableData: VeryTable = new VeryTable(data, 'VeRyEngine');\r\n    // console.log(tableData.pos(7, 5));\r\n    // console.log(tableData);\r\n    // console.log('');\r\n\r\n    // VeryVarManager.addVarType('bool', new VeryBool());\r\n\r\n    // let errorInfo: ErrorInfo = new ErrorInfo();\r\n    // let v1: Nullable<IVeryVar> = VeryVarManager.createVariable('a', '', '3.1415926', errorInfo);\r\n    // console.log(v1!.getValue());\r\n    // errorInfo.clear();\r\n    // let v2: Nullable<IVeryVar> = VeryVarManager.createVariable('b', '', '', errorInfo);\r\n    // console.log(v2!.getValue());\r\n    // errorInfo.clear();\r\n    // let v3: Nullable<IVeryVar> = VeryVarManager.createVariable('c', '', '1,2,3', errorInfo);\r\n    // console.log(v3!.clone());\r\n    // errorInfo.clear();\r\n    // let v4: Nullable<IVeryVar> = VeryVarManager.createVariable('c', '', 'ac1,dg2,3', errorInfo);\r\n    // console.log(v4);\r\n    // console.log(errorInfo.message);\r\n\r\n\r\n    let manager: LoaderManager = new LoaderManager();\r\n    let result: boolean = manager.load(projectName, tableData);\r\n    console.log(`${result}`);\r\n    if(!result) {\r\n      VE_ErrorManager.Print();\r\n    }\r\n\r\n    // \r\n    GameGlobal.PlatformLoaded = true;\r\n\r\n\r\n\r\n    // this.showErrorTest(tableData);\r\n  }\r\n\r\n\r\n  public showErrorTest(tableData: VeryTable): void {\r\n    // /*\r\n    ShowError.show('' + tableData.pos(7, 5));\r\n\r\n    ShowError.showError('' + tableData.pos(7, 5));\r\n\r\n    ShowError.showWarn('' + tableData.pos(7, 5));\r\n\r\n    ShowError.show('' + tableData.pos(7, 5));\r\n\r\n    ShowError.show('' + tableData.pos(7, 5));\r\n\r\n\r\n    document.getElementById(\"settingsButton\")!.addEventListener(\"click\", ShowError.close);\r\n    // */\r\n  }\r\n\r\n}","\r\nexport * from \"./veryTableRow\";\r\nexport * from \"./veryTable\";\r\nexport * from \"./veryTableSet\";\r\n","import { VeryTableRow } from \"./veryTableRow\";\r\n\r\nexport class VeryTable {\r\n  private _id: string = \"\";\r\n  public get ID(): string {\r\n    return this._id;\r\n  }\r\n  public set ID(id: string) {\r\n    this._id = id;\r\n  }\r\n\r\n  private _columnIDs: string[] = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];\r\n\r\n  private _rows: VeryTableRow[] = [];\r\n\r\n  public get RowCount(): number {\r\n    if (!this._rows) {\r\n      return 0;\r\n    } else {\r\n      return this._rows.length;\r\n    }\r\n  }\r\n\r\n  constructor(data: string[][], id = \"Sheet\") {\r\n    this._id = id;\r\n    this._rows = [];\r\n    if (data) {\r\n      for (let i = 0; i < data.length; i++) {\r\n        let newRow = new VeryTableRow(data[i]);\r\n        this._rows.push(newRow);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param row_index \r\n   * @param column_index \r\n   */\r\n  public getData(row_index: number, column_index: number): string {\r\n    // if (row_index >= 0 && row_index < this._rows.length) {\r\n    //   let row: VeryTableRow = this._rows[row_index];\r\n    //   return row.getData(column_index);\r\n    // } else {\r\n    //   return undefined;\r\n    // }\r\n    return this._rows[row_index].getData(column_index);\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param row_index \r\n   */\r\n  public getRow(row_index: number): VeryTableRow | undefined {\r\n    if (row_index >= 0 && row_index < this._rows.length) {\r\n      return this._rows[row_index];\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param row_index \r\n   * @param column_index \r\n   */\r\n  public pos(row_index: number, column_index: number): string {\r\n    // return \"\" + this.ID + \"\" + (row_index + 1) + \"\" + this.getColumnID(column_index) + \"\";\r\n    return \"\" + (row_index + 1) + \"\" + this.getColumnID(column_index) + \"\" + this.ID + \"\";\r\n  }\r\n\r\n  /**\r\n   * ID26\r\n   * @param column_index \r\n   */\r\n  private getColumnID(column_index: number): string {\r\n    if (column_index >= 0 && column_index < 26) {\r\n      return this._columnIDs[column_index];\r\n    } else if (column_index < 0) {\r\n      return 'error';\r\n    } else {\r\n      let a: number = Math.floor(column_index / 26);\r\n      let b: number = column_index % 26;\r\n      if (a === 0) {\r\n        return this._columnIDs[a];\r\n      } else {\r\n        return this._columnIDs[a - 1] + this._columnIDs[b];\r\n      }\r\n    }\r\n  }\r\n\r\n  // public addRowStringArray(row_data: string[]): void {\r\n\r\n  // }\r\n\r\n  // public addRowStrings(...strs: string[]): void {\r\n\r\n  // }\r\n\r\n  public addRow(data: VeryTableRow): void {\r\n    // \r\n    this._rows.push(data);\r\n\r\n  }\r\n\r\n\r\n}","\r\nexport class VeryTableRow {\r\n  public get Count(): number {\r\n    if (!this._rowData) {\r\n      return 0;\r\n    } else {\r\n      return this._rowData.length;\r\n    }\r\n  }\r\n\r\n  private _rowData: string[] = [];\r\n\r\n  constructor(row_data: string[]) {\r\n    // nullundefined\"\"\r\n    row_data.forEach((val, index, array) => {\r\n      if(!array[index]) {\r\n        array[index] = \"\";\r\n      }\r\n    });\r\n    this._rowData = row_data;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param column_index \r\n   */\r\n  public getData(column_index: number): string {\r\n    // if (column_index >= 0 && column_index < this.Count) {\r\n    //   return this._rowData[column_index];\r\n    // } else {\r\n    //   return undefined;\r\n    // }\r\n    return this._rowData[column_index];\r\n  }\r\n\r\n  public add(data: string): void {\r\n    this._rowData.push(data);\r\n  }\r\n\r\n  public insert(index: number, data: string): void {\r\n    // 2\r\n    this._rowData.push(data);\r\n    let tempData = this._rowData.slice(index);\r\n    tempData.push(data);\r\n    this._rowData = tempData;\r\n  }\r\n\r\n  public remove(index: number): void {\r\n    this._rowData.splice(index, 1);\r\n  }\r\n\r\n  public removeEnd(): void {\r\n    this._rowData.pop();\r\n  }\r\n\r\n  public isEmpty(): boolean {\r\n    if(!this._rowData) {\r\n      return true;\r\n    }\r\n    for(let i: number = 0; i < this._rowData.length; i++) {\r\n      if(this._rowData[i] === '' || this._rowData[i] === null || this._rowData[i] === undefined) {\r\n        continue;\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // public\r\n\r\n  // public remove(index: number): any {\r\n\r\n  // }\r\n}","// import { VeryTableRow } from \"./veryTableRow\";\r\n/**\r\n * 1. TypeScript\r\n * 2. \r\n */\r\nimport { VeryTable } from \"./veryTable\";\r\n\r\nexport class VeryTableSet {\r\n\r\n  private _tables: VeryTable[] = [];\r\n\r\n  public get Count(): number {\r\n    if (!this._tables) {\r\n      return 0;\r\n    } else {\r\n      return this._tables.length;\r\n    }\r\n  }\r\n\r\n  constructor(tables?: VeryTable[]) {\r\n    if (tables) {\r\n      this._tables = tables;\r\n    }\r\n  }\r\n\r\n  public getTable(index: number): VeryTable | undefined {\r\n    if (index >= 0 && index < this.Count) {\r\n      return this._tables[index];\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  public addTable(table: VeryTable): void {\r\n    this._tables.push(table);\r\n  }\r\n\r\n  public removeTable(index: number): void {\r\n    if (index >= 0 && index < this.Count) {\r\n      this._tables.splice(index, 1);\r\n    }\r\n  }\r\n\r\n\r\n}"]}