{"version":3,"sources":["node_modules/_browser-pack@6.1.0@browser-pack/_prelude.js","src/game.ts","src/main.ts","src/veryengine/action/actionBehaviour.ts","src/veryengine/action/actions.ts","src/veryengine/action/assignment.ts","src/veryengine/action/index.ts","src/veryengine/dataSource/dataSource.ts","src/veryengine/dataSource/fsmData.ts","src/veryengine/dataSource/index.ts","src/veryengine/dataSource/stateActionData.ts","src/veryengine/dataSource/stateData.ts","src/veryengine/dataSource/stateTriggerData.ts","src/veryengine/dataSource/variableData.ts","src/veryengine/enum/enumTypes.ts","src/veryengine/enum/index.ts","src/veryengine/expression/expressionEnum.ts","src/veryengine/expression/expressions.ts","src/veryengine/expression/functions.ts","src/veryengine/expression/index.ts","src/veryengine/global/gameGlobal.ts","src/veryengine/global/index.ts","src/veryengine/global/time.ts","src/veryengine/html/index.ts","src/veryengine/html/showError.ts","src/veryengine/index.ts","src/veryengine/library/action/index.ts","src/veryengine/library/action/transform.ts","src/veryengine/library/trigger/index.ts","src/veryengine/library/trigger/input.ts","src/veryengine/manager/index.ts","src/veryengine/manager/manager.ts","src/veryengine/manager/projects.ts","src/veryengine/manager/reset.ts","src/veryengine/object/index.ts","src/veryengine/object/objects.ts","src/veryengine/object/veryObject.ts","src/veryengine/state/associatedState.ts","src/veryengine/state/fsm.ts","src/veryengine/state/index.ts","src/veryengine/state/state.ts","src/veryengine/state/stateAction.ts","src/veryengine/state/stateConst.ts","src/veryengine/template/index.ts","src/veryengine/template/template.ts","src/veryengine/template/templates.ts","src/veryengine/trigger/index.ts","src/veryengine/trigger/triggerBehaviour.ts","src/veryengine/trigger/triggers.ts","src/veryengine/utility/arrayUtility.ts","src/veryengine/utility/dictionary.ts","src/veryengine/utility/errorInfo.ts","src/veryengine/utility/index.ts","src/veryengine/variables/babylonVariables.ts","src/veryengine/variables/index.ts","src/veryengine/variables/veryVarManager.ts","src/veryengine/variables/veryVariables.ts","src/veryengine/veryEngine.ts","src/verytable/index.ts","src/verytable/veryTable.ts","src/verytable/veryTableRow.ts","src/verytable/veryTableSet.ts"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","veryEngine_1","Game","canvasElement","fps","this","_showFps","_canvas","VeryEngine","Canvas","_fps","_table","document","getElementById","prototype","createScene","_engine","dispose","BABYLON","Engine","engine","window","addEventListener","resize","_scene","Scene","camera","ArcRotateCamera","Vector3","setPosition","attachControl","lowerBetaLimit","upperBetaLimit","Math","PI","lowerRadiusLimit","displayLoadingUI","SceneLoader","Append","scene","hideLoadingUI","init","hot1","getData","projectName","onBeforeRenderObservable","add","Time","_sum","animate","_this","runRenderLoop","width","clientWidth","render","updateFpsPos","toggleDebug","scenes","debugLayer","isVisible","hide","show","embedMode","style","right","body","innerHTML","getFps","toFixed","game","canvas","fpsLabel","game_1","__importDefault","default","enum_1","VE_ActionBehaviour","_enabled","_projectName","_objectID","_actionID","_erveryFrame","isSequence","_sequenceState","SequenceActionState","Initial","Object","defineProperty","val","ActionType","Normal","setEveryFrame","is_every_frame","setActionID","object_id","action_id","paraParser","para_array","action","action_val","every_frame","active","onUpdate","update","pause","Pause","resume","Running","stop","finish","enabled","html_1","VE_Actions","addAction","ids","ID","split","id","trim","toLowerCase","_actionDics","ShowError","showError","hasAction","createAction","create","remove","VE_Assignment","state","total_string","_totalStr","_leftType","AssignType","Variable","_rightType","_state","__export","fsmData_1","VE_DataSource","project_name","name_id","is_template","_templateID","_isTemplate","_fsmIDs","_fsmDic","_triggerIDs","_triggerDic","_actionIDs","_actionDic","_actionInitValue","hasFsm","fsm_id","createFsm","push","VE_FsmData","getFsm","hasFsmIndex","index","getFsmID","hasTrigger","trigger_id","addTrigger","trigger_data","getTrigger","hasTriggerIndex","getTriggerID","action_data","action_init_val","getAction","getActionInitVal","hasActionIndex","getActionID","clear","data_source","_initialValStr","_states","_dataSource","_fsmID","initFsm","initial_var","addState","state_data","getState","VE_StateActionData","sequence","type","StateActionType","Action","totalString","varID","varValue","actionID","everyFrame","setNormalAction","setAssignmentAction","var_id","var_value","Assignment","state_1","VE_StateData","fsm_data","val_str","is_initial_value","state_index","StateConst","STATE_INDEX","_stateIndex","logicalExp","_triggers","_actions","_associatedStates","_isSequence","_fsmData","_valStr","_isInitialValue","hasAssociatedState","addAssociatedState","associated_state_data","getAssociatedState","setSequence","VE_StateTriggerData","triggerID","logicalSwitch","VE_Variable","_variableIDs","_varDics","hasVariable","addVariable","var_paras","getVariableID","getVariableParas","AssociatedFsmType","ExpressionType","TrueExpression","evaluate","clone","constantExpression","Pow","parameterNumber","args","value","pow","NaN","expType","Ln","log","Infinity","Lg","log10","Sqrt","sqrt","Abs","abs","Random","distance","random","Round","round","Sin","sin","ASin","asin","Cos","cos","ACos","acos","Tan","tan","ATan","atan","GameGlobal","_frame","getDeltaTime","initZone","errorZone","showMsg","prefix","error_msg","errorContentNow","errorContentPrefix","display","closeBtn","querySelector","that","showWarn","close","Action_Translate","_super","apply","arguments","_refType","Space","LOCAL","__extends","destroy","index_1","trigger_1","Trigger_MouseDown","onPointerObservable","pointInfo","VE_TriggerBehaviour","VE_Triggers","VE_Manager","VE_Projects","VE_Reset","utility_1","VE_Objects","_objectIDs","_objectDics","isCreated","very_object","getObjectID","getVeryObject","unloadObject","ArrayUtility","tempObject","variables_1","VeryObject","game_object","gameObject","GameObject","_variables","_expressions","_fsms","_templates","addFsm","fsm","trigger","variable","getVariable","hasExpression","exp_id","addExpression","expression","getExpression","hasTemplate","template_id","addTemplate","template","getTemplate","hasAnyVar","unload","VE_AssociatedState","from_state","_types","_indexs","_numberIndex","_templateIDs","_fromState","key","connect","dictionary_1","global_1","stateConst_1","VE_Fsm","_id","_stateDics","Dictionary","_frameCount","hasState","state_value","ContainsKey","Add","GetValue","removeState","Remove","receiveEvent","frameCount","startsWith","ASSOCIATED_STATE_PREFIX","indexOf","VE_State","_value","_stateActions","_assocaitedStates","_fsm","setValue","state_action","Mesh","bind","VE_StateAction","is_sequence","_type","_action","STATE_SEPARATOR","VARIABLE_SYMBOL","VE_Template","VE_Templates","_logicalSwitch","_logicalExp","_triggerTargets","_triggerID","set","setTriggerID","addLogicalSwitch","exp","addTriggerTarget","sendEvent","isEnabled","eventProcess","_triggerDics","console","createTrigger","arr","ele","splice","_keys","_values","Count","SetValue","ks","GetKeys","GetValues","ErrorInfo","isRight","message","mesh","Transform","eulerAngles","Zero","showError_1","VeryVarManager","hasVarType","var_type","_veryVarTypes","addVarType","var_prototype","createVar","getVarType","veryVarManager_1","VeryBool","VarType","getValue","initValue","value_str","error_info","VeryInt","Value","newFloat","parseFloat","isNaN","VeryFloat","newVal","VeryNumber","VeryString","substr","VeryVector3","data","tableData","VeryTable","pos","showErrorTest","veryTableRow_1","_columnIDs","_rows","newRow","VeryTableRow","row_index","column_index","getRow","getColumnID","floor","b","addRow","row_data","_rowData","insert","tempData","slice","removeEnd","pop","VeryTableSet","tables","_tables","getTable","addTable","table","removeTable"],"mappings":"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","file":"veryengine.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","/// <reference path=\"./dts/babylon.d.ts\"/>\r\n\r\nimport { VeryEngine, Time } from \"./veryengine/veryEngine\";\r\n\r\nexport default class Game {\r\n\tprivate _canvas: HTMLCanvasElement;\r\n\tprivate _fps: HTMLElement;\r\n\tprivate _table!: HTMLElement;\r\n\tprivate _showFps: boolean = true;\r\n\tprivate _engine!: BABYLON.Engine;\r\n\tprivate _scene!: BABYLON.Scene;\r\n\t// private _camera!: BABYLON.FreeCamera;\r\n\r\n\tconstructor(canvasElement: HTMLCanvasElement, fps: HTMLElement) {\r\n\t\tthis._canvas = canvasElement;\r\n\t\tVeryEngine.Canvas = this._canvas;\r\n\t\tthis._fps = fps;\r\n\t\t// this._engine = new BABYLON.Engine(this._canvas, true);\r\n\t\tthis._table = document.getElementById(\"VeryTable\")!;\r\n\t}\r\n\r\n\t/**\r\n\t * 创建场景，并且启动\r\n\t */\r\n\tcreateScene(): Game {\r\n\t\t// 假设有运行中的engine，先停止，重新初始化\r\n\t\tif (this._engine) {\r\n\t\t\tthis._engine.dispose();\r\n\t\t}\r\n\t\tthis._engine = new BABYLON.Engine(this._canvas, true);\r\n\t\tVeryEngine.Engine = this._engine;\r\n\t\t// Resize\r\n\t\tlet engine = this._engine;\r\n\t\twindow.addEventListener(\"resize\", function () {\r\n\t\t\tengine.resize();\r\n\t\t});\r\n\r\n\t\tthis._scene = new BABYLON.Scene(this._engine);\r\n\t\tVeryEngine.Scene = this._scene;\r\n\r\n\t\t// 设定相机\r\n\t\tvar camera = new BABYLON.ArcRotateCamera(\"MainCamera\", 0, 0, 10, new BABYLON.Vector3(0, 0, 0), this._scene);\r\n    camera.setPosition(new BABYLON.Vector3(20, 200, 400));\r\n    camera.attachControl(this._canvas, true);\r\n    camera.lowerBetaLimit = 0.1;\r\n    camera.upperBetaLimit = (Math.PI / 2) * 0.99;\r\n    camera.lowerRadiusLimit = 150;\r\n\r\n\t\t// 加载过度动画开\r\n\t\tengine.displayLoadingUI();\r\n\r\n\t\t// 加载scene.babylon场景文件\r\n\t\tBABYLON.SceneLoader.Append(\"./scene/\", \"scene.babylon\", this._scene, function (scene) {\r\n\t\t\t\t// do something with the scene\r\n\t\t\t\t// 加载过度动画关\r\n\t\t\t\tengine.hideLoadingUI();\r\n\t\t});\r\n\r\n\r\n\t\t// const lightPos = new BABYLON.Vector3(0, 1, 0);\r\n\t\t// new BABYLON.HemisphericLight('hemlight', lightPos, this._scene);\r\n\r\n\t\t// const sphereOpts = { segments: 16, diameter: 1 };\r\n\t\t// let sphere = BABYLON.MeshBuilder.CreateSphere(\r\n\t\t// \t'mainsphere',\r\n\t\t// \tsphereOpts,\r\n\t\t// \tthis._scene\r\n\t\t// );\r\n\t\t// sphere.position.y = 1;\r\n\r\n\t\t// const groundOpts = { width: 6, height: 6, subdivisions: 2 };\r\n\t\t// BABYLON.MeshBuilder.CreateGround('mainground', groundOpts, this._scene);\r\n\r\n\t\t// 表格加载测试\r\n\t\t// console.log(hot1.getData());\r\n\t\tlet entrance: VeryEngine = new VeryEngine();\r\n\t\tentrance.init(hot1.getData(), projectName);\r\n\r\n\t\t// 全局渲染帧循环\r\n\t\tthis._scene.onBeforeRenderObservable.add(() => {\r\n\t\t\t// 添加帧函数\r\n\t\t\tTime._sum();\r\n\t\t})\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * 启动渲染循环；\r\n\t */\r\n\tanimate(): Game {\r\n\t\tthis._engine.runRenderLoop(() => {\r\n\t\t\tif (this._canvas.width !== this._canvas.clientWidth) {\r\n\t\t\t\tthis._engine.resize();\r\n\t\t\t}\r\n\r\n\t\t\tif (this._scene) {\r\n\t\t\t\tthis._scene.render();\r\n\t\t\t}\r\n\r\n\t\t\tif (this._showFps) {\r\n\t\t\t\tthis.updateFpsPos();\r\n\t\t\t}\r\n\r\n\r\n\t\t});\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * 属性编辑器UI界面控制；\r\n\t */\r\n\ttoggleDebug(): Game {\r\n\t\tif (this._engine) {\r\n\t\t\t// Always showing the debug layer, because you can close it by itself\r\n\t\t\tvar scene = this._engine.scenes[0];\r\n\t\t\tif (scene.debugLayer.isVisible()) {\r\n\t\t\t\tscene.debugLayer.hide();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// 此处修改了babylon.d.ts文件\r\n\t\t\t\tscene.debugLayer.show({ embedMode: true });\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * 更新fps显示及显示位置\r\n\t */\r\n\tupdateFpsPos(): void {\r\n\t\tif (this._fps) {\r\n\t\t\tthis._fps.style.right = document.body.clientWidth - (this._table.clientWidth + this._canvas.clientWidth) + \"px\";\r\n\r\n\t\t\tthis._fps.innerHTML = this._engine.getFps().toFixed() + \" fps\";\r\n\t\t}\r\n\t}\r\n}\r\n","import Game from \"./game\";\r\n\r\nlet game!:Game;\r\n/**\r\n * 初始化入口；\r\n */\r\nfunction initGame(): void {\r\n  let canvas = <HTMLCanvasElement>document.getElementById(\"renderCanvas\");\r\n  let fpsLabel = document.getElementById(\"fpsLabel\");\r\n  if(canvas !== null && fpsLabel !== null) {\r\n    game = new Game(canvas, fpsLabel);\r\n    game.createScene().animate();  // 链式调用\r\n  }\r\n}\r\n\r\nfunction runBtn(): void {\r\n  if(game) {\r\n    game.createScene().animate();\r\n  }\r\n}\r\n\r\nfunction toggleDebug(): void {\r\n  if(game) {\r\n    game.toggleDebug();\r\n  }\r\n}\r\n\r\n// 关联按钮\r\ndocument.getElementById(\"runButton\")!.addEventListener(\"click\", runBtn);\r\n\r\n// 关联按钮\r\ndocument.getElementById(\"debugButton\")!.addEventListener(\"click\", toggleDebug);\r\n\r\n// 启动引擎\r\ninitGame();\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import { ActionType, SequenceActionState } from \"../enum\";\r\n\r\nexport abstract class VE_ActionBehaviour {\r\n\r\n  public abstract get ID(): string;\r\n\r\n  public get enabled(): boolean {\r\n    return this._enabled;\r\n  }\r\n  public set enabled(val: boolean) {\r\n    this._enabled = val;\r\n  }\r\n  private _enabled: boolean = true;\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  };\r\n  private _projectName: string = '';\r\n\r\n  // protected GameObject ObjectInstance = null;\r\n  // protected veryObject: VeryObject = null;\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  };\r\n  private _objectID: string = '';\r\n\r\n  public get actionID(): string {\r\n    return this._actionID;\r\n  }\r\n  private _actionID: string = '';\r\n\r\n  public get Type(): ActionType {\r\n    return ActionType.Normal;\r\n  }\r\n\r\n  private _erveryFrame: boolean = false;\r\n  public get everyFrame(): boolean {\r\n    return this._erveryFrame;\r\n  }\r\n\r\n\r\n  public isSequence: boolean = false;\r\n\r\n  public get SequenceState(): SequenceActionState {\r\n    return this._sequenceState;\r\n  }\r\n  public set SequenceState(val: SequenceActionState) {\r\n    this._sequenceState = val;\r\n  }\r\n  private _sequenceState: SequenceActionState = SequenceActionState.Initial;\r\n\r\n  // private VE_SequenceActions _sequenceAction = null;\r\n\r\n\r\n  public setEveryFrame(is_every_frame: boolean): void {\r\n    this._erveryFrame = is_every_frame;\r\n  }\r\n\r\n  public setActionID(object_id: string, action_id: string): void {\r\n    this._objectID = object_id;\r\n    this._actionID = action_id;\r\n  }\r\n\r\n  // SetVeryObject(): void {}\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    if (para_array) { }\r\n    return true;\r\n  }\r\n\r\n  public action(action_val: boolean, every_frame: boolean): void {\r\n    this._enabled = action_val;\r\n    this._erveryFrame = every_frame;\r\n    if (this._enabled) {\r\n      this.active()\r\n      if (!this._erveryFrame) {\r\n        this.onUpdate();\r\n      }\r\n    }\r\n  }\r\n\r\n  public abstract active(): void;\r\n\r\n\r\n  public update(): void {\r\n    if(this._enabled && this._erveryFrame) {\r\n      this.onUpdate();\r\n    }\r\n  }\r\n\r\n  public onUpdate(): void {\r\n\r\n  }\r\n\r\n  public pause(): void {\r\n    this._sequenceState = SequenceActionState.Pause;\r\n  }\r\n\r\n  public resume(): void {\r\n    this._sequenceState = SequenceActionState.Running;\r\n  }\r\n\r\n  public stop(): void {\r\n    this._sequenceState = SequenceActionState.Initial;\r\n  }\r\n\r\n  public finish(): void {\r\n    this._sequenceState = SequenceActionState.Initial;\r\n\r\n    this.enabled = false;\r\n  }\r\n\r\n  // 如果创建过程中有add callback，需要destroy时删除\r\n  public abstract destroy(): void;\r\n\r\n\r\n}","import { VE_ActionBehaviour } from \"./actionBehaviour\";\r\nimport { ShowError } from \"../html\";\r\n\r\nexport class VE_Actions {\r\n\r\n  private static _actionDics: { [key: string]: VE_ActionBehaviour} = {};\r\n\r\n  public static addAction(action: VE_ActionBehaviour): void {\r\n    let ids: string[] = action.ID.split('|');\r\n    for(let i: number = 0; i < ids.length; i++) {\r\n      let id: string = ids[i].trim().toLowerCase();\r\n      if(this._actionDics[id]) {\r\n        ShowError.showError(`响应初始化错误，响应ID重复，当前响应ID：${id}，请问当前响应重新分配响应ID！`);\r\n      } else {\r\n        this._actionDics[id] = action;\r\n      }\r\n    }\r\n  }\r\n\r\n  public static hasAction(action_id: string): boolean {\r\n    action_id = action_id.toLowerCase();\r\n    if(this._actionDics[action_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static createAction(action_id: string): VE_ActionBehaviour {\r\n    action_id = action_id.toLowerCase();\r\n    return Object.create(this._actionDics[action_id]);\r\n  }\r\n  \r\n  public static remove(action_id: string): void {\r\n    action_id = action_id.toLowerCase();\r\n    delete this._actionDics[action_id];\r\n  }\r\n\r\n\r\n}","import { VE_State } from \"../state\";\r\nimport { AssignType } from \"../enum\";\r\n\r\nexport class VE_Assignment {\r\n\r\n  public get state(): VE_State {\r\n    return this._state;\r\n  }\r\n  private _state: VE_State;\r\n\r\n  private _totalStr: string = '';\r\n\r\n  public get leftType(): AssignType {\r\n    return this._leftType;\r\n  }\r\n  private _leftType: AssignType = AssignType.Variable;\r\n\r\n  public get rightType(): AssignType {\r\n    return this._rightType;\r\n  }\r\n  private _rightType: AssignType = AssignType.Variable;\r\n\r\n  \r\n  constructor(state: VE_State, total_string: string) {\r\n    this._state = state;\r\n    this._totalStr = total_string;\r\n  }\r\n\r\n  \r\n}","export * from './actionBehaviour';\r\nexport * from './assignment';\r\nexport * from './actions';","import { VE_FsmData } from \"./fsmData\";\r\n\r\nexport class VE_DataSource {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = '';\r\n\r\n  public get templateID(): string {\r\n    return this._templateID;\r\n  }\r\n  private _templateID: string = '';\r\n\r\n  public get isTemplate(): boolean {\r\n    return this._isTemplate;\r\n  }\r\n  private _isTemplate: boolean = false;\r\n\r\n  public get id(): string {\r\n    if (this._isTemplate) {\r\n      return this._templateID;\r\n    } else {\r\n      return this._objectID;\r\n    }\r\n  }\r\n\r\n  private _fsmIDs: string[] = [];\r\n  private _fsmDic: { [key: string]: VE_FsmData } = {};\r\n\r\n  private _triggerIDs: string[] = [];\r\n  private _triggerDic: { [key: string]: string[] } = {};\r\n\r\n  private _actionIDs: string[] = [];\r\n  private _actionDic: { [key: string]: string[] } = {};\r\n  private _actionInitValue: { [key: string]: string[] } = {};\r\n\r\n  public get triggerCount(): number {\r\n    return this._triggerIDs.length;\r\n  }\r\n\r\n  public get actionCount(): number {\r\n    return this._actionIDs.length;\r\n  }\r\n\r\n  public get fsmCount(): number {\r\n    return this._fsmIDs.length;\r\n  }\r\n\r\n\r\n  constructor(project_name: string, name_id: string, is_template: boolean) {\r\n    this._projectName = project_name;\r\n    this._isTemplate = is_template;\r\n    if(is_template) {\r\n      this._templateID = name_id;\r\n    } else {\r\n      this._objectID = name_id;\r\n    }\r\n  }\r\n\r\n  public hasFsm(fsm_id: string): boolean {\r\n    if(this._fsmDic[fsm_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public createFsm(fsm_id: string): void {\r\n    this._fsmIDs.push(fsm_id);\r\n    this._fsmDic[fsm_id] = new VE_FsmData(fsm_id, this);\r\n  }\r\n\r\n  public getFsm(fsm_id: string): VE_FsmData {\r\n    return this._fsmDic[fsm_id];\r\n  }\r\n\r\n  public hasFsmIndex(index: number): boolean {\r\n    if(index >= 0 && index < this._fsmIDs.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getFsmID(index: number): string {\r\n    return this._fsmIDs[index];\r\n  }\r\n\r\n  public hasTrigger(trigger_id: string): boolean {\r\n    if(this._triggerDic[trigger_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTrigger(trigger_id: string, trigger_data: string[]): void {\r\n    this._triggerIDs.push(trigger_id);\r\n    this._triggerDic[trigger_id] = trigger_data;\r\n  }\r\n\r\n  public getTrigger(trigger_id: string): string[] {\r\n    return this._triggerDic[trigger_id];\r\n  }\r\n\r\n  public hasTriggerIndex(index: number): boolean {\r\n    if(index >=0 && index < this._triggerIDs.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getTriggerID(index: number): string {\r\n    return this._triggerIDs[index];\r\n  }\r\n\r\n  public hasAction(action_id: string): boolean {\r\n    if(this._actionDic[action_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addAction(action_id: string, action_data: string[], action_init_val: string[]): void {\r\n    this._actionIDs.push(action_id);\r\n    this._actionDic[action_id] = action_data;\r\n    this._actionInitValue[action_id] = action_init_val;\r\n  }\r\n\r\n  public getAction(action_id: string): string[] {\r\n    return this._actionDic[action_id];\r\n  }\r\n\r\n  public getActionInitVal(action_id: string): string[] {\r\n    return this._actionInitValue[action_id];\r\n  }\r\n\r\n  public hasActionIndex(index: number): boolean {\r\n    if(index >= 0 && index < this._actionIDs.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getActionID(index: number): string {\r\n    return this._actionIDs[index];\r\n  }\r\n\r\n  public clear(): void {\r\n    this._fsmIDs = [];\r\n    this._fsmDic = {};\r\n    this._triggerIDs = [];\r\n    this._triggerDic = {};\r\n    this._actionIDs = [];\r\n    this._actionDic = {};\r\n    this._actionInitValue = {};\r\n  }\r\n\r\n\r\n\r\n}","import { VE_DataSource, VE_StateData } from \"./index\";\r\n\r\nexport class VE_FsmData {\r\n  public get dataSource(): VE_DataSource {\r\n    return this._dataSource;\r\n  }\r\n  private _dataSource: VE_DataSource;\r\n\r\n  public get fsmID(): string {\r\n    return this._fsmID;\r\n  }\r\n  private _fsmID: string;\r\n\r\n  public get initialValStr(): string {\r\n    return this._initialValStr;\r\n  }\r\n  private _initialValStr: string = 'defalut';\r\n\r\n  private _states: VE_StateData[] = [];\r\n\r\n  public get count(): number {\r\n    return this._states.length;\r\n  }\r\n\r\n  constructor(fsm_id: string, data_source: VE_DataSource) {\r\n    this._dataSource = data_source;\r\n    this._fsmID = fsm_id;\r\n  }\r\n\r\n  initFsm(initial_var: string): void {\r\n    this._initialValStr = initial_var;\r\n  }\r\n\r\n  addState(state_data: VE_StateData): void {\r\n    this._states.push(state_data);\r\n  }\r\n\r\n  getState(index: number): VE_StateData {\r\n    return this._states[index];\r\n  }\r\n}","export * from './variableData';\r\nexport * from './fsmData';\r\nexport * from './stateActionData';\r\nexport * from './stateTriggerData';\r\nexport * from './stateData';\r\nexport * from './dataSource';\r\n\r\n","import { StateActionType } from \"../enum\";\r\n\r\nexport class VE_StateActionData {\r\n\r\n  actionID: string;\r\n  enabled: string;\r\n  everyFrame: string;\r\n  isSequence: string;\r\n  type: StateActionType;\r\n  totalString: string = '';\r\n  varID: string = '';\r\n  varValue: string = '';\r\n\r\n  constructor(action_id: string, enabled: string = 'false', every_frame: string = 'false', sequence: string = 'false', type: StateActionType = StateActionType.Action) {\r\n    this.actionID = action_id;\r\n    this.enabled = enabled;\r\n    this.everyFrame = every_frame;\r\n    this.isSequence = sequence;\r\n    this.type = type;\r\n  }\r\n\r\n  setNormalAction(action_id: string, enabled: string = 'false', every_frame: string = 'false', sequence: string = 'false'): void {\r\n    this.actionID = action_id;\r\n    this.enabled = enabled;\r\n    this.everyFrame = every_frame;\r\n    this.isSequence = sequence;\r\n    this.type = StateActionType.Action;\r\n  }\r\n\r\n  setAssignmentAction(total_string: string, var_id: string, var_value: string): void {\r\n    this.totalString = total_string;\r\n    this.varID = var_id;\r\n    this.varValue = var_value;\r\n    this.type = StateActionType.Assignment;\r\n  }\r\n\r\n}","import { VE_FsmData } from \"./index\";\r\nimport { StateConst } from \"../state\";\r\nimport { VE_StateTriggerData } from \"./stateTriggerData\";\r\nimport { VE_StateActionData } from \"./stateActionData\";\r\n\r\nexport class VE_StateData {\r\n\r\n  public get fsmData(): VE_FsmData {\r\n    return this._fsmData;\r\n  }\r\n  private _fsmData: VE_FsmData;\r\n\r\n  public get ValStr(): string {\r\n    return this._valStr;\r\n  }\r\n  private _valStr: string;\r\n\r\n  public get isInitialValue(): boolean {\r\n    return this._isInitialValue;\r\n  }\r\n  private _isInitialValue: boolean;\r\n\r\n  public get stateIndex(): number {\r\n    return this._stateIndex;\r\n  }\r\n  private _stateIndex: number = StateConst.STATE_INDEX;\r\n\r\n  public logicalExp: string = '';\r\n\r\n  private _triggers: VE_StateTriggerData[] = [];\r\n  private _actions: VE_StateActionData[] = [];\r\n  private _associatedStates: string[] = [];\r\n\r\n  public get isSequence(): boolean {\r\n    return this._isSequence;\r\n  }\r\n  private _isSequence: boolean = false;\r\n\r\n  public get triggerCount(): number {\r\n    return this._triggers.length;\r\n  }\r\n\r\n  public get actionCount(): number {\r\n    return this._actions.length;\r\n  }\r\n\r\n  public get associatedStateCount(): number {\r\n    return this._associatedStates.length;\r\n  }\r\n\r\n  constructor(fsm_data: VE_FsmData, val_str: string, is_initial_value: boolean, state_index: number = StateConst.STATE_INDEX) {\r\n    this._fsmData = fsm_data;\r\n    this._valStr = val_str;\r\n    this._isInitialValue = is_initial_value;\r\n    this._stateIndex = state_index;\r\n  }\r\n\r\n  hasTrigger(index: number): boolean {\r\n    if(index >= 0 && index < this._triggers.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  addTrigger(trigger_data: VE_StateTriggerData): void {\r\n    this._triggers.push(trigger_data);\r\n  }\r\n\r\n  getTrigger(index: number): VE_StateTriggerData {\r\n    return this._triggers[index];\r\n  }\r\n\r\n  hasAction(index: number): boolean {\r\n    if(index >= 0 && index < this._actions.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  addAction(action_data: VE_StateActionData): void {\r\n    this._actions.push(action_data);\r\n  }\r\n\r\n  getAction(index: number): VE_StateActionData {\r\n    return this._actions[index];\r\n  }\r\n\r\n  hasAssociatedState(index: number): boolean {\r\n    if(index >= 0 && index < this._associatedStates.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  addAssociatedState(associated_state_data: string): void {\r\n    this._associatedStates.push(associated_state_data);\r\n  }\r\n\r\n  getAssociatedState(index: number): string {\r\n    return this._associatedStates[index];\r\n  }\r\n\r\n  setSequence(): void {\r\n    this._isSequence = true;\r\n  }\r\n\r\n}","export class VE_StateTriggerData {\r\n\r\n  triggerID: string;\r\n  logicalSwitch: string;\r\n  logicalExp: string;\r\n\r\n  public static get Empty(): VE_StateTriggerData {\r\n    return new VE_StateTriggerData('');\r\n  }\r\n\r\n  constructor(trigger_id: string) {\r\n    this.triggerID = trigger_id;\r\n    this.logicalSwitch = '';\r\n    this.logicalExp = '';\r\n   }\r\n}","export class VE_Variable {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  private _variableIDs: string[] = [];\r\n  private _varDics: {[key: string]: string[]} = {};\r\n\r\n  public get count(): number {\r\n    return this._variableIDs.length;\r\n  }\r\n\r\n  constructor(project_name: string) {\r\n    this._projectName = project_name;\r\n  }\r\n\r\n  hasVariable(var_id: string): boolean {\r\n    if(this._varDics[var_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  addVariable(var_id: string, var_paras: string[]): void {\r\n    this._varDics[var_id] = var_paras;\r\n    this._variableIDs.push(var_id);\r\n  }\r\n\r\n  getVariableID(index: number): string {\r\n    if(index >= 0 && index < this._variableIDs.length) {\r\n      return this._variableIDs[index];\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n\r\n  getVariableParas(var_id: string): string[] {\r\n    return this._varDics[var_id];\r\n  }\r\n\r\n  clear(): void {\r\n    this._variableIDs = [];\r\n    this._varDics = {};\r\n  }\r\n}","\r\n\r\n\r\nexport enum ActionType {\r\n  Normal, Animation\r\n}\r\n\r\nexport enum SequenceActionState {\r\n  Initial, Prepared, Running, Pause\r\n}\r\n\r\nexport enum StateActionType {\r\n  Action, Assignment\r\n}\r\n\r\nexport enum AssignType {\r\n  Variable = 0,\r\n  Template,\r\n  TemplateVariable,\r\n  Const,\r\n}\r\n\r\nexport enum AssociatedFsmType {\r\n  Object = 0,\r\n  Template\r\n}","export * from './enumTypes';","export enum ExpressionType {\r\n  ID, SPECIAL_ID, KEYWORD, STRING, NUMBER, BOOL, OPERATOR, INTEGER, FLOAT, DOUBLE, EOI\r\n}","export interface IExpression {\r\n  expType: string;\r\n  evaluate(): any;\r\n  clone(): IExpression;\r\n}\r\n\r\n\r\nexport class TrueExpression implements IExpression {\r\n  public get expType(): string {\r\n    return 'bool';\r\n  }\r\n\r\n  public get value(): boolean {\r\n    return true;\r\n  }\r\n\r\n  constructor() {\r\n  }\r\n\r\n  evaluate(): any {\r\n    return true;\r\n  }\r\n\r\n  clone(): IExpression {\r\n    let exp: TrueExpression  = new TrueExpression();\r\n    return exp;\r\n  }\r\n}\r\n\r\nexport class constantExpression implements IExpression {\r\n\r\n  get expType(): string {\r\n    return '';\r\n  }\r\n  \r\n  evaluate() {\r\n    throw new Error(\"Method not implemented.\");\r\n  }\r\n\r\n  clone(): IExpression {\r\n    throw new Error(\"Method not implemented.\");\r\n  }\r\n\r\n\r\n\r\n\r\n}","import { IExpression } from \"./expressions\";\r\nimport { ShowError } from \"../html\";\r\n\r\nexport interface IFunction {\r\n  expType: string;\r\n  name: string;\r\n  parameterNumber(): number;\r\n  evaluate(args: Array<IExpression>): any;\r\n}\r\n\r\nexport class Pow implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get name(): string {\r\n    return 'pow';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 2;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.pow(args[0].evaluate(), args[1].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`表达式编译错误：Pow函数参数错误，参数1类型：${args[0].expType}，参数1值：${args[0].evaluate()}，参数2类型：${args[1].expType}，参数2值：${args[1].evaluate()}，请检查！`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Ln implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get name(): string {\r\n    return 'ln';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.log(args[0].evaluate());\r\n    if (value === NaN || value === Infinity) {\r\n      ShowError.showError(`表达式编译错误：Ln函数参数错误，参数类型：${args[0].expType}，参数值：${args[0].evaluate()}，请检查！`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Lg implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get name(): string {\r\n    return 'lg';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.log10(args[0].evaluate());\r\n    if (value === NaN || value === Infinity) {\r\n      ShowError.showError(`表达式编译错误：Lg函数参数错误，参数类型：${args[0].expType}，参数值：${args[0].evaluate()}，请检查！`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Sqrt implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get name(): string {\r\n    return 'sqrt';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.sqrt(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`表达式编译错误：Sqrt函数参数错误，参数类型：${args[0].expType}，参数值：${args[0].evaluate()}，请检查！`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Abs implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get name(): string {\r\n    return 'abs';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.abs(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`表达式编译错误：Abs函数参数错误，参数类型：${args[0].expType}，参数值：${args[0].evaluate()}，请检查！`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Random implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get name(): string {\r\n    return 'random';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 2;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let distance: number = args[1].evaluate() - args[0].evaluate();\r\n    let value: number = Math.random() * distance;\r\n    if (value === NaN) {\r\n      ShowError.showError(`表达式编译错误：Random函数参数错误，参数1类型：${args[0].expType}，参数1值：${args[0].evaluate()}，参数2类型：${args[1].expType}，参数2值：${args[1].evaluate()}，请检查！`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Round implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get name(): string {\r\n    return 'round';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.round(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`表达式编译错误：Round函数参数错误，参数类型：${args[0].expType}，参数值：${args[0].evaluate()}，请检查！`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Sin implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get name(): string {\r\n    return 'sin';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.sin(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`表达式编译错误：Sin函数参数错误，参数类型：${args[0].expType}，参数值：${args[0].evaluate()}，请检查！`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class ASin implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get name(): string {\r\n    return 'asin';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.asin(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`表达式编译错误：ASin函数参数错误，参数类型：${args[0].expType}，参数值：${args[0].evaluate()}，请检查！`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Cos implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get name(): string {\r\n    return 'cos';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.cos(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`表达式编译错误：Cos函数参数错误，参数类型：${args[0].expType}，参数值：${args[0].evaluate()}，请检查！`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class ACos implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get name(): string {\r\n    return 'acos';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.acos(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`表达式编译错误：ACos函数参数错误，参数类型：${args[0].expType}，参数值：${args[0].evaluate()}，请检查！`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Tan implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get name(): string {\r\n    return 'tan';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.tan(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`表达式编译错误：Tan函数参数错误，参数类型：${args[0].expType}，参数值：${args[0].evaluate()}，请检查！`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class ATan implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get name(): string {\r\n    return 'atan';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.atan(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`表达式编译错误：ATan函数参数错误，参数类型：${args[0].expType}，参数值：${args[0].evaluate()}，请检查！`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n","export * from './expressionEnum';\r\nexport * from './expressions';\r\nexport * from './functions';\r\nexport * from './positions';","export class GameGlobal {\r\n\r\n  \r\n  \r\n\r\n}","export * from './gameGlobal';\r\nexport * from './time';","import { VeryEngine } from \"../veryEngine\";\r\n\r\nexport class Time {\r\n  \r\n  public static get frameCount(): number {\r\n    return this._frame;\r\n  }\r\n  private static _frame: number = 0;\r\n\r\n\r\n  public static get deltaTime(): number {\r\n    // return 1.0 / GameGlobal.Engine.getFps();\r\n    return VeryEngine.Engine.getDeltaTime() / 1000;\r\n  }\r\n\r\n  public static _sum(): void {\r\n    this._frame++;\r\n  }\r\n}","export * from './showError';","export class ShowError {\r\n\r\n  public static errorContentPrefix: string = '<div class=\"alert alert-error\"><button type=\"button\" class=\"close\" data-dismiss=\"alert\">&times;</button>';\r\n  public static errorContentNow: string;\r\n  public static errorZone: HTMLElement;\r\n\r\n  public static initZone(): void {\r\n    if (!this.errorZone) {\r\n      this.errorZone = document.getElementById(\"errorZone\")!;\r\n    }\r\n  }\r\n  /**\r\n   * 报错信息显示；\r\n   * TODO: log、error、warn信息分颜色显示，支持滚动栏，不然报错信息多了以后无法查看；\r\n   * @param error_msg 报错或警告信息；\r\n   */\r\n  private static showMsg(prefix: string, error_msg: string): void {\r\n    this.initZone();\r\n    if (!this.errorContentNow) {\r\n      this.errorContentNow = this.errorContentPrefix;\r\n    }\r\n    this.errorContentNow += prefix + error_msg + \"<br/>\";\r\n    this.errorZone.style.display = \"block\";\r\n    this.errorZone.innerHTML = this.errorContentNow + '</div>';\r\n    // Close button error\r\n    let closeBtn = this.errorZone.querySelector(\".close\")!;\r\n    let that = this;\r\n    closeBtn.addEventListener(\"click\", function () {\r\n      that.errorZone.style.display = \"none\";\r\n    });\r\n  }\r\n\r\n  public static show(error_msg: string): void {\r\n    this.showMsg('打印信息>>>', error_msg);\r\n  }\r\n\r\n  public static showError(error_msg: string): void {\r\n    this.showMsg('错误信息>>>', error_msg);\r\n  }\r\n\r\n  public static showWarn(error_msg: string): void {\r\n    this.showMsg('警告信息>>>', error_msg);\r\n  }\r\n\r\n  public static clear(): void {\r\n    ShowError.initZone();\r\n    ShowError.errorContentNow = ShowError.errorContentPrefix;\r\n    ShowError.errorZone.innerHTML = ShowError.errorContentNow + '</div>';\r\n    // Close button error\r\n    let closeBtn = ShowError.errorZone.querySelector(\".close\")!;\r\n    let that = ShowError;\r\n    closeBtn.addEventListener(\"click\", function () {\r\n      that.errorZone.style.display = \"none\";\r\n    });\r\n  }\r\n\r\n  public static close(): void {\r\n    ShowError.initZone();\r\n    if(ShowError.errorZone.style.display === \"none\") {\r\n      ShowError.errorZone.style.display = \"block\";\r\n    } else {\r\n      ShowError.errorZone.style.display = \"none\";\r\n    }\r\n  }\r\n}","export * from './action/index';\r\nexport * from './dataSource/index';\r\nexport * from './enum/index';\r\nexport * from './expression/index';\r\nexport * from './global/index';\r\nexport * from './html/index';\r\nexport * from './manager/index';\r\nexport * from './object/index';\r\nexport * from './state/index';\r\nexport * from './template/index';\r\nexport * from './trigger/index';\r\nexport * from './utility/index';\r\nexport * from './variables/index';\r\nexport * from '../verytable/index';\r\n\r\nexport * from './library/action/index';\r\nexport * from './library/trigger/index';\r\n","export * from './transform';","import { VE_ActionBehaviour } from '../../index';\r\n\r\nexport class Action_Translate extends VE_ActionBehaviour {\r\n\r\n  public get ID(): string {\r\n    return '直线运动|Translate';\r\n  }  \r\n\r\n  private _refType: BABYLON.Space = BABYLON.Space.LOCAL;\r\n\r\n  \r\n  public active(): void {\r\n    \r\n  }\r\n\r\n\r\n  public onUpdate(): void {\r\n    \r\n  }\r\n\r\n\r\n\r\n  public destroy(): void {\r\n    // \r\n  }\r\n\r\n\r\n}\r\n\r\n","export * from './input';","import { VE_TriggerBehaviour } from '../../index';\r\nimport { VE_Triggers } from '../../trigger';\r\n\r\nexport class Trigger_MouseDown extends VE_TriggerBehaviour {\r\n  \r\n\r\n  public get ID(): string {\r\n    return '鼠标按下|Mouse_Down';\r\n  }\r\n\r\n\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n\r\n    let a: BABYLON.Nullable<BABYLON.Observer<BABYLON.PointerInfo>> = this.scene.onPointerObservable.add(  (pointInfo) => {\r\n\r\n    })\r\n\r\n    this.scene.onPointerObservable.remove(a);\r\n\r\n    return true;\r\n  }\r\n\r\n  public onUpdate(): void {\r\n    \r\n  }\r\n\r\n\r\n  public destroy(): void {\r\n    \r\n  }\r\n  \r\n\r\n}\r\n\r\n\r\n\r\nVE_Triggers.addTrigger(new Trigger_MouseDown());","export * from './projects';\r\nexport * from './manager';\r\nexport * from './reset';","export class VE_Manager {\r\n  constructor() {\r\n\r\n  }\r\n}","export class VE_Projects {\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n}","export class VE_Reset {\r\n  constructor() {\r\n\r\n  }\r\n}","export * from './veryObject';\r\nexport * from './objects';","import { VeryObject } from \"./veryObject\";\r\nimport { ArrayUtility } from \"../utility\";\r\n\r\nexport class VE_Objects {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  private _objectIDs: string[] = [];\r\n  private _objectDics: { [key: string]: VeryObject } = {};\r\n\r\n  public get count(): number {\r\n    return this._objectIDs.length;\r\n  }\r\n\r\n  constructor(project_name: string) {\r\n    this._projectName = project_name;\r\n  }\r\n\r\n  isCreated(object_id: string): boolean {\r\n    if (this._objectDics[object_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  add(object_id: string, very_object: VeryObject): void {\r\n    if (!this.isCreated(object_id)) {\r\n      this._objectIDs.push(object_id);\r\n      this._objectDics[object_id] = very_object;\r\n    }\r\n  }\r\n\r\n  getObjectID(index: number): string {\r\n    if(index >= 0 && index < this._objectIDs.length) {\r\n      return this._objectIDs[index];\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n\r\n  getVeryObject(object_id: string): VeryObject {\r\n    return this._objectDics[object_id];\r\n  }\r\n\r\n  unloadObject(object_id: string): void {\r\n    // this._objectIDs.re\r\n    ArrayUtility.remove(this._objectIDs, object_id);\r\n    delete this._objectDics.object_id;\r\n\r\n  }\r\n\r\n  clear(): void {\r\n    for(let i: number = 0; i < this._objectIDs.length; i++) {\r\n      let tempObject = this._objectDics[this._objectIDs[i]];\r\n      if(tempObject) {\r\n        tempObject.clear();\r\n      }\r\n    }\r\n    this._objectIDs = [];\r\n    this._objectDics = {};\r\n  }\r\n}","import { GameObject, IVeryVar } from \"../variables\";\r\nimport { IExpression } from \"../expression\";\r\nimport { VE_ActionBehaviour } from \"../action\";\r\nimport { VE_TriggerBehaviour } from \"../trigger\";\r\nimport { VE_Fsm, VE_State } from \"../state\";\r\nimport { VE_Template } from \"../template\";\r\n\r\nexport class VeryObject {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = '';\r\n\r\n  gameObject: GameObject = new GameObject();\r\n\r\n  private _variables: { [key: string]: IVeryVar } = {};\r\n  private _expressions: { [key: string]: IExpression } = {};\r\n  private _actions: { [key: string]: VE_ActionBehaviour } = {};\r\n  private _triggers: { [key: string]: VE_TriggerBehaviour } = {};\r\n  private _fsms: { [key: string]: VE_Fsm } = {};\r\n  private _templates: { [key: string]: VE_Template } = {};\r\n\r\n\r\n\r\n  constructor(project_name: string, object_id: string, game_object: GameObject) {\r\n    this._projectName = projectName;\r\n    this._objectID = object_id;\r\n    this.gameObject = game_object;\r\n  }\r\n\r\n  hasFsm(fsm_id: string): boolean {\r\n    if (this._fsms[fsm_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  addFsm(fsm_id: string, fsm: VE_Fsm): void {\r\n    this._fsms[fsm_id] = fsm;\r\n  }\r\n\r\n  getFsm(fsm_id: string): VE_Fsm {\r\n    return this._fsms[fsm_id];\r\n  }\r\n\r\n  hasTrigger(trigger_id: string): boolean {\r\n    if (this._triggers[trigger_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  addTrigger(trigger_id: string, trigger: VE_TriggerBehaviour): void {\r\n    this._triggers[trigger_id] = trigger;\r\n  }\r\n\r\n  getTrigger(trigger_id: string): VE_TriggerBehaviour {\r\n    return this._triggers[trigger_id];\r\n  }\r\n\r\n  hasAction(action_id: string): boolean {\r\n    if (this._actions[action_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  addAction(action_id: string, action: VE_ActionBehaviour): void {\r\n    this._actions[action_id] = action;\r\n  }\r\n\r\n  getAction(action_id: string): VE_ActionBehaviour {\r\n    return this._actions[action_id];\r\n  }\r\n\r\n  hasVariable(var_id: string): boolean {\r\n    if (this._variables[var_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  addVariable(var_id: string, variable: IVeryVar): void {\r\n    this._variables[var_id] = variable;\r\n  }\r\n\r\n  getVariable(var_id: string): IVeryVar {\r\n    return this._variables[var_id];\r\n  }\r\n\r\n  hasExpression(exp_id: string): boolean {\r\n    if (this._expressions[exp_id]) {\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  addExpression(exp_id: string, expression: IExpression): void {\r\n    this._expressions[exp_id] = expression;\r\n  }\r\n\r\n  getExpression(exp_id: string): IExpression {\r\n    return this._expressions[exp_id];\r\n  }\r\n\r\n  hasTemplate(template_id: string): boolean {\r\n    if (this._templates[template_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  addTemplate(template_id: string, template: VE_Template): void {\r\n    this._templates[template_id] = template;\r\n  }\r\n\r\n  getTemplate(template_id: string): VE_Template {\r\n    return this._templates[template_id];\r\n  }\r\n\r\n  hasAnyVar(var_id: string): boolean {\r\n    if (this._variables[var_id] || this._expressions[var_id] || this._templates[var_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // getState(fsm_id: string, index: number): VE_State {\r\n\r\n  // }\r\n\r\n    unload():void {}\r\n\r\n    // setUnloadCallback(callback): void {}\r\n\r\n\r\n\r\n\r\n  clear(): void {\r\n\r\n  }\r\n}","import { VE_State } from \"./state\";\r\nimport { AssociatedFsmType } from \"../enum\";\r\nimport { VE_Template } from \"../template\";\r\n\r\nexport class VE_AssociatedState {\r\n\r\n  private _types: AssociatedFsmType[] = [];\r\n  private _indexs: number[] = [];\r\n\r\n  private _numberIndex: { [key: number]: number } = {};\r\n  private _states: { [key: number]: VE_State } = {};\r\n  private _templates: { [key: number]: VE_Template } = {};\r\n  private _templateIDs: { [key: number]: string } = {};\r\n\r\n  public get FromState(): VE_State {\r\n    return this._fromState;\r\n  }\r\n  private _fromState: VE_State;\r\n\r\n  constructor(from_state: VE_State) {\r\n    this._fromState = from_state;\r\n  }\r\n  \r\n  public add(state: VE_State, index: number): void {\r\n    this._types.push(AssociatedFsmType.Object);\r\n    let key: number = this._types.length;\r\n    this._indexs.push(key);\r\n    this._numberIndex[key] = index;\r\n    this._states[key] = state;\r\n  }\r\n\r\n  public addTemplate(template: VE_Template, fsm_id: string, index: number): void {\r\n    this._types.push(AssociatedFsmType.Object);\r\n    let key: number = this._types.length;\r\n    this._indexs.push(key);\r\n    this._numberIndex[key] = index;\r\n    this._templates[key] = template;\r\n    this._templateIDs[key] = fsm_id;\r\n  }\r\n\r\n  public connect(): void {\r\n\r\n  }\r\n\r\n\r\n}","import { Dictionary } from \"../utility/dictionary\";\r\nimport { VE_State } from \"./state\";\r\nimport { Time } from \"../global\";\r\nimport { StateConst } from \"./stateConst\";\r\n\r\nexport class VE_Fsm {\r\n\r\n  public get ID(): string {\r\n    return this._id;\r\n  }\r\n  private _id: string = '';\r\n\r\n  public get ObjectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = '';\r\n\r\n  public get FsmID(): string {\r\n    return this._fsmID;\r\n  }\r\n  private _fsmID: string = '';\r\n\r\n  private _stateDics: Dictionary<string, VE_State> = new Dictionary<string, VE_State>();\r\n  private _states: VE_State[] = [];\r\n\r\n  private _frameCount: number = -1;\r\n  private _triggerIDs: string[] = [];\r\n\r\n  constructor() {\r\n    // this._stateDics.TryGetValue(1);\r\n  }\r\n\r\n  hasState(state_value: string): boolean {\r\n    return this._stateDics.ContainsKey(state_value);\r\n  }\r\n\r\n  addState(state_value: string, state: VE_State): void {\r\n    if (!this._stateDics.ContainsKey(state_value)) {\r\n      this._stateDics.Add(state_value, state);\r\n      this._states.push(state);\r\n    }\r\n  }\r\n\r\n  getState(state_value: string): VE_State | null {\r\n    return this._stateDics.GetValue(state_value);\r\n  }\r\n\r\n  removeState(state_value: string): boolean {\r\n    if (this.hasState(state_value)) {\r\n      this._stateDics.Remove(state_value);\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  receiveEvent(trigger_id: string): boolean {\r\n    if (Time.frameCount != this._frameCount) {\r\n      this._frameCount = Time.frameCount;\r\n      this._triggerIDs = [];\r\n      this._triggerIDs.push(trigger_id);\r\n      return true;\r\n    } else {\r\n      if (trigger_id.startsWith(StateConst.ASSOCIATED_STATE_PREFIX)) {\r\n        // console.log(`ID: ${trigger_id} Return True`);\r\n        return true;\r\n      } else {\r\n        if (this._triggerIDs.indexOf(trigger_id) !== -1) {\r\n          return false;\r\n        } else {\r\n          this._triggerIDs.push(trigger_id);\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n}","export * from './state';\r\nexport * from './fsm';\r\nexport * from './stateAction';\r\nexport * from './associatedState';\r\nexport * from './stateConst';","import { VE_Fsm } from \"./fsm\";\r\nimport { VE_StateAction } from \"./stateAction\";\r\nimport { VE_AssociatedState } from \"./associatedState\";\r\n\r\nexport class VE_State {\r\n  public get Fsm(): VE_Fsm {\r\n    return this._fsm;\r\n  }\r\n  private _fsm: VE_Fsm;\r\n\r\n  public get Value(): string {\r\n    return this._value;\r\n  }\r\n  private _value: string = \"空状态\";\r\n\r\n  private _stateActions: VE_StateAction[] = [];\r\n  private _assocaitedStates: VE_AssociatedState[] = [];\r\n\r\n  public get IsSequence(): boolean {\r\n    return this._isSequence;\r\n  }\r\n  private _isSequence: boolean = false;\r\n\r\n  constructor(fsm: VE_Fsm, state_value: string = \"空状态\") {\r\n    this._fsm = fsm;\r\n    this._value = state_value;\r\n  }\r\n\r\n  setValue(state_value: string): void {\r\n    this._value = state_value;\r\n  }\r\n\r\n  addAction(state_action: VE_StateAction): void {\r\n    this._stateActions.push(state_action);\r\n    BABYLON.Mesh.bind;\r\n  }\r\n\r\n  public action(trigger_id: string): void {\r\n    if(this._fsm.receiveEvent(trigger_id)) {\r\n      \r\n    }\r\n  }\r\n}\r\n","\r\nimport { VE_ActionBehaviour } from \"../action/actionBehaviour\";\r\nimport { StateActionType } from \"../enum\";\r\n\r\nexport class VE_StateAction {\r\n  \r\n  public get Type(): StateActionType {\r\n    return this._type;\r\n  }\r\n  private _type: StateActionType = StateActionType.Action;\r\n\r\n  public get Action(): VE_ActionBehaviour {\r\n    return this._action;\r\n  }\r\n  private _action: VE_ActionBehaviour;\r\n\r\n  constructor(action: VE_ActionBehaviour, enabled: boolean, every_frame: boolean = false, is_sequence: boolean = false) {\r\n    this._action = action;\r\n  }\r\n\r\n\r\n\r\n\r\n}","export class StateConst {\r\n\r\n  public static readonly STATE_SEPARATOR: string = '.';\r\n  public static readonly ASSOCIATED_STATE_PREFIX: string = 'Associated_State:';\r\n  public static readonly VARIABLE_SYMBOL: string = '*';\r\n  public static readonly STATE_INDEX: number = -1;\r\n  \r\n}","export * from './template';\r\nexport * from './templates';","export class VE_Template {\r\n  constructor() {\r\n\r\n  }\r\n}","export class VE_Templates {\r\n  \r\n}","export * from './triggerBehaviour';\r\nexport * from './triggers';","import { VE_State } from \"../state/state\";\r\nimport { StateConst } from \"../state/stateConst\";\r\nimport { IExpression } from \"../expression\";\r\n\r\nexport abstract class VE_TriggerBehaviour {\r\n\r\n  abstract get ID(): string;\r\n\r\n  protected scene!: BABYLON.Scene;\r\n\r\n  public get enabled(): boolean {\r\n    return this._enabled;\r\n  }\r\n  public set enabled(val: boolean) {\r\n    this._enabled = val;\r\n  }\r\n  private _enabled: boolean = true;\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  public get isEnabled(): boolean {\r\n    if (this._logicalSwitch) {\r\n      for (let i: number = 0; i < this._logicalSwitch.length; i++) {\r\n        if (!this._logicalSwitch[i].evaluate()) {\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // Logical\r\n  private _logicalSwitch: IExpression[] = [];\r\n  private _logicalExp: IExpression[] = [];\r\n  // State\r\n  private _triggerTargets: VE_State[] = [];\r\n\r\n  // protected GameObject ObjectInstance = null;\r\n  // protected VeryEngineObject VeryObject = null;\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = '';\r\n\r\n  public get triggerID(): string {\r\n    return this._triggerID;\r\n  }\r\n  private _triggerID: string = '';\r\n\r\n  private _id: string = '';\r\n\r\n\r\n  public set(scene: BABYLON.Scene): void {\r\n    this.scene = scene;\r\n  }\r\n\r\n  public setTriggerID(trigger_id: string, object_id: string): void {\r\n    this._triggerID = trigger_id;\r\n    this._objectID = object_id;\r\n    this._id = object_id + StateConst.STATE_SEPARATOR + trigger_id;\r\n  }\r\n\r\n  public addLogicalSwitch(exp: IExpression): void {\r\n    this._logicalSwitch.push(exp);\r\n  }\r\n\r\n  public addTriggerTarget(exp: IExpression, state: VE_State): void {\r\n    this._logicalExp.push(exp);\r\n    this._triggerTargets.push(state);\r\n  }\r\n\r\n  public sendEvent(): void {\r\n    if(this.isEnabled) {\r\n      this.eventProcess();\r\n    }\r\n  }\r\n\r\n  // 关联具体响应\r\n  private eventProcess(): void {\r\n    if (this._triggerTargets) {\r\n      for (let i: number = 0; i < this._triggerTargets.length; i++) {\r\n        if (this._logicalExp[i].evaluate()) {\r\n          this._triggerTargets[i].action(this._id);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    return true;\r\n  }\r\n\r\n  public update(): void {\r\n    if(this.isEnabled) {\r\n      this.onUpdate();\r\n    }\r\n  }\r\n\r\n  public onUpdate(): void {\r\n\r\n  }\r\n\r\n  public abstract destroy(): void;\r\n\r\n\r\n}","import { VE_TriggerBehaviour } from \"./triggerBehaviour\";\r\nimport { ShowError } from \"../html\";\r\n\r\nexport class VE_Triggers {\r\n\r\n  private static _triggerDics: { [key: string]: VE_TriggerBehaviour} = {};\r\n\r\n  public static addTrigger(trigger: VE_TriggerBehaviour): void {\r\n    let ids: string[] = trigger.ID.split('|');\r\n    for(let i: number = 0; i < ids.length; i++) {\r\n      let id: string = ids[i].trim().toLowerCase();\r\n      if(this._triggerDics[id]) {\r\n        ShowError.showError(`触发初始化错误，触发ID重复，当前触发ID：${id}，请问当前触发重新分配触发ID！`);\r\n      } else {\r\n        console.log(id);\r\n        console.log(trigger);\r\n        this._triggerDics[id] = trigger;\r\n      }\r\n    }\r\n  }\r\n\r\n  public static hasTrigger(trigger_id: string): boolean {\r\n    trigger_id = trigger_id.toLowerCase();\r\n    if(this._triggerDics[trigger_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static createTrigger(trigger_id: string): VE_TriggerBehaviour {\r\n    trigger_id = trigger_id.toLowerCase();\r\n    return Object.create(this._triggerDics[trigger_id]);\r\n  }\r\n  \r\n  public static remove(trigger_id: string): void {\r\n    trigger_id = trigger_id.toLowerCase();\r\n    delete this._triggerDics[trigger_id];\r\n  }\r\n\r\n}","export class ArrayUtility {\r\n  public static remove<T>(arr: Array<T>, ele: T): void {\r\n    let index = arr.indexOf(ele);\r\n    if (index > -1) {\r\n      arr.splice(index, 1);\r\n    }\r\n  }\r\n\r\n  public static clear<T>(arr: Array<T>): void {\r\n    arr = [];\r\n  }\r\n\r\n}\r\n\r\n","/**字典数据结构类 */\r\nexport class Dictionary<KT, VT> {\r\n  private _keys: KT[] = [];\r\n  private _values: VT[] = [];\r\n  public get count(): number {\r\n    return this.Count();\r\n  }\r\n\r\n  public constructor() {\r\n  }\r\n\r\n  /**给字典增加一条数据,返回字典的长度 */\r\n  public Add(key: any, value: any): number {\r\n    this._keys.push(key);\r\n    return this._values.push(value);\r\n  }\r\n\r\n  public Remove(key: any) {\r\n    var index = this._keys.indexOf(key, 0);\r\n    this._keys.splice(index, 1);\r\n    this._values.splice(index, 1);\r\n  }\r\n\r\n  private Count(): number {\r\n    return this._keys.length;\r\n  }\r\n\r\n  /**直接使用SetValue()修改已经存在的字典数据项 */\r\n  public SetValue(key: any, value: any): boolean {\r\n    var index = this._keys.indexOf(key, 0);\r\n    if (index != -1) {\r\n      this._keys[index] = key;\r\n      this._values[index] = value;\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n\t/**\r\n\t *返回字典数据；\r\n\t */\r\n  public GetValue(key: KT): VT | null {\r\n    var index = this._keys.indexOf(key, 0);\r\n    if (index != -1) {\r\n      return this._values[index];\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public ContainsKey(key: any): boolean {\r\n    let ks = this._keys;\r\n    for (let i = 0; i < ks.length; ++i) {\r\n      if (ks[i] == key) {\r\n        return true;;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public GetKeys(): KT[] {\r\n    return this._keys;\r\n  }\r\n\r\n  public GetValues(): VT[] {\r\n    return this._values;\r\n  }\r\n}","export class ErrorInfo {\r\n\r\n  isRight: boolean = true;\r\n  message: string = '';\r\n\r\n  constructor() {\r\n    \r\n  }\r\n\r\n  clear(): void {\r\n    this.isRight = true;\r\n    this.message = '';\r\n  }\r\n\r\n}","export * from './arrayUtility';\r\nexport * from './dictionary';\r\nexport * from './errorInfo';","\r\n// import { VeryEngine } from \"../veryEngine\";\r\n\r\nexport class GameObject {\r\n\r\n  public get gameObject(): GameObject {\r\n    return this;\r\n  }\r\n\r\n  // transform: sf\r\n  mesh: BABYLON.Nullable<BABYLON.Mesh> = null;\r\n\r\n  constructor() {\r\n    // VeryEngine.Scene.getMeshByName()\r\n  }\r\n\r\n\r\n}\r\n\r\n\r\nexport class Transform {\r\n\r\n  public get localPosition(): BABYLON.Vector3 {\r\n    return BABYLON.Vector3.Zero();\r\n  }\r\n  eulerAngles: BABYLON.Vector3 = BABYLON.Vector3.Zero();\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n}","export * from \"./IVeryVar\";\r\nexport * from \"./veryVarManager\";\r\nexport * from \"./veryVariables\";\r\nexport * from './babylonVariables';","import { ShowError } from \"../html/showError\";\r\nimport { IVeryVar } from \"./IVeryVar\";\r\n\r\nexport class VeryVarManager {\r\n\r\n  private static _veryVarTypes: { [key: string]: IVeryVar } = {};\r\n\r\n  public static hasVarType(var_type: string): boolean {\r\n    var_type = var_type.toLowerCase();\r\n    if (this._veryVarTypes[var_type]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static addVarType(var_type: string, var_prototype: IVeryVar): void {\r\n    var_type = var_type.toLowerCase().trim();\r\n    // 由于直接访问，所以在这里直接报错\r\n    if (this._veryVarTypes[var_type]) {\r\n      ShowError.showError('VeryVar变量初始化错误，变量类型重复，当前变量名：' + var_type + '，当前变量类型：' + var_prototype);\r\n    } else {\r\n      // console.log(var_proto.VarType);\r\n      this._veryVarTypes[var_type] = var_prototype;\r\n      // let a = Object.create(this.GetVarType(var_type));\r\n      // console.log(a.Value);\r\n      // a.Value = true;\r\n      // console.log(a.Value);\r\n      // a.Value = 1234;\r\n      // console.log(a.getValue());\r\n      // console.log(this.GetVarType(var_type).__proto__);\r\n    }\r\n  }\r\n\r\n  // TODO\r\n  public static createVar(var_type: string): IVeryVar {\r\n    var_type = var_type.toLowerCase();\r\n    return Object.create(this.getVarType(var_type));\r\n  }\r\n\r\n  public static getVarType(var_type: string): any {\r\n    var_type = var_type.toLowerCase();\r\n    if (this._veryVarTypes && this._veryVarTypes[var_type]) {\r\n      return this._veryVarTypes[var_type];\r\n    }\r\n    return null;\r\n  }\r\n\r\n\r\n  public static remove(var_type: string): void {\r\n    var_type = var_type.toLowerCase();\r\n    delete this._veryVarTypes[var_type];\r\n  }\r\n\r\n\r\n\r\n}","import { IVeryVar } from \"./IVeryVar\";\r\nimport { ErrorInfo } from \"../utility/errorInfo\";\r\nimport { VeryVarManager } from \"./veryVarManager\";\r\n\r\nexport class VeryBool implements IVeryVar {\r\n\r\n  VarType: string = 'bool';\r\n\r\n  public get Value(): boolean {\r\n    return this._value;\r\n  }\r\n  public set Value(val: boolean) {\r\n    this._value = val;\r\n  }\r\n  private _value: boolean = false;\r\n\r\n  constructor() {\r\n    this._value = false;\r\n  }\r\n\r\n  setValue(val: any): void {\r\n    this._value = val;\r\n  }\r\n\r\n  getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  initValue(value_str: string, error_info: ErrorInfo): any {\r\n    if(value_str.toLowerCase() === 'false') {\r\n      return false;\r\n    } else if(value_str.toLowerCase() === 'true'){\r\n      return true;\r\n    } \r\n    else if(value_str === '' || value_str.toLowerCase() === 'null' || value_str.toLowerCase() === 'none') {\r\n      return false;\r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message = 'Type: ' + this.VarType + '，值：' + value_str + '，该变量值和类型不匹配，转化错误，请检查！'\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport class VeryInt implements IVeryVar {\r\n\r\n  VarType: string = 'Int';\r\n\r\n  public get Value(): number {\r\n    return Math.round(this._value);\r\n  }\r\n  public set Value(val: number) {\r\n    this._value = Math.round(val);\r\n  }\r\n  private _value: number = 0;\r\n\r\n  constructor() {\r\n    this._value = 0;\r\n  }\r\n\r\n  getValue(): any {\r\n    return this.Value;\r\n  }\r\n\r\n  setValue(val: any): void {\r\n    this.Value = val;\r\n  }\r\n\r\n  initValue(value_str: string, error_info: ErrorInfo):any {\r\n    // 先转化为float，直接使用parseInt没有四舍五入的效果\r\n    let newFloat = parseFloat(value_str);\r\n    if(!isNaN(newFloat)) {\r\n      // 可对float进行四舍五入\r\n      return Math.round(newFloat);\r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message = 'Type: ' + this.VarType + '，值：' + value_str + '，该变量值和类型不匹配，转化错误，请检查！'\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport class VeryFloat implements IVeryVar {\r\n\r\n  VarType: string = 'Float';\r\n\r\n  public get Value(): number {\r\n    return this._value;\r\n  }\r\n  public set Value(val: number) {\r\n    this._value = val;\r\n  }\r\n  private _value: number = 0;\r\n\r\n  constructor() {\r\n    this._value = 0;\r\n  }\r\n\r\n  setValue(val: number) {\r\n    this._value = val;\r\n  }\r\n\r\n  // 之后可能会有公式的情况\r\n  getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  initValue(value_str: string, error_info: ErrorInfo): any {\r\n    let newVal = parseFloat(value_str);\r\n    if(!isNaN(newVal)) {\r\n      return newVal;\r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message = 'Type: ' + this.VarType + '，值：' + value_str + '，该变量值和类型不匹配，转化错误，请检查！'\r\n      return undefined;\r\n    }\r\n  }\r\n}\r\n\r\nexport class VeryNumber implements IVeryVar {\r\n\r\n  VarType: string = 'number';\r\n\r\n  public get Value(): number {\r\n    return this._value;\r\n  }\r\n  public set Value(val: number) {\r\n    this._value = val;\r\n  }\r\n  private _value: number = 0;\r\n\r\n  constructor() {\r\n    this._value = 0;\r\n  }\r\n\r\n  setValue(val: number) {\r\n    this._value = val;\r\n  }\r\n\r\n  // 之后可能会有公式的情况\r\n  getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  initValue(value_str: string, error_info: ErrorInfo): any {\r\n    let newVal = parseFloat(value_str);\r\n    if(!isNaN(newVal)) {\r\n      return newVal;\r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message = 'Type: ' + this.VarType + '，值：' + value_str + '，该变量值和类型不匹配，转化错误，请检查！'\r\n      return undefined;\r\n    }\r\n  }\r\n}\r\n\r\nexport class VeryString implements IVeryVar {\r\n\r\n  VarType: string = 'string';\r\n\r\n  public get Value(): string {\r\n    return this._value;\r\n  }\r\n  public set Value(val: string) {\r\n    this._value = val;\r\n  }\r\n  private _value: string = '';\r\n\r\n  constructor() {\r\n    this._value = '';\r\n  }\r\n\r\n  getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  setValue(val: any): void {\r\n    this._value = val;\r\n  }\r\n\r\n  initValue(value_str: string, error_info: ErrorInfo): any {\r\n    if (value_str.startsWith('\\'') || value_str.startsWith('\"') || value_str.startsWith('“') || value_str.startsWith('‘')) {\r\n      this._value = value_str.substr(1, value_str.length - 2);\r\n    } else {\r\n      this._value = value_str;\r\n    } \r\n    error_info.isRight = true;\r\n  }\r\n}\r\n\r\nexport class VeryVector3 implements IVeryVar {\r\n\r\n  VarType: string = 'vector3';\r\n\r\n  public get Value(): BABYLON.Vector3 {\r\n    //let a: BABYLON.Vector3 = new BABYLON.Vector3 (1,1,1);\r\n    return this._value;\r\n  }\r\n  public set Value(val:BABYLON.Vector3) {\r\n    this._value = val;\r\n  }\r\n  private _value: BABYLON.Vector3 = BABYLON.Vector3.Zero();\r\n\r\n\r\n  constructor() {\r\n    this._value = BABYLON.Vector3.Zero();\r\n  }\r\n\r\n  getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  setValue(val: any) {\r\n    this._value = val;\r\n  }\r\n\r\n  initValue(value_str: string, error_info: ErrorInfo): any {\r\n    if(value_str === 'none' || value_str === 'null') {\r\n      \r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message = 'Type: ' + this.VarType + '，值：' + value_str + '，该变量值和类型不匹配，转化错误，请检查！'\r\n    }\r\n  }\r\n}\r\n\r\nVeryVarManager.addVarType('bool', new VeryBool());\r\nVeryVarManager.addVarType('开关', new VeryBool());\r\n\r\nVeryVarManager.addVarType('int', new VeryInt());\r\nVeryVarManager.addVarType('float', new VeryFloat());\r\n\r\nVeryVarManager.addVarType('number', new VeryNumber());\r\nVeryVarManager.addVarType('数字', new VeryNumber());\r\n\r\nVeryVarManager.addVarType('string', new VeryString());\r\nVeryVarManager.addVarType('字符串', new VeryString());\r\nVeryVarManager.addVarType('vector3', new VeryVector3());\r\nVeryVarManager.addVarType('响应', new VeryVector3());","import { VeryTable } from \"../verytable/index\";\r\nimport { ShowError } from \"./html/showError\";\r\n\r\n// 导出entrance\r\nexport * from \"./index\";\r\n\r\nexport class VeryEngine {\r\n\r\n  public static Canvas: HTMLCanvasElement;\r\n  public static Engine: BABYLON.Engine;\r\n  public static Scene: BABYLON.Scene;\r\n\r\n\r\n  constructor() {\r\n\r\n\r\n  }\r\n\r\n\r\n  init(data: Array<Array<string>>, project_name: string): void {\r\n    // TODO: 之后可能会变成多个Table，暂时未1个\r\n    let tableData: VeryTable = new VeryTable(data);\r\n    console.log(tableData.pos(7, 5));\r\n\r\n\r\n\r\n\r\n    // this.showErrorTest(tableData);\r\n  }\r\n\r\n\r\n  showErrorTest(tableData: VeryTable): void {\r\n    // /*\r\n    ShowError.show('大股东萨芬个是电饭锅三分隔收费的发大股东萨芬个是电饭锅三分隔收费的发大股东萨芬个是电饭锅三分隔收费的发大股东萨芬个是电饭锅三分隔收费的发大股东萨芬个是电饭锅三分隔收费的发大股东萨芬个是电饭锅三分隔收费的发，错误位置：' + tableData.pos(7, 5));\r\n\r\n    ShowError.showError('大股东萨芬个是电饭锅三分隔收费的发，错误位置：' + tableData.pos(7, 5));\r\n\r\n    ShowError.showWarn('大股东萨芬个是电饭锅三分隔收费的发，错误位置：' + tableData.pos(7, 5));\r\n\r\n    ShowError.show('大股东萨芬个是电饭锅三分隔收费的发，错误位置：' + tableData.pos(7, 5));\r\n\r\n    ShowError.show('大股东萨芬个是电饭锅三分隔收费的发，错误位置：' + tableData.pos(7, 5));\r\n\r\n\r\n    document.getElementById(\"settingsButton\")!.addEventListener(\"click\", ShowError.close);\r\n    // */\r\n  }\r\n\r\n}","\r\nexport * from \"./veryTableRow\";\r\nexport * from \"./veryTable\";\r\nexport * from \"./veryTableSet\";\r\n","import { VeryTableRow } from \"./veryTableRow\";\r\n\r\nexport class VeryTable {\r\n  private _id: string = \"\";\r\n  public get ID(): string {\r\n    return this._id;\r\n  }\r\n  public set ID(id: string) {\r\n    this._id = id;\r\n  }\r\n\r\n  private _columnIDs: string[] = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];\r\n\r\n  private _rows: VeryTableRow[] = [];\r\n\r\n  public get RowCount(): number {\r\n    if (!this._rows) {\r\n      return 0;\r\n    } else {\r\n      return this._rows.length;\r\n    }\r\n  }\r\n\r\n  constructor(data: string[][], id = \"默认Sheet\") {\r\n    this._id = id;\r\n    this._rows = [];\r\n    if (data) {\r\n      for (let i = 0; i < data.length; i++) {\r\n        let newRow = new VeryTableRow(data[i]);\r\n        this._rows.push(newRow);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 根据行序号和列序号获取表格数据\r\n   * @param row_index 行序号\r\n   * @param column_index 列序号\r\n   */\r\n  public getData(row_index: number, column_index: number): string | undefined {\r\n    if (row_index >= 0 && row_index < this._rows.length) {\r\n      let row: VeryTableRow = this._rows[row_index];\r\n      return row.getData(column_index);\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 根据行号返回行数据\r\n   * @param row_index 行序号\r\n   */\r\n  public getRow(row_index: number): VeryTableRow | undefined {\r\n    if (row_index >= 0 && row_index < this._rows.length) {\r\n      return this._rows[row_index];\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取表格位置\r\n   * @param row_index 行序号\r\n   * @param column_index 列序号\r\n   */\r\n  public pos(row_index: number, column_index: number): string {\r\n    return \"表名：\" + this.ID + \"，位置：（\" + (row_index + 1) + \"，\" + this.getColumnID(column_index) + \"）\";\r\n  }\r\n\r\n  /**\r\n   * 根据列序号获取列ID，序号超过26以后，需要进行计算\r\n   * @param column_index 列序号\r\n   */\r\n  private getColumnID(column_index: number): string {\r\n    if (column_index >= 0 && column_index < 26) {\r\n      return this._columnIDs[column_index];\r\n    } else if (column_index < 0) {\r\n      return 'error';\r\n    } else {\r\n      let a: number = Math.floor(column_index / 26);\r\n      let b: number = column_index % 26;\r\n      if (a === 0) {\r\n        return this._columnIDs[a];\r\n      } else {\r\n        return this._columnIDs[a - 1] + this._columnIDs[b];\r\n      }\r\n    }\r\n  }\r\n\r\n  // public addRowStringArray(row_data: string[]): void {\r\n\r\n  // }\r\n\r\n  // public addRowStrings(...strs: string[]): void {\r\n\r\n  // }\r\n\r\n  public addRow(data: VeryTableRow): void {\r\n    // \r\n    this._rows.push(data);\r\n\r\n  }\r\n\r\n\r\n}","\r\nexport class VeryTableRow {\r\n  public get Count(): number {\r\n    if (!this._rowData) {\r\n      return 0;\r\n    } else {\r\n      return this._rowData.length;\r\n    }\r\n  }\r\n\r\n  private _rowData: string[] = [];\r\n\r\n  constructor(row_data: string[]) {\r\n    this._rowData = row_data;\r\n  }\r\n\r\n  /**\r\n   * 根据列序号获取表格数据\r\n   * @param column_index 列序号\r\n   */\r\n  public getData(column_index: number): string | undefined {\r\n    if (column_index >= 0 && column_index < this.Count) {\r\n      return this._rowData[column_index];\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  public add(data: string): void {\r\n    this._rowData.push(data);\r\n  }\r\n\r\n  public insert(index: number, data: string): void {\r\n    // 先将数组一分为二，在第2个\r\n    this._rowData.push(data);\r\n    let tempData = this._rowData.slice(index);\r\n    tempData.push(data);\r\n    this._rowData = tempData;\r\n  }\r\n\r\n  public remove(index: number): void {\r\n    this._rowData.splice(index, 1);\r\n  }\r\n\r\n  public removeEnd(): void {\r\n    this._rowData.pop();\r\n  }\r\n\r\n\r\n\r\n  // public\r\n\r\n  // public remove(index: number): any {\r\n\r\n  // }\r\n}","// import { VeryTableRow } from \"./veryTableRow\";\r\n/**\r\n * 1. 主要使用TypeScript进行开发，掌握其一般开发流程，从项目建立到发布最终的生产代码（打包、合并、编译等）；\r\n * 2. 实际使用过程：在浏览器代码中，点击运行代码\r\n */\r\nimport { VeryTable } from \"./veryTable\";\r\n\r\nexport class VeryTableSet {\r\n\r\n  private _tables: VeryTable[] = [];\r\n\r\n  public get Count(): number {\r\n    if (!this._tables) {\r\n      return 0;\r\n    } else {\r\n      return this._tables.length;\r\n    }\r\n  }\r\n\r\n  constructor(tables?: VeryTable[]) {\r\n    if (tables) {\r\n      this._tables = tables;\r\n    }\r\n  }\r\n\r\n  public getTable(index: number): VeryTable | undefined {\r\n    if (index >= 0 && index < this.Count) {\r\n      return this._tables[index];\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  public addTable(table: VeryTable): void {\r\n    this._tables.push(table);\r\n  }\r\n\r\n  public removeTable(index: number): void {\r\n    if (index >= 0 && index < this.Count) {\r\n      this._tables.splice(index, 1);\r\n    }\r\n  }\r\n\r\n\r\n}"]}