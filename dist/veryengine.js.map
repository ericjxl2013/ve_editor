{"version":3,"sources":["node_modules/_browser-pack@6.1.0@browser-pack/_prelude.js","src/game.ts","src/main.ts","src/veryengine/action/actionBehaviour.ts","src/veryengine/action/actions.ts","src/veryengine/action/assignment.ts","src/veryengine/action/assignmentTypeJudge.ts","src/veryengine/action/index.ts","src/veryengine/action/sequenceActions.ts","src/veryengine/dataSource/dataSource.ts","src/veryengine/dataSource/fsmData.ts","src/veryengine/dataSource/index.ts","src/veryengine/dataSource/stateActionData.ts","src/veryengine/dataSource/stateData.ts","src/veryengine/dataSource/stateTriggerData.ts","src/veryengine/dataSource/variableData.ts","src/veryengine/enum/enumTypes.ts","src/veryengine/enum/index.ts","src/veryengine/expression/expChar.ts","src/veryengine/expression/expManager.ts","src/veryengine/expression/expressionEnum.ts","src/veryengine/expression/expressionParsing.ts","src/veryengine/expression/expressions.ts","src/veryengine/expression/forwardQuery.ts","src/veryengine/expression/functionExpression.ts","src/veryengine/expression/functions.ts","src/veryengine/expression/index.ts","src/veryengine/expression/positions.ts","src/veryengine/expression/scope.ts","src/veryengine/expression/token.ts","src/veryengine/expression/tokenReader.ts","src/veryengine/expression/tokenizer.ts","src/veryengine/expression/variable.ts","src/veryengine/expression/variableExpression.ts","src/veryengine/expression/veryExpressions.ts","src/veryengine/global/errorManager.ts","src/veryengine/global/gameGlobal.ts","src/veryengine/global/index.ts","src/veryengine/global/time.ts","src/veryengine/html/index.ts","src/veryengine/html/showError.ts","src/veryengine/index.ts","src/veryengine/library/action/index.ts","src/veryengine/library/action/translate.ts","src/veryengine/library/trigger/index.ts","src/veryengine/library/trigger/input.ts","src/veryengine/loader/createInstance.ts","src/veryengine/loader/index.ts","src/veryengine/loader/loaderManager.ts","src/veryengine/manager/index.ts","src/veryengine/manager/manager.ts","src/veryengine/manager/projects.ts","src/veryengine/manager/reset.ts","src/veryengine/object/index.ts","src/veryengine/object/objects.ts","src/veryengine/object/veryengineObject.ts","src/veryengine/scene/index.ts","src/veryengine/scene/verySceneVariables.ts","src/veryengine/state/associatedState.ts","src/veryengine/state/fsm.ts","src/veryengine/state/index.ts","src/veryengine/state/state.ts","src/veryengine/state/stateAction.ts","src/veryengine/state/stateConst.ts","src/veryengine/template/index.ts","src/veryengine/template/template.ts","src/veryengine/template/templates.ts","src/veryengine/trigger/index.ts","src/veryengine/trigger/triggerBehaviour.ts","src/veryengine/trigger/triggers.ts","src/veryengine/utility/arrayUtility.ts","src/veryengine/utility/dictionary.ts","src/veryengine/utility/errorInfo.ts","src/veryengine/utility/index.ts","src/veryengine/utility/stringFormat.ts","src/veryengine/utility/typeConvert.ts","src/veryengine/variables/babylonVariables.ts","src/veryengine/variables/index.ts","src/veryengine/variables/variables.ts","src/veryengine/variables/veryVarManager.ts","src/veryengine/variables/veryVariables.ts","src/veryengine/veryEngine.ts","src/verytable/index.ts","src/verytable/veryTable.ts","src/verytable/veryTableRow.ts","src/verytable/veryTableSet.ts"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","veryEngine_1","Game","canvasElement","fps","this","_showFps","_canvas","VeryEngine","Canvas","_fps","_table","document","getElementById","prototype","createScene","_engine","dispose","BABYLON","Engine","engine","window","addEventListener","resize","_scene","Scene","camera","ArcRotateCamera","Vector3","setPosition","attachControl","lowerBetaLimit","upperBetaLimit","Math","PI","lowerRadiusLimit","displayLoadingUI","SceneLoader","Append","scene","hideLoadingUI","init","hot1","getData","projectName","onBeforeRenderObservable","add","Time","_sum","animate","_this","runRenderLoop","width","clientWidth","render","updateFpsPos","toggleDebug","scenes","debugLayer","isVisible","hide","show","embedMode","style","right","body","innerHTML","getFps","toFixed","game","canvas","fpsLabel","game_1","__importDefault","default","enum_1","VE_ActionBehaviour","_enabled","_projectName","_objectID","_actionID","_erveryFrame","isSequence","_sequenceState","SequenceActionState","Initial","Object","defineProperty","val","ActionType","Normal","setEveryFrame","is_every_frame","setActionID","object_id","action_id","paraParser","para_array","action","action_val","every_frame","active","onUpdate","update","pause","Pause","resume","Running","stop","finish","enabled","html_1","state_1","manager_1","VE_Actions","addAction","ids","ID","split","id","trim","toLowerCase","_actionDics","ShowError","showError","hasAction","createAction","create","remove","findAction","very_object","isCreatedAction","getAction","actionArray","StateConst","STATE_SEPARATOR","objects","VE_Manager","objectID","actionID","isCreated","otherObject","getVeryObject","utility_1","assignmentTypeJudge_1","VE_Assignment","state","total_string","_totalStr","_leftType","AssignType","Variable","_rightType","_leftVariable","_leftTemplate","_leftVarID","_rightConstStr","_rightConstValue","_rightVariable","_rightTemplate","_rightVarID","_pos","_state","setPos","pos","setLeftVariable","variable","setLeftTemplate","template","Template","setLeftTemplateVar","var_id","TemplateVariable","setRightVariable","setRightTemplate","setRightNull","setRightTemplateVariable","setRightConst","const_str","Const","setRightConstValue","const_value","assign","rightAssignment","unload","templateInstance","Fsm","fsmID","templateVarID","isCreatedExpression","isCreatedVariable","getVariable","isCreatedFsm","getFsm","fsmVar","setValue","getValue","errorInfo","ErrorInfo","initValue","isRight","exp","getExpression","VE_AssignmentTypeJudge","allowExpression","evaluate","v","allow","first","second","varType","expType","__export","VE_SequenceActions","fsmData_1","VE_DataSource","project_name","name_id","is_template","_templateID","_isTemplate","_fsmIDs","_fsmDic","_fsmPosDic","_triggerIDs","_triggerDic","_triggerPosDic","_actionIDs","_actionDic","_actionInitValue","_actionPosDic","fsm_id","createFsm","push","VE_FsmData","getFsmData","getFsmPos","hasFsmIndex","index","getFsmID","isCreatedTrigger","trigger_id","addTrigger","trigger_data","getTrigger","getTriggerPos","hasTriggerIndex","getTriggerID","getTriggerPara","action_data","action_init_val","getActionPara","getActionPos","getActionInitVal","hasActionIndex","getActionID","clear","data_source","_fsmType","_initialValStr","_states","_dataSource","_fsmID","initFsm","fsm_type","initial_var","addState","state_data","getStateData","VE_StateActionData","sequence","type","StateActionType","Action","totalString","varID","varValue","everyFrame","setNormalAction","setAssignmentAction","var_value","Assignment","VE_StateData","fsm_data","val_str","is_initial_value","state_index","STATE_INDEX","_stateIndex","logicalExp","rowIndex","_triggers","_triggersPos","_actions","_actionsPos","_associatedStates","_associatedStatesPos","_isSequence","_fsmData","_valStr","_isInitialValue","hasTrigger","hasAssociatedState","addAssociatedState","associated_state_data","getAssociatedState","getAssociatedStatePos","setSequence","VE_StateTriggerData","triggerID","logicalSwitch","VE_VariableData","_variableIDs","_varDics","_varPosDic","addVariable","var_paras","getVariableID","getVariableParas","getPos","AssignmentType","AssociatedFsmType","VariableScope","Severity","ExpChar","value","line","_value","_line","getLine","isDigit","test","isLetter","isWhiteSpace","isNewLine","isEndOfInput","is","_i","arguments","toString","scope_1","positions_1","expressionParsing_1","ExpManager","_scope","Scope","Create","_expVariable","createVariable","errors","ParseError","NameLocation","setVariable","createExpression","exp_str","VE_ExpressionParsing","parsing","find","printError","console","log","ExpressionType","tokenizer_1","expressions_1","expressionEnum_1","functionExpression_1","functions_1","variableExpression_1","veryExpressions_1","_bracketPair","input_exp","scope","var_scope","_varScope","_tokenizer","Tokenizer","parse","resultExp","buildExpression","current","isEnd","addError","getSource","consume","getProblemCollector","left","relationalExp","isOperator","reOrder","BinaryOperator","Add","Or","algebraExp","LT","LT_EQ","EQ","GT_EQ","GT","NEQ","productExp","Subtract","exponentExp","Multiply","Divide","Modulo","atomExp","BinaryExpression","Not","result","ConstantExpression","setSeal","next","isIdentifier","isKeyword","isStartBracket","newValue","Empty","isConstant","getContents","varExpression","VE_Expressions","getParseExpression","getTemplateExpression","endBracket","className","expectTrigger","OPERATOR","typeStr","isBool","isNumber","parseFloat","endStart","functionCall","loc","variableID","endsWith","VariableExpression","VeryTemplateExpression","veryObject","fsm","VeryVarExpression","isSpecialIdentifier","op","rightOp","isSealed","getPriority","getPriorityOp","replaceLeft","target","newLeft","getLeftExp","leftOp","setLeftExp","end_bracket","FunctionExpression","funcToken","CustomFunctions","hasFunction","fun","createFunction","setFunction","paraCount","addPara","parameterNumber","trigger","matches","getProjectCollector","Local","dictionary_1","template_1","TrueExpression","clone","_expType","isEmpty","left_exp","right_exp","_op","_isSealed","_left","_right","resultAutoType","_opDic","Power","And","_priority","setRightExp","getOp","getRightExp","leftValue","rightValue","subtract","multiplyByFloats","pow","l","getBoolean","x","y","z","Vector2","GetValue","Dictionary","_template","VE_Template","setTemplate","varExp","ForwardQuery","itemBuffer","endReached","problemCollector","endOfInputIndicator","undefined","nextOffset","offset","item","fetch","endOfInput","consumeNext","numberOfItems","shift","setProblemCollector","_paras","_function","func","expClone","printStr","Pow","args","NaN","Ln","Infinity","Lg","log10","Sqrt","sqrt","Abs","abs","Random","start","distance","random","Round","round","Sin","sin","ASin","asin","Cos","cos","ACos","acos","Tan","tan","ATan","atan","func_name","_functions","addFunction","funcName","SeverityExp","msg","severity","_message","_severity","Warning","message","getPosition","getMessage","getSeverity","variable_1","_parent","_context","GetRootScope","_root","makeConstant","E","CreateWithParent","parent","name","setType","Token","STRING","_source","_contents","_trigger","CreateAndFill","ch","addToTrigger","addToSource","addToContentChar","addToContent","getTokenType","setTokenType","new_type","setTrigger","setContent","content","setSource","source","EOI","symbols","isEndBracket","isStartSquareBracket","isEndSquareBracket","isStartBrace","isEndBrace","keywords","KEYWORD","values","triggers","SPECIAL_ID","isSpecialIdentifierWithContent","contents","NUMBER","BOOL","isString","forwardQuery_1","expChar_1","TokenReader","_super","_inputExp","_count","_operator","__extends","readChar","token_1","tokenReader_1","_decimalSeparator","_lineComment","_blockCommentStart","_blockCommentEnd","_brackets","_treatSinglePipeAsBracket","_specialIdStarters","_specialIdTerminators","_keywords","_keywordsCaseSensitive","_stringDelimiters","_boolConstant","isAtStartOfLineComment","skipToEndOfLine","isAtStartOfBlockComment","skipBlockComment","isAtStartOfNumber","fetchNumber","isAtStartOfIdentifier","fetchId","fetchString","isAtBracket","isAtStartOfSpecialId","fetchSpecialId","fetchOperator","hasDecimal","isIdentifierChar","indexOf","specialId","handleKeywords","separator","canConsumeThisString","check_string","isAtEndOfBlockComment","in_symbol","id_token","keyword","keywordToken","addWarning","_name","_constant","getName","scene_1","createSceneExpression","expression_str","error_info","sceneExp","errorMessage","createGlobalExpression","globalExp","Global","createLocalExpression","localExp","createFsmExpression","fsmExp","varArray","substring","startsWith","VARIABLE_SYMBOL","getParseGlobal","getParseScene","variables","VerySceneVariables","Variables","errorStr","isCreatedTemplate","getTemplate","VE_Error","table_name","_tableName","warning","error","getTableName","VE_ErrorManager","_errorList","getError","print","prefix","splice","printWarnning","GameGlobal","_frame","getDeltaTime","initZone","errorZone","showMsg","error_msg","errorContentNow","errorContentPrefix","display","closeBtn","querySelector","that","showWarn","close","Action_Translate","apply","_refType","Space","LOCAL","destroy","index_1","trigger_1","Trigger_MouseDown","onPointerObservable","pointInfo","VE_TriggerBehaviour","VE_Triggers","variables_1","global_1","expression_1","action_1","typeConvert_1","CreateInstance","createProject","templates","globalVars","varData","count","varPara","VeryVarManager","hasVarType","newVar","addTemplate","addExpression","getObjectID","k","dataSource","fsmCount","fsmData","fsmType","initialValStr","VE_Fsm","addFsm","triggerCount","triggerPara","createTrigger","actionCount","actionPara","stateData","VE_State","isInitialValue","setInitialValue","stateAssignment","logicalAssociated","s","triggerData","triggerPos","findTrigger","addTriggerTarget","addLogicalSwitch","actionData","actionPos","VE_TypeConvert","boolConvert","stateAction","VE_StateAction","setAction","assignmentAction","isCreatedState","stateIndex","ValStr","getState","associatedStateCount","associatedStateInfo","associatedPos","associatedState","VE_AssociatedState","multipleAssociatedState","www","strArray","intConvert","aFsmID","stateArray","q","aObject","aObjectID","aFsm","toState","global_vars","assignStr","valArray","setTemplateInfo","veryVar","setStateVariable","tObject","stateVar","setConstValue","assignment","varParas","VE_StringFormat","isFormulaString","AssignmentFormulaCount","AssignmentPrefix","VeryExpression","rightVar","rightTemplate","leftType","leftVariable","setAssignment","createInstance","object_name","destroy_on_create_new","AnalisysType","object_1","dataSource_1","createInstance_1","LoaderManager","_currentType","_lastFsmID","_activeTemplate","_activeObject","_activeFsmData","_activeStateData","load","table","RowCount","templateID","replace","isIDLegal","objName","nameArray","activeGameObject","GameObject","tempObject","VeryEngineObject","paraData","paraSegment","paraArray","stateInfo","parseInt","para2Array","tempStr","newActionID","LogCount","equalIndex","projects_1","_projects","VE_Projects","projects","isCreatedObjects","addObjects","VE_Objects","isCreatedTemplates","addTemplates","VE_Templates","isCreatedVariables","addVariables","VE_Variables","globalVarData","isCreatedGlobals","getGlobalVars","getTemplates","getVariables","getObjects","clearProject","_objects","_variables","_templates","clearPorject","sleep","VE_Reset","_objectIDs","_objectDics","unloadObject","ArrayUtility","game_object","gameObject","_expressions","_fsms","exp_id","expression","template_id","isCreatedVar","keys","forEach","key","_hasLoaded","initIfNeeded","from_state","_types","_indexs","_numberIndex","_templateIDs","_fromState","connect","stateConst_1","fsm_variable","_id","_stateDics","_frameCount","_fsmVar","_veryObject","ContainsKey","removeState","Remove","receiveEvent","frameCount","ASSOCIATED_STATE_PREFIX","stateAction_1","_assignmentType","_isTemplateVar","_varID","_templateVar","_assignmentStr","_logicalExpression","_index","_stateVariable","_stateActions","_assocaitedStates","sequenceActions","_fsm","setLogicalExpression","logical_exp","assign_str","very_var","state_action","addAssignment","associated_state","_type","_action","_everyFrame","_assignment","_templateVarID","_instanceCount","instanceCount","setInstance","instance_obj","template_var_id","cloneTemplate","_templateDic","_instanceDic","isCreatedInstance","getInstance","destory_on_create_new","_logicalSwitch","_logicalExp","_triggerTargets","_triggerID","set","setTriggerID","sendEvent","isEnabled","eventProcess","_triggerDics","triggerArray","arr","ele","_keys","_values","Count","SetValue","ks","GetKeys","GetValues","_escapeCharacters","_illegalChar","_formulaChar","strEscapeCharacterAction","para_str","tmpStr","getEscapeCharacter","strSubsectionAction","strBuilder","rStr","bracketFlag","hasQuote","para_char","getEscapeCharacter2","is_escape","strSubsection","needSpace","getParaArrayAll","coloneStr","slice","newPara","j","innerBracket","saveBracket","quotationMark","isEscape","needSaveBracket","str","hasBracket","var_str","info","num","isNaN","floatConvert","_transform","Transform","mesh","_transformNode","_mesh","localPosition","Zero","position","localEulerAngles","eulerAngles","forward","Forward","localScale","_veryVars","_tempalteVars","showError_1","veryVariables_1","var_type","_veryVarTypes","addVarType","var_prototype","createVar","getVarType","getSceneVariable","getGlobalVariable","getTemplateVariable","veryVarManager_1","VeryBool","value_str","varClone","VeryInt","Value","newFloat","VeryFloat","newVal","VeryNumber","VeryString","VeryVector3","rValue","vec3Str","n1","n2","n3","data","VeryTable","showErrorTest","tableData","veryTableRow_1","_columnIDs","_rows","newRow","VeryTableRow","row_index","column_index","getRow","getColumnID","floor","b","addRow","row_data","_rowData","insert","tempData","removeEnd","pop","VeryTableSet","tables","_tables","getTable","addTable","removeTable"],"mappings":"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","file":"veryengine.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","/// <reference path=\"./dts/babylon.d.ts\"/>\r\n\r\nimport { VeryEngine, Time } from \"./veryengine/veryEngine\";\r\n\r\nexport default class Game {\r\n\tprivate _canvas: HTMLCanvasElement;\r\n\tprivate _fps: HTMLElement;\r\n\tprivate _table!: HTMLElement;\r\n\tprivate _showFps: boolean = true;\r\n\tprivate _engine!: BABYLON.Engine;\r\n\tprivate _scene!: BABYLON.Scene;\r\n\t// private _camera!: BABYLON.FreeCamera;\r\n\r\n\tconstructor(canvasElement: HTMLCanvasElement, fps: HTMLElement) {\r\n\t\tthis._canvas = canvasElement;\r\n\t\tVeryEngine.Canvas = this._canvas;\r\n\t\tthis._fps = fps;\r\n\t\t// this._engine = new BABYLON.Engine(this._canvas, true);\r\n\t\tthis._table = document.getElementById(\"VeryTable\")!;\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\tcreateScene(): Game {\r\n\t\t// engine\r\n\t\tif (this._engine) {\r\n\t\t\tthis._engine.dispose();\r\n\t\t}\r\n\t\tthis._engine = new BABYLON.Engine(this._canvas, true);\r\n\t\tVeryEngine.Engine = this._engine;\r\n\t\t// Resize\r\n\t\tlet engine = this._engine;\r\n\t\twindow.addEventListener(\"resize\", function () {\r\n\t\t\tengine.resize();\r\n\t\t});\r\n\r\n\t\tthis._scene = new BABYLON.Scene(this._engine);\r\n\t\tVeryEngine.Scene = this._scene;\r\n\r\n\t\t// \r\n\t\tvar camera = new BABYLON.ArcRotateCamera(\"MainCamera\", 0, 0, 10, new BABYLON.Vector3(0, 0, 0), this._scene);\r\n    camera.setPosition(new BABYLON.Vector3(20, 200, 400));\r\n    camera.attachControl(this._canvas, true);\r\n    camera.lowerBetaLimit = 0.1;\r\n    camera.upperBetaLimit = (Math.PI / 2) * 0.99;\r\n    camera.lowerRadiusLimit = 150;\r\n\r\n\t\t// \r\n\t\tengine.displayLoadingUI();\r\n\r\n\t\t// scene.babylon\r\n\t\tBABYLON.SceneLoader.Append(\"./scene/\", \"scene.babylon\", this._scene, function (scene) {\r\n\t\t\t\t// do something with the scene\r\n\t\t\t\t// \r\n\t\t\t\tengine.hideLoadingUI();\r\n\t\t});\r\n\r\n\r\n\t\t// const lightPos = new BABYLON.Vector3(0, 1, 0);\r\n\t\t// new BABYLON.HemisphericLight('hemlight', lightPos, this._scene);\r\n\r\n\t\t// const sphereOpts = { segments: 16, diameter: 1 };\r\n\t\t// let sphere = BABYLON.MeshBuilder.CreateSphere(\r\n\t\t// \t'mainsphere',\r\n\t\t// \tsphereOpts,\r\n\t\t// \tthis._scene\r\n\t\t// );\r\n\t\t// sphere.position.y = 1;\r\n\r\n\t\t// const groundOpts = { width: 6, height: 6, subdivisions: 2 };\r\n\t\t// BABYLON.MeshBuilder.CreateGround('mainground', groundOpts, this._scene);\r\n\r\n\t\t// \r\n\t\t// console.log(hot1.getData());\r\n\t\tlet entrance: VeryEngine = new VeryEngine();\r\n\t\t// console.log(`${hot1.countEmptyRows()}`);\r\n\t\tentrance.init(hot1.getData(), projectName);\r\n\r\n\t\t// \r\n\t\tthis._scene.onBeforeRenderObservable.add(() => {\r\n\t\t\t// \r\n\t\t\tTime._sum();\r\n\t\t})\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\tanimate(): Game {\r\n\t\tthis._engine.runRenderLoop(() => {\r\n\t\t\tif (this._canvas.width !== this._canvas.clientWidth) {\r\n\t\t\t\tthis._engine.resize();\r\n\t\t\t}\r\n\r\n\t\t\tif (this._scene) {\r\n\t\t\t\tthis._scene.render();\r\n\t\t\t}\r\n\r\n\t\t\tif (this._showFps) {\r\n\t\t\t\tthis.updateFpsPos();\r\n\t\t\t}\r\n\r\n\r\n\t\t});\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * UI\r\n\t */\r\n\ttoggleDebug(): Game {\r\n\t\tif (this._engine) {\r\n\t\t\t// Always showing the debug layer, because you can close it by itself\r\n\t\t\tvar scene = this._engine.scenes[0];\r\n\t\t\tif (scene.debugLayer.isVisible()) {\r\n\t\t\t\tscene.debugLayer.hide();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// babylon.d.ts\r\n\t\t\t\tscene.debugLayer.show({ embedMode: true });\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * fps\r\n\t */\r\n\tupdateFpsPos(): void {\r\n\t\tif (this._fps) {\r\n\t\t\tthis._fps.style.right = document.body.clientWidth - (this._table.clientWidth + this._canvas.clientWidth) + \"px\";\r\n\r\n\t\t\tthis._fps.innerHTML = this._engine.getFps().toFixed() + \" fps\";\r\n\t\t}\r\n\t}\r\n}\r\n","\r\n\r\nimport Game from \"./game\";\r\n\r\nlet game!: Game;\r\nlet initFlag: boolean = false;\r\n\r\n/**\r\n * \r\n */\r\nfunction initGame(): void {\r\n  let canvas = <HTMLCanvasElement>document.getElementById(\"renderCanvas\");\r\n  let fpsLabel = document.getElementById(\"fpsLabel\");\r\n  if (canvas !== null && fpsLabel !== null) {\r\n    game = new Game(canvas, fpsLabel);\r\n    game.createScene().animate();  // \r\n  }\r\n}\r\n\r\nfunction runBtn(): void {\r\n  if (game) {\r\n    game.createScene().animate();\r\n  }\r\n}\r\n\r\nfunction toggleDebug(): void {\r\n  if (game) {\r\n    game.toggleDebug();\r\n  }\r\n}\r\n\r\n// \r\ndocument.getElementById(\"runButton\")!.addEventListener(\"click\", runBtn);\r\n\r\n// \r\ndocument.getElementById(\"debugButton\")!.addEventListener(\"click\", toggleDebug);\r\n\r\n// \r\n// \r\ninitGame();\r\n// loadData2()\r\n//   .then(function (hot: HandTable) {\r\n//     console.log(hot.getData());\r\n//   }\r\n//   );\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import { ActionType, SequenceActionState } from \"../enum\";\r\n\r\nexport abstract class VE_ActionBehaviour {\r\n\r\n  public abstract get ID(): string;\r\n\r\n  public get enabled(): boolean {\r\n    return this._enabled;\r\n  }\r\n  public set enabled(val: boolean) {\r\n    this._enabled = val;\r\n  }\r\n  private _enabled: boolean = true;\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  };\r\n  private _projectName: string = '';\r\n\r\n  // protected GameObject ObjectInstance = null;\r\n  // protected veryObject: VeryObject = null;\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  };\r\n  private _objectID: string = '';\r\n\r\n  public get actionID(): string {\r\n    return this._actionID;\r\n  }\r\n  private _actionID: string = '';\r\n\r\n  public get Type(): ActionType {\r\n    return ActionType.Normal;\r\n  }\r\n\r\n  private _erveryFrame: boolean = false;\r\n  public get everyFrame(): boolean {\r\n    return this._erveryFrame;\r\n  }\r\n\r\n\r\n  public isSequence: boolean = false;\r\n\r\n  public get SequenceState(): SequenceActionState {\r\n    return this._sequenceState;\r\n  }\r\n  public set SequenceState(val: SequenceActionState) {\r\n    this._sequenceState = val;\r\n  }\r\n  private _sequenceState: SequenceActionState = SequenceActionState.Initial;\r\n\r\n  // private VE_SequenceActions _sequenceAction = null;\r\n\r\n\r\n  public setEveryFrame(is_every_frame: boolean): void {\r\n    this._erveryFrame = is_every_frame;\r\n  }\r\n\r\n  public setActionID(object_id: string, action_id: string): void {\r\n    this._objectID = object_id;\r\n    this._actionID = action_id;\r\n  }\r\n\r\n  // SetVeryObject(): void {}\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    if (para_array) { }\r\n    return true;\r\n  }\r\n\r\n  public action(action_val: boolean, every_frame: boolean): void {\r\n    this._enabled = action_val;\r\n    this._erveryFrame = every_frame;\r\n    if (this._enabled) {\r\n      this.active()\r\n      if (!this._erveryFrame) {\r\n        this.onUpdate();\r\n      }\r\n    }\r\n  }\r\n\r\n  public abstract active(): void;\r\n\r\n\r\n  public update(): void {\r\n    if(this._enabled && this._erveryFrame) {\r\n      this.onUpdate();\r\n    }\r\n  }\r\n\r\n  public onUpdate(): void {\r\n\r\n  }\r\n\r\n  public pause(): void {\r\n    this._sequenceState = SequenceActionState.Pause;\r\n  }\r\n\r\n  public resume(): void {\r\n    this._sequenceState = SequenceActionState.Running;\r\n  }\r\n\r\n  public stop(): void {\r\n    this._sequenceState = SequenceActionState.Initial;\r\n  }\r\n\r\n  public finish(): void {\r\n    this._sequenceState = SequenceActionState.Initial;\r\n\r\n    this.enabled = false;\r\n  }\r\n\r\n  // add callbackdestroy\r\n  public abstract destroy(): void;\r\n\r\n\r\n}","import { VE_ActionBehaviour } from \"./actionBehaviour\";\r\nimport { ShowError } from \"../html\";\r\nimport { VeryEngineObject, VE_Objects } from \"../object\";\r\nimport { StateConst } from \"../state\";\r\nimport { VE_Manager } from \"../manager\";\r\n\r\nexport class VE_Actions {\r\n\r\n  private static _actionDics: { [key: string]: VE_ActionBehaviour } = {};\r\n\r\n  public static addAction(action: VE_ActionBehaviour): void {\r\n    let ids: string[] = action.ID.split('|');\r\n    for (let i: number = 0; i < ids.length; i++) {\r\n      let id: string = ids[i].trim().toLowerCase();\r\n      if (this._actionDics[id]) {\r\n        ShowError.showError(`IDID${id}ID`);\r\n      } else {\r\n        this._actionDics[id] = action;\r\n      }\r\n    }\r\n  }\r\n\r\n  public static hasAction(action_id: string): boolean {\r\n    action_id = action_id.toLowerCase();\r\n    if (this._actionDics[action_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static createAction(action_id: string): VE_ActionBehaviour {\r\n    action_id = action_id.toLowerCase();\r\n    return Object.create(this._actionDics[action_id]);\r\n  }\r\n\r\n  public static remove(action_id: string): void {\r\n    action_id = action_id.toLowerCase();\r\n    delete this._actionDics[action_id];\r\n  }\r\n\r\n  public static findAction(very_object: VeryEngineObject, action_id: string): Nullable<VE_ActionBehaviour> {\r\n    if (very_object.isCreatedAction(action_id)) {\r\n      return very_object.getAction(action_id);\r\n    }\r\n    else {\r\n      let actionArray: string[] = action_id.split(StateConst.STATE_SEPARATOR);\r\n      if (actionArray.length === 2) {\r\n        let objects: VE_Objects = VE_Manager.objects(very_object.projectName);\r\n        let objectID: string = actionArray[0].trim();\r\n        let actionID: string = actionArray[1].trim();\r\n        if (objects.isCreated(objectID)) {\r\n          let otherObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n          if (otherObject.isCreatedAction(actionID)) {\r\n            return otherObject.getAction(actionID);\r\n          }\r\n          else {\r\n            return null;\r\n          }\r\n        }\r\n        else {\r\n          return null;\r\n        }\r\n      }\r\n      else {\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n}","import { VE_State } from \"../state\";\r\nimport { AssignType } from \"../enum\";\r\nimport { IVeryVar } from \"../variables\";\r\nimport { VE_Template } from \"../template\";\r\nimport { ShowError } from \"../html\";\r\nimport { ErrorInfo } from \"../utility\";\r\nimport { IExpression } from \"../expression\";\r\nimport { VE_AssignmentTypeJudge } from \"./assignmentTypeJudge\";\r\n\r\nexport class VE_Assignment {\r\n\r\n  public get state(): VE_State {\r\n    return this._state;\r\n  }\r\n  private _state: VE_State;\r\n\r\n  private _totalStr: string = '';\r\n\r\n  public get leftType(): AssignType {\r\n    return this._leftType;\r\n  }\r\n  private _leftType: AssignType = AssignType.Variable;\r\n\r\n  public get rightType(): AssignType {\r\n    return this._rightType;\r\n  }\r\n  private _rightType: AssignType = AssignType.Variable;\r\n\r\n  public get leftVariable(): Nullable<IVeryVar> {\r\n    return this._leftVariable;\r\n  }\r\n  private _leftVariable: Nullable<IVeryVar> = null;\r\n  private _leftTemplate: Nullable<VE_Template> = null;\r\n  private _leftVarID: string = '';\r\n\r\n  private _rightConstStr: string = '';\r\n  private _rightConstValue: any = null;\r\n  public get rightVariable(): Nullable<IVeryVar> {\r\n    return this._leftVariable;\r\n  }\r\n  private _rightVariable: Nullable<IVeryVar> = null;\r\n  private _rightTemplate: Nullable<VE_Template> = null;\r\n  private _rightVarID: string = '';\r\n\r\n  private _pos: string = '';\r\n\r\n  constructor(state: VE_State, total_string: string) {\r\n    this._state = state;\r\n    this._totalStr = total_string;\r\n  }\r\n\r\n  public setPos(pos: string): void {\r\n    this._pos = pos;\r\n  }\r\n\r\n  public setLeftVariable(variable: IVeryVar): void {\r\n    this._leftType = AssignType.Variable;\r\n    this._leftVariable = variable;\r\n  }\r\n\r\n  public setLeftTemplate(template: VE_Template): void {\r\n    this._leftType = AssignType.Template;\r\n    this._leftTemplate = template;\r\n  }\r\n\r\n  public setLeftTemplateVar(template: VE_Template, var_id: string): void {\r\n    this._leftType = AssignType.TemplateVariable;\r\n    this._leftTemplate = template;\r\n    this._leftVarID = var_id;\r\n  }\r\n\r\n  public setRightVariable(variable: IVeryVar): void {\r\n    this._rightType = AssignType.Variable;\r\n    this._rightVariable = variable;\r\n  }\r\n\r\n  public setRightTemplate(template: VE_Template): void {\r\n    this._rightType = AssignType.Template;\r\n    this._rightTemplate = template;\r\n  }\r\n\r\n  public setRightNull(): void {\r\n    this._rightType = AssignType.Template;\r\n    this._rightTemplate = null;\r\n  }\r\n\r\n  public setRightTemplateVariable(template: VE_Template, var_id: string): void {\r\n    this._rightType = AssignType.TemplateVariable;\r\n    this._rightTemplate = template;\r\n    this._rightVarID = var_id;\r\n  }\r\n\r\n  public setRightConst(const_str: string): void {\r\n    this._rightType = AssignType.Const;\r\n    this._rightConstStr = const_str;\r\n  }\r\n\r\n  public setRightConstValue(const_value: any) {\r\n    this._rightType = AssignType.Const;\r\n    this._rightConstValue = const_value;\r\n  }\r\n\r\n  public finish(): void {\r\n\r\n  }\r\n\r\n  public assign(): void {\r\n    // \r\n    if (this._leftType === AssignType.Variable) {\r\n      this.rightAssignment();\r\n    }\r\n    // \r\n    else if (this._leftType === AssignType.Template) {\r\n      if (this._rightTemplate == null) {\r\n        if (this._leftTemplate !== null) {\r\n          this._leftTemplate.unload();\r\n        }\r\n      }\r\n      else {\r\n        this._leftTemplate = this._rightTemplate;\r\n      }\r\n    }\r\n    // .\r\n    else {\r\n      if (this._leftTemplate!.templateInstance !== null) {\r\n        if (this._leftTemplate!.templateInstance.isCreatedExpression(this._leftVarID)) {\r\n          ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n          return;\r\n        }\r\n        else if (this._leftTemplate!.templateInstance.isCreatedVariable(this._leftVarID)) {\r\n          this._leftVariable = this._leftTemplate!.templateInstance.getVariable(this._leftVarID);\r\n          this.rightAssignment();\r\n        }\r\n        else if (this._leftTemplate!.templateInstance.isCreatedFsm(this._leftVarID)) {\r\n          this._leftVariable = this._leftTemplate!.templateInstance.getFsm(this._leftVarID).fsmVar;\r\n          this.rightAssignment();\r\n        }\r\n        else {\r\n          ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n          return;\r\n        }\r\n      }\r\n      else {\r\n        ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._leftTemplate!.templateVarID);\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n  private rightAssignment(): void {\r\n    // \r\n    if (this._rightType === AssignType.Variable) {\r\n      this._leftVariable!.setValue(this._rightVariable!.getValue());\r\n    }\r\n    // \r\n    else if (this._rightType === AssignType.Const) {\r\n      if (this._rightConstValue === null) {\r\n        let errorInfo: ErrorInfo = new ErrorInfo();\r\n        this._rightConstValue = this._leftVariable!.initValue(this._rightConstStr, errorInfo);\r\n        if (!errorInfo.isRight) {\r\n          ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightConstStr);\r\n          return;\r\n        }\r\n        else {\r\n          //UnityEngine.Debug.Log(\"1 - \" + _totalStr + \"\" + this._rightConstValue);\r\n          this._leftVariable!.setValue(this._rightConstValue);\r\n        }\r\n      }\r\n      else {\r\n        //UnityEngine.Debug.Log(\"2 - \" + _totalStr + \"\" + this._rightConstValue);\r\n        this._leftVariable!.setValue(this._rightConstValue);\r\n      }\r\n    }\r\n    else  //.\r\n    {\r\n      if (this._rightTemplate!.templateInstance != null) {\r\n        if (this._rightTemplate!.templateInstance.isCreatedExpression(this._rightVarID)) {\r\n          let exp: IExpression = this._rightTemplate!.templateInstance.getExpression(this._rightVarID);\r\n          if (VE_AssignmentTypeJudge.allowExpression(this._leftVariable!, exp)) {\r\n            this._leftVariable!.setValue(exp.evaluate());\r\n          }\r\n          else {\r\n            ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n            return;\r\n          }\r\n        }\r\n        else if (this._rightTemplate!.templateInstance.isCreatedVariable(this._rightVarID)) {\r\n          let v: IVeryVar = this._rightTemplate!.templateInstance.getVariable(this._rightVarID);\r\n          if (VE_AssignmentTypeJudge.allow(this._leftVariable!, v)) {\r\n            this._leftVariable!.setValue(v.getValue());\r\n          }\r\n          else {\r\n            ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n            return;\r\n          }\r\n        }\r\n        else if (this._rightTemplate!.templateInstance.isCreatedFsm(this._rightVarID)) {\r\n          let v: IVeryVar = this._rightTemplate!.templateInstance.getFsm(this._rightVarID).fsmVar;\r\n          if (VE_AssignmentTypeJudge.allow(this._leftVariable!, v)) {\r\n            this._leftVariable!.setValue(v.getValue());\r\n          }\r\n          else {\r\n            ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n            return;\r\n          }\r\n        }\r\n        else {\r\n          ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n          return;\r\n        }\r\n      }\r\n      else {\r\n        ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n}","import { IVeryVar } from \"../variables\";\r\nimport { IExpression } from \"../expression\";\r\n\r\nexport class VE_AssignmentTypeJudge {\r\n\r\n  public static allow(first: IVeryVar, second: IVeryVar): boolean {\r\n    if (first.varType === second.varType) {\r\n      return true;\r\n    }\r\n    else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static allowExpression(first: IVeryVar, second: IExpression): boolean {\r\n    if (first.varType === second.expType) {\r\n      return true;\r\n    }\r\n    else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n}","export * from './actionBehaviour';\r\nexport * from './assignment';\r\nexport * from './actions';\r\nexport * from './sequenceActions';","import { SequenceActionState } from \"../enum\";\r\n\r\nexport class VE_SequenceActions {\r\n\r\n  public get sequenceState(): SequenceActionState {\r\n    return this._sequenceState;\r\n  }\r\n  private _sequenceState: SequenceActionState = SequenceActionState.Initial;\r\n\r\n\r\n  \r\n}","import { VE_FsmData } from \"./fsmData\";\r\n\r\nexport class VE_DataSource {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = '';\r\n\r\n  public get templateID(): string {\r\n    return this._templateID;\r\n  }\r\n  private _templateID: string = '';\r\n\r\n  public get isTemplate(): boolean {\r\n    return this._isTemplate;\r\n  }\r\n  private _isTemplate: boolean = false;\r\n\r\n  public get id(): string {\r\n    if (this._isTemplate) {\r\n      return this._templateID;\r\n    } else {\r\n      return this._objectID;\r\n    }\r\n  }\r\n\r\n  private _fsmIDs: string[] = [];\r\n  private _fsmDic: { [key: string]: VE_FsmData } = {};\r\n  private _fsmPosDic: { [key: string]: string } = {};\r\n\r\n  private _triggerIDs: string[] = [];\r\n  private _triggerDic: { [key: string]: string[] } = {};\r\n  private _triggerPosDic: { [key: string]: string } = {};\r\n\r\n  private _actionIDs: string[] = [];\r\n  private _actionDic: { [key: string]: string[] } = {};\r\n  private _actionInitValue: { [key: string]: string[] } = {};\r\n  private _actionPosDic: { [key: string]: string } = {};\r\n\r\n  public get triggerCount(): number {\r\n    return this._triggerIDs.length;\r\n  }\r\n\r\n  public get actionCount(): number {\r\n    return this._actionIDs.length;\r\n  }\r\n\r\n  public get fsmCount(): number {\r\n    return this._fsmIDs.length;\r\n  }\r\n\r\n\r\n  constructor(project_name: string, name_id: string, is_template: boolean) {\r\n    this._projectName = project_name;\r\n    this._isTemplate = is_template;\r\n    if(is_template) {\r\n      this._templateID = name_id;\r\n    } else {\r\n      this._objectID = name_id;\r\n    }\r\n  }\r\n\r\n  public isCreatedFsm(fsm_id: string): boolean {\r\n    if(this._fsmDic[fsm_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public createFsm(fsm_id: string, pos: string): void {\r\n    this._fsmIDs.push(fsm_id);\r\n    this._fsmDic[fsm_id] = new VE_FsmData(fsm_id, this);\r\n    this._fsmPosDic[fsm_id] = pos;\r\n  }\r\n\r\n  public getFsmData(fsm_id: string): VE_FsmData {\r\n    return this._fsmDic[fsm_id];\r\n  }\r\n\r\n  public getFsmPos(fsm_id: string): string {\r\n    return this._fsmPosDic[fsm_id];\r\n  }\r\n\r\n  public hasFsmIndex(index: number): boolean {\r\n    if(index >= 0 && index < this._fsmIDs.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getFsmID(index: number): string {\r\n    return this._fsmIDs[index];\r\n  }\r\n\r\n  public isCreatedTrigger(trigger_id: string): boolean {\r\n    if(this._triggerDic[trigger_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTrigger(trigger_id: string, trigger_data: string[], pos: string): void {\r\n    this._triggerIDs.push(trigger_id);\r\n    this._triggerDic[trigger_id] = trigger_data;\r\n    this._triggerPosDic[trigger_id] = pos;\r\n  }\r\n\r\n  public getTrigger(trigger_id: string): string[] {\r\n    return this._triggerDic[trigger_id];\r\n  }\r\n\r\n  public getTriggerPos(trigger_id: string): string {\r\n    return this._triggerPosDic[trigger_id];\r\n  }\r\n\r\n  public hasTriggerIndex(index: number): boolean {\r\n    if(index >=0 && index < this._triggerIDs.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getTriggerID(index: number): string {\r\n    return this._triggerIDs[index];\r\n  }\r\n\r\n  public getTriggerPara(trigger_id: string): string[] {\r\n    return this._triggerDic[trigger_id];\r\n  }\r\n\r\n  public isCreatedAction(action_id: string): boolean {\r\n    if(this._actionDic[action_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addAction(action_id: string, action_data: string[], action_init_val: string[], pos: string): void {\r\n    this._actionIDs.push(action_id);\r\n    this._actionDic[action_id] = action_data;\r\n    this._actionInitValue[action_id] = action_init_val;\r\n    this._actionPosDic[action_id] = pos;\r\n  }\r\n\r\n  public getActionPara(action_id: string): string[] {\r\n    return this._actionDic[action_id];\r\n  }\r\n\r\n  public getActionPos(action_id: string): string {\r\n    return this._actionPosDic[action_id];\r\n  }\r\n\r\n  public getActionInitVal(action_id: string): string[] {\r\n    return this._actionInitValue[action_id];\r\n  }\r\n\r\n  public hasActionIndex(index: number): boolean {\r\n    if(index >= 0 && index < this._actionIDs.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getActionID(index: number): string {\r\n    return this._actionIDs[index];\r\n  }\r\n\r\n  public clear(): void {\r\n    this._fsmIDs = [];\r\n    this._fsmDic = {};\r\n    this._triggerIDs = [];\r\n    this._triggerDic = {};\r\n    this._actionIDs = [];\r\n    this._actionDic = {};\r\n    this._actionInitValue = {};\r\n  }\r\n\r\n\r\n\r\n}","import { VE_DataSource, VE_StateData } from \"./index\";\r\n\r\nexport class VE_FsmData {\r\n  public get dataSource(): VE_DataSource {\r\n    return this._dataSource;\r\n  }\r\n  private _dataSource: VE_DataSource;\r\n\r\n  public get fsmID(): string {\r\n    return this._fsmID;\r\n  }\r\n  private _fsmID: string;\r\n\r\n  public get fsmType(): string {\r\n    return this._fsmType;\r\n  }\r\n  private _fsmType: string = '';\r\n\r\n  public get initialValStr(): string {\r\n    return this._initialValStr;\r\n  }\r\n  private _initialValStr: string = 'defalut';\r\n\r\n  private _states: VE_StateData[] = [];\r\n\r\n  public get count(): number {\r\n    return this._states.length;\r\n  }\r\n\r\n  constructor(fsm_id: string, data_source: VE_DataSource) {\r\n    this._dataSource = data_source;\r\n    this._fsmID = fsm_id;\r\n  }\r\n\r\n  public initFsm(fsm_type: string, initial_var: string): void {\r\n    this._fsmType = fsm_type;\r\n    this._initialValStr = initial_var;\r\n  }\r\n\r\n  public addState(state_data: VE_StateData): void {\r\n    this._states.push(state_data);\r\n  }\r\n\r\n  public getStateData(index: number): VE_StateData {\r\n    return this._states[index];\r\n  }\r\n\r\n}","export * from './variableData';\r\nexport * from './fsmData';\r\nexport * from './stateActionData';\r\nexport * from './stateTriggerData';\r\nexport * from './stateData';\r\nexport * from './dataSource';\r\n\r\n","import { StateActionType } from \"../enum\";\r\n\r\nexport class VE_StateActionData {\r\n\r\n  public actionID: string;\r\n  public enabled: string;\r\n  public everyFrame: string;\r\n  public isSequence: string;\r\n  public type: StateActionType;\r\n  public totalString: string = '';\r\n  public varID: string = '';\r\n  public varValue: string = '';\r\n\r\n  constructor(action_id: string, enabled: string = 'false', every_frame: string = 'false', sequence: string = 'false', type: StateActionType = StateActionType.Action) {\r\n    this.actionID = action_id;\r\n    this.enabled = enabled;\r\n    this.everyFrame = every_frame;\r\n    this.isSequence = sequence;\r\n    this.type = type;\r\n  }\r\n\r\n  public setNormalAction(action_id: string, enabled: string = 'false', every_frame: string = 'false', sequence: string = 'false'): void {\r\n    this.actionID = action_id;\r\n    this.enabled = enabled;\r\n    this.everyFrame = every_frame;\r\n    this.isSequence = sequence;\r\n    this.type = StateActionType.Action;\r\n  }\r\n\r\n  public setAssignmentAction(total_string: string, var_id: string, var_value: string): void {\r\n    this.totalString = total_string;\r\n    this.varID = var_id;\r\n    this.varValue = var_value;\r\n    this.type = StateActionType.Assignment;\r\n  }\r\n\r\n}","import { VE_FsmData } from \"./index\";\r\nimport { StateConst } from \"../state\";\r\nimport { VE_StateTriggerData } from \"./stateTriggerData\";\r\nimport { VE_StateActionData } from \"./stateActionData\";\r\n\r\nexport class VE_StateData {\r\n\r\n  public get fsmData(): VE_FsmData {\r\n    return this._fsmData;\r\n  }\r\n  private _fsmData: VE_FsmData;\r\n\r\n  public get ValStr(): string {\r\n    return this._valStr;\r\n  }\r\n  private _valStr: string;\r\n\r\n  public get isInitialValue(): boolean {\r\n    return this._isInitialValue;\r\n  }\r\n  private _isInitialValue: boolean;\r\n\r\n  public get stateIndex(): number {\r\n    return this._stateIndex;\r\n  }\r\n  private _stateIndex: number = StateConst.STATE_INDEX;\r\n\r\n  public logicalExp: string = '';\r\n\r\n  public rowIndex: number = -1;\r\n\r\n  private _triggers: VE_StateTriggerData[] = [];\r\n  private _triggersPos: string[] = [];\r\n  private _actions: VE_StateActionData[] = [];\r\n  private _actionsPos: string[] = [];\r\n  private _associatedStates: string[] = [];\r\n  private _associatedStatesPos: string[] = [];\r\n\r\n  public get isSequence(): boolean {\r\n    return this._isSequence;\r\n  }\r\n  private _isSequence: boolean = false;\r\n\r\n  public get triggerCount(): number {\r\n    return this._triggers.length;\r\n  }\r\n\r\n  public get actionCount(): number {\r\n    return this._actions.length;\r\n  }\r\n\r\n  public get associatedStateCount(): number {\r\n    return this._associatedStates.length;\r\n  }\r\n\r\n  constructor(fsm_data: VE_FsmData, val_str: string, is_initial_value: boolean, state_index: number = StateConst.STATE_INDEX) {\r\n    this._fsmData = fsm_data;\r\n    this._valStr = val_str;\r\n    this._isInitialValue = is_initial_value;\r\n    this._stateIndex = state_index;\r\n  }\r\n\r\n  public hasTrigger(index: number): boolean {\r\n    if(index >= 0 && index < this._triggers.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTrigger(trigger_data: VE_StateTriggerData, pos: string): void {\r\n    this._triggers.push(trigger_data);\r\n    this._triggersPos.push(pos);\r\n  }\r\n\r\n  public getTrigger(index: number): VE_StateTriggerData {\r\n    return this._triggers[index];\r\n  }\r\n\r\n  public getTriggerPos(index: number): string {\r\n    return this._triggersPos[index];\r\n  }\r\n\r\n  public hasAction(index: number): boolean {\r\n    if(index >= 0 && index < this._actions.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addAction(action_data: VE_StateActionData, pos: string): void {\r\n    this._actions.push(action_data);\r\n    this._actionsPos.push(pos);\r\n  }\r\n\r\n  public getAction(index: number): VE_StateActionData {\r\n    return this._actions[index];\r\n  }\r\n\r\n  public getActionPos(index: number): string {\r\n    return this._actionsPos[index];\r\n  }\r\n\r\n  public hasAssociatedState(index: number): boolean {\r\n    if(index >= 0 && index < this._associatedStates.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addAssociatedState(associated_state_data: string, pos: string): void {\r\n    this._associatedStates.push(associated_state_data);\r\n    this._associatedStatesPos.push(pos);\r\n  }\r\n\r\n  public getAssociatedState(index: number): string {\r\n    return this._associatedStates[index];\r\n  }\r\n\r\n  public getAssociatedStatePos(index: number): string {\r\n    return this._associatedStatesPos[index];\r\n  }\r\n\r\n  public setSequence(): void {\r\n    this._isSequence = true;\r\n  }\r\n\r\n}","export class VE_StateTriggerData {\r\n\r\n  public triggerID: string;\r\n  public logicalSwitch: string;\r\n  public logicalExp: string;\r\n\r\n  public static get Empty(): VE_StateTriggerData {\r\n    return new VE_StateTriggerData('');\r\n  }\r\n\r\n  constructor(trigger_id: string) {\r\n    this.triggerID = trigger_id;\r\n    this.logicalSwitch = '';\r\n    this.logicalExp = '';\r\n   }\r\n}","export class VE_VariableData {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  private _variableIDs: string[] = [];\r\n  private _varDics: { [key: string]: string[] } = {};\r\n  private _varPosDic: { [key: string]: string } = {};\r\n\r\n  public get count(): number {\r\n    return this._variableIDs.length;\r\n  }\r\n\r\n  constructor(project_name: string) {\r\n    this._projectName = project_name;\r\n  }\r\n\r\n  public isCreatedVariable(var_id: string): boolean {\r\n    if (this._varDics[var_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addVariable(var_id: string, var_paras: string[], pos: string): void {\r\n    this._varDics[var_id] = var_paras;\r\n    this._variableIDs.push(var_id);\r\n    this._varPosDic[var_id] = pos;\r\n  }\r\n\r\n  public getVariableID(index: number): string {\r\n    if (index >= 0 && index < this._variableIDs.length) {\r\n      return this._variableIDs[index];\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n\r\n  public getVariableParas(var_id: string): string[] {\r\n    return this._varDics[var_id];\r\n  }\r\n\r\n  public getPos(var_id: string): string {\r\n    return this._varPosDic[var_id];\r\n  }\r\n\r\n  public clear(): void {\r\n    this._variableIDs = [];\r\n    this._varDics = {};\r\n  }\r\n}","\r\n\r\n\r\nexport enum ActionType {\r\n  Normal, Animation\r\n}\r\n\r\nexport enum SequenceActionState {\r\n  Initial, Prepared, Running, Pause\r\n}\r\n\r\nexport enum StateActionType {\r\n  Action, Assignment\r\n}\r\n\r\nexport enum AssignType {\r\n  Variable = 0,\r\n  Template,\r\n  TemplateVariable,\r\n  Const,\r\n}\r\n\r\nexport enum AssignmentType {\r\n  Const = 0,\r\n  Variable,\r\n  Expression\r\n}\r\n\r\nexport enum AssociatedFsmType {\r\n  Object = 0,\r\n  Template\r\n}\r\n\r\nexport enum VariableScope {\r\n  Local = 0,\r\n  Fsm,\r\n  Global,\r\n  Scene\r\n}\r\n\r\nexport enum Severity {\r\n  Warning,\r\n  Error\r\n}\r\n\r\n","export * from './enumTypes';","import { IPosition } from \"./positions\";\r\n\r\nexport class ExpChar implements IPosition {\r\n\r\n  private _value: string = '';\r\n  private _line: number = 0;\r\n  private _pos: number = 0;\r\n\r\n\r\n  constructor(value: string, line: number, pos: number) {\r\n    this._value = value;\r\n    this._line = line;\r\n    this._pos = pos;\r\n  }\r\n\r\n  public getValue(): string {\r\n    return this._value;\r\n  }\r\n\r\n  public getLine(): number {\r\n    return this._line;\r\n  }  \r\n  \r\n  public getPos(): number {\r\n    \r\n    return this._pos;\r\n  }\r\n\r\n  public isDigit(): boolean {\r\n    return (/\\d/).test(this._value);\r\n  }\r\n\r\n  public isLetter(): boolean {\r\n    return (/[a-zA-Z]/).test(this._value);\r\n  }\r\n\r\n  public isWhiteSpace(): boolean {\r\n    return this._value === ' ';\r\n  }\r\n\r\n  public isNewLine(): boolean {\r\n    return this._value === '\\n';\r\n  }\r\n\r\n  public isEndOfInput(): boolean {\r\n    return this._value === '\\0';\r\n  }\r\n\r\n  public is(...val: string[]): boolean {\r\n    for(let i: number = 0; i < val.length; i++) {\r\n      if(val[i] === this._value && val[i] !== '\\0') {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public toString(): string {\r\n    return this._value;\r\n  }\r\n\r\n}\r\n\r\n","import { Scope } from \"./scope\";\r\nimport { IExpression } from \"./expressions\";\r\nimport { ParseError, NameLocation } from \"./positions\";\r\nimport { VE_ExpressionParsing } from \"./expressionParsing\";\r\nimport { VariableScope } from \"../enum\";\r\nimport { Variable } from \"./variable\";\r\nimport { ShowError } from \"../html\";\r\n\r\nexport class ExpManager {\r\n\r\n  private static _scope: Scope;\r\n  private static _expVariable: { [key: string]: IExpression } = {};\r\n\r\n  public static errors: ParseError[] = [];\r\n\r\n  private static _projectName = '';\r\n  private static _objectID = '';\r\n\r\n  public static init() {\r\n    this._scope = Scope.Create();\r\n  }\r\n\r\n  public static isCreated(name_id: string): boolean {\r\n    if (this._scope.isCreated(name_id)) {\r\n      return true;\r\n    }\r\n    if (this._expVariable[name_id]) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public static isCreatedVariable(name_id: string): boolean {\r\n    if (this._scope.isCreated(name_id)) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static isCreatedExpression(name_id: string): boolean {\r\n    if (this._expVariable[name_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static createVariable(name_id: string, type: string, value: any): boolean {\r\n    this.errors = [];\r\n    if (this.isCreated(name_id)) {\r\n      this.errors.push(ParseError.Error(new NameLocation(name_id), `${name_id}${type}`));\r\n      return false;\r\n    }\r\n    this._scope.setVariable(name_id, type, value);\r\n    return true;\r\n  }\r\n\r\n  public static createExpression(name_id: string, exp_str: string): boolean {\r\n    this.errors = [];\r\n    if (this.isCreated(name_id)) {\r\n      this.errors.push(ParseError.Error(new NameLocation(name_id), `${name_id}${exp_str}`));\r\n      return false;\r\n    }\r\n    let exp: IExpression = VE_ExpressionParsing.parsing(name_id, exp_str, this._scope, this._projectName, '', '', VariableScope.Scene);\r\n    if (VE_ExpressionParsing.errors.length > 0) {\r\n      for (let i: number = 0; i < VE_ExpressionParsing.errors.length; i++) {\r\n        this.errors.push(VE_ExpressionParsing.errors[i]);\r\n      }\r\n      return false;\r\n    }\r\n    this._expVariable[name_id] = exp;\r\n    return true;\r\n  }\r\n\r\n  public static getValue(name_id: string): any {\r\n    if (this.isCreated(name_id)) {\r\n      if (this.isCreatedVariable(name_id)) {\r\n        return this._scope.find(name_id)!.getValue();\r\n      } else {\r\n        return this._expVariable[name_id].evaluate();\r\n      }\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static getExpression(name_id: string): IExpression | null {\r\n    if (this._expVariable[name_id]) {\r\n      return this._expVariable[name_id];\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static getVariable(name_id: string): Variable | null {\r\n    if (this.isCreatedVariable(name_id)) {\r\n      return this._scope.find(name_id);\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n\r\n  public static printError(): void {\r\n    if (this.errors.length > 0) {\r\n      for (let i: number = 0; i < this.errors.length; i++) {\r\n        console.log(this.errors[i].toString());\r\n        ShowError.showError(this.errors[i].toString());\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n}\r\n\r\nExpManager.init();\r\n\r\n// try {\r\n//   ExpManager.createVariable('first', 'number', 1);\r\n//   ExpManager.createVariable('second', 'number', 2);\r\n//   ExpManager.createVariable('third', 'bool', true);\r\n//   console.log(ExpManager.getValue('third'));\r\n\r\n//   // ExpManager.createExpression('add', '(1 + first + second * (first + second + 3)) / 2');\r\n//   // ExpManager.createExpression('add', 'cos(PI/2) + sin(PI/2)');\r\n//   // console.log(ExpManager.getExpression('add')!.toString());\r\n//   // console.log(' ' + ExpManager.getExpression('add')!.evaluate());\r\n\r\n//   // ExpManager.createExpression('exp1', 'second + 2 * second + abs(-10)');\r\n//   ExpManager.createExpression('exp1', 'first * second + second > 10');\r\n//   console.log('2 ' + ExpManager.getExpression('exp1')!.evaluate());\r\n\r\n//   // ExpManager.createExpression('multiply', 'x * y');\r\n//   // ExpManager.createExpression('substract', 'x - y');\r\n\r\n//   // console.log(ExpManager.getExpression('add')!.evaluate());\r\n\r\n//   // console.log(ExpManager.getExpression('multiply')!.evaluate());\r\n//   // console.log(ExpManager.getExpression('substract')!.evaluate());\r\n\r\n// }\r\n// catch {\r\n\r\n// }\r\n\r\n// ExpManager.printError();\r\n\r\n\r\n","export enum ExpressionType {\r\n  ID, SPECIAL_ID, KEYWORD, STRING, NUMBER, BOOL, OPERATOR, INTEGER, FLOAT, DOUBLE, EOI\r\n}","import { Scope } from \"./scope\";\r\nimport { Tokenizer } from \"./tokenizer\";\r\nimport { ParseError, IPosition } from \"./positions\";\r\nimport { IExpression, BinaryOperator, BinaryExpression, ConstantExpression, VeryTemplateExpression, VeryVarExpression } from \"./expressions\";\r\nimport { ExpressionType } from \"./expressionEnum\";\r\nimport { FunctionExpression } from \"./functionExpression\";\r\nimport { Token } from \"./token\";\r\nimport { IFunction, CustomFunctions } from \"./functions\";\r\nimport { Variable } from \"./variable\";\r\nimport { VariableExpression } from \"./variableExpression\";\r\nimport { VariableScope } from \"../enum\";\r\nimport { VE_Expressions } from \"./veryExpressions\";\r\nimport { VE_Objects, VeryEngineObject } from \"../object\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { VE_Fsm } from \"../state\";\r\n\r\n\r\n\r\nexport class VE_ExpressionParsing {\r\n\r\n  private static _bracketPair: { [key: string]: string } = {};\r\n\r\n  private static _scope: Scope;\r\n  private static _tokenizer: Tokenizer;\r\n\r\n  public static errors: ParseError[] = [];\r\n\r\n  private static _projectName: string = '';\r\n  private static _objectID: string = '';\r\n  private static _fsmID = '';\r\n\r\n  private static _varScope: VariableScope = VariableScope.Local;\r\n\r\n\r\n  public static init(): void {\r\n    this._bracketPair['('] = ')';\r\n    this._bracketPair['['] = ']';\r\n    this._bracketPair['{'] = '}';\r\n    this._bracketPair[''] = '';\r\n    this._bracketPair[''] = '';\r\n  }\r\n\r\n  public static parsing(name_id: string, input_exp: string, scope: Scope, project_name: string, object_id: string, fsm_id: string, var_scope: VariableScope): IExpression {\r\n    this._scope = scope;\r\n    this._projectName = project_name;\r\n    this._objectID = object_id;\r\n    this._fsmID = fsm_id;\r\n    this._varScope = var_scope;\r\n    this._tokenizer = new Tokenizer(input_exp);\r\n    // while(!this._tokenizer.current().isEnd()) {\r\n    //   console.log(this._tokenizer.consume());\r\n    // }\r\n    this.errors = [];\r\n    return this.parse();\r\n  }\r\n\r\n  private static parse(): IExpression {\r\n    let resultExp: IExpression = this.buildExpression();\r\n    if (!this._tokenizer.current().isEnd()) {\r\n      this._tokenizer.addError(this._tokenizer.current(), `${this._tokenizer.current().getSource()}`);\r\n      this._tokenizer.consume();\r\n    }\r\n    this.errors = this._tokenizer.getProblemCollector();\r\n    return resultExp;\r\n  }\r\n\r\n\r\n  private static buildExpression(): IExpression {\r\n    let left: IExpression = this.relationalExp();\r\n    if (this._tokenizer.current().isOperator('&&')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.buildExpression();\r\n      return this.reOrder(left, right, BinaryOperator.Add);\r\n    }\r\n    if (this._tokenizer.current().isOperator('||')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.buildExpression();\r\n      return this.reOrder(left, right, BinaryOperator.Or);\r\n    }\r\n    return left;\r\n  }\r\n\r\n\r\n  private static relationalExp(): IExpression {\r\n    let left: IExpression = this.algebraExp();\r\n    if (this._tokenizer.current().isOperator('<')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.LT);\r\n    }\r\n    if (this._tokenizer.current().isOperator('<=')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.LT_EQ);\r\n    }\r\n    if (this._tokenizer.current().isOperator('==')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.EQ);\r\n    }\r\n    if (this._tokenizer.current().isOperator('>=')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.GT_EQ);\r\n    }\r\n    if (this._tokenizer.current().isOperator('>')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.GT);\r\n    }\r\n    if (this._tokenizer.current().isOperator('!=')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.NEQ);\r\n    }\r\n    return left;\r\n  }\r\n\r\n  private static algebraExp(): IExpression {\r\n    let left: IExpression = this.productExp();\r\n    if (this._tokenizer.current().isOperator('+')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.algebraExp();\r\n      return this.reOrder(left, right, BinaryOperator.Add);\r\n    }\r\n    if (this._tokenizer.current().isOperator('-')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.algebraExp();\r\n      return this.reOrder(left, right, BinaryOperator.Subtract);\r\n    }\r\n    return left;\r\n  }\r\n\r\n  private static productExp(): IExpression {\r\n    let left: IExpression = this.exponentExp();\r\n    if (this._tokenizer.current().isOperator('*')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.productExp();\r\n      return this.reOrder(left, right, BinaryOperator.Multiply);\r\n    }\r\n    if (this._tokenizer.current().isOperator('/')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.productExp();\r\n      return this.reOrder(left, right, BinaryOperator.Divide);\r\n    }\r\n    if (this._tokenizer.current().isOperator('%')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.productExp();\r\n      return this.reOrder(left, right, BinaryOperator.Modulo);\r\n    }\r\n    return left;\r\n  }\r\n\r\n  private static exponentExp(): IExpression {\r\n    let left: IExpression = this.atomExp();\r\n    if (this._tokenizer.current().isOperator('!') || this._tokenizer.current().isOperator('')) {\r\n      left = new BinaryExpression(left, left, BinaryOperator.Not);\r\n    }\r\n    return left;\r\n  }\r\n\r\n  private static atomExp(): IExpression {\r\n    // -\r\n    if (this._tokenizer.current().isOperator('-')) {\r\n      this._tokenizer.consume();\r\n      let result: BinaryExpression = new BinaryExpression(new ConstantExpression(0, 'number'), this.atomExp(), BinaryOperator.Subtract);\r\n      result.setSeal();\r\n      return result;\r\n    }\r\n    // \r\n    if (this._tokenizer.current().isOperator('!') && (this._tokenizer.next().isIdentifier() || this._tokenizer.next().isKeyword() || this._tokenizer.next().isStartBracket())) {\r\n      this._tokenizer.consume();\r\n      let newValue: IExpression = this.atomExp();\r\n      if (newValue.expType === 'bool') {\r\n        let notExp: BinaryExpression = new BinaryExpression(newValue, newValue, BinaryOperator.Not);\r\n        return notExp;\r\n      } else {\r\n        this._tokenizer.addError(this._tokenizer.current(), '(!)bool');\r\n        return ConstantExpression.Empty();\r\n      }\r\n    }\r\n    // +\r\n    if (this._tokenizer.current().isOperator('+') && this._tokenizer.next().isStartBracket()) {\r\n      this._tokenizer.consume();\r\n    }\r\n    // +\r\n    if (this._tokenizer.current().isOperator('+') && this._tokenizer.next().isConstant()) {\r\n      this._tokenizer.consume();\r\n    }\r\n    // +\r\n    if (this._tokenizer.current().isOperator('+') && this._tokenizer.next().isIdentifier()) {\r\n      this._tokenizer.consume();\r\n    }\r\n\r\n    // VeryVar\r\n    // \r\n    // 1**null2.**null3*.*4.*.*\r\n\r\n    // 1.*==null\r\n    // 2..*\r\n    if (this._tokenizer.current().isOperator(\"*\") && this._tokenizer.next().isIdentifier())  //*VeryVarVeryVarExpression\r\n    {\r\n      this._tokenizer.consume();\r\n      let varID: string = \"*\" + this._tokenizer.current().getContents();\r\n      let varExpression: Nullable<IExpression> = VE_Expressions.getParseExpression(this._projectName, this._objectID, varID, this._varScope);\r\n      if (varExpression === null) {\r\n        // \r\n        let templateExpression: Nullable<VeryTemplateExpression> = VE_Expressions.getTemplateExpression(this._projectName, this._objectID, varID, this._varScope);\r\n        if (templateExpression === null) {\r\n          this._tokenizer.addError(this._tokenizer.current(), \"VeryVar\" + varID + \"VeryVar\");\r\n          this._tokenizer.consume();\r\n          return ConstantExpression.Empty();\r\n        }\r\n        else {\r\n          //UnityEngine.Debug.LogError(\"\" + _tokenizer.current());\r\n          // this._tokenizer.consume();\r\n          // return templateExpression;\r\n          // TODO: \r\n          this._tokenizer.addError(this._tokenizer.current(), \"VeryVar\" + varID + \"\");\r\n          this._tokenizer.consume();\r\n          return ConstantExpression.Empty();\r\n        }\r\n      }\r\n      else {\r\n        this._tokenizer.consume();\r\n        return varExpression;\r\n      }\r\n    }\r\n\r\n    // \r\n    if (this._tokenizer.current().isStartBracket()) {\r\n      let endBracket: string = this._bracketPair[this._tokenizer.consume().getTrigger()];\r\n      let result: IExpression = this.buildExpression();\r\n      if (result.className === 'BinaryExpression') {\r\n        (<BinaryExpression>result).setSeal();\r\n      }\r\n      this.expectTrigger(ExpressionType.OPERATOR, endBracket); // \r\n      return result;\r\n    }\r\n    // \r\n    if (this._tokenizer.current().isConstant()) {\r\n      let value: any;\r\n      let typeStr: string = 'string';\r\n      if (this._tokenizer.current().isBool()) {\r\n        value = this._tokenizer.current().getContents().toLowerCase() === 'true' ? true : false;\r\n        typeStr = 'bool';\r\n      } else if (this._tokenizer.current().isNumber()) {\r\n        value = parseFloat(this._tokenizer.current().getContents());\r\n        typeStr = 'number';\r\n        // console.log('' + value);\r\n      } else {\r\n        value = this._tokenizer.current().getContents();\r\n        typeStr = 'string';\r\n      }\r\n      this._tokenizer.consume();\r\n      let constantExp: IExpression = new ConstantExpression(value, typeStr);\r\n      return constantExp;\r\n    }\r\n    // \r\n    if (this._tokenizer.current().isIdentifier()) {\r\n      if (this._tokenizer.next().isStartBracket()) { // \r\n        // \r\n        let endStart: string = this._bracketPair[this._tokenizer.next().getTrigger()];\r\n        return this.functionCall(endStart);\r\n      } else { // \r\n        // VryVar\r\n        let varValue: Variable | null;\r\n        let loc: IPosition = this._tokenizer.current();\r\n        let variableID: string = this._tokenizer.consume().getContents();\r\n        if (variableID.endsWith('.') && this._tokenizer.current().isOperator('*') && this._tokenizer.next().isIdentifier()) { // .*\r\n          // VeryVar.*\r\n          this._tokenizer.consume();\r\n          let varID: string = variableID + '*' + this._tokenizer.current().getContents();\r\n          let varExpression: Nullable<IExpression> = VE_Expressions.getParseExpression(this._projectName, this._objectID, varID, this._varScope);\r\n          if (varExpression === null) {\r\n            // TODO\r\n            let templateExpression: Nullable<VeryTemplateExpression> = VE_Expressions.getTemplateExpression(this._projectName, this._objectID, varID, this._varScope);\r\n            if (templateExpression === null) {\r\n              this._tokenizer.addError(loc, `VeryVar${varID}VeryVar`);\r\n            } else {\r\n              this._tokenizer.addError(this._tokenizer.current(), \"VeryVar\" + varID + \"\");\r\n            }\r\n            this._tokenizer.consume();\r\n            return ConstantExpression.Empty();\r\n          } else {\r\n            this._tokenizer.consume();\r\n            return varExpression;\r\n          }\r\n          // return ConstantExpression.Empty();\r\n        } else {\r\n          // \r\n          varValue = this._scope.find(variableID);\r\n          // console.log(variableID + '  ---  ' + varValue);\r\n          if (varValue === null) {\r\n            this._tokenizer.addError(loc, `${variableID}`);\r\n            return ConstantExpression.Empty();\r\n          } else {\r\n            return new VariableExpression(varValue);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    // TODO\r\n    if (this._tokenizer.current().isKeyword()) {\r\n      // this\r\n      if (this._tokenizer.current().getContents().toLowerCase().trim() === \"this\") {\r\n        if (this._varScope === VariableScope.Fsm && this._fsmID !== \"\") {\r\n          // \r\n          let objects: VE_Objects = VE_Manager.objects(this._projectName);\r\n          if (objects !== null) {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(this._objectID);\r\n            if (veryObject != null) {\r\n              let fsm: VE_Fsm = veryObject.getFsm(this._fsmID);\r\n              if (fsm != null) {\r\n                this._tokenizer.consume();\r\n                return new VeryVarExpression(fsm.fsmVar);\r\n              }\r\n            }\r\n          }\r\n        }\r\n        this._tokenizer.addError(this._tokenizer.current(), \"this\");\r\n        this._tokenizer.consume();\r\n        return ConstantExpression.Empty();\r\n      }\r\n      //   == null \r\n      else if (this._tokenizer.current().getContents().toLowerCase().trim() === \"null\" || this._tokenizer.current().getContents().toLowerCase().trim() === \"none\") {\r\n        //UnityEngine.Debug.LogError(\"\" + _tokenizer.current());\r\n        this._tokenizer.consume();\r\n        // TODO: \r\n        return new VeryTemplateExpression();\r\n      }\r\n      else {\r\n        this._tokenizer.addError(this._tokenizer.current(), \"\" + this._tokenizer.current().getContents() + \"\");\r\n        this._tokenizer.consume();\r\n        return ConstantExpression.Empty();\r\n      }\r\n    }\r\n\r\n    // \r\n    if (this._tokenizer.current().isSpecialIdentifier()) {\r\n      this._tokenizer.addError(this._tokenizer.current(), `ID${this._tokenizer.current().getSource()}`);\r\n      this._tokenizer.consume();\r\n      return ConstantExpression.Empty();\r\n    }\r\n\r\n    // \r\n    this._tokenizer.addError(this._tokenizer.current(), `${this._tokenizer.current().getSource()}`);\r\n    this._tokenizer.consume();\r\n\r\n    return ConstantExpression.Empty();\r\n  }\r\n\r\n  private static reOrder(left: IExpression, right: IExpression, op: BinaryOperator): IExpression {\r\n    if (right.className === 'BinaryExpression') {\r\n      let rightOp: BinaryExpression = <BinaryExpression>right;\r\n      if (!rightOp.isSealed() && rightOp.getPriority() === rightOp.getPriorityOp(op)) {\r\n        this.replaceLeft(rightOp, left, op);\r\n        return right;\r\n      }\r\n    }\r\n    return new BinaryExpression(left, right, op);\r\n  }\r\n\r\n  private static replaceLeft(target: BinaryExpression, newLeft: IExpression, op: BinaryOperator): void {\r\n    if (target.getLeftExp().className === 'BinaryExpression') {\r\n      let leftOp: BinaryExpression = <BinaryExpression>target.getLeftExp();\r\n      if (!leftOp.isSealed() && leftOp.getPriority() === leftOp.getPriorityOp(op)) {\r\n        this.replaceLeft(leftOp, newLeft, op);\r\n        return;\r\n      }\r\n    }\r\n    target.setLeftExp(new BinaryExpression(newLeft, target.getLeftExp(), op));\r\n  }\r\n\r\n  private static functionCall(end_bracket: string): IExpression {\r\n    let call: FunctionExpression = new FunctionExpression();\r\n    let funcToken: Token = this._tokenizer.consume();\r\n    if (!CustomFunctions.hasFunction(funcToken.getContents())) {\r\n      this._tokenizer.addError(funcToken, `${funcToken.getContents()}`);\r\n      return ConstantExpression.Empty();\r\n    }\r\n    let fun: IFunction = CustomFunctions.createFunction(funcToken.getContents());\r\n    call.setFunction(fun);\r\n    this._tokenizer.consume(); // \r\n    while (!this._tokenizer.current().isOperator(end_bracket) && !this._tokenizer.current().isEnd()) {\r\n      if (call.paraCount() !== 0) {\r\n        this.expectTrigger(ExpressionType.OPERATOR, ',');\r\n      }\r\n      call.addPara(this.buildExpression());\r\n    }\r\n    this.expectTrigger(ExpressionType.OPERATOR, end_bracket);\r\n    call.evaluate();\r\n    if (call.paraCount() > fun.parameterNumber() && fun.parameterNumber() >= 0) {\r\n      this._tokenizer.addError(funcToken, `${funcToken.getContents()}Max${fun.parameterNumber()}${call.paraCount()}`);\r\n      return ConstantExpression.Empty();\r\n    }\r\n    return call;\r\n  }\r\n\r\n  private static expectTrigger(type: ExpressionType, trigger: string): void {\r\n    if (this._tokenizer.current().matches(type, trigger)) {\r\n      this._tokenizer.consume();\r\n    } else {\r\n      this._tokenizer.addError(this._tokenizer.current(), `${trigger}${this._tokenizer.current().getTrigger()}`);\r\n    }\r\n  }\r\n\r\n  public static getProjectCollector(): ParseError[] {\r\n    return this._tokenizer.getProblemCollector();\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\n\r\nVE_ExpressionParsing.init();","import { Dictionary } from \"../utility/dictionary\";\r\nimport { IVeryVar } from \"../variables\";\r\nimport { VE_Template } from \"../template\";\r\n\r\nexport interface IExpression {\r\n  expType: string;\r\n  className: string;\r\n  evaluate(): any;\r\n  clone(): IExpression;\r\n}\r\n\r\nexport class TrueExpression implements IExpression {\r\n  public get expType(): string {\r\n    return 'bool';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'TrueExpression';\r\n  }\r\n\r\n  public get value(): boolean {\r\n    return true;\r\n  }\r\n\r\n  constructor() {\r\n  }\r\n\r\n  public evaluate(): any {\r\n    return true;\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let exp: TrueExpression = new TrueExpression();\r\n    return exp;\r\n  }\r\n\r\n  public toString(): string {\r\n    return 'true';\r\n  }\r\n}\r\n\r\nexport class ConstantExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    return this._expType;\r\n  }\r\n  private _expType: string = 'string';\r\n\r\n  public get className(): string {\r\n    return 'ConstantExpression';\r\n  }\r\n\r\n  private _value: any;\r\n\r\n  constructor(value: any, type: string) {\r\n    this._value = value;\r\n    this._expType = type;\r\n  }\r\n\r\n  public evaluate(): any {\r\n    return this._value;\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let expClone: ConstantExpression = new ConstantExpression(this._value, this._expType);\r\n    return expClone;\r\n  }\r\n\r\n  public static Empty(): ConstantExpression {\r\n    return new ConstantExpression(null, 'string');\r\n  }\r\n\r\n  public isEmpty(): boolean {\r\n    if (this._expType === 'string' && this._value === null) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public toString(): string {\r\n    if (this._value !== null) {\r\n      return this._value.toString();\r\n    } else {\r\n      return 'null';\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport enum BinaryOperator {\r\n  Add = '+', Subtract = '-', Multiply = '*', Divide = '/', Modulo = '%', Power = '^', LT = '<', LT_EQ = '<=', EQ = '=', GT_EQ = '>=', GT = '>', NEQ = '!=', And = '&&', Or = '||', Not = '!'\r\n}\r\n\r\nexport class BinaryExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    return this._expType;\r\n  }\r\n  private _expType = '';\r\n\r\n  public get className(): string {\r\n    return 'BinaryExpression';\r\n  }\r\n\r\n  public isRight: boolean = true;\r\n\r\n  private _op: BinaryOperator = BinaryOperator.EQ;\r\n\r\n  private _left: IExpression;\r\n  private _right: IExpression;\r\n  private _isSealed: boolean = false;\r\n\r\n  private static _opDic: { [key: string]: BinaryOperator } = {};\r\n\r\n  private static _priority: Dictionary<BinaryOperator, number> = new Dictionary<BinaryOperator, number>();\r\n\r\n  // private static _priorityKey: BinaryOperator[] = [BinaryOperator.Not, BinaryOperator.Power, BinaryOperator.Multiply, BinaryOperator.Divide, BinaryOperator.Modulo, BinaryOperator.Add, BinaryOperator.Subtract, BinaryOperator.LT, BinaryOperator.LT_EQ, BinaryOperator.EQ, BinaryOperator.GT_EQ, BinaryOperator.GT, BinaryOperator.NEQ, BinaryOperator.And, BinaryOperator.Or];\r\n\r\n  // private static _priorityValue: number[] = [2, 3, 4, 4, 4, 5, 5, 6, 6, 6, 6, 6, 6, 7, 7];\r\n\r\n  public static init(): void {\r\n    this._opDic[\"+\"] = BinaryOperator.Add;\r\n    this._opDic[\"-\"] = BinaryOperator.Subtract;\r\n    this._opDic[\"*\"] = BinaryOperator.Multiply;\r\n    this._opDic[\"/\"] = BinaryOperator.Divide;\r\n    this._opDic[\"%\"] = BinaryOperator.Modulo;\r\n    this._opDic[\"**\"] = BinaryOperator.Power;\r\n    this._opDic[\"^\"] = BinaryOperator.Power;\r\n    this._opDic[\"<\"] = BinaryOperator.LT;\r\n    this._opDic[\"<=\"] = BinaryOperator.LT_EQ;\r\n    this._opDic[\"==\"] = BinaryOperator.EQ;\r\n    this._opDic[\">=\"] = BinaryOperator.GT_EQ;\r\n    this._opDic[\">\"] = BinaryOperator.GT;\r\n    this._opDic[\"!=\"] = BinaryOperator.NEQ;\r\n    this._opDic[\"&&\"] = BinaryOperator.And;\r\n    this._opDic[\"||\"] = BinaryOperator.Or;\r\n    this._opDic[\"!\"] = BinaryOperator.Not;\r\n    this._opDic[\"\"] = BinaryOperator.Not;\r\n\r\n    this._priority.Add(BinaryOperator.Not, 2);\r\n    this._priority.Add(BinaryOperator.Power, 3);\r\n    this._priority.Add(BinaryOperator.Multiply, 4); this._priority.Add(BinaryOperator.Divide, 4); this._priority.Add(BinaryOperator.Modulo, 4);\r\n    this._priority.Add(BinaryOperator.Add, 5); this._priority.Add(BinaryOperator.Subtract, 5);\r\n    this._priority.Add(BinaryOperator.LT, 6); this._priority.Add(BinaryOperator.LT_EQ, 6); this._priority.Add(BinaryOperator.EQ, 6); this._priority.Add(BinaryOperator.GT_EQ, 6); this._priority.Add(BinaryOperator.GT, 6); this._priority.Add(BinaryOperator.NEQ, 6);\r\n    this._priority.Add(BinaryOperator.And, 7); this._priority.Add(BinaryOperator.Or, 7);\r\n  }\r\n\r\n  constructor(left_exp: IExpression, right_exp: IExpression, op: BinaryOperator) {\r\n    this._left = left_exp;\r\n    this._right = right_exp;\r\n    this._op = op;\r\n    // console.log(this._left);\r\n    // console.log(this._right);\r\n    this._expType = this.resultAutoType(left_exp, right_exp, op);\r\n    if (this._expType === 'null') {\r\n      // TODO\r\n      this.isRight = false;\r\n      console.log(\"\" + left_exp.expType + \"\" + right_exp.expType + \"\" + op.toString());\r\n    }\r\n  }\r\n\r\n  private resultAutoType(left: IExpression, right: IExpression, op: BinaryOperator): string {\r\n    if (op === BinaryOperator.Add) {\r\n      if (left.expType === 'string' || right.expType === 'string') {\r\n        return 'string';\r\n      }\r\n      else if (left.expType === 'bool' || right.expType === 'bool') {\r\n        return 'null';\r\n      }\r\n      else if (left.expType === 'number' || right.expType === 'number') {\r\n        return 'number';\r\n      }\r\n      else if (left.expType === 'vector3' || right.expType === 'vector3') {\r\n        return 'vector3';\r\n      }\r\n      else if (left.expType === 'vector2' || right.expType === 'vector2') {\r\n        return 'vector2';\r\n      }\r\n      else {\r\n        return 'null';\r\n      }\r\n    } else if (op === BinaryOperator.Divide || op === BinaryOperator.Multiply || op === BinaryOperator.Modulo || op === BinaryOperator.Power || op === BinaryOperator.Subtract) {\r\n      if (left.expType === 'string' || right.expType === 'string' || left.expType === 'bool' || left.expType === 'bool') {\r\n        return 'null';\r\n      }\r\n      else if (left.expType === 'vector3' && right.expType === 'vector3' && op === BinaryOperator.Subtract) {\r\n        return 'vector3';\r\n      }\r\n      else if (left.expType === 'vector2' && right.expType === 'vector2' && op === BinaryOperator.Subtract) {\r\n        return 'vector2';\r\n      }\r\n      else if ((left.expType === 'number' && right.expType === 'vector3' && op === BinaryOperator.Multiply) || (left.expType === 'vector3' && right.expType === 'number' && op == BinaryOperator.Multiply)) {\r\n        return 'vector3';\r\n      }\r\n      else if ((left.expType === 'number' && right.expType === 'vector2' && op === BinaryOperator.Multiply) || (left.expType === 'vector2' && right.expType === 'number' && op == BinaryOperator.Multiply)) {\r\n        return 'vector2';\r\n      }\r\n      else if (left.expType === 'vector3' && right.expType === 'number' && op === BinaryOperator.Divide) {\r\n        return 'vector3';\r\n      }\r\n      else if (left.expType === 'vector2' && right.expType === 'number' && op === BinaryOperator.Divide) {\r\n        return 'vector2';\r\n      }\r\n      else if (left.expType === 'number' || right.expType === 'number') {\r\n        return 'number';\r\n      }\r\n      else {\r\n        return 'null';\r\n      }\r\n    } else if (op === BinaryOperator.LT || op === BinaryOperator.LT_EQ || op === BinaryOperator.GT_EQ || op === BinaryOperator.GT) {\r\n      if (left.expType === 'string' || right.expType === 'string' || left.expType === 'bool' || right.expType === 'bool') {\r\n        return 'null';\r\n      } else {\r\n        return 'bool';\r\n      }\r\n    } else if (op === BinaryOperator.NEQ || op === BinaryOperator.EQ) {\r\n      if (right.expType !== left.expType) {\r\n        return 'null';\r\n      } else {\r\n        return 'bool';\r\n      }\r\n    } else if (op === BinaryOperator.Not) {\r\n      if (right.expType !== 'bool') {\r\n        return 'null';\r\n      } else {\r\n        return 'bool';\r\n      }\r\n    } else {\r\n      return 'string';\r\n    }\r\n  }\r\n\r\n  public setLeftExp(left_exp: IExpression): void {\r\n    this._left = left_exp;\r\n  }\r\n\r\n  public setRightExp(right_exp: IExpression): void {\r\n    this._right = right_exp;\r\n  }\r\n\r\n  public getOp(): BinaryOperator {\r\n    return this._op;\r\n  }\r\n\r\n  public getLeftExp(): IExpression {\r\n    return this._left;\r\n  }\r\n\r\n  public getRightExp(): IExpression {\r\n    return this._right;\r\n  }\r\n\r\n  public isSealed(): boolean {\r\n    return this._isSealed;\r\n  }\r\n\r\n  public setSeal(): void {\r\n    this._isSealed = true;\r\n  }\r\n\r\n  public toString(): string {\r\n    return \"(\" + this._left.toString() + \" \" + this._op.toString() + \" \" + this._right.toString() + \")\";\r\n    // return this._left.toString() + this._op.toString() + this._right.toString();\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let expClone: BinaryExpression = new BinaryExpression(this._left.clone(), this._right.clone(), this._op);\r\n    return expClone;\r\n  }\r\n\r\n  public evaluate(): any {\r\n    if (this._expType === 'null') {\r\n      return null;\r\n    }\r\n    if (this._left.className === 'FunctionExpression') {\r\n      this._left.evaluate();\r\n    }\r\n    if (this._right.className === 'FunctionExpression') {\r\n      this._right.evaluate();\r\n    }\r\n    this._expType = this.resultAutoType(this._left, this._right, this._op);\r\n    let leftValue: any = this._left.evaluate();\r\n    let rightValue: any = this._right.evaluate();\r\n    if (leftValue === null || rightValue === null) {\r\n      return null;\r\n    }\r\n    if (this._op === BinaryOperator.Add) {\r\n      if (this._expType === 'string') {\r\n        return leftValue.toString() + rightValue.toString();\r\n      } else if (this._expType === 'number') {\r\n        return leftValue + rightValue;\r\n      } else if (this._expType === 'vector3') {\r\n        return (<BABYLON.Vector3>leftValue).add((<BABYLON.Vector3>rightValue));\r\n      } else if (this._expType === 'vector2') {\r\n        return (<BABYLON.Vector2>leftValue).add((<BABYLON.Vector2>rightValue));\r\n      } else {\r\n        return null;\r\n      }\r\n    } else if (this._op === BinaryOperator.Subtract) {\r\n      if (this._expType === 'number') {\r\n        return leftValue - rightValue;\r\n      } else if (this._expType === 'vector3') {\r\n        return (<BABYLON.Vector3>leftValue).subtract((<BABYLON.Vector3>rightValue));\r\n      } else if (this._expType === 'vector2') {\r\n        return (<BABYLON.Vector2>leftValue).subtract((<BABYLON.Vector2>rightValue));\r\n      } else {\r\n        return null;\r\n      }\r\n    } else if (this._op === BinaryOperator.Multiply) {\r\n      if (this._expType === 'number') {\r\n        return leftValue * rightValue;\r\n      } else if (this._expType === 'vector3') {\r\n        if (typeof (leftValue) === 'number') {\r\n          return (<BABYLON.Vector3>rightValue).multiplyByFloats(leftValue, leftValue, leftValue);\r\n        } else if (typeof (rightValue) === 'number') {\r\n          return (<BABYLON.Vector3>leftValue).multiplyByFloats(rightValue, rightValue, rightValue);\r\n        } else {\r\n          return null;\r\n        }\r\n      } else if (this._expType === 'vector2') {\r\n        if (typeof (leftValue) === 'number') {\r\n          return (<BABYLON.Vector2>rightValue).multiplyByFloats(leftValue, leftValue);\r\n        } else if (typeof (rightValue) === 'number') {\r\n          return (<BABYLON.Vector2>leftValue).multiplyByFloats(rightValue, rightValue);\r\n        } else {\r\n          return null;\r\n        }\r\n      }\r\n    } else if (this._op === BinaryOperator.Divide) {\r\n      if (this._expType === 'number') {\r\n        return leftValue / rightValue;\r\n      } else if (this._expType === 'vector3') {\r\n        if (typeof (rightValue) === 'number') {\r\n          return new BABYLON.Vector3((<BABYLON.Vector3>leftValue).x / rightValue, (<BABYLON.Vector3>leftValue).y / rightValue, (<BABYLON.Vector3>leftValue).z / rightValue);\r\n        } else {\r\n          return null;\r\n        }\r\n      } else if (this._expType === 'vector2') {\r\n        if (typeof (rightValue) === 'number') {\r\n          return new BABYLON.Vector2((<BABYLON.Vector2>leftValue).x / rightValue, (<BABYLON.Vector2>leftValue).y / rightValue);\r\n        } else {\r\n          return null;\r\n        }\r\n      }\r\n    } else if (this._op === BinaryOperator.Modulo) {\r\n      if (typeof (leftValue) === 'number' && typeof (rightValue) === 'number') {\r\n        return leftValue % rightValue;\r\n      } else {\r\n        return null;\r\n      }\r\n    } else if (this._op === BinaryOperator.Power) {\r\n      if (typeof (leftValue) === 'number' && typeof (rightValue) === 'number') {\r\n        return Math.pow(leftValue, rightValue);\r\n      } else {\r\n        return null;\r\n      }\r\n    } else if (this._op === BinaryOperator.And) {\r\n      let l: boolean = this.getBoolean(leftValue);\r\n      let r: boolean = this.getBoolean(rightValue);\r\n      return l && r;\r\n    } else if (this._op === BinaryOperator.Or) {\r\n      let l: boolean = this.getBoolean(leftValue);\r\n      let r: boolean = this.getBoolean(rightValue);\r\n      return l || r;\r\n    } else if (this._op === BinaryOperator.LT) {\r\n      return leftValue < rightValue;\r\n    } else if (this._op === BinaryOperator.LT_EQ) {\r\n      return leftValue <= rightValue;\r\n    } else if (this._op === BinaryOperator.GT_EQ) {\r\n      return leftValue >= rightValue;\r\n    } else if (this._op === BinaryOperator.GT) {\r\n      return leftValue > rightValue;\r\n    } else if (this._op === BinaryOperator.EQ) {\r\n      return leftValue === rightValue;\r\n    } else if (this._op === BinaryOperator.NEQ) {\r\n      return leftValue !== rightValue;\r\n    } else if (this._op === BinaryOperator.Not) {\r\n      return !this.getBoolean(rightValue);\r\n    } else {\r\n      return !this.getBoolean(leftValue);\r\n    }\r\n  }\r\n\r\n  private getBoolean(value: any): boolean {\r\n    if (typeof (value) === 'number') {\r\n      if (value === 0) {\r\n        return false;\r\n      } else {\r\n        return true;\r\n      }\r\n    } else if (typeof (value) === 'string') {\r\n      if (value === '') {\r\n        return false;\r\n      } else {\r\n        return true;\r\n      }\r\n    } else if (typeof (value) === 'boolean') {\r\n      return value;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getPriority(): number {\r\n    // let p: number = BinaryExpression._priorityKey.indexOf(this._op);\r\n    // if(p > -1) {\r\n    //   return BinaryExpression._priorityValue[p];\r\n    // } else {\r\n    //   return 100;\r\n    // }\r\n    let p: number | null = BinaryExpression._priority.GetValue(this._op);\r\n    if (p === null) {\r\n      return 100;\r\n    } else {\r\n      return p;\r\n    }\r\n  }\r\n\r\n  public getPriorityOp(op: BinaryOperator): number {\r\n    // let p: number = BinaryExpression._priorityKey.indexOf(op);\r\n    // if(p > -1) {\r\n    //   return BinaryExpression._priorityValue[p];\r\n    // } else {\r\n    //   return 100;\r\n    // }\r\n    let p: number | null = BinaryExpression._priority.GetValue(op);\r\n    if (p === null) {\r\n      return 100;\r\n    } else {\r\n      return p;\r\n    }\r\n  }\r\n}\r\n\r\nexport class VeryVarExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    if (this._value) {\r\n      return this._value.varType;\r\n    } else {\r\n      return 'null';\r\n    }\r\n  }\r\n\r\n  private _value: IVeryVar;\r\n\r\n  public get className(): string {\r\n    return 'VeryVarExpression';\r\n  }\r\n\r\n  public get value(): IVeryVar {\r\n    return this._value;\r\n  }\r\n\r\n  constructor(value: IVeryVar) {\r\n    this._value = value;\r\n  }\r\n\r\n  public evaluate(): any {\r\n    return this._value.getValue();\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let expClone: VeryVarExpression = new VeryVarExpression(this._value.clone());\r\n    return expClone;\r\n  }\r\n\r\n  public toString(): string {\r\n    if (this._value) {\r\n      return this._value.toString();\r\n    } else {\r\n      return 'null';\r\n    }\r\n  }\r\n}\r\n\r\nexport class VeryTemplateExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    return 'bool';\r\n  }\r\n\r\n  private _isTemplate: boolean = false;\r\n  private _template: VE_Template;\r\n\r\n  public get className(): string {\r\n    return 'VeryTemplateExpression';\r\n  }\r\n\r\n  // public get value(): IVeryVar {\r\n  //   return this._value;\r\n  // }\r\n\r\n  // TODO \r\n  constructor() {\r\n    this._template = new VE_Template('', '');\r\n  }\r\n\r\n  public setTemplate(template: VE_Template): void {\r\n    this._isTemplate = true;\r\n    this._template = template;\r\n  }\r\n\r\n  public evaluate(): any {\r\n    if (this._isTemplate) {\r\n      if (!this._template) {\r\n        return false;\r\n      }\r\n      else {\r\n        return this._template.templateInstance !== null;\r\n      }\r\n    }\r\n    else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let varExp: VeryTemplateExpression = new VeryTemplateExpression();\r\n    varExp._template = this._template;\r\n    varExp._isTemplate = this._isTemplate;\r\n    return varExp;\r\n  }\r\n\r\n  public toString(): string {\r\n    if (this._isTemplate) {\r\n      if (!this._template) {\r\n        return \"false\";\r\n      }\r\n      else {\r\n        return (this._template.templateInstance === null).toString();\r\n      }\r\n    }\r\n    else {\r\n      return \"false\";\r\n    }\r\n  }\r\n}\r\n\r\n\r\nBinaryExpression.init();","import { ParseError } from \"./positions\";\r\n\r\nexport abstract class ForwardQuery<T> {\r\n\r\n  protected itemBuffer: Array<T> = [];\r\n\r\n  protected endReached: boolean = false;\r\n\r\n  protected problemCollector: Array<ParseError> = [];\r\n\r\n  protected endOfInputIndicator: T | undefined = undefined;\r\n\r\n  public next(): T {\r\n    return this.nextOffset(1);\r\n  }\r\n\r\n  public nextOffset(offset: number): T {\r\n    while (this.itemBuffer.length <= offset && !this.endReached) {\r\n      let item: T | undefined = this.fetch();\r\n      if (item !== undefined) {\r\n        this.itemBuffer.push(item);\r\n      } else {\r\n        this.endReached = true;\r\n      }\r\n    }\r\n    if (offset >= this.itemBuffer.length) {\r\n      if (this.endOfInputIndicator === undefined) {\r\n        this.endOfInputIndicator = this.endOfInput();\r\n      }\r\n      return this.endOfInputIndicator;\r\n    } else {\r\n      return this.itemBuffer[offset];\r\n    }\r\n  }\r\n\r\n  public current(): T {\r\n    return this.nextOffset(0);\r\n  }\r\n\r\n  protected abstract endOfInput(): T;\r\n\r\n  protected abstract fetch(): T | undefined;\r\n\r\n  public consume(): T {\r\n    let result: T = this.current();\r\n    this.consumeNext(1);\r\n    return result;\r\n  }\r\n\r\n  public consumeNext(numberOfItems: number): void {\r\n    if (numberOfItems < 0) {\r\n      return;\r\n    }\r\n    while (numberOfItems-- > 0) {\r\n      if (this.itemBuffer.length !== 0) {\r\n        this.itemBuffer.shift();\r\n      } else {\r\n        if (this.endReached) {\r\n          return;\r\n        } else {\r\n          let item: T | undefined = this.fetch();\r\n          if (item === undefined) {\r\n            this.endReached = true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public getProblemCollector(): Array<ParseError> {\r\n    return this.problemCollector;\r\n  }\r\n\r\n  public setProblemCollector(problemCollector: Array<ParseError>): void {\r\n    this.problemCollector = problemCollector;\r\n  }\r\n\r\n\r\n}","import { IExpression } from \"./expressions\";\r\nimport { IFunction } from \"./functions\";\r\n\r\nexport class FunctionExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    return this._function.expType;\r\n  }\r\n\r\n  public get className(): string {\r\n    return this._function.className;\r\n  }\r\n\r\n  private _function!: IFunction;\r\n  private _paras: IExpression[] = [];\r\n\r\n  public setFunction(func: IFunction): void {\r\n    this._function = func;\r\n  }\r\n\r\n  public addPara(exp: IExpression): void {\r\n    this._paras.push(exp);\r\n  }\r\n\r\n  public paraCount(): number {\r\n    return this._paras.length;\r\n  }\r\n\r\n  public evaluate(): any {\r\n    let r: any = null;\r\n    try {\r\n      r = this._function.evaluate(this._paras);\r\n    } catch (e) {\r\n      console.log('' + e);\r\n      return null;\r\n    }\r\n    return r;\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let expClone: FunctionExpression = new FunctionExpression();\r\n    expClone._function = this._function;\r\n    for (let i: number = 0; i < this._paras.length; i++) {\r\n      expClone._paras.push(this._paras[i].clone());\r\n    }\r\n    return expClone;\r\n  }\r\n\r\n  public toString(): string {\r\n    let printStr: string = this._function.className + '(';\r\n    for(let i: number = 0; i < this._paras.length; i++) {\r\n      if(i > 0) {\r\n        printStr += ',' + this._paras[i].toString();\r\n      } else {\r\n        printStr += this._paras[i].toString();\r\n      }\r\n    }\r\n    return printStr + ')';\r\n  }\r\n\r\n}","import { IExpression } from \"./expressions\";\r\nimport { ShowError } from \"../html\";\r\n\r\nexport interface IFunction {\r\n  expType: string;\r\n  className: string;\r\n  parameterNumber(): number;\r\n  evaluate(args: Array<IExpression>): any;\r\n}\r\n\r\nexport class Pow implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'pow';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 2;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.pow(args[0].evaluate(), args[1].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Pow1${args[0].expType}1${args[0].evaluate()}2${args[1].expType}2${args[1].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Ln implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'ln';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.log(args[0].evaluate());\r\n    if (value === NaN || value === Infinity) {\r\n      ShowError.showError(`Ln${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Lg implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'lg';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.log10(args[0].evaluate());\r\n    if (value === NaN || value === Infinity) {\r\n      ShowError.showError(`Lg${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Sqrt implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'sqrt';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.sqrt(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Sqrt${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Abs implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'abs';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.abs(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Abs${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Random implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'random';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 2;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let start: number = args[0].evaluate();\r\n    let distance: number = args[1].evaluate() - args[0].evaluate();\r\n    let value: number = Math.random() * distance + start;\r\n    if (value === NaN) {\r\n      ShowError.showError(`Random1${args[0].expType}1${args[0].evaluate()}2${args[1].expType}2${args[1].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Round implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'round';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.round(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Round${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Sin implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'sin';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.sin(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Sin${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class ASin implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'asin';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.asin(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`ASin${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Cos implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'cos';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.cos(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Cos${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class ACos implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'acos';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.acos(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`ACos${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Tan implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'tan';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.tan(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Tan${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class ATan implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'atan';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.atan(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`ATan${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\n\r\nexport class CustomFunctions {\r\n  private static _functions: {[key:string]: IFunction} = {};\r\n\r\n  public static hasFunction(func_name: string): boolean {\r\n    func_name = func_name.toLowerCase();\r\n    if(this._functions[func_name]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static addFunction(func: IFunction): void {\r\n    let funcName: string = func.className.toLowerCase();\r\n    if(this._functions[funcName]) {\r\n      ShowError.showError(`IDID${funcName}ID`);\r\n    } else {\r\n      this._functions[funcName] = func;\r\n    }\r\n  }\r\n\r\n  public static createFunction(func_name: string): IFunction {\r\n    func_name = func_name.toLowerCase();\r\n    return Object.create(this._functions[func_name]);\r\n  }\r\n\r\n  public static remove(func_name: string): void {\r\n    func_name = func_name.toLowerCase();\r\n    delete this._functions[func_name];\r\n  }\r\n}\r\n\r\n\r\nCustomFunctions.addFunction(new Pow());\r\nCustomFunctions.addFunction(new Ln());\r\nCustomFunctions.addFunction(new Lg());\r\nCustomFunctions.addFunction(new Sqrt());\r\nCustomFunctions.addFunction(new Abs());\r\nCustomFunctions.addFunction(new Random());\r\nCustomFunctions.addFunction(new Round());\r\nCustomFunctions.addFunction(new Sin());\r\nCustomFunctions.addFunction(new ASin());\r\nCustomFunctions.addFunction(new Cos());\r\nCustomFunctions.addFunction(new ACos());\r\nCustomFunctions.addFunction(new Tan());\r\nCustomFunctions.addFunction(new ATan());\r\n\r\n","export * from './expressionEnum';\r\nexport * from './expressions';\r\nexport * from './functions';\r\nexport * from './positions';\r\nexport * from './expChar';\r\nexport * from './token';\r\nexport * from './forwardQuery';\r\nexport * from './tokenizer';\r\nexport * from './tokenReader';\r\nexport * from './variable';\r\nexport * from './variableExpression';\r\nexport * from './scope';\r\nexport * from './functionExpression';\r\nexport * from './expressionParsing';\r\nexport * from './expManager';\r\nexport * from './veryExpressions';","export interface IPosition {\r\n  getLine(): number;\r\n  getPos(): number;\r\n}\r\n\r\n\r\nexport class NameLocation implements IPosition {\r\n\r\n  private _value: string = '';\r\n  private _line: number = 0;\r\n  private _pos: number = 0;\r\n\r\n\r\n  constructor(value: string) {\r\n    this._value = value;\r\n    this._line = 1;\r\n    this._pos = 1;\r\n  }\r\n\r\n\r\n  public getValue(): string {\r\n    return this._value;\r\n  }\r\n\r\n  public getLine(): number {\r\n    return this._line;\r\n  }  \r\n  \r\n  \r\n  public getPos(): number {\r\n    return this._pos;\r\n  }\r\n}\r\n\r\nexport enum SeverityExp{\r\n  Warning,\r\n  Error\r\n}\r\n\r\nexport class ParseError{\r\n\r\n  private _pos: IPosition;\r\n  private _message: string;\r\n  private _severity: SeverityExp;\r\n\r\n  constructor(pos: IPosition, msg: string, severity: SeverityExp) {\r\n    this._pos = pos;\r\n    this._message = msg;\r\n    this._severity = severity;\r\n  }\r\n\r\n  public static Warning(pos: IPosition, msg: string): ParseError {\r\n    let message: string = msg;\r\n    if(pos.getLine() > 0) {\r\n      message = `>>>${pos.getLine()}${pos.getPos()}${msg}`;\r\n    }\r\n    return new ParseError(pos, message, SeverityExp.Warning);\r\n  }\r\n\r\n  public static Error(pos: IPosition, msg: string): ParseError {\r\n    let message: string = msg;\r\n    if(pos.getLine() > 0) {\r\n      message = `>>>${pos.getLine()}${pos.getPos()}${msg}`;\r\n    }\r\n    return new ParseError(pos, message, SeverityExp.Error);\r\n  }\r\n\r\n  public getPosition(): IPosition {\r\n    return this._pos;\r\n  }\r\n\r\n  public getMessage(): string {\r\n    return this._message;\r\n  }\r\n\r\n  public getSeverity(): SeverityExp {\r\n    return this._severity;\r\n  }\r\n\r\n  public toString(): string {\r\n    return `${this._severity.toString()}${this._message}`;\r\n  }\r\n\r\n}","import { Variable } from \"./variable\";\r\n\r\nexport class Scope {\r\n\r\n  private _parent: Scope | undefined = undefined;\r\n\r\n  private _context: { [key: string]: Variable } = {};\r\n\r\n  private static _root: Scope;\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public static Create(): Scope {\r\n    let result: Scope = new Scope();\r\n    result._parent = Scope.GetRootScope();\r\n    return result;\r\n  }\r\n\r\n  public static GetRootScope(): Scope {\r\n    if (Scope._root === undefined) {\r\n      Scope._root = new Scope();\r\n      Scope._root.setVariable(\"PI\", 'number', Math.PI).makeConstant(Math.PI);\r\n      Scope._root.setVariable(\"EULER\", 'number', Math.E).makeConstant(Math.E);\r\n    }\r\n    return Scope._root;\r\n  }\r\n\r\n  public static CreateWithParent(parent: Scope): Scope {\r\n    let result: Scope = Scope.Create();\r\n    result._parent = parent;\r\n    return result;\r\n  }\r\n\r\n  public find(name: string): Variable | null {\r\n    if (this._context[name]) {\r\n      return this._context[name];\r\n    }\r\n    if (this._parent !== undefined) {\r\n      return this._parent.find(name);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  public setVariable(name: string, type: string, value: any): Variable {\r\n    let result: Variable | null = this.find(name);\r\n    if (result !== null) {\r\n      result.setType(type);\r\n      result.setValue(value);\r\n      return result;\r\n    }\r\n    return this.createVariable(name, type, value);\r\n  }\r\n\r\n  public createVariable(name: string, type: string, value: any): Variable {\r\n    if (this._context[name]) {\r\n      this._context[name].setType(type);\r\n      this._context[name].setValue(value);\r\n      return this._context[name];\r\n    }\r\n    let result: Variable = new Variable(name, type, value);\r\n    this._context[name] = result;\r\n    return result;\r\n  }\r\n\r\n\r\n  public setValue(name: string, value: any): void {\r\n    if (this._context[name]) {\r\n      this._context[name].setValue(value);\r\n    }\r\n  }\r\n\r\n  public isCreated(name: string): boolean {\r\n    if (this._context[name]) {\r\n      return true;\r\n    }\r\n    if (this._parent !== undefined) {\r\n      if (this._parent.find(name) !== null) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public clear(): void {\r\n    this._context = {};\r\n  }\r\n\r\n}","import { IPosition } from \"./positions\";\r\nimport { ExpressionType } from \"./expressionEnum\";\r\nimport { ExpChar } from \"./expChar\";\r\n\r\nexport class Token implements IPosition {\r\n\r\n  public type: ExpressionType = ExpressionType.STRING;\r\n\r\n  private _source: string = '';\r\n  private _contents: string = '';\r\n  private _trigger: string = '';\r\n\r\n  private _line: number = 0;\r\n  private _pos: number = 0;\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public static Create(type: ExpressionType, pos: IPosition): Token {\r\n    let result: Token = new Token();\r\n    result.type = type;\r\n    result._line = pos.getLine();\r\n    result._pos = pos.getPos();\r\n    return result;\r\n  }\r\n\r\n  public static CreateAndFill(type: ExpressionType, ch: ExpChar): Token {\r\n    let result: Token = new Token();\r\n    result.type = type;\r\n    result._line = ch.getLine();\r\n    result._pos = ch.getPos();\r\n    result._contents = ch.getValue();\r\n    result._trigger = ch.getValue();\r\n    result._source = ch.toString();\r\n    return result;\r\n  }\r\n\r\n  public addToTrigger(ch: ExpChar): Token {\r\n    this._trigger += ch.getValue();\r\n    this._source += ch.getValue();\r\n    return this;\r\n  }\r\n\r\n  public addToSource(ch: ExpChar): Token {\r\n    this._source += ch.getValue();\r\n    return this;\r\n  }\r\n\r\n  public addToContentChar(ch: ExpChar): Token {\r\n    this.addToContent(ch.getValue());\r\n    return this;\r\n  }\r\n\r\n  public addToContent(ch: string): Token {\r\n    this._contents += ch;\r\n    this._source += ch;\r\n    return this;\r\n  }\r\n\r\n  public getTrigger(): string {\r\n    return this._trigger;\r\n  }\r\n\r\n  public getTokenType(): ExpressionType {\r\n    return this.type;\r\n  }\r\n\r\n  public getContents(): string {\r\n    return this._contents;\r\n  }\r\n\r\n  public getSource(): string {\r\n    return this._source;\r\n  }\r\n\r\n  public getLine(): number {\r\n    return this._line;\r\n  }\r\n\r\n  public getPos(): number {\r\n    return this._pos;\r\n  }\r\n\r\n  public setTokenType(new_type: ExpressionType): void {\r\n    this.type = new_type;\r\n  }\r\n\r\n  public setTrigger(trigger: string): void {\r\n    this._trigger = trigger;\r\n  }\r\n\r\n  public setContent(content: string): void {\r\n    this._contents = content;\r\n  }\r\n\r\n  public setSource(source: string): void {\r\n    this._source = source;\r\n  }\r\n\r\n  public isEnd(): boolean {\r\n    return this.type === ExpressionType.EOI;\r\n  }\r\n\r\n  public is(type: ExpressionType): boolean {\r\n    return this.type === type;\r\n  }\r\n\r\n  public matches(type: ExpressionType, trigger: string): boolean {\r\n    if (!this.is(type)) {\r\n      return false;\r\n    }\r\n    if (trigger === '') {\r\n      return false;\r\n    }\r\n    return this.getTrigger() === trigger;\r\n  }\r\n\r\n  public isOperator(symbols: string): boolean {\r\n    if (symbols.length === 0) {\r\n      return this.is(ExpressionType.OPERATOR);\r\n    }\r\n    for (let i: number = 0; i < symbols.length; i++) {\r\n      if (this.matches(ExpressionType.OPERATOR, symbols[i])) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public isStartBracket(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === '(' || this._trigger === '') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isEndBracket(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === ')' || this._trigger === '') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isStartSquareBracket(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === '[' || this._trigger === '') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isEndSquareBracket(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === ']' || this._trigger === '') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isStartBrace(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === '{') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isEndBrace(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === '}') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isKeyword(...keywords: string[]): boolean {\r\n    if (keywords.length === 0) {\r\n      return this.is(ExpressionType.KEYWORD);\r\n    }\r\n    for (let i: number = 0; i < keywords.length; i++) {\r\n      if (this.matches(ExpressionType.KEYWORD, keywords[i])) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public isIdentifier(...values: string[]): boolean {\r\n    if (values.length === 0) {\r\n      return this.is(ExpressionType.ID);\r\n    }\r\n    for (let i: number = 0; i < values.length; i++) {\r\n      if (this.matches(ExpressionType.ID, values[i])) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public isSpecialIdentifier(...triggers: string[]): boolean {\r\n    if (triggers.length === 0) {\r\n      return this.is(ExpressionType.SPECIAL_ID);\r\n    }\r\n    for (let i: number = 0; i < triggers.length; i++) {\r\n      if (this.matches(ExpressionType.SPECIAL_ID, triggers[i])) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public isSpecialIdentifierWithContent(trigger: string, ...contents: string[]): boolean {\r\n    if (!this.matches(ExpressionType.SPECIAL_ID, trigger)) {\r\n      return false;\r\n    }\r\n    if (contents.length === 0) {\r\n      return true;\r\n    }\r\n    for (let i: number = 0; i < contents.length; i++) {\r\n      if (this.getContents() === contents[i]) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public isNumber(): boolean {\r\n    return this.is(ExpressionType.NUMBER);\r\n  }\r\n\r\n  public isBool(): boolean {\r\n    return this.is(ExpressionType.BOOL);\r\n  }\r\n\r\n  public isString(): boolean {\r\n    return this.is(ExpressionType.STRING);\r\n  }\r\n\r\n  public isConstant(): boolean {\r\n    return this.isNumber() || this.isBool() || this.isString();\r\n  }\r\n\r\n  public toString(): string {\r\n    return this.getTokenType().toString() + ': ' + this.getContents() + ' (' + this._line + ': ' + this._pos + '), Trigger: ' + this.getTrigger();\r\n  }\r\n\r\n\r\n\r\n\r\n}","import { ForwardQuery } from \"./forwardQuery\";\r\nimport { ExpChar } from \"./expChar\";\r\n\r\nexport class TokenReader extends ForwardQuery<ExpChar> {\r\n\r\n  private _inputExp: string = '';\r\n  private _line: number = 1;\r\n  private _pos: number = 0;\r\n  private _count: number = 0;\r\n  private _operator: number = 0;\r\n\r\n  constructor(input_exp: string) {\r\n    super();\r\n    if (input_exp === '') {\r\n\r\n    }\r\n    this._inputExp = input_exp;\r\n    this._count = input_exp.length;\r\n    this._operator = 0;\r\n  }\r\n\r\n  protected endOfInput(): ExpChar {\r\n    return new ExpChar('\\0', this._line, this._pos);\r\n  }\r\n\r\n\r\n  protected fetch(): ExpChar | undefined {\r\n    if (this._operator <= this._count - 1) {\r\n      let readChar: string = this._inputExp[this._operator];\r\n      this._operator++;\r\n      if (readChar === '\\n') {\r\n        this._line++;\r\n        this._pos = 0;\r\n      }\r\n      this._pos++;\r\n      return new ExpChar(readChar, this._line, this._pos);\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  public toString(): string {\r\n    if (this.itemBuffer.length === 0) {\r\n      return this._line + ':' + this._pos + ': Buffer empty';\r\n    }\r\n    if (this.itemBuffer.length < 2) {\r\n      return this._line + ':' + this._pos + ': ' + this.current().toString();\r\n    }\r\n    return this._line + ':' + this._pos + ': ' + this.current().toString() + ', ' + this.next().toString();\r\n  }\r\n\r\n}","import { ForwardQuery } from \"./forwardQuery\";\r\nimport { Token } from \"./token\";\r\nimport { TokenReader } from \"./tokenReader\";\r\nimport { ExpressionType } from \"./expressionEnum\";\r\nimport { ParseError, IPosition } from \"./positions\";\r\nimport { ExpChar } from \"./expChar\";\r\n\r\nexport class Tokenizer extends ForwardQuery<Token> {\r\n\r\n  private _inputExp: TokenReader;\r\n\r\n  private _decimalSeparator: string = '.';\r\n  private _lineComment: string = '//';\r\n  private _blockCommentStart: string = '/*';\r\n  private _blockCommentEnd: string = '*/';\r\n  private _brackets: string[] = ['(', ')', '', '', '[', ']', '{', '}', '', ''];\r\n  private _treatSinglePipeAsBracket: boolean = true;\r\n  private _specialIdStarters: string[] = [];\r\n  private _specialIdTerminators: string[] = [];\r\n  private _keywords: { [key: string]: string } = {};\r\n  private _keywordsCaseSensitive: boolean = false;\r\n  private _stringDelimiters: { [key: string]: string } = {};\r\n  private _boolConstant: string[] = [];\r\n\r\n  constructor(input_exp: string) {\r\n    super();\r\n    this._inputExp = new TokenReader(input_exp);\r\n    this._stringDelimiters = {};\r\n    this._stringDelimiters['\\\"'] = '\\\\';\r\n    this._stringDelimiters['\\''] = '\\0';\r\n    this._boolConstant = [];\r\n    this._boolConstant.push('false');\r\n    this._boolConstant.push('true');\r\n    this._keywords = {};\r\n    this._keywords['this'] = 'this';\r\n    this._keywords['null'] = 'null';\r\n    this._keywords['none'] = 'none';\r\n    this._keywords['undefined'] = 'undefined';\r\n  }\r\n\r\n  public endOfInput(): Token {\r\n    return Token.CreateAndFill(ExpressionType.EOI, this._inputExp.current());\r\n  }\r\n\r\n  public fetch(): Token | undefined {\r\n    // \r\n    while (this._inputExp.current().isWhiteSpace()) {\r\n      this._inputExp.consume();\r\n    }\r\n\r\n    // \r\n    if (this._inputExp.current().isEndOfInput()) {\r\n      return undefined;\r\n    }\r\n\r\n    // \r\n    if (this.isAtStartOfLineComment(true)) {\r\n      this.skipToEndOfLine();\r\n      return this.fetch();\r\n    }\r\n\r\n    // \r\n    if (this.isAtStartOfBlockComment(true)) {\r\n      this.skipBlockComment();\r\n      return this.fetch();\r\n    }\r\n\r\n    // \r\n    if (this.isAtStartOfNumber()) {\r\n      return this.fetchNumber();\r\n    }\r\n\r\n    // \r\n    if (this.isAtStartOfIdentifier()) {\r\n      return this.fetchId();\r\n    }\r\n\r\n    // \r\n    if (this._stringDelimiters[this._inputExp.current().getValue()]) {\r\n      return this.fetchString();\r\n    }\r\n\r\n    //\r\n    if (this.isAtBracket(false)) {\r\n      return Token.CreateAndFill(ExpressionType.OPERATOR, this._inputExp.consume());\r\n    }\r\n\r\n    // ID$Test$\r\n    if (this.isAtStartOfSpecialId()) {\r\n      return this.fetchSpecialId();\r\n    }\r\n\r\n    // \r\n    if (this.isOperator(this._inputExp.current())) {\r\n      return this.fetchOperator();\r\n    }\r\n\r\n    //\r\n    this.problemCollector.push(ParseError.Error(this._inputExp.current(), \": \" + this._inputExp.current().getValue()));\r\n\r\n    this._inputExp.consume();\r\n    return this.fetch();\r\n  }\r\n\r\n  private fetchNumber(): Token {\r\n    let result: Token = Token.Create(ExpressionType.NUMBER, this._inputExp.current());\r\n    result.addToContentChar(this._inputExp.consume());\r\n    let hasDecimal: boolean = false;\r\n    while (this._inputExp.current().isDigit() || this._inputExp.current().is(this._decimalSeparator)) {\r\n      if (this._inputExp.current().is(this._decimalSeparator)) {\r\n        if (hasDecimal) {\r\n          this.problemCollector.push(ParseError.Error(this._inputExp.current(), \"\"));\r\n        }\r\n        hasDecimal = true;\r\n        result.addToContentChar(this._inputExp.consume());\r\n      } else {\r\n        result.addToContentChar(this._inputExp.consume());\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  private fetchId(): Token {\r\n    let result: Token = Token.Create(ExpressionType.ID, this._inputExp.current());\r\n    result.addToContentChar(this._inputExp.consume());\r\n    while (this.isIdentifierChar(this._inputExp.current())) {\r\n      result.addToContentChar(this._inputExp.consume());\r\n    }\r\n    //UnityEngine.Debug.LogWarning(result.GetContents());\r\n    if (!this._inputExp.current().isEndOfInput() && this._specialIdTerminators.indexOf(this._inputExp.current().getValue()) > -1) {\r\n      let specialId: Token = Token.Create(ExpressionType.SPECIAL_ID, result);\r\n      specialId.setTrigger(this._inputExp.current().getValue());\r\n      specialId.setContent(result.getContents());\r\n      specialId.setSource(result.getContents());\r\n      specialId.addToSource(this._inputExp.current());\r\n      this._inputExp.consume();\r\n      return this.handleKeywords(specialId);\r\n    }\r\n    return this.handleKeywords(result);\r\n  }\r\n\r\n  private fetchString(): Token {\r\n    //\r\n    let separator: string = this._inputExp.current().getValue();\r\n    //\r\n    //char escapeChar = _stringDelimiters[_inputExp.current().GetValue()];\r\n    let result: Token = Token.Create(ExpressionType.STRING, this._inputExp.current());\r\n    result.addToTrigger(this._inputExp.consume());\r\n    while (!this._inputExp.current().isNewLine() && !this._inputExp.current().is(separator) && !this._inputExp.current().isEndOfInput()) {\r\n      result.addToContentChar(this._inputExp.consume());\r\n    }\r\n    if (this._inputExp.current().is(separator)) {\r\n      result.addToSource(this._inputExp.consume());\r\n    }\r\n    else {\r\n      this.problemCollector.push(ParseError.Error(this._inputExp.current(), \"\"));\r\n    }\r\n    return result;\r\n  }\r\n\r\n  private isAtStartOfLineComment(consume: boolean): boolean {\r\n    if (this._lineComment !== '') {\r\n      return this.canConsumeThisString(this._lineComment, consume);\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  private canConsumeThisString(check_string: string, consume: boolean): boolean {\r\n    for (let i: number = 0; i < check_string.length; i++) {\r\n      //next//\r\n      if (!(this._inputExp.nextOffset(i).is(check_string[i]))) {\r\n        return false;\r\n      }\r\n    }\r\n    if (consume) {\r\n      this._inputExp.consumeNext(check_string.length);\r\n    }\r\n    return true;\r\n  }\r\n\r\n  private skipToEndOfLine(): void {\r\n    while (!this._inputExp.current().isEndOfInput() && !this._inputExp.current().isNewLine()) {\r\n      this._inputExp.consume();\r\n    }\r\n  }\r\n\r\n  private isAtStartOfBlockComment(consume: boolean): boolean {\r\n    return this.canConsumeThisString(this._blockCommentStart, consume);\r\n  }\r\n\r\n  private skipBlockComment(): void {\r\n    while (!this._inputExp.current().isEndOfInput()) {\r\n      if (this.isAtEndOfBlockComment()) {\r\n        return;\r\n      }\r\n      this._inputExp.consume();\r\n    }\r\n    this.problemCollector.push(ParseError.Error(this._inputExp.current(), ''));\r\n  }\r\n\r\n  private isAtEndOfBlockComment(): boolean {\r\n    return this.canConsumeThisString(this._blockCommentEnd, true);\r\n  }\r\n\r\n  private isAtStartOfNumber(): boolean {\r\n    if (this._inputExp.current().isDigit()) {\r\n      return true;\r\n    } else if (this._inputExp.current().is('.') && this._inputExp.next().isDigit()) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  private isAtStartOfIdentifier(): boolean {\r\n    return this._inputExp.current().isLetter() || this._inputExp.current().is('_') || this._inputExp.current().is('#');\r\n  }\r\n\r\n  private isIdentifierChar(current: ExpChar): boolean {\r\n    return current.isDigit() || current.isLetter() || current.is('_') || current.is('.') || current.is('#') || current.is(':') || current.is('');\r\n  }\r\n\r\n  private isAtBracket(in_symbol: boolean): boolean {\r\n    let r: boolean = true;\r\n    for (let i: number = 0; i < this._brackets.length; i++) {\r\n      if (!this._inputExp.current().is(this._brackets[i])) {\r\n        r = false;\r\n      }\r\n    }\r\n    if (r) {\r\n      return true;\r\n    }\r\n    if (!in_symbol && this._treatSinglePipeAsBracket && this._inputExp.current().is('|') && this._inputExp.next().is('|')) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private isAtStartOfSpecialId(): boolean {\r\n    return this._specialIdStarters.indexOf(this._inputExp.current().getValue()) > -1;\r\n  }\r\n\r\n  private fetchSpecialId(): Token {\r\n    let result: Token = Token.Create(ExpressionType.SPECIAL_ID, this._inputExp.current());\r\n    result.addToTrigger(this._inputExp.consume());\r\n    while (this.isIdentifierChar(this._inputExp.current())) {\r\n      result.addToContentChar(this._inputExp.consume());\r\n    }\r\n    return this.handleKeywords(result);\r\n  }\r\n\r\n  private handleKeywords(id_token: Token): Token {\r\n    let keyword: string = \"\";\r\n    if (this._keywordsCaseSensitive) {\r\n      if (this._keywords[id_token.getContents()]) {\r\n        keyword = this._keywords[id_token.getContents()];\r\n      }\r\n    } else {\r\n      if (this._keywords[id_token.getContents().toLowerCase()]) {\r\n        keyword = this._keywords[id_token.getContents().toLowerCase()];\r\n      }\r\n    }\r\n    if (keyword != \"\") { //\r\n      let keywordToken: Token = Token.Create(ExpressionType.KEYWORD, id_token);\r\n      keywordToken.setTrigger(keyword);\r\n      keywordToken.setContent(id_token.getContents());\r\n      keywordToken.setSource(id_token.getSource());\r\n      return keywordToken;\r\n    } else if (!id_token.is(ExpressionType.SPECIAL_ID)) { //bool\r\n      keyword = id_token.getContents().toLowerCase();\r\n      if (this._boolConstant.indexOf(keyword) > -1) {\r\n        id_token.setTokenType(ExpressionType.BOOL);\r\n      }\r\n    }\r\n    return id_token;\r\n  }\r\n\r\n  private isOperator(ch: ExpChar): boolean {\r\n    if (ch.isEndOfInput() || ch.isDigit() || ch.isLetter() || ch.isWhiteSpace()) {\r\n      return false;\r\n    }\r\n\r\n    // let c: string = ch.getValue();\r\n    // if (char.IsControl(c)) {\r\n    // \treturn false;\r\n    // }\r\n\r\n    if (this.isAtBracket(true) || this.isAtStartOfBlockComment(false) || this.isAtStartOfLineComment(false) || this.isAtStartOfNumber() || this.isAtStartOfIdentifier() || this._stringDelimiters[ch.getValue()]) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  private fetchOperator(): Token {\r\n    let result: Token = Token.Create(ExpressionType.OPERATOR, this._inputExp.current());\r\n    result.addToTrigger(this._inputExp.consume());\r\n    if (result.isOperator(\"*\") && this._inputExp.current().is('*')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\"&\") && this._inputExp.current().is('&')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\"|\") && this._inputExp.current().is('|')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\"<\") && this._inputExp.current().is('=')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\">\") && this._inputExp.current().is('=')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\"!\") && this._inputExp.current().is('=')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\"=\") && this._inputExp.current().is('=')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public addError(pos: IPosition, msg: string): void {\r\n    this.getProblemCollector().push(ParseError.Error(pos, msg));\r\n  }\r\n\r\n  public addWarning(pos: IPosition, msg: string): void {\r\n    this.getProblemCollector().push(ParseError.Warning(pos, msg));\r\n  }\r\n\r\n\r\n\r\n}","export class Variable {\r\n\r\n  public get expType(): string {\r\n    return this._expType;\r\n  }\r\n  private _expType: string = 'string';\r\n\r\n  private _value: any = null;\r\n\r\n  private _name: string = '';\r\n\r\n  private _constant: boolean = false;\r\n\r\n  constructor(name: string, type: string, value: any) {\r\n    this._name = name;\r\n    this._expType = type;\r\n    this._value = value;\r\n  }\r\n\r\n  public setType(type: string): void {\r\n    if(!this._constant) {\r\n      this._expType = type;\r\n    }\r\n  }\r\n\r\n  public setValue(value: any): void {\r\n    if(!this._constant) {\r\n      this._value = value;\r\n    }\r\n  }\r\n\r\n  public makeConstant(value: any): void {\r\n    this.setValue(value);\r\n    this._constant = true;\r\n  }\r\n\r\n  public getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  public getName(): string {\r\n    return this._name;\r\n  }\r\n\r\n  public isConstant(): boolean {\r\n    return this._constant;\r\n  }\r\n\r\n  public toString(): string {\r\n    return `Type: ${this._expType} --- ${this._name}: ${this._value.toString()}`;\r\n  }\r\n\r\n}","import { IExpression } from \"./expressions\";\r\nimport { Variable } from \"./variable\";\r\n\r\nexport class VariableExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    return this._value.expType;\r\n  }  \r\n\r\n  public get className(): string {\r\n    return 'VariableExpression';\r\n  }\r\n\r\n  private _value: Variable;\r\n  \r\n  constructor(value: Variable) {\r\n    this._value = value;\r\n  }\r\n  \r\n  public evaluate(): any {\r\n    return this._value.getValue();\r\n  }\r\n\r\n  public toString(): string {\r\n    return this._value.getName();\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let expClone: VariableExpression = new VariableExpression(this._value);\r\n    return expClone;\r\n  }\r\n  \r\n\r\n}","import { Scope } from \"./scope\";\r\nimport { ErrorInfo } from \"../utility\";\r\nimport { IExpression, VeryVarExpression, VeryTemplateExpression } from \"./expressions\";\r\nimport { VE_ExpressionParsing } from \"./expressionParsing\";\r\nimport { VariableScope } from \"../enum\";\r\nimport { ParseError } from \"./positions\";\r\nimport { VerySceneVariables } from \"../scene\";\r\nimport { IVeryVar, VE_Variables } from \"../variables\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { StateConst } from \"../state\";\r\nimport { VE_Objects, VeryEngineObject } from \"../object\";\r\nimport { Variable } from \"./variable\";\r\nimport { VE_Template } from \"../template\";\r\n\r\n\r\nexport class VE_Expressions {\r\n\r\n  public static _scope: Scope = Scope.Create();\r\n\r\n  // 1 - \r\n  // 2 -  + \r\n  // 3 -  +  +  + \r\n  // 4 -  +  +  + \r\n  // 5 -  +  +  + bool\r\n  // 6 - \r\n\r\n\r\n  // TODO == GameObject\r\n  // \r\n  public static createSceneExpression(name_id: string, expression_str: string, error_info: ErrorInfo): IExpression {\r\n    let sceneExp: IExpression = VE_ExpressionParsing.parsing(name_id, expression_str, VE_Expressions._scope, '', '', '', VariableScope.Scene);\r\n    if (VE_ExpressionParsing.errors.length > 0) {\r\n      error_info.isRight = false;\r\n      error_info.message = VE_Expressions.errorMessage(VE_ExpressionParsing.errors);\r\n    }\r\n    return sceneExp;\r\n  }\r\n\r\n  // \r\n  public static createGlobalExpression(name_id: string, expression_str: string, project_name: string, error_info: ErrorInfo): IExpression {\r\n    let globalExp: IExpression = VE_ExpressionParsing.parsing(name_id, expression_str, VE_Expressions._scope, project_name, '', '', VariableScope.Global);\r\n    if (VE_ExpressionParsing.errors.length > 0) {\r\n      error_info.isRight = false;\r\n      error_info.message = VE_Expressions.errorMessage(VE_ExpressionParsing.errors);\r\n    }\r\n    return globalExp;\r\n  }\r\n\r\n  // \r\n  public static createLocalExpression(name_id: string, expression_str: string, project_name: string, object_id: string, error_info: ErrorInfo): IExpression {\r\n    let localExp: IExpression = VE_ExpressionParsing.parsing(name_id, expression_str, VE_Expressions._scope, project_name, object_id, '', VariableScope.Local);\r\n    if (VE_ExpressionParsing.errors.length > 0) {\r\n      error_info.isRight = false;\r\n      error_info.message = VE_Expressions.errorMessage(VE_ExpressionParsing.errors);\r\n    }\r\n    return localExp;\r\n  }\r\n\r\n  // \r\n  public static createFsmExpression(name_id: string, expression_str: string, project_name: string, object_id: string, fsm_id: string, error_info: ErrorInfo): IExpression {\r\n    let fsmExp: IExpression = VE_ExpressionParsing.parsing(name_id, expression_str, VE_Expressions._scope, project_name, object_id, fsm_id, VariableScope.Fsm);\r\n    if (VE_ExpressionParsing.errors.length > 0) {\r\n      error_info.isRight = false;\r\n      error_info.message = VE_Expressions.errorMessage(VE_ExpressionParsing.errors);\r\n    }\r\n    return fsmExp;\r\n  }\r\n\r\n\r\n  // \r\n  public static getParseExpression(project_name: string, object_id: string, var_id: string, var_scope: VariableScope): Nullable<IExpression> {\r\n    // TODO: \r\n    // .*\r\n    if (var_id.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n      let varArray: string[] = var_id.split(StateConst.STATE_SEPARATOR);\r\n      if (varArray.length !== 2) {\r\n        return null;\r\n      } else {\r\n        object_id = varArray[0].trim();\r\n        var_id = varArray[1].trim().substring(1);\r\n        if (var_scope === VariableScope.Local || var_scope === VariableScope.Fsm) {\r\n          //  +  +  + \r\n          // 1. \r\n          // 2. \r\n          // 3. \r\n          // 4. \r\n          let objects: VE_Objects = VE_Manager.objects(project_name);\r\n          if (!objects) {\r\n            return null;\r\n          } else {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n            if (!veryObject) {\r\n              return null;\r\n            } else {\r\n              // \r\n              if (veryObject.isCreatedVariable(var_id)) {\r\n                let v: IVeryVar = veryObject.getVariable(var_id);\r\n                return new VeryVarExpression(v);\r\n              }\r\n              // \r\n              else if (veryObject.isCreatedExpression(var_id)) {\r\n                return veryObject.getExpression(var_id);\r\n              }\r\n              // \r\n              else if (veryObject.isCreatedFsm(var_id)) {\r\n                let v: IVeryVar = veryObject.getFsm(var_id).fsmVar;\r\n                return new VeryVarExpression(v);\r\n              }\r\n              else {\r\n                // \r\n                return null;\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          return null;\r\n        }\r\n      }\r\n    }\r\n    // *\r\n    else {\r\n      if (var_id.startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n        var_id = var_id.substring(1);\r\n        if (var_scope === VariableScope.Local || var_scope === VariableScope.Fsm) {\r\n          //  +  +  + \r\n          // 1. \r\n          // 2. \r\n          // 3. \r\n          // 4. \r\n          let objects: VE_Objects = VE_Manager.objects(project_name);\r\n          if (!objects) {\r\n            return null;\r\n          } else {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n            if (!veryObject) {\r\n              return null;\r\n            } else {\r\n              //\r\n              if (veryObject.isCreatedVariable(var_id)) {\r\n                let v: IVeryVar = veryObject.getVariable(var_id);\r\n                return new VeryVarExpression(v);\r\n              }\r\n              //\r\n              else if (veryObject.isCreatedExpression(var_id)) {\r\n                return veryObject.getExpression(var_id);\r\n              }\r\n              //\r\n              else if (veryObject.isCreatedFsm(var_id)) {\r\n                let v: IVeryVar = veryObject.getFsm(var_id).fsmVar;\r\n                return new VeryVarExpression(v);\r\n              }\r\n              else {\r\n                //\r\n                return this.getParseGlobal(project_name, var_id);\r\n              }\r\n            }\r\n          }\r\n        } else if (var_scope === VariableScope.Global) {\r\n          // \r\n          return this.getParseGlobal(project_name, var_id);\r\n        } else {\r\n          // \r\n          return this.getParseScene(var_id);\r\n        }\r\n      } else {\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n  private static getParseGlobal(project_name: string, var_id: string): Nullable<IExpression> {\r\n    // \r\n    let variables: VE_Variables = VE_Manager.variables(project_name);\r\n    if (!variables) {\r\n      return null;\r\n    } else {\r\n      if (variables.isCreatedVariable(var_id)) {\r\n        let v: IVeryVar = variables.getVariable(var_id);\r\n        return new VeryVarExpression(v);\r\n      } else if (variables.isCreatedExpression(var_id)) {\r\n        return variables.getExpression(var_id);\r\n      } else {\r\n        // \r\n        return this.getParseScene(var_id);\r\n      }\r\n    }\r\n  }\r\n\r\n  // \r\n  private static getParseScene(var_id: string): Nullable<IExpression> {\r\n    // \r\n    if (VerySceneVariables.Variables.isCreated(var_id)) {\r\n      let v: IVeryVar = VerySceneVariables.Variables.getVariable(var_id);\r\n      return new VeryVarExpression(v);\r\n    } else if (VerySceneVariables.Variables.isCreatedExpression(var_id)) {\r\n      return VerySceneVariables.Variables.getExpression(var_id);\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  private static errorMessage(errors: ParseError[]): string {\r\n    let errorStr: string = '';\r\n    for (let i: number = 0; i < errors.length; i++) {\r\n      errorStr += errors[i].getMessage() + ';\\n';\r\n    }\r\n    return errorStr;\r\n  }\r\n\r\n\r\n  public static getTemplateExpression(project_name: string, object_id: string, var_id: string, var_scope: VariableScope): Nullable<VeryTemplateExpression> {\r\n    // .*\r\n    if (var_id.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n      let varArray: string[] = var_id.split(StateConst.STATE_SEPARATOR);\r\n      if (varArray.length !== 2) {\r\n        //error_info = \".*ID\" + var_id + \"\";\r\n        return null;\r\n      }\r\n      else {\r\n        object_id = varArray[0].trim();\r\n        var_id = varArray[1].trim().substring(1);\r\n        if (var_scope === VariableScope.Local || var_scope === VariableScope.Fsm) {\r\n          let objects: VE_Objects = VE_Manager.objects(project_name);\r\n          if (!objects) {\r\n            return null;\r\n          }\r\n          else {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n            if (!veryObject) {\r\n              return null;\r\n            }\r\n            else {\r\n              // \r\n              if (veryObject.isCreatedTemplate(var_id)) {\r\n                let template: VE_Template = veryObject.getTemplate(var_id);\r\n                let r = new VeryTemplateExpression();\r\n                r.setTemplate(template);\r\n                return r;\r\n              }\r\n              else {\r\n                // \r\n                return null;\r\n              }\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          return null;\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      // *\r\n      if (var_id.startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n        var_id = var_id.substring(1);\r\n        if (var_scope === VariableScope.Local || var_scope === VariableScope.Fsm) {\r\n          let objects: VE_Objects = VE_Manager.objects(project_name);\r\n          if (!objects) {\r\n            return null;\r\n          }\r\n          else {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n            if (!veryObject) {\r\n              return null;\r\n            }\r\n            else {\r\n              // \r\n              if (veryObject.isCreatedTemplate(var_id)) {\r\n                let template: VE_Template = veryObject.getTemplate(var_id);\r\n                let r: VeryTemplateExpression = new VeryTemplateExpression();\r\n                r.setTemplate(template);\r\n                return r;\r\n              }\r\n              else {\r\n                // \r\n                let variables: VE_Variables = VE_Manager.variables(project_name);\r\n                if (!variables) {\r\n                  return null;\r\n                }\r\n                else {\r\n                  if (variables.isCreatedTemplate(var_id)) {\r\n                    let template: VE_Template = variables.getTemplate(var_id);\r\n                    let r: VeryTemplateExpression = new VeryTemplateExpression();\r\n                    r.setTemplate(template);\r\n                    return r;\r\n                  }\r\n                  else {\r\n                    // \r\n                    return null;\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        else if (var_scope === VariableScope.Global) {\r\n          // \r\n          let variables: VE_Variables = VE_Manager.variables(project_name);\r\n          if (!variables) {\r\n            return null;\r\n          }\r\n          else {\r\n            if (variables.isCreatedTemplate(var_id)) {\r\n              let template: VE_Template = variables.getTemplate(var_id);\r\n              let r: VeryTemplateExpression = new VeryTemplateExpression();\r\n              r.setTemplate(template);\r\n              return r;\r\n            }\r\n            else {\r\n              //\r\n              return null;\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          return null;\r\n        }\r\n      }\r\n      else {\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\r\n\r\n","import { Severity } from \"../enum\";\r\n\r\nexport class VE_Error {\r\n  private _pos: string = '';\r\n  private _message: string = '';\r\n  private _tableName: string = '';\r\n  private _severity: Severity = Severity.Error;\r\n\r\n  /**\r\n   * \r\n   * @param pos \r\n   * @param message \r\n   * @param table_name \r\n   * @param severity \r\n   */\r\n  constructor(pos: string, message: string, table_name: string, severity: Severity) {\r\n    this._pos = pos;\r\n    this._message = message;\r\n    this._severity = severity;\r\n    this._tableName = table_name;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param pos \r\n   * @param msg \r\n   * @param table_name \r\n   */\r\n  public static warning(pos: string, msg: string, table_name: string): VE_Error {\r\n    return new VE_Error(pos, msg, table_name, Severity.Warning);\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param pos \r\n   * @param msg \r\n   * @param table_name \r\n   */\r\n  public static error(pos: string, msg: string, table_name: string): VE_Error {\r\n    return new VE_Error(pos, msg, table_name, Severity.Error);\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public getPos(): string {\r\n    return this._pos;\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public getMessage(): string {\r\n    return this._message;\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public getTableName(): string {\r\n    return this._tableName;\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public getSeverity(): Severity {\r\n    return this._severity;\r\n  }\r\n\r\n  public toString(): string {\r\n    return \"\" + this._pos + \"\" + this._message + \"\" + this._tableName;\r\n  }\r\n}\r\n\r\n\r\nexport class VE_ErrorManager {\r\n\r\n  private static _errorList: VE_Error[] = [];\r\n\r\n  /// <summary>\r\n  /// \r\n  /// </summary>\r\n  public static get count() {\r\n    return this._errorList.length;\r\n  }\r\n\r\n  /// <summary>\r\n  /// \r\n  /// </summary>\r\n  /// <param name=\"error\"></param>\r\n  public static add(error: VE_Error): void {\r\n    this._errorList.push(error);\r\n  }\r\n\r\n  /// <summary>\r\n  /// \r\n  /// </summary>\r\n  /// <param name=\"index\"></param>\r\n  /// <returns></returns>\r\n  public static getError(index: number): VE_Error {\r\n    return this._errorList[index];\r\n  }\r\n\r\n  /// <summary>\r\n  /// TODO: \r\n  /// </summary>\r\n  /// <param name=\"prefix\"></param>\r\n  public static print(prefix?: string): void {\r\n    if (prefix) {\r\n      for (let i: number = 0; i < this._errorList.length; i++) {\r\n        if (this._errorList[i].getSeverity() === Severity.Error) {\r\n          console.log('' + prefix + \" -> \" + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n        else if (this._errorList[i].getSeverity() === Severity.Warning) {\r\n          console.log('' + prefix + \" -> \" + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n    } else {\r\n      for (let i: number = 0; i < this._errorList.length; i++) {\r\n        if (this._errorList[i].getSeverity() === Severity.Error) {\r\n          console.log('' + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n        else if (this._errorList[i].getSeverity() === Severity.Warning) {\r\n          console.log('' + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /// <summary>\r\n  /// \r\n  /// </summary>\r\n  /// <param name=\"prefix\"></param>\r\n  public static printWarnning(prefix?: string): void {\r\n    if (prefix) {\r\n      for (let i: number = 0; i < this._errorList.length; i++) {\r\n        if (this._errorList[i].getSeverity() === Severity.Warning) {\r\n          console.log('' + prefix + \" -> \" + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n    } else {\r\n      for (let i: number = 0; i < this._errorList.length; i++) {\r\n        if (this._errorList[i].getSeverity() === Severity.Warning) {\r\n          console.log('' + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /// <summary>\r\n  /// \r\n  /// </summary>\r\n  /// <param name=\"prefix\"></param>\r\n  public static printError(prefix: string): void {\r\n    if (prefix) {\r\n      for (let i: number = 0; i < this._errorList.length; i++) {\r\n        if (this._errorList[i].getSeverity() === Severity.Error) {\r\n          console.log('' + prefix + \" -> \" + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n    } else {\r\n      for (let i: number = 0; i < this._errorList.length; i++) {\r\n        if (this._errorList[i].getSeverity() === Severity.Error) {\r\n          console.log('' + prefix + \" -> \" + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}","export class GameGlobal {\r\n\r\n  \r\n  \r\n\r\n}","export * from './gameGlobal';\r\nexport * from './time';\r\nexport * from './errorManager';","import { VeryEngine } from \"../veryEngine\";\r\n\r\nexport class Time {\r\n  \r\n  public static get frameCount(): number {\r\n    return this._frame;\r\n  }\r\n  private static _frame: number = 0;\r\n\r\n\r\n  public static get deltaTime(): number {\r\n    // return 1.0 / GameGlobal.Engine.getFps();\r\n    return VeryEngine.Engine.getDeltaTime() / 1000;\r\n  }\r\n\r\n  public static _sum(): void {\r\n    this._frame++;\r\n  }\r\n}","export * from './showError';","export class ShowError {\r\n\r\n  public static errorContentPrefix: string = '<div class=\"alert alert-error\"><button type=\"button\" class=\"close\" data-dismiss=\"alert\">&times;</button>';\r\n  public static errorContentNow: string;\r\n  public static errorZone: HTMLElement;\r\n\r\n  public static initZone(): void {\r\n    if (!this.errorZone) {\r\n      this.errorZone = document.getElementById(\"errorZone\")!;\r\n    }\r\n  }\r\n  /**\r\n   * \r\n   * TODO: logerrorwarn\r\n   * @param error_msg \r\n   */\r\n  private static showMsg(prefix: string, error_msg: string): void {\r\n    this.initZone();\r\n    if (!this.errorContentNow) {\r\n      this.errorContentNow = this.errorContentPrefix;\r\n    }\r\n    this.errorContentNow += prefix + error_msg + \"<br/>\";\r\n    this.errorZone.style.display = \"block\";\r\n    this.errorZone.innerHTML = this.errorContentNow + '</div>';\r\n    // Close button error\r\n    let closeBtn = this.errorZone.querySelector(\".close\")!;\r\n    let that = this;\r\n    closeBtn.addEventListener(\"click\", function () {\r\n      that.errorZone.style.display = \"none\";\r\n    });\r\n  }\r\n\r\n  public static show(error_msg: string): void {\r\n    this.showMsg('>>>', error_msg);\r\n  }\r\n\r\n  public static showError(error_msg: string): void {\r\n    this.showMsg('>>>', error_msg);\r\n  }\r\n\r\n  public static showWarn(error_msg: string): void {\r\n    this.showMsg('>>>', error_msg);\r\n  }\r\n\r\n  public static clear(): void {\r\n    ShowError.initZone();\r\n    ShowError.errorContentNow = ShowError.errorContentPrefix;\r\n    ShowError.errorZone.innerHTML = ShowError.errorContentNow + '</div>';\r\n    // Close button error\r\n    let closeBtn = ShowError.errorZone.querySelector(\".close\")!;\r\n    let that = ShowError;\r\n    closeBtn.addEventListener(\"click\", function () {\r\n      that.errorZone.style.display = \"none\";\r\n    });\r\n  }\r\n\r\n  public static close(): void {\r\n    ShowError.initZone();\r\n    if(ShowError.errorZone.style.display === \"none\") {\r\n      ShowError.errorZone.style.display = \"block\";\r\n    } else {\r\n      ShowError.errorZone.style.display = \"none\";\r\n    }\r\n  }\r\n}","export * from './utility/index';\r\n\r\nexport * from './action/index';\r\nexport * from './dataSource/index';\r\nexport * from './enum/index';\r\nexport * from './expression/index';\r\nexport * from './global/index';\r\nexport * from './html/index';\r\nexport * from './manager/index';\r\nexport * from './object/index';\r\nexport * from './state/index';\r\nexport * from './template/index';\r\nexport * from './trigger/index';\r\nexport * from './loader/index';\r\n\r\nexport * from './variables/index';\r\nexport * from './scene/index';\r\n\r\nexport * from '../verytable/index';\r\n\r\nexport * from './library/action/index';\r\nexport * from './library/trigger/index';\r\n","export * from './translate';","import { VE_ActionBehaviour } from '../../index';\r\n\r\nexport class Action_Translate extends VE_ActionBehaviour {\r\n\r\n  public get ID(): string {\r\n    return '|Translate';\r\n  }  \r\n\r\n  private _refType: BABYLON.Space = BABYLON.Space.LOCAL;\r\n\r\n  \r\n  public active(): void {\r\n    \r\n  }\r\n\r\n\r\n  public onUpdate(): void {\r\n    \r\n  }\r\n\r\n\r\n\r\n  public destroy(): void {\r\n    // \r\n  }\r\n\r\n\r\n}\r\n\r\n","export * from './input';","import { VE_TriggerBehaviour } from '../../index';\r\nimport { VE_Triggers } from '../../trigger';\r\n\r\nexport class Trigger_MouseDown extends VE_TriggerBehaviour {\r\n  \r\n\r\n  public get ID(): string {\r\n    return '|Mouse_Down';\r\n  }\r\n\r\n\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n\r\n    let a: BABYLON.Nullable<BABYLON.Observer<BABYLON.PointerInfo>> = this.scene.onPointerObservable.add(  (pointInfo) => {\r\n\r\n    })\r\n\r\n    this.scene.onPointerObservable.remove(a);\r\n\r\n    return true;\r\n  }\r\n\r\n  public onUpdate(): void {\r\n    \r\n  }\r\n\r\n\r\n  public destroy(): void {\r\n    \r\n  }\r\n  \r\n\r\n}\r\n\r\n\r\n\r\nVE_Triggers.addTrigger(new Trigger_MouseDown());","import { VE_Templates, VE_Template } from \"../template\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { VE_Objects, VeryEngineObject } from \"../object\";\r\nimport { VE_Variables, VeryVarManager, IVeryVar, VeryExpression } from \"../variables\";\r\nimport { ErrorInfo, VE_StringFormat } from \"../utility\";\r\nimport { VE_ErrorManager, VE_Error } from \"../global\";\r\nimport { VE_Expressions, IExpression } from \"../expression\";\r\nimport { VE_FsmData, VE_StateData, VE_StateTriggerData, VE_StateActionData } from \"../dataSource\";\r\nimport { VE_Fsm, VE_State, VE_StateAction, VE_AssociatedState, StateConst } from \"../state\";\r\nimport { VE_Triggers, VE_TriggerBehaviour } from \"../trigger\";\r\nimport { VE_Actions, VE_ActionBehaviour, VE_Assignment } from \"../action\";\r\nimport { StateActionType, AssignType } from \"../enum\";\r\nimport { VE_TypeConvert } from \"../utility/typeConvert\";\r\nimport { VE_AssignmentTypeJudge } from \"../action/assignmentTypeJudge\";\r\nimport { VerySceneVariables } from \"../scene\";\r\n\r\nexport class CreateInstance {\r\n\r\n\r\n\r\n\r\n\r\n  public static createProject(project_name: string): boolean {\r\n    let templates: VE_Templates = VE_Manager.templates(project_name);\r\n    let objects: VE_Objects = VE_Manager.objects(project_name);\r\n    let globalVars: VE_Variables = VE_Manager.variables(project_name);\r\n\r\n    // 1. \r\n    // (1).\r\n    for (let i: number = 0; i < globalVars.varData.count; i++) {\r\n      let varID: string = globalVars.varData.getVariableID(i);\r\n      let varPara: string[] = globalVars.varData.getVariableParas(varID);\r\n      // 1.2.3.\r\n      // 1.\r\n      if (varPara[0] === \"\" || varPara[0].toLowerCase() === \"expression\") {\r\n        continue;\r\n      }\r\n      // 2.IVeryVar\r\n      else if (VeryVarManager.hasVarType(varPara[0])) {\r\n        let errorInfo: ErrorInfo = new ErrorInfo();\r\n        let newVar: Nullable<IVeryVar> = VeryVarManager.createVariable(varID, varPara[0], varPara[1], errorInfo);\r\n        // TODO: ListDictionary\r\n        if (!errorInfo.isRight || newVar === null) {\r\n          VE_ErrorManager.add(VE_Error.error(globalVars.varData.getPos(varID), \"\" + project_name + \"\" + varID + \"\" + varPara[0] + \"\" + varPara[1] + \"\" + errorInfo.message + \"\", ''));\r\n          return false;\r\n        } else {\r\n          globalVars.addVariable(varID, newVar);\r\n        }\r\n      }\r\n      // 3.\r\n      else if (templates.isCreatedTemplate(varPara[0])) {\r\n        globalVars.addTemplate(varID, templates.getTemplate(varPara[0]).clone('__global__', varID));\r\n      }\r\n      // \r\n      else {\r\n        VE_ErrorManager.add(VE_Error.error(globalVars.varData.getPos(varID), \"\" + project_name + \"\" + varID + \"\" + varPara[0] + \"\" + varPara[1] + \"\", ''));\r\n        return false;\r\n      }\r\n    }\r\n\r\n    // (2).\r\n    for (let i: number = 0; i < globalVars.varData.count; i++) {\r\n      let varID: string = globalVars.varData.getVariableID(i);\r\n      let varPara: string[] = globalVars.varData.getVariableParas(varID);\r\n      // \r\n      // 1.\r\n      if (varPara[0] === \"\" || varPara[0].toLowerCase() === \"expression\") {\r\n        // \r\n        let errorInfo: ErrorInfo = new ErrorInfo();\r\n        let globalExp: IExpression = VE_Expressions.createGlobalExpression(varID, varPara[1], project_name, errorInfo);\r\n        if (!errorInfo.isRight || !globalExp) {\r\n          VE_ErrorManager.add(VE_Error.error(globalVars.varData.getPos(varID), \"\" + project_name + \"\" + varID + \",\" + varPara[0] + \",\" + varPara[1] + \"\\n\" + errorInfo.message, \"\"));\r\n          return false;\r\n        }\r\n        globalVars.addExpression(varID, globalExp);\r\n      }\r\n      else {\r\n        continue;\r\n      }\r\n    }\r\n\r\n    // 2. ----\r\n    // 1.\r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.varData.count; k++) {\r\n        // (1). \r\n        let varID: string = veryObject.varData.getVariableID(k);\r\n        let varPara: string[] = veryObject.varData.getVariableParas(varID);\r\n        // 1.2.3.\r\n        // 1.\r\n        if (varPara[0] === \"\" || varPara[0].toLowerCase().trim() === \"expression\") {\r\n          continue;\r\n        }\r\n        // 2.IVeryVar\r\n        else if (VeryVarManager.hasVarType(varPara[0])) {\r\n          let errorInfo: ErrorInfo = new ErrorInfo();\r\n          let newVar: Nullable<IVeryVar> = VeryVarManager.createVariable(varID, varPara[0], varPara[1], errorInfo);\r\n          // TODO: ListDictionary\r\n          if (newVar === null || !errorInfo.isRight) {\r\n            VE_ErrorManager.add(VE_Error.error(veryObject.varData.getPos(varID), \"\" + project_name + \"\" + varID + \"\" + varPara[0] + \"\" + varPara[1] + \"\" + errorInfo.message + \"\", ''));\r\n            return false;\r\n          } else {\r\n            globalVars.addVariable(varID, newVar);\r\n          }\r\n        }\r\n        // 3.\r\n        else if (templates.isCreatedTemplate(varPara[0])) {\r\n          veryObject.addTemplate(varID, templates.getTemplate(varPara[0]).clone(objectID, varID));\r\n        }\r\n        // \r\n        else {\r\n          VE_ErrorManager.add(VE_Error.error(veryObject.varData.getPos(varID), \"\" + project_name + \"\" + objectID + \"\" + varID + \",\" + varPara[0] + \",\" + varPara[1] + \"\", \"\"));\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n\r\n    // 3.   \r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.dataSource.fsmCount; k++) {\r\n        let fsmID: string = veryObject.dataSource.getFsmID(k);\r\n        let fsmData: VE_FsmData = veryObject.dataSource.getFsmData(fsmID);\r\n        // \r\n        let errorInfo: ErrorInfo = new ErrorInfo();\r\n        let newVar: Nullable<IVeryVar> = VeryVarManager.createVariable(fsmID, fsmData.fsmType, fsmData.initialValStr, errorInfo);\r\n        // TODO: ListDictionary\r\n        if (newVar === null || !errorInfo.isRight) {\r\n          VE_ErrorManager.add(VE_Error.error(veryObject.dataSource.getFsmPos(fsmID), \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + errorInfo.message + \"\", ''));\r\n          return false;\r\n        }\r\n        // \r\n        let fsm: VE_Fsm = new VE_Fsm(project_name, objectID, fsmID, newVar, veryObject);\r\n        veryObject.addFsm(fsmID, fsm);\r\n      }\r\n    }\r\n\r\n    // \r\n    // 4. \r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.varData.count; k++) {\r\n        // (1). \r\n        let varID: string = veryObject.varData.getVariableID(k);\r\n        let varPara: string[] = veryObject.varData.getVariableParas(varID);\r\n        // 1.2.3.\r\n        // 1.\r\n        if (varPara[0] === \"\" || varPara[0].toLowerCase().trim() === \"expression\") {\r\n          // \r\n          let errorInfo: ErrorInfo = new ErrorInfo();\r\n          let newVar: IExpression = VE_Expressions.createLocalExpression(varID, varPara[1], project_name, objectID, errorInfo);\r\n          if (!errorInfo.isRight || !newVar) {\r\n            VE_ErrorManager.add(VE_Error.error(veryObject.varData.getPos(varID), \"\" + project_name + \"\" + objectID + \"\" + varID + \",\" + varPara[0] + \",\" + varPara[1] + \"\\n\" + errorInfo.message, ''));\r\n            return false;\r\n          }\r\n          veryObject.addExpression(varID, newVar);\r\n        }\r\n        else {\r\n          continue;\r\n        }\r\n      }\r\n    }\r\n\r\n    // TODO: UI\r\n\r\n    // 6. \r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.dataSource.triggerCount; k++) {\r\n        let triggerID: string = veryObject.dataSource.getTriggerID(k);\r\n        //Debug.Log(\"ID\" + triggerID);\r\n        let triggerPara: string[] = veryObject.dataSource.getTriggerPara(triggerID);\r\n\r\n        if (!VE_Triggers.hasTrigger(triggerPara[0])) {\r\n          VE_ErrorManager.add(VE_Error.error(veryObject.dataSource.getTriggerPos(triggerID), \"\" + project_name + \"\" + objectID + \"\" + triggerID + \"\" + triggerPara[0] + \"\", \"\"));\r\n          return false;\r\n        } else {\r\n          // TODO: Trigger\r\n          let trigger: VE_TriggerBehaviour = VE_Triggers.createTrigger(triggerPara[0]);\r\n          veryObject.addTrigger(triggerID, trigger);\r\n        }\r\n      }\r\n    }\r\n\r\n    // 5. \r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.dataSource.actionCount; k++) {\r\n        let actionID: string = veryObject.dataSource.getActionID(k);\r\n        let actionPara: string[] = veryObject.dataSource.getActionPara(actionID);\r\n\r\n        if (!VE_Actions.hasAction(actionPara[0])) {\r\n          VE_ErrorManager.add(VE_Error.error(veryObject.dataSource.getActionPos(actionID), \"\" + project_name + \"\" + objectID + \"\" + actionID + \"\" + actionPara[0] + \"\", \"\"));\r\n          return false;\r\n        } else {\r\n          // TODO: Action\r\n          let action: VE_ActionBehaviour = VE_Actions.createAction(actionPara[0]);\r\n          veryObject.addAction(actionID, action);\r\n        }\r\n      }\r\n    }\r\n\r\n    // 7.    +  + \r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.dataSource.fsmCount; k++) {\r\n        let fsmID: string = veryObject.dataSource.getFsmID(k);\r\n        let fsmData: VE_FsmData = veryObject.dataSource.getFsmData(fsmID);\r\n        // \r\n        let fsm: VE_Fsm = veryObject.getFsm(fsmID);\r\n        // \r\n        for (let p: number = 0; p < fsmData.count; p++) {\r\n          let stateData: VE_StateData = fsmData.getStateData(p);\r\n          let state: VE_State = new VE_State(fsm, fsm.count + 1);\r\n          // \r\n          if (stateData.isInitialValue) {\r\n            state.setInitialValue(fsm.fsmVar.getValue());\r\n          }\r\n          else {\r\n            // TODO: \r\n            if (!this.stateAssignment(project_name, objectID, fsmID, globalVars, objects, veryObject, fsm, stateData, state)) {\r\n              return false;\r\n            }\r\n          }\r\n\r\n          // \r\n          if (stateData.isSequence) {\r\n            state.setSequence();\r\n          }\r\n\r\n          // \r\n          if (stateData.logicalExp !== '') {\r\n            let errorInfo: ErrorInfo = new ErrorInfo();\r\n            let logicalExp: IExpression = VE_Expressions.createFsmExpression('', stateData.logicalExp, project_name, objectID, fsmID, errorInfo);\r\n            if (!errorInfo.isRight || !logicalExp) {\r\n              VE_ErrorManager.add(VE_Error.error(\"\" + stateData.rowIndex.toString() + \"E\", \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + stateData.logicalExp + \"\\n\" + errorInfo.message, \"\"));\r\n              return false;\r\n            }\r\n            state.logicalAssociated = logicalExp;\r\n          }\r\n\r\n          // \r\n          for (let s: number = 0; s < stateData.triggerCount; s++) {\r\n            let triggerData: VE_StateTriggerData = stateData.getTrigger(s);\r\n            let triggerPos: string = stateData.getTriggerPos(s);\r\n            // \r\n            let trigger: Nullable<VE_TriggerBehaviour> = VE_Triggers.findTrigger(veryObject, triggerData.triggerID);\r\n            if (trigger === null) {\r\n              VE_ErrorManager.add(VE_Error.error(triggerPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + triggerData.triggerID + \"\", \"\"));\r\n              return false;\r\n            }\r\n            // \r\n            let logicalExp: Nullable<IExpression> = null;\r\n            // Debug.LogWarning(\"\" + triggerData.LogicalExp);\r\n            if (triggerData.logicalExp !== '') {\r\n              // \r\n              let errorInfo: ErrorInfo = new ErrorInfo();\r\n              logicalExp = VE_Expressions.createFsmExpression('', triggerData.logicalExp, project_name, objectID, fsmID, errorInfo);\r\n              // Debug.LogWarning(logicalExp);\r\n              if (!errorInfo.isRight || logicalExp === null) {\r\n                VE_ErrorManager.add(VE_Error.error(triggerPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + triggerData.logicalExp + \"\\n\" + errorInfo.message, \"\"));\r\n                return false;\r\n              }\r\n            }\r\n            trigger.addTriggerTarget(logicalExp!, state);\r\n            // \r\n            if (triggerData.logicalSwitch !== '') {\r\n              // \r\n              let errorInfo: ErrorInfo = new ErrorInfo();\r\n              let logicalSwitch: IExpression = VE_Expressions.createFsmExpression('', triggerData.logicalSwitch, project_name, objectID, fsmID, errorInfo);\r\n              if (!errorInfo.isRight || logicalSwitch === null) {\r\n                VE_ErrorManager.add(VE_Error.error(triggerPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + triggerData.logicalSwitch + \"\\n\" + errorInfo.message, \"\"));\r\n                return false;\r\n              }\r\n              trigger.addLogicalSwitch(logicalSwitch);\r\n            }\r\n          }\r\n\r\n          // \r\n          for (let s: number = 0; s < stateData.actionCount; s++) {\r\n            let actionData: VE_StateActionData = stateData.getAction(s);\r\n            let actionPos: string = stateData.getActionPos(s);\r\n            // \r\n            if (actionData.type === StateActionType.Action) {\r\n              // \r\n              let action: Nullable<VE_ActionBehaviour> = VE_Actions.findAction(veryObject, actionData.actionID);\r\n              if (action === null) {\r\n                VE_ErrorManager.add(VE_Error.error(actionPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + actionData.actionID + \"\", \"\"));\r\n                return false;\r\n              }\r\n              // bool\r\n              // \r\n              let errorInfo: ErrorInfo = new ErrorInfo();\r\n              let enabledFlag: boolean = VE_TypeConvert.boolConvert(actionData.enabled, errorInfo);\r\n              if (!errorInfo.isRight) {\r\n                VE_ErrorManager.add(VE_Error.error(actionPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + actionData.actionID + \"booltruefalse\", \"\"));\r\n                return false;\r\n              }\r\n\r\n              // \r\n              let everyFrameFlag = VE_TypeConvert.boolConvert(actionData.everyFrame, errorInfo);\r\n              if (!errorInfo.isRight) {\r\n                VE_ErrorManager.add(VE_Error.error(actionPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + actionData.actionID + \"booltruefalse\", \"\"));\r\n                return false;\r\n              }\r\n              // \r\n              let isSequence = VE_TypeConvert.boolConvert(actionData.everyFrame, errorInfo);\r\n              if (!errorInfo.isRight) {\r\n                VE_ErrorManager.add(VE_Error.error(actionPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + actionData.actionID + \"booltruefalse\", \"\"));\r\n                return false;\r\n              }\r\n              let stateAction: VE_StateAction = new VE_StateAction();\r\n              stateAction.setAction(action)\r\n              state.addAction(stateAction);\r\n            }\r\n            //\r\n            else {\r\n              // TODO\r\n              if (!this.assignmentAction(project_name, objectID, fsmID, globalVars, objects, veryObject, actionData, state)) {\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n\r\n          // \r\n          if (fsm.isCreatedState(stateData.stateIndex)) {\r\n            VE_ErrorManager.add(VE_Error.error(\"\" + stateData.rowIndex.toString() + \"I\", \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + stateData.ValStr + \"ID\", \"\"));\r\n            return false;\r\n          }\r\n          else {\r\n            fsm.addState(state, stateData.stateIndex);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // 8.   \r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.dataSource.fsmCount; k++) {\r\n        let fsmID: string = veryObject.dataSource.getFsmID(k);\r\n        let fsmData: VE_FsmData = veryObject.dataSource.getFsmData(fsmID);\r\n        // \r\n        let fsm: VE_Fsm = veryObject.getFsm(fsmID);\r\n        // \r\n        for (let p: number = 0; p < fsmData.count; p++) {\r\n          let stateData: VE_StateData = fsmData.getStateData(p);\r\n          let state: Nullable<VE_State> = fsm.getState(p);\r\n\r\n          // \r\n          for (let s: number = 0; s < stateData.associatedStateCount; s++) {\r\n            let associatedStateInfo: string = stateData.getAssociatedState(s);\r\n            let associatedPos: string = stateData.getAssociatedStatePos(s);\r\n            let associatedState: VE_AssociatedState = new VE_AssociatedState(state!);\r\n            let multipleAssociatedState: string[] = associatedStateInfo.split(/,|/);\r\n\r\n            for (let www: number = 0; www < multipleAssociatedState.length; www++) {\r\n              associatedStateInfo = multipleAssociatedState[www].trim();\r\n              let stateIndex: number = StateConst.STATE_INDEX;\r\n              let strArray: string[] = associatedStateInfo.split('=');\r\n              if (strArray.length === 1) {\r\n                stateIndex = StateConst.STATE_INDEX;\r\n              }\r\n              else if (strArray.length === 2) {\r\n                let errorInfo: ErrorInfo = new ErrorInfo();\r\n                stateIndex = VE_TypeConvert.intConvert(strArray[1].trim(), errorInfo);\r\n                if (!errorInfo.isRight) {\r\n                  VE_ErrorManager.add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"=ID\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                VE_ErrorManager.add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"=ID\", \"\"));\r\n                return false;\r\n              }\r\n\r\n              // 1. \r\n              // 2. .\r\n              // 3. *.\r\n              // 4. .*.\r\n\r\n              let aFsmID: string = strArray[0].trim();\r\n              if (aFsmID.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n                let stateArray: string[] = aFsmID.split(StateConst.STATE_SEPARATOR);\r\n                for (let q: number = 0; q < stateArray.length; q++) {\r\n                  stateArray[q] = stateArray[q].trim();\r\n                }\r\n                // .*.\r\n                if (stateArray.length === 3) {\r\n                  if (objects.isCreated(stateArray[0])) {\r\n                    let aObject: VeryEngineObject = objects.getVeryObject(stateArray[0]);\r\n                    if (stateArray[1].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n                      let varID: string = stateArray[1].substring(1);\r\n                      if (aObject.isCreatedTemplate(varID)) {\r\n                        let template: VE_Template = aObject.getTemplate(varID);\r\n                        if (template.dataSource.isCreatedFsm(stateArray[2])) {\r\n                          associatedState.addTemplate(template, stateArray[2], stateIndex);\r\n                          // VE_AssociatedState associatedState = new VE_AssociatedState(state, template, stateArray[2], stateIndex);\r\n                          // state.AddAssociatedState(associatedState);\r\n                        }\r\n                        else {\r\n                          VE_ErrorManager.add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".*.\", \"\"));\r\n                          return false;\r\n                        }\r\n                      }\r\n                      else {\r\n                        VE_ErrorManager.add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".*.\", \"\"));\r\n                        return false;\r\n                      }\r\n                    }\r\n                    else {\r\n                      VE_ErrorManager.add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".*.\", \"\"));\r\n                      return false;\r\n                    }\r\n                  }\r\n                  else {\r\n                    VE_ErrorManager.add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".*.\", \"\"));\r\n                    return false;\r\n                  }\r\n                }\r\n                else if (stateArray.length === 2) {\r\n                  let aObjectID: string = stateArray[0].trim();\r\n                  aFsmID = stateArray[1].trim();\r\n                  // *.\r\n                  if (aObjectID.startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n                    aObjectID = aObjectID.substring(1);\r\n                    if (veryObject.isCreatedTemplate(aObjectID)) {\r\n                      let template: VE_Template = veryObject.getTemplate(aObjectID);\r\n                      if (template.dataSource.isCreatedFsm(stateArray[1])) {\r\n                        associatedState.addTemplate(template, stateArray[1], stateIndex);\r\n                        // VE_AssociatedState associatedState = new VE_AssociatedState(state, template, stateArray[1], stateIndex);\r\n                        // state.AddAssociatedState(associatedState);\r\n                      }\r\n                      else {\r\n                        VE_ErrorManager.add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"*.\", \"\"));\r\n                        return false;\r\n                      }\r\n                    }\r\n                    else {\r\n                      if (globalVars.isCreatedTemplate(aObjectID)) {\r\n                        let template: VE_Template = globalVars.getTemplate(aObjectID);\r\n                        if (template.dataSource.isCreatedFsm(stateArray[1])) {\r\n                          associatedState.addTemplate(template, stateArray[1], stateIndex);\r\n                          // VE_AssociatedState associatedState = new VE_AssociatedState(state, template, stateArray[1], stateIndex);\r\n                          // state.AddAssociatedState(associatedState);\r\n                        }\r\n                        else {\r\n                          VE_ErrorManager.add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"*.\", \"\"));\r\n                          return false;\r\n                        }\r\n                      }\r\n                      else {\r\n                        VE_ErrorManager.add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"*.\", \"\"));\r\n                        return false;\r\n                      }\r\n                    }\r\n                  }\r\n                  // .\r\n                  else {\r\n                    let aObject: VeryEngineObject = objects.getVeryObject(aObjectID);\r\n                    if (aObject === null) {\r\n                      VE_ErrorManager.add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".\", \"\"));\r\n                      return false;\r\n                    }\r\n                    let aFsm: VE_Fsm = aObject.getFsm(aFsmID);\r\n                    if (aFsm === null) {\r\n                      VE_ErrorManager.add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".\", \"\"));\r\n                      return false;\r\n                    }\r\n                    let toState: Nullable<VE_State> = aFsm.getState(stateIndex);\r\n                    if (toState === null) {\r\n                      VE_ErrorManager.add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".\", \"\"));\r\n                      return false;\r\n                    }\r\n                    associatedState.add(toState, stateIndex);\r\n                    // VE_AssociatedState associatedState = new VE_AssociatedState(state, toState);\r\n                    // state.AddAssociatedState(associatedState);\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              //\r\n              else {\r\n                let aFsm: VE_Fsm = veryObject.getFsm(aFsmID);\r\n                if (aFsm === null) {\r\n                  VE_ErrorManager.add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"\", \"\"));\r\n                  return false;\r\n                }\r\n\r\n                let toState: Nullable<VE_State> = aFsm.getState(stateIndex);\r\n                if (toState === null) {\r\n                  VE_ErrorManager.add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"\", \"\"));\r\n                  return false;\r\n                }\r\n                associatedState.add(toState, stateIndex);\r\n                //VE_AssociatedState associatedState = new VE_AssociatedState(state, toState);\r\n                //state.AddAssociatedState(associatedState);\r\n              }\r\n            }\r\n            state!.addAssociatedState(associatedState);\r\n          }\r\n\r\n        }\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n\r\n  private static stateAssignment(project_name: string, object_id: string, fsm_id: string, global_vars: VE_Variables, objects: VE_Objects, very_object: VeryEngineObject, fsm: VE_Fsm, state_data: VE_StateData, state: VE_State): boolean {\r\n    // \r\n    // \r\n    let assignStr: string = state_data.ValStr;\r\n    // *\r\n    // .*\r\n    // *.*\r\n    // .*.*\r\n    if (assignStr.indexOf(StateConst.VARIABLE_SYMBOL) > -1)  // \r\n    {\r\n      if (assignStr.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n        let valArray: string[] = assignStr.split(StateConst.STATE_SEPARATOR);\r\n        for (let q: number = 0; q < valArray.length; q++) {\r\n          valArray[q] = valArray[q].trim();\r\n        }\r\n        if (valArray.length === 2) {\r\n          if (!valArray[1].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n            VE_ErrorManager.add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"1*2.*3*.*4.*.*\", \"\"));\r\n            return false;\r\n          }\r\n          else {\r\n            // *.*\r\n            if (valArray[0].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n              let templateVarID: string = valArray[0].substring(1);\r\n              let varID: string = valArray[1].substring(1);\r\n              if (very_object.isCreatedTemplate(templateVarID)) {\r\n                let template: VE_Template = very_object.getTemplate(templateVarID);\r\n                if (template.varData.isCreatedVariable(varID) || template.dataSource.isCreatedFsm(varID)) {\r\n                  state.setTemplateInfo(template, varID, assignStr);\r\n                }\r\n                else {\r\n                  VE_ErrorManager.add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"*.***\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                if (global_vars.isCreatedTemplate(templateVarID)) {\r\n                  let template: VE_Template = global_vars.getTemplate(templateVarID);\r\n                  if (template.varData.isCreatedVariable(varID) || template.dataSource.isCreatedFsm(varID)) {\r\n                    state.setTemplateInfo(template, varID, assignStr);\r\n                  }\r\n                  else {\r\n                    VE_ErrorManager.add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"*.***\", \"\"));\r\n                    return false;\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"*.**\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n            }\r\n            // .*\r\n            else {\r\n              if (valArray[0] === object_id && valArray[1].substring(1) === fsm_id) {\r\n                VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \".*\", \"\"));\r\n                return false;\r\n              }\r\n              let errorInfo: ErrorInfo = new ErrorInfo();\r\n\r\n              let veryVar: Nullable<IVeryVar> = VeryVarManager.getVariable(valArray[1].substring(1), project_name, valArray[0], errorInfo);\r\n              if (!errorInfo.isRight || veryVar === null) {\r\n                VE_ErrorManager.add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \".**\" + valArray[1] + \"\" + errorInfo, \"\"));\r\n                return false;\r\n              }\r\n              else {\r\n                // \r\n                if (VE_AssignmentTypeJudge.allow(fsm.fsmVar, veryVar)) {\r\n                  state.setStateVariable(veryVar);\r\n                }\r\n                else {\r\n                  VE_ErrorManager.add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \".*\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        else if (valArray.length === 3) {\r\n          // .*.*\r\n          if (valArray[0].startsWith(StateConst.STATE_SEPARATOR) || !valArray[1].startsWith(StateConst.STATE_SEPARATOR) || !valArray[2].startsWith(StateConst.STATE_SEPARATOR)) {\r\n            VE_ErrorManager.add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"1*2.*3*.*4.*.*\", \"\"));\r\n            return false;\r\n          }\r\n          else {\r\n            let templateVarID: string = valArray[1].substring(1);\r\n            let varID: string = valArray[2].substring(1);\r\n            if (objects.isCreated(valArray[0])) {\r\n              let tObject: VeryEngineObject = objects.getVeryObject(valArray[0]);\r\n              if (tObject.isCreatedTemplate(templateVarID)) {\r\n                let template: VE_Template = tObject.getTemplate(templateVarID);\r\n                if (template.varData.isCreatedVariable(varID) || template.dataSource.isCreatedFsm(varID)) {\r\n                  state.setTemplateInfo(template, varID, assignStr);\r\n                }\r\n                else {\r\n                  VE_ErrorManager.add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \".*.*.**\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                VE_ErrorManager.add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \".*.**\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n            else {\r\n              VE_ErrorManager.add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \".*.*\", \"\"));\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          VE_ErrorManager.add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"1*2.*3*.*4.*.*\", \"\"));\r\n          return false;\r\n        }\r\n      }\r\n      else {\r\n        // *\r\n        let varID: string = assignStr.substring(1);\r\n        if (varID == fsm_id) {\r\n          VE_ErrorManager.add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"*\", \"\"));\r\n          return false;\r\n        }\r\n        let errorInfo: ErrorInfo = new ErrorInfo();\r\n        let stateVar: Nullable<IVeryVar> = VeryVarManager.getVariable(varID, project_name, object_id, errorInfo);\r\n        if (stateVar === null) {\r\n          VE_ErrorManager.add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"\" + errorInfo, \"\"));\r\n          return false;\r\n        }\r\n        else {\r\n          //\r\n          if (VE_AssignmentTypeJudge.allow(fsm.fsmVar, stateVar)) {\r\n            state.setStateVariable(stateVar);\r\n          }\r\n          else {\r\n            VE_ErrorManager.add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"*\", \"\"));\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    //\r\n    else {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let val: any = fsm.fsmVar.initValue(assignStr, errorInfo);\r\n      if (!errorInfo.isRight) {\r\n        VE_ErrorManager.add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"\", \"\"));\r\n        return false;\r\n      }\r\n      state.setConstValue(val);\r\n    }\r\n    return true;\r\n  }\r\n\r\n\r\n  private static assignmentAction(project_name: string, object_id: string, fsm_id: string, global_vars: VE_Variables, objects: VE_Objects, very_object: VeryEngineObject, action_data: VE_StateActionData, state: VE_State): boolean {\r\n    // \r\n    let assignment: VE_Assignment = new VE_Assignment(state, action_data.totalString);\r\n    let varID: string = action_data.varID;\r\n    // Debug.LogWarning(\"\" + action_data.TotalString);\r\n    // 1 1*2.*3*.*4.*.*\r\n    if (varID.indexOf(StateConst.VARIABLE_SYMBOL) > -1)  // \r\n    {\r\n      if (varID.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n        let valArray: string[] = varID.split(StateConst.STATE_SEPARATOR);\r\n        for (let q: number = 0; q < valArray.length; q++) {\r\n          valArray[q] = valArray[q].trim();\r\n        }\r\n        // .* or *.*\r\n        if (valArray.length === 2) {\r\n          // *.*\r\n          if (valArray[0].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n            let templateVarID: string = valArray[0].substring(1);\r\n            varID = valArray[1].substring(1);\r\n            if (very_object.isCreatedTemplate(templateVarID)) {\r\n              let template: VE_Template = very_object.getTemplate(templateVarID);\r\n              if (template.varData.isCreatedVariable(varID)) {\r\n                let varPara: string[] = template.varData.getVariableParas(varID);\r\n                if (varPara[1].toLowerCase() === \"expression\" || varPara[1].toLowerCase() === \"\") {\r\n                  VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.*\", \"\"));\r\n                  return false;\r\n                }\r\n                else {\r\n                  assignment.setLeftTemplateVar(template, varID);\r\n                }\r\n              }\r\n              else if (template.dataSource.isCreatedFsm(varID)) {\r\n                assignment.setLeftTemplateVar(template, varID);\r\n              }\r\n              else {\r\n                VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.***\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n            else {\r\n              if (global_vars.isCreatedTemplate(templateVarID)) {\r\n                let template: VE_Template = global_vars.getTemplate(templateVarID);\r\n                if (template.varData.isCreatedVariable(varID)) {\r\n                  let varPara: string[] = template.varData.getVariableParas(varID);\r\n                  if (varPara[1].toLowerCase() === \"expression\" || varPara[1].toLowerCase() === \"\") {\r\n                    VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.*\", \"\"));\r\n                    return false;\r\n                  }\r\n                  else {\r\n                    assignment.setLeftTemplateVar(template, varID);\r\n                  }\r\n                }\r\n                else if (template.dataSource.isCreatedFsm(varID)) {\r\n                  assignment.setLeftTemplateVar(template, varID);\r\n                }\r\n                else {\r\n                  VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.***\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.**\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          //.*\r\n          else {\r\n            if (objects.isCreated(valArray[0])) {\r\n              let aObject: VeryEngineObject = objects.getVeryObject(valArray[0]);\r\n              varID = varID.substring(1);\r\n              if (aObject.isCreatedExpression(varID)) {\r\n                VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*\", \"\"));\r\n                return false;\r\n              }\r\n              else if (aObject.isCreatedFsm(varID)) {\r\n                let v: IVeryVar = aObject.getFsm(varID).fsmVar;\r\n                assignment.setLeftVariable(v);\r\n              }\r\n              else if (aObject.isCreatedVariable(varID)) {\r\n                let v: IVeryVar = aObject.getVariable(varID);\r\n                assignment.setLeftVariable(v);\r\n              }\r\n              else if (aObject.isCreatedTemplate(varID)) {\r\n                let template: VE_Template = aObject.getTemplate(varID);\r\n                assignment.setLeftTemplate(template);\r\n              }\r\n              else {\r\n                VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n            else {\r\n              VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*\", \"\"));\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        else if (valArray.length === 3)  // .*.*\r\n        {\r\n          // .*.*\r\n          if (valArray[0].startsWith(StateConst.STATE_SEPARATOR) || !valArray[1].startsWith(StateConst.STATE_SEPARATOR) || !valArray[2].startsWith(StateConst.STATE_SEPARATOR)) {\r\n            VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"1*2.*3*.*4.*.*\", \"\"));\r\n            return false;\r\n          }\r\n          else {\r\n            let templateVarID: string = valArray[1].substring(1);\r\n            varID = valArray[2].substring(1);\r\n            if (objects.isCreated(valArray[0])) {\r\n              let tObject: VeryEngineObject = objects.getVeryObject(valArray[0]);\r\n              if (tObject.isCreatedTemplate(templateVarID)) {\r\n                let template: VE_Template = tObject.getTemplate(templateVarID);\r\n                if (template.dataSource.isCreatedFsm(varID)) {\r\n                  assignment.setLeftTemplateVar(template, varID);\r\n                }\r\n                else if (template.varData.isCreatedVariable(varID)) {\r\n                  let varParas: string[] = template.varData.getVariableParas(varID);\r\n                  if (varParas[1].toLowerCase() === \"expression\" || varParas[1].toLowerCase() === \"\") {\r\n                    VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.*.*.*\", \"\"));\r\n                    return false;\r\n                  }\r\n                  else {\r\n                    assignment.setLeftTemplateVar(template, varID);\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.*.**\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.**\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n            else {\r\n              VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.*\", \"\"));\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"1*2.*3*.*4.*.*\", \"\"));\r\n          return false;\r\n        }\r\n      }\r\n      else // *\r\n      {\r\n        varID = varID.substring(1);\r\n        if (very_object.isCreatedExpression(varID)) {\r\n          VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*\", \"\"));\r\n          return false;\r\n        }\r\n        else if (very_object.isCreatedFsm(varID)) {\r\n          let v: IVeryVar = very_object.getFsm(varID).fsmVar;\r\n          assignment.setLeftVariable(v);\r\n        }\r\n        else if (very_object.isCreatedVariable(varID)) {\r\n          let v: IVeryVar = very_object.getVariable(varID);\r\n          assignment.setLeftVariable(v);\r\n        }\r\n        else if (very_object.isCreatedTemplate(varID)) {\r\n          let template: VE_Template = very_object.getTemplate(varID);\r\n          assignment.setLeftTemplate(template);\r\n        }\r\n        else {\r\n          // \r\n          if (global_vars.isCreatedExpression(varID)) {\r\n            VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*\", \"\"));\r\n            return false;\r\n          }\r\n          else if (global_vars.isCreatedVariable(varID)) {\r\n            let v: IVeryVar = global_vars.getVariable(varID);\r\n            assignment.setLeftVariable(v);\r\n          }\r\n          else if (global_vars.isCreatedTemplate(varID)) {\r\n            let template: VE_Template = global_vars.getTemplate(varID);\r\n            assignment.setLeftTemplate(template);\r\n          }\r\n          else {\r\n            // \r\n            // if (VerySceneVariables.Variables.isCreatedExpression(varID)) {\r\n            //   VE_ErrorManager.Add(VE_Error.Error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.TotalString + \"*\", \"\"));\r\n            //   return false;\r\n            // }\r\n            // else if (VerySceneVariables.Variables.IsCreatedVariable(varID)) {\r\n            //   IVeryVar v = VerySceneVariables.Variables.GetVariable(varID);\r\n            //   assignment.SetLeft(v);\r\n            // }\r\n            // else {\r\n            //   VE_ErrorManager.Add(VE_Error.Error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.TotalString + \"*\", \"\"));\r\n            //   return false;\r\n            // }\r\n            VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*\", \"\"));\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n      return false;\r\n    }\r\n\r\n\r\n    // 2 1*2.*3*.*4.*.*5\r\n    varID = action_data.varValue.trim();\r\n\r\n    // \r\n    if (varID.startsWith(\"\\\"\") || varID.startsWith(\"'\") || varID.startsWith(\"\") || varID.startsWith(\"\")) {\r\n      assignment.setRightConst(varID.substring(1, varID.length - 2).trim());\r\n    }\r\n    else if (VE_StringFormat.isFormulaString(varID))  // \r\n    {\r\n      // Debug.LogError(varID);\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      StateConst.AssignmentFormulaCount++;\r\n      let localExp: IExpression = VE_Expressions.createLocalExpression(StateConst.AssignmentPrefix + StateConst.AssignmentFormulaCount.toString(), varID, project_name, object_id, errorInfo);\r\n      if (!errorInfo.isRight || !localExp) {\r\n        // errorInfo = \"\\n\" + errorInfo + \"\" + errorPos;\r\n        // return null;\r\n        VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\" + errorInfo, \"\"));\r\n        return false;\r\n      }\r\n      assignment.setRightVariable(new VeryExpression(localExp));\r\n    }\r\n    else {\r\n      if (varID.indexOf(StateConst.VARIABLE_SYMBOL) > -1)  // \r\n      {\r\n        if (varID.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n          let valArray: string[] = varID.split(StateConst.STATE_SEPARATOR);\r\n          for (let q: number = 0; q < valArray.length; q++) {\r\n            valArray[q] = valArray[q].trim();\r\n          }\r\n          // .* or *.*\r\n          if (valArray.length === 2) {\r\n            // *.*\r\n            if (valArray[0].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n              let templateVarID: string = valArray[0].substring(1);\r\n              varID = valArray[1].substring(1);\r\n              if (very_object.isCreatedTemplate(templateVarID)) {\r\n                let template: VE_Template = very_object.getTemplate(templateVarID);\r\n                if (template.varData.isCreatedVariable(varID) || template.dataSource.isCreatedFsm(varID)) {\r\n                  // \r\n                  assignment.setRightTemplateVariable(template, varID);\r\n                }\r\n                else {\r\n                  VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.***\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                if (global_vars.isCreatedTemplate(templateVarID)) {\r\n                  let template: VE_Template = global_vars.getTemplate(templateVarID);\r\n                  if (template.varData.isCreatedVariable(varID) || template.dataSource.isCreatedFsm(varID)) {\r\n                    // \r\n                    assignment.setRightTemplateVariable(template, varID);\r\n                  }\r\n                  else {\r\n                    VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.***\", \"\"));\r\n                    return false;\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.**\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n            }\r\n            // .*\r\n            else {\r\n              if (objects.isCreated(valArray[0])) {\r\n                let aObject: VeryEngineObject = objects.getVeryObject(valArray[0]);\r\n                varID = varID.substring(1);\r\n                let rightVar: Nullable<IVeryVar> = null;\r\n                let rightTemplate: Nullable<VE_Template> = null;\r\n                if (aObject.isCreatedExpression(varID)) {\r\n                  rightVar = new VeryExpression(aObject.getExpression(varID));\r\n                }\r\n                else if (aObject.isCreatedFsm(varID)) {\r\n                  rightVar = aObject.getFsm(varID).fsmVar;\r\n                }\r\n                else if (aObject.isCreatedVariable(varID)) {\r\n                  rightVar = aObject.getVariable(varID);\r\n                }\r\n                else if (aObject.isCreatedTemplate(varID)) {\r\n                  rightTemplate = aObject.getTemplate(varID);\r\n                }\r\n                else {\r\n                  VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*\", \"\"));\r\n                  return false;\r\n                }\r\n                // \r\n                if (rightVar !== null) {\r\n                  if (assignment.leftType === AssignType.Template) {\r\n                    VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n                    return false;\r\n                  }\r\n                  else if (assignment.leftType === AssignType.Variable) {\r\n                    if (VE_AssignmentTypeJudge.allow(assignment.leftVariable!, rightVar)) {\r\n                      assignment.setRightVariable(rightVar);\r\n                    }\r\n                    else {\r\n                      VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n                      return false;\r\n                    }\r\n                  }\r\n                  else {\r\n                    // \r\n                    assignment.setRightVariable(rightVar);\r\n                  }\r\n                }\r\n                else if (rightTemplate != null) {\r\n                  if (assignment.leftType === AssignType.Template) {\r\n                    assignment.setRightTemplate(rightTemplate);\r\n                  }\r\n                  else {\r\n                    VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n                    return false;\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          else if (valArray.length === 3)  // .*.*\r\n          {\r\n            // .*.*\r\n            if (valArray[0].startsWith(StateConst.STATE_SEPARATOR) || !valArray[1].startsWith(StateConst.STATE_SEPARATOR) || !valArray[2].startsWith(StateConst.STATE_SEPARATOR)) {\r\n              VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"1*2.*3*.*4.*.*\", \"\"));\r\n              return false;\r\n            }\r\n            else {\r\n              let templateVarID: string = valArray[1].substring(1);\r\n              varID = valArray[2].substring(1);\r\n              if (objects.isCreated(valArray[0])) {\r\n                let tObject: VeryEngineObject = objects.getVeryObject(valArray[0]);\r\n                if (tObject.isCreatedTemplate(templateVarID)) {\r\n                  let template: VE_Template = tObject.getTemplate(templateVarID);\r\n                  // \r\n                  if (template.dataSource.isCreatedFsm(varID) || template.varData.isCreatedVariable(varID)) {\r\n                    // \r\n                    assignment.setRightTemplateVariable(template, varID);\r\n                  }\r\n                  else {\r\n                    VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.*.**\", \"\"));\r\n                    return false;\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.**\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.*\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          else {\r\n            VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"1*2.*3*.*4.*.*\", \"\"));\r\n            return false;\r\n          }\r\n        }\r\n        else // *\r\n        {\r\n          varID = varID.substring(1);\r\n          let rightVar: Nullable<IVeryVar> = null;\r\n          let rightTemplate: Nullable<VE_Template> = null;\r\n          if (very_object.isCreatedExpression(varID)) {\r\n            rightVar = new VeryExpression(very_object.getExpression(varID));\r\n          }\r\n          else if (very_object.isCreatedFsm(varID)) {\r\n            rightVar = very_object.getFsm(varID).fsmVar;\r\n          }\r\n          else if (very_object.isCreatedVariable(varID)) {\r\n            rightVar = very_object.getVariable(varID);\r\n          }\r\n          else if (very_object.isCreatedTemplate(varID)) {\r\n            rightTemplate = very_object.getTemplate(varID);\r\n          }\r\n          else {\r\n            // \r\n            if (global_vars.isCreatedExpression(varID)) {\r\n              rightVar = new VeryExpression(global_vars.getExpression(varID));\r\n            }\r\n            else if (global_vars.isCreatedVariable(varID)) {\r\n              rightVar = global_vars.getVariable(varID);\r\n            }\r\n            else if (global_vars.isCreatedTemplate(varID)) {\r\n              rightTemplate = global_vars.getTemplate(varID);\r\n            }\r\n            else {\r\n              //\r\n              if (VerySceneVariables.Variables.isCreatedExpression(varID)) {\r\n                rightVar = new VeryExpression(VerySceneVariables.Variables.getExpression(varID));\r\n              }\r\n              else if (VerySceneVariables.Variables.isCreatedVariable(varID)) {\r\n                rightVar = VerySceneVariables.Variables.getVariable(varID);\r\n              }\r\n              else {\r\n                VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          // \r\n          if (rightVar != null) {\r\n            if (assignment.leftType === AssignType.Template) {\r\n              VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n              return false;\r\n            }\r\n            else if (assignment.leftType === AssignType.Variable) {\r\n              if (VE_AssignmentTypeJudge.allow(assignment.leftVariable!, rightVar)) {\r\n                assignment.setRightVariable(rightVar);\r\n              }\r\n              else {\r\n                VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n            else {\r\n              // \r\n              assignment.setRightVariable(rightVar);\r\n            }\r\n          }\r\n          else if (rightTemplate != null) {\r\n            if (assignment.leftType === AssignType.Template) {\r\n              assignment.setRightTemplate(rightTemplate);\r\n            }\r\n            else {\r\n              VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n              return false;\r\n            }\r\n          }\r\n          else {\r\n            VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n      else  // \r\n      {\r\n        if (assignment.leftType === AssignType.Template) {\r\n          if (varID.trim().toLowerCase() === \"null\") {\r\n            assignment.setRightNull();\r\n          }\r\n          else {\r\n            VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"null\", \"\"));\r\n            return false;\r\n          }\r\n        }\r\n        else if (assignment.leftType === AssignType.TemplateVariable) {\r\n          assignment.setRightConst(varID);\r\n        }\r\n        else {\r\n          if (assignment.leftVariable !== null) {\r\n            let errorInfo: ErrorInfo = new ErrorInfo();\r\n            let newValue: any = assignment.leftVariable.initValue(varID, errorInfo);\r\n            if (!errorInfo.isRight || !newValue) {\r\n              VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\" + errorInfo + \"\", \"\"));\r\n              return false;\r\n            }\r\n            else {\r\n              assignment.setRightConstValue(newValue);\r\n            }\r\n          }\r\n          else {\r\n            VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    let stateAction: VE_StateAction = new VE_StateAction();\r\n    stateAction.setAssignment(assignment);\r\n    state.addAction(stateAction);\r\n    return true;\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n  public static createInstance(project_name: string, object_id: string, var_id: string, template: VE_Template, object_name: string, error_info: ErrorInfo, destroy_on_create_new: boolean): VE_Template {\r\n\r\n\r\n    return template;\r\n  }\r\n\r\n\r\n}","export * from './loaderManager';\r\nexport * from './createInstance';","import { VeryTable } from '../index';\r\nimport { VE_Template, VE_Templates } from '../template';\r\nimport { VeryEngineObject, VE_Objects } from '../object';\r\nimport { VE_FsmData, VE_StateData, VE_StateTriggerData, VE_StateActionData } from '../dataSource';\r\nimport { VE_Manager } from '../manager';\r\nimport { VE_Variables, GameObject, VeryVarManager } from '../variables';\r\nimport { VE_StringFormat } from '../utility';\r\nimport { VE_ErrorManager, VE_Error } from '../global';\r\nimport { StateConst } from '../state';\r\nimport { CreateInstance } from './createInstance';\r\n\r\n\r\nexport enum AnalisysType { Global, Object, Template }\r\n\r\nexport class LoaderManager {\r\n\r\n  private _currentType: AnalisysType = AnalisysType.Global;\r\n\r\n  private _table!: VeryTable;\r\n\r\n  private _projectName: string = '';\r\n\r\n  private _lastFsmID: string = '';\r\n  private _activeTemplate: Nullable<VE_Template> = null;\r\n  private _activeObject: Nullable<VeryEngineObject> = null;\r\n  private _activeFsmData: Nullable<VE_FsmData> = null;\r\n  private _activeStateData: Nullable<VE_StateData> = null;\r\n\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public load(project_name: string, table: VeryTable): boolean {\r\n    this._projectName = project_name;\r\n    this._table = table;\r\n\r\n    //\r\n    VE_Manager.createProject(project_name);\r\n\r\n    let templates: VE_Templates = VE_Manager.templates(project_name);\r\n    let objects: VE_Objects = VE_Manager.objects(project_name);\r\n    let globalVars: VE_Variables = VE_Manager.variables(project_name);\r\n\r\n    // console.log(table);\r\n    if (table) {\r\n      for (let i: number = 0; i < table.RowCount; i++) {\r\n        // console.log(table.getRow(i));\r\n        // 1\r\n        if (table.getData(i, 0).startsWith(\"_\")) {\r\n          this._activeFsmData = null;\r\n          this._activeStateData = null;\r\n          this._currentType = AnalisysType.Template;\r\n          let templateID = table.getData(i, 0).replace(' ', '').substring(3);\r\n          // TODO: \r\n          if (templateID.indexOf(':') > -1 || templateID.indexOf('') > -1) {\r\n\r\n          } else {\r\n            if (!VE_StringFormat.isIDLegal(templateID)) {\r\n              VE_ErrorManager.add(VE_Error.error(table.pos(i, 0), \"\" + table.getData(i, 0) + \"\", table.ID))\r\n              return false;\r\n            }\r\n            if (!templates.isCreatedTemplate(templateID)) {\r\n              let template: VE_Template = new VE_Template(project_name, templateID);\r\n              templates.addTemplate(templateID, template);\r\n              this._activeTemplate = template;\r\n            } else {\r\n              VE_ErrorManager.add(VE_Error.error(table.pos(i, 0), \"\" + table.getData(i, 0) + \"\", table.ID))\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        // 2\r\n        else if (table.getData(i, 0) !== '') {\r\n          this._activeFsmData = null;\r\n          this._activeStateData = null;\r\n          this._currentType = AnalisysType.Object;\r\n          let objectID: string = table.getData(i, 0);\r\n          let objName: string = '';\r\n          if (objectID.indexOf('=') > -1) {\r\n            let nameArray: string[] = objectID.split('=');\r\n            if (nameArray.length === 2) {\r\n              objectID = nameArray[0].trim();\r\n              objName = nameArray[1].trim();\r\n            } else {\r\n              VE_ErrorManager.add(VE_Error.error(table.pos(i, 0), \"\" + table.getData(i, 0) + \"=\", table.ID))\r\n              return false;\r\n            }\r\n          }\r\n          if (!VE_StringFormat.isIDLegal(objectID)) {\r\n            VE_ErrorManager.add(VE_Error.error(table.pos(i, 0), \"\" + table.getData(i, 0) + \"\", table.ID))\r\n            return false;\r\n          }\r\n          // GameObject\r\n          let activeGameObject: Nullable<GameObject> = null;\r\n          if (objName === '') {\r\n            activeGameObject = new GameObject(`__${objectID}_Empty`);\r\n          } else {\r\n            activeGameObject = GameObject.find(objName);\r\n            if (activeGameObject === null) {\r\n              VE_ErrorManager.add(VE_Error.error(table.pos(i, 0), \"\" + objName + \"\", table.ID))\r\n              return false;\r\n            }\r\n          }\r\n          if (!objects.isCreated(objectID)) {\r\n            // \r\n            let tempObject: VeryEngineObject = new VeryEngineObject(project_name, objectID, activeGameObject);\r\n            objects.add(objectID, tempObject);\r\n            this._activeObject = tempObject;\r\n          } else {\r\n            VE_ErrorManager.add(VE_Error.error(table.pos(i, 0), \"\" + table.getData(i, 0) + \"\", table.ID))\r\n            return false;\r\n          }\r\n        }\r\n        // 3\r\n        else if (table.getData(i, 5) !== \"\" && table.getData(i, 1) === \"\" && table.getData(i, 2) === \"\" && table.getData(i, 3) === \"\" && table.getData(i, 4) === \"\" && table.getData(i, 6) === \"\" && table.getData(i, 7) === \"\" && table.getData(i, 8) === \"\") {\r\n          let paraData: string = table.getData(i, 5);\r\n          // \r\n          if (this._currentType === AnalisysType.Global) {\r\n            // \r\n            let varArray: string[] = VE_StringFormat.paraSegment(paraData);\r\n            if (varArray.length === 2 || varArray.length === 3) {\r\n              let varID: string = varArray[0].trim();\r\n              if (!VE_StringFormat.isIDLegal(varID)) {\r\n                VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              }\r\n              let paraArray: string[] = [varArray[1].trim()];\r\n              if (varArray.length === 2) {\r\n                paraArray[1] = '';\r\n              } else {\r\n                paraArray[1] = varArray[2].trim();\r\n              }\r\n              if (!globalVars.varData.isCreatedVariable(varID)) {\r\n                globalVars.varData.addVariable(varID, paraArray, table.pos(i, 5));\r\n              } else {\r\n                VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              }\r\n            } else {\r\n              VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n              return false;\r\n            }\r\n          }\r\n          // \r\n          else if (paraData.indexOf('=') > -1) {\r\n            let paraArray: string[] = paraData.split('=');\r\n            // \r\n            // \r\n            if (paraArray.length === 2 && paraArray[0].trim() === this._lastFsmID) {\r\n              if (this._activeFsmData === null) {\r\n                VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              } else {\r\n                let stateInfo: string[] = paraArray[1].trim().split(/,|/);\r\n                let stateIndex: number = StateConst.STATE_INDEX;\r\n                let stateData: Nullable<VE_StateData> = null;\r\n                if (stateInfo.length === 2) {\r\n                  stateInfo[0] = stateInfo[0].trim();\r\n                  stateInfo[1] = stateInfo[1].trim();\r\n                  if (stateInfo[1].startsWith('#')) {\r\n                    stateIndex = parseInt(stateInfo[1].substring(1));\r\n                    if (stateIndex === NaN) {\r\n                      VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"IDIDID=#ID\", table.ID))\r\n                      return false;\r\n                    }\r\n                  } else {\r\n                    VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"IDIDID=#ID\", table.ID))\r\n                    return false;\r\n                  }\r\n                }\r\n                stateData = new VE_StateData(this._activeFsmData, stateInfo[0].trim(), false, stateIndex);\r\n                stateData.rowIndex = i;\r\n                this._activeFsmData.addState(stateData);\r\n                this._activeStateData = stateData;\r\n              }\r\n            }\r\n            // \r\n            else {\r\n              let varArray: string[] = VE_StringFormat.paraSegment(paraData);\r\n              if (varArray.length === 3) {\r\n                let varID: string = varArray[0].trim();\r\n                if (!VE_StringFormat.isIDLegal(varID)) {\r\n                  VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                let para2Array: string[] = [varArray[1].trim(), varArray[2].trim()];\r\n                // \r\n                if (this._currentType === AnalisysType.Object) {\r\n                  if (this._activeObject!.varData.isCreatedVariable(varID)) {\r\n                    VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + this._activeObject!.objectID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  // \r\n                  if (this._activeObject!.dataSource.isCreatedFsm(varID)) {\r\n                    VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + this._activeObject!.objectID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  this._activeObject!.varData.addVariable(varID, para2Array, table.pos(i, 5));\r\n                }\r\n                else if (this._currentType === AnalisysType.Template) {\r\n                  if (this._activeTemplate!.varData.isCreatedVariable(varID)) {\r\n                    VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + this._activeTemplate!.templateID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  // \r\n                  if (this._activeTemplate!.dataSource.isCreatedFsm(varID)) {\r\n                    VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  this._activeTemplate!.varData.addVariable(varID, para2Array, table.pos(i, 5));\r\n                }\r\n                else {\r\n                  VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n              } else {\r\n                VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          // \r\n          else {\r\n            let varArray: string[] = VE_StringFormat.paraSegment(paraData);\r\n            if (varArray.length === 2 || varArray.length === 3) {\r\n              let varID: string = varArray[0].trim();\r\n              if (!VE_StringFormat.isIDLegal(varID)) {\r\n                VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              }\r\n              let paraArray: string[] = [varArray[1].trim()];\r\n              if (varArray.length === 2) {\r\n                paraArray[1] = '';\r\n              } else {\r\n                paraArray[1] = varArray[2].trim();\r\n              }\r\n              // \r\n              if (this._currentType === AnalisysType.Object) {\r\n                if (this._activeObject!.varData.isCreatedVariable(varID)) {\r\n                  VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + this._activeObject!.objectID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                // \r\n                if (this._activeObject!.dataSource.isCreatedFsm(varID)) {\r\n                  VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + this._activeObject!.objectID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                this._activeObject!.varData.addVariable(varID, paraArray, table.pos(i, 5));\r\n              }\r\n              else if (this._currentType === AnalisysType.Template) {\r\n                if (this._activeTemplate!.varData.isCreatedVariable(varID)) {\r\n                  VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + this._activeTemplate!.templateID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                // \r\n                if (this._activeTemplate!.dataSource.isCreatedFsm(varID)) {\r\n                  VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + this._activeTemplate!.templateID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                this._activeTemplate!.varData.addVariable(varID, paraArray, table.pos(i, 5));\r\n              }\r\n              else {\r\n                VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              }\r\n            } else {\r\n              VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        // 4 +  +  +  + \r\n        else {\r\n          // \r\n          if (table.getData(i, 5) !== '') {\r\n            let paraData: string = table.getData(i, 5);\r\n            // \r\n            if (paraData.indexOf('=') > -1) {\r\n              let stateArray: string[] = paraData.split('=');\r\n              let fsmID: string = stateArray[0].trim();\r\n              // \r\n              if (stateArray.length === 2 && fsmID === this._lastFsmID) {\r\n                if (this._activeFsmData === null) {\r\n                  VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                } else {\r\n                  let stateInfo: string[] = stateArray[1].trim().split(/,|/);\r\n                  let stateIndex: number = StateConst.STATE_INDEX;\r\n                  let stateData: Nullable<VE_StateData> = null;\r\n                  if (stateInfo.length === 2) {\r\n                    stateInfo[0] = stateInfo[0].trim();\r\n                    stateInfo[1] = stateInfo[1].trim();\r\n                    if (stateInfo[1].startsWith('#')) {\r\n                      stateIndex = parseInt(stateInfo[1].substring(1));\r\n                      if (stateIndex === NaN) {\r\n                        VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"IDIDID=#ID\", table.ID))\r\n                        return false;\r\n                      }\r\n                    } else {\r\n                      VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"IDIDID=#ID\", table.ID))\r\n                      return false;\r\n                    }\r\n                  }\r\n                  stateData = new VE_StateData(this._activeFsmData, stateInfo[0].trim(), false, stateIndex);\r\n                  stateData.rowIndex = i;\r\n                  this._activeFsmData.addState(stateData);\r\n                  this._activeStateData = stateData;\r\n                }\r\n              } else {\r\n                VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\" + fsmID + \"\", table.ID))\r\n                return false;\r\n              }\r\n            }\r\n            // \r\n            else {\r\n              let varArray: string[] = VE_StringFormat.paraSegment(paraData);\r\n              if (varArray.length === 2 || varArray.length === 3 || varArray.length === 4) {\r\n                let fsmID: string = varArray[0].trim();\r\n                if (!VE_StringFormat.isIDLegal(fsmID)) {\r\n                  VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                this._lastFsmID = fsmID;\r\n                let paraArray: string[] = [varArray[1].trim()];\r\n                if (varArray.length === 2) {\r\n                  paraArray[1] = '';\r\n                } else {\r\n                  paraArray[1] = varArray[2].trim();\r\n                }\r\n                let stateIndex: number = StateConst.STATE_INDEX;\r\n                if (varArray.length === 4) {\r\n                  if (varArray[3].startsWith('#')) {\r\n                    stateIndex = parseInt(varArray[3].substring(1));\r\n                    if (stateIndex === NaN) {\r\n                      VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + varArray[3] + \"IDIDID#ID\", table.ID))\r\n                      return false;\r\n                    }\r\n                  } else {\r\n                    VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + varArray[3] + \"IDIDID#ID\", table.ID))\r\n                    return false;\r\n                  }\r\n                }\r\n                // \r\n                if (this._currentType === AnalisysType.Object) {\r\n                  if (this._activeObject!.varData.isCreatedVariable(fsmID)) {\r\n                    VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + this._activeObject!.objectID + \"\" + fsmID + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  // \r\n                  if (this._activeObject!.dataSource.isCreatedFsm(fsmID)) {\r\n                    VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + this._activeObject!.objectID + \"\" + fsmID + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  // \r\n                  this._activeObject!.dataSource.createFsm(fsmID, table.pos(i, 5));\r\n                  this._activeFsmData = this._activeObject!.dataSource.getFsmData(fsmID);\r\n                  // \r\n                  if (VeryVarManager.hasVarType(paraArray[0])) {\r\n                    this._activeFsmData.initFsm(paraArray[0], paraArray[1]);\r\n                    // \r\n                    let stateData: VE_StateData = new VE_StateData(this._activeFsmData, paraArray[1], true, stateIndex);\r\n                    stateData.rowIndex = i;\r\n                    this._activeFsmData.addState(stateData);\r\n                    this._activeStateData = stateData;\r\n                  } else {\r\n                    VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + this._activeObject!.objectID + \"\" + fsmID + \"\" + paraArray[0] + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                }\r\n                else if (this._currentType === AnalisysType.Template) {\r\n                  if (this._activeTemplate!.varData.isCreatedVariable(fsmID)) {\r\n                    VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + this._activeTemplate!.templateID + \"\" + fsmID + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  // \r\n                  if (this._activeTemplate!.dataSource.isCreatedFsm(fsmID)) {\r\n                    VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + this._activeTemplate!.templateID + \"\" + fsmID + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  // \r\n                  this._activeTemplate!.dataSource.createFsm(fsmID, table.pos(i, 5));\r\n                  this._activeFsmData = this._activeTemplate!.dataSource.getFsmData(fsmID);\r\n                  // \r\n                  if (VeryVarManager.hasVarType(paraArray[0])) {\r\n                    this._activeFsmData.initFsm(paraArray[0], paraArray[1]);\r\n                    // \r\n                    let stateData: VE_StateData = new VE_StateData(this._activeFsmData, paraArray[1], true, stateIndex);\r\n                    stateData.rowIndex = i;\r\n                    this._activeFsmData.addState(stateData);\r\n                    this._activeStateData = stateData;\r\n                  } else {\r\n                    VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + this._activeTemplate!.objectID + \"\" + fsmID + \"\" + paraArray[0] + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n              } else {\r\n                VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n\r\n          // \r\n          if (table.getData(i, 2) !== '') {\r\n            if (this._activeFsmData === null || this._activeStateData === null) {\r\n              VE_ErrorManager.add(VE_Error.error(table.pos(i, 2), \"\" + table.getData(i, 2) + \"\", table.ID))\r\n              return false;\r\n            }\r\n            // DataSource\r\n            let triggerID: string = table.getData(i, 2);\r\n            if (!VE_StringFormat.isIDLegal(triggerID)) {\r\n              VE_ErrorManager.add(VE_Error.error(table.pos(i, 2), \"\" + table.getData(i, 2) + \"\", table.ID))\r\n              return false;\r\n            }\r\n            if (table.getData(i, 3) !== '') {\r\n              if (!this._activeFsmData!.dataSource.isCreatedTrigger(triggerID)) {\r\n                this._activeFsmData!.dataSource.addTrigger(triggerID, VE_StringFormat.paraSegment(table.getData(i, 3)), table.pos(i, 2));\r\n              } else {\r\n                VE_ErrorManager.add(VE_Error.error(table.pos(i, 2), \"\" + table.getData(i, 2) + \"\", table.ID))\r\n                return false;\r\n              }\r\n            }\r\n\r\n            // StateData\r\n            let triggerData: VE_StateTriggerData = new VE_StateTriggerData(triggerID);\r\n            this._activeStateData.addTrigger(triggerData, table.pos(i, 2));\r\n\r\n            // \r\n            if (table.getData(i, 1) !== '') {\r\n              triggerData.logicalSwitch = table.getData(i, 1);\r\n            }\r\n\r\n            // \r\n            if (table.getData(i, 4) !== '') {\r\n              triggerData.logicalExp = table.getData(i, 4);\r\n            }\r\n          } else {\r\n            // \r\n            if (table.getData(i, 1) !== '') {\r\n              VE_ErrorManager.add(VE_Error.error(table.pos(i, 1), \"\" + table.getData(i, 1) + \"\", table.ID))\r\n              return false;\r\n            }\r\n\r\n            // \r\n            if (table.getData(i, 4) !== '') {\r\n              if (this._activeFsmData === null || this._activeStateData === null) {\r\n                VE_ErrorManager.add(VE_Error.error(table.pos(i, 4), \"\" + table.getData(i, 4) + \"\", table.ID))\r\n                return false;\r\n              }\r\n              if (this._activeStateData.logicalExp !== '') {\r\n                VE_ErrorManager.add(VE_Error.error(table.pos(i, 4), \"\" + table.getData(i, 4) + \"12\", table.ID))\r\n                return false;\r\n              } else {\r\n                this._activeStateData.logicalExp = table.getData(i, 4);\r\n              }\r\n            }\r\n\r\n            if (table.getData(i, 3) !== '') {\r\n              VE_ErrorManager.add(VE_Error.warning(table.pos(i, 3), \"\" + table.getData(i, 3) + \"\", table.ID))\r\n            }\r\n          }\r\n\r\n          // \r\n          if (table.getData(i, 6) !== '') {\r\n            if (this._activeFsmData === null || this._activeStateData === null) {\r\n              VE_ErrorManager.add(VE_Error.error(table.pos(i, 6), \"\" + table.getData(i, 6) + \"\", table.ID))\r\n              return false;\r\n            }\r\n            // \r\n            let tempStr: string = table.getData(i, 6).toLowerCase();\r\n            if (tempStr.startsWith('log(') || tempStr.startsWith('log') || tempStr.startsWith('') || tempStr.startsWith('(')) {\r\n              let newActionID: string = project_name + '___' + StateConst.LogCount++;\r\n              let actionData: VE_StateActionData = new VE_StateActionData(newActionID, 'true', 'false');\r\n              this._activeStateData.addAction(actionData, table.pos(i, 6));\r\n              let actionPara: string = table.getData(i, 6).substring(4);\r\n              if (tempStr.startsWith('')) {\r\n                actionPara = table.getData(i, 6).substring(3);\r\n              }\r\n              this._activeFsmData.dataSource.addAction(newActionID, ['', '', actionPara.substring(0, actionPara.length - 1)], ['false', 'false'], table.pos(i, 6));\r\n              if (table.getData(i, 7) !== '') {\r\n                VE_ErrorManager.add(VE_Error.warning(table.pos(i, 7), \"\" + table.getData(i, 7) + \"\", table.ID))\r\n              }\r\n            }\r\n            else if (tempStr.startsWith('error(') || tempStr.startsWith('error') || tempStr.startsWith('') || tempStr.startsWith('(')) {\r\n              let newActionID: string = project_name + '___' + StateConst.LogCount++;\r\n              let actionData: VE_StateActionData = new VE_StateActionData(newActionID, 'true', 'false');\r\n              this._activeStateData.addAction(actionData, table.pos(i, 6));\r\n              let actionPara: string = table.getData(i, 6).substring(6);\r\n              if (tempStr.startsWith('')) {\r\n                actionPara = table.getData(i, 6).substring(3);\r\n              }\r\n              this._activeFsmData.dataSource.addAction(newActionID, ['', '', actionPara.substring(0, actionPara.length - 1)], ['false', 'false'], table.pos(i, 6));\r\n              if (table.getData(i, 7) !== '') {\r\n                VE_ErrorManager.add(VE_Error.warning(table.pos(i, 7), \"\" + table.getData(i, 7) + \"\", table.ID))\r\n              }\r\n            }\r\n            else if (tempStr.startsWith('warn(') || tempStr.startsWith('warn') || tempStr.startsWith('') || tempStr.startsWith('(')) {\r\n              let newActionID: string = project_name + '___' + StateConst.LogCount++;\r\n              let actionData: VE_StateActionData = new VE_StateActionData(newActionID, 'true', 'false');\r\n              this._activeStateData.addAction(actionData, table.pos(i, 6));\r\n              let actionPara: string = table.getData(i, 6).substring(5);\r\n              if (tempStr.startsWith('')) {\r\n                actionPara = table.getData(i, 6).substring(3);\r\n              }\r\n              this._activeFsmData.dataSource.addAction(newActionID, ['', '', actionPara.substring(0, actionPara.length - 1)], ['false', 'false'], table.pos(i, 6));\r\n              if (table.getData(i, 7) !== '') {\r\n                VE_ErrorManager.add(VE_Error.warning(table.pos(i, 7), \"\" + table.getData(i, 7) + \"\", table.ID))\r\n              }\r\n            }\r\n            else if (table.getData(i, 6).indexOf('=') > -1) {\r\n              if (table.getData(i, 7) !== '') {\r\n                VE_ErrorManager.add(VE_Error.warning(table.pos(i, 7), \"\" + table.getData(i, 7) + \"\", table.ID))\r\n              }\r\n\r\n              // = \r\n              let equalIndex: number = table.getData(i, 6).indexOf('=');\r\n              let actionData: VE_StateActionData = new VE_StateActionData('');\r\n              actionData.setAssignmentAction(table.getData(i, 6), table.getData(i, 6).substring(0, equalIndex).trim(), table.getData(i, 6).substring(equalIndex + 1).trim());\r\n              this._activeStateData.addAction(actionData, table.pos(i, 6));\r\n            }\r\n            else {\r\n              // ID\r\n              let actionArray: string[] = VE_StringFormat.paraSegment(table.getData(i, 6));\r\n              if (actionArray.length === 2 || actionArray.length === 3 || actionArray.length === 4) {\r\n                let actionData: VE_StateActionData;\r\n                if (actionArray.length === 2) {\r\n                  actionData = new VE_StateActionData(actionArray[0], actionArray[1]);\r\n                } else if (actionArray.length === 3) {\r\n                  actionData = new VE_StateActionData(actionArray[0], actionArray[1], actionArray[2]);\r\n                } else {\r\n                  actionData = new VE_StateActionData(actionArray[0], actionArray[1], actionArray[2], actionArray[3]);\r\n                }\r\n                this._activeStateData.addAction(actionData, table.pos(i, 6));\r\n              } else {\r\n                VE_ErrorManager.add(VE_Error.error(table.pos(i, 6), \"\" + table.getData(i, 6) + \"IDboolbool\", table.ID))\r\n                return false;\r\n              }\r\n\r\n              // \r\n              if (table.getData(i, 7) !== '') {\r\n                if (!VE_StringFormat.isIDLegal(actionArray[0])) {\r\n                  VE_ErrorManager.add(VE_Error.error(table.pos(i, 6), \"\" + table.getData(i, 6) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                if (!this._activeFsmData.dataSource.isCreatedAction(actionArray[0])) {\r\n                  if (actionArray.length == 2) {\r\n                    this._activeFsmData.dataSource.addAction(actionArray[0], VE_StringFormat.paraSegment(table.getData(i, 7)), [actionArray[1], 'false'], table.pos(i, 6));\r\n                  } else {\r\n                    this._activeFsmData.dataSource.addAction(actionArray[0], VE_StringFormat.paraSegment(table.getData(i, 7)), [actionArray[1], actionArray[2]], table.pos(i, 6));\r\n                  }\r\n                } else {\r\n                  VE_ErrorManager.add(VE_Error.error(table.pos(i, 6), \"\" + table.getData(i, 6) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n              }\r\n            }\r\n          } else {\r\n            if (table.getData(i, 7) !== '') {\r\n              VE_ErrorManager.add(VE_Error.warning(table.pos(i, 7), \"\" + table.getData(i, 7) + \"\", table.ID))\r\n            }\r\n          }\r\n\r\n          // \r\n          if (table.getData(i, 8) !== '') {\r\n            if (this._activeFsmData === null || this._activeStateData === null) {\r\n              VE_ErrorManager.add(VE_Error.error(table.pos(i, 8), \"\" + table.getData(i, 8) + \"\", table.ID))\r\n              return false;\r\n            }\r\n            this._activeStateData!.addAssociatedState(table.getData(i, 8), table.pos(i, 8));\r\n          }\r\n        }\r\n      }\r\n\r\n      return CreateInstance.createProject(project_name);\r\n    } else {\r\n      VE_ErrorManager.add(VE_Error.error('', '', 'null'));\r\n      return false;\r\n    }\r\n\r\n  }\r\n\r\n\r\n}","export * from './projects';\r\nexport * from './manager';\r\nexport * from './reset';","import { VE_Projects } from \"./projects\";\r\nimport { VE_Objects } from \"../object\";\r\nimport { VE_Templates } from \"../template\";\r\nimport { VE_Variables } from \"../variables\";\r\nimport { VE_VariableData } from \"../dataSource\";\r\n\r\nexport class VE_Manager {\r\n\r\n  public static get projects(): VE_Projects {\r\n    if(this._projects === null) {\r\n      this._projects = new VE_Projects();\r\n    }\r\n    return this._projects;\r\n  }\r\n  private static _projects: VE_Projects | null = null; \r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public static createProject(project_name: string): void {\r\n    if(!VE_Manager.projects.isCreatedObjects(project_name)) {\r\n      VE_Manager.projects.addObjects(project_name, new VE_Objects(project_name));\r\n    }\r\n    if(!VE_Manager.projects.isCreatedTemplates(project_name)) {\r\n      VE_Manager.projects.addTemplates(project_name, new VE_Templates(project_name));\r\n    }\r\n    if(!VE_Manager.projects.isCreatedVariables(project_name)) {\r\n      VE_Manager.projects.addVariables(project_name, new VE_Variables(project_name));\r\n    }\r\n  }\r\n\r\n  public static globalVarData(project_name: string): VE_VariableData {\r\n    if(!VE_Manager.projects.isCreatedGlobals(project_name)) {\r\n      VE_Manager.projects.addVariables(project_name, new VE_Variables(project_name));\r\n    }\r\n    return VE_Manager.projects.getGlobalVars(project_name);\r\n  }\r\n\r\n  public static templates(project_name: string): VE_Templates {\r\n    if(!VE_Manager.projects.isCreatedTemplates(project_name)) {\r\n      VE_Manager.projects.addTemplates(project_name, new VE_Templates(project_name));\r\n    }\r\n    return VE_Manager.projects.getTemplates(project_name);\r\n  }\r\n\r\n  public static variables(project_name: string): VE_Variables {\r\n    if(!VE_Manager.projects.isCreatedVariables(project_name)) {\r\n      VE_Manager.projects.addVariables(project_name, new VE_Variables(project_name));\r\n    }\r\n    return VE_Manager.projects.getVariables(project_name);\r\n  }\r\n\r\n  public static objects(project_name: string): VE_Objects {\r\n    if(!VE_Manager.projects.isCreatedObjects(project_name)) {\r\n      VE_Manager.projects.addObjects(project_name, new VE_Objects(project_name));\r\n    }\r\n    return VE_Manager.projects.getObjects(project_name);\r\n  }\r\n\r\n  public static clear(): void {\r\n    this._projects = null;\r\n  }\r\n\r\n  public static clearProject(project_name: string): void {\r\n    VE_Manager.clearProject(project_name);\r\n  }\r\n\r\n\r\n}","import { VE_Objects } from \"../object\";\r\nimport { VE_VariableData } from \"../dataSource\";\r\nimport { VE_Templates } from \"../template\";\r\nimport { VE_Variables } from \"../variables\";\r\n\r\n\r\nexport class VE_Projects {\r\n\r\n  private _objects: { [key: string]: VE_Objects } = {};\r\n  private _variables: { [key: string]: VE_Variables } = {};\r\n  private _templates: { [key: string]: VE_Templates } = {};\r\n\r\n  public projects: string[] = [];\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public isCreatedObjects(project_name: string): boolean {\r\n    if(this._objects[project_name]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addObjects(project_name: string, objects: VE_Objects): void {\r\n    this._objects[project_name] = objects;\r\n  }\r\n\r\n  public getObjects(project_name: string): VE_Objects {\r\n    return this._objects[project_name];\r\n  }\r\n\r\n  public isCreatedVariables(project_name: string): boolean {\r\n    if(this._variables[project_name]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addVariables(project_name: string, variables: VE_Variables): void {\r\n    this._variables[project_name] = variables;\r\n  }\r\n\r\n  public getVariables(project_name: string): VE_Variables {\r\n    return this._variables[project_name];\r\n  }\r\n\r\n  public isCreatedTemplates(project_name: string): boolean {\r\n    if(this._templates[project_name]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTemplates(project_name: string, templates: VE_Templates): void {\r\n    this._templates[project_name] = templates;\r\n  }\r\n\r\n  public getTemplates(project_name: string): VE_Templates {\r\n    return this._templates[project_name];\r\n  }\r\n\r\n  public isCreatedGlobals(project_name: string): boolean {\r\n    if(this._variables[project_name]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getGlobalVars(project_name: string): VE_VariableData {\r\n    return this._variables[project_name].varData;\r\n  }\r\n\r\n  public clear(): void {\r\n    // TODO\r\n    this._objects = {};\r\n    this._templates = {};\r\n    this._variables = {};\r\n  }\r\n\r\n  public clearPorject(project_name: string): void {\r\n    delete this._objects[project_name];\r\n    delete this._templates[project_name];\r\n    delete this._variables[project_name];\r\n  }\r\n\r\n  public sleep(): void {\r\n    \r\n  }\r\n\r\n\r\n}","export class VE_Reset {\r\n  constructor() {\r\n\r\n  }\r\n}","export * from './veryengineObject';\r\nexport * from './objects';","import { VeryEngineObject } from \"./veryengineObject\";\r\nimport { ArrayUtility } from \"../utility\";\r\n\r\nexport class VE_Objects {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  private _objectIDs: string[] = [];\r\n  private _objectDics: { [key: string]: VeryEngineObject } = {};\r\n\r\n  public get count(): number {\r\n    return this._objectIDs.length;\r\n  }\r\n\r\n  constructor(project_name: string) {\r\n    this._projectName = project_name;\r\n  }\r\n\r\n  public isCreated(object_id: string): boolean {\r\n    if (this._objectDics[object_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public add(object_id: string, very_object: VeryEngineObject): void {\r\n    if (!this.isCreated(object_id)) {\r\n      this._objectIDs.push(object_id);\r\n      this._objectDics[object_id] = very_object;\r\n    }\r\n  }\r\n\r\n  public getObjectID(index: number): string {\r\n    if(index >= 0 && index < this._objectIDs.length) {\r\n      return this._objectIDs[index];\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n\r\n  public getVeryObject(object_id: string): VeryEngineObject {\r\n    return this._objectDics[object_id];\r\n  }\r\n\r\n  public unloadObject(object_id: string): void {\r\n    // this._objectIDs.re\r\n    ArrayUtility.remove(this._objectIDs, object_id);\r\n    delete this._objectDics.object_id;\r\n\r\n  }\r\n\r\n  public clear(): void {\r\n    for(let i: number = 0; i < this._objectIDs.length; i++) {\r\n      let tempObject = this._objectDics[this._objectIDs[i]];\r\n      if(tempObject) {\r\n        tempObject.clear();\r\n      }\r\n    }\r\n    this._objectIDs = [];\r\n    this._objectDics = {};\r\n  }\r\n}","import { GameObject, IVeryVar } from \"../variables\";\r\nimport { IExpression } from \"../expression\";\r\nimport { VE_ActionBehaviour } from \"../action\";\r\nimport { VE_TriggerBehaviour } from \"../trigger\";\r\nimport { VE_Fsm, VE_State } from \"../state\";\r\nimport { VE_Template } from \"../template\";\r\nimport { VE_DataSource, VE_VariableData } from \"../dataSource\";\r\n\r\nexport class VeryEngineObject {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = '';\r\n\r\n  public gameObject: GameObject = new GameObject('');\r\n\r\n  private _variables: { [key: string]: IVeryVar } = {};\r\n  private _expressions: { [key: string]: IExpression } = {};\r\n  private _actions: { [key: string]: VE_ActionBehaviour } = {};\r\n  private _triggers: { [key: string]: VE_TriggerBehaviour } = {};\r\n  private _fsms: { [key: string]: VE_Fsm } = {};\r\n  private _templates: { [key: string]: VE_Template } = {};\r\n\r\n  public dataSource: VE_DataSource;\r\n\r\n  public varData: VE_VariableData;\r\n\r\n\r\n\r\n  constructor(project_name: string, object_id: string, game_object: GameObject) {\r\n    this._projectName = projectName;\r\n    this._objectID = object_id;\r\n    this.gameObject = game_object;\r\n    this.dataSource = new VE_DataSource(project_name, object_id, false);\r\n    this.varData = new VE_VariableData(project_name);\r\n  }\r\n\r\n  public isCreatedFsm(fsm_id: string): boolean {\r\n    if (this._fsms[fsm_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addFsm(fsm_id: string, fsm: VE_Fsm): void {\r\n    this._fsms[fsm_id] = fsm;\r\n  }\r\n\r\n  public getFsm(fsm_id: string): VE_Fsm {\r\n    return this._fsms[fsm_id];\r\n  }\r\n\r\n  public isCreatedTrigger(trigger_id: string): boolean {\r\n    if (this._triggers[trigger_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTrigger(trigger_id: string, trigger: VE_TriggerBehaviour): void {\r\n    this._triggers[trigger_id] = trigger;\r\n  }\r\n\r\n  public getTrigger(trigger_id: string): VE_TriggerBehaviour {\r\n    return this._triggers[trigger_id];\r\n  }\r\n\r\n  public isCreatedAction(action_id: string): boolean {\r\n    if (this._actions[action_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addAction(action_id: string, action: VE_ActionBehaviour): void {\r\n    this._actions[action_id] = action;\r\n  }\r\n\r\n  public getAction(action_id: string): VE_ActionBehaviour {\r\n    return this._actions[action_id];\r\n  }\r\n\r\n  public isCreatedVariable(var_id: string): boolean {\r\n    if (this._variables[var_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addVariable(var_id: string, variable: IVeryVar): void {\r\n    this._variables[var_id] = variable;\r\n  }\r\n\r\n  public getVariable(var_id: string): IVeryVar {\r\n    return this._variables[var_id];\r\n  }\r\n\r\n  public isCreatedExpression(exp_id: string): boolean {\r\n    if (this._expressions[exp_id]) {\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public addExpression(exp_id: string, expression: IExpression): void {\r\n    this._expressions[exp_id] = expression;\r\n  }\r\n\r\n  public getExpression(exp_id: string): IExpression {\r\n    return this._expressions[exp_id];\r\n  }\r\n\r\n  public isCreatedTemplate(template_id: string): boolean {\r\n    if (this._templates[template_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTemplate(template_id: string, template: VE_Template): void {\r\n    this._templates[template_id] = template;\r\n  }\r\n\r\n  public getTemplate(template_id: string): VE_Template {\r\n    return this._templates[template_id];\r\n  }\r\n\r\n  public isCreatedVar(var_id: string): boolean {\r\n    if (this._variables[var_id] || this._expressions[var_id] || this._templates[var_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // getState(fsm_id: string, index: number): VE_State {\r\n\r\n  // }\r\n\r\n  unload(): void { }\r\n\r\n  // setUnloadCallback(callback): void {}\r\n\r\n\r\n\r\n\r\n  public clear(): void {\r\n\r\n    if (this.dataSource) {\r\n      this.dataSource.clear();\r\n    }\r\n    if (this.varData) {\r\n      this.varData.clear();\r\n    }\r\n    this._variables = {};\r\n    this._expressions = {};\r\n\r\n    if (this._templates) {\r\n      Object.keys(this._templates).forEach(key => {\r\n        this._templates[key].clear();\r\n      })\r\n      this._templates = {};\r\n    }\r\n\r\n    this._fsms = {};\r\n\r\n    if (this._actions) {\r\n      Object.keys(this._actions).forEach(key => {\r\n        this._actions[key].destroy();\r\n      })\r\n      this._actions = {};\r\n    }\r\n\r\n    if (this._triggers) {\r\n      Object.keys(this._triggers).forEach(key => {\r\n        this._triggers[key].destroy();\r\n      })\r\n      this._triggers = {};\r\n    }\r\n  }\r\n\r\n\r\n}","export * from './verySceneVariables';","import { VE_Variables } from \"../variables\";\r\n\r\nexport class VerySceneVariables {\r\n\r\n  public static get Variables(): VE_Variables {\r\n    if(VerySceneVariables._variables === null) {\r\n      VerySceneVariables._variables = new VE_Variables('__scene_varibale__');\r\n    }\r\n    return VerySceneVariables._variables;\r\n  }\r\n  private static _variables: Nullable<VE_Variables> = null;\r\n\r\n  public static get HasLoaded(): boolean {\r\n    return this._hasLoaded;\r\n  }\r\n  private static _hasLoaded: boolean = false;\r\n\r\n  public static initIfNeeded(): void {\r\n    if(!this._hasLoaded) {\r\n      console.log('TODO: ');\r\n    }\r\n  }\r\n}","import { VE_State } from \"./state\";\r\nimport { AssociatedFsmType } from \"../enum\";\r\nimport { VE_Template } from \"../template\";\r\n\r\nexport class VE_AssociatedState {\r\n\r\n  private _types: AssociatedFsmType[] = [];\r\n  private _indexs: number[] = [];\r\n\r\n  private _numberIndex: { [key: number]: number } = {};\r\n  private _states: { [key: number]: VE_State } = {};\r\n  private _templates: { [key: number]: VE_Template } = {};\r\n  private _templateIDs: { [key: number]: string } = {};\r\n\r\n  public get FromState(): VE_State {\r\n    return this._fromState;\r\n  }\r\n  private _fromState: VE_State;\r\n\r\n  constructor(from_state: VE_State) {\r\n    this._fromState = from_state;\r\n  }\r\n  \r\n  public add(state: VE_State, index: number): void {\r\n    this._types.push(AssociatedFsmType.Object);\r\n    let key: number = this._types.length;\r\n    this._indexs.push(key);\r\n    this._numberIndex[key] = index;\r\n    this._states[key] = state;\r\n  }\r\n\r\n  public addTemplate(template: VE_Template, fsm_id: string, index: number): void {\r\n    this._types.push(AssociatedFsmType.Object);\r\n    let key: number = this._types.length;\r\n    this._indexs.push(key);\r\n    this._numberIndex[key] = index;\r\n    this._templates[key] = template;\r\n    this._templateIDs[key] = fsm_id;\r\n  }\r\n\r\n  public connect(): void {\r\n\r\n  }\r\n\r\n\r\n}","import { Dictionary } from \"../utility/dictionary\";\r\nimport { VE_State } from \"./state\";\r\nimport { Time } from \"../global\";\r\nimport { StateConst } from \"./stateConst\";\r\nimport { IVeryVar, VeryString } from \"../variables\";\r\nimport { VeryEngineObject } from \"../object\";\r\n\r\nexport class VE_Fsm {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  public get ID(): string {\r\n    return this._id;\r\n  }\r\n  private _id: string = '';\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = '';\r\n\r\n  public get fsmID(): string {\r\n    return this._fsmID;\r\n  }\r\n  private _fsmID: string = '';\r\n\r\n  public get fsmVar(): IVeryVar {\r\n    return this._fsmVar;\r\n  }\r\n  private _fsmVar: IVeryVar;\r\n\r\n  public get VeryObject(): VeryEngineObject {\r\n    return this._veryObject;\r\n  }\r\n  private _veryObject: VeryEngineObject;\r\n\r\n  private _stateDics: Dictionary<number, VE_State> = new Dictionary<number, VE_State>();\r\n  private _states: VE_State[] = [];\r\n\r\n  public get count(): number {\r\n    return this._states.length;\r\n  }\r\n\r\n  private _frameCount: number = -1;\r\n  private _triggerIDs: string[] = [];\r\n\r\n  constructor(project_name: string, object_id: string, fsm_id: string, fsm_variable: IVeryVar, very_object: VeryEngineObject) {\r\n    this._projectName = project_name;\r\n    this._objectID = object_id;\r\n    this._fsmID = fsm_id;\r\n    this._fsmVar = fsm_variable;\r\n    this._veryObject = very_object;\r\n  }\r\n\r\n  public isCreatedState(state_index: number): boolean {\r\n    return this._stateDics.ContainsKey(state_index);\r\n  }\r\n\r\n  public addState(state: VE_State, state_index: number): void {\r\n    if (!this._stateDics.ContainsKey(state_index)) {\r\n      this._stateDics.Add(state_index, state);\r\n      this._states.push(state);\r\n    }\r\n  }\r\n\r\n  public getState(state_index: number): Nullable<VE_State> {\r\n    return this._stateDics.GetValue(state_index);\r\n  }\r\n\r\n  public removeState(state_index: number): boolean {\r\n    if (this.isCreatedState(state_index)) {\r\n      this._stateDics.Remove(state_index);\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public receiveEvent(trigger_id: string): boolean {\r\n    if (Time.frameCount != this._frameCount) {\r\n      this._frameCount = Time.frameCount;\r\n      this._triggerIDs = [];\r\n      this._triggerIDs.push(trigger_id);\r\n      return true;\r\n    } else {\r\n      if (trigger_id.startsWith(StateConst.ASSOCIATED_STATE_PREFIX)) {\r\n        // console.log(`ID: ${trigger_id} Return True`);\r\n        return true;\r\n      } else {\r\n        if (this._triggerIDs.indexOf(trigger_id) !== -1) {\r\n          return false;\r\n        } else {\r\n          this._triggerIDs.push(trigger_id);\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n}","export * from './state';\r\nexport * from './fsm';\r\nexport * from './stateAction';\r\nexport * from './associatedState';\r\nexport * from './stateConst';","import { VE_Fsm } from \"./fsm\";\r\nimport { VE_StateAction } from \"./stateAction\";\r\nimport { VE_AssociatedState } from \"./associatedState\";\r\nimport { AssignmentType, StateActionType } from \"../enum\";\r\nimport { VE_Template } from \"../template\";\r\nimport { IVeryVar } from \"../variables\";\r\nimport { IExpression } from \"../expression\";\r\nimport { VE_SequenceActions, VE_Assignment } from \"../action\";\r\n\r\nexport class VE_State {\r\n  public get Fsm(): VE_Fsm {\r\n    return this._fsm;\r\n  }\r\n  private _fsm: VE_Fsm;\r\n\r\n  public get isInitialValue(): boolean {\r\n    return this._isInitialValue;\r\n  }\r\n  private _isInitialValue: boolean = false;\r\n\r\n  public get Value(): any {\r\n    return this._value;\r\n  }\r\n  private _value: any = '';\r\n\r\n  private _assignmentType: AssignmentType = AssignmentType.Const;\r\n\r\n  public get isTemplateVar(): boolean {\r\n    return this._isTemplateVar\r\n  }\r\n  private _isTemplateVar: boolean = false;\r\n\r\n  private _template: Nullable<VE_Template> = null;\r\n  private _varID: string = '';\r\n  private _templateVar: Nullable<IVeryVar> = null;\r\n  private _assignmentStr: string = '';\r\n\r\n  public get logicalExpression(): Nullable<IExpression> {\r\n    return this._logicalExpression;\r\n  }\r\n  private _logicalExpression: Nullable<IExpression> = null;\r\n\r\n  public get index(): number {\r\n    return this._index;\r\n  }\r\n  private _index: number = 0;\r\n\r\n  public get stateVariable(): Nullable<IVeryVar> {\r\n    return this._stateVariable;\r\n  }\r\n  private _stateVariable: Nullable<IVeryVar> = null;\r\n\r\n  public logicalAssociated: Nullable<IExpression> = null;\r\n\r\n\r\n  private _stateActions: VE_StateAction[] = [];\r\n  private _assocaitedStates: VE_AssociatedState[] = [];\r\n\r\n  public get IsSequence(): boolean {\r\n    return this._isSequence;\r\n  }\r\n  private _isSequence: boolean = false;\r\n\r\n  public sequenceActions: Nullable<VE_SequenceActions> = null;\r\n\r\n  // \r\n  // 1.\r\n\r\n  constructor(fsm: VE_Fsm, index: number) {\r\n    this._fsm = fsm;\r\n    this._index = index;\r\n  }\r\n\r\n  public setInitialValue(value: any): void {\r\n    this._value = value;\r\n    this._assignmentType = AssignmentType.Const;\r\n  }\r\n\r\n  public setSequence(): void {\r\n    this._isSequence = true;\r\n  }\r\n\r\n  public setLogicalExpression(logical_exp: IExpression): void {\r\n    this._logicalExpression = logical_exp;\r\n  }\r\n\r\n  public setTemplateInfo(template: VE_Template, var_id: string, assign_str: string): void {\r\n    this._isTemplateVar = true;\r\n    this._template = template;\r\n    this._varID = var_id;\r\n    this._assignmentStr = assign_str;\r\n  }\r\n\r\n  public setConstValue(value: any): void {\r\n    this._value = value;\r\n    this._assignmentType = AssignmentType.Const;\r\n  }\r\n\r\n  public setStateVariable(very_var: IVeryVar): void {\r\n    this._stateVariable = very_var;\r\n    this._assignmentType = AssignmentType.Variable;\r\n  }\r\n\r\n  public addAction(state_action: VE_StateAction): void {\r\n    this._stateActions.push(state_action);\r\n    if (state_action.type === StateActionType.Action && state_action.action!.isSequence) {\r\n      this._isSequence = true;\r\n    }\r\n  }\r\n\r\n  public addAssignment(assignment: VE_Assignment): void {\r\n    let stateAction: VE_StateAction = new VE_StateAction();\r\n    stateAction.setAssignment(assignment);\r\n    this._stateActions.push(stateAction);\r\n  }\r\n\r\n  public addAssociatedState(associated_state: VE_AssociatedState): void {\r\n    this._assocaitedStates.push(associated_state);\r\n  }\r\n\r\n  // TODO\r\n  public action(trigger_id: string): void {\r\n    if (this._fsm.receiveEvent(trigger_id)) {\r\n\r\n    }\r\n  }\r\n}\r\n","\r\nimport { VE_ActionBehaviour } from \"../action/actionBehaviour\";\r\nimport { StateActionType } from \"../enum\";\r\nimport { VE_Assignment } from \"../action\";\r\n\r\nexport class VE_StateAction {\r\n\r\n  public get type(): StateActionType {\r\n    return this._type;\r\n  }\r\n  private _type: StateActionType = StateActionType.Action;\r\n\r\n  public get action(): Nullable<VE_ActionBehaviour> {\r\n    return this._action;\r\n  }\r\n  private _action: Nullable<VE_ActionBehaviour> = null;\r\n\r\n  public get enabled(): boolean {\r\n    return this._enabled;\r\n  }\r\n  private _enabled: boolean = false;\r\n\r\n  public get everyFrame(): boolean {\r\n    return this._everyFrame;\r\n  }\r\n  private _everyFrame: boolean = false;\r\n\r\n  public get assignment(): Nullable<VE_Assignment> {\r\n    return this._assignment;\r\n  }\r\n  private _assignment: Nullable<VE_Assignment> = null;\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public setAction(action: VE_ActionBehaviour, enabled: boolean = false, every_frame: boolean = false, sequence: boolean = false): void {\r\n    this._action = action;\r\n    this._enabled = enabled;\r\n    this._everyFrame = every_frame;\r\n    this._action.isSequence = sequence;\r\n  }\r\n\r\n  public setAssignment(assignment: VE_Assignment): void {\r\n    this._assignment = assignment;\r\n  }\r\n\r\n\r\n}","export class StateConst {\r\n\r\n  public static readonly STATE_SEPARATOR: string = '.';\r\n  public static readonly ASSOCIATED_STATE_PREFIX: string = 'Associated_State:';\r\n  public static readonly VARIABLE_SYMBOL: string = '*';\r\n  public static readonly STATE_INDEX: number = -1;\r\n  public static LogCount: number = -1;\r\n\r\n  public static AssignmentPrefix: string = \"AssignmentFormula_\";\r\n  public static AssignmentFormulaCount: number = 0;\r\n\r\n}","export * from './template';\r\nexport * from './templates';","import { VeryEngineObject } from \"../object\";\r\nimport { VE_DataSource, VE_VariableData } from \"../dataSource\";\r\n\r\nexport class VE_Template {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  public get templateID(): string {\r\n    return this._templateID;\r\n  }\r\n  private _templateID: string = '';\r\n\r\n  public get templateVarID(): string {\r\n    return this._templateVarID;\r\n  }\r\n  private _templateVarID: string = '';\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = '';\r\n\r\n  public templateInstance: VeryEngineObject | null = null;\r\n\r\n  public dataSource: VE_DataSource;\r\n\r\n  public varData: VE_VariableData;\r\n\r\n  public instanceCount(): number {\r\n    return this._instanceCount;\r\n  }\r\n  private _instanceCount: number = 0;\r\n\r\n\r\n  constructor(project_name: string, template_id: string) {\r\n    this._projectName = project_name;\r\n    this._templateID = template_id;\r\n    this.dataSource = new VE_DataSource(project_name, template_id, true);\r\n    this.varData = new VE_VariableData(project_name);\r\n  }\r\n\r\n  public setInstance(instance_obj: VeryEngineObject): void {\r\n    this.templateInstance = instance_obj;\r\n  }\r\n\r\n  public isCreatedVariable(var_id: string): boolean {\r\n    return this.varData.isCreatedVariable(var_id);\r\n  }\r\n\r\n  public addVariable(var_id: string, var_paras: string[], pos: string): void {\r\n    this.varData.addVariable(var_id, var_paras, pos);\r\n  }\r\n\r\n  public unload(): void {\r\n    //TODO: \r\n  }\r\n\r\n  public clone(object_id: string, template_var_id: string): VE_Template {\r\n    let cloneTemplate: VE_Template = new VE_Template(this._projectName, this._templateID);\r\n    cloneTemplate._objectID = object_id;\r\n    cloneTemplate._templateVarID = template_var_id;\r\n    cloneTemplate.dataSource = this.dataSource;\r\n    cloneTemplate.varData = this.varData;\r\n    cloneTemplate._instanceCount = this._instanceCount;\r\n    return cloneTemplate;\r\n  }\r\n\r\n  public clear(): void {\r\n    if (this.dataSource) {\r\n      this.dataSource.clear();\r\n    }\r\n    if (this.varData) {\r\n      this.varData.clear();\r\n    }\r\n    if (this.templateInstance) {\r\n      this.templateInstance.clear();\r\n    }\r\n  }\r\n\r\n}","import { VE_Template } from \"./template\";\r\nimport { ErrorInfo } from \"../utility\";\r\n\r\nexport class VE_Templates {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  private _templateDic: { [key: string]: VE_Template } = {};\r\n\r\n  private _instanceDic: { [key: string]: { [key: string]: VE_Template } } = {};\r\n\r\n\r\n  constructor(project_name: string) {\r\n    this._projectName = project_name;\r\n  }\r\n\r\n  public isCreatedTemplate(template_id: string): boolean {\r\n    if(this._templateDic[template_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTemplate(template_id: string, template: VE_Template): void {\r\n    this._templateDic[template_id] = template;\r\n  }\r\n\r\n  public getTemplate(template_id: string): VE_Template {\r\n    return this._templateDic[template_id];\r\n  }\r\n\r\n  public isCreatedInstance(object_id: string, var_id: string): boolean {\r\n    if(this._instanceDic[object_id] && this._instanceDic[object_id][var_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getInstance(object_id: string, var_id: string): VE_Template {\r\n    return this._instanceDic[object_id][var_id];\r\n  }\r\n\r\n  // public getState(var_id: string, state_id: string, index: number): VE_State {\r\n    \r\n  // } \r\n\r\n  public clear(): void {\r\n    if(this._templateDic) {\r\n      Object.keys(this._templateDic).forEach(key => {\r\n        this._templateDic[key].clear();\r\n      })\r\n      this._templateDic = {};\r\n    }\r\n  }\r\n\r\n  // TODO\r\n  public createInstance (object_id: string, var_id: string, template: VE_Template, object_name: string, error_info: ErrorInfo, destory_on_create_new: boolean): VE_Template\r\n  {\r\n\r\n    return new VE_Template(this._projectName, var_id);\r\n  }\r\n\r\n}","export * from './triggerBehaviour';\r\nexport * from './triggers';","import { VE_State } from \"../state/state\";\r\nimport { StateConst } from \"../state/stateConst\";\r\nimport { IExpression } from \"../expression\";\r\n\r\nexport abstract class VE_TriggerBehaviour {\r\n\r\n  public abstract get ID(): string;\r\n\r\n  protected scene!: BABYLON.Scene;\r\n\r\n  public get enabled(): boolean {\r\n    return this._enabled;\r\n  }\r\n  public set enabled(val: boolean) {\r\n    this._enabled = val;\r\n  }\r\n  private _enabled: boolean = true;\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  public get isEnabled(): boolean {\r\n    if (this._logicalSwitch) {\r\n      for (let i: number = 0; i < this._logicalSwitch.length; i++) {\r\n        if (!this._logicalSwitch[i].evaluate()) {\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // Logical\r\n  private _logicalSwitch: IExpression[] = [];\r\n  private _logicalExp: IExpression[] = [];\r\n  // State\r\n  private _triggerTargets: VE_State[] = [];\r\n\r\n  // protected GameObject ObjectInstance = null;\r\n  // protected VeryEngineObject VeryObject = null;\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = 'object-axxx';\r\n\r\n  public get triggerID(): string {\r\n    return this._triggerID;\r\n  }\r\n  private _triggerID: string = '';\r\n\r\n  private _id: string = '';\r\n\r\n  public call(): void {\r\n    console.log(this._objectID);\r\n  }\r\n\r\n\r\n  public set(scene: BABYLON.Scene): void {\r\n    this.scene = scene;\r\n  }\r\n\r\n  public setTriggerID(trigger_id: string, object_id: string): void {\r\n    this._triggerID = trigger_id;\r\n    this._objectID = object_id;\r\n    this._id = object_id + StateConst.STATE_SEPARATOR + trigger_id;\r\n  }\r\n\r\n  public addLogicalSwitch(exp: IExpression): void {\r\n    this._logicalSwitch.push(exp);\r\n  }\r\n\r\n  public addTriggerTarget(exp: IExpression, state: VE_State): void {\r\n    this._logicalExp.push(exp);\r\n    this._triggerTargets.push(state);\r\n  }\r\n\r\n  public sendEvent(): void {\r\n    if(this.isEnabled) {\r\n      this.eventProcess();\r\n    }\r\n  }\r\n\r\n  // \r\n  private eventProcess(): void {\r\n    if (this._triggerTargets) {\r\n      for (let i: number = 0; i < this._triggerTargets.length; i++) {\r\n        if (this._logicalExp[i].evaluate()) {\r\n          this._triggerTargets[i].action(this._id);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    return true;\r\n  }\r\n\r\n  public update(): void {\r\n    if(this.isEnabled) {\r\n      this.onUpdate();\r\n    }\r\n  }\r\n\r\n  public onUpdate(): void {\r\n\r\n  }\r\n\r\n  public abstract destroy(): void;\r\n\r\n\r\n}","import { VE_TriggerBehaviour } from \"./triggerBehaviour\";\r\nimport { ShowError } from \"../html\";\r\nimport { VeryEngineObject, VE_Objects } from \"../object\";\r\nimport { StateConst } from \"../state\";\r\nimport { VE_Manager } from \"../manager\";\r\n\r\nexport class VE_Triggers {\r\n\r\n  private static _triggerDics: { [key: string]: VE_TriggerBehaviour } = {};\r\n\r\n  public static addTrigger(trigger: VE_TriggerBehaviour): void {\r\n    let ids: string[] = trigger.ID.split('|');\r\n    for (let i: number = 0; i < ids.length; i++) {\r\n      let id: string = ids[i].trim().toLowerCase();\r\n      if (this._triggerDics[id]) {\r\n        ShowError.showError(`IDID${id}ID`);\r\n      } else {\r\n        this._triggerDics[id] = trigger;\r\n      }\r\n    }\r\n  }\r\n\r\n  public static hasTrigger(trigger_id: string): boolean {\r\n    trigger_id = trigger_id.toLowerCase();\r\n    if (this._triggerDics[trigger_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static createTrigger(trigger_id: string): VE_TriggerBehaviour {\r\n    trigger_id = trigger_id.toLowerCase();\r\n    // console.log(this._triggerDics[trigger_id]);\r\n    return Object.create(this._triggerDics[trigger_id]);\r\n  }\r\n\r\n  public static remove(trigger_id: string): void {\r\n    trigger_id = trigger_id.toLowerCase();\r\n    delete this._triggerDics[trigger_id];\r\n  }\r\n\r\n  public static findTrigger(very_object: VeryEngineObject, trigger_id: string): Nullable<VE_TriggerBehaviour> {\r\n    if (very_object.isCreatedTrigger(trigger_id)) {\r\n      return very_object.getTrigger(trigger_id);\r\n    } else {\r\n      let triggerArray: string[] = trigger_id.split(StateConst.STATE_SEPARATOR);\r\n      if (triggerArray.length === 2) {\r\n        let objects: VE_Objects = VE_Manager.objects(very_object.projectName);\r\n        let objectID: string = triggerArray[0].trim();\r\n        let triggerID: string = triggerArray[1].trim();\r\n        if (objects.isCreated(objectID)) {\r\n          let otherObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n          if (otherObject.isCreatedTrigger(triggerID)) {\r\n            return otherObject.getTrigger(triggerID);\r\n          } else {\r\n            return null;\r\n          }\r\n        } else {\r\n          return null;\r\n        }\r\n      } else {\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n}","export class ArrayUtility {\r\n  public static remove<T>(arr: Array<T>, ele: T): void {\r\n    let index = arr.indexOf(ele);\r\n    if (index > -1) {\r\n      arr.splice(index, 1);\r\n    }\r\n  }\r\n\r\n  public static clear<T>(arr: Array<T>): void {\r\n    arr = [];\r\n  }\r\n\r\n}\r\n\r\n","/** */\r\nexport class Dictionary<KT, VT> {\r\n  private _keys: KT[] = [];\r\n  private _values: VT[] = [];\r\n  public get count(): number {\r\n    return this.Count();\r\n  }\r\n\r\n  public constructor() {\r\n  }\r\n\r\n  /**, */\r\n  public Add(key: any, value: any): number {\r\n    this._keys.push(key);\r\n    return this._values.push(value);\r\n  }\r\n\r\n  public Remove(key: any) {\r\n    var index = this._keys.indexOf(key, 0);\r\n    this._keys.splice(index, 1);\r\n    this._values.splice(index, 1);\r\n  }\r\n\r\n  private Count(): number {\r\n    return this._keys.length;\r\n  }\r\n\r\n  /**SetValue() */\r\n  public SetValue(key: any, value: any): boolean {\r\n    var index = this._keys.indexOf(key, 0);\r\n    if (index != -1) {\r\n      this._keys[index] = key;\r\n      this._values[index] = value;\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n  public GetValue(key: KT): VT | null {\r\n    var index = this._keys.indexOf(key, 0);\r\n    if (index != -1) {\r\n      return this._values[index];\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public ContainsKey(key: any): boolean {\r\n    let ks = this._keys;\r\n    for (let i = 0; i < ks.length; ++i) {\r\n      if (ks[i] == key) {\r\n        return true;;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public GetKeys(): KT[] {\r\n    return this._keys;\r\n  }\r\n\r\n  public GetValues(): VT[] {\r\n    return this._values;\r\n  }\r\n}","export class ErrorInfo {\r\n\r\n  public isRight: boolean = true;\r\n  public message: string = '';\r\n\r\n  constructor() {\r\n    \r\n  }\r\n\r\n  public clear(): void {\r\n    this.isRight = true;\r\n    this.message = '';\r\n  }\r\n\r\n}","export * from './arrayUtility';\r\nexport * from './dictionary';\r\nexport * from './errorInfo';\r\nexport * from './stringFormat';","export class VE_StringFormat {\r\n\r\n  private static _illegalChar: { [key: string]: boolean } = {};\r\n  private static _formulaChar: { [key: string]: boolean } = {};\r\n  private static _escapeCharacters: { [key: string]: string } = {};\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public static init() {\r\n    this._escapeCharacters['n'] = '\\n';\r\n    this._escapeCharacters['b'] = '\\b';\r\n    this._escapeCharacters['r'] = '\\r';\r\n    this._escapeCharacters['t'] = '\\t';\r\n    this._escapeCharacters['v'] = '\\v';\r\n    this._escapeCharacters['f'] = '\\f';\r\n    this._escapeCharacters['0'] = '\\0';\r\n\r\n    this._illegalChar['='] = true;\r\n    this._illegalChar[','] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar[':'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['*'] = true;\r\n    this._illegalChar['('] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar[')'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['@'] = true;\r\n    this._illegalChar['#'] = true;\r\n    this._illegalChar['$'] = true;\r\n    this._illegalChar['%'] = true;\r\n    this._illegalChar['&'] = true;\r\n    this._illegalChar['^'] = true;\r\n    this._illegalChar['-'] = true;\r\n    this._illegalChar['+'] = true;\r\n    this._illegalChar['|'] = true;\r\n    this._illegalChar['/'] = true;\r\n    this._illegalChar['['] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar[']'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['{'] = true;\r\n    this._illegalChar['}'] = true;\r\n    this._illegalChar['.'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['<'] = true;\r\n    this._illegalChar['>'] = true;\r\n    this._illegalChar[';'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['?'] = true;\r\n    this._illegalChar['\\\"'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['\\''] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['!'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['`'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['~'] = true;\r\n\r\n    this._formulaChar['('] = true; this._formulaChar[')'] = true; this._formulaChar[''] = true; this._formulaChar[''] = true;\r\n    this._formulaChar['!'] = true; this._formulaChar[''] = true;\r\n    this._formulaChar['^'] = true; this._formulaChar['%'] = true; this._formulaChar['&'] = true; this._formulaChar['-'] = true; this._formulaChar['+'] = true; this._formulaChar['='] = true;\r\n    this._formulaChar['<'] = true; this._formulaChar['>'] = true; this._formulaChar['|'] = true;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param para_str \r\n   */\r\n  public static strEscapeCharacterAction(para_str: string): string {\r\n    let tmpStr: string = \"\";\r\n    for (let i: number = 0; i < para_str.length; i++) {\r\n      if (para_str[i] == '\\\\' && i != para_str.length - 1) {\r\n        tmpStr += this.getEscapeCharacter(para_str[i + 1]);\r\n        i++;\r\n      }\r\n      else {\r\n        tmpStr += para_str[i];\r\n      }\r\n    }\r\n    return tmpStr;\r\n  }\r\n\r\n  /**\r\n   *  \r\n   * @param para_str \r\n   */\r\n  public static strSubsectionAction(para_str: string): string[] {\r\n    let strBuilder: string = '';\r\n    let rStr: string[] = [];\r\n    let bracketFlag: boolean = false;\r\n    let hasQuote: boolean = false;\r\n    for (let i: number = 0; i < para_str.length; i++) {\r\n      if (para_str[i] == '\\\\') {\r\n        if (i < para_str.length - 1) {\r\n          strBuilder += para_str[i + 1];\r\n          i++;\r\n          continue;\r\n        }\r\n        else {\r\n          strBuilder += para_str[i];\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (!hasQuote && (para_str[i] === '\\\"' || para_str[i] === '')) {\r\n        hasQuote = true;\r\n        bracketFlag = true;\r\n        strBuilder += '\\\"';\r\n      }\r\n      else if (hasQuote && (para_str[i] === '\\\"' || para_str[i] === '')) {\r\n        strBuilder += '\\\"';\r\n        bracketFlag = false;\r\n        hasQuote = false;\r\n        if (strBuilder !== '') {\r\n          rStr.push(strBuilder);\r\n        }\r\n        strBuilder = '';\r\n      }\r\n      else if (para_str[i] === ',' || para_str[i] === '') {\r\n        if (!bracketFlag) {\r\n          if (strBuilder !== \"\") {\r\n            rStr.push(strBuilder);\r\n          }\r\n          strBuilder = '';\r\n        }\r\n        else {\r\n          strBuilder += para_str[i];\r\n        }\r\n      }\r\n      else if (para_str[i] === ' ') {\r\n        continue;\r\n      }\r\n      else {\r\n        strBuilder += para_str[i];\r\n      }\r\n    }\r\n    if (strBuilder !== \"\") {\r\n      rStr.push(strBuilder);\r\n    }\r\n    return rStr;\r\n  }\r\n\r\n\r\n  private static getEscapeCharacter(para_char: string): string {\r\n    if (this._escapeCharacters[para_char])\r\n      return this._escapeCharacters[para_char];\r\n    else\r\n      return para_char;\r\n  }\r\n\r\n  private static getEscapeCharacter2(para_char: string, is_escape: boolean[]): string {\r\n    if (this._escapeCharacters[para_char]) {\r\n      is_escape[0] = true;\r\n      return this._escapeCharacters[para_char];\r\n    }\r\n    else {\r\n      is_escape[0] = false;\r\n      return para_char;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \"XXX\"\"XXX\"XXX\r\n   * @param para_str \r\n   */\r\n  public static strSubsection(para_str: string): string[] {\r\n    let strBuilder: string = '';\r\n    let rStr: string[] = [];\r\n    let bracketFlag: boolean = false;\r\n    let needSpace: boolean = false;\r\n    for (let i: number = 0; i < para_str.length; i++) {\r\n      if (para_str[i] == '\\\\') {\r\n        if (i < para_str.length - 1) {\r\n          strBuilder += this.getEscapeCharacter(para_str[i + 1]);\r\n          i++;\r\n          continue;\r\n        }\r\n        else {\r\n          strBuilder += para_str[i];\r\n          break;\r\n        }\r\n      }\r\n      if (para_str[i] === '(' || para_str[i] === '' || para_str[i] === '\\\"' || para_str[i] === '') {\r\n        bracketFlag = true;\r\n        needSpace = false;\r\n      }\r\n      else if (para_str[i] === ')' || para_str[i] === '' || para_str[i] === '\\\"' || para_str[i] === '') {\r\n        bracketFlag = false;\r\n        if (strBuilder !== \"\") {\r\n          rStr.push(strBuilder);\r\n        }\r\n        strBuilder = '';\r\n        needSpace = false;\r\n      }\r\n      else if (para_str[i] === ',' || para_str[i] === '') {\r\n        if (!bracketFlag) {\r\n          if (strBuilder !== \"\") {\r\n            rStr.push(strBuilder);\r\n          }\r\n          strBuilder = '';\r\n        }\r\n        else {\r\n          strBuilder += para_str[i];\r\n        }\r\n        needSpace = false;\r\n      }\r\n      else if (para_str[i] === ' ' && !needSpace) {\r\n        continue;\r\n      }\r\n      else {\r\n        strBuilder += para_str[i];\r\n        needSpace = true;\r\n      }\r\n    }\r\n    if (strBuilder !== \"\") {\r\n      rStr.push(strBuilder);\r\n    }\r\n    return rStr;\r\n  }\r\n\r\n  /**\r\n   * $\r\n   * @param project_name \r\n   * @param para_array \r\n   */\r\n  public static getParaArrayAll(project_name: string, para_array: string[]): string[] {\r\n    let coloneStr: string[] = para_array.slice();\r\n    for (let i: number = 0; i < coloneStr.length; i++) {\r\n      if (coloneStr[i].startsWith(\"$\")) {\r\n        //\r\n        if (coloneStr[i].indexOf(\",\") > -1 || coloneStr[i].indexOf(\"\")) {\r\n          let paraArray: string[] = coloneStr[i].split(/,|/);\r\n          paraArray = this.getParaArrayAll(project_name, paraArray);\r\n          let newPara: string = '';\r\n          for (let j: number = 0; j < paraArray.length; j++) {\r\n            if (j === paraArray.length - 1) {\r\n              newPara += paraArray[j];\r\n            }\r\n            else {\r\n              newPara += paraArray[j];\r\n              newPara += \",\";\r\n            }\r\n          }\r\n          coloneStr[i] = newPara;\r\n        }\r\n        else {\r\n          // TODO\r\n          console.log(\"\" + coloneStr[i] + \"\");\r\n        }\r\n      }\r\n      else if (coloneStr[i].startsWith(\"%\")) {\r\n        //\r\n        if (coloneStr[i].indexOf(\",\") > -1 || coloneStr[i].indexOf(\"\") > -1) {\r\n          let paraArray: string[] = coloneStr[i].split(/,|/);\r\n          paraArray = this.getParaArrayAll(project_name, paraArray);\r\n          let newPara: string = '';\r\n          for (let j: number = 0; j < paraArray.length; j++) {\r\n            if (j == paraArray.length - 1) {\r\n              newPara += paraArray[j];\r\n            }\r\n            else {\r\n              newPara += paraArray[j];\r\n              newPara += \",\";\r\n            }\r\n          }\r\n          coloneStr[i] = newPara;\r\n        }\r\n        else {\r\n          // TODO\r\n          console.log(\"\" + coloneStr[i] + \"BlurVar\");\r\n        }\r\n      }\r\n      //\r\n      else if (coloneStr[i].indexOf(\",\") > -1 || coloneStr[i].indexOf(\"\") > -1) {\r\n        let paraArray: string[] = coloneStr[i].split(/,|/);\r\n        paraArray = this.getParaArrayAll(project_name, paraArray);\r\n        let newPara: string = '';\r\n        for (let j: number = 0; j < paraArray.length; j++) {\r\n          if (j == paraArray.length - 1) {\r\n            newPara += paraArray[j];\r\n          }\r\n          else {\r\n            newPara += paraArray[j];\r\n            newPara += \",\";\r\n          }\r\n        }\r\n        coloneStr[i] = newPara;\r\n      }\r\n    }\r\n    return coloneStr;\r\n  }\r\n\r\n  /**\r\n   * \r\n     1\r\n     2\r\n        1\r\n        2 +\r\n        3+ \r\n        412123\r\n    \r\n   * @param para_str \r\n   */\r\n  public static paraSegment(para_str: string): string[] {\r\n    let strBuilder = '';\r\n    let rStr: string[] = [];\r\n    let bracketFlag: boolean = false;\r\n    let innerBracket: number = 0;\r\n    let saveBracket: boolean = false;\r\n\r\n    let quotationMark: boolean = false;\r\n\r\n    for (let i: number = 0; i < para_str.length; i++) {\r\n      //\r\n      if (para_str[i] == '\\\\') {\r\n        if (i < para_str.length - 1) {\r\n          let isEscape: boolean[] = [true];\r\n          let c: string = this.getEscapeCharacter2(para_str[i + 1], isEscape);\r\n          if (isEscape[0]) {\r\n            i++;\r\n            strBuilder += c;\r\n          }\r\n          else {\r\n            i++;\r\n            strBuilder += para_str[i];\r\n          }\r\n          continue;\r\n        }\r\n        else {\r\n          strBuilder += para_str[i];\r\n          break;\r\n        }\r\n      }\r\n      if (para_str[i] === '(' || para_str[i] === '') {\r\n        if (quotationMark) {\r\n          strBuilder += para_str[i];\r\n        }\r\n        else {\r\n          if (bracketFlag) {\r\n            innerBracket++;\r\n            strBuilder += para_str[i];\r\n          }\r\n          else if (strBuilder.trim() !== \"\") {\r\n            strBuilder += para_str[i];\r\n            saveBracket = true;\r\n          }\r\n          else if (i < para_str.length - 1) {\r\n            if (this.needSaveBracket(para_str.substring(i + 1))) {\r\n              strBuilder += para_str[i];\r\n              saveBracket = true;\r\n            }\r\n          }\r\n          bracketFlag = true;\r\n        }\r\n      }\r\n      else if (para_str[i] === ')' || para_str[i] === '') {\r\n        if (quotationMark) {\r\n          strBuilder += para_str[i];\r\n        }\r\n        else {\r\n          if (innerBracket > 0) {\r\n            innerBracket--;\r\n            bracketFlag = true;\r\n            strBuilder += para_str[i];\r\n          }\r\n          else if (bracketFlag && saveBracket) {\r\n            strBuilder += para_str[i];\r\n            saveBracket = false;\r\n            bracketFlag = false;\r\n          }\r\n          else {\r\n            bracketFlag = false;\r\n          }\r\n        }\r\n      }\r\n      else if (para_str[i] === '\"') {\r\n        strBuilder += para_str[i];\r\n        quotationMark = !quotationMark;\r\n      }\r\n      else if (para_str[i] === ',' || para_str[i] === '') {\r\n        if (quotationMark) {\r\n          strBuilder += para_str[i];\r\n        }\r\n        else {\r\n          if (!bracketFlag) {\r\n            if (strBuilder !== \"\") {\r\n              rStr.push(strBuilder.trim());\r\n            }\r\n            strBuilder = '';\r\n          }\r\n          else {\r\n            strBuilder += para_str[i];\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        strBuilder += para_str[i];\r\n      }\r\n    }\r\n    if (strBuilder !== \"\") {\r\n      rStr.push(strBuilder.trim());\r\n    }\r\n    return rStr;\r\n  }\r\n\r\n\r\n  private static needSaveBracket(str: string): boolean {\r\n    let hasBracket: boolean = false;\r\n    let innerBracket: number = 0;\r\n    for (let i: number = 0; i < str.length; i++) {\r\n      if (hasBracket) {\r\n        if (str[i] === ' ') {\r\n          continue;\r\n        }\r\n        else if (str[i] === ',' || str[i] === '') {\r\n          return false;\r\n        }\r\n        else {\r\n          return true;\r\n        }\r\n      }\r\n      else {\r\n        if (str[i] === '(' || str[i] === '') {\r\n          innerBracket++;\r\n        }\r\n        else if (str[i] === ')' || str[i] === '') {\r\n          if (innerBracket > 0) {\r\n            innerBracket--;\r\n          }\r\n          else {\r\n            hasBracket = true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n\r\n  public static isIDLegal(id: string): boolean {\r\n    for (let i: number = 0; i < id.length; i++) {\r\n      if (this._illegalChar[id[i]]) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n\r\n  public static isFormulaString(var_str: string): boolean {\r\n    for (let i: number = 0; i < var_str.length; i++)\r\n    {\r\n      if (this._formulaChar[var_str[i]]) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n\r\n}\r\n\r\nVE_StringFormat.init();\r\n\r\n// console.log(VE_StringFormat.paraSegment(\", Main Camera, *\"));\r\n// console.log(VE_StringFormat.paraSegment(\", *, *, 1, *\"));\r\n\r\n// console.log(VE_StringFormat.paraSegment(\", *, Pin, Example/SpinAPin/Pin , null, (0, -6, 0), (0,0,90),false\"));","import { ErrorInfo } from \"./errorInfo\";\r\n\r\nexport class VE_TypeConvert {\r\n\r\n\r\n  public static boolConvert(info: string, errorInfo: ErrorInfo): boolean {\r\n    info = info.toLowerCase().trim();\r\n    if(info === 'true' || info === '') {\r\n      return true;\r\n    } else if(info === 'false' || info === '') {\r\n      return false;\r\n    } else {\r\n      errorInfo.isRight = false;\r\n      errorInfo.message = 'bool|' + info;\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static intConvert(info: string, errorInfo: ErrorInfo): number {\r\n    info = info.toLowerCase().trim();\r\n    let num: number = parseFloat(info);\r\n    if(isNaN(num)) {\r\n      errorInfo.isRight = false;\r\n      errorInfo.message = 'number|' + info;\r\n      return - 1;\r\n    } else {\r\n      return Math.round(num);\r\n    }\r\n  }\r\n\r\n  public static floatConvert(info: string, errorInfo: ErrorInfo): number {\r\n    info = info.toLowerCase().trim();\r\n    let num: number = parseFloat(info);\r\n    if(isNaN(num)) {\r\n      errorInfo.isRight = false;\r\n      errorInfo.message = 'number|' + info;\r\n      return - 1;\r\n    } else {\r\n      return num;\r\n    }\r\n  }\r\n\r\n\r\n}","\r\n// import { VeryEngine } from \"../veryEngine\";\r\n\r\nexport class GameObject {\r\n\r\n  public get gameObject(): GameObject {\r\n    return this;\r\n  }\r\n\r\n  public get transform(): Transform {\r\n    return this._transform;\r\n  }\r\n  private _transform: Transform = new Transform();\r\n\r\n  public name: string;\r\n\r\n  private mesh: BABYLON.Nullable<BABYLON.Mesh> = null;\r\n\r\n  constructor(name: string) {\r\n    this.name = name;\r\n    // VeryEngine.Scene.getMeshByName()\r\n  }\r\n\r\n  // TODO\r\n  public static find(name: string): Nullable<GameObject> {\r\n    return new GameObject(name);\r\n  }\r\n\r\n}\r\n\r\n\r\nexport class Transform {\r\n\r\n\r\n  private _transformNode: BABYLON.Nullable<BABYLON.TransformNode> = null;\r\n  private _mesh: BABYLON.Nullable<BABYLON.Mesh> = null;\r\n\r\n  public localPosition: BABYLON.Vector3 = BABYLON.Vector3.Zero();\r\n  public position: BABYLON.Vector3 = BABYLON.Vector3.Zero();\r\n\r\n  public localEulerAngles: BABYLON.Vector3 = BABYLON.Vector3.Zero();\r\n  public eulerAngles: BABYLON.Vector3 = BABYLON.Vector3.Zero();\r\n\r\n  public get childCount(): number {\r\n    return 0;\r\n  }\r\n\r\n  public forward: BABYLON.Vector3 = BABYLON.Vector3.Forward();\r\n\r\n\r\n  public get hierarchyCount(): number {\r\n    return 0;\r\n  }\r\n\r\n  public localScale: BABYLON.Vector3 = new BABYLON.Vector3(1, 1, 1);\r\n\r\n\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n}","export * from \"./IVeryVar\";\r\nexport * from \"./veryVarManager\";\r\nexport * from \"./veryVariables\";\r\nexport * from './babylonVariables';\r\nexport * from './variables';","import { VE_VariableData } from \"../dataSource\";\r\nimport { IVeryVar } from \"./IVeryVar\";\r\nimport { VE_Template } from \"../template\";\r\nimport { IExpression } from \"../expression\";\r\n\r\nexport class VE_Variables {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  public varData: VE_VariableData;\r\n\r\n  private _veryVars: { [key: string]: IVeryVar } = {};\r\n  private _tempalteVars: { [key: string]: VE_Template } = {};\r\n  private _expressions: { [key: string]: IExpression } = {};\r\n\r\n  constructor(project_name: string) {\r\n    this._projectName = project_name;\r\n    this.varData = new VE_VariableData(project_name);\r\n  }\r\n\r\n  public isCreated(id: string): boolean {\r\n    if(this._veryVars[id] || this._tempalteVars[id] || this._expressions[id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isCreatedVariable(id: string): boolean {\r\n    if(this._veryVars[id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addVariable(id: string, very_var: IVeryVar): void {\r\n    this._veryVars[id] = very_var;\r\n  }\r\n\r\n  public getVariable(id: string): IVeryVar {\r\n    return this._veryVars[id];\r\n  }\r\n\r\n  public isCreatedTemplate(id: string): boolean {\r\n    if(this._tempalteVars[id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTemplate(id: string, template: VE_Template): void {\r\n    this._tempalteVars[id] = template;\r\n  }\r\n\r\n  public getTemplate(id: string): VE_Template {\r\n    return this._tempalteVars[id];\r\n  }\r\n\r\n  public isCreatedExpression(id: string): boolean {\r\n    if(this._expressions[id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addExpression(id: string, exp: IExpression): void {\r\n    this._expressions[id] = exp;\r\n  }\r\n\r\n  public getExpression(id: string): IExpression {\r\n    return this._expressions[id];\r\n  }\r\n\r\n\r\n  public clear(): void {\r\n    if(this.varData) {\r\n      this.varData.clear();\r\n    }\r\n    this._veryVars = {};\r\n    this._expressions = {};\r\n    this._tempalteVars = {};\r\n  }\r\n\r\n\r\n\r\n}","import { ShowError } from \"../html/showError\";\r\nimport { IVeryVar } from \"./IVeryVar\";\r\nimport { ErrorInfo } from \"../utility\";\r\nimport { VE_Variables } from \"./variables\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { VeryExpression } from \"./veryVariables\";\r\nimport { VE_Objects, VeryEngineObject } from \"../object\";\r\nimport { VE_Template } from \"../template\";\r\n\r\nexport class VeryVarManager {\r\n\r\n  private static _veryVarTypes: { [key: string]: IVeryVar } = {};\r\n\r\n  public static hasVarType(var_type: string): boolean {\r\n    var_type = var_type.toLowerCase();\r\n    if (this._veryVarTypes[var_type]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static addVarType(var_type: string, var_prototype: IVeryVar): void {\r\n    var_type = var_type.toLowerCase().trim();\r\n    // \r\n    if (this._veryVarTypes[var_type]) {\r\n      ShowError.showError('VeryVar' + var_type + '' + var_prototype);\r\n    } else {\r\n      // console.log(var_proto.VarType);\r\n      this._veryVarTypes[var_type] = var_prototype;\r\n      // let a = Object.create(this.GetVarType(var_type));\r\n      // console.log(a.Value);\r\n      // a.Value = true;\r\n      // console.log(a.Value);\r\n      // a.Value = 1234;\r\n      // console.log(a.getValue());\r\n      // console.log(this.GetVarType(var_type).__proto__);\r\n    }\r\n  }\r\n\r\n  // TODO\r\n  public static createVar(var_type: string): IVeryVar {\r\n    var_type = var_type.toLowerCase();\r\n    return Object.create(this.getVarType(var_type));\r\n  }\r\n\r\n  public static createVariable(var_id: string, var_type: string, value: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    var_type = var_type.toLowerCase();\r\n    let variable: any;\r\n    try {\r\n      variable = Object.create(this.getVarType(var_type));\r\n      if (!variable) {\r\n        error_info.isRight = false;\r\n        error_info.message = '' + var_type;\r\n        return null;\r\n      }\r\n      let result: any = (<IVeryVar>variable).initValue(value, error_info);\r\n      if (error_info.isRight) {\r\n        (<IVeryVar>variable).setValue(result);\r\n        return <IVeryVar>variable;\r\n      } else {\r\n        return null;\r\n      }\r\n    } catch (error) {\r\n      console.log(error.message);\r\n      error_info.isRight = false;\r\n      error_info.message = '' + var_type + '' + error.message;\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static getVarType(var_type: string): any {\r\n    var_type = var_type.toLowerCase();\r\n    if (this._veryVarTypes && this._veryVarTypes[var_type]) {\r\n      return this._veryVarTypes[var_type];\r\n    }\r\n    return null;\r\n  }\r\n\r\n\r\n  public static remove(var_type: string): void {\r\n    var_type = var_type.toLowerCase();\r\n    delete this._veryVarTypes[var_type];\r\n  }\r\n\r\n  // *\r\n  // .*\r\n  public static getVariable(var_id: string, project_name: string, object_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (project_name === '') {\r\n      return this.getSceneVariable(var_id, error_info);\r\n    } else if (object_id === '') {\r\n      return this.getGlobalVariable(var_id, project_name, error_info);\r\n    } else {\r\n      let objects: VE_Objects = VE_Manager.objects(project_name);\r\n      if (objects) {\r\n        let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n        if (veryObject) {\r\n          if (veryObject.isCreatedVariable(var_id)) {\r\n            return veryObject.getVariable(var_id);\r\n          } else if (veryObject.isCreatedExpression(var_id)) {\r\n            return new VeryExpression(veryObject.getExpression(var_id));\r\n          } else if (veryObject.isCreatedFsm(var_id)) {\r\n            return veryObject.getFsm(var_id).fsmVar;\r\n          } else {\r\n            return this.getGlobalVariable(var_id, project_name, error_info);\r\n          }\r\n        } else {\r\n          return this.getGlobalVariable(var_id, project_name, error_info);\r\n        }\r\n      } else {\r\n        return this.getGlobalVariable(var_id, project_name, error_info);\r\n      }\r\n    }\r\n  }\r\n\r\n  // *.*\r\n  // .*.*\r\n  public static getTemplateVariable(template_var_id: string, var_id: string, project_name: string, object_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (project_name === '') {\r\n      // \r\n      error_info.isRight = false;\r\n      error_info.message = \"\" + template_var_id + \"\\n\";\r\n      return null;\r\n    }\r\n    else {\r\n      if (object_id !== '')  //\r\n      {\r\n        let objects: VE_Objects = VE_Manager.objects(project_name);\r\n        if (!objects) {\r\n          error_info.isRight = false;\r\n          error_info.message += \"\" + object_id + \"\\n\";\r\n          return null;\r\n        }\r\n        else {\r\n          if (objects.isCreated(object_id)) {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n            if (veryObject.isCreatedTemplate(template_var_id)) {\r\n              let template: VE_Template = veryObject.getTemplate(template_var_id);\r\n              if (template.templateInstance === null) {\r\n                error_info.isRight = false;\r\n                error_info.message += \"\" + template_var_id + \"\\n\";\r\n                return null;\r\n              }\r\n              else {\r\n                if (template.templateInstance.isCreatedVariable(var_id)) {\r\n                  return template.templateInstance.getVariable(var_id);\r\n                }\r\n                else if (template.templateInstance.isCreatedExpression(var_id)) {\r\n                  return new VeryExpression(template.templateInstance.getExpression(var_id));\r\n                }\r\n                else if (template.templateInstance.isCreatedFsm(var_id)) {\r\n                  return template.templateInstance.getFsm(var_id).fsmVar;\r\n                }\r\n                else {\r\n                  error_info.isRight = false;\r\n                  error_info.message += \"\" + template_var_id + \"\" + var_id + \"\\n\";\r\n                  return null;\r\n                }\r\n              }\r\n            }\r\n            else {\r\n              error_info.isRight = false;\r\n              error_info.message += \"\" + template_var_id + \"\\n\";\r\n              return null;\r\n            }\r\n          }\r\n          else {\r\n            error_info.isRight = false;\r\n            error_info.message += \"\" + object_id + \"\\n\";\r\n            return null;\r\n          }\r\n        }\r\n      }\r\n      // \r\n      else {\r\n        let variables: VE_Variables = VE_Manager.variables(project_name);\r\n        if (!variables) {\r\n          error_info.isRight = false;\r\n          error_info.message += \"\" + template_var_id + \"\\n\";\r\n          return null;\r\n        }\r\n        else {\r\n          if (variables.isCreatedTemplate(template_var_id)) {\r\n            let template: VE_Template = variables.getTemplate(template_var_id);\r\n            if (template.templateInstance === null) {\r\n              error_info.isRight = false;\r\n              error_info.message += \"\" + template_var_id + \"\\n\";\r\n              return null;\r\n            }\r\n            else {\r\n              if (template.templateInstance.isCreatedVariable(var_id)) {\r\n                return template.templateInstance.getVariable(var_id);\r\n              }\r\n              else if (template.templateInstance.isCreatedExpression(var_id)) {\r\n                return new VeryExpression(template.templateInstance.getExpression(var_id));\r\n              }\r\n              else if (template.templateInstance.isCreatedFsm(var_id)) {\r\n                return template.templateInstance.getFsm(var_id).fsmVar;\r\n              }\r\n              else {\r\n                error_info.isRight = false;\r\n                error_info.message += \"\" + template_var_id + \"\" + var_id + \"\\n\";\r\n                return null;\r\n              }\r\n            }\r\n          }\r\n          else {\r\n            error_info.isRight = false;\r\n            error_info.message += \"\" + template_var_id + \"\\n\";\r\n            return null;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public static getGlobalVariable(var_id: string, project_name: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (project_name === '') {\r\n      return this.getSceneVariable(var_id, error_info);\r\n    } else {\r\n      let variables: VE_Variables = VE_Manager.variables(project_name);\r\n      if (variables) {\r\n        if (variables.isCreatedVariable(var_id)) {\r\n          return variables.getVariable(var_id);\r\n        } else if (variables.isCreatedExpression(var_id)) {\r\n          return new VeryExpression(variables.getExpression(var_id));\r\n        } else {\r\n          return this.getSceneVariable(var_id, error_info);\r\n        }\r\n      } else {\r\n        return this.getSceneVariable(var_id, error_info);\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public static getSceneVariable(var_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    error_info.isRight = false;\r\n    error_info.message = ''\r\n    return null;\r\n  }\r\n}\r\n","import { IVeryVar } from \"./IVeryVar\";\r\nimport { ErrorInfo } from \"../utility/errorInfo\";\r\nimport { VeryVarManager } from \"./veryVarManager\";\r\nimport { IExpression, ConstantExpression } from \"../expression\";\r\n\r\nexport class VeryBool implements IVeryVar {\r\n\r\n  public get varType(): string {\r\n    return 'bool|';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'VeryBool';\r\n  }\r\n\r\n  public get Value(): boolean {\r\n    return this._value;\r\n  }\r\n  public set Value(val: boolean) {\r\n    this._value = val;\r\n  }\r\n  private _value: boolean = false;\r\n\r\n  constructor() {\r\n    this._value = false;\r\n  }\r\n\r\n  public setValue(val: any): void {\r\n    this._value = val;\r\n  }\r\n\r\n  public getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n    value_str = value_str.trim();\r\n    if (value_str.toLowerCase() === 'false' || value_str === '') {\r\n      return false;\r\n    } else if (value_str.toLowerCase() === 'true' || value_str === '') {\r\n      return true;\r\n    }\r\n    else if (value_str === '' || value_str.toLowerCase() === 'null' || value_str.toLowerCase() === 'none') {\r\n      return false;\r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message = ': ' + this.varType + '' + value_str + ''\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    let varClone: VeryBool = new VeryBool();\r\n    varClone.setValue(this._value);\r\n    return varClone;\r\n  }\r\n\r\n}\r\n\r\nexport class VeryInt implements IVeryVar {\r\n\r\n  public get varType(): string {\r\n    return 'int|';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'VeryInt';\r\n  }\r\n\r\n  public get Value(): number {\r\n    return Math.round(this._value);\r\n  }\r\n  public set Value(val: number) {\r\n    this._value = Math.round(val);\r\n  }\r\n  private _value: number = 0;\r\n\r\n  constructor() {\r\n    this._value = 0;\r\n  }\r\n\r\n  public getValue(): any {\r\n    return this.Value;\r\n  }\r\n\r\n  public setValue(val: any): void {\r\n    this.Value = val;\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n    // floatparseInt\r\n    let newFloat = parseFloat(value_str);\r\n    if (!isNaN(newFloat)) {\r\n      // float\r\n      return Math.round(newFloat);\r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message = ': ' + this.varType + '' + value_str + ''\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    let varClone: VeryInt = new VeryInt();\r\n    varClone.setValue(this._value);\r\n    return varClone;\r\n  }\r\n\r\n}\r\n\r\nexport class VeryFloat implements IVeryVar {\r\n\r\n  public get varType(): string {\r\n    return 'float|';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'VeryFloat';\r\n  }\r\n\r\n  public get Value(): number {\r\n    return this._value;\r\n  }\r\n  public set Value(val: number) {\r\n    this._value = val;\r\n  }\r\n  private _value: number = 0;\r\n\r\n  constructor() {\r\n    this._value = 0;\r\n  }\r\n\r\n  public setValue(val: number) {\r\n    this._value = val;\r\n  }\r\n\r\n  // \r\n  public getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n    let newVal = parseFloat(value_str);\r\n    if (!isNaN(newVal)) {\r\n      return newVal;\r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message = ': ' + this.varType + '' + value_str + ''\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    let varClone: VeryFloat = new VeryFloat();\r\n    varClone.setValue(this._value);\r\n    return varClone;\r\n  }\r\n}\r\n\r\nexport class VeryNumber implements IVeryVar {\r\n\r\n  public get varType(): string {\r\n    return 'number|';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'VeryNumber';\r\n  }\r\n\r\n  public get Value(): number {\r\n    return this._value;\r\n  }\r\n  public set Value(val: number) {\r\n    this._value = val;\r\n  }\r\n  private _value: number = 0;\r\n\r\n  constructor() {\r\n    this._value = 0;\r\n  }\r\n\r\n  public setValue(val: number) {\r\n    this._value = val;\r\n  }\r\n\r\n  // \r\n  public getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n    let newVal = parseFloat(value_str);\r\n    if (!isNaN(newVal)) {\r\n      return newVal;\r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message = ': ' + this.varType + '' + value_str + ''\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    let varClone: VeryNumber = new VeryNumber();\r\n    varClone.setValue(this._value);\r\n    return varClone;\r\n  }\r\n}\r\n\r\nexport class VeryString implements IVeryVar {\r\n\r\n  public get varType(): string {\r\n    return 'string|';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'VeryString';\r\n  }\r\n\r\n  public get Value(): string {\r\n    return this._value;\r\n  }\r\n  public set Value(val: string) {\r\n    this._value = val;\r\n  }\r\n  private _value: string = '';\r\n\r\n  constructor() {\r\n    this._value = '';\r\n  }\r\n\r\n  public getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  public setValue(val: any): void {\r\n    this._value = val;\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n    let rValue: string;\r\n    if (value_str.startsWith('\\'') || value_str.startsWith('\"') || value_str.startsWith('') || value_str.startsWith('')) {\r\n      rValue = value_str.substring(1, value_str.length - 2);\r\n    } else {\r\n      rValue = value_str;\r\n    }\r\n    return rValue;\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    let varClone: VeryString = new VeryString();\r\n    varClone.setValue(this._value);\r\n    return varClone;\r\n  }\r\n}\r\n\r\nexport class VeryVector3 implements IVeryVar {\r\n\r\n  public get varType(): string {\r\n    return 'vector3|';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'VeryVector3';\r\n  }\r\n\r\n  public get Value(): BABYLON.Vector3 {\r\n    //let a: BABYLON.Vector3 = new BABYLON.Vector3 (1,1,1);\r\n    return this._value;\r\n  }\r\n  public set Value(val: BABYLON.Vector3) {\r\n    this._value = val;\r\n  }\r\n  private _value: BABYLON.Vector3 = BABYLON.Vector3.Zero();\r\n\r\n\r\n  constructor() {\r\n    this._value = BABYLON.Vector3.Zero();\r\n  }\r\n\r\n  public getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  public setValue(val: any) {\r\n    this._value = val;\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n    let rValue: BABYLON.Vector3 = BABYLON.Vector3.Zero();\r\n    if (value_str === 'none' || value_str === 'null' || value_str === '') {\r\n      return rValue;\r\n    } else {\r\n      let vec3Str: string[] = value_str.split(/,|/);\r\n      if (vec3Str.length !== 3) {\r\n        error_info.isRight = false;\r\n        error_info.message = \": \" + this.varType + \", : \" + value_str + \"Vector3|\";\r\n        return null;\r\n      } else {\r\n        let n1: number = parseFloat(vec3Str[0]);\r\n        let n2: number = parseFloat(vec3Str[1]);\r\n        let n3: number = parseFloat(vec3Str[2]);\r\n        if (isNaN(n1) || isNaN(n2) || isNaN(n3)) {\r\n          error_info.isRight = false;\r\n          error_info.message = \": \" + this.varType + \", : \" + value_str + \"Vector3|\";\r\n          return null;\r\n        } else {\r\n          rValue = new BABYLON.Vector3(n1, n2, n3);\r\n        }\r\n      }\r\n    }\r\n    return rValue;\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    let varClone: VeryVector3 = new VeryVector3();\r\n    let r: BABYLON.Vector3 = new BABYLON.Vector3(this._value.x, this._value.y, this._value.z);\r\n    varClone.setValue(r);\r\n    return varClone;\r\n  }\r\n}\r\n\r\nexport class VeryExpression implements IVeryVar {\r\n\r\n  public get varType(): string {\r\n    return this._value.expType;\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'VeryExpression';\r\n  }\r\n\r\n  public get Value(): IExpression {\r\n    return this._value;\r\n  }\r\n  public set Value(val: IExpression) {\r\n    this._value = val;\r\n  }\r\n  private _value: IExpression = ConstantExpression.Empty();\r\n\r\n  constructor(val: IExpression) {\r\n    this._value = val;\r\n  }\r\n\r\n  public setValue(val: any) {\r\n    this._value = val;\r\n  }\r\n\r\n  // \r\n  public getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n    let newVal = parseFloat(value_str);\r\n    if (!isNaN(newVal)) {\r\n      return newVal;\r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message = ': ' + this.varType + '' + value_str + ''\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    return new VeryExpression(this._value);\r\n  }\r\n}\r\n\r\nconsole.log('XXX');\r\n\r\nVeryVarManager.addVarType('bool', new VeryBool());\r\n// VeryVarManager.addVarType('', new VeryBool());\r\n\r\n// VeryVarManager.addVarType('int', new VeryInt());\r\n// VeryVarManager.addVarType('float', new VeryFloat());\r\n\r\n// VeryVarManager.addVarType('number', new VeryNumber());\r\n// VeryVarManager.addVarType('', new VeryNumber());\r\n\r\n// VeryVarManager.addVarType('string', new VeryString());\r\n// VeryVarManager.addVarType('', new VeryString());\r\n// VeryVarManager.addVarType('vector3', new VeryVector3());\r\n// VeryVarManager.addVarType('', new VeryVector3());\r\n","import { VeryTable } from \"../verytable/index\";\r\nimport { ShowError } from \"./html/showError\";\r\nimport { LoaderManager } from \"./loader/loaderManager\";\r\nimport { ErrorInfo } from \"./utility\";\r\nimport { IVeryVar, VeryVarManager } from \"./variables\";\r\nimport { VE_Expressions } from \"./expression\";\r\n\r\n// entrance\r\nexport * from \"./index\";\r\n\r\nexport class VeryEngine {\r\n\r\n  public static Canvas: HTMLCanvasElement;\r\n  public static Engine: BABYLON.Engine;\r\n  public static Scene: BABYLON.Scene;\r\n\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n\r\n  public init(data: Array<Array<string>>, project_name: string): void {\r\n    // TODO: sTable1\r\n    let tableData: VeryTable = new VeryTable(data, 'VeRyEngine');\r\n    // console.log(tableData.pos(7, 5));\r\n    // console.log(tableData);\r\n    console.log('');\r\n\r\n    // let errorInfo: ErrorInfo = new ErrorInfo();\r\n    // let v1: Nullable<IVeryVar> = VeryVarManager.createVariable('a', '', '3.1415926', errorInfo);\r\n    // console.log(v1!.getValue());\r\n    // errorInfo.clear();\r\n    // let v2: Nullable<IVeryVar> = VeryVarManager.createVariable('b', '', '', errorInfo);\r\n    // console.log(v2!.getValue());\r\n    // errorInfo.clear();\r\n    // let v3: Nullable<IVeryVar> = VeryVarManager.createVariable('c', '', '1,2,3', errorInfo);\r\n    // console.log(v3!.clone());\r\n    // errorInfo.clear();\r\n    // let v4: Nullable<IVeryVar> = VeryVarManager.createVariable('c', '', 'ac1,dg2,3', errorInfo);\r\n    // console.log(v4);\r\n    // console.log(errorInfo.message);\r\n\r\n\r\n    // let manager: LoaderManager = new LoaderManager();\r\n    // if (manager.load(projectName, tableData)) {\r\n\r\n    // }\r\n\r\n\r\n\r\n    // this.showErrorTest(tableData);\r\n  }\r\n\r\n\r\n  public showErrorTest(tableData: VeryTable): void {\r\n    // /*\r\n    ShowError.show('' + tableData.pos(7, 5));\r\n\r\n    ShowError.showError('' + tableData.pos(7, 5));\r\n\r\n    ShowError.showWarn('' + tableData.pos(7, 5));\r\n\r\n    ShowError.show('' + tableData.pos(7, 5));\r\n\r\n    ShowError.show('' + tableData.pos(7, 5));\r\n\r\n\r\n    document.getElementById(\"settingsButton\")!.addEventListener(\"click\", ShowError.close);\r\n    // */\r\n  }\r\n\r\n}","\r\nexport * from \"./veryTableRow\";\r\nexport * from \"./veryTable\";\r\nexport * from \"./veryTableSet\";\r\n","import { VeryTableRow } from \"./veryTableRow\";\r\n\r\nexport class VeryTable {\r\n  private _id: string = \"\";\r\n  public get ID(): string {\r\n    return this._id;\r\n  }\r\n  public set ID(id: string) {\r\n    this._id = id;\r\n  }\r\n\r\n  private _columnIDs: string[] = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];\r\n\r\n  private _rows: VeryTableRow[] = [];\r\n\r\n  public get RowCount(): number {\r\n    if (!this._rows) {\r\n      return 0;\r\n    } else {\r\n      return this._rows.length;\r\n    }\r\n  }\r\n\r\n  constructor(data: string[][], id = \"Sheet\") {\r\n    this._id = id;\r\n    this._rows = [];\r\n    if (data) {\r\n      for (let i = 0; i < data.length; i++) {\r\n        let newRow = new VeryTableRow(data[i]);\r\n        this._rows.push(newRow);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param row_index \r\n   * @param column_index \r\n   */\r\n  public getData(row_index: number, column_index: number): string {\r\n    // if (row_index >= 0 && row_index < this._rows.length) {\r\n    //   let row: VeryTableRow = this._rows[row_index];\r\n    //   return row.getData(column_index);\r\n    // } else {\r\n    //   return undefined;\r\n    // }\r\n    return this._rows[row_index].getData(column_index);\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param row_index \r\n   */\r\n  public getRow(row_index: number): VeryTableRow | undefined {\r\n    if (row_index >= 0 && row_index < this._rows.length) {\r\n      return this._rows[row_index];\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param row_index \r\n   * @param column_index \r\n   */\r\n  public pos(row_index: number, column_index: number): string {\r\n    // return \"\" + this.ID + \"\" + (row_index + 1) + \"\" + this.getColumnID(column_index) + \"\";\r\n    return \"\" + (row_index + 1) + \"\" + this.getColumnID(column_index) + \"\" + this.ID + \"\";\r\n  }\r\n\r\n  /**\r\n   * ID26\r\n   * @param column_index \r\n   */\r\n  private getColumnID(column_index: number): string {\r\n    if (column_index >= 0 && column_index < 26) {\r\n      return this._columnIDs[column_index];\r\n    } else if (column_index < 0) {\r\n      return 'error';\r\n    } else {\r\n      let a: number = Math.floor(column_index / 26);\r\n      let b: number = column_index % 26;\r\n      if (a === 0) {\r\n        return this._columnIDs[a];\r\n      } else {\r\n        return this._columnIDs[a - 1] + this._columnIDs[b];\r\n      }\r\n    }\r\n  }\r\n\r\n  // public addRowStringArray(row_data: string[]): void {\r\n\r\n  // }\r\n\r\n  // public addRowStrings(...strs: string[]): void {\r\n\r\n  // }\r\n\r\n  public addRow(data: VeryTableRow): void {\r\n    // \r\n    this._rows.push(data);\r\n\r\n  }\r\n\r\n\r\n}","\r\nexport class VeryTableRow {\r\n  public get Count(): number {\r\n    if (!this._rowData) {\r\n      return 0;\r\n    } else {\r\n      return this._rowData.length;\r\n    }\r\n  }\r\n\r\n  private _rowData: string[] = [];\r\n\r\n  constructor(row_data: string[]) {\r\n    this._rowData = row_data;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param column_index \r\n   */\r\n  public getData(column_index: number): string {\r\n    // if (column_index >= 0 && column_index < this.Count) {\r\n    //   return this._rowData[column_index];\r\n    // } else {\r\n    //   return undefined;\r\n    // }\r\n    return this._rowData[column_index];\r\n  }\r\n\r\n  public add(data: string): void {\r\n    this._rowData.push(data);\r\n  }\r\n\r\n  public insert(index: number, data: string): void {\r\n    // 2\r\n    this._rowData.push(data);\r\n    let tempData = this._rowData.slice(index);\r\n    tempData.push(data);\r\n    this._rowData = tempData;\r\n  }\r\n\r\n  public remove(index: number): void {\r\n    this._rowData.splice(index, 1);\r\n  }\r\n\r\n  public removeEnd(): void {\r\n    this._rowData.pop();\r\n  }\r\n\r\n\r\n\r\n  // public\r\n\r\n  // public remove(index: number): any {\r\n\r\n  // }\r\n}","// import { VeryTableRow } from \"./veryTableRow\";\r\n/**\r\n * 1. TypeScript\r\n * 2. \r\n */\r\nimport { VeryTable } from \"./veryTable\";\r\n\r\nexport class VeryTableSet {\r\n\r\n  private _tables: VeryTable[] = [];\r\n\r\n  public get Count(): number {\r\n    if (!this._tables) {\r\n      return 0;\r\n    } else {\r\n      return this._tables.length;\r\n    }\r\n  }\r\n\r\n  constructor(tables?: VeryTable[]) {\r\n    if (tables) {\r\n      this._tables = tables;\r\n    }\r\n  }\r\n\r\n  public getTable(index: number): VeryTable | undefined {\r\n    if (index >= 0 && index < this.Count) {\r\n      return this._tables[index];\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  public addTable(table: VeryTable): void {\r\n    this._tables.push(table);\r\n  }\r\n\r\n  public removeTable(index: number): void {\r\n    if (index >= 0 && index < this.Count) {\r\n      this._tables.splice(index, 1);\r\n    }\r\n  }\r\n\r\n\r\n}"]}