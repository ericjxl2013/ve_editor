{"version":3,"sources":["node_modules/_browser-pack@6.1.0@browser-pack/_prelude.js","src/game.ts","src/main.ts","src/veryengine/action/actionBehaviour.ts","src/veryengine/action/actions.ts","src/veryengine/action/assignment.ts","src/veryengine/action/assignmentTypeJudge.ts","src/veryengine/action/index.ts","src/veryengine/action/sequenceActions.ts","src/veryengine/dataSource/dataSource.ts","src/veryengine/dataSource/fsmData.ts","src/veryengine/dataSource/index.ts","src/veryengine/dataSource/stateActionData.ts","src/veryengine/dataSource/stateData.ts","src/veryengine/dataSource/stateTriggerData.ts","src/veryengine/dataSource/variableData.ts","src/veryengine/enum/enumTypes.ts","src/veryengine/enum/index.ts","src/veryengine/expression/expChar.ts","src/veryengine/expression/expManager.ts","src/veryengine/expression/expressionEnum.ts","src/veryengine/expression/expressionParsing.ts","src/veryengine/expression/expressions.ts","src/veryengine/expression/forwardQuery.ts","src/veryengine/expression/functionExpression.ts","src/veryengine/expression/functions.ts","src/veryengine/expression/index.ts","src/veryengine/expression/positions.ts","src/veryengine/expression/scope.ts","src/veryengine/expression/token.ts","src/veryengine/expression/tokenReader.ts","src/veryengine/expression/tokenizer.ts","src/veryengine/expression/variable.ts","src/veryengine/expression/variableExpression.ts","src/veryengine/expression/veryExpressions.ts","src/veryengine/global/errorManager.ts","src/veryengine/global/gameGlobal.ts","src/veryengine/global/index.ts","src/veryengine/global/time.ts","src/veryengine/html/index.ts","src/veryengine/html/showError.ts","src/veryengine/index.ts","src/veryengine/library/action/index.ts","src/veryengine/library/action/translate.ts","src/veryengine/library/trigger/index.ts","src/veryengine/library/trigger/input.ts","src/veryengine/loader/createInstance.ts","src/veryengine/loader/index.ts","src/veryengine/loader/loaderManager.ts","src/veryengine/manager/index.ts","src/veryengine/manager/manager.ts","src/veryengine/manager/projects.ts","src/veryengine/manager/reset.ts","src/veryengine/object/index.ts","src/veryengine/object/objects.ts","src/veryengine/object/veryengineObject.ts","src/veryengine/scene/index.ts","src/veryengine/scene/verySceneVariables.ts","src/veryengine/state/associatedState.ts","src/veryengine/state/fsm.ts","src/veryengine/state/index.ts","src/veryengine/state/state.ts","src/veryengine/state/stateAction.ts","src/veryengine/state/stateConst.ts","src/veryengine/template/index.ts","src/veryengine/template/template.ts","src/veryengine/template/templates.ts","src/veryengine/trigger/index.ts","src/veryengine/trigger/triggerBehaviour.ts","src/veryengine/trigger/triggers.ts","src/veryengine/utility/arrayUtility.ts","src/veryengine/utility/dictionary.ts","src/veryengine/utility/errorInfo.ts","src/veryengine/utility/index.ts","src/veryengine/utility/stringFormat.ts","src/veryengine/utility/typeConvert.ts","src/veryengine/variables/babylonVariables.ts","src/veryengine/variables/index.ts","src/veryengine/variables/variables.ts","src/veryengine/variables/veryVarManager.ts","src/veryengine/variables/veryVariables.ts","src/veryengine/veryEngine.ts","src/verytable/index.ts","src/verytable/veryTable.ts","src/verytable/veryTableRow.ts","src/verytable/veryTableSet.ts"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","veryEngine_1","Game","prototype","createScene","this","_engine","dispose","BABYLON","Engine","_canvas","VeryEngine","engine","window","addEventListener","resize","_scene","Scene","camera","ArcRotateCamera","Vector3","setPosition","attachControl","lowerBetaLimit","upperBetaLimit","Math","PI","lowerRadiusLimit","displayLoadingUI","SceneLoader","Append","scene","hideLoadingUI","init","hot1","getData","projectName","onBeforeRenderObservable","add","Time","_sum","animate","_this","runRenderLoop","width","clientWidth","render","_showFps","updateFpsPos","toggleDebug","scenes","debugLayer","isVisible","hide","show","embedMode","_fps","style","right","document","body","_table","innerHTML","getFps","toFixed","canvasElement","fps","Canvas","getElementById","game","canvas","fpsLabel","game_1","__importDefault","default","enum_1","VE_ActionBehaviour","Object","defineProperty","_enabled","val","_projectName","_objectID","_actionID","ActionType","Normal","_erveryFrame","_sequenceState","setEveryFrame","is_every_frame","setActionID","object_id","action_id","paraParser","para_array","action","action_val","every_frame","active","onUpdate","update","pause","SequenceActionState","Pause","resume","Running","stop","Initial","finish","enabled","isSequence","html_1","state_1","manager_1","VE_Actions","addAction","ids","ID","split","id","trim","toLowerCase","_actionDics","ShowError","showError","hasAction","createAction","create","remove","findAction","very_object","isCreatedAction","getAction","actionArray","StateConst","STATE_SEPARATOR","objects","VE_Manager","objectID","actionID","isCreated","otherObject","getVeryObject","utility_1","assignmentTypeJudge_1","VE_Assignment","_state","_leftType","_rightType","_leftVariable","setPos","pos","_pos","setLeftVariable","variable","AssignType","Variable","setLeftTemplate","template","Template","_leftTemplate","setLeftTemplateVar","var_id","TemplateVariable","_leftVarID","setRightVariable","_rightVariable","setRightTemplate","_rightTemplate","setRightNull","setRightTemplateVariable","_rightVarID","setRightConst","const_str","Const","_rightConstStr","setRightConstValue","const_value","_rightConstValue","assign","rightAssignment","unload","templateInstance","state","Fsm","fsmID","_totalStr","templateVarID","isCreatedExpression","isCreatedVariable","getVariable","isCreatedFsm","getFsm","fsmVar","setValue","getValue","errorInfo","ErrorInfo","initValue","isRight","exp","getExpression","VE_AssignmentTypeJudge","allowExpression","evaluate","v","allow","total_string","first","second","varType","expType","__export","VE_SequenceActions","fsmData_1","VE_DataSource","_templateID","_isTemplate","_triggerIDs","_actionIDs","_fsmIDs","fsm_id","_fsmDic","createFsm","push","VE_FsmData","_fsmPosDic","getFsmData","getFsmPos","hasFsmIndex","index","getFsmID","isCreatedTrigger","trigger_id","_triggerDic","addTrigger","trigger_data","_triggerPosDic","getTrigger","getTriggerPos","hasTriggerIndex","getTriggerID","getTriggerPara","_actionDic","action_data","action_init_val","_actionInitValue","_actionPosDic","getActionPara","getActionPos","getActionInitVal","hasActionIndex","getActionID","clear","project_name","name_id","is_template","_dataSource","_fsmID","_fsmType","_initialValStr","_states","initFsm","fsm_type","initial_var","addState","state_data","getStateData","data_source","VE_StateActionData","setNormalAction","sequence","everyFrame","type","StateActionType","Action","setAssignmentAction","var_value","totalString","varID","varValue","Assignment","VE_StateData","_fsmData","_valStr","_isInitialValue","_stateIndex","_isSequence","_triggers","_actions","_associatedStates","hasTrigger","_triggersPos","_actionsPos","hasAssociatedState","addAssociatedState","associated_state_data","_associatedStatesPos","getAssociatedState","getAssociatedStatePos","setSequence","fsm_data","val_str","is_initial_value","state_index","STATE_INDEX","logicalExp","rowIndex","VE_StateTriggerData","triggerID","logicalSwitch","VE_VariableData","_variableIDs","_varDics","addVariable","var_paras","_varPosDic","getVariableID","getVariableParas","getPos","AssignmentType","AssociatedFsmType","VariableScope","Severity","ExpChar","_value","getLine","_line","isDigit","test","isLetter","isWhiteSpace","isNewLine","isEndOfInput","is","_i","arguments","toString","value","line","scope_1","positions_1","expressionParsing_1","ExpManager","_scope","Scope","Create","_expVariable","createVariable","errors","ParseError","NameLocation","setVariable","createExpression","exp_str","VE_ExpressionParsing","parsing","find","printError","console","log","ExpressionType","tokenizer_1","expressions_1","expressionEnum_1","functionExpression_1","functions_1","variableExpression_1","veryExpressions_1","_bracketPair","input_exp","scope","var_scope","_varScope","_tokenizer","Tokenizer","parse","resultExp","buildExpression","current","isEnd","addError","getSource","consume","getProblemCollector","left","relationalExp","isOperator","reOrder","BinaryOperator","Add","Or","algebraExp","LT","LT_EQ","EQ","GT_EQ","GT","NEQ","productExp","Subtract","exponentExp","Multiply","Divide","Modulo","atomExp","BinaryExpression","Not","result","ConstantExpression","setSeal","next","isIdentifier","isKeyword","isStartBracket","newValue","Empty","isConstant","getContents","varExpression","VE_Expressions","getParseExpression","getTemplateExpression","endBracket","className","expectTrigger","OPERATOR","typeStr","isBool","isNumber","parseFloat","endStart","functionCall","loc","variableID","endsWith","VariableExpression","VeryTemplateExpression","veryObject","fsm","VeryVarExpression","isSpecialIdentifier","op","rightOp","isSealed","getPriority","getPriorityOp","replaceLeft","target","newLeft","getLeftExp","leftOp","setLeftExp","end_bracket","FunctionExpression","funcToken","CustomFunctions","hasFunction","fun","createFunction","setFunction","paraCount","addPara","parameterNumber","trigger","matches","getProjectCollector","Local","dictionary_1","template_1","TrueExpression","clone","_expType","isEmpty","_opDic","Power","And","_priority","resultAutoType","left_exp","_left","setRightExp","right_exp","_right","getOp","_op","getRightExp","_isSealed","leftValue","rightValue","subtract","multiplyByFloats","pow","getBoolean","l","x","y","z","Vector2","GetValue","Dictionary","setTemplate","_template","varExp","VE_Template","ForwardQuery","nextOffset","offset","itemBuffer","endReached","item","fetch","undefined","endOfInputIndicator","endOfInput","consumeNext","numberOfItems","shift","problemCollector","setProblemCollector","_function","func","_paras","expClone","printStr","Pow","args","NaN","Ln","Infinity","Lg","log10","Sqrt","sqrt","Abs","abs","Random","start","distance","random","Round","round","Sin","sin","ASin","asin","Cos","cos","ACos","acos","Tan","tan","ATan","atan","func_name","_functions","addFunction","funcName","SeverityExp","Warning","msg","message","getPosition","getMessage","_message","getSeverity","_severity","severity","variable_1","_parent","GetRootScope","_root","makeConstant","E","CreateWithParent","parent","name","_context","setType","Token","CreateAndFill","ch","_contents","_trigger","_source","addToTrigger","addToSource","addToContentChar","addToContent","getTokenType","setTokenType","new_type","setTrigger","setContent","content","setSource","source","EOI","symbols","isEndBracket","isStartSquareBracket","isEndSquareBracket","isStartBrace","isEndBrace","keywords","KEYWORD","values","triggers","SPECIAL_ID","isSpecialIdentifierWithContent","contents","NUMBER","BOOL","isString","STRING","_super","forwardQuery_1","expChar_1","TokenReader","__extends","_operator","_count","readChar","_inputExp","token_1","tokenReader_1","isAtStartOfLineComment","skipToEndOfLine","isAtStartOfBlockComment","skipBlockComment","isAtStartOfNumber","fetchNumber","isAtStartOfIdentifier","fetchId","_stringDelimiters","fetchString","isAtBracket","isAtStartOfSpecialId","fetchSpecialId","fetchOperator","hasDecimal","_decimalSeparator","isIdentifierChar","_specialIdTerminators","indexOf","specialId","handleKeywords","separator","_lineComment","canConsumeThisString","check_string","_blockCommentStart","isAtEndOfBlockComment","_blockCommentEnd","in_symbol","_brackets","_treatSinglePipeAsBracket","_specialIdStarters","id_token","keyword","_keywordsCaseSensitive","_keywords","_boolConstant","keywordToken","addWarning","_constant","getName","_name","scene_1","createSceneExpression","expression_str","error_info","sceneExp","errorMessage","createGlobalExpression","globalExp","Global","createLocalExpression","localExp","createFsmExpression","fsmExp","varArray","substring","startsWith","VARIABLE_SYMBOL","getParseGlobal","getParseScene","variables","VerySceneVariables","Variables","errorStr","isCreatedTemplate","getTemplate","VE_Error","warning","table_name","error","getTableName","_tableName","VE_ErrorManager","_errorList","getError","print","prefix","splice","printWarnning","GameGlobal","_frame","getDeltaTime","initZone","errorZone","showMsg","error_msg","errorContentNow","errorContentPrefix","display","closeBtn","querySelector","that","showWarn","close","index_1","Action_Translate","destroy","apply","_refType","Space","LOCAL","trigger_1","Trigger_MouseDown","VE_TriggerBehaviour","onPointerObservable","pointInfo","VE_Triggers","variables_1","global_1","expression_1","action_1","typeConvert_1","CreateInstance","createProject","templates","globalVars","varData","count","varPara","VeryVarManager","hasVarType","newVar","addTemplate","addExpression","getObjectID","k","dataSource","fsmCount","fsmData","fsmType","initialValStr","VE_Fsm","addFsm","triggerCount","triggerPara","createTrigger","actionCount","actionPara","stateData","VE_State","isInitialValue","setInitialValue","stateAssignment","logicalAssociated","s","triggerData","triggerPos","findTrigger","addTriggerTarget","addLogicalSwitch","actionData","actionPos","VE_TypeConvert","boolConvert","stateAction","VE_StateAction","setAction","assignmentAction","isCreatedState","stateIndex","ValStr","getState","associatedStateCount","associatedStateInfo","associatedPos","associatedState","VE_AssociatedState","multipleAssociatedState","www","strArray","intConvert","aFsmID","stateArray","q","aObject","aObjectID","aFsm","toState","global_vars","assignStr","valArray","setTemplateInfo","veryVar","setStateVariable","tObject","stateVar","setConstValue","assignment","varParas","VE_StringFormat","isFormulaString","AssignmentFormulaCount","AssignmentPrefix","VeryExpression","rightVar","rightTemplate","leftType","leftVariable","setAssignment","createInstance","object_name","destroy_on_create_new","AnalisysType","object_1","dataSource_1","createInstance_1","LoaderManager","load","table","RowCount","getRow","_activeFsmData","_activeStateData","_currentType","templateID","replace","isIDLegal","_activeTemplate","objName","nameArray","activeGameObject","GameObject","tempObject","VeryEngineObject","_activeObject","paraData","paraSegment","paraArray","_lastFsmID","stateInfo","parseInt","para2Array","tempStr","newActionID","LogCount","equalIndex","projects_1","_projects","VE_Projects","projects","isCreatedObjects","addObjects","VE_Objects","isCreatedTemplates","addTemplates","VE_Templates","isCreatedVariables","addVariables","VE_Variables","globalVarData","isCreatedGlobals","getGlobalVars","getTemplates","getVariables","getObjects","clearProject","_objects","_variables","_templates","clearPorject","sleep","VE_Reset","_objectIDs","_objectDics","unloadObject","ArrayUtility","_fsms","exp_id","_expressions","expression","template_id","isCreatedVar","keys","forEach","key","game_object","gameObject","_hasLoaded","initIfNeeded","_fromState","_types","_indexs","_numberIndex","_templateIDs","connect","from_state","stateConst_1","_id","_fsmVar","_veryObject","_stateDics","ContainsKey","removeState","Remove","receiveEvent","frameCount","_frameCount","ASSOCIATED_STATE_PREFIX","fsm_variable","stateAction_1","_fsm","_isTemplateVar","_logicalExpression","_index","_stateVariable","_assignmentType","setLogicalExpression","logical_exp","assign_str","_varID","_assignmentStr","very_var","state_action","_stateActions","addAssignment","associated_state","_assocaitedStates","_templateVar","sequenceActions","_type","_action","_everyFrame","_assignment","_templateVarID","instanceCount","_instanceCount","setInstance","instance_obj","template_var_id","cloneTemplate","_templateDic","isCreatedInstance","_instanceDic","getInstance","destory_on_create_new","_logicalSwitch","_triggerID","set","setTriggerID","_logicalExp","_triggerTargets","sendEvent","isEnabled","eventProcess","_triggerDics","triggerArray","arr","ele","Count","_keys","_values","SetValue","ks","GetKeys","GetValues","_escapeCharacters","_illegalChar","_formulaChar","strEscapeCharacterAction","para_str","tmpStr","getEscapeCharacter","strSubsectionAction","strBuilder","rStr","bracketFlag","hasQuote","para_char","getEscapeCharacter2","is_escape","strSubsection","needSpace","getParaArrayAll","coloneStr","slice","newPara","j","innerBracket","saveBracket","quotationMark","isEscape","needSaveBracket","str","hasBracket","var_str","info","num","isNaN","floatConvert","_transform","Transform","mesh","_transformNode","_mesh","localPosition","Zero","position","localEulerAngles","eulerAngles","forward","Forward","localScale","_veryVars","_tempalteVars","showError_1","veryVariables_1","var_type","_veryVarTypes","addVarType","var_prototype","createVar","getVarType","getSceneVariable","getGlobalVariable","getTemplateVariable","veryVarManager_1","VeryBool","value_str","varClone","VeryInt","Value","newFloat","VeryFloat","newVal","VeryNumber","VeryString","VeryVector3","rValue","vec3Str","n1","n2","n3","loaderManager_1","data","tableData","VeryTable","showErrorTest","veryTableRow_1","_rows","row_index","column_index","getColumnID","_columnIDs","floor","b","addRow","newRow","VeryTableRow","_rowData","insert","tempData","removeEnd","pop","row_data","VeryTableSet","_tables","getTable","addTable","removeTable","tables"],"mappings":"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","file":"veryengine.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","/// <reference path=\"./dts/babylon.d.ts\"/>\r\n\r\nimport { VeryEngine, Time } from \"./veryengine/veryEngine\";\r\n\r\nexport default class Game {\r\n\tprivate _canvas: HTMLCanvasElement;\r\n\tprivate _fps: HTMLElement;\r\n\tprivate _table!: HTMLElement;\r\n\tprivate _showFps: boolean = true;\r\n\tprivate _engine!: BABYLON.Engine;\r\n\tprivate _scene!: BABYLON.Scene;\r\n\t// private _camera!: BABYLON.FreeCamera;\r\n\r\n\tconstructor(canvasElement: HTMLCanvasElement, fps: HTMLElement) {\r\n\t\tthis._canvas = canvasElement;\r\n\t\tVeryEngine.Canvas = this._canvas;\r\n\t\tthis._fps = fps;\r\n\t\t// this._engine = new BABYLON.Engine(this._canvas, true);\r\n\t\tthis._table = document.getElementById(\"VeryTable\")!;\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\tcreateScene(): Game {\r\n\t\t// engine\r\n\t\tif (this._engine) {\r\n\t\t\tthis._engine.dispose();\r\n\t\t}\r\n\t\tthis._engine = new BABYLON.Engine(this._canvas, true);\r\n\t\tVeryEngine.Engine = this._engine;\r\n\t\t// Resize\r\n\t\tlet engine = this._engine;\r\n\t\twindow.addEventListener(\"resize\", function () {\r\n\t\t\tengine.resize();\r\n\t\t});\r\n\r\n\t\tthis._scene = new BABYLON.Scene(this._engine);\r\n\t\tVeryEngine.Scene = this._scene;\r\n\r\n\t\t// \r\n\t\tvar camera = new BABYLON.ArcRotateCamera(\"MainCamera\", 0, 0, 10, new BABYLON.Vector3(0, 0, 0), this._scene);\r\n    camera.setPosition(new BABYLON.Vector3(20, 200, 400));\r\n    camera.attachControl(this._canvas, true);\r\n    camera.lowerBetaLimit = 0.1;\r\n    camera.upperBetaLimit = (Math.PI / 2) * 0.99;\r\n    camera.lowerRadiusLimit = 150;\r\n\r\n\t\t// \r\n\t\tengine.displayLoadingUI();\r\n\r\n\t\t// scene.babylon\r\n\t\tBABYLON.SceneLoader.Append(\"./scene/\", \"scene.babylon\", this._scene, function (scene) {\r\n\t\t\t\t// do something with the scene\r\n\t\t\t\t// \r\n\t\t\t\tengine.hideLoadingUI();\r\n\t\t});\r\n\r\n\r\n\t\t// const lightPos = new BABYLON.Vector3(0, 1, 0);\r\n\t\t// new BABYLON.HemisphericLight('hemlight', lightPos, this._scene);\r\n\r\n\t\t// const sphereOpts = { segments: 16, diameter: 1 };\r\n\t\t// let sphere = BABYLON.MeshBuilder.CreateSphere(\r\n\t\t// \t'mainsphere',\r\n\t\t// \tsphereOpts,\r\n\t\t// \tthis._scene\r\n\t\t// );\r\n\t\t// sphere.position.y = 1;\r\n\r\n\t\t// const groundOpts = { width: 6, height: 6, subdivisions: 2 };\r\n\t\t// BABYLON.MeshBuilder.CreateGround('mainground', groundOpts, this._scene);\r\n\r\n\t\t// \r\n\t\t// console.log(hot1.getData());\r\n\t\tlet entrance: VeryEngine = new VeryEngine();\r\n\t\t// console.log(`${hot1.countEmptyRows()}`);\r\n\t\tentrance.init(hot1.getData(), projectName);\r\n\r\n\t\t// \r\n\t\tthis._scene.onBeforeRenderObservable.add(() => {\r\n\t\t\t// \r\n\t\t\tTime._sum();\r\n\t\t})\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\tanimate(): Game {\r\n\t\tthis._engine.runRenderLoop(() => {\r\n\t\t\tif (this._canvas.width !== this._canvas.clientWidth) {\r\n\t\t\t\tthis._engine.resize();\r\n\t\t\t}\r\n\r\n\t\t\tif (this._scene) {\r\n\t\t\t\tthis._scene.render();\r\n\t\t\t}\r\n\r\n\t\t\tif (this._showFps) {\r\n\t\t\t\tthis.updateFpsPos();\r\n\t\t\t}\r\n\r\n\r\n\t\t});\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * UI\r\n\t */\r\n\ttoggleDebug(): Game {\r\n\t\tif (this._engine) {\r\n\t\t\t// Always showing the debug layer, because you can close it by itself\r\n\t\t\tvar scene = this._engine.scenes[0];\r\n\t\t\tif (scene.debugLayer.isVisible()) {\r\n\t\t\t\tscene.debugLayer.hide();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// babylon.d.ts\r\n\t\t\t\tscene.debugLayer.show({ embedMode: true });\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * fps\r\n\t */\r\n\tupdateFpsPos(): void {\r\n\t\tif (this._fps) {\r\n\t\t\tthis._fps.style.right = document.body.clientWidth - (this._table.clientWidth + this._canvas.clientWidth) + \"px\";\r\n\r\n\t\t\tthis._fps.innerHTML = this._engine.getFps().toFixed() + \" fps\";\r\n\t\t}\r\n\t}\r\n}\r\n","\r\n\r\nimport Game from \"./game\";\r\n\r\nlet game!: Game;\r\nlet initFlag: boolean = false;\r\n\r\n/**\r\n * \r\n */\r\nfunction initGame(): void {\r\n  let canvas = <HTMLCanvasElement>document.getElementById(\"renderCanvas\");\r\n  let fpsLabel = document.getElementById(\"fpsLabel\");\r\n  if (canvas !== null && fpsLabel !== null) {\r\n    game = new Game(canvas, fpsLabel);\r\n    game.createScene().animate();  // \r\n  }\r\n}\r\n\r\nfunction runBtn(): void {\r\n  if (game) {\r\n    game.createScene().animate();\r\n  }\r\n}\r\n\r\nfunction toggleDebug(): void {\r\n  if (game) {\r\n    game.toggleDebug();\r\n  }\r\n}\r\n\r\n// \r\ndocument.getElementById(\"runButton\")!.addEventListener(\"click\", runBtn);\r\n\r\n// \r\ndocument.getElementById(\"debugButton\")!.addEventListener(\"click\", toggleDebug);\r\n\r\n// \r\n// \r\ninitGame();\r\n// loadData2()\r\n//   .then(function (hot: HandTable) {\r\n//     console.log(hot.getData());\r\n//   }\r\n//   );\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import { ActionType, SequenceActionState } from \"../enum\";\r\n\r\nexport abstract class VE_ActionBehaviour {\r\n\r\n  public abstract get ID(): string;\r\n\r\n  public get enabled(): boolean {\r\n    return this._enabled;\r\n  }\r\n  public set enabled(val: boolean) {\r\n    this._enabled = val;\r\n  }\r\n  private _enabled: boolean = true;\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  };\r\n  private _projectName: string = '';\r\n\r\n  // protected GameObject ObjectInstance = null;\r\n  // protected veryObject: VeryObject = null;\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  };\r\n  private _objectID: string = '';\r\n\r\n  public get actionID(): string {\r\n    return this._actionID;\r\n  }\r\n  private _actionID: string = '';\r\n\r\n  public get Type(): ActionType {\r\n    return ActionType.Normal;\r\n  }\r\n\r\n  private _erveryFrame: boolean = false;\r\n  public get everyFrame(): boolean {\r\n    return this._erveryFrame;\r\n  }\r\n\r\n\r\n  public isSequence: boolean = false;\r\n\r\n  public get SequenceState(): SequenceActionState {\r\n    return this._sequenceState;\r\n  }\r\n  public set SequenceState(val: SequenceActionState) {\r\n    this._sequenceState = val;\r\n  }\r\n  private _sequenceState: SequenceActionState = SequenceActionState.Initial;\r\n\r\n  // private VE_SequenceActions _sequenceAction = null;\r\n\r\n\r\n  public setEveryFrame(is_every_frame: boolean): void {\r\n    this._erveryFrame = is_every_frame;\r\n  }\r\n\r\n  public setActionID(object_id: string, action_id: string): void {\r\n    this._objectID = object_id;\r\n    this._actionID = action_id;\r\n  }\r\n\r\n  // SetVeryObject(): void {}\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    if (para_array) { }\r\n    return true;\r\n  }\r\n\r\n  public action(action_val: boolean, every_frame: boolean): void {\r\n    this._enabled = action_val;\r\n    this._erveryFrame = every_frame;\r\n    if (this._enabled) {\r\n      this.active()\r\n      if (!this._erveryFrame) {\r\n        this.onUpdate();\r\n      }\r\n    }\r\n  }\r\n\r\n  public abstract active(): void;\r\n\r\n\r\n  public update(): void {\r\n    if(this._enabled && this._erveryFrame) {\r\n      this.onUpdate();\r\n    }\r\n  }\r\n\r\n  public onUpdate(): void {\r\n\r\n  }\r\n\r\n  public pause(): void {\r\n    this._sequenceState = SequenceActionState.Pause;\r\n  }\r\n\r\n  public resume(): void {\r\n    this._sequenceState = SequenceActionState.Running;\r\n  }\r\n\r\n  public stop(): void {\r\n    this._sequenceState = SequenceActionState.Initial;\r\n  }\r\n\r\n  public finish(): void {\r\n    this._sequenceState = SequenceActionState.Initial;\r\n\r\n    this.enabled = false;\r\n  }\r\n\r\n  // add callbackdestroy\r\n  public abstract destroy(): void;\r\n\r\n\r\n}","import { VE_ActionBehaviour } from \"./actionBehaviour\";\r\nimport { ShowError } from \"../html\";\r\nimport { VeryEngineObject, VE_Objects } from \"../object\";\r\nimport { StateConst } from \"../state\";\r\nimport { VE_Manager } from \"../manager\";\r\n\r\nexport class VE_Actions {\r\n\r\n  private static _actionDics: { [key: string]: VE_ActionBehaviour } = {};\r\n\r\n  public static addAction(action: VE_ActionBehaviour): void {\r\n    let ids: string[] = action.ID.split('|');\r\n    for (let i: number = 0; i < ids.length; i++) {\r\n      let id: string = ids[i].trim().toLowerCase();\r\n      if (this._actionDics[id]) {\r\n        ShowError.showError(`IDID${id}ID`);\r\n      } else {\r\n        this._actionDics[id] = action;\r\n      }\r\n    }\r\n  }\r\n\r\n  public static hasAction(action_id: string): boolean {\r\n    action_id = action_id.toLowerCase();\r\n    if (this._actionDics[action_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static createAction(action_id: string): VE_ActionBehaviour {\r\n    action_id = action_id.toLowerCase();\r\n    return Object.create(this._actionDics[action_id]);\r\n  }\r\n\r\n  public static remove(action_id: string): void {\r\n    action_id = action_id.toLowerCase();\r\n    delete this._actionDics[action_id];\r\n  }\r\n\r\n  public static findAction(very_object: VeryEngineObject, action_id: string): Nullable<VE_ActionBehaviour> {\r\n    if (very_object.isCreatedAction(action_id)) {\r\n      return very_object.getAction(action_id);\r\n    }\r\n    else {\r\n      let actionArray: string[] = action_id.split(StateConst.STATE_SEPARATOR);\r\n      if (actionArray.length === 2) {\r\n        let objects: VE_Objects = VE_Manager.objects(very_object.projectName);\r\n        let objectID: string = actionArray[0].trim();\r\n        let actionID: string = actionArray[1].trim();\r\n        if (objects.isCreated(objectID)) {\r\n          let otherObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n          if (otherObject.isCreatedAction(actionID)) {\r\n            return otherObject.getAction(actionID);\r\n          }\r\n          else {\r\n            return null;\r\n          }\r\n        }\r\n        else {\r\n          return null;\r\n        }\r\n      }\r\n      else {\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n}","import { VE_State } from \"../state\";\r\nimport { AssignType } from \"../enum\";\r\nimport { IVeryVar } from \"../variables\";\r\nimport { VE_Template } from \"../template\";\r\nimport { ShowError } from \"../html\";\r\nimport { ErrorInfo } from \"../utility\";\r\nimport { IExpression } from \"../expression\";\r\nimport { VE_AssignmentTypeJudge } from \"./assignmentTypeJudge\";\r\n\r\nexport class VE_Assignment {\r\n\r\n  public get state(): VE_State {\r\n    return this._state;\r\n  }\r\n  private _state: VE_State;\r\n\r\n  private _totalStr: string = '';\r\n\r\n  public get leftType(): AssignType {\r\n    return this._leftType;\r\n  }\r\n  private _leftType: AssignType = AssignType.Variable;\r\n\r\n  public get rightType(): AssignType {\r\n    return this._rightType;\r\n  }\r\n  private _rightType: AssignType = AssignType.Variable;\r\n\r\n  public get leftVariable(): Nullable<IVeryVar> {\r\n    return this._leftVariable;\r\n  }\r\n  private _leftVariable: Nullable<IVeryVar> = null;\r\n  private _leftTemplate: Nullable<VE_Template> = null;\r\n  private _leftVarID: string = '';\r\n\r\n  private _rightConstStr: string = '';\r\n  private _rightConstValue: any = null;\r\n  public get rightVariable(): Nullable<IVeryVar> {\r\n    return this._leftVariable;\r\n  }\r\n  private _rightVariable: Nullable<IVeryVar> = null;\r\n  private _rightTemplate: Nullable<VE_Template> = null;\r\n  private _rightVarID: string = '';\r\n\r\n  private _pos: string = '';\r\n\r\n  constructor(state: VE_State, total_string: string) {\r\n    this._state = state;\r\n    this._totalStr = total_string;\r\n  }\r\n\r\n  public setPos(pos: string): void {\r\n    this._pos = pos;\r\n  }\r\n\r\n  public setLeftVariable(variable: IVeryVar): void {\r\n    this._leftType = AssignType.Variable;\r\n    this._leftVariable = variable;\r\n  }\r\n\r\n  public setLeftTemplate(template: VE_Template): void {\r\n    this._leftType = AssignType.Template;\r\n    this._leftTemplate = template;\r\n  }\r\n\r\n  public setLeftTemplateVar(template: VE_Template, var_id: string): void {\r\n    this._leftType = AssignType.TemplateVariable;\r\n    this._leftTemplate = template;\r\n    this._leftVarID = var_id;\r\n  }\r\n\r\n  public setRightVariable(variable: IVeryVar): void {\r\n    this._rightType = AssignType.Variable;\r\n    this._rightVariable = variable;\r\n  }\r\n\r\n  public setRightTemplate(template: VE_Template): void {\r\n    this._rightType = AssignType.Template;\r\n    this._rightTemplate = template;\r\n  }\r\n\r\n  public setRightNull(): void {\r\n    this._rightType = AssignType.Template;\r\n    this._rightTemplate = null;\r\n  }\r\n\r\n  public setRightTemplateVariable(template: VE_Template, var_id: string): void {\r\n    this._rightType = AssignType.TemplateVariable;\r\n    this._rightTemplate = template;\r\n    this._rightVarID = var_id;\r\n  }\r\n\r\n  public setRightConst(const_str: string): void {\r\n    this._rightType = AssignType.Const;\r\n    this._rightConstStr = const_str;\r\n  }\r\n\r\n  public setRightConstValue(const_value: any) {\r\n    this._rightType = AssignType.Const;\r\n    this._rightConstValue = const_value;\r\n  }\r\n\r\n  public finish(): void {\r\n\r\n  }\r\n\r\n  public assign(): void {\r\n    // \r\n    if (this._leftType === AssignType.Variable) {\r\n      this.rightAssignment();\r\n    }\r\n    // \r\n    else if (this._leftType === AssignType.Template) {\r\n      if (this._rightTemplate == null) {\r\n        if (this._leftTemplate !== null) {\r\n          this._leftTemplate.unload();\r\n        }\r\n      }\r\n      else {\r\n        this._leftTemplate = this._rightTemplate;\r\n      }\r\n    }\r\n    // .\r\n    else {\r\n      if (this._leftTemplate!.templateInstance !== null) {\r\n        if (this._leftTemplate!.templateInstance.isCreatedExpression(this._leftVarID)) {\r\n          ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n          return;\r\n        }\r\n        else if (this._leftTemplate!.templateInstance.isCreatedVariable(this._leftVarID)) {\r\n          this._leftVariable = this._leftTemplate!.templateInstance.getVariable(this._leftVarID);\r\n          this.rightAssignment();\r\n        }\r\n        else if (this._leftTemplate!.templateInstance.isCreatedFsm(this._leftVarID)) {\r\n          this._leftVariable = this._leftTemplate!.templateInstance.getFsm(this._leftVarID).fsmVar;\r\n          this.rightAssignment();\r\n        }\r\n        else {\r\n          ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n          return;\r\n        }\r\n      }\r\n      else {\r\n        ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._leftTemplate!.templateVarID);\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n  private rightAssignment(): void {\r\n    // \r\n    if (this._rightType === AssignType.Variable) {\r\n      this._leftVariable!.setValue(this._rightVariable!.getValue());\r\n    }\r\n    // \r\n    else if (this._rightType === AssignType.Const) {\r\n      if (this._rightConstValue === null) {\r\n        let errorInfo: ErrorInfo = new ErrorInfo();\r\n        this._rightConstValue = this._leftVariable!.initValue(this._rightConstStr, errorInfo);\r\n        if (!errorInfo.isRight) {\r\n          ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightConstStr);\r\n          return;\r\n        }\r\n        else {\r\n          //UnityEngine.Debug.Log(\"1 - \" + _totalStr + \"\" + this._rightConstValue);\r\n          this._leftVariable!.setValue(this._rightConstValue);\r\n        }\r\n      }\r\n      else {\r\n        //UnityEngine.Debug.Log(\"2 - \" + _totalStr + \"\" + this._rightConstValue);\r\n        this._leftVariable!.setValue(this._rightConstValue);\r\n      }\r\n    }\r\n    else  //.\r\n    {\r\n      if (this._rightTemplate!.templateInstance != null) {\r\n        if (this._rightTemplate!.templateInstance.isCreatedExpression(this._rightVarID)) {\r\n          let exp: IExpression = this._rightTemplate!.templateInstance.getExpression(this._rightVarID);\r\n          if (VE_AssignmentTypeJudge.allowExpression(this._leftVariable!, exp)) {\r\n            this._leftVariable!.setValue(exp.evaluate());\r\n          }\r\n          else {\r\n            ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n            return;\r\n          }\r\n        }\r\n        else if (this._rightTemplate!.templateInstance.isCreatedVariable(this._rightVarID)) {\r\n          let v: IVeryVar = this._rightTemplate!.templateInstance.getVariable(this._rightVarID);\r\n          if (VE_AssignmentTypeJudge.allow(this._leftVariable!, v)) {\r\n            this._leftVariable!.setValue(v.getValue());\r\n          }\r\n          else {\r\n            ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n            return;\r\n          }\r\n        }\r\n        else if (this._rightTemplate!.templateInstance.isCreatedFsm(this._rightVarID)) {\r\n          let v: IVeryVar = this._rightTemplate!.templateInstance.getFsm(this._rightVarID).fsmVar;\r\n          if (VE_AssignmentTypeJudge.allow(this._leftVariable!, v)) {\r\n            this._leftVariable!.setValue(v.getValue());\r\n          }\r\n          else {\r\n            ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n            return;\r\n          }\r\n        }\r\n        else {\r\n          ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n          return;\r\n        }\r\n      }\r\n      else {\r\n        ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n}","import { IVeryVar } from \"../variables\";\r\nimport { IExpression } from \"../expression\";\r\n\r\nexport class VE_AssignmentTypeJudge {\r\n\r\n  public static allow(first: IVeryVar, second: IVeryVar): boolean {\r\n    if (first.varType === second.varType) {\r\n      return true;\r\n    }\r\n    else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static allowExpression(first: IVeryVar, second: IExpression): boolean {\r\n    if (first.varType === second.expType) {\r\n      return true;\r\n    }\r\n    else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n}","export * from './actionBehaviour';\r\nexport * from './assignment';\r\nexport * from './actions';\r\nexport * from './sequenceActions';","import { SequenceActionState } from \"../enum\";\r\n\r\nexport class VE_SequenceActions {\r\n\r\n  public get sequenceState(): SequenceActionState {\r\n    return this._sequenceState;\r\n  }\r\n  private _sequenceState: SequenceActionState = SequenceActionState.Initial;\r\n\r\n\r\n  \r\n}","import { VE_FsmData } from \"./fsmData\";\r\n\r\nexport class VE_DataSource {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = '';\r\n\r\n  public get templateID(): string {\r\n    return this._templateID;\r\n  }\r\n  private _templateID: string = '';\r\n\r\n  public get isTemplate(): boolean {\r\n    return this._isTemplate;\r\n  }\r\n  private _isTemplate: boolean = false;\r\n\r\n  public get id(): string {\r\n    if (this._isTemplate) {\r\n      return this._templateID;\r\n    } else {\r\n      return this._objectID;\r\n    }\r\n  }\r\n\r\n  private _fsmIDs: string[] = [];\r\n  private _fsmDic: { [key: string]: VE_FsmData } = {};\r\n  private _fsmPosDic: { [key: string]: string } = {};\r\n\r\n  private _triggerIDs: string[] = [];\r\n  private _triggerDic: { [key: string]: string[] } = {};\r\n  private _triggerPosDic: { [key: string]: string } = {};\r\n\r\n  private _actionIDs: string[] = [];\r\n  private _actionDic: { [key: string]: string[] } = {};\r\n  private _actionInitValue: { [key: string]: string[] } = {};\r\n  private _actionPosDic: { [key: string]: string } = {};\r\n\r\n  public get triggerCount(): number {\r\n    return this._triggerIDs.length;\r\n  }\r\n\r\n  public get actionCount(): number {\r\n    return this._actionIDs.length;\r\n  }\r\n\r\n  public get fsmCount(): number {\r\n    return this._fsmIDs.length;\r\n  }\r\n\r\n\r\n  constructor(project_name: string, name_id: string, is_template: boolean) {\r\n    this._projectName = project_name;\r\n    this._isTemplate = is_template;\r\n    if(is_template) {\r\n      this._templateID = name_id;\r\n    } else {\r\n      this._objectID = name_id;\r\n    }\r\n  }\r\n\r\n  public isCreatedFsm(fsm_id: string): boolean {\r\n    if(this._fsmDic[fsm_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public createFsm(fsm_id: string, pos: string): void {\r\n    this._fsmIDs.push(fsm_id);\r\n    this._fsmDic[fsm_id] = new VE_FsmData(fsm_id, this);\r\n    this._fsmPosDic[fsm_id] = pos;\r\n  }\r\n\r\n  public getFsmData(fsm_id: string): VE_FsmData {\r\n    return this._fsmDic[fsm_id];\r\n  }\r\n\r\n  public getFsmPos(fsm_id: string): string {\r\n    return this._fsmPosDic[fsm_id];\r\n  }\r\n\r\n  public hasFsmIndex(index: number): boolean {\r\n    if(index >= 0 && index < this._fsmIDs.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getFsmID(index: number): string {\r\n    return this._fsmIDs[index];\r\n  }\r\n\r\n  public isCreatedTrigger(trigger_id: string): boolean {\r\n    if(this._triggerDic[trigger_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTrigger(trigger_id: string, trigger_data: string[], pos: string): void {\r\n    this._triggerIDs.push(trigger_id);\r\n    this._triggerDic[trigger_id] = trigger_data;\r\n    this._triggerPosDic[trigger_id] = pos;\r\n  }\r\n\r\n  public getTrigger(trigger_id: string): string[] {\r\n    return this._triggerDic[trigger_id];\r\n  }\r\n\r\n  public getTriggerPos(trigger_id: string): string {\r\n    return this._triggerPosDic[trigger_id];\r\n  }\r\n\r\n  public hasTriggerIndex(index: number): boolean {\r\n    if(index >=0 && index < this._triggerIDs.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getTriggerID(index: number): string {\r\n    return this._triggerIDs[index];\r\n  }\r\n\r\n  public getTriggerPara(trigger_id: string): string[] {\r\n    return this._triggerDic[trigger_id];\r\n  }\r\n\r\n  public isCreatedAction(action_id: string): boolean {\r\n    if(this._actionDic[action_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addAction(action_id: string, action_data: string[], action_init_val: string[], pos: string): void {\r\n    this._actionIDs.push(action_id);\r\n    this._actionDic[action_id] = action_data;\r\n    this._actionInitValue[action_id] = action_init_val;\r\n    this._actionPosDic[action_id] = pos;\r\n  }\r\n\r\n  public getActionPara(action_id: string): string[] {\r\n    return this._actionDic[action_id];\r\n  }\r\n\r\n  public getActionPos(action_id: string): string {\r\n    return this._actionPosDic[action_id];\r\n  }\r\n\r\n  public getActionInitVal(action_id: string): string[] {\r\n    return this._actionInitValue[action_id];\r\n  }\r\n\r\n  public hasActionIndex(index: number): boolean {\r\n    if(index >= 0 && index < this._actionIDs.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getActionID(index: number): string {\r\n    return this._actionIDs[index];\r\n  }\r\n\r\n  public clear(): void {\r\n    this._fsmIDs = [];\r\n    this._fsmDic = {};\r\n    this._triggerIDs = [];\r\n    this._triggerDic = {};\r\n    this._actionIDs = [];\r\n    this._actionDic = {};\r\n    this._actionInitValue = {};\r\n  }\r\n\r\n\r\n\r\n}","import { VE_DataSource, VE_StateData } from \"./index\";\r\n\r\nexport class VE_FsmData {\r\n  public get dataSource(): VE_DataSource {\r\n    return this._dataSource;\r\n  }\r\n  private _dataSource: VE_DataSource;\r\n\r\n  public get fsmID(): string {\r\n    return this._fsmID;\r\n  }\r\n  private _fsmID: string;\r\n\r\n  public get fsmType(): string {\r\n    return this._fsmType;\r\n  }\r\n  private _fsmType: string = '';\r\n\r\n  public get initialValStr(): string {\r\n    return this._initialValStr;\r\n  }\r\n  private _initialValStr: string = 'defalut';\r\n\r\n  private _states: VE_StateData[] = [];\r\n\r\n  public get count(): number {\r\n    return this._states.length;\r\n  }\r\n\r\n  constructor(fsm_id: string, data_source: VE_DataSource) {\r\n    this._dataSource = data_source;\r\n    this._fsmID = fsm_id;\r\n  }\r\n\r\n  public initFsm(fsm_type: string, initial_var: string): void {\r\n    this._fsmType = fsm_type;\r\n    this._initialValStr = initial_var;\r\n  }\r\n\r\n  public addState(state_data: VE_StateData): void {\r\n    this._states.push(state_data);\r\n  }\r\n\r\n  public getStateData(index: number): VE_StateData {\r\n    return this._states[index];\r\n  }\r\n\r\n}","export * from './variableData';\r\nexport * from './fsmData';\r\nexport * from './stateActionData';\r\nexport * from './stateTriggerData';\r\nexport * from './stateData';\r\nexport * from './dataSource';\r\n\r\n","import { StateActionType } from \"../enum\";\r\n\r\nexport class VE_StateActionData {\r\n\r\n  public actionID: string;\r\n  public enabled: string;\r\n  public everyFrame: string;\r\n  public isSequence: string;\r\n  public type: StateActionType;\r\n  public totalString: string = '';\r\n  public varID: string = '';\r\n  public varValue: string = '';\r\n\r\n  constructor(action_id: string, enabled: string = 'false', every_frame: string = 'false', sequence: string = 'false', type: StateActionType = StateActionType.Action) {\r\n    this.actionID = action_id;\r\n    this.enabled = enabled;\r\n    this.everyFrame = every_frame;\r\n    this.isSequence = sequence;\r\n    this.type = type;\r\n  }\r\n\r\n  public setNormalAction(action_id: string, enabled: string = 'false', every_frame: string = 'false', sequence: string = 'false'): void {\r\n    this.actionID = action_id;\r\n    this.enabled = enabled;\r\n    this.everyFrame = every_frame;\r\n    this.isSequence = sequence;\r\n    this.type = StateActionType.Action;\r\n  }\r\n\r\n  public setAssignmentAction(total_string: string, var_id: string, var_value: string): void {\r\n    this.totalString = total_string;\r\n    this.varID = var_id;\r\n    this.varValue = var_value;\r\n    this.type = StateActionType.Assignment;\r\n  }\r\n\r\n}","import { VE_FsmData } from \"./index\";\r\nimport { StateConst } from \"../state\";\r\nimport { VE_StateTriggerData } from \"./stateTriggerData\";\r\nimport { VE_StateActionData } from \"./stateActionData\";\r\n\r\nexport class VE_StateData {\r\n\r\n  public get fsmData(): VE_FsmData {\r\n    return this._fsmData;\r\n  }\r\n  private _fsmData: VE_FsmData;\r\n\r\n  public get ValStr(): string {\r\n    return this._valStr;\r\n  }\r\n  private _valStr: string;\r\n\r\n  public get isInitialValue(): boolean {\r\n    return this._isInitialValue;\r\n  }\r\n  private _isInitialValue: boolean;\r\n\r\n  public get stateIndex(): number {\r\n    return this._stateIndex;\r\n  }\r\n  private _stateIndex: number = StateConst.STATE_INDEX;\r\n\r\n  public logicalExp: string = '';\r\n\r\n  public rowIndex: number = -1;\r\n\r\n  private _triggers: VE_StateTriggerData[] = [];\r\n  private _triggersPos: string[] = [];\r\n  private _actions: VE_StateActionData[] = [];\r\n  private _actionsPos: string[] = [];\r\n  private _associatedStates: string[] = [];\r\n  private _associatedStatesPos: string[] = [];\r\n\r\n  public get isSequence(): boolean {\r\n    return this._isSequence;\r\n  }\r\n  private _isSequence: boolean = false;\r\n\r\n  public get triggerCount(): number {\r\n    return this._triggers.length;\r\n  }\r\n\r\n  public get actionCount(): number {\r\n    return this._actions.length;\r\n  }\r\n\r\n  public get associatedStateCount(): number {\r\n    return this._associatedStates.length;\r\n  }\r\n\r\n  constructor(fsm_data: VE_FsmData, val_str: string, is_initial_value: boolean, state_index: number = StateConst.STATE_INDEX) {\r\n    this._fsmData = fsm_data;\r\n    this._valStr = val_str;\r\n    this._isInitialValue = is_initial_value;\r\n    this._stateIndex = state_index;\r\n  }\r\n\r\n  public hasTrigger(index: number): boolean {\r\n    if(index >= 0 && index < this._triggers.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTrigger(trigger_data: VE_StateTriggerData, pos: string): void {\r\n    this._triggers.push(trigger_data);\r\n    this._triggersPos.push(pos);\r\n  }\r\n\r\n  public getTrigger(index: number): VE_StateTriggerData {\r\n    return this._triggers[index];\r\n  }\r\n\r\n  public getTriggerPos(index: number): string {\r\n    return this._triggersPos[index];\r\n  }\r\n\r\n  public hasAction(index: number): boolean {\r\n    if(index >= 0 && index < this._actions.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addAction(action_data: VE_StateActionData, pos: string): void {\r\n    this._actions.push(action_data);\r\n    this._actionsPos.push(pos);\r\n  }\r\n\r\n  public getAction(index: number): VE_StateActionData {\r\n    return this._actions[index];\r\n  }\r\n\r\n  public getActionPos(index: number): string {\r\n    return this._actionsPos[index];\r\n  }\r\n\r\n  public hasAssociatedState(index: number): boolean {\r\n    if(index >= 0 && index < this._associatedStates.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addAssociatedState(associated_state_data: string, pos: string): void {\r\n    this._associatedStates.push(associated_state_data);\r\n    this._associatedStatesPos.push(pos);\r\n  }\r\n\r\n  public getAssociatedState(index: number): string {\r\n    return this._associatedStates[index];\r\n  }\r\n\r\n  public getAssociatedStatePos(index: number): string {\r\n    return this._associatedStatesPos[index];\r\n  }\r\n\r\n  public setSequence(): void {\r\n    this._isSequence = true;\r\n  }\r\n\r\n}","export class VE_StateTriggerData {\r\n\r\n  public triggerID: string;\r\n  public logicalSwitch: string;\r\n  public logicalExp: string;\r\n\r\n  public static get Empty(): VE_StateTriggerData {\r\n    return new VE_StateTriggerData('');\r\n  }\r\n\r\n  constructor(trigger_id: string) {\r\n    this.triggerID = trigger_id;\r\n    this.logicalSwitch = '';\r\n    this.logicalExp = '';\r\n   }\r\n}","export class VE_VariableData {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  private _variableIDs: string[] = [];\r\n  private _varDics: { [key: string]: string[] } = {};\r\n  private _varPosDic: { [key: string]: string } = {};\r\n\r\n  public get count(): number {\r\n    return this._variableIDs.length;\r\n  }\r\n\r\n  constructor(project_name: string) {\r\n    this._projectName = project_name;\r\n  }\r\n\r\n  public isCreatedVariable(var_id: string): boolean {\r\n    if (this._varDics[var_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addVariable(var_id: string, var_paras: string[], pos: string): void {\r\n    this._varDics[var_id] = var_paras;\r\n    this._variableIDs.push(var_id);\r\n    this._varPosDic[var_id] = pos;\r\n  }\r\n\r\n  public getVariableID(index: number): string {\r\n    if (index >= 0 && index < this._variableIDs.length) {\r\n      return this._variableIDs[index];\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n\r\n  public getVariableParas(var_id: string): string[] {\r\n    return this._varDics[var_id];\r\n  }\r\n\r\n  public getPos(var_id: string): string {\r\n    return this._varPosDic[var_id];\r\n  }\r\n\r\n  public clear(): void {\r\n    this._variableIDs = [];\r\n    this._varDics = {};\r\n  }\r\n}","\r\n\r\n\r\nexport enum ActionType {\r\n  Normal, Animation\r\n}\r\n\r\nexport enum SequenceActionState {\r\n  Initial, Prepared, Running, Pause\r\n}\r\n\r\nexport enum StateActionType {\r\n  Action, Assignment\r\n}\r\n\r\nexport enum AssignType {\r\n  Variable = 0,\r\n  Template,\r\n  TemplateVariable,\r\n  Const,\r\n}\r\n\r\nexport enum AssignmentType {\r\n  Const = 0,\r\n  Variable,\r\n  Expression\r\n}\r\n\r\nexport enum AssociatedFsmType {\r\n  Object = 0,\r\n  Template\r\n}\r\n\r\nexport enum VariableScope {\r\n  Local = 0,\r\n  Fsm,\r\n  Global,\r\n  Scene\r\n}\r\n\r\nexport enum Severity {\r\n  Warning,\r\n  Error\r\n}\r\n\r\n","export * from './enumTypes';","import { IPosition } from \"./positions\";\r\n\r\nexport class ExpChar implements IPosition {\r\n\r\n  private _value: string = '';\r\n  private _line: number = 0;\r\n  private _pos: number = 0;\r\n\r\n\r\n  constructor(value: string, line: number, pos: number) {\r\n    this._value = value;\r\n    this._line = line;\r\n    this._pos = pos;\r\n  }\r\n\r\n  public getValue(): string {\r\n    return this._value;\r\n  }\r\n\r\n  public getLine(): number {\r\n    return this._line;\r\n  }  \r\n  \r\n  public getPos(): number {\r\n    \r\n    return this._pos;\r\n  }\r\n\r\n  public isDigit(): boolean {\r\n    return (/\\d/).test(this._value);\r\n  }\r\n\r\n  public isLetter(): boolean {\r\n    return (/[a-zA-Z]/).test(this._value);\r\n  }\r\n\r\n  public isWhiteSpace(): boolean {\r\n    return this._value === ' ';\r\n  }\r\n\r\n  public isNewLine(): boolean {\r\n    return this._value === '\\n';\r\n  }\r\n\r\n  public isEndOfInput(): boolean {\r\n    return this._value === '\\0';\r\n  }\r\n\r\n  public is(...val: string[]): boolean {\r\n    for(let i: number = 0; i < val.length; i++) {\r\n      if(val[i] === this._value && val[i] !== '\\0') {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public toString(): string {\r\n    return this._value;\r\n  }\r\n\r\n}\r\n\r\n","import { Scope } from \"./scope\";\r\nimport { IExpression } from \"./expressions\";\r\nimport { ParseError, NameLocation } from \"./positions\";\r\nimport { VE_ExpressionParsing } from \"./expressionParsing\";\r\nimport { VariableScope } from \"../enum\";\r\nimport { Variable } from \"./variable\";\r\nimport { ShowError } from \"../html\";\r\n\r\nexport class ExpManager {\r\n\r\n  private static _scope: Scope;\r\n  private static _expVariable: { [key: string]: IExpression } = {};\r\n\r\n  public static errors: ParseError[] = [];\r\n\r\n  private static _projectName = '';\r\n  private static _objectID = '';\r\n\r\n  public static init() {\r\n    this._scope = Scope.Create();\r\n  }\r\n\r\n  public static isCreated(name_id: string): boolean {\r\n    if (this._scope.isCreated(name_id)) {\r\n      return true;\r\n    }\r\n    if (this._expVariable[name_id]) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public static isCreatedVariable(name_id: string): boolean {\r\n    if (this._scope.isCreated(name_id)) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static isCreatedExpression(name_id: string): boolean {\r\n    if (this._expVariable[name_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static createVariable(name_id: string, type: string, value: any): boolean {\r\n    this.errors = [];\r\n    if (this.isCreated(name_id)) {\r\n      this.errors.push(ParseError.Error(new NameLocation(name_id), `${name_id}${type}`));\r\n      return false;\r\n    }\r\n    this._scope.setVariable(name_id, type, value);\r\n    return true;\r\n  }\r\n\r\n  public static createExpression(name_id: string, exp_str: string): boolean {\r\n    this.errors = [];\r\n    if (this.isCreated(name_id)) {\r\n      this.errors.push(ParseError.Error(new NameLocation(name_id), `${name_id}${exp_str}`));\r\n      return false;\r\n    }\r\n    let exp: IExpression = VE_ExpressionParsing.parsing(name_id, exp_str, this._scope, this._projectName, '', '', VariableScope.Scene);\r\n    if (VE_ExpressionParsing.errors.length > 0) {\r\n      for (let i: number = 0; i < VE_ExpressionParsing.errors.length; i++) {\r\n        this.errors.push(VE_ExpressionParsing.errors[i]);\r\n      }\r\n      return false;\r\n    }\r\n    this._expVariable[name_id] = exp;\r\n    return true;\r\n  }\r\n\r\n  public static getValue(name_id: string): any {\r\n    if (this.isCreated(name_id)) {\r\n      if (this.isCreatedVariable(name_id)) {\r\n        return this._scope.find(name_id)!.getValue();\r\n      } else {\r\n        return this._expVariable[name_id].evaluate();\r\n      }\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static getExpression(name_id: string): IExpression | null {\r\n    if (this._expVariable[name_id]) {\r\n      return this._expVariable[name_id];\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static getVariable(name_id: string): Variable | null {\r\n    if (this.isCreatedVariable(name_id)) {\r\n      return this._scope.find(name_id);\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n\r\n  public static printError(): void {\r\n    if (this.errors.length > 0) {\r\n      for (let i: number = 0; i < this.errors.length; i++) {\r\n        console.log(this.errors[i].toString());\r\n        ShowError.showError(this.errors[i].toString());\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n}\r\n\r\nExpManager.init();\r\n\r\n// try {\r\n//   ExpManager.createVariable('first', 'number', 1);\r\n//   ExpManager.createVariable('second', 'number', 2);\r\n//   ExpManager.createVariable('third', 'bool', true);\r\n//   console.log(ExpManager.getValue('third'));\r\n\r\n//   // ExpManager.createExpression('add', '(1 + first + second * (first + second + 3)) / 2');\r\n//   // ExpManager.createExpression('add', 'cos(PI/2) + sin(PI/2)');\r\n//   // console.log(ExpManager.getExpression('add')!.toString());\r\n//   // console.log(' ' + ExpManager.getExpression('add')!.evaluate());\r\n\r\n//   // ExpManager.createExpression('exp1', 'second + 2 * second + abs(-10)');\r\n//   ExpManager.createExpression('exp1', 'first * second + second > 10');\r\n//   console.log('2 ' + ExpManager.getExpression('exp1')!.evaluate());\r\n\r\n//   // ExpManager.createExpression('multiply', 'x * y');\r\n//   // ExpManager.createExpression('substract', 'x - y');\r\n\r\n//   // console.log(ExpManager.getExpression('add')!.evaluate());\r\n\r\n//   // console.log(ExpManager.getExpression('multiply')!.evaluate());\r\n//   // console.log(ExpManager.getExpression('substract')!.evaluate());\r\n\r\n// }\r\n// catch {\r\n\r\n// }\r\n\r\n// ExpManager.printError();\r\n\r\n\r\n","export enum ExpressionType {\r\n  ID, SPECIAL_ID, KEYWORD, STRING, NUMBER, BOOL, OPERATOR, INTEGER, FLOAT, DOUBLE, EOI\r\n}","import { Scope } from \"./scope\";\r\nimport { Tokenizer } from \"./tokenizer\";\r\nimport { ParseError, IPosition } from \"./positions\";\r\nimport { IExpression, BinaryOperator, BinaryExpression, ConstantExpression, VeryTemplateExpression, VeryVarExpression } from \"./expressions\";\r\nimport { ExpressionType } from \"./expressionEnum\";\r\nimport { FunctionExpression } from \"./functionExpression\";\r\nimport { Token } from \"./token\";\r\nimport { IFunction, CustomFunctions } from \"./functions\";\r\nimport { Variable } from \"./variable\";\r\nimport { VariableExpression } from \"./variableExpression\";\r\nimport { VariableScope } from \"../enum\";\r\nimport { VE_Expressions } from \"./veryExpressions\";\r\nimport { VE_Objects, VeryEngineObject } from \"../object\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { VE_Fsm } from \"../state\";\r\n\r\n\r\n\r\nexport class VE_ExpressionParsing {\r\n\r\n  private static _bracketPair: { [key: string]: string } = {};\r\n\r\n  private static _scope: Scope;\r\n  private static _tokenizer: Tokenizer;\r\n\r\n  public static errors: ParseError[] = [];\r\n\r\n  private static _projectName: string = '';\r\n  private static _objectID: string = '';\r\n  private static _fsmID = '';\r\n\r\n  private static _varScope: VariableScope = VariableScope.Local;\r\n\r\n\r\n  public static init(): void {\r\n    this._bracketPair['('] = ')';\r\n    this._bracketPair['['] = ']';\r\n    this._bracketPair['{'] = '}';\r\n    this._bracketPair[''] = '';\r\n    this._bracketPair[''] = '';\r\n  }\r\n\r\n  public static parsing(name_id: string, input_exp: string, scope: Scope, project_name: string, object_id: string, fsm_id: string, var_scope: VariableScope): IExpression {\r\n    this._scope = scope;\r\n    this._projectName = project_name;\r\n    this._objectID = object_id;\r\n    this._fsmID = fsm_id;\r\n    this._varScope = var_scope;\r\n    this._tokenizer = new Tokenizer(input_exp);\r\n    // while(!this._tokenizer.current().isEnd()) {\r\n    //   console.log(this._tokenizer.consume());\r\n    // }\r\n    this.errors = [];\r\n    return this.parse();\r\n  }\r\n\r\n  private static parse(): IExpression {\r\n    let resultExp: IExpression = this.buildExpression();\r\n    if (!this._tokenizer.current().isEnd()) {\r\n      this._tokenizer.addError(this._tokenizer.current(), `${this._tokenizer.current().getSource()}`);\r\n      this._tokenizer.consume();\r\n    }\r\n    this.errors = this._tokenizer.getProblemCollector();\r\n    return resultExp;\r\n  }\r\n\r\n\r\n  private static buildExpression(): IExpression {\r\n    let left: IExpression = this.relationalExp();\r\n    if (this._tokenizer.current().isOperator('&&')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.buildExpression();\r\n      return this.reOrder(left, right, BinaryOperator.Add);\r\n    }\r\n    if (this._tokenizer.current().isOperator('||')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.buildExpression();\r\n      return this.reOrder(left, right, BinaryOperator.Or);\r\n    }\r\n    return left;\r\n  }\r\n\r\n\r\n  private static relationalExp(): IExpression {\r\n    let left: IExpression = this.algebraExp();\r\n    if (this._tokenizer.current().isOperator('<')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.LT);\r\n    }\r\n    if (this._tokenizer.current().isOperator('<=')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.LT_EQ);\r\n    }\r\n    if (this._tokenizer.current().isOperator('==')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.EQ);\r\n    }\r\n    if (this._tokenizer.current().isOperator('>=')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.GT_EQ);\r\n    }\r\n    if (this._tokenizer.current().isOperator('>')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.GT);\r\n    }\r\n    if (this._tokenizer.current().isOperator('!=')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.NEQ);\r\n    }\r\n    return left;\r\n  }\r\n\r\n  private static algebraExp(): IExpression {\r\n    let left: IExpression = this.productExp();\r\n    if (this._tokenizer.current().isOperator('+')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.algebraExp();\r\n      return this.reOrder(left, right, BinaryOperator.Add);\r\n    }\r\n    if (this._tokenizer.current().isOperator('-')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.algebraExp();\r\n      return this.reOrder(left, right, BinaryOperator.Subtract);\r\n    }\r\n    return left;\r\n  }\r\n\r\n  private static productExp(): IExpression {\r\n    let left: IExpression = this.exponentExp();\r\n    if (this._tokenizer.current().isOperator('*')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.productExp();\r\n      return this.reOrder(left, right, BinaryOperator.Multiply);\r\n    }\r\n    if (this._tokenizer.current().isOperator('/')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.productExp();\r\n      return this.reOrder(left, right, BinaryOperator.Divide);\r\n    }\r\n    if (this._tokenizer.current().isOperator('%')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.productExp();\r\n      return this.reOrder(left, right, BinaryOperator.Modulo);\r\n    }\r\n    return left;\r\n  }\r\n\r\n  private static exponentExp(): IExpression {\r\n    let left: IExpression = this.atomExp();\r\n    if (this._tokenizer.current().isOperator('!') || this._tokenizer.current().isOperator('')) {\r\n      left = new BinaryExpression(left, left, BinaryOperator.Not);\r\n    }\r\n    return left;\r\n  }\r\n\r\n  private static atomExp(): IExpression {\r\n    // -\r\n    if (this._tokenizer.current().isOperator('-')) {\r\n      this._tokenizer.consume();\r\n      let result: BinaryExpression = new BinaryExpression(new ConstantExpression(0, 'number'), this.atomExp(), BinaryOperator.Subtract);\r\n      result.setSeal();\r\n      return result;\r\n    }\r\n    // \r\n    if (this._tokenizer.current().isOperator('!') && (this._tokenizer.next().isIdentifier() || this._tokenizer.next().isKeyword() || this._tokenizer.next().isStartBracket())) {\r\n      this._tokenizer.consume();\r\n      let newValue: IExpression = this.atomExp();\r\n      if (newValue.expType === 'bool') {\r\n        let notExp: BinaryExpression = new BinaryExpression(newValue, newValue, BinaryOperator.Not);\r\n        return notExp;\r\n      } else {\r\n        this._tokenizer.addError(this._tokenizer.current(), '(!)bool');\r\n        return ConstantExpression.Empty();\r\n      }\r\n    }\r\n    // +\r\n    if (this._tokenizer.current().isOperator('+') && this._tokenizer.next().isStartBracket()) {\r\n      this._tokenizer.consume();\r\n    }\r\n    // +\r\n    if (this._tokenizer.current().isOperator('+') && this._tokenizer.next().isConstant()) {\r\n      this._tokenizer.consume();\r\n    }\r\n    // +\r\n    if (this._tokenizer.current().isOperator('+') && this._tokenizer.next().isIdentifier()) {\r\n      this._tokenizer.consume();\r\n    }\r\n\r\n    // VeryVar\r\n    // \r\n    // 1**null2.**null3*.*4.*.*\r\n\r\n    // 1.*==null\r\n    // 2..*\r\n    if (this._tokenizer.current().isOperator(\"*\") && this._tokenizer.next().isIdentifier())  //*VeryVarVeryVarExpression\r\n    {\r\n      this._tokenizer.consume();\r\n      let varID: string = \"*\" + this._tokenizer.current().getContents();\r\n      let varExpression: Nullable<IExpression> = VE_Expressions.getParseExpression(this._projectName, this._objectID, varID, this._varScope);\r\n      if (varExpression === null) {\r\n        // \r\n        let templateExpression: Nullable<VeryTemplateExpression> = VE_Expressions.getTemplateExpression(this._projectName, this._objectID, varID, this._varScope);\r\n        if (templateExpression === null) {\r\n          this._tokenizer.addError(this._tokenizer.current(), \"VeryVar\" + varID + \"VeryVar\");\r\n          this._tokenizer.consume();\r\n          return ConstantExpression.Empty();\r\n        }\r\n        else {\r\n          //UnityEngine.Debug.LogError(\"\" + _tokenizer.current());\r\n          // this._tokenizer.consume();\r\n          // return templateExpression;\r\n          // TODO: \r\n          this._tokenizer.addError(this._tokenizer.current(), \"VeryVar\" + varID + \"\");\r\n          this._tokenizer.consume();\r\n          return ConstantExpression.Empty();\r\n        }\r\n      }\r\n      else {\r\n        this._tokenizer.consume();\r\n        return varExpression;\r\n      }\r\n    }\r\n\r\n    // \r\n    if (this._tokenizer.current().isStartBracket()) {\r\n      let endBracket: string = this._bracketPair[this._tokenizer.consume().getTrigger()];\r\n      let result: IExpression = this.buildExpression();\r\n      if (result.className === 'BinaryExpression') {\r\n        (<BinaryExpression>result).setSeal();\r\n      }\r\n      this.expectTrigger(ExpressionType.OPERATOR, endBracket); // \r\n      return result;\r\n    }\r\n    // \r\n    if (this._tokenizer.current().isConstant()) {\r\n      let value: any;\r\n      let typeStr: string = 'string';\r\n      if (this._tokenizer.current().isBool()) {\r\n        value = this._tokenizer.current().getContents().toLowerCase() === 'true' ? true : false;\r\n        typeStr = 'bool';\r\n      } else if (this._tokenizer.current().isNumber()) {\r\n        value = parseFloat(this._tokenizer.current().getContents());\r\n        typeStr = 'number';\r\n        // console.log('' + value);\r\n      } else {\r\n        value = this._tokenizer.current().getContents();\r\n        typeStr = 'string';\r\n      }\r\n      this._tokenizer.consume();\r\n      let constantExp: IExpression = new ConstantExpression(value, typeStr);\r\n      return constantExp;\r\n    }\r\n    // \r\n    if (this._tokenizer.current().isIdentifier()) {\r\n      if (this._tokenizer.next().isStartBracket()) { // \r\n        // \r\n        let endStart: string = this._bracketPair[this._tokenizer.next().getTrigger()];\r\n        return this.functionCall(endStart);\r\n      } else { // \r\n        // VryVar\r\n        let varValue: Variable | null;\r\n        let loc: IPosition = this._tokenizer.current();\r\n        let variableID: string = this._tokenizer.consume().getContents();\r\n        if (variableID.endsWith('.') && this._tokenizer.current().isOperator('*') && this._tokenizer.next().isIdentifier()) { // .*\r\n          // VeryVar.*\r\n          this._tokenizer.consume();\r\n          let varID: string = variableID + '*' + this._tokenizer.current().getContents();\r\n          let varExpression: Nullable<IExpression> = VE_Expressions.getParseExpression(this._projectName, this._objectID, varID, this._varScope);\r\n          if (varExpression === null) {\r\n            // TODO\r\n            let templateExpression: Nullable<VeryTemplateExpression> = VE_Expressions.getTemplateExpression(this._projectName, this._objectID, varID, this._varScope);\r\n            if (templateExpression === null) {\r\n              this._tokenizer.addError(loc, `VeryVar${varID}VeryVar`);\r\n            } else {\r\n              this._tokenizer.addError(this._tokenizer.current(), \"VeryVar\" + varID + \"\");\r\n            }\r\n            this._tokenizer.consume();\r\n            return ConstantExpression.Empty();\r\n          } else {\r\n            this._tokenizer.consume();\r\n            return varExpression;\r\n          }\r\n          // return ConstantExpression.Empty();\r\n        } else {\r\n          // \r\n          varValue = this._scope.find(variableID);\r\n          // console.log(variableID + '  ---  ' + varValue);\r\n          if (varValue === null) {\r\n            this._tokenizer.addError(loc, `${variableID}`);\r\n            return ConstantExpression.Empty();\r\n          } else {\r\n            return new VariableExpression(varValue);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    // TODO\r\n    if (this._tokenizer.current().isKeyword()) {\r\n      // this\r\n      if (this._tokenizer.current().getContents().toLowerCase().trim() === \"this\") {\r\n        if (this._varScope === VariableScope.Fsm && this._fsmID !== \"\") {\r\n          // \r\n          let objects: VE_Objects = VE_Manager.objects(this._projectName);\r\n          if (objects !== null) {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(this._objectID);\r\n            if (veryObject != null) {\r\n              let fsm: VE_Fsm = veryObject.getFsm(this._fsmID);\r\n              if (fsm != null) {\r\n                this._tokenizer.consume();\r\n                return new VeryVarExpression(fsm.fsmVar);\r\n              }\r\n            }\r\n          }\r\n        }\r\n        this._tokenizer.addError(this._tokenizer.current(), \"this\");\r\n        this._tokenizer.consume();\r\n        return ConstantExpression.Empty();\r\n      }\r\n      //   == null \r\n      else if (this._tokenizer.current().getContents().toLowerCase().trim() === \"null\" || this._tokenizer.current().getContents().toLowerCase().trim() === \"none\") {\r\n        //UnityEngine.Debug.LogError(\"\" + _tokenizer.current());\r\n        this._tokenizer.consume();\r\n        // TODO: \r\n        return new VeryTemplateExpression();\r\n      }\r\n      else {\r\n        this._tokenizer.addError(this._tokenizer.current(), \"\" + this._tokenizer.current().getContents() + \"\");\r\n        this._tokenizer.consume();\r\n        return ConstantExpression.Empty();\r\n      }\r\n    }\r\n\r\n    // \r\n    if (this._tokenizer.current().isSpecialIdentifier()) {\r\n      this._tokenizer.addError(this._tokenizer.current(), `ID${this._tokenizer.current().getSource()}`);\r\n      this._tokenizer.consume();\r\n      return ConstantExpression.Empty();\r\n    }\r\n\r\n    // \r\n    this._tokenizer.addError(this._tokenizer.current(), `${this._tokenizer.current().getSource()}`);\r\n    this._tokenizer.consume();\r\n\r\n    return ConstantExpression.Empty();\r\n  }\r\n\r\n  private static reOrder(left: IExpression, right: IExpression, op: BinaryOperator): IExpression {\r\n    if (right.className === 'BinaryExpression') {\r\n      let rightOp: BinaryExpression = <BinaryExpression>right;\r\n      if (!rightOp.isSealed() && rightOp.getPriority() === rightOp.getPriorityOp(op)) {\r\n        this.replaceLeft(rightOp, left, op);\r\n        return right;\r\n      }\r\n    }\r\n    return new BinaryExpression(left, right, op);\r\n  }\r\n\r\n  private static replaceLeft(target: BinaryExpression, newLeft: IExpression, op: BinaryOperator): void {\r\n    if (target.getLeftExp().className === 'BinaryExpression') {\r\n      let leftOp: BinaryExpression = <BinaryExpression>target.getLeftExp();\r\n      if (!leftOp.isSealed() && leftOp.getPriority() === leftOp.getPriorityOp(op)) {\r\n        this.replaceLeft(leftOp, newLeft, op);\r\n        return;\r\n      }\r\n    }\r\n    target.setLeftExp(new BinaryExpression(newLeft, target.getLeftExp(), op));\r\n  }\r\n\r\n  private static functionCall(end_bracket: string): IExpression {\r\n    let call: FunctionExpression = new FunctionExpression();\r\n    let funcToken: Token = this._tokenizer.consume();\r\n    if (!CustomFunctions.hasFunction(funcToken.getContents())) {\r\n      this._tokenizer.addError(funcToken, `${funcToken.getContents()}`);\r\n      return ConstantExpression.Empty();\r\n    }\r\n    let fun: IFunction = CustomFunctions.createFunction(funcToken.getContents());\r\n    call.setFunction(fun);\r\n    this._tokenizer.consume(); // \r\n    while (!this._tokenizer.current().isOperator(end_bracket) && !this._tokenizer.current().isEnd()) {\r\n      if (call.paraCount() !== 0) {\r\n        this.expectTrigger(ExpressionType.OPERATOR, ',');\r\n      }\r\n      call.addPara(this.buildExpression());\r\n    }\r\n    this.expectTrigger(ExpressionType.OPERATOR, end_bracket);\r\n    call.evaluate();\r\n    if (call.paraCount() > fun.parameterNumber() && fun.parameterNumber() >= 0) {\r\n      this._tokenizer.addError(funcToken, `${funcToken.getContents()}Max${fun.parameterNumber()}${call.paraCount()}`);\r\n      return ConstantExpression.Empty();\r\n    }\r\n    return call;\r\n  }\r\n\r\n  private static expectTrigger(type: ExpressionType, trigger: string): void {\r\n    if (this._tokenizer.current().matches(type, trigger)) {\r\n      this._tokenizer.consume();\r\n    } else {\r\n      this._tokenizer.addError(this._tokenizer.current(), `${trigger}${this._tokenizer.current().getTrigger()}`);\r\n    }\r\n  }\r\n\r\n  public static getProjectCollector(): ParseError[] {\r\n    return this._tokenizer.getProblemCollector();\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\n\r\nVE_ExpressionParsing.init();","import { Dictionary } from \"../utility/dictionary\";\r\nimport { IVeryVar } from \"../variables\";\r\nimport { VE_Template } from \"../template\";\r\n\r\nexport interface IExpression {\r\n  expType: string;\r\n  className: string;\r\n  evaluate(): any;\r\n  clone(): IExpression;\r\n}\r\n\r\nexport class TrueExpression implements IExpression {\r\n  public get expType(): string {\r\n    return 'bool';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'TrueExpression';\r\n  }\r\n\r\n  public get value(): boolean {\r\n    return true;\r\n  }\r\n\r\n  constructor() {\r\n  }\r\n\r\n  public evaluate(): any {\r\n    return true;\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let exp: TrueExpression = new TrueExpression();\r\n    return exp;\r\n  }\r\n\r\n  public toString(): string {\r\n    return 'true';\r\n  }\r\n}\r\n\r\nexport class ConstantExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    return this._expType;\r\n  }\r\n  private _expType: string = 'string';\r\n\r\n  public get className(): string {\r\n    return 'ConstantExpression';\r\n  }\r\n\r\n  private _value: any;\r\n\r\n  constructor(value: any, type: string) {\r\n    this._value = value;\r\n    this._expType = type;\r\n  }\r\n\r\n  public evaluate(): any {\r\n    return this._value;\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let expClone: ConstantExpression = new ConstantExpression(this._value, this._expType);\r\n    return expClone;\r\n  }\r\n\r\n  public static Empty(): ConstantExpression {\r\n    return new ConstantExpression(null, 'string');\r\n  }\r\n\r\n  public isEmpty(): boolean {\r\n    if (this._expType === 'string' && this._value === null) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public toString(): string {\r\n    if (this._value !== null) {\r\n      return this._value.toString();\r\n    } else {\r\n      return 'null';\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport enum BinaryOperator {\r\n  Add = '+', Subtract = '-', Multiply = '*', Divide = '/', Modulo = '%', Power = '^', LT = '<', LT_EQ = '<=', EQ = '=', GT_EQ = '>=', GT = '>', NEQ = '!=', And = '&&', Or = '||', Not = '!'\r\n}\r\n\r\nexport class BinaryExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    return this._expType;\r\n  }\r\n  private _expType = '';\r\n\r\n  public get className(): string {\r\n    return 'BinaryExpression';\r\n  }\r\n\r\n  public isRight: boolean = true;\r\n\r\n  private _op: BinaryOperator = BinaryOperator.EQ;\r\n\r\n  private _left: IExpression;\r\n  private _right: IExpression;\r\n  private _isSealed: boolean = false;\r\n\r\n  private static _opDic: { [key: string]: BinaryOperator } = {};\r\n\r\n  private static _priority: Dictionary<BinaryOperator, number> = new Dictionary<BinaryOperator, number>();\r\n\r\n  // private static _priorityKey: BinaryOperator[] = [BinaryOperator.Not, BinaryOperator.Power, BinaryOperator.Multiply, BinaryOperator.Divide, BinaryOperator.Modulo, BinaryOperator.Add, BinaryOperator.Subtract, BinaryOperator.LT, BinaryOperator.LT_EQ, BinaryOperator.EQ, BinaryOperator.GT_EQ, BinaryOperator.GT, BinaryOperator.NEQ, BinaryOperator.And, BinaryOperator.Or];\r\n\r\n  // private static _priorityValue: number[] = [2, 3, 4, 4, 4, 5, 5, 6, 6, 6, 6, 6, 6, 7, 7];\r\n\r\n  public static init(): void {\r\n    this._opDic[\"+\"] = BinaryOperator.Add;\r\n    this._opDic[\"-\"] = BinaryOperator.Subtract;\r\n    this._opDic[\"*\"] = BinaryOperator.Multiply;\r\n    this._opDic[\"/\"] = BinaryOperator.Divide;\r\n    this._opDic[\"%\"] = BinaryOperator.Modulo;\r\n    this._opDic[\"**\"] = BinaryOperator.Power;\r\n    this._opDic[\"^\"] = BinaryOperator.Power;\r\n    this._opDic[\"<\"] = BinaryOperator.LT;\r\n    this._opDic[\"<=\"] = BinaryOperator.LT_EQ;\r\n    this._opDic[\"==\"] = BinaryOperator.EQ;\r\n    this._opDic[\">=\"] = BinaryOperator.GT_EQ;\r\n    this._opDic[\">\"] = BinaryOperator.GT;\r\n    this._opDic[\"!=\"] = BinaryOperator.NEQ;\r\n    this._opDic[\"&&\"] = BinaryOperator.And;\r\n    this._opDic[\"||\"] = BinaryOperator.Or;\r\n    this._opDic[\"!\"] = BinaryOperator.Not;\r\n    this._opDic[\"\"] = BinaryOperator.Not;\r\n\r\n    this._priority.Add(BinaryOperator.Not, 2);\r\n    this._priority.Add(BinaryOperator.Power, 3);\r\n    this._priority.Add(BinaryOperator.Multiply, 4); this._priority.Add(BinaryOperator.Divide, 4); this._priority.Add(BinaryOperator.Modulo, 4);\r\n    this._priority.Add(BinaryOperator.Add, 5); this._priority.Add(BinaryOperator.Subtract, 5);\r\n    this._priority.Add(BinaryOperator.LT, 6); this._priority.Add(BinaryOperator.LT_EQ, 6); this._priority.Add(BinaryOperator.EQ, 6); this._priority.Add(BinaryOperator.GT_EQ, 6); this._priority.Add(BinaryOperator.GT, 6); this._priority.Add(BinaryOperator.NEQ, 6);\r\n    this._priority.Add(BinaryOperator.And, 7); this._priority.Add(BinaryOperator.Or, 7);\r\n  }\r\n\r\n  constructor(left_exp: IExpression, right_exp: IExpression, op: BinaryOperator) {\r\n    this._left = left_exp;\r\n    this._right = right_exp;\r\n    this._op = op;\r\n    // console.log(this._left);\r\n    // console.log(this._right);\r\n    this._expType = this.resultAutoType(left_exp, right_exp, op);\r\n    if (this._expType === 'null') {\r\n      // TODO\r\n      this.isRight = false;\r\n      console.log(\"\" + left_exp.expType + \"\" + right_exp.expType + \"\" + op.toString());\r\n    }\r\n  }\r\n\r\n  private resultAutoType(left: IExpression, right: IExpression, op: BinaryOperator): string {\r\n    if (op === BinaryOperator.Add) {\r\n      if (left.expType === 'string' || right.expType === 'string') {\r\n        return 'string';\r\n      }\r\n      else if (left.expType === 'bool' || right.expType === 'bool') {\r\n        return 'null';\r\n      }\r\n      else if (left.expType === 'number' || right.expType === 'number') {\r\n        return 'number';\r\n      }\r\n      else if (left.expType === 'vector3' || right.expType === 'vector3') {\r\n        return 'vector3';\r\n      }\r\n      else if (left.expType === 'vector2' || right.expType === 'vector2') {\r\n        return 'vector2';\r\n      }\r\n      else {\r\n        return 'null';\r\n      }\r\n    } else if (op === BinaryOperator.Divide || op === BinaryOperator.Multiply || op === BinaryOperator.Modulo || op === BinaryOperator.Power || op === BinaryOperator.Subtract) {\r\n      if (left.expType === 'string' || right.expType === 'string' || left.expType === 'bool' || left.expType === 'bool') {\r\n        return 'null';\r\n      }\r\n      else if (left.expType === 'vector3' && right.expType === 'vector3' && op === BinaryOperator.Subtract) {\r\n        return 'vector3';\r\n      }\r\n      else if (left.expType === 'vector2' && right.expType === 'vector2' && op === BinaryOperator.Subtract) {\r\n        return 'vector2';\r\n      }\r\n      else if ((left.expType === 'number' && right.expType === 'vector3' && op === BinaryOperator.Multiply) || (left.expType === 'vector3' && right.expType === 'number' && op == BinaryOperator.Multiply)) {\r\n        return 'vector3';\r\n      }\r\n      else if ((left.expType === 'number' && right.expType === 'vector2' && op === BinaryOperator.Multiply) || (left.expType === 'vector2' && right.expType === 'number' && op == BinaryOperator.Multiply)) {\r\n        return 'vector2';\r\n      }\r\n      else if (left.expType === 'vector3' && right.expType === 'number' && op === BinaryOperator.Divide) {\r\n        return 'vector3';\r\n      }\r\n      else if (left.expType === 'vector2' && right.expType === 'number' && op === BinaryOperator.Divide) {\r\n        return 'vector2';\r\n      }\r\n      else if (left.expType === 'number' || right.expType === 'number') {\r\n        return 'number';\r\n      }\r\n      else {\r\n        return 'null';\r\n      }\r\n    } else if (op === BinaryOperator.LT || op === BinaryOperator.LT_EQ || op === BinaryOperator.GT_EQ || op === BinaryOperator.GT) {\r\n      if (left.expType === 'string' || right.expType === 'string' || left.expType === 'bool' || right.expType === 'bool') {\r\n        return 'null';\r\n      } else {\r\n        return 'bool';\r\n      }\r\n    } else if (op === BinaryOperator.NEQ || op === BinaryOperator.EQ) {\r\n      if (right.expType !== left.expType) {\r\n        return 'null';\r\n      } else {\r\n        return 'bool';\r\n      }\r\n    } else if (op === BinaryOperator.Not) {\r\n      if (right.expType !== 'bool') {\r\n        return 'null';\r\n      } else {\r\n        return 'bool';\r\n      }\r\n    } else {\r\n      return 'string';\r\n    }\r\n  }\r\n\r\n  public setLeftExp(left_exp: IExpression): void {\r\n    this._left = left_exp;\r\n  }\r\n\r\n  public setRightExp(right_exp: IExpression): void {\r\n    this._right = right_exp;\r\n  }\r\n\r\n  public getOp(): BinaryOperator {\r\n    return this._op;\r\n  }\r\n\r\n  public getLeftExp(): IExpression {\r\n    return this._left;\r\n  }\r\n\r\n  public getRightExp(): IExpression {\r\n    return this._right;\r\n  }\r\n\r\n  public isSealed(): boolean {\r\n    return this._isSealed;\r\n  }\r\n\r\n  public setSeal(): void {\r\n    this._isSealed = true;\r\n  }\r\n\r\n  public toString(): string {\r\n    return \"(\" + this._left.toString() + \" \" + this._op.toString() + \" \" + this._right.toString() + \")\";\r\n    // return this._left.toString() + this._op.toString() + this._right.toString();\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let expClone: BinaryExpression = new BinaryExpression(this._left.clone(), this._right.clone(), this._op);\r\n    return expClone;\r\n  }\r\n\r\n  public evaluate(): any {\r\n    if (this._expType === 'null') {\r\n      return null;\r\n    }\r\n    if (this._left.className === 'FunctionExpression') {\r\n      this._left.evaluate();\r\n    }\r\n    if (this._right.className === 'FunctionExpression') {\r\n      this._right.evaluate();\r\n    }\r\n    this._expType = this.resultAutoType(this._left, this._right, this._op);\r\n    let leftValue: any = this._left.evaluate();\r\n    let rightValue: any = this._right.evaluate();\r\n    if (leftValue === null || rightValue === null) {\r\n      return null;\r\n    }\r\n    if (this._op === BinaryOperator.Add) {\r\n      if (this._expType === 'string') {\r\n        return leftValue.toString() + rightValue.toString();\r\n      } else if (this._expType === 'number') {\r\n        return leftValue + rightValue;\r\n      } else if (this._expType === 'vector3') {\r\n        return (<BABYLON.Vector3>leftValue).add((<BABYLON.Vector3>rightValue));\r\n      } else if (this._expType === 'vector2') {\r\n        return (<BABYLON.Vector2>leftValue).add((<BABYLON.Vector2>rightValue));\r\n      } else {\r\n        return null;\r\n      }\r\n    } else if (this._op === BinaryOperator.Subtract) {\r\n      if (this._expType === 'number') {\r\n        return leftValue - rightValue;\r\n      } else if (this._expType === 'vector3') {\r\n        return (<BABYLON.Vector3>leftValue).subtract((<BABYLON.Vector3>rightValue));\r\n      } else if (this._expType === 'vector2') {\r\n        return (<BABYLON.Vector2>leftValue).subtract((<BABYLON.Vector2>rightValue));\r\n      } else {\r\n        return null;\r\n      }\r\n    } else if (this._op === BinaryOperator.Multiply) {\r\n      if (this._expType === 'number') {\r\n        return leftValue * rightValue;\r\n      } else if (this._expType === 'vector3') {\r\n        if (typeof (leftValue) === 'number') {\r\n          return (<BABYLON.Vector3>rightValue).multiplyByFloats(leftValue, leftValue, leftValue);\r\n        } else if (typeof (rightValue) === 'number') {\r\n          return (<BABYLON.Vector3>leftValue).multiplyByFloats(rightValue, rightValue, rightValue);\r\n        } else {\r\n          return null;\r\n        }\r\n      } else if (this._expType === 'vector2') {\r\n        if (typeof (leftValue) === 'number') {\r\n          return (<BABYLON.Vector2>rightValue).multiplyByFloats(leftValue, leftValue);\r\n        } else if (typeof (rightValue) === 'number') {\r\n          return (<BABYLON.Vector2>leftValue).multiplyByFloats(rightValue, rightValue);\r\n        } else {\r\n          return null;\r\n        }\r\n      }\r\n    } else if (this._op === BinaryOperator.Divide) {\r\n      if (this._expType === 'number') {\r\n        return leftValue / rightValue;\r\n      } else if (this._expType === 'vector3') {\r\n        if (typeof (rightValue) === 'number') {\r\n          return new BABYLON.Vector3((<BABYLON.Vector3>leftValue).x / rightValue, (<BABYLON.Vector3>leftValue).y / rightValue, (<BABYLON.Vector3>leftValue).z / rightValue);\r\n        } else {\r\n          return null;\r\n        }\r\n      } else if (this._expType === 'vector2') {\r\n        if (typeof (rightValue) === 'number') {\r\n          return new BABYLON.Vector2((<BABYLON.Vector2>leftValue).x / rightValue, (<BABYLON.Vector2>leftValue).y / rightValue);\r\n        } else {\r\n          return null;\r\n        }\r\n      }\r\n    } else if (this._op === BinaryOperator.Modulo) {\r\n      if (typeof (leftValue) === 'number' && typeof (rightValue) === 'number') {\r\n        return leftValue % rightValue;\r\n      } else {\r\n        return null;\r\n      }\r\n    } else if (this._op === BinaryOperator.Power) {\r\n      if (typeof (leftValue) === 'number' && typeof (rightValue) === 'number') {\r\n        return Math.pow(leftValue, rightValue);\r\n      } else {\r\n        return null;\r\n      }\r\n    } else if (this._op === BinaryOperator.And) {\r\n      let l: boolean = this.getBoolean(leftValue);\r\n      let r: boolean = this.getBoolean(rightValue);\r\n      return l && r;\r\n    } else if (this._op === BinaryOperator.Or) {\r\n      let l: boolean = this.getBoolean(leftValue);\r\n      let r: boolean = this.getBoolean(rightValue);\r\n      return l || r;\r\n    } else if (this._op === BinaryOperator.LT) {\r\n      return leftValue < rightValue;\r\n    } else if (this._op === BinaryOperator.LT_EQ) {\r\n      return leftValue <= rightValue;\r\n    } else if (this._op === BinaryOperator.GT_EQ) {\r\n      return leftValue >= rightValue;\r\n    } else if (this._op === BinaryOperator.GT) {\r\n      return leftValue > rightValue;\r\n    } else if (this._op === BinaryOperator.EQ) {\r\n      return leftValue === rightValue;\r\n    } else if (this._op === BinaryOperator.NEQ) {\r\n      return leftValue !== rightValue;\r\n    } else if (this._op === BinaryOperator.Not) {\r\n      return !this.getBoolean(rightValue);\r\n    } else {\r\n      return !this.getBoolean(leftValue);\r\n    }\r\n  }\r\n\r\n  private getBoolean(value: any): boolean {\r\n    if (typeof (value) === 'number') {\r\n      if (value === 0) {\r\n        return false;\r\n      } else {\r\n        return true;\r\n      }\r\n    } else if (typeof (value) === 'string') {\r\n      if (value === '') {\r\n        return false;\r\n      } else {\r\n        return true;\r\n      }\r\n    } else if (typeof (value) === 'boolean') {\r\n      return value;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getPriority(): number {\r\n    // let p: number = BinaryExpression._priorityKey.indexOf(this._op);\r\n    // if(p > -1) {\r\n    //   return BinaryExpression._priorityValue[p];\r\n    // } else {\r\n    //   return 100;\r\n    // }\r\n    let p: number | null = BinaryExpression._priority.GetValue(this._op);\r\n    if (p === null) {\r\n      return 100;\r\n    } else {\r\n      return p;\r\n    }\r\n  }\r\n\r\n  public getPriorityOp(op: BinaryOperator): number {\r\n    // let p: number = BinaryExpression._priorityKey.indexOf(op);\r\n    // if(p > -1) {\r\n    //   return BinaryExpression._priorityValue[p];\r\n    // } else {\r\n    //   return 100;\r\n    // }\r\n    let p: number | null = BinaryExpression._priority.GetValue(op);\r\n    if (p === null) {\r\n      return 100;\r\n    } else {\r\n      return p;\r\n    }\r\n  }\r\n}\r\n\r\nexport class VeryVarExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    if (this._value) {\r\n      return this._value.varType;\r\n    } else {\r\n      return 'null';\r\n    }\r\n  }\r\n\r\n  private _value: IVeryVar;\r\n\r\n  public get className(): string {\r\n    return 'VeryVarExpression';\r\n  }\r\n\r\n  public get value(): IVeryVar {\r\n    return this._value;\r\n  }\r\n\r\n  constructor(value: IVeryVar) {\r\n    this._value = value;\r\n  }\r\n\r\n  public evaluate(): any {\r\n    return this._value.getValue();\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let expClone: VeryVarExpression = new VeryVarExpression(this._value.clone());\r\n    return expClone;\r\n  }\r\n\r\n  public toString(): string {\r\n    if (this._value) {\r\n      return this._value.toString();\r\n    } else {\r\n      return 'null';\r\n    }\r\n  }\r\n}\r\n\r\nexport class VeryTemplateExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    return 'bool';\r\n  }\r\n\r\n  private _isTemplate: boolean = false;\r\n  private _template: VE_Template;\r\n\r\n  public get className(): string {\r\n    return 'VeryTemplateExpression';\r\n  }\r\n\r\n  // public get value(): IVeryVar {\r\n  //   return this._value;\r\n  // }\r\n\r\n  // TODO \r\n  constructor() {\r\n    this._template = new VE_Template('', '');\r\n  }\r\n\r\n  public setTemplate(template: VE_Template): void {\r\n    this._isTemplate = true;\r\n    this._template = template;\r\n  }\r\n\r\n  public evaluate(): any {\r\n    if (this._isTemplate) {\r\n      if (!this._template) {\r\n        return false;\r\n      }\r\n      else {\r\n        return this._template.templateInstance !== null;\r\n      }\r\n    }\r\n    else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let varExp: VeryTemplateExpression = new VeryTemplateExpression();\r\n    varExp._template = this._template;\r\n    varExp._isTemplate = this._isTemplate;\r\n    return varExp;\r\n  }\r\n\r\n  public toString(): string {\r\n    if (this._isTemplate) {\r\n      if (!this._template) {\r\n        return \"false\";\r\n      }\r\n      else {\r\n        return (this._template.templateInstance === null).toString();\r\n      }\r\n    }\r\n    else {\r\n      return \"false\";\r\n    }\r\n  }\r\n}\r\n\r\n\r\nBinaryExpression.init();","import { ParseError } from \"./positions\";\r\n\r\nexport abstract class ForwardQuery<T> {\r\n\r\n  protected itemBuffer: Array<T> = [];\r\n\r\n  protected endReached: boolean = false;\r\n\r\n  protected problemCollector: Array<ParseError> = [];\r\n\r\n  protected endOfInputIndicator: T | undefined = undefined;\r\n\r\n  public next(): T {\r\n    return this.nextOffset(1);\r\n  }\r\n\r\n  public nextOffset(offset: number): T {\r\n    while (this.itemBuffer.length <= offset && !this.endReached) {\r\n      let item: T | undefined = this.fetch();\r\n      if (item !== undefined) {\r\n        this.itemBuffer.push(item);\r\n      } else {\r\n        this.endReached = true;\r\n      }\r\n    }\r\n    if (offset >= this.itemBuffer.length) {\r\n      if (this.endOfInputIndicator === undefined) {\r\n        this.endOfInputIndicator = this.endOfInput();\r\n      }\r\n      return this.endOfInputIndicator;\r\n    } else {\r\n      return this.itemBuffer[offset];\r\n    }\r\n  }\r\n\r\n  public current(): T {\r\n    return this.nextOffset(0);\r\n  }\r\n\r\n  protected abstract endOfInput(): T;\r\n\r\n  protected abstract fetch(): T | undefined;\r\n\r\n  public consume(): T {\r\n    let result: T = this.current();\r\n    this.consumeNext(1);\r\n    return result;\r\n  }\r\n\r\n  public consumeNext(numberOfItems: number): void {\r\n    if (numberOfItems < 0) {\r\n      return;\r\n    }\r\n    while (numberOfItems-- > 0) {\r\n      if (this.itemBuffer.length !== 0) {\r\n        this.itemBuffer.shift();\r\n      } else {\r\n        if (this.endReached) {\r\n          return;\r\n        } else {\r\n          let item: T | undefined = this.fetch();\r\n          if (item === undefined) {\r\n            this.endReached = true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public getProblemCollector(): Array<ParseError> {\r\n    return this.problemCollector;\r\n  }\r\n\r\n  public setProblemCollector(problemCollector: Array<ParseError>): void {\r\n    this.problemCollector = problemCollector;\r\n  }\r\n\r\n\r\n}","import { IExpression } from \"./expressions\";\r\nimport { IFunction } from \"./functions\";\r\n\r\nexport class FunctionExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    return this._function.expType;\r\n  }\r\n\r\n  public get className(): string {\r\n    return this._function.className;\r\n  }\r\n\r\n  private _function!: IFunction;\r\n  private _paras: IExpression[] = [];\r\n\r\n  public setFunction(func: IFunction): void {\r\n    this._function = func;\r\n  }\r\n\r\n  public addPara(exp: IExpression): void {\r\n    this._paras.push(exp);\r\n  }\r\n\r\n  public paraCount(): number {\r\n    return this._paras.length;\r\n  }\r\n\r\n  public evaluate(): any {\r\n    let r: any = null;\r\n    try {\r\n      r = this._function.evaluate(this._paras);\r\n    } catch (e) {\r\n      console.log('' + e);\r\n      return null;\r\n    }\r\n    return r;\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let expClone: FunctionExpression = new FunctionExpression();\r\n    expClone._function = this._function;\r\n    for (let i: number = 0; i < this._paras.length; i++) {\r\n      expClone._paras.push(this._paras[i].clone());\r\n    }\r\n    return expClone;\r\n  }\r\n\r\n  public toString(): string {\r\n    let printStr: string = this._function.className + '(';\r\n    for(let i: number = 0; i < this._paras.length; i++) {\r\n      if(i > 0) {\r\n        printStr += ',' + this._paras[i].toString();\r\n      } else {\r\n        printStr += this._paras[i].toString();\r\n      }\r\n    }\r\n    return printStr + ')';\r\n  }\r\n\r\n}","import { IExpression } from \"./expressions\";\r\nimport { ShowError } from \"../html\";\r\n\r\nexport interface IFunction {\r\n  expType: string;\r\n  className: string;\r\n  parameterNumber(): number;\r\n  evaluate(args: Array<IExpression>): any;\r\n}\r\n\r\nexport class Pow implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'pow';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 2;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.pow(args[0].evaluate(), args[1].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Pow1${args[0].expType}1${args[0].evaluate()}2${args[1].expType}2${args[1].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Ln implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'ln';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.log(args[0].evaluate());\r\n    if (value === NaN || value === Infinity) {\r\n      ShowError.showError(`Ln${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Lg implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'lg';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.log10(args[0].evaluate());\r\n    if (value === NaN || value === Infinity) {\r\n      ShowError.showError(`Lg${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Sqrt implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'sqrt';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.sqrt(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Sqrt${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Abs implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'abs';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.abs(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Abs${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Random implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'random';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 2;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let start: number = args[0].evaluate();\r\n    let distance: number = args[1].evaluate() - args[0].evaluate();\r\n    let value: number = Math.random() * distance + start;\r\n    if (value === NaN) {\r\n      ShowError.showError(`Random1${args[0].expType}1${args[0].evaluate()}2${args[1].expType}2${args[1].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Round implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'round';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.round(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Round${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Sin implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'sin';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.sin(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Sin${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class ASin implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'asin';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.asin(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`ASin${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Cos implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'cos';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.cos(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Cos${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class ACos implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'acos';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.acos(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`ACos${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Tan implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'tan';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.tan(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Tan${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class ATan implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'atan';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.atan(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`ATan${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\n\r\nexport class CustomFunctions {\r\n  private static _functions: {[key:string]: IFunction} = {};\r\n\r\n  public static hasFunction(func_name: string): boolean {\r\n    func_name = func_name.toLowerCase();\r\n    if(this._functions[func_name]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static addFunction(func: IFunction): void {\r\n    let funcName: string = func.className.toLowerCase();\r\n    if(this._functions[funcName]) {\r\n      ShowError.showError(`IDID${funcName}ID`);\r\n    } else {\r\n      this._functions[funcName] = func;\r\n    }\r\n  }\r\n\r\n  public static createFunction(func_name: string): IFunction {\r\n    func_name = func_name.toLowerCase();\r\n    return Object.create(this._functions[func_name]);\r\n  }\r\n\r\n  public static remove(func_name: string): void {\r\n    func_name = func_name.toLowerCase();\r\n    delete this._functions[func_name];\r\n  }\r\n}\r\n\r\n\r\nCustomFunctions.addFunction(new Pow());\r\nCustomFunctions.addFunction(new Ln());\r\nCustomFunctions.addFunction(new Lg());\r\nCustomFunctions.addFunction(new Sqrt());\r\nCustomFunctions.addFunction(new Abs());\r\nCustomFunctions.addFunction(new Random());\r\nCustomFunctions.addFunction(new Round());\r\nCustomFunctions.addFunction(new Sin());\r\nCustomFunctions.addFunction(new ASin());\r\nCustomFunctions.addFunction(new Cos());\r\nCustomFunctions.addFunction(new ACos());\r\nCustomFunctions.addFunction(new Tan());\r\nCustomFunctions.addFunction(new ATan());\r\n\r\n","export * from './expressionEnum';\r\nexport * from './expressions';\r\nexport * from './functions';\r\nexport * from './positions';\r\nexport * from './expChar';\r\nexport * from './token';\r\nexport * from './forwardQuery';\r\nexport * from './tokenizer';\r\nexport * from './tokenReader';\r\nexport * from './variable';\r\nexport * from './variableExpression';\r\nexport * from './scope';\r\nexport * from './functionExpression';\r\nexport * from './expressionParsing';\r\nexport * from './expManager';\r\nexport * from './veryExpressions';","export interface IPosition {\r\n  getLine(): number;\r\n  getPos(): number;\r\n}\r\n\r\n\r\nexport class NameLocation implements IPosition {\r\n\r\n  private _value: string = '';\r\n  private _line: number = 0;\r\n  private _pos: number = 0;\r\n\r\n\r\n  constructor(value: string) {\r\n    this._value = value;\r\n    this._line = 1;\r\n    this._pos = 1;\r\n  }\r\n\r\n\r\n  public getValue(): string {\r\n    return this._value;\r\n  }\r\n\r\n  public getLine(): number {\r\n    return this._line;\r\n  }  \r\n  \r\n  \r\n  public getPos(): number {\r\n    return this._pos;\r\n  }\r\n}\r\n\r\nexport enum SeverityExp{\r\n  Warning,\r\n  Error\r\n}\r\n\r\nexport class ParseError{\r\n\r\n  private _pos: IPosition;\r\n  private _message: string;\r\n  private _severity: SeverityExp;\r\n\r\n  constructor(pos: IPosition, msg: string, severity: SeverityExp) {\r\n    this._pos = pos;\r\n    this._message = msg;\r\n    this._severity = severity;\r\n  }\r\n\r\n  public static Warning(pos: IPosition, msg: string): ParseError {\r\n    let message: string = msg;\r\n    if(pos.getLine() > 0) {\r\n      message = `>>>${pos.getLine()}${pos.getPos()}${msg}`;\r\n    }\r\n    return new ParseError(pos, message, SeverityExp.Warning);\r\n  }\r\n\r\n  public static Error(pos: IPosition, msg: string): ParseError {\r\n    let message: string = msg;\r\n    if(pos.getLine() > 0) {\r\n      message = `>>>${pos.getLine()}${pos.getPos()}${msg}`;\r\n    }\r\n    return new ParseError(pos, message, SeverityExp.Error);\r\n  }\r\n\r\n  public getPosition(): IPosition {\r\n    return this._pos;\r\n  }\r\n\r\n  public getMessage(): string {\r\n    return this._message;\r\n  }\r\n\r\n  public getSeverity(): SeverityExp {\r\n    return this._severity;\r\n  }\r\n\r\n  public toString(): string {\r\n    return `${this._severity.toString()}${this._message}`;\r\n  }\r\n\r\n}","import { Variable } from \"./variable\";\r\n\r\nexport class Scope {\r\n\r\n  private _parent: Scope | undefined = undefined;\r\n\r\n  private _context: { [key: string]: Variable } = {};\r\n\r\n  private static _root: Scope;\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public static Create(): Scope {\r\n    let result: Scope = new Scope();\r\n    result._parent = Scope.GetRootScope();\r\n    return result;\r\n  }\r\n\r\n  public static GetRootScope(): Scope {\r\n    if (Scope._root === undefined) {\r\n      Scope._root = new Scope();\r\n      Scope._root.setVariable(\"PI\", 'number', Math.PI).makeConstant(Math.PI);\r\n      Scope._root.setVariable(\"EULER\", 'number', Math.E).makeConstant(Math.E);\r\n    }\r\n    return Scope._root;\r\n  }\r\n\r\n  public static CreateWithParent(parent: Scope): Scope {\r\n    let result: Scope = Scope.Create();\r\n    result._parent = parent;\r\n    return result;\r\n  }\r\n\r\n  public find(name: string): Variable | null {\r\n    if (this._context[name]) {\r\n      return this._context[name];\r\n    }\r\n    if (this._parent !== undefined) {\r\n      return this._parent.find(name);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  public setVariable(name: string, type: string, value: any): Variable {\r\n    let result: Variable | null = this.find(name);\r\n    if (result !== null) {\r\n      result.setType(type);\r\n      result.setValue(value);\r\n      return result;\r\n    }\r\n    return this.createVariable(name, type, value);\r\n  }\r\n\r\n  public createVariable(name: string, type: string, value: any): Variable {\r\n    if (this._context[name]) {\r\n      this._context[name].setType(type);\r\n      this._context[name].setValue(value);\r\n      return this._context[name];\r\n    }\r\n    let result: Variable = new Variable(name, type, value);\r\n    this._context[name] = result;\r\n    return result;\r\n  }\r\n\r\n\r\n  public setValue(name: string, value: any): void {\r\n    if (this._context[name]) {\r\n      this._context[name].setValue(value);\r\n    }\r\n  }\r\n\r\n  public isCreated(name: string): boolean {\r\n    if (this._context[name]) {\r\n      return true;\r\n    }\r\n    if (this._parent !== undefined) {\r\n      if (this._parent.find(name) !== null) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public clear(): void {\r\n    this._context = {};\r\n  }\r\n\r\n}","import { IPosition } from \"./positions\";\r\nimport { ExpressionType } from \"./expressionEnum\";\r\nimport { ExpChar } from \"./expChar\";\r\n\r\nexport class Token implements IPosition {\r\n\r\n  public type: ExpressionType = ExpressionType.STRING;\r\n\r\n  private _source: string = '';\r\n  private _contents: string = '';\r\n  private _trigger: string = '';\r\n\r\n  private _line: number = 0;\r\n  private _pos: number = 0;\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public static Create(type: ExpressionType, pos: IPosition): Token {\r\n    let result: Token = new Token();\r\n    result.type = type;\r\n    result._line = pos.getLine();\r\n    result._pos = pos.getPos();\r\n    return result;\r\n  }\r\n\r\n  public static CreateAndFill(type: ExpressionType, ch: ExpChar): Token {\r\n    let result: Token = new Token();\r\n    result.type = type;\r\n    result._line = ch.getLine();\r\n    result._pos = ch.getPos();\r\n    result._contents = ch.getValue();\r\n    result._trigger = ch.getValue();\r\n    result._source = ch.toString();\r\n    return result;\r\n  }\r\n\r\n  public addToTrigger(ch: ExpChar): Token {\r\n    this._trigger += ch.getValue();\r\n    this._source += ch.getValue();\r\n    return this;\r\n  }\r\n\r\n  public addToSource(ch: ExpChar): Token {\r\n    this._source += ch.getValue();\r\n    return this;\r\n  }\r\n\r\n  public addToContentChar(ch: ExpChar): Token {\r\n    this.addToContent(ch.getValue());\r\n    return this;\r\n  }\r\n\r\n  public addToContent(ch: string): Token {\r\n    this._contents += ch;\r\n    this._source += ch;\r\n    return this;\r\n  }\r\n\r\n  public getTrigger(): string {\r\n    return this._trigger;\r\n  }\r\n\r\n  public getTokenType(): ExpressionType {\r\n    return this.type;\r\n  }\r\n\r\n  public getContents(): string {\r\n    return this._contents;\r\n  }\r\n\r\n  public getSource(): string {\r\n    return this._source;\r\n  }\r\n\r\n  public getLine(): number {\r\n    return this._line;\r\n  }\r\n\r\n  public getPos(): number {\r\n    return this._pos;\r\n  }\r\n\r\n  public setTokenType(new_type: ExpressionType): void {\r\n    this.type = new_type;\r\n  }\r\n\r\n  public setTrigger(trigger: string): void {\r\n    this._trigger = trigger;\r\n  }\r\n\r\n  public setContent(content: string): void {\r\n    this._contents = content;\r\n  }\r\n\r\n  public setSource(source: string): void {\r\n    this._source = source;\r\n  }\r\n\r\n  public isEnd(): boolean {\r\n    return this.type === ExpressionType.EOI;\r\n  }\r\n\r\n  public is(type: ExpressionType): boolean {\r\n    return this.type === type;\r\n  }\r\n\r\n  public matches(type: ExpressionType, trigger: string): boolean {\r\n    if (!this.is(type)) {\r\n      return false;\r\n    }\r\n    if (trigger === '') {\r\n      return false;\r\n    }\r\n    return this.getTrigger() === trigger;\r\n  }\r\n\r\n  public isOperator(symbols: string): boolean {\r\n    if (symbols.length === 0) {\r\n      return this.is(ExpressionType.OPERATOR);\r\n    }\r\n    for (let i: number = 0; i < symbols.length; i++) {\r\n      if (this.matches(ExpressionType.OPERATOR, symbols[i])) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public isStartBracket(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === '(' || this._trigger === '') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isEndBracket(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === ')' || this._trigger === '') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isStartSquareBracket(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === '[' || this._trigger === '') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isEndSquareBracket(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === ']' || this._trigger === '') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isStartBrace(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === '{') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isEndBrace(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === '}') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isKeyword(...keywords: string[]): boolean {\r\n    if (keywords.length === 0) {\r\n      return this.is(ExpressionType.KEYWORD);\r\n    }\r\n    for (let i: number = 0; i < keywords.length; i++) {\r\n      if (this.matches(ExpressionType.KEYWORD, keywords[i])) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public isIdentifier(...values: string[]): boolean {\r\n    if (values.length === 0) {\r\n      return this.is(ExpressionType.ID);\r\n    }\r\n    for (let i: number = 0; i < values.length; i++) {\r\n      if (this.matches(ExpressionType.ID, values[i])) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public isSpecialIdentifier(...triggers: string[]): boolean {\r\n    if (triggers.length === 0) {\r\n      return this.is(ExpressionType.SPECIAL_ID);\r\n    }\r\n    for (let i: number = 0; i < triggers.length; i++) {\r\n      if (this.matches(ExpressionType.SPECIAL_ID, triggers[i])) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public isSpecialIdentifierWithContent(trigger: string, ...contents: string[]): boolean {\r\n    if (!this.matches(ExpressionType.SPECIAL_ID, trigger)) {\r\n      return false;\r\n    }\r\n    if (contents.length === 0) {\r\n      return true;\r\n    }\r\n    for (let i: number = 0; i < contents.length; i++) {\r\n      if (this.getContents() === contents[i]) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public isNumber(): boolean {\r\n    return this.is(ExpressionType.NUMBER);\r\n  }\r\n\r\n  public isBool(): boolean {\r\n    return this.is(ExpressionType.BOOL);\r\n  }\r\n\r\n  public isString(): boolean {\r\n    return this.is(ExpressionType.STRING);\r\n  }\r\n\r\n  public isConstant(): boolean {\r\n    return this.isNumber() || this.isBool() || this.isString();\r\n  }\r\n\r\n  public toString(): string {\r\n    return this.getTokenType().toString() + ': ' + this.getContents() + ' (' + this._line + ': ' + this._pos + '), Trigger: ' + this.getTrigger();\r\n  }\r\n\r\n\r\n\r\n\r\n}","import { ForwardQuery } from \"./forwardQuery\";\r\nimport { ExpChar } from \"./expChar\";\r\n\r\nexport class TokenReader extends ForwardQuery<ExpChar> {\r\n\r\n  private _inputExp: string = '';\r\n  private _line: number = 1;\r\n  private _pos: number = 0;\r\n  private _count: number = 0;\r\n  private _operator: number = 0;\r\n\r\n  constructor(input_exp: string) {\r\n    super();\r\n    if (input_exp === '') {\r\n\r\n    }\r\n    this._inputExp = input_exp;\r\n    this._count = input_exp.length;\r\n    this._operator = 0;\r\n  }\r\n\r\n  protected endOfInput(): ExpChar {\r\n    return new ExpChar('\\0', this._line, this._pos);\r\n  }\r\n\r\n\r\n  protected fetch(): ExpChar | undefined {\r\n    if (this._operator <= this._count - 1) {\r\n      let readChar: string = this._inputExp[this._operator];\r\n      this._operator++;\r\n      if (readChar === '\\n') {\r\n        this._line++;\r\n        this._pos = 0;\r\n      }\r\n      this._pos++;\r\n      return new ExpChar(readChar, this._line, this._pos);\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  public toString(): string {\r\n    if (this.itemBuffer.length === 0) {\r\n      return this._line + ':' + this._pos + ': Buffer empty';\r\n    }\r\n    if (this.itemBuffer.length < 2) {\r\n      return this._line + ':' + this._pos + ': ' + this.current().toString();\r\n    }\r\n    return this._line + ':' + this._pos + ': ' + this.current().toString() + ', ' + this.next().toString();\r\n  }\r\n\r\n}","import { ForwardQuery } from \"./forwardQuery\";\r\nimport { Token } from \"./token\";\r\nimport { TokenReader } from \"./tokenReader\";\r\nimport { ExpressionType } from \"./expressionEnum\";\r\nimport { ParseError, IPosition } from \"./positions\";\r\nimport { ExpChar } from \"./expChar\";\r\n\r\nexport class Tokenizer extends ForwardQuery<Token> {\r\n\r\n  private _inputExp: TokenReader;\r\n\r\n  private _decimalSeparator: string = '.';\r\n  private _lineComment: string = '//';\r\n  private _blockCommentStart: string = '/*';\r\n  private _blockCommentEnd: string = '*/';\r\n  private _brackets: string[] = ['(', ')', '', '', '[', ']', '{', '}', '', ''];\r\n  private _treatSinglePipeAsBracket: boolean = true;\r\n  private _specialIdStarters: string[] = [];\r\n  private _specialIdTerminators: string[] = [];\r\n  private _keywords: { [key: string]: string } = {};\r\n  private _keywordsCaseSensitive: boolean = false;\r\n  private _stringDelimiters: { [key: string]: string } = {};\r\n  private _boolConstant: string[] = [];\r\n\r\n  constructor(input_exp: string) {\r\n    super();\r\n    this._inputExp = new TokenReader(input_exp);\r\n    this._stringDelimiters = {};\r\n    this._stringDelimiters['\\\"'] = '\\\\';\r\n    this._stringDelimiters['\\''] = '\\0';\r\n    this._boolConstant = [];\r\n    this._boolConstant.push('false');\r\n    this._boolConstant.push('true');\r\n    this._keywords = {};\r\n    this._keywords['this'] = 'this';\r\n    this._keywords['null'] = 'null';\r\n    this._keywords['none'] = 'none';\r\n    this._keywords['undefined'] = 'undefined';\r\n  }\r\n\r\n  public endOfInput(): Token {\r\n    return Token.CreateAndFill(ExpressionType.EOI, this._inputExp.current());\r\n  }\r\n\r\n  public fetch(): Token | undefined {\r\n    // \r\n    while (this._inputExp.current().isWhiteSpace()) {\r\n      this._inputExp.consume();\r\n    }\r\n\r\n    // \r\n    if (this._inputExp.current().isEndOfInput()) {\r\n      return undefined;\r\n    }\r\n\r\n    // \r\n    if (this.isAtStartOfLineComment(true)) {\r\n      this.skipToEndOfLine();\r\n      return this.fetch();\r\n    }\r\n\r\n    // \r\n    if (this.isAtStartOfBlockComment(true)) {\r\n      this.skipBlockComment();\r\n      return this.fetch();\r\n    }\r\n\r\n    // \r\n    if (this.isAtStartOfNumber()) {\r\n      return this.fetchNumber();\r\n    }\r\n\r\n    // \r\n    if (this.isAtStartOfIdentifier()) {\r\n      return this.fetchId();\r\n    }\r\n\r\n    // \r\n    if (this._stringDelimiters[this._inputExp.current().getValue()]) {\r\n      return this.fetchString();\r\n    }\r\n\r\n    //\r\n    if (this.isAtBracket(false)) {\r\n      return Token.CreateAndFill(ExpressionType.OPERATOR, this._inputExp.consume());\r\n    }\r\n\r\n    // ID$Test$\r\n    if (this.isAtStartOfSpecialId()) {\r\n      return this.fetchSpecialId();\r\n    }\r\n\r\n    // \r\n    if (this.isOperator(this._inputExp.current())) {\r\n      return this.fetchOperator();\r\n    }\r\n\r\n    //\r\n    this.problemCollector.push(ParseError.Error(this._inputExp.current(), \": \" + this._inputExp.current().getValue()));\r\n\r\n    this._inputExp.consume();\r\n    return this.fetch();\r\n  }\r\n\r\n  private fetchNumber(): Token {\r\n    let result: Token = Token.Create(ExpressionType.NUMBER, this._inputExp.current());\r\n    result.addToContentChar(this._inputExp.consume());\r\n    let hasDecimal: boolean = false;\r\n    while (this._inputExp.current().isDigit() || this._inputExp.current().is(this._decimalSeparator)) {\r\n      if (this._inputExp.current().is(this._decimalSeparator)) {\r\n        if (hasDecimal) {\r\n          this.problemCollector.push(ParseError.Error(this._inputExp.current(), \"\"));\r\n        }\r\n        hasDecimal = true;\r\n        result.addToContentChar(this._inputExp.consume());\r\n      } else {\r\n        result.addToContentChar(this._inputExp.consume());\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  private fetchId(): Token {\r\n    let result: Token = Token.Create(ExpressionType.ID, this._inputExp.current());\r\n    result.addToContentChar(this._inputExp.consume());\r\n    while (this.isIdentifierChar(this._inputExp.current())) {\r\n      result.addToContentChar(this._inputExp.consume());\r\n    }\r\n    //UnityEngine.Debug.LogWarning(result.GetContents());\r\n    if (!this._inputExp.current().isEndOfInput() && this._specialIdTerminators.indexOf(this._inputExp.current().getValue()) > -1) {\r\n      let specialId: Token = Token.Create(ExpressionType.SPECIAL_ID, result);\r\n      specialId.setTrigger(this._inputExp.current().getValue());\r\n      specialId.setContent(result.getContents());\r\n      specialId.setSource(result.getContents());\r\n      specialId.addToSource(this._inputExp.current());\r\n      this._inputExp.consume();\r\n      return this.handleKeywords(specialId);\r\n    }\r\n    return this.handleKeywords(result);\r\n  }\r\n\r\n  private fetchString(): Token {\r\n    //\r\n    let separator: string = this._inputExp.current().getValue();\r\n    //\r\n    //char escapeChar = _stringDelimiters[_inputExp.current().GetValue()];\r\n    let result: Token = Token.Create(ExpressionType.STRING, this._inputExp.current());\r\n    result.addToTrigger(this._inputExp.consume());\r\n    while (!this._inputExp.current().isNewLine() && !this._inputExp.current().is(separator) && !this._inputExp.current().isEndOfInput()) {\r\n      result.addToContentChar(this._inputExp.consume());\r\n    }\r\n    if (this._inputExp.current().is(separator)) {\r\n      result.addToSource(this._inputExp.consume());\r\n    }\r\n    else {\r\n      this.problemCollector.push(ParseError.Error(this._inputExp.current(), \"\"));\r\n    }\r\n    return result;\r\n  }\r\n\r\n  private isAtStartOfLineComment(consume: boolean): boolean {\r\n    if (this._lineComment !== '') {\r\n      return this.canConsumeThisString(this._lineComment, consume);\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  private canConsumeThisString(check_string: string, consume: boolean): boolean {\r\n    for (let i: number = 0; i < check_string.length; i++) {\r\n      //next//\r\n      if (!(this._inputExp.nextOffset(i).is(check_string[i]))) {\r\n        return false;\r\n      }\r\n    }\r\n    if (consume) {\r\n      this._inputExp.consumeNext(check_string.length);\r\n    }\r\n    return true;\r\n  }\r\n\r\n  private skipToEndOfLine(): void {\r\n    while (!this._inputExp.current().isEndOfInput() && !this._inputExp.current().isNewLine()) {\r\n      this._inputExp.consume();\r\n    }\r\n  }\r\n\r\n  private isAtStartOfBlockComment(consume: boolean): boolean {\r\n    return this.canConsumeThisString(this._blockCommentStart, consume);\r\n  }\r\n\r\n  private skipBlockComment(): void {\r\n    while (!this._inputExp.current().isEndOfInput()) {\r\n      if (this.isAtEndOfBlockComment()) {\r\n        return;\r\n      }\r\n      this._inputExp.consume();\r\n    }\r\n    this.problemCollector.push(ParseError.Error(this._inputExp.current(), ''));\r\n  }\r\n\r\n  private isAtEndOfBlockComment(): boolean {\r\n    return this.canConsumeThisString(this._blockCommentEnd, true);\r\n  }\r\n\r\n  private isAtStartOfNumber(): boolean {\r\n    if (this._inputExp.current().isDigit()) {\r\n      return true;\r\n    } else if (this._inputExp.current().is('.') && this._inputExp.next().isDigit()) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  private isAtStartOfIdentifier(): boolean {\r\n    return this._inputExp.current().isLetter() || this._inputExp.current().is('_') || this._inputExp.current().is('#');\r\n  }\r\n\r\n  private isIdentifierChar(current: ExpChar): boolean {\r\n    return current.isDigit() || current.isLetter() || current.is('_') || current.is('.') || current.is('#') || current.is(':') || current.is('');\r\n  }\r\n\r\n  private isAtBracket(in_symbol: boolean): boolean {\r\n    let r: boolean = true;\r\n    for (let i: number = 0; i < this._brackets.length; i++) {\r\n      if (!this._inputExp.current().is(this._brackets[i])) {\r\n        r = false;\r\n      }\r\n    }\r\n    if (r) {\r\n      return true;\r\n    }\r\n    if (!in_symbol && this._treatSinglePipeAsBracket && this._inputExp.current().is('|') && this._inputExp.next().is('|')) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private isAtStartOfSpecialId(): boolean {\r\n    return this._specialIdStarters.indexOf(this._inputExp.current().getValue()) > -1;\r\n  }\r\n\r\n  private fetchSpecialId(): Token {\r\n    let result: Token = Token.Create(ExpressionType.SPECIAL_ID, this._inputExp.current());\r\n    result.addToTrigger(this._inputExp.consume());\r\n    while (this.isIdentifierChar(this._inputExp.current())) {\r\n      result.addToContentChar(this._inputExp.consume());\r\n    }\r\n    return this.handleKeywords(result);\r\n  }\r\n\r\n  private handleKeywords(id_token: Token): Token {\r\n    let keyword: string = \"\";\r\n    if (this._keywordsCaseSensitive) {\r\n      if (this._keywords[id_token.getContents()]) {\r\n        keyword = this._keywords[id_token.getContents()];\r\n      }\r\n    } else {\r\n      if (this._keywords[id_token.getContents().toLowerCase()]) {\r\n        keyword = this._keywords[id_token.getContents().toLowerCase()];\r\n      }\r\n    }\r\n    if (keyword != \"\") { //\r\n      let keywordToken: Token = Token.Create(ExpressionType.KEYWORD, id_token);\r\n      keywordToken.setTrigger(keyword);\r\n      keywordToken.setContent(id_token.getContents());\r\n      keywordToken.setSource(id_token.getSource());\r\n      return keywordToken;\r\n    } else if (!id_token.is(ExpressionType.SPECIAL_ID)) { //bool\r\n      keyword = id_token.getContents().toLowerCase();\r\n      if (this._boolConstant.indexOf(keyword) > -1) {\r\n        id_token.setTokenType(ExpressionType.BOOL);\r\n      }\r\n    }\r\n    return id_token;\r\n  }\r\n\r\n  private isOperator(ch: ExpChar): boolean {\r\n    if (ch.isEndOfInput() || ch.isDigit() || ch.isLetter() || ch.isWhiteSpace()) {\r\n      return false;\r\n    }\r\n\r\n    // let c: string = ch.getValue();\r\n    // if (char.IsControl(c)) {\r\n    // \treturn false;\r\n    // }\r\n\r\n    if (this.isAtBracket(true) || this.isAtStartOfBlockComment(false) || this.isAtStartOfLineComment(false) || this.isAtStartOfNumber() || this.isAtStartOfIdentifier() || this._stringDelimiters[ch.getValue()]) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  private fetchOperator(): Token {\r\n    let result: Token = Token.Create(ExpressionType.OPERATOR, this._inputExp.current());\r\n    result.addToTrigger(this._inputExp.consume());\r\n    if (result.isOperator(\"*\") && this._inputExp.current().is('*')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\"&\") && this._inputExp.current().is('&')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\"|\") && this._inputExp.current().is('|')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\"<\") && this._inputExp.current().is('=')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\">\") && this._inputExp.current().is('=')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\"!\") && this._inputExp.current().is('=')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\"=\") && this._inputExp.current().is('=')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public addError(pos: IPosition, msg: string): void {\r\n    this.getProblemCollector().push(ParseError.Error(pos, msg));\r\n  }\r\n\r\n  public addWarning(pos: IPosition, msg: string): void {\r\n    this.getProblemCollector().push(ParseError.Warning(pos, msg));\r\n  }\r\n\r\n\r\n\r\n}","export class Variable {\r\n\r\n  public get expType(): string {\r\n    return this._expType;\r\n  }\r\n  private _expType: string = 'string';\r\n\r\n  private _value: any = null;\r\n\r\n  private _name: string = '';\r\n\r\n  private _constant: boolean = false;\r\n\r\n  constructor(name: string, type: string, value: any) {\r\n    this._name = name;\r\n    this._expType = type;\r\n    this._value = value;\r\n  }\r\n\r\n  public setType(type: string): void {\r\n    if(!this._constant) {\r\n      this._expType = type;\r\n    }\r\n  }\r\n\r\n  public setValue(value: any): void {\r\n    if(!this._constant) {\r\n      this._value = value;\r\n    }\r\n  }\r\n\r\n  public makeConstant(value: any): void {\r\n    this.setValue(value);\r\n    this._constant = true;\r\n  }\r\n\r\n  public getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  public getName(): string {\r\n    return this._name;\r\n  }\r\n\r\n  public isConstant(): boolean {\r\n    return this._constant;\r\n  }\r\n\r\n  public toString(): string {\r\n    return `Type: ${this._expType} --- ${this._name}: ${this._value.toString()}`;\r\n  }\r\n\r\n}","import { IExpression } from \"./expressions\";\r\nimport { Variable } from \"./variable\";\r\n\r\nexport class VariableExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    return this._value.expType;\r\n  }  \r\n\r\n  public get className(): string {\r\n    return 'VariableExpression';\r\n  }\r\n\r\n  private _value: Variable;\r\n  \r\n  constructor(value: Variable) {\r\n    this._value = value;\r\n  }\r\n  \r\n  public evaluate(): any {\r\n    return this._value.getValue();\r\n  }\r\n\r\n  public toString(): string {\r\n    return this._value.getName();\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let expClone: VariableExpression = new VariableExpression(this._value);\r\n    return expClone;\r\n  }\r\n  \r\n\r\n}","import { Scope } from \"./scope\";\r\nimport { ErrorInfo } from \"../utility\";\r\nimport { IExpression, VeryVarExpression, VeryTemplateExpression } from \"./expressions\";\r\nimport { VE_ExpressionParsing } from \"./expressionParsing\";\r\nimport { VariableScope } from \"../enum\";\r\nimport { ParseError } from \"./positions\";\r\nimport { VerySceneVariables } from \"../scene\";\r\nimport { IVeryVar, VE_Variables } from \"../variables\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { StateConst } from \"../state\";\r\nimport { VE_Objects, VeryEngineObject } from \"../object\";\r\nimport { Variable } from \"./variable\";\r\nimport { VE_Template } from \"../template\";\r\n\r\n\r\nexport class VE_Expressions {\r\n\r\n  public static _scope: Scope = Scope.Create();\r\n\r\n  // 1 - \r\n  // 2 -  + \r\n  // 3 -  +  +  + \r\n  // 4 -  +  +  + \r\n  // 5 -  +  +  + bool\r\n  // 6 - \r\n\r\n\r\n  // TODO == GameObject\r\n  // \r\n  public static createSceneExpression(name_id: string, expression_str: string, error_info: ErrorInfo): IExpression {\r\n    let sceneExp: IExpression = VE_ExpressionParsing.parsing(name_id, expression_str, VE_Expressions._scope, '', '', '', VariableScope.Scene);\r\n    if (VE_ExpressionParsing.errors.length > 0) {\r\n      error_info.isRight = false;\r\n      error_info.message = VE_Expressions.errorMessage(VE_ExpressionParsing.errors);\r\n    }\r\n    return sceneExp;\r\n  }\r\n\r\n  // \r\n  public static createGlobalExpression(name_id: string, expression_str: string, project_name: string, error_info: ErrorInfo): IExpression {\r\n    let globalExp: IExpression = VE_ExpressionParsing.parsing(name_id, expression_str, VE_Expressions._scope, project_name, '', '', VariableScope.Global);\r\n    if (VE_ExpressionParsing.errors.length > 0) {\r\n      error_info.isRight = false;\r\n      error_info.message = VE_Expressions.errorMessage(VE_ExpressionParsing.errors);\r\n    }\r\n    return globalExp;\r\n  }\r\n\r\n  // \r\n  public static createLocalExpression(name_id: string, expression_str: string, project_name: string, object_id: string, error_info: ErrorInfo): IExpression {\r\n    let localExp: IExpression = VE_ExpressionParsing.parsing(name_id, expression_str, VE_Expressions._scope, project_name, object_id, '', VariableScope.Local);\r\n    if (VE_ExpressionParsing.errors.length > 0) {\r\n      error_info.isRight = false;\r\n      error_info.message = VE_Expressions.errorMessage(VE_ExpressionParsing.errors);\r\n    }\r\n    return localExp;\r\n  }\r\n\r\n  // \r\n  public static createFsmExpression(name_id: string, expression_str: string, project_name: string, object_id: string, fsm_id: string, error_info: ErrorInfo): IExpression {\r\n    let fsmExp: IExpression = VE_ExpressionParsing.parsing(name_id, expression_str, VE_Expressions._scope, project_name, object_id, fsm_id, VariableScope.Fsm);\r\n    if (VE_ExpressionParsing.errors.length > 0) {\r\n      error_info.isRight = false;\r\n      error_info.message = VE_Expressions.errorMessage(VE_ExpressionParsing.errors);\r\n    }\r\n    return fsmExp;\r\n  }\r\n\r\n\r\n  // \r\n  public static getParseExpression(project_name: string, object_id: string, var_id: string, var_scope: VariableScope): Nullable<IExpression> {\r\n    // TODO: \r\n    // .*\r\n    if (var_id.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n      let varArray: string[] = var_id.split(StateConst.STATE_SEPARATOR);\r\n      if (varArray.length !== 2) {\r\n        return null;\r\n      } else {\r\n        object_id = varArray[0].trim();\r\n        var_id = varArray[1].trim().substring(1);\r\n        if (var_scope === VariableScope.Local || var_scope === VariableScope.Fsm) {\r\n          //  +  +  + \r\n          // 1. \r\n          // 2. \r\n          // 3. \r\n          // 4. \r\n          let objects: VE_Objects = VE_Manager.objects(project_name);\r\n          if (!objects) {\r\n            return null;\r\n          } else {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n            if (!veryObject) {\r\n              return null;\r\n            } else {\r\n              // \r\n              if (veryObject.isCreatedVariable(var_id)) {\r\n                let v: IVeryVar = veryObject.getVariable(var_id);\r\n                return new VeryVarExpression(v);\r\n              }\r\n              // \r\n              else if (veryObject.isCreatedExpression(var_id)) {\r\n                return veryObject.getExpression(var_id);\r\n              }\r\n              // \r\n              else if (veryObject.isCreatedFsm(var_id)) {\r\n                let v: IVeryVar = veryObject.getFsm(var_id).fsmVar;\r\n                return new VeryVarExpression(v);\r\n              }\r\n              else {\r\n                // \r\n                return null;\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          return null;\r\n        }\r\n      }\r\n    }\r\n    // *\r\n    else {\r\n      if (var_id.startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n        var_id = var_id.substring(1);\r\n        if (var_scope === VariableScope.Local || var_scope === VariableScope.Fsm) {\r\n          //  +  +  + \r\n          // 1. \r\n          // 2. \r\n          // 3. \r\n          // 4. \r\n          let objects: VE_Objects = VE_Manager.objects(project_name);\r\n          if (!objects) {\r\n            return null;\r\n          } else {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n            if (!veryObject) {\r\n              return null;\r\n            } else {\r\n              //\r\n              if (veryObject.isCreatedVariable(var_id)) {\r\n                let v: IVeryVar = veryObject.getVariable(var_id);\r\n                return new VeryVarExpression(v);\r\n              }\r\n              //\r\n              else if (veryObject.isCreatedExpression(var_id)) {\r\n                return veryObject.getExpression(var_id);\r\n              }\r\n              //\r\n              else if (veryObject.isCreatedFsm(var_id)) {\r\n                let v: IVeryVar = veryObject.getFsm(var_id).fsmVar;\r\n                return new VeryVarExpression(v);\r\n              }\r\n              else {\r\n                //\r\n                return this.getParseGlobal(project_name, var_id);\r\n              }\r\n            }\r\n          }\r\n        } else if (var_scope === VariableScope.Global) {\r\n          // \r\n          return this.getParseGlobal(project_name, var_id);\r\n        } else {\r\n          // \r\n          return this.getParseScene(var_id);\r\n        }\r\n      } else {\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n  private static getParseGlobal(project_name: string, var_id: string): Nullable<IExpression> {\r\n    // \r\n    let variables: VE_Variables = VE_Manager.variables(project_name);\r\n    if (!variables) {\r\n      return null;\r\n    } else {\r\n      if (variables.isCreatedVariable(var_id)) {\r\n        let v: IVeryVar = variables.getVariable(var_id);\r\n        return new VeryVarExpression(v);\r\n      } else if (variables.isCreatedExpression(var_id)) {\r\n        return variables.getExpression(var_id);\r\n      } else {\r\n        // \r\n        return this.getParseScene(var_id);\r\n      }\r\n    }\r\n  }\r\n\r\n  // \r\n  private static getParseScene(var_id: string): Nullable<IExpression> {\r\n    // \r\n    if (VerySceneVariables.Variables.isCreated(var_id)) {\r\n      let v: IVeryVar = VerySceneVariables.Variables.getVariable(var_id);\r\n      return new VeryVarExpression(v);\r\n    } else if (VerySceneVariables.Variables.isCreatedExpression(var_id)) {\r\n      return VerySceneVariables.Variables.getExpression(var_id);\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  private static errorMessage(errors: ParseError[]): string {\r\n    let errorStr: string = '';\r\n    for (let i: number = 0; i < errors.length; i++) {\r\n      errorStr += errors[i].getMessage() + ';\\n';\r\n    }\r\n    return errorStr;\r\n  }\r\n\r\n\r\n  public static getTemplateExpression(project_name: string, object_id: string, var_id: string, var_scope: VariableScope): Nullable<VeryTemplateExpression> {\r\n    // .*\r\n    if (var_id.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n      let varArray: string[] = var_id.split(StateConst.STATE_SEPARATOR);\r\n      if (varArray.length !== 2) {\r\n        //error_info = \".*ID\" + var_id + \"\";\r\n        return null;\r\n      }\r\n      else {\r\n        object_id = varArray[0].trim();\r\n        var_id = varArray[1].trim().substring(1);\r\n        if (var_scope === VariableScope.Local || var_scope === VariableScope.Fsm) {\r\n          let objects: VE_Objects = VE_Manager.objects(project_name);\r\n          if (!objects) {\r\n            return null;\r\n          }\r\n          else {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n            if (!veryObject) {\r\n              return null;\r\n            }\r\n            else {\r\n              // \r\n              if (veryObject.isCreatedTemplate(var_id)) {\r\n                let template: VE_Template = veryObject.getTemplate(var_id);\r\n                let r = new VeryTemplateExpression();\r\n                r.setTemplate(template);\r\n                return r;\r\n              }\r\n              else {\r\n                // \r\n                return null;\r\n              }\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          return null;\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      // *\r\n      if (var_id.startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n        var_id = var_id.substring(1);\r\n        if (var_scope === VariableScope.Local || var_scope === VariableScope.Fsm) {\r\n          let objects: VE_Objects = VE_Manager.objects(project_name);\r\n          if (!objects) {\r\n            return null;\r\n          }\r\n          else {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n            if (!veryObject) {\r\n              return null;\r\n            }\r\n            else {\r\n              // \r\n              if (veryObject.isCreatedTemplate(var_id)) {\r\n                let template: VE_Template = veryObject.getTemplate(var_id);\r\n                let r: VeryTemplateExpression = new VeryTemplateExpression();\r\n                r.setTemplate(template);\r\n                return r;\r\n              }\r\n              else {\r\n                // \r\n                let variables: VE_Variables = VE_Manager.variables(project_name);\r\n                if (!variables) {\r\n                  return null;\r\n                }\r\n                else {\r\n                  if (variables.isCreatedTemplate(var_id)) {\r\n                    let template: VE_Template = variables.getTemplate(var_id);\r\n                    let r: VeryTemplateExpression = new VeryTemplateExpression();\r\n                    r.setTemplate(template);\r\n                    return r;\r\n                  }\r\n                  else {\r\n                    // \r\n                    return null;\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        else if (var_scope === VariableScope.Global) {\r\n          // \r\n          let variables: VE_Variables = VE_Manager.variables(project_name);\r\n          if (!variables) {\r\n            return null;\r\n          }\r\n          else {\r\n            if (variables.isCreatedTemplate(var_id)) {\r\n              let template: VE_Template = variables.getTemplate(var_id);\r\n              let r: VeryTemplateExpression = new VeryTemplateExpression();\r\n              r.setTemplate(template);\r\n              return r;\r\n            }\r\n            else {\r\n              //\r\n              return null;\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          return null;\r\n        }\r\n      }\r\n      else {\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\r\n\r\n","import { Severity } from \"../enum\";\r\n\r\nexport class VE_Error {\r\n  private _pos: string = '';\r\n  private _message: string = '';\r\n  private _tableName: string = '';\r\n  private _severity: Severity = Severity.Error;\r\n\r\n  /**\r\n   * \r\n   * @param pos \r\n   * @param message \r\n   * @param table_name \r\n   * @param severity \r\n   */\r\n  constructor(pos: string, message: string, table_name: string, severity: Severity) {\r\n    this._pos = pos;\r\n    this._message = message;\r\n    this._severity = severity;\r\n    this._tableName = table_name;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param pos \r\n   * @param msg \r\n   * @param table_name \r\n   */\r\n  public static warning(pos: string, msg: string, table_name: string): VE_Error {\r\n    return new VE_Error(pos, msg, table_name, Severity.Warning);\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param pos \r\n   * @param msg \r\n   * @param table_name \r\n   */\r\n  public static error(pos: string, msg: string, table_name: string): VE_Error {\r\n    return new VE_Error(pos, msg, table_name, Severity.Error);\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public getPos(): string {\r\n    return this._pos;\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public getMessage(): string {\r\n    return this._message;\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public getTableName(): string {\r\n    return this._tableName;\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public getSeverity(): Severity {\r\n    return this._severity;\r\n  }\r\n\r\n  public toString(): string {\r\n    return \"\" + this._pos + \"\" + this._message + \"\" + this._tableName;\r\n  }\r\n}\r\n\r\n\r\nexport class VE_ErrorManager {\r\n\r\n  private static _errorList: VE_Error[] = [];\r\n\r\n  /// <summary>\r\n  /// \r\n  /// </summary>\r\n  public static get count() {\r\n    return this._errorList.length;\r\n  }\r\n\r\n  /// <summary>\r\n  /// \r\n  /// </summary>\r\n  /// <param name=\"error\"></param>\r\n  public static add(error: VE_Error): void {\r\n    this._errorList.push(error);\r\n  }\r\n\r\n  /// <summary>\r\n  /// \r\n  /// </summary>\r\n  /// <param name=\"index\"></param>\r\n  /// <returns></returns>\r\n  public static getError(index: number): VE_Error {\r\n    return this._errorList[index];\r\n  }\r\n\r\n  /// <summary>\r\n  /// TODO: \r\n  /// </summary>\r\n  /// <param name=\"prefix\"></param>\r\n  public static print(prefix?: string): void {\r\n    if (prefix) {\r\n      for (let i: number = 0; i < this._errorList.length; i++) {\r\n        if (this._errorList[i].getSeverity() === Severity.Error) {\r\n          console.log('' + prefix + \" -> \" + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n        else if (this._errorList[i].getSeverity() === Severity.Warning) {\r\n          console.log('' + prefix + \" -> \" + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n    } else {\r\n      for (let i: number = 0; i < this._errorList.length; i++) {\r\n        if (this._errorList[i].getSeverity() === Severity.Error) {\r\n          console.log('' + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n        else if (this._errorList[i].getSeverity() === Severity.Warning) {\r\n          console.log('' + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /// <summary>\r\n  /// \r\n  /// </summary>\r\n  /// <param name=\"prefix\"></param>\r\n  public static printWarnning(prefix?: string): void {\r\n    if (prefix) {\r\n      for (let i: number = 0; i < this._errorList.length; i++) {\r\n        if (this._errorList[i].getSeverity() === Severity.Warning) {\r\n          console.log('' + prefix + \" -> \" + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n    } else {\r\n      for (let i: number = 0; i < this._errorList.length; i++) {\r\n        if (this._errorList[i].getSeverity() === Severity.Warning) {\r\n          console.log('' + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /// <summary>\r\n  /// \r\n  /// </summary>\r\n  /// <param name=\"prefix\"></param>\r\n  public static printError(prefix: string): void {\r\n    if (prefix) {\r\n      for (let i: number = 0; i < this._errorList.length; i++) {\r\n        if (this._errorList[i].getSeverity() === Severity.Error) {\r\n          console.log('' + prefix + \" -> \" + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n    } else {\r\n      for (let i: number = 0; i < this._errorList.length; i++) {\r\n        if (this._errorList[i].getSeverity() === Severity.Error) {\r\n          console.log('' + prefix + \" -> \" + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}","export class GameGlobal {\r\n\r\n  \r\n  \r\n\r\n}","export * from './gameGlobal';\r\nexport * from './time';\r\nexport * from './errorManager';","import { VeryEngine } from \"../veryEngine\";\r\n\r\nexport class Time {\r\n  \r\n  public static get frameCount(): number {\r\n    return this._frame;\r\n  }\r\n  private static _frame: number = 0;\r\n\r\n\r\n  public static get deltaTime(): number {\r\n    // return 1.0 / GameGlobal.Engine.getFps();\r\n    return VeryEngine.Engine.getDeltaTime() / 1000;\r\n  }\r\n\r\n  public static _sum(): void {\r\n    this._frame++;\r\n  }\r\n}","export * from './showError';","export class ShowError {\r\n\r\n  public static errorContentPrefix: string = '<div class=\"alert alert-error\"><button type=\"button\" class=\"close\" data-dismiss=\"alert\">&times;</button>';\r\n  public static errorContentNow: string;\r\n  public static errorZone: HTMLElement;\r\n\r\n  public static initZone(): void {\r\n    if (!this.errorZone) {\r\n      this.errorZone = document.getElementById(\"errorZone\")!;\r\n    }\r\n  }\r\n  /**\r\n   * \r\n   * TODO: logerrorwarn\r\n   * @param error_msg \r\n   */\r\n  private static showMsg(prefix: string, error_msg: string): void {\r\n    this.initZone();\r\n    if (!this.errorContentNow) {\r\n      this.errorContentNow = this.errorContentPrefix;\r\n    }\r\n    this.errorContentNow += prefix + error_msg + \"<br/>\";\r\n    this.errorZone.style.display = \"block\";\r\n    this.errorZone.innerHTML = this.errorContentNow + '</div>';\r\n    // Close button error\r\n    let closeBtn = this.errorZone.querySelector(\".close\")!;\r\n    let that = this;\r\n    closeBtn.addEventListener(\"click\", function () {\r\n      that.errorZone.style.display = \"none\";\r\n    });\r\n  }\r\n\r\n  public static show(error_msg: string): void {\r\n    this.showMsg('>>>', error_msg);\r\n  }\r\n\r\n  public static showError(error_msg: string): void {\r\n    this.showMsg('>>>', error_msg);\r\n  }\r\n\r\n  public static showWarn(error_msg: string): void {\r\n    this.showMsg('>>>', error_msg);\r\n  }\r\n\r\n  public static clear(): void {\r\n    ShowError.initZone();\r\n    ShowError.errorContentNow = ShowError.errorContentPrefix;\r\n    ShowError.errorZone.innerHTML = ShowError.errorContentNow + '</div>';\r\n    // Close button error\r\n    let closeBtn = ShowError.errorZone.querySelector(\".close\")!;\r\n    let that = ShowError;\r\n    closeBtn.addEventListener(\"click\", function () {\r\n      that.errorZone.style.display = \"none\";\r\n    });\r\n  }\r\n\r\n  public static close(): void {\r\n    ShowError.initZone();\r\n    if(ShowError.errorZone.style.display === \"none\") {\r\n      ShowError.errorZone.style.display = \"block\";\r\n    } else {\r\n      ShowError.errorZone.style.display = \"none\";\r\n    }\r\n  }\r\n}","export * from './utility/index';\r\n\r\nexport * from './action/index';\r\nexport * from './dataSource/index';\r\nexport * from './enum/index';\r\nexport * from './expression/index';\r\nexport * from './global/index';\r\nexport * from './html/index';\r\nexport * from './manager/index';\r\nexport * from './object/index';\r\nexport * from './state/index';\r\nexport * from './template/index';\r\nexport * from './trigger/index';\r\nexport * from './loader/index';\r\n\r\nexport * from './variables/index';\r\nexport * from './scene/index';\r\n\r\nexport * from '../verytable/index';\r\n\r\nexport * from './library/action/index';\r\nexport * from './library/trigger/index';\r\n","export * from './translate';","import { VE_ActionBehaviour } from '../../index';\r\n\r\nexport class Action_Translate extends VE_ActionBehaviour {\r\n\r\n  public get ID(): string {\r\n    return '|Translate';\r\n  }  \r\n\r\n  private _refType: BABYLON.Space = BABYLON.Space.LOCAL;\r\n\r\n  \r\n  public active(): void {\r\n    \r\n  }\r\n\r\n\r\n  public onUpdate(): void {\r\n    \r\n  }\r\n\r\n\r\n\r\n  public destroy(): void {\r\n    // \r\n  }\r\n\r\n\r\n}\r\n\r\n","export * from './input';","import { VE_TriggerBehaviour } from '../../index';\r\nimport { VE_Triggers } from '../../trigger';\r\n\r\nexport class Trigger_MouseDown extends VE_TriggerBehaviour {\r\n  \r\n\r\n  public get ID(): string {\r\n    return '|Mouse_Down';\r\n  }\r\n\r\n\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n\r\n    let a: BABYLON.Nullable<BABYLON.Observer<BABYLON.PointerInfo>> = this.scene.onPointerObservable.add(  (pointInfo) => {\r\n\r\n    })\r\n\r\n    this.scene.onPointerObservable.remove(a);\r\n\r\n    return true;\r\n  }\r\n\r\n  public onUpdate(): void {\r\n    \r\n  }\r\n\r\n\r\n  public destroy(): void {\r\n    \r\n  }\r\n  \r\n\r\n}\r\n\r\n\r\n\r\nVE_Triggers.addTrigger(new Trigger_MouseDown());","import { VE_Templates, VE_Template } from \"../template\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { VE_Objects, VeryEngineObject } from \"../object\";\r\nimport { VE_Variables, VeryVarManager, IVeryVar, VeryExpression } from \"../variables\";\r\nimport { ErrorInfo, VE_StringFormat } from \"../utility\";\r\nimport { VE_ErrorManager, VE_Error } from \"../global\";\r\nimport { VE_Expressions, IExpression } from \"../expression\";\r\nimport { VE_FsmData, VE_StateData, VE_StateTriggerData, VE_StateActionData } from \"../dataSource\";\r\nimport { VE_Fsm, VE_State, VE_StateAction, VE_AssociatedState, StateConst } from \"../state\";\r\nimport { VE_Triggers, VE_TriggerBehaviour } from \"../trigger\";\r\nimport { VE_Actions, VE_ActionBehaviour, VE_Assignment } from \"../action\";\r\nimport { StateActionType, AssignType } from \"../enum\";\r\nimport { VE_TypeConvert } from \"../utility/typeConvert\";\r\nimport { VE_AssignmentTypeJudge } from \"../action/assignmentTypeJudge\";\r\nimport { VerySceneVariables } from \"../scene\";\r\n\r\nexport class CreateInstance {\r\n\r\n\r\n\r\n\r\n\r\n  public static createProject(project_name: string): boolean {\r\n    let templates: VE_Templates = VE_Manager.templates(project_name);\r\n    let objects: VE_Objects = VE_Manager.objects(project_name);\r\n    let globalVars: VE_Variables = VE_Manager.variables(project_name);\r\n\r\n    // 1. \r\n    // (1).\r\n    for (let i: number = 0; i < globalVars.varData.count; i++) {\r\n      let varID: string = globalVars.varData.getVariableID(i);\r\n      let varPara: string[] = globalVars.varData.getVariableParas(varID);\r\n      // 1.2.3.\r\n      // 1.\r\n      if (varPara[0] === \"\" || varPara[0].toLowerCase() === \"expression\") {\r\n        continue;\r\n      }\r\n      // 2.IVeryVar\r\n      else if (VeryVarManager.hasVarType(varPara[0])) {\r\n        let errorInfo: ErrorInfo = new ErrorInfo();\r\n        let newVar: Nullable<IVeryVar> = VeryVarManager.createVariable(varID, varPara[0], varPara[1], errorInfo);\r\n        // TODO: ListDictionary\r\n        if (!errorInfo.isRight || newVar === null) {\r\n          VE_ErrorManager.add(VE_Error.error(globalVars.varData.getPos(varID), \"\" + project_name + \"\" + varID + \"\" + varPara[0] + \"\" + varPara[1] + \"\" + errorInfo.message + \"\", ''));\r\n          return false;\r\n        } else {\r\n          globalVars.addVariable(varID, newVar);\r\n        }\r\n      }\r\n      // 3.\r\n      else if (templates.isCreatedTemplate(varPara[0])) {\r\n        globalVars.addTemplate(varID, templates.getTemplate(varPara[0]).clone('__global__', varID));\r\n      }\r\n      // \r\n      else {\r\n        VE_ErrorManager.add(VE_Error.error(globalVars.varData.getPos(varID), \"\" + project_name + \"\" + varID + \"\" + varPara[0] + \"\" + varPara[1] + \"\", ''));\r\n        return false;\r\n      }\r\n    }\r\n\r\n    // (2).\r\n    for (let i: number = 0; i < globalVars.varData.count; i++) {\r\n      let varID: string = globalVars.varData.getVariableID(i);\r\n      let varPara: string[] = globalVars.varData.getVariableParas(varID);\r\n      // \r\n      // 1.\r\n      if (varPara[0] === \"\" || varPara[0].toLowerCase() === \"expression\") {\r\n        // \r\n        let errorInfo: ErrorInfo = new ErrorInfo();\r\n        let globalExp: IExpression = VE_Expressions.createGlobalExpression(varID, varPara[1], project_name, errorInfo);\r\n        if (!errorInfo.isRight || !globalExp) {\r\n          VE_ErrorManager.add(VE_Error.error(globalVars.varData.getPos(varID), \"\" + project_name + \"\" + varID + \",\" + varPara[0] + \",\" + varPara[1] + \"\\n\" + errorInfo.message, \"\"));\r\n          return false;\r\n        }\r\n        globalVars.addExpression(varID, globalExp);\r\n      }\r\n      else {\r\n        continue;\r\n      }\r\n    }\r\n\r\n    // 2. ----\r\n    // 1.\r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.varData.count; k++) {\r\n        // (1). \r\n        let varID: string = veryObject.varData.getVariableID(k);\r\n        let varPara: string[] = veryObject.varData.getVariableParas(varID);\r\n        // 1.2.3.\r\n        // 1.\r\n        if (varPara[0] === \"\" || varPara[0].toLowerCase().trim() === \"expression\") {\r\n          continue;\r\n        }\r\n        // 2.IVeryVar\r\n        else if (VeryVarManager.hasVarType(varPara[0])) {\r\n          let errorInfo: ErrorInfo = new ErrorInfo();\r\n          let newVar: Nullable<IVeryVar> = VeryVarManager.createVariable(varID, varPara[0], varPara[1], errorInfo);\r\n          // TODO: ListDictionary\r\n          if (newVar === null || !errorInfo.isRight) {\r\n            VE_ErrorManager.add(VE_Error.error(veryObject.varData.getPos(varID), \"\" + project_name + \"\" + varID + \"\" + varPara[0] + \"\" + varPara[1] + \"\" + errorInfo.message + \"\", ''));\r\n            return false;\r\n          } else {\r\n            globalVars.addVariable(varID, newVar);\r\n          }\r\n        }\r\n        // 3.\r\n        else if (templates.isCreatedTemplate(varPara[0])) {\r\n          veryObject.addTemplate(varID, templates.getTemplate(varPara[0]).clone(objectID, varID));\r\n        }\r\n        // \r\n        else {\r\n          VE_ErrorManager.add(VE_Error.error(veryObject.varData.getPos(varID), \"\" + project_name + \"\" + objectID + \"\" + varID + \",\" + varPara[0] + \",\" + varPara[1] + \"\", \"\"));\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n\r\n    // 3.   \r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.dataSource.fsmCount; k++) {\r\n        let fsmID: string = veryObject.dataSource.getFsmID(k);\r\n        let fsmData: VE_FsmData = veryObject.dataSource.getFsmData(fsmID);\r\n        // \r\n        let errorInfo: ErrorInfo = new ErrorInfo();\r\n        let newVar: Nullable<IVeryVar> = VeryVarManager.createVariable(fsmID, fsmData.fsmType, fsmData.initialValStr, errorInfo);\r\n        // TODO: ListDictionary\r\n        if (newVar === null || !errorInfo.isRight) {\r\n          VE_ErrorManager.add(VE_Error.error(veryObject.dataSource.getFsmPos(fsmID), \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + errorInfo.message + \"\", ''));\r\n          return false;\r\n        }\r\n        // \r\n        let fsm: VE_Fsm = new VE_Fsm(project_name, objectID, fsmID, newVar, veryObject);\r\n        veryObject.addFsm(fsmID, fsm);\r\n      }\r\n    }\r\n\r\n    // \r\n    // 4. \r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.varData.count; k++) {\r\n        // (1). \r\n        let varID: string = veryObject.varData.getVariableID(k);\r\n        let varPara: string[] = veryObject.varData.getVariableParas(varID);\r\n        // 1.2.3.\r\n        // 1.\r\n        if (varPara[0] === \"\" || varPara[0].toLowerCase().trim() === \"expression\") {\r\n          // \r\n          let errorInfo: ErrorInfo = new ErrorInfo();\r\n          let newVar: IExpression = VE_Expressions.createLocalExpression(varID, varPara[1], project_name, objectID, errorInfo);\r\n          if (!errorInfo.isRight || !newVar) {\r\n            VE_ErrorManager.add(VE_Error.error(veryObject.varData.getPos(varID), \"\" + project_name + \"\" + objectID + \"\" + varID + \",\" + varPara[0] + \",\" + varPara[1] + \"\\n\" + errorInfo.message, ''));\r\n            return false;\r\n          }\r\n          veryObject.addExpression(varID, newVar);\r\n        }\r\n        else {\r\n          continue;\r\n        }\r\n      }\r\n    }\r\n\r\n    // TODO: UI\r\n\r\n    // 6. \r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.dataSource.triggerCount; k++) {\r\n        let triggerID: string = veryObject.dataSource.getTriggerID(k);\r\n        //Debug.Log(\"ID\" + triggerID);\r\n        let triggerPara: string[] = veryObject.dataSource.getTriggerPara(triggerID);\r\n\r\n        if (!VE_Triggers.hasTrigger(triggerPara[0])) {\r\n          VE_ErrorManager.add(VE_Error.error(veryObject.dataSource.getTriggerPos(triggerID), \"\" + project_name + \"\" + objectID + \"\" + triggerID + \"\" + triggerPara[0] + \"\", \"\"));\r\n          return false;\r\n        } else {\r\n          // TODO: Trigger\r\n          let trigger: VE_TriggerBehaviour = VE_Triggers.createTrigger(triggerPara[0]);\r\n          veryObject.addTrigger(triggerID, trigger);\r\n        }\r\n      }\r\n    }\r\n\r\n    // 5. \r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.dataSource.actionCount; k++) {\r\n        let actionID: string = veryObject.dataSource.getActionID(k);\r\n        let actionPara: string[] = veryObject.dataSource.getActionPara(actionID);\r\n\r\n        if (!VE_Actions.hasAction(actionPara[0])) {\r\n          VE_ErrorManager.add(VE_Error.error(veryObject.dataSource.getActionPos(actionID), \"\" + project_name + \"\" + objectID + \"\" + actionID + \"\" + actionPara[0] + \"\", \"\"));\r\n          return false;\r\n        } else {\r\n          // TODO: Action\r\n          let action: VE_ActionBehaviour = VE_Actions.createAction(actionPara[0]);\r\n          veryObject.addAction(actionID, action);\r\n        }\r\n      }\r\n    }\r\n\r\n    // 7.    +  + \r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.dataSource.fsmCount; k++) {\r\n        let fsmID: string = veryObject.dataSource.getFsmID(k);\r\n        let fsmData: VE_FsmData = veryObject.dataSource.getFsmData(fsmID);\r\n        // \r\n        let fsm: VE_Fsm = veryObject.getFsm(fsmID);\r\n        // \r\n        for (let p: number = 0; p < fsmData.count; p++) {\r\n          let stateData: VE_StateData = fsmData.getStateData(p);\r\n          let state: VE_State = new VE_State(fsm, fsm.count + 1);\r\n          // \r\n          if (stateData.isInitialValue) {\r\n            state.setInitialValue(fsm.fsmVar.getValue());\r\n          }\r\n          else {\r\n            // TODO: \r\n            if (!this.stateAssignment(project_name, objectID, fsmID, globalVars, objects, veryObject, fsm, stateData, state)) {\r\n              return false;\r\n            }\r\n          }\r\n\r\n          // \r\n          if (stateData.isSequence) {\r\n            state.setSequence();\r\n          }\r\n\r\n          // \r\n          if (stateData.logicalExp !== '') {\r\n            let errorInfo: ErrorInfo = new ErrorInfo();\r\n            let logicalExp: IExpression = VE_Expressions.createFsmExpression('', stateData.logicalExp, project_name, objectID, fsmID, errorInfo);\r\n            if (!errorInfo.isRight || !logicalExp) {\r\n              VE_ErrorManager.add(VE_Error.error(\"\" + stateData.rowIndex.toString() + \"E\", \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + stateData.logicalExp + \"\\n\" + errorInfo.message, \"\"));\r\n              return false;\r\n            }\r\n            state.logicalAssociated = logicalExp;\r\n          }\r\n\r\n          // \r\n          for (let s: number = 0; s < stateData.triggerCount; s++) {\r\n            let triggerData: VE_StateTriggerData = stateData.getTrigger(s);\r\n            let triggerPos: string = stateData.getTriggerPos(s);\r\n            // \r\n            let trigger: Nullable<VE_TriggerBehaviour> = VE_Triggers.findTrigger(veryObject, triggerData.triggerID);\r\n            if (trigger === null) {\r\n              VE_ErrorManager.add(VE_Error.error(triggerPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + triggerData.triggerID + \"\", \"\"));\r\n              return false;\r\n            }\r\n            // \r\n            let logicalExp: Nullable<IExpression> = null;\r\n            // Debug.LogWarning(\"\" + triggerData.LogicalExp);\r\n            if (triggerData.logicalExp !== '') {\r\n              // \r\n              let errorInfo: ErrorInfo = new ErrorInfo();\r\n              logicalExp = VE_Expressions.createFsmExpression('', triggerData.logicalExp, project_name, objectID, fsmID, errorInfo);\r\n              // Debug.LogWarning(logicalExp);\r\n              if (!errorInfo.isRight || logicalExp === null) {\r\n                VE_ErrorManager.add(VE_Error.error(triggerPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + triggerData.logicalExp + \"\\n\" + errorInfo.message, \"\"));\r\n                return false;\r\n              }\r\n            }\r\n            trigger.addTriggerTarget(logicalExp!, state);\r\n            // \r\n            if (triggerData.logicalSwitch !== '') {\r\n              // \r\n              let errorInfo: ErrorInfo = new ErrorInfo();\r\n              let logicalSwitch: IExpression = VE_Expressions.createFsmExpression('', triggerData.logicalSwitch, project_name, objectID, fsmID, errorInfo);\r\n              if (!errorInfo.isRight || logicalSwitch === null) {\r\n                VE_ErrorManager.add(VE_Error.error(triggerPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + triggerData.logicalSwitch + \"\\n\" + errorInfo.message, \"\"));\r\n                return false;\r\n              }\r\n              trigger.addLogicalSwitch(logicalSwitch);\r\n            }\r\n          }\r\n\r\n          // \r\n          for (let s: number = 0; s < stateData.actionCount; s++) {\r\n            let actionData: VE_StateActionData = stateData.getAction(s);\r\n            let actionPos: string = stateData.getActionPos(s);\r\n            // \r\n            if (actionData.type === StateActionType.Action) {\r\n              // \r\n              let action: Nullable<VE_ActionBehaviour> = VE_Actions.findAction(veryObject, actionData.actionID);\r\n              if (action === null) {\r\n                VE_ErrorManager.add(VE_Error.error(actionPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + actionData.actionID + \"\", \"\"));\r\n                return false;\r\n              }\r\n              // bool\r\n              // \r\n              let errorInfo: ErrorInfo = new ErrorInfo();\r\n              let enabledFlag: boolean = VE_TypeConvert.boolConvert(actionData.enabled, errorInfo);\r\n              if (!errorInfo.isRight) {\r\n                VE_ErrorManager.add(VE_Error.error(actionPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + actionData.actionID + \"booltruefalse\", \"\"));\r\n                return false;\r\n              }\r\n\r\n              // \r\n              let everyFrameFlag = VE_TypeConvert.boolConvert(actionData.everyFrame, errorInfo);\r\n              if (!errorInfo.isRight) {\r\n                VE_ErrorManager.add(VE_Error.error(actionPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + actionData.actionID + \"booltruefalse\", \"\"));\r\n                return false;\r\n              }\r\n              // \r\n              let isSequence = VE_TypeConvert.boolConvert(actionData.everyFrame, errorInfo);\r\n              if (!errorInfo.isRight) {\r\n                VE_ErrorManager.add(VE_Error.error(actionPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + actionData.actionID + \"booltruefalse\", \"\"));\r\n                return false;\r\n              }\r\n              let stateAction: VE_StateAction = new VE_StateAction();\r\n              stateAction.setAction(action)\r\n              state.addAction(stateAction);\r\n            }\r\n            //\r\n            else {\r\n              // TODO\r\n              if (!this.assignmentAction(project_name, objectID, fsmID, globalVars, objects, veryObject, actionData, state)) {\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n\r\n          // \r\n          if (fsm.isCreatedState(stateData.stateIndex)) {\r\n            VE_ErrorManager.add(VE_Error.error(\"\" + stateData.rowIndex.toString() + \"I\", \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + stateData.ValStr + \"ID\", \"\"));\r\n            return false;\r\n          }\r\n          else {\r\n            fsm.addState(state, stateData.stateIndex);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // 8.   \r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.dataSource.fsmCount; k++) {\r\n        let fsmID: string = veryObject.dataSource.getFsmID(k);\r\n        let fsmData: VE_FsmData = veryObject.dataSource.getFsmData(fsmID);\r\n        // \r\n        let fsm: VE_Fsm = veryObject.getFsm(fsmID);\r\n        // \r\n        for (let p: number = 0; p < fsmData.count; p++) {\r\n          let stateData: VE_StateData = fsmData.getStateData(p);\r\n          let state: Nullable<VE_State> = fsm.getState(p);\r\n\r\n          // \r\n          for (let s: number = 0; s < stateData.associatedStateCount; s++) {\r\n            let associatedStateInfo: string = stateData.getAssociatedState(s);\r\n            let associatedPos: string = stateData.getAssociatedStatePos(s);\r\n            let associatedState: VE_AssociatedState = new VE_AssociatedState(state!);\r\n            let multipleAssociatedState: string[] = associatedStateInfo.split(/,|/);\r\n\r\n            for (let www: number = 0; www < multipleAssociatedState.length; www++) {\r\n              associatedStateInfo = multipleAssociatedState[www].trim();\r\n              let stateIndex: number = StateConst.STATE_INDEX;\r\n              let strArray: string[] = associatedStateInfo.split('=');\r\n              if (strArray.length === 1) {\r\n                stateIndex = StateConst.STATE_INDEX;\r\n              }\r\n              else if (strArray.length === 2) {\r\n                let errorInfo: ErrorInfo = new ErrorInfo();\r\n                stateIndex = VE_TypeConvert.intConvert(strArray[1].trim(), errorInfo);\r\n                if (!errorInfo.isRight) {\r\n                  VE_ErrorManager.add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"=ID\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                VE_ErrorManager.add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"=ID\", \"\"));\r\n                return false;\r\n              }\r\n\r\n              // 1. \r\n              // 2. .\r\n              // 3. *.\r\n              // 4. .*.\r\n\r\n              let aFsmID: string = strArray[0].trim();\r\n              if (aFsmID.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n                let stateArray: string[] = aFsmID.split(StateConst.STATE_SEPARATOR);\r\n                for (let q: number = 0; q < stateArray.length; q++) {\r\n                  stateArray[q] = stateArray[q].trim();\r\n                }\r\n                // .*.\r\n                if (stateArray.length === 3) {\r\n                  if (objects.isCreated(stateArray[0])) {\r\n                    let aObject: VeryEngineObject = objects.getVeryObject(stateArray[0]);\r\n                    if (stateArray[1].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n                      let varID: string = stateArray[1].substring(1);\r\n                      if (aObject.isCreatedTemplate(varID)) {\r\n                        let template: VE_Template = aObject.getTemplate(varID);\r\n                        if (template.dataSource.isCreatedFsm(stateArray[2])) {\r\n                          associatedState.addTemplate(template, stateArray[2], stateIndex);\r\n                          // VE_AssociatedState associatedState = new VE_AssociatedState(state, template, stateArray[2], stateIndex);\r\n                          // state.AddAssociatedState(associatedState);\r\n                        }\r\n                        else {\r\n                          VE_ErrorManager.add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".*.\", \"\"));\r\n                          return false;\r\n                        }\r\n                      }\r\n                      else {\r\n                        VE_ErrorManager.add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".*.\", \"\"));\r\n                        return false;\r\n                      }\r\n                    }\r\n                    else {\r\n                      VE_ErrorManager.add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".*.\", \"\"));\r\n                      return false;\r\n                    }\r\n                  }\r\n                  else {\r\n                    VE_ErrorManager.add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".*.\", \"\"));\r\n                    return false;\r\n                  }\r\n                }\r\n                else if (stateArray.length === 2) {\r\n                  let aObjectID: string = stateArray[0].trim();\r\n                  aFsmID = stateArray[1].trim();\r\n                  // *.\r\n                  if (aObjectID.startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n                    aObjectID = aObjectID.substring(1);\r\n                    if (veryObject.isCreatedTemplate(aObjectID)) {\r\n                      let template: VE_Template = veryObject.getTemplate(aObjectID);\r\n                      if (template.dataSource.isCreatedFsm(stateArray[1])) {\r\n                        associatedState.addTemplate(template, stateArray[1], stateIndex);\r\n                        // VE_AssociatedState associatedState = new VE_AssociatedState(state, template, stateArray[1], stateIndex);\r\n                        // state.AddAssociatedState(associatedState);\r\n                      }\r\n                      else {\r\n                        VE_ErrorManager.add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"*.\", \"\"));\r\n                        return false;\r\n                      }\r\n                    }\r\n                    else {\r\n                      if (globalVars.isCreatedTemplate(aObjectID)) {\r\n                        let template: VE_Template = globalVars.getTemplate(aObjectID);\r\n                        if (template.dataSource.isCreatedFsm(stateArray[1])) {\r\n                          associatedState.addTemplate(template, stateArray[1], stateIndex);\r\n                          // VE_AssociatedState associatedState = new VE_AssociatedState(state, template, stateArray[1], stateIndex);\r\n                          // state.AddAssociatedState(associatedState);\r\n                        }\r\n                        else {\r\n                          VE_ErrorManager.add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"*.\", \"\"));\r\n                          return false;\r\n                        }\r\n                      }\r\n                      else {\r\n                        VE_ErrorManager.add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"*.\", \"\"));\r\n                        return false;\r\n                      }\r\n                    }\r\n                  }\r\n                  // .\r\n                  else {\r\n                    let aObject: VeryEngineObject = objects.getVeryObject(aObjectID);\r\n                    if (aObject === null) {\r\n                      VE_ErrorManager.add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".\", \"\"));\r\n                      return false;\r\n                    }\r\n                    let aFsm: VE_Fsm = aObject.getFsm(aFsmID);\r\n                    if (aFsm === null) {\r\n                      VE_ErrorManager.add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".\", \"\"));\r\n                      return false;\r\n                    }\r\n                    let toState: Nullable<VE_State> = aFsm.getState(stateIndex);\r\n                    if (toState === null) {\r\n                      VE_ErrorManager.add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".\", \"\"));\r\n                      return false;\r\n                    }\r\n                    associatedState.add(toState, stateIndex);\r\n                    // VE_AssociatedState associatedState = new VE_AssociatedState(state, toState);\r\n                    // state.AddAssociatedState(associatedState);\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              //\r\n              else {\r\n                let aFsm: VE_Fsm = veryObject.getFsm(aFsmID);\r\n                if (aFsm === null) {\r\n                  VE_ErrorManager.add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"\", \"\"));\r\n                  return false;\r\n                }\r\n\r\n                let toState: Nullable<VE_State> = aFsm.getState(stateIndex);\r\n                if (toState === null) {\r\n                  VE_ErrorManager.add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"\", \"\"));\r\n                  return false;\r\n                }\r\n                associatedState.add(toState, stateIndex);\r\n                //VE_AssociatedState associatedState = new VE_AssociatedState(state, toState);\r\n                //state.AddAssociatedState(associatedState);\r\n              }\r\n            }\r\n            state!.addAssociatedState(associatedState);\r\n          }\r\n\r\n        }\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n\r\n  private static stateAssignment(project_name: string, object_id: string, fsm_id: string, global_vars: VE_Variables, objects: VE_Objects, very_object: VeryEngineObject, fsm: VE_Fsm, state_data: VE_StateData, state: VE_State): boolean {\r\n    // \r\n    // \r\n    let assignStr: string = state_data.ValStr;\r\n    // *\r\n    // .*\r\n    // *.*\r\n    // .*.*\r\n    if (assignStr.indexOf(StateConst.VARIABLE_SYMBOL) > -1)  // \r\n    {\r\n      if (assignStr.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n        let valArray: string[] = assignStr.split(StateConst.STATE_SEPARATOR);\r\n        for (let q: number = 0; q < valArray.length; q++) {\r\n          valArray[q] = valArray[q].trim();\r\n        }\r\n        if (valArray.length === 2) {\r\n          if (!valArray[1].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n            VE_ErrorManager.add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"1*2.*3*.*4.*.*\", \"\"));\r\n            return false;\r\n          }\r\n          else {\r\n            // *.*\r\n            if (valArray[0].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n              let templateVarID: string = valArray[0].substring(1);\r\n              let varID: string = valArray[1].substring(1);\r\n              if (very_object.isCreatedTemplate(templateVarID)) {\r\n                let template: VE_Template = very_object.getTemplate(templateVarID);\r\n                if (template.varData.isCreatedVariable(varID) || template.dataSource.isCreatedFsm(varID)) {\r\n                  state.setTemplateInfo(template, varID, assignStr);\r\n                }\r\n                else {\r\n                  VE_ErrorManager.add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"*.***\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                if (global_vars.isCreatedTemplate(templateVarID)) {\r\n                  let template: VE_Template = global_vars.getTemplate(templateVarID);\r\n                  if (template.varData.isCreatedVariable(varID) || template.dataSource.isCreatedFsm(varID)) {\r\n                    state.setTemplateInfo(template, varID, assignStr);\r\n                  }\r\n                  else {\r\n                    VE_ErrorManager.add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"*.***\", \"\"));\r\n                    return false;\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"*.**\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n            }\r\n            // .*\r\n            else {\r\n              if (valArray[0] === object_id && valArray[1].substring(1) === fsm_id) {\r\n                VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \".*\", \"\"));\r\n                return false;\r\n              }\r\n              let errorInfo: ErrorInfo = new ErrorInfo();\r\n\r\n              let veryVar: Nullable<IVeryVar> = VeryVarManager.getVariable(valArray[1].substring(1), project_name, valArray[0], errorInfo);\r\n              if (!errorInfo.isRight || veryVar === null) {\r\n                VE_ErrorManager.add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \".**\" + valArray[1] + \"\" + errorInfo, \"\"));\r\n                return false;\r\n              }\r\n              else {\r\n                // \r\n                if (VE_AssignmentTypeJudge.allow(fsm.fsmVar, veryVar)) {\r\n                  state.setStateVariable(veryVar);\r\n                }\r\n                else {\r\n                  VE_ErrorManager.add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \".*\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        else if (valArray.length === 3) {\r\n          // .*.*\r\n          if (valArray[0].startsWith(StateConst.STATE_SEPARATOR) || !valArray[1].startsWith(StateConst.STATE_SEPARATOR) || !valArray[2].startsWith(StateConst.STATE_SEPARATOR)) {\r\n            VE_ErrorManager.add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"1*2.*3*.*4.*.*\", \"\"));\r\n            return false;\r\n          }\r\n          else {\r\n            let templateVarID: string = valArray[1].substring(1);\r\n            let varID: string = valArray[2].substring(1);\r\n            if (objects.isCreated(valArray[0])) {\r\n              let tObject: VeryEngineObject = objects.getVeryObject(valArray[0]);\r\n              if (tObject.isCreatedTemplate(templateVarID)) {\r\n                let template: VE_Template = tObject.getTemplate(templateVarID);\r\n                if (template.varData.isCreatedVariable(varID) || template.dataSource.isCreatedFsm(varID)) {\r\n                  state.setTemplateInfo(template, varID, assignStr);\r\n                }\r\n                else {\r\n                  VE_ErrorManager.add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \".*.*.**\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                VE_ErrorManager.add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \".*.**\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n            else {\r\n              VE_ErrorManager.add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \".*.*\", \"\"));\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          VE_ErrorManager.add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"1*2.*3*.*4.*.*\", \"\"));\r\n          return false;\r\n        }\r\n      }\r\n      else {\r\n        // *\r\n        let varID: string = assignStr.substring(1);\r\n        if (varID == fsm_id) {\r\n          VE_ErrorManager.add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"*\", \"\"));\r\n          return false;\r\n        }\r\n        let errorInfo: ErrorInfo = new ErrorInfo();\r\n        let stateVar: Nullable<IVeryVar> = VeryVarManager.getVariable(varID, project_name, object_id, errorInfo);\r\n        if (stateVar === null) {\r\n          VE_ErrorManager.add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"\" + errorInfo, \"\"));\r\n          return false;\r\n        }\r\n        else {\r\n          //\r\n          if (VE_AssignmentTypeJudge.allow(fsm.fsmVar, stateVar)) {\r\n            state.setStateVariable(stateVar);\r\n          }\r\n          else {\r\n            VE_ErrorManager.add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"*\", \"\"));\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    //\r\n    else {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let val: any = fsm.fsmVar.initValue(assignStr, errorInfo);\r\n      if (!errorInfo.isRight) {\r\n        VE_ErrorManager.add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"\", \"\"));\r\n        return false;\r\n      }\r\n      state.setConstValue(val);\r\n    }\r\n    return true;\r\n  }\r\n\r\n\r\n  private static assignmentAction(project_name: string, object_id: string, fsm_id: string, global_vars: VE_Variables, objects: VE_Objects, very_object: VeryEngineObject, action_data: VE_StateActionData, state: VE_State): boolean {\r\n    // \r\n    let assignment: VE_Assignment = new VE_Assignment(state, action_data.totalString);\r\n    let varID: string = action_data.varID;\r\n    // Debug.LogWarning(\"\" + action_data.TotalString);\r\n    // 1 1*2.*3*.*4.*.*\r\n    if (varID.indexOf(StateConst.VARIABLE_SYMBOL) > -1)  // \r\n    {\r\n      if (varID.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n        let valArray: string[] = varID.split(StateConst.STATE_SEPARATOR);\r\n        for (let q: number = 0; q < valArray.length; q++) {\r\n          valArray[q] = valArray[q].trim();\r\n        }\r\n        // .* or *.*\r\n        if (valArray.length === 2) {\r\n          // *.*\r\n          if (valArray[0].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n            let templateVarID: string = valArray[0].substring(1);\r\n            varID = valArray[1].substring(1);\r\n            if (very_object.isCreatedTemplate(templateVarID)) {\r\n              let template: VE_Template = very_object.getTemplate(templateVarID);\r\n              if (template.varData.isCreatedVariable(varID)) {\r\n                let varPara: string[] = template.varData.getVariableParas(varID);\r\n                if (varPara[1].toLowerCase() === \"expression\" || varPara[1].toLowerCase() === \"\") {\r\n                  VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.*\", \"\"));\r\n                  return false;\r\n                }\r\n                else {\r\n                  assignment.setLeftTemplateVar(template, varID);\r\n                }\r\n              }\r\n              else if (template.dataSource.isCreatedFsm(varID)) {\r\n                assignment.setLeftTemplateVar(template, varID);\r\n              }\r\n              else {\r\n                VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.***\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n            else {\r\n              if (global_vars.isCreatedTemplate(templateVarID)) {\r\n                let template: VE_Template = global_vars.getTemplate(templateVarID);\r\n                if (template.varData.isCreatedVariable(varID)) {\r\n                  let varPara: string[] = template.varData.getVariableParas(varID);\r\n                  if (varPara[1].toLowerCase() === \"expression\" || varPara[1].toLowerCase() === \"\") {\r\n                    VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.*\", \"\"));\r\n                    return false;\r\n                  }\r\n                  else {\r\n                    assignment.setLeftTemplateVar(template, varID);\r\n                  }\r\n                }\r\n                else if (template.dataSource.isCreatedFsm(varID)) {\r\n                  assignment.setLeftTemplateVar(template, varID);\r\n                }\r\n                else {\r\n                  VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.***\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.**\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          //.*\r\n          else {\r\n            if (objects.isCreated(valArray[0])) {\r\n              let aObject: VeryEngineObject = objects.getVeryObject(valArray[0]);\r\n              varID = varID.substring(1);\r\n              if (aObject.isCreatedExpression(varID)) {\r\n                VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*\", \"\"));\r\n                return false;\r\n              }\r\n              else if (aObject.isCreatedFsm(varID)) {\r\n                let v: IVeryVar = aObject.getFsm(varID).fsmVar;\r\n                assignment.setLeftVariable(v);\r\n              }\r\n              else if (aObject.isCreatedVariable(varID)) {\r\n                let v: IVeryVar = aObject.getVariable(varID);\r\n                assignment.setLeftVariable(v);\r\n              }\r\n              else if (aObject.isCreatedTemplate(varID)) {\r\n                let template: VE_Template = aObject.getTemplate(varID);\r\n                assignment.setLeftTemplate(template);\r\n              }\r\n              else {\r\n                VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n            else {\r\n              VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*\", \"\"));\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        else if (valArray.length === 3)  // .*.*\r\n        {\r\n          // .*.*\r\n          if (valArray[0].startsWith(StateConst.STATE_SEPARATOR) || !valArray[1].startsWith(StateConst.STATE_SEPARATOR) || !valArray[2].startsWith(StateConst.STATE_SEPARATOR)) {\r\n            VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"1*2.*3*.*4.*.*\", \"\"));\r\n            return false;\r\n          }\r\n          else {\r\n            let templateVarID: string = valArray[1].substring(1);\r\n            varID = valArray[2].substring(1);\r\n            if (objects.isCreated(valArray[0])) {\r\n              let tObject: VeryEngineObject = objects.getVeryObject(valArray[0]);\r\n              if (tObject.isCreatedTemplate(templateVarID)) {\r\n                let template: VE_Template = tObject.getTemplate(templateVarID);\r\n                if (template.dataSource.isCreatedFsm(varID)) {\r\n                  assignment.setLeftTemplateVar(template, varID);\r\n                }\r\n                else if (template.varData.isCreatedVariable(varID)) {\r\n                  let varParas: string[] = template.varData.getVariableParas(varID);\r\n                  if (varParas[1].toLowerCase() === \"expression\" || varParas[1].toLowerCase() === \"\") {\r\n                    VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.*.*.*\", \"\"));\r\n                    return false;\r\n                  }\r\n                  else {\r\n                    assignment.setLeftTemplateVar(template, varID);\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.*.**\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.**\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n            else {\r\n              VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.*\", \"\"));\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"1*2.*3*.*4.*.*\", \"\"));\r\n          return false;\r\n        }\r\n      }\r\n      else // *\r\n      {\r\n        varID = varID.substring(1);\r\n        if (very_object.isCreatedExpression(varID)) {\r\n          VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*\", \"\"));\r\n          return false;\r\n        }\r\n        else if (very_object.isCreatedFsm(varID)) {\r\n          let v: IVeryVar = very_object.getFsm(varID).fsmVar;\r\n          assignment.setLeftVariable(v);\r\n        }\r\n        else if (very_object.isCreatedVariable(varID)) {\r\n          let v: IVeryVar = very_object.getVariable(varID);\r\n          assignment.setLeftVariable(v);\r\n        }\r\n        else if (very_object.isCreatedTemplate(varID)) {\r\n          let template: VE_Template = very_object.getTemplate(varID);\r\n          assignment.setLeftTemplate(template);\r\n        }\r\n        else {\r\n          // \r\n          if (global_vars.isCreatedExpression(varID)) {\r\n            VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*\", \"\"));\r\n            return false;\r\n          }\r\n          else if (global_vars.isCreatedVariable(varID)) {\r\n            let v: IVeryVar = global_vars.getVariable(varID);\r\n            assignment.setLeftVariable(v);\r\n          }\r\n          else if (global_vars.isCreatedTemplate(varID)) {\r\n            let template: VE_Template = global_vars.getTemplate(varID);\r\n            assignment.setLeftTemplate(template);\r\n          }\r\n          else {\r\n            // \r\n            // if (VerySceneVariables.Variables.isCreatedExpression(varID)) {\r\n            //   VE_ErrorManager.Add(VE_Error.Error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.TotalString + \"*\", \"\"));\r\n            //   return false;\r\n            // }\r\n            // else if (VerySceneVariables.Variables.IsCreatedVariable(varID)) {\r\n            //   IVeryVar v = VerySceneVariables.Variables.GetVariable(varID);\r\n            //   assignment.SetLeft(v);\r\n            // }\r\n            // else {\r\n            //   VE_ErrorManager.Add(VE_Error.Error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.TotalString + \"*\", \"\"));\r\n            //   return false;\r\n            // }\r\n            VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*\", \"\"));\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n      return false;\r\n    }\r\n\r\n\r\n    // 2 1*2.*3*.*4.*.*5\r\n    varID = action_data.varValue.trim();\r\n\r\n    // \r\n    if (varID.startsWith(\"\\\"\") || varID.startsWith(\"'\") || varID.startsWith(\"\") || varID.startsWith(\"\")) {\r\n      assignment.setRightConst(varID.substring(1, varID.length - 2).trim());\r\n    }\r\n    else if (VE_StringFormat.isFormulaString(varID))  // \r\n    {\r\n      // Debug.LogError(varID);\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      StateConst.AssignmentFormulaCount++;\r\n      let localExp: IExpression = VE_Expressions.createLocalExpression(StateConst.AssignmentPrefix + StateConst.AssignmentFormulaCount.toString(), varID, project_name, object_id, errorInfo);\r\n      if (!errorInfo.isRight || !localExp) {\r\n        // errorInfo = \"\\n\" + errorInfo + \"\" + errorPos;\r\n        // return null;\r\n        VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\" + errorInfo, \"\"));\r\n        return false;\r\n      }\r\n      assignment.setRightVariable(new VeryExpression(localExp));\r\n    }\r\n    else {\r\n      if (varID.indexOf(StateConst.VARIABLE_SYMBOL) > -1)  // \r\n      {\r\n        if (varID.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n          let valArray: string[] = varID.split(StateConst.STATE_SEPARATOR);\r\n          for (let q: number = 0; q < valArray.length; q++) {\r\n            valArray[q] = valArray[q].trim();\r\n          }\r\n          // .* or *.*\r\n          if (valArray.length === 2) {\r\n            // *.*\r\n            if (valArray[0].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n              let templateVarID: string = valArray[0].substring(1);\r\n              varID = valArray[1].substring(1);\r\n              if (very_object.isCreatedTemplate(templateVarID)) {\r\n                let template: VE_Template = very_object.getTemplate(templateVarID);\r\n                if (template.varData.isCreatedVariable(varID) || template.dataSource.isCreatedFsm(varID)) {\r\n                  // \r\n                  assignment.setRightTemplateVariable(template, varID);\r\n                }\r\n                else {\r\n                  VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.***\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                if (global_vars.isCreatedTemplate(templateVarID)) {\r\n                  let template: VE_Template = global_vars.getTemplate(templateVarID);\r\n                  if (template.varData.isCreatedVariable(varID) || template.dataSource.isCreatedFsm(varID)) {\r\n                    // \r\n                    assignment.setRightTemplateVariable(template, varID);\r\n                  }\r\n                  else {\r\n                    VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.***\", \"\"));\r\n                    return false;\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.**\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n            }\r\n            // .*\r\n            else {\r\n              if (objects.isCreated(valArray[0])) {\r\n                let aObject: VeryEngineObject = objects.getVeryObject(valArray[0]);\r\n                varID = varID.substring(1);\r\n                let rightVar: Nullable<IVeryVar> = null;\r\n                let rightTemplate: Nullable<VE_Template> = null;\r\n                if (aObject.isCreatedExpression(varID)) {\r\n                  rightVar = new VeryExpression(aObject.getExpression(varID));\r\n                }\r\n                else if (aObject.isCreatedFsm(varID)) {\r\n                  rightVar = aObject.getFsm(varID).fsmVar;\r\n                }\r\n                else if (aObject.isCreatedVariable(varID)) {\r\n                  rightVar = aObject.getVariable(varID);\r\n                }\r\n                else if (aObject.isCreatedTemplate(varID)) {\r\n                  rightTemplate = aObject.getTemplate(varID);\r\n                }\r\n                else {\r\n                  VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*\", \"\"));\r\n                  return false;\r\n                }\r\n                // \r\n                if (rightVar !== null) {\r\n                  if (assignment.leftType === AssignType.Template) {\r\n                    VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n                    return false;\r\n                  }\r\n                  else if (assignment.leftType === AssignType.Variable) {\r\n                    if (VE_AssignmentTypeJudge.allow(assignment.leftVariable!, rightVar)) {\r\n                      assignment.setRightVariable(rightVar);\r\n                    }\r\n                    else {\r\n                      VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n                      return false;\r\n                    }\r\n                  }\r\n                  else {\r\n                    // \r\n                    assignment.setRightVariable(rightVar);\r\n                  }\r\n                }\r\n                else if (rightTemplate != null) {\r\n                  if (assignment.leftType === AssignType.Template) {\r\n                    assignment.setRightTemplate(rightTemplate);\r\n                  }\r\n                  else {\r\n                    VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n                    return false;\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          else if (valArray.length === 3)  // .*.*\r\n          {\r\n            // .*.*\r\n            if (valArray[0].startsWith(StateConst.STATE_SEPARATOR) || !valArray[1].startsWith(StateConst.STATE_SEPARATOR) || !valArray[2].startsWith(StateConst.STATE_SEPARATOR)) {\r\n              VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"1*2.*3*.*4.*.*\", \"\"));\r\n              return false;\r\n            }\r\n            else {\r\n              let templateVarID: string = valArray[1].substring(1);\r\n              varID = valArray[2].substring(1);\r\n              if (objects.isCreated(valArray[0])) {\r\n                let tObject: VeryEngineObject = objects.getVeryObject(valArray[0]);\r\n                if (tObject.isCreatedTemplate(templateVarID)) {\r\n                  let template: VE_Template = tObject.getTemplate(templateVarID);\r\n                  // \r\n                  if (template.dataSource.isCreatedFsm(varID) || template.varData.isCreatedVariable(varID)) {\r\n                    // \r\n                    assignment.setRightTemplateVariable(template, varID);\r\n                  }\r\n                  else {\r\n                    VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.*.**\", \"\"));\r\n                    return false;\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.**\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.*\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          else {\r\n            VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"1*2.*3*.*4.*.*\", \"\"));\r\n            return false;\r\n          }\r\n        }\r\n        else // *\r\n        {\r\n          varID = varID.substring(1);\r\n          let rightVar: Nullable<IVeryVar> = null;\r\n          let rightTemplate: Nullable<VE_Template> = null;\r\n          if (very_object.isCreatedExpression(varID)) {\r\n            rightVar = new VeryExpression(very_object.getExpression(varID));\r\n          }\r\n          else if (very_object.isCreatedFsm(varID)) {\r\n            rightVar = very_object.getFsm(varID).fsmVar;\r\n          }\r\n          else if (very_object.isCreatedVariable(varID)) {\r\n            rightVar = very_object.getVariable(varID);\r\n          }\r\n          else if (very_object.isCreatedTemplate(varID)) {\r\n            rightTemplate = very_object.getTemplate(varID);\r\n          }\r\n          else {\r\n            // \r\n            if (global_vars.isCreatedExpression(varID)) {\r\n              rightVar = new VeryExpression(global_vars.getExpression(varID));\r\n            }\r\n            else if (global_vars.isCreatedVariable(varID)) {\r\n              rightVar = global_vars.getVariable(varID);\r\n            }\r\n            else if (global_vars.isCreatedTemplate(varID)) {\r\n              rightTemplate = global_vars.getTemplate(varID);\r\n            }\r\n            else {\r\n              //\r\n              if (VerySceneVariables.Variables.isCreatedExpression(varID)) {\r\n                rightVar = new VeryExpression(VerySceneVariables.Variables.getExpression(varID));\r\n              }\r\n              else if (VerySceneVariables.Variables.isCreatedVariable(varID)) {\r\n                rightVar = VerySceneVariables.Variables.getVariable(varID);\r\n              }\r\n              else {\r\n                VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          // \r\n          if (rightVar != null) {\r\n            if (assignment.leftType === AssignType.Template) {\r\n              VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n              return false;\r\n            }\r\n            else if (assignment.leftType === AssignType.Variable) {\r\n              if (VE_AssignmentTypeJudge.allow(assignment.leftVariable!, rightVar)) {\r\n                assignment.setRightVariable(rightVar);\r\n              }\r\n              else {\r\n                VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n            else {\r\n              // \r\n              assignment.setRightVariable(rightVar);\r\n            }\r\n          }\r\n          else if (rightTemplate != null) {\r\n            if (assignment.leftType === AssignType.Template) {\r\n              assignment.setRightTemplate(rightTemplate);\r\n            }\r\n            else {\r\n              VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n              return false;\r\n            }\r\n          }\r\n          else {\r\n            VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n      else  // \r\n      {\r\n        if (assignment.leftType === AssignType.Template) {\r\n          if (varID.trim().toLowerCase() === \"null\") {\r\n            assignment.setRightNull();\r\n          }\r\n          else {\r\n            VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"null\", \"\"));\r\n            return false;\r\n          }\r\n        }\r\n        else if (assignment.leftType === AssignType.TemplateVariable) {\r\n          assignment.setRightConst(varID);\r\n        }\r\n        else {\r\n          if (assignment.leftVariable !== null) {\r\n            let errorInfo: ErrorInfo = new ErrorInfo();\r\n            let newValue: any = assignment.leftVariable.initValue(varID, errorInfo);\r\n            if (!errorInfo.isRight || !newValue) {\r\n              VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\" + errorInfo + \"\", \"\"));\r\n              return false;\r\n            }\r\n            else {\r\n              assignment.setRightConstValue(newValue);\r\n            }\r\n          }\r\n          else {\r\n            VE_ErrorManager.add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    let stateAction: VE_StateAction = new VE_StateAction();\r\n    stateAction.setAssignment(assignment);\r\n    state.addAction(stateAction);\r\n    return true;\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n  public static createInstance(project_name: string, object_id: string, var_id: string, template: VE_Template, object_name: string, error_info: ErrorInfo, destroy_on_create_new: boolean): VE_Template {\r\n\r\n\r\n    return template;\r\n  }\r\n\r\n\r\n}","export * from './loaderManager';\r\nexport * from './createInstance';","import { VeryTable } from '../index';\r\nimport { VE_Template, VE_Templates } from '../template';\r\nimport { VeryEngineObject, VE_Objects } from '../object';\r\nimport { VE_FsmData, VE_StateData, VE_StateTriggerData, VE_StateActionData } from '../dataSource';\r\nimport { VE_Manager } from '../manager';\r\nimport { VE_Variables, GameObject, VeryVarManager } from '../variables';\r\nimport { VE_StringFormat } from '../utility';\r\nimport { VE_ErrorManager, VE_Error } from '../global';\r\nimport { StateConst } from '../state';\r\nimport { CreateInstance } from './createInstance';\r\n\r\n\r\nexport enum AnalisysType { Global, Object, Template }\r\n\r\nexport class LoaderManager {\r\n\r\n  private _currentType: AnalisysType = AnalisysType.Global;\r\n\r\n  private _table!: VeryTable;\r\n\r\n  private _projectName: string = '';\r\n\r\n  private _lastFsmID: string = '';\r\n  private _activeTemplate: Nullable<VE_Template> = null;\r\n  private _activeObject: Nullable<VeryEngineObject> = null;\r\n  private _activeFsmData: Nullable<VE_FsmData> = null;\r\n  private _activeStateData: Nullable<VE_StateData> = null;\r\n\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public load(project_name: string, table: VeryTable): boolean {\r\n    this._projectName = project_name;\r\n    this._table = table;\r\n\r\n    //\r\n    VE_Manager.createProject(project_name);\r\n\r\n    let templates: VE_Templates = VE_Manager.templates(project_name);\r\n    let objects: VE_Objects = VE_Manager.objects(project_name);\r\n    let globalVars: VE_Variables = VE_Manager.variables(project_name);\r\n\r\n    // console.log(table);\r\n    if (table) {\r\n      for (let i: number = 1; i < table.RowCount; i++) {\r\n        // console.log(table.getRow(i));\r\n        // \r\n        if(table.getData(i, 0).startsWith('//')) {\r\n          continue;\r\n        }\r\n        // \r\n        if(table.getRow(i)!.isEmpty()) {\r\n          continue;\r\n          // console.log('' + (i + 1));\r\n        }\r\n        // 1\r\n        if (table.getData(i, 0).startsWith(\"_\")) {\r\n          this._activeFsmData = null;\r\n          this._activeStateData = null;\r\n          this._currentType = AnalisysType.Template;\r\n          let templateID = table.getData(i, 0).replace(' ', '').substring(3);\r\n          // TODO: \r\n          if (templateID.indexOf(':') > -1 || templateID.indexOf('') > -1) {\r\n\r\n          } else {\r\n            if (!VE_StringFormat.isIDLegal(templateID)) {\r\n              VE_ErrorManager.add(VE_Error.error(table.pos(i, 0), \"\" + table.getData(i, 0) + \"\", table.ID))\r\n              return false;\r\n            }\r\n            if (!templates.isCreatedTemplate(templateID)) {\r\n              let template: VE_Template = new VE_Template(project_name, templateID);\r\n              templates.addTemplate(templateID, template);\r\n              this._activeTemplate = template;\r\n            } else {\r\n              VE_ErrorManager.add(VE_Error.error(table.pos(i, 0), \"\" + table.getData(i, 0) + \"\", table.ID))\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        // 2\r\n        else if (table.getData(i, 0) !== '') {\r\n          this._activeFsmData = null;\r\n          this._activeStateData = null;\r\n          this._currentType = AnalisysType.Object;\r\n          let objectID: string = table.getData(i, 0);\r\n          let objName: string = '';\r\n          if (objectID.indexOf('=') > -1) {\r\n            let nameArray: string[] = objectID.split('=');\r\n            if (nameArray.length === 2) {\r\n              objectID = nameArray[0].trim();\r\n              objName = nameArray[1].trim();\r\n            } else {\r\n              VE_ErrorManager.add(VE_Error.error(table.pos(i, 0), \"\" + table.getData(i, 0) + \"=\", table.ID))\r\n              return false;\r\n            }\r\n          }\r\n          if (!VE_StringFormat.isIDLegal(objectID)) {\r\n            VE_ErrorManager.add(VE_Error.error(table.pos(i, 0), \"\" + table.getData(i, 0) + \"\", table.ID))\r\n            return false;\r\n          }\r\n          // GameObject\r\n          let activeGameObject: Nullable<GameObject> = null;\r\n          if (objName === '') {\r\n            activeGameObject = new GameObject(`__${objectID}_Empty`);\r\n          } else {\r\n            activeGameObject = GameObject.find(objName);\r\n            if (activeGameObject === null) {\r\n              VE_ErrorManager.add(VE_Error.error(table.pos(i, 0), \"\" + objName + \"\", table.ID))\r\n              return false;\r\n            }\r\n          }\r\n          if (!objects.isCreated(objectID)) {\r\n            // \r\n            let tempObject: VeryEngineObject = new VeryEngineObject(project_name, objectID, activeGameObject);\r\n            objects.add(objectID, tempObject);\r\n            this._activeObject = tempObject;\r\n          } else {\r\n            VE_ErrorManager.add(VE_Error.error(table.pos(i, 0), \"\" + table.getData(i, 0) + \"\", table.ID))\r\n            return false;\r\n          }\r\n        }\r\n        // 3\r\n        else if (table.getData(i, 5) !== \"\" && table.getData(i, 1) === \"\" && table.getData(i, 2) === \"\" && table.getData(i, 3) === \"\" && table.getData(i, 4) === \"\" && table.getData(i, 6) === \"\" && table.getData(i, 7) === \"\" && table.getData(i, 8) === \"\") {\r\n          let paraData: string = table.getData(i, 5);\r\n          // \r\n          if (this._currentType === AnalisysType.Global) {\r\n            // \r\n            let varArray: string[] = VE_StringFormat.paraSegment(paraData);\r\n            if (varArray.length === 2 || varArray.length === 3) {\r\n              let varID: string = varArray[0].trim();\r\n              if (!VE_StringFormat.isIDLegal(varID)) {\r\n                VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              }\r\n              let paraArray: string[] = [varArray[1].trim()];\r\n              if (varArray.length === 2) {\r\n                paraArray[1] = '';\r\n              } else {\r\n                paraArray[1] = varArray[2].trim();\r\n              }\r\n              if (!globalVars.varData.isCreatedVariable(varID)) {\r\n                globalVars.varData.addVariable(varID, paraArray, table.pos(i, 5));\r\n              } else {\r\n                VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              }\r\n            } else {\r\n              VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n              return false;\r\n            }\r\n          }\r\n          // \r\n          else if (paraData.indexOf('=') > -1) {\r\n            let paraArray: string[] = paraData.split('=');\r\n            // \r\n            // \r\n            if (paraArray.length === 2 && paraArray[0].trim() === this._lastFsmID) {\r\n              if (this._activeFsmData === null) {\r\n                VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              } else {\r\n                let stateInfo: string[] = paraArray[1].trim().split(/,|/);\r\n                let stateIndex: number = StateConst.STATE_INDEX;\r\n                let stateData: Nullable<VE_StateData> = null;\r\n                if (stateInfo.length === 2) {\r\n                  stateInfo[0] = stateInfo[0].trim();\r\n                  stateInfo[1] = stateInfo[1].trim();\r\n                  if (stateInfo[1].startsWith('#')) {\r\n                    stateIndex = parseInt(stateInfo[1].substring(1));\r\n                    if (stateIndex === NaN) {\r\n                      VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"IDIDID=#ID\", table.ID))\r\n                      return false;\r\n                    }\r\n                  } else {\r\n                    VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"IDIDID=#ID\", table.ID))\r\n                    return false;\r\n                  }\r\n                }\r\n                stateData = new VE_StateData(this._activeFsmData, stateInfo[0].trim(), false, stateIndex);\r\n                stateData.rowIndex = i;\r\n                this._activeFsmData.addState(stateData);\r\n                this._activeStateData = stateData;\r\n              }\r\n            }\r\n            // \r\n            else {\r\n              let varArray: string[] = VE_StringFormat.paraSegment(paraData);\r\n              if (varArray.length === 3) {\r\n                let varID: string = varArray[0].trim();\r\n                if (!VE_StringFormat.isIDLegal(varID)) {\r\n                  VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                let para2Array: string[] = [varArray[1].trim(), varArray[2].trim()];\r\n                // \r\n                if (this._currentType === AnalisysType.Object) {\r\n                  if (this._activeObject!.varData.isCreatedVariable(varID)) {\r\n                    VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + this._activeObject!.objectID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  // \r\n                  if (this._activeObject!.dataSource.isCreatedFsm(varID)) {\r\n                    VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + this._activeObject!.objectID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  this._activeObject!.varData.addVariable(varID, para2Array, table.pos(i, 5));\r\n                }\r\n                else if (this._currentType === AnalisysType.Template) {\r\n                  if (this._activeTemplate!.varData.isCreatedVariable(varID)) {\r\n                    VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + this._activeTemplate!.templateID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  // \r\n                  if (this._activeTemplate!.dataSource.isCreatedFsm(varID)) {\r\n                    VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  this._activeTemplate!.varData.addVariable(varID, para2Array, table.pos(i, 5));\r\n                }\r\n                else {\r\n                  VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n              } else {\r\n                VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          // \r\n          else {\r\n            let varArray: string[] = VE_StringFormat.paraSegment(paraData);\r\n            if (varArray.length === 2 || varArray.length === 3) {\r\n              let varID: string = varArray[0].trim();\r\n              if (!VE_StringFormat.isIDLegal(varID)) {\r\n                VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              }\r\n              let paraArray: string[] = [varArray[1].trim()];\r\n              if (varArray.length === 2) {\r\n                paraArray[1] = '';\r\n              } else {\r\n                paraArray[1] = varArray[2].trim();\r\n              }\r\n              // \r\n              if (this._currentType === AnalisysType.Object) {\r\n                if (this._activeObject!.varData.isCreatedVariable(varID)) {\r\n                  VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + this._activeObject!.objectID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                // \r\n                if (this._activeObject!.dataSource.isCreatedFsm(varID)) {\r\n                  VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + this._activeObject!.objectID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                this._activeObject!.varData.addVariable(varID, paraArray, table.pos(i, 5));\r\n              }\r\n              else if (this._currentType === AnalisysType.Template) {\r\n                if (this._activeTemplate!.varData.isCreatedVariable(varID)) {\r\n                  VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + this._activeTemplate!.templateID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                // \r\n                if (this._activeTemplate!.dataSource.isCreatedFsm(varID)) {\r\n                  VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + this._activeTemplate!.templateID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                this._activeTemplate!.varData.addVariable(varID, paraArray, table.pos(i, 5));\r\n              }\r\n              else {\r\n                VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              }\r\n            } else {\r\n              VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        // 4 +  +  +  + \r\n        else {\r\n          // \r\n          if (table.getData(i, 5) !== '') {\r\n            let paraData: string = table.getData(i, 5);\r\n            // \r\n            if (paraData.indexOf('=') > -1) {\r\n              let stateArray: string[] = paraData.split('=');\r\n              let fsmID: string = stateArray[0].trim();\r\n              // \r\n              if (stateArray.length === 2 && fsmID === this._lastFsmID) {\r\n                if (this._activeFsmData === null) {\r\n                  VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                } else {\r\n                  let stateInfo: string[] = stateArray[1].trim().split(/,|/);\r\n                  let stateIndex: number = StateConst.STATE_INDEX;\r\n                  let stateData: Nullable<VE_StateData> = null;\r\n                  if (stateInfo.length === 2) {\r\n                    stateInfo[0] = stateInfo[0].trim();\r\n                    stateInfo[1] = stateInfo[1].trim();\r\n                    if (stateInfo[1].startsWith('#')) {\r\n                      stateIndex = parseInt(stateInfo[1].substring(1));\r\n                      if (stateIndex === NaN) {\r\n                        VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"IDIDID=#ID\", table.ID))\r\n                        return false;\r\n                      }\r\n                    } else {\r\n                      VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"IDIDID=#ID\", table.ID))\r\n                      return false;\r\n                    }\r\n                  }\r\n                  stateData = new VE_StateData(this._activeFsmData, stateInfo[0].trim(), false, stateIndex);\r\n                  stateData.rowIndex = i;\r\n                  this._activeFsmData.addState(stateData);\r\n                  this._activeStateData = stateData;\r\n                }\r\n              } else {\r\n                VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\" + fsmID + \"\", table.ID))\r\n                return false;\r\n              }\r\n            }\r\n            // \r\n            else {\r\n              let varArray: string[] = VE_StringFormat.paraSegment(paraData);\r\n              if (varArray.length === 2 || varArray.length === 3 || varArray.length === 4) {\r\n                let fsmID: string = varArray[0].trim();\r\n                if (!VE_StringFormat.isIDLegal(fsmID)) {\r\n                  VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                this._lastFsmID = fsmID;\r\n                let paraArray: string[] = [varArray[1].trim()];\r\n                if (varArray.length === 2) {\r\n                  paraArray[1] = '';\r\n                } else {\r\n                  paraArray[1] = varArray[2].trim();\r\n                }\r\n                let stateIndex: number = StateConst.STATE_INDEX;\r\n                if (varArray.length === 4) {\r\n                  if (varArray[3].startsWith('#')) {\r\n                    stateIndex = parseInt(varArray[3].substring(1));\r\n                    if (stateIndex === NaN) {\r\n                      VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + varArray[3] + \"IDIDID#ID\", table.ID))\r\n                      return false;\r\n                    }\r\n                  } else {\r\n                    VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + varArray[3] + \"IDIDID#ID\", table.ID))\r\n                    return false;\r\n                  }\r\n                }\r\n                // \r\n                if (this._currentType === AnalisysType.Object) {\r\n                  if (this._activeObject!.varData.isCreatedVariable(fsmID)) {\r\n                    VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + this._activeObject!.objectID + \"\" + fsmID + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  // \r\n                  if (this._activeObject!.dataSource.isCreatedFsm(fsmID)) {\r\n                    VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + this._activeObject!.objectID + \"\" + fsmID + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  // \r\n                  this._activeObject!.dataSource.createFsm(fsmID, table.pos(i, 5));\r\n                  this._activeFsmData = this._activeObject!.dataSource.getFsmData(fsmID);\r\n                  // \r\n                  if (VeryVarManager.hasVarType(paraArray[0])) {\r\n                    this._activeFsmData.initFsm(paraArray[0], paraArray[1]);\r\n                    // \r\n                    let stateData: VE_StateData = new VE_StateData(this._activeFsmData, paraArray[1], true, stateIndex);\r\n                    stateData.rowIndex = i;\r\n                    this._activeFsmData.addState(stateData);\r\n                    this._activeStateData = stateData;\r\n                  } else {\r\n                    VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + this._activeObject!.objectID + \"\" + fsmID + \"\" + paraArray[0] + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                }\r\n                else if (this._currentType === AnalisysType.Template) {\r\n                  if (this._activeTemplate!.varData.isCreatedVariable(fsmID)) {\r\n                    VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + this._activeTemplate!.templateID + \"\" + fsmID + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  // \r\n                  if (this._activeTemplate!.dataSource.isCreatedFsm(fsmID)) {\r\n                    VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + this._activeTemplate!.templateID + \"\" + fsmID + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  // \r\n                  this._activeTemplate!.dataSource.createFsm(fsmID, table.pos(i, 5));\r\n                  this._activeFsmData = this._activeTemplate!.dataSource.getFsmData(fsmID);\r\n                  // \r\n                  if (VeryVarManager.hasVarType(paraArray[0])) {\r\n                    this._activeFsmData.initFsm(paraArray[0], paraArray[1]);\r\n                    // \r\n                    let stateData: VE_StateData = new VE_StateData(this._activeFsmData, paraArray[1], true, stateIndex);\r\n                    stateData.rowIndex = i;\r\n                    this._activeFsmData.addState(stateData);\r\n                    this._activeStateData = stateData;\r\n                  } else {\r\n                    VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + this._activeTemplate!.objectID + \"\" + fsmID + \"\" + paraArray[0] + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n              } else {\r\n                VE_ErrorManager.add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n\r\n          // \r\n          if (table.getData(i, 2) !== '') {\r\n            if (this._activeFsmData === null || this._activeStateData === null) {\r\n              VE_ErrorManager.add(VE_Error.error(table.pos(i, 2), \"\" + table.getData(i, 2) + \"\", table.ID))\r\n              return false;\r\n            }\r\n            // DataSource\r\n            let triggerID: string = table.getData(i, 2);\r\n            if (!VE_StringFormat.isIDLegal(triggerID)) {\r\n              VE_ErrorManager.add(VE_Error.error(table.pos(i, 2), \"\" + table.getData(i, 2) + \"\", table.ID))\r\n              return false;\r\n            }\r\n            if (table.getData(i, 3) !== '') {\r\n              if (!this._activeFsmData!.dataSource.isCreatedTrigger(triggerID)) {\r\n                this._activeFsmData!.dataSource.addTrigger(triggerID, VE_StringFormat.paraSegment(table.getData(i, 3)), table.pos(i, 2));\r\n              } else {\r\n                VE_ErrorManager.add(VE_Error.error(table.pos(i, 2), \"\" + table.getData(i, 2) + \"\", table.ID))\r\n                return false;\r\n              }\r\n            }\r\n\r\n            // StateData\r\n            let triggerData: VE_StateTriggerData = new VE_StateTriggerData(triggerID);\r\n            this._activeStateData.addTrigger(triggerData, table.pos(i, 2));\r\n\r\n            // \r\n            if (table.getData(i, 1) !== '') {\r\n              triggerData.logicalSwitch = table.getData(i, 1);\r\n            }\r\n\r\n            // \r\n            if (table.getData(i, 4) !== '') {\r\n              triggerData.logicalExp = table.getData(i, 4);\r\n            }\r\n          } else {\r\n            // \r\n            if (table.getData(i, 1) !== '') {\r\n              VE_ErrorManager.add(VE_Error.error(table.pos(i, 1), \"\" + table.getData(i, 1) + \"\", table.ID))\r\n              return false;\r\n            }\r\n\r\n            // \r\n            if (table.getData(i, 4) !== '') {\r\n              if (this._activeFsmData === null || this._activeStateData === null) {\r\n                VE_ErrorManager.add(VE_Error.error(table.pos(i, 4), \"\" + table.getData(i, 4) + \"\", table.ID))\r\n                return false;\r\n              }\r\n              if (this._activeStateData.logicalExp !== '') {\r\n                VE_ErrorManager.add(VE_Error.error(table.pos(i, 4), \"\" + table.getData(i, 4) + \"12\", table.ID))\r\n                return false;\r\n              } else {\r\n                this._activeStateData.logicalExp = table.getData(i, 4);\r\n              }\r\n            }\r\n\r\n            if (table.getData(i, 3) !== '') {\r\n              VE_ErrorManager.add(VE_Error.warning(table.pos(i, 3), \"\" + table.getData(i, 3) + \"\", table.ID))\r\n            }\r\n          }\r\n\r\n          // \r\n          if (table.getData(i, 6) !== '') {\r\n            if (this._activeFsmData === null || this._activeStateData === null) {\r\n              VE_ErrorManager.add(VE_Error.error(table.pos(i, 6), \"\" + table.getData(i, 6) + \"\", table.ID))\r\n              return false;\r\n            }\r\n            // \r\n            let tempStr: string = table.getData(i, 6).toLowerCase();\r\n            if (tempStr.startsWith('log(') || tempStr.startsWith('log') || tempStr.startsWith('') || tempStr.startsWith('(')) {\r\n              let newActionID: string = project_name + '___' + StateConst.LogCount++;\r\n              let actionData: VE_StateActionData = new VE_StateActionData(newActionID, 'true', 'false');\r\n              this._activeStateData.addAction(actionData, table.pos(i, 6));\r\n              let actionPara: string = table.getData(i, 6).substring(4);\r\n              if (tempStr.startsWith('')) {\r\n                actionPara = table.getData(i, 6).substring(3);\r\n              }\r\n              this._activeFsmData.dataSource.addAction(newActionID, ['', '', actionPara.substring(0, actionPara.length - 1)], ['false', 'false'], table.pos(i, 6));\r\n              if (table.getData(i, 7) !== '') {\r\n                VE_ErrorManager.add(VE_Error.warning(table.pos(i, 7), \"\" + table.getData(i, 7) + \"\", table.ID))\r\n              }\r\n            }\r\n            else if (tempStr.startsWith('error(') || tempStr.startsWith('error') || tempStr.startsWith('') || tempStr.startsWith('(')) {\r\n              let newActionID: string = project_name + '___' + StateConst.LogCount++;\r\n              let actionData: VE_StateActionData = new VE_StateActionData(newActionID, 'true', 'false');\r\n              this._activeStateData.addAction(actionData, table.pos(i, 6));\r\n              let actionPara: string = table.getData(i, 6).substring(6);\r\n              if (tempStr.startsWith('')) {\r\n                actionPara = table.getData(i, 6).substring(3);\r\n              }\r\n              this._activeFsmData.dataSource.addAction(newActionID, ['', '', actionPara.substring(0, actionPara.length - 1)], ['false', 'false'], table.pos(i, 6));\r\n              if (table.getData(i, 7) !== '') {\r\n                VE_ErrorManager.add(VE_Error.warning(table.pos(i, 7), \"\" + table.getData(i, 7) + \"\", table.ID))\r\n              }\r\n            }\r\n            else if (tempStr.startsWith('warn(') || tempStr.startsWith('warn') || tempStr.startsWith('') || tempStr.startsWith('(')) {\r\n              let newActionID: string = project_name + '___' + StateConst.LogCount++;\r\n              let actionData: VE_StateActionData = new VE_StateActionData(newActionID, 'true', 'false');\r\n              this._activeStateData.addAction(actionData, table.pos(i, 6));\r\n              let actionPara: string = table.getData(i, 6).substring(5);\r\n              if (tempStr.startsWith('')) {\r\n                actionPara = table.getData(i, 6).substring(3);\r\n              }\r\n              this._activeFsmData.dataSource.addAction(newActionID, ['', '', actionPara.substring(0, actionPara.length - 1)], ['false', 'false'], table.pos(i, 6));\r\n              if (table.getData(i, 7) !== '') {\r\n                VE_ErrorManager.add(VE_Error.warning(table.pos(i, 7), \"\" + table.getData(i, 7) + \"\", table.ID))\r\n              }\r\n            }\r\n            else if (table.getData(i, 6).indexOf('=') > -1) {\r\n              if (table.getData(i, 7) !== '') {\r\n                VE_ErrorManager.add(VE_Error.warning(table.pos(i, 7), \"\" + table.getData(i, 7) + \"\", table.ID))\r\n              }\r\n\r\n              // = \r\n              let equalIndex: number = table.getData(i, 6).indexOf('=');\r\n              let actionData: VE_StateActionData = new VE_StateActionData('');\r\n              actionData.setAssignmentAction(table.getData(i, 6), table.getData(i, 6).substring(0, equalIndex).trim(), table.getData(i, 6).substring(equalIndex + 1).trim());\r\n              this._activeStateData.addAction(actionData, table.pos(i, 6));\r\n            }\r\n            else {\r\n              // ID\r\n              let actionArray: string[] = VE_StringFormat.paraSegment(table.getData(i, 6));\r\n              if (actionArray.length === 2 || actionArray.length === 3 || actionArray.length === 4) {\r\n                let actionData: VE_StateActionData;\r\n                if (actionArray.length === 2) {\r\n                  actionData = new VE_StateActionData(actionArray[0], actionArray[1]);\r\n                } else if (actionArray.length === 3) {\r\n                  actionData = new VE_StateActionData(actionArray[0], actionArray[1], actionArray[2]);\r\n                } else {\r\n                  actionData = new VE_StateActionData(actionArray[0], actionArray[1], actionArray[2], actionArray[3]);\r\n                }\r\n                this._activeStateData.addAction(actionData, table.pos(i, 6));\r\n              } else {\r\n                VE_ErrorManager.add(VE_Error.error(table.pos(i, 6), \"\" + table.getData(i, 6) + \"IDboolbool\", table.ID))\r\n                return false;\r\n              }\r\n\r\n              // \r\n              if (table.getData(i, 7) !== '') {\r\n                if (!VE_StringFormat.isIDLegal(actionArray[0])) {\r\n                  VE_ErrorManager.add(VE_Error.error(table.pos(i, 6), \"\" + table.getData(i, 6) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                if (!this._activeFsmData.dataSource.isCreatedAction(actionArray[0])) {\r\n                  if (actionArray.length == 2) {\r\n                    this._activeFsmData.dataSource.addAction(actionArray[0], VE_StringFormat.paraSegment(table.getData(i, 7)), [actionArray[1], 'false'], table.pos(i, 6));\r\n                  } else {\r\n                    this._activeFsmData.dataSource.addAction(actionArray[0], VE_StringFormat.paraSegment(table.getData(i, 7)), [actionArray[1], actionArray[2]], table.pos(i, 6));\r\n                  }\r\n                } else {\r\n                  VE_ErrorManager.add(VE_Error.error(table.pos(i, 6), \"\" + table.getData(i, 6) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n              }\r\n            }\r\n          } else {\r\n            if (table.getData(i, 7) !== '') {\r\n              VE_ErrorManager.add(VE_Error.warning(table.pos(i, 7), \"\" + table.getData(i, 7) + \"\", table.ID))\r\n            }\r\n          }\r\n\r\n          // \r\n          if (table.getData(i, 8) !== '') {\r\n            if (this._activeFsmData === null || this._activeStateData === null) {\r\n              VE_ErrorManager.add(VE_Error.error(table.pos(i, 8), \"\" + table.getData(i, 8) + \"\", table.ID))\r\n              return false;\r\n            }\r\n            this._activeStateData!.addAssociatedState(table.getData(i, 8), table.pos(i, 8));\r\n          }\r\n        }\r\n      }\r\n\r\n      return CreateInstance.createProject(project_name);\r\n    } else {\r\n      VE_ErrorManager.add(VE_Error.error('', '', 'null'));\r\n      return false;\r\n    }\r\n\r\n  }\r\n\r\n\r\n}","export * from './projects';\r\nexport * from './manager';\r\nexport * from './reset';","import { VE_Projects } from \"./projects\";\r\nimport { VE_Objects } from \"../object\";\r\nimport { VE_Templates } from \"../template\";\r\nimport { VE_Variables } from \"../variables\";\r\nimport { VE_VariableData } from \"../dataSource\";\r\n\r\nexport class VE_Manager {\r\n\r\n  public static get projects(): VE_Projects {\r\n    if(this._projects === null) {\r\n      this._projects = new VE_Projects();\r\n    }\r\n    return this._projects;\r\n  }\r\n  private static _projects: VE_Projects | null = null; \r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public static createProject(project_name: string): void {\r\n    if(!VE_Manager.projects.isCreatedObjects(project_name)) {\r\n      VE_Manager.projects.addObjects(project_name, new VE_Objects(project_name));\r\n    }\r\n    if(!VE_Manager.projects.isCreatedTemplates(project_name)) {\r\n      VE_Manager.projects.addTemplates(project_name, new VE_Templates(project_name));\r\n    }\r\n    if(!VE_Manager.projects.isCreatedVariables(project_name)) {\r\n      VE_Manager.projects.addVariables(project_name, new VE_Variables(project_name));\r\n    }\r\n  }\r\n\r\n  public static globalVarData(project_name: string): VE_VariableData {\r\n    if(!VE_Manager.projects.isCreatedGlobals(project_name)) {\r\n      VE_Manager.projects.addVariables(project_name, new VE_Variables(project_name));\r\n    }\r\n    return VE_Manager.projects.getGlobalVars(project_name);\r\n  }\r\n\r\n  public static templates(project_name: string): VE_Templates {\r\n    if(!VE_Manager.projects.isCreatedTemplates(project_name)) {\r\n      VE_Manager.projects.addTemplates(project_name, new VE_Templates(project_name));\r\n    }\r\n    return VE_Manager.projects.getTemplates(project_name);\r\n  }\r\n\r\n  public static variables(project_name: string): VE_Variables {\r\n    if(!VE_Manager.projects.isCreatedVariables(project_name)) {\r\n      VE_Manager.projects.addVariables(project_name, new VE_Variables(project_name));\r\n    }\r\n    return VE_Manager.projects.getVariables(project_name);\r\n  }\r\n\r\n  public static objects(project_name: string): VE_Objects {\r\n    if(!VE_Manager.projects.isCreatedObjects(project_name)) {\r\n      VE_Manager.projects.addObjects(project_name, new VE_Objects(project_name));\r\n    }\r\n    return VE_Manager.projects.getObjects(project_name);\r\n  }\r\n\r\n  public static clear(): void {\r\n    this._projects = null;\r\n  }\r\n\r\n  public static clearProject(project_name: string): void {\r\n    VE_Manager.clearProject(project_name);\r\n  }\r\n\r\n\r\n}","import { VE_Objects } from \"../object\";\r\nimport { VE_VariableData } from \"../dataSource\";\r\nimport { VE_Templates } from \"../template\";\r\nimport { VE_Variables } from \"../variables\";\r\n\r\n\r\nexport class VE_Projects {\r\n\r\n  private _objects: { [key: string]: VE_Objects } = {};\r\n  private _variables: { [key: string]: VE_Variables } = {};\r\n  private _templates: { [key: string]: VE_Templates } = {};\r\n\r\n  public projects: string[] = [];\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public isCreatedObjects(project_name: string): boolean {\r\n    if(this._objects[project_name]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addObjects(project_name: string, objects: VE_Objects): void {\r\n    this._objects[project_name] = objects;\r\n  }\r\n\r\n  public getObjects(project_name: string): VE_Objects {\r\n    return this._objects[project_name];\r\n  }\r\n\r\n  public isCreatedVariables(project_name: string): boolean {\r\n    if(this._variables[project_name]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addVariables(project_name: string, variables: VE_Variables): void {\r\n    this._variables[project_name] = variables;\r\n  }\r\n\r\n  public getVariables(project_name: string): VE_Variables {\r\n    return this._variables[project_name];\r\n  }\r\n\r\n  public isCreatedTemplates(project_name: string): boolean {\r\n    if(this._templates[project_name]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTemplates(project_name: string, templates: VE_Templates): void {\r\n    this._templates[project_name] = templates;\r\n  }\r\n\r\n  public getTemplates(project_name: string): VE_Templates {\r\n    return this._templates[project_name];\r\n  }\r\n\r\n  public isCreatedGlobals(project_name: string): boolean {\r\n    if(this._variables[project_name]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getGlobalVars(project_name: string): VE_VariableData {\r\n    return this._variables[project_name].varData;\r\n  }\r\n\r\n  public clear(): void {\r\n    // TODO\r\n    this._objects = {};\r\n    this._templates = {};\r\n    this._variables = {};\r\n  }\r\n\r\n  public clearPorject(project_name: string): void {\r\n    delete this._objects[project_name];\r\n    delete this._templates[project_name];\r\n    delete this._variables[project_name];\r\n  }\r\n\r\n  public sleep(): void {\r\n    \r\n  }\r\n\r\n\r\n}","export class VE_Reset {\r\n  constructor() {\r\n\r\n  }\r\n}","export * from './veryengineObject';\r\nexport * from './objects';","import { VeryEngineObject } from \"./veryengineObject\";\r\nimport { ArrayUtility } from \"../utility\";\r\n\r\nexport class VE_Objects {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  private _objectIDs: string[] = [];\r\n  private _objectDics: { [key: string]: VeryEngineObject } = {};\r\n\r\n  public get count(): number {\r\n    return this._objectIDs.length;\r\n  }\r\n\r\n  constructor(project_name: string) {\r\n    this._projectName = project_name;\r\n  }\r\n\r\n  public isCreated(object_id: string): boolean {\r\n    if (this._objectDics[object_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public add(object_id: string, very_object: VeryEngineObject): void {\r\n    if (!this.isCreated(object_id)) {\r\n      this._objectIDs.push(object_id);\r\n      this._objectDics[object_id] = very_object;\r\n    }\r\n  }\r\n\r\n  public getObjectID(index: number): string {\r\n    if(index >= 0 && index < this._objectIDs.length) {\r\n      return this._objectIDs[index];\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n\r\n  public getVeryObject(object_id: string): VeryEngineObject {\r\n    return this._objectDics[object_id];\r\n  }\r\n\r\n  public unloadObject(object_id: string): void {\r\n    // this._objectIDs.re\r\n    ArrayUtility.remove(this._objectIDs, object_id);\r\n    delete this._objectDics.object_id;\r\n\r\n  }\r\n\r\n  public clear(): void {\r\n    for(let i: number = 0; i < this._objectIDs.length; i++) {\r\n      let tempObject = this._objectDics[this._objectIDs[i]];\r\n      if(tempObject) {\r\n        tempObject.clear();\r\n      }\r\n    }\r\n    this._objectIDs = [];\r\n    this._objectDics = {};\r\n  }\r\n}","import { GameObject, IVeryVar } from \"../variables\";\r\nimport { IExpression } from \"../expression\";\r\nimport { VE_ActionBehaviour } from \"../action\";\r\nimport { VE_TriggerBehaviour } from \"../trigger\";\r\nimport { VE_Fsm, VE_State } from \"../state\";\r\nimport { VE_Template } from \"../template\";\r\nimport { VE_DataSource, VE_VariableData } from \"../dataSource\";\r\n\r\nexport class VeryEngineObject {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = '';\r\n\r\n  public gameObject: GameObject = new GameObject('');\r\n\r\n  private _variables: { [key: string]: IVeryVar } = {};\r\n  private _expressions: { [key: string]: IExpression } = {};\r\n  private _actions: { [key: string]: VE_ActionBehaviour } = {};\r\n  private _triggers: { [key: string]: VE_TriggerBehaviour } = {};\r\n  private _fsms: { [key: string]: VE_Fsm } = {};\r\n  private _templates: { [key: string]: VE_Template } = {};\r\n\r\n  public dataSource: VE_DataSource;\r\n\r\n  public varData: VE_VariableData;\r\n\r\n\r\n\r\n  constructor(project_name: string, object_id: string, game_object: GameObject) {\r\n    this._projectName = projectName;\r\n    this._objectID = object_id;\r\n    this.gameObject = game_object;\r\n    this.dataSource = new VE_DataSource(project_name, object_id, false);\r\n    this.varData = new VE_VariableData(project_name);\r\n  }\r\n\r\n  public isCreatedFsm(fsm_id: string): boolean {\r\n    if (this._fsms[fsm_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addFsm(fsm_id: string, fsm: VE_Fsm): void {\r\n    this._fsms[fsm_id] = fsm;\r\n  }\r\n\r\n  public getFsm(fsm_id: string): VE_Fsm {\r\n    return this._fsms[fsm_id];\r\n  }\r\n\r\n  public isCreatedTrigger(trigger_id: string): boolean {\r\n    if (this._triggers[trigger_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTrigger(trigger_id: string, trigger: VE_TriggerBehaviour): void {\r\n    this._triggers[trigger_id] = trigger;\r\n  }\r\n\r\n  public getTrigger(trigger_id: string): VE_TriggerBehaviour {\r\n    return this._triggers[trigger_id];\r\n  }\r\n\r\n  public isCreatedAction(action_id: string): boolean {\r\n    if (this._actions[action_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addAction(action_id: string, action: VE_ActionBehaviour): void {\r\n    this._actions[action_id] = action;\r\n  }\r\n\r\n  public getAction(action_id: string): VE_ActionBehaviour {\r\n    return this._actions[action_id];\r\n  }\r\n\r\n  public isCreatedVariable(var_id: string): boolean {\r\n    if (this._variables[var_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addVariable(var_id: string, variable: IVeryVar): void {\r\n    this._variables[var_id] = variable;\r\n  }\r\n\r\n  public getVariable(var_id: string): IVeryVar {\r\n    return this._variables[var_id];\r\n  }\r\n\r\n  public isCreatedExpression(exp_id: string): boolean {\r\n    if (this._expressions[exp_id]) {\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public addExpression(exp_id: string, expression: IExpression): void {\r\n    this._expressions[exp_id] = expression;\r\n  }\r\n\r\n  public getExpression(exp_id: string): IExpression {\r\n    return this._expressions[exp_id];\r\n  }\r\n\r\n  public isCreatedTemplate(template_id: string): boolean {\r\n    if (this._templates[template_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTemplate(template_id: string, template: VE_Template): void {\r\n    this._templates[template_id] = template;\r\n  }\r\n\r\n  public getTemplate(template_id: string): VE_Template {\r\n    return this._templates[template_id];\r\n  }\r\n\r\n  public isCreatedVar(var_id: string): boolean {\r\n    if (this._variables[var_id] || this._expressions[var_id] || this._templates[var_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // getState(fsm_id: string, index: number): VE_State {\r\n\r\n  // }\r\n\r\n  unload(): void { }\r\n\r\n  // setUnloadCallback(callback): void {}\r\n\r\n\r\n\r\n\r\n  public clear(): void {\r\n\r\n    if (this.dataSource) {\r\n      this.dataSource.clear();\r\n    }\r\n    if (this.varData) {\r\n      this.varData.clear();\r\n    }\r\n    this._variables = {};\r\n    this._expressions = {};\r\n\r\n    if (this._templates) {\r\n      Object.keys(this._templates).forEach(key => {\r\n        this._templates[key].clear();\r\n      })\r\n      this._templates = {};\r\n    }\r\n\r\n    this._fsms = {};\r\n\r\n    if (this._actions) {\r\n      Object.keys(this._actions).forEach(key => {\r\n        this._actions[key].destroy();\r\n      })\r\n      this._actions = {};\r\n    }\r\n\r\n    if (this._triggers) {\r\n      Object.keys(this._triggers).forEach(key => {\r\n        this._triggers[key].destroy();\r\n      })\r\n      this._triggers = {};\r\n    }\r\n  }\r\n\r\n\r\n}","export * from './verySceneVariables';","import { VE_Variables } from \"../variables\";\r\n\r\nexport class VerySceneVariables {\r\n\r\n  public static get Variables(): VE_Variables {\r\n    if(VerySceneVariables._variables === null) {\r\n      VerySceneVariables._variables = new VE_Variables('__scene_varibale__');\r\n    }\r\n    return VerySceneVariables._variables;\r\n  }\r\n  private static _variables: Nullable<VE_Variables> = null;\r\n\r\n  public static get HasLoaded(): boolean {\r\n    return this._hasLoaded;\r\n  }\r\n  private static _hasLoaded: boolean = false;\r\n\r\n  public static initIfNeeded(): void {\r\n    if(!this._hasLoaded) {\r\n      console.log('TODO: ');\r\n    }\r\n  }\r\n}","import { VE_State } from \"./state\";\r\nimport { AssociatedFsmType } from \"../enum\";\r\nimport { VE_Template } from \"../template\";\r\n\r\nexport class VE_AssociatedState {\r\n\r\n  private _types: AssociatedFsmType[] = [];\r\n  private _indexs: number[] = [];\r\n\r\n  private _numberIndex: { [key: number]: number } = {};\r\n  private _states: { [key: number]: VE_State } = {};\r\n  private _templates: { [key: number]: VE_Template } = {};\r\n  private _templateIDs: { [key: number]: string } = {};\r\n\r\n  public get FromState(): VE_State {\r\n    return this._fromState;\r\n  }\r\n  private _fromState: VE_State;\r\n\r\n  constructor(from_state: VE_State) {\r\n    this._fromState = from_state;\r\n  }\r\n  \r\n  public add(state: VE_State, index: number): void {\r\n    this._types.push(AssociatedFsmType.Object);\r\n    let key: number = this._types.length;\r\n    this._indexs.push(key);\r\n    this._numberIndex[key] = index;\r\n    this._states[key] = state;\r\n  }\r\n\r\n  public addTemplate(template: VE_Template, fsm_id: string, index: number): void {\r\n    this._types.push(AssociatedFsmType.Object);\r\n    let key: number = this._types.length;\r\n    this._indexs.push(key);\r\n    this._numberIndex[key] = index;\r\n    this._templates[key] = template;\r\n    this._templateIDs[key] = fsm_id;\r\n  }\r\n\r\n  public connect(): void {\r\n\r\n  }\r\n\r\n\r\n}","import { Dictionary } from \"../utility/dictionary\";\r\nimport { VE_State } from \"./state\";\r\nimport { Time } from \"../global\";\r\nimport { StateConst } from \"./stateConst\";\r\nimport { IVeryVar, VeryString } from \"../variables\";\r\nimport { VeryEngineObject } from \"../object\";\r\n\r\nexport class VE_Fsm {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  public get ID(): string {\r\n    return this._id;\r\n  }\r\n  private _id: string = '';\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = '';\r\n\r\n  public get fsmID(): string {\r\n    return this._fsmID;\r\n  }\r\n  private _fsmID: string = '';\r\n\r\n  public get fsmVar(): IVeryVar {\r\n    return this._fsmVar;\r\n  }\r\n  private _fsmVar: IVeryVar;\r\n\r\n  public get VeryObject(): VeryEngineObject {\r\n    return this._veryObject;\r\n  }\r\n  private _veryObject: VeryEngineObject;\r\n\r\n  private _stateDics: Dictionary<number, VE_State> = new Dictionary<number, VE_State>();\r\n  private _states: VE_State[] = [];\r\n\r\n  public get count(): number {\r\n    return this._states.length;\r\n  }\r\n\r\n  private _frameCount: number = -1;\r\n  private _triggerIDs: string[] = [];\r\n\r\n  constructor(project_name: string, object_id: string, fsm_id: string, fsm_variable: IVeryVar, very_object: VeryEngineObject) {\r\n    this._projectName = project_name;\r\n    this._objectID = object_id;\r\n    this._fsmID = fsm_id;\r\n    this._fsmVar = fsm_variable;\r\n    this._veryObject = very_object;\r\n  }\r\n\r\n  public isCreatedState(state_index: number): boolean {\r\n    return this._stateDics.ContainsKey(state_index);\r\n  }\r\n\r\n  public addState(state: VE_State, state_index: number): void {\r\n    if (!this._stateDics.ContainsKey(state_index)) {\r\n      this._stateDics.Add(state_index, state);\r\n      this._states.push(state);\r\n    }\r\n  }\r\n\r\n  public getState(state_index: number): Nullable<VE_State> {\r\n    return this._stateDics.GetValue(state_index);\r\n  }\r\n\r\n  public removeState(state_index: number): boolean {\r\n    if (this.isCreatedState(state_index)) {\r\n      this._stateDics.Remove(state_index);\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public receiveEvent(trigger_id: string): boolean {\r\n    if (Time.frameCount != this._frameCount) {\r\n      this._frameCount = Time.frameCount;\r\n      this._triggerIDs = [];\r\n      this._triggerIDs.push(trigger_id);\r\n      return true;\r\n    } else {\r\n      if (trigger_id.startsWith(StateConst.ASSOCIATED_STATE_PREFIX)) {\r\n        // console.log(`ID: ${trigger_id} Return True`);\r\n        return true;\r\n      } else {\r\n        if (this._triggerIDs.indexOf(trigger_id) !== -1) {\r\n          return false;\r\n        } else {\r\n          this._triggerIDs.push(trigger_id);\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n}","export * from './state';\r\nexport * from './fsm';\r\nexport * from './stateAction';\r\nexport * from './associatedState';\r\nexport * from './stateConst';","import { VE_Fsm } from \"./fsm\";\r\nimport { VE_StateAction } from \"./stateAction\";\r\nimport { VE_AssociatedState } from \"./associatedState\";\r\nimport { AssignmentType, StateActionType } from \"../enum\";\r\nimport { VE_Template } from \"../template\";\r\nimport { IVeryVar } from \"../variables\";\r\nimport { IExpression } from \"../expression\";\r\nimport { VE_SequenceActions, VE_Assignment } from \"../action\";\r\n\r\nexport class VE_State {\r\n  public get Fsm(): VE_Fsm {\r\n    return this._fsm;\r\n  }\r\n  private _fsm: VE_Fsm;\r\n\r\n  public get isInitialValue(): boolean {\r\n    return this._isInitialValue;\r\n  }\r\n  private _isInitialValue: boolean = false;\r\n\r\n  public get Value(): any {\r\n    return this._value;\r\n  }\r\n  private _value: any = '';\r\n\r\n  private _assignmentType: AssignmentType = AssignmentType.Const;\r\n\r\n  public get isTemplateVar(): boolean {\r\n    return this._isTemplateVar\r\n  }\r\n  private _isTemplateVar: boolean = false;\r\n\r\n  private _template: Nullable<VE_Template> = null;\r\n  private _varID: string = '';\r\n  private _templateVar: Nullable<IVeryVar> = null;\r\n  private _assignmentStr: string = '';\r\n\r\n  public get logicalExpression(): Nullable<IExpression> {\r\n    return this._logicalExpression;\r\n  }\r\n  private _logicalExpression: Nullable<IExpression> = null;\r\n\r\n  public get index(): number {\r\n    return this._index;\r\n  }\r\n  private _index: number = 0;\r\n\r\n  public get stateVariable(): Nullable<IVeryVar> {\r\n    return this._stateVariable;\r\n  }\r\n  private _stateVariable: Nullable<IVeryVar> = null;\r\n\r\n  public logicalAssociated: Nullable<IExpression> = null;\r\n\r\n\r\n  private _stateActions: VE_StateAction[] = [];\r\n  private _assocaitedStates: VE_AssociatedState[] = [];\r\n\r\n  public get IsSequence(): boolean {\r\n    return this._isSequence;\r\n  }\r\n  private _isSequence: boolean = false;\r\n\r\n  public sequenceActions: Nullable<VE_SequenceActions> = null;\r\n\r\n  // \r\n  // 1.\r\n\r\n  constructor(fsm: VE_Fsm, index: number) {\r\n    this._fsm = fsm;\r\n    this._index = index;\r\n  }\r\n\r\n  public setInitialValue(value: any): void {\r\n    this._value = value;\r\n    this._assignmentType = AssignmentType.Const;\r\n  }\r\n\r\n  public setSequence(): void {\r\n    this._isSequence = true;\r\n  }\r\n\r\n  public setLogicalExpression(logical_exp: IExpression): void {\r\n    this._logicalExpression = logical_exp;\r\n  }\r\n\r\n  public setTemplateInfo(template: VE_Template, var_id: string, assign_str: string): void {\r\n    this._isTemplateVar = true;\r\n    this._template = template;\r\n    this._varID = var_id;\r\n    this._assignmentStr = assign_str;\r\n  }\r\n\r\n  public setConstValue(value: any): void {\r\n    this._value = value;\r\n    this._assignmentType = AssignmentType.Const;\r\n  }\r\n\r\n  public setStateVariable(very_var: IVeryVar): void {\r\n    this._stateVariable = very_var;\r\n    this._assignmentType = AssignmentType.Variable;\r\n  }\r\n\r\n  public addAction(state_action: VE_StateAction): void {\r\n    this._stateActions.push(state_action);\r\n    if (state_action.type === StateActionType.Action && state_action.action!.isSequence) {\r\n      this._isSequence = true;\r\n    }\r\n  }\r\n\r\n  public addAssignment(assignment: VE_Assignment): void {\r\n    let stateAction: VE_StateAction = new VE_StateAction();\r\n    stateAction.setAssignment(assignment);\r\n    this._stateActions.push(stateAction);\r\n  }\r\n\r\n  public addAssociatedState(associated_state: VE_AssociatedState): void {\r\n    this._assocaitedStates.push(associated_state);\r\n  }\r\n\r\n  // TODO\r\n  public action(trigger_id: string): void {\r\n    if (this._fsm.receiveEvent(trigger_id)) {\r\n\r\n    }\r\n  }\r\n}\r\n","\r\nimport { VE_ActionBehaviour } from \"../action/actionBehaviour\";\r\nimport { StateActionType } from \"../enum\";\r\nimport { VE_Assignment } from \"../action\";\r\n\r\nexport class VE_StateAction {\r\n\r\n  public get type(): StateActionType {\r\n    return this._type;\r\n  }\r\n  private _type: StateActionType = StateActionType.Action;\r\n\r\n  public get action(): Nullable<VE_ActionBehaviour> {\r\n    return this._action;\r\n  }\r\n  private _action: Nullable<VE_ActionBehaviour> = null;\r\n\r\n  public get enabled(): boolean {\r\n    return this._enabled;\r\n  }\r\n  private _enabled: boolean = false;\r\n\r\n  public get everyFrame(): boolean {\r\n    return this._everyFrame;\r\n  }\r\n  private _everyFrame: boolean = false;\r\n\r\n  public get assignment(): Nullable<VE_Assignment> {\r\n    return this._assignment;\r\n  }\r\n  private _assignment: Nullable<VE_Assignment> = null;\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public setAction(action: VE_ActionBehaviour, enabled: boolean = false, every_frame: boolean = false, sequence: boolean = false): void {\r\n    this._action = action;\r\n    this._enabled = enabled;\r\n    this._everyFrame = every_frame;\r\n    this._action.isSequence = sequence;\r\n  }\r\n\r\n  public setAssignment(assignment: VE_Assignment): void {\r\n    this._assignment = assignment;\r\n  }\r\n\r\n\r\n}","export class StateConst {\r\n\r\n  public static readonly STATE_SEPARATOR: string = '.';\r\n  public static readonly ASSOCIATED_STATE_PREFIX: string = 'Associated_State:';\r\n  public static readonly VARIABLE_SYMBOL: string = '*';\r\n  public static readonly STATE_INDEX: number = -1;\r\n  public static LogCount: number = -1;\r\n\r\n  public static AssignmentPrefix: string = \"AssignmentFormula_\";\r\n  public static AssignmentFormulaCount: number = 0;\r\n\r\n}","export * from './template';\r\nexport * from './templates';","import { VeryEngineObject } from \"../object\";\r\nimport { VE_DataSource, VE_VariableData } from \"../dataSource\";\r\n\r\nexport class VE_Template {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  public get templateID(): string {\r\n    return this._templateID;\r\n  }\r\n  private _templateID: string = '';\r\n\r\n  public get templateVarID(): string {\r\n    return this._templateVarID;\r\n  }\r\n  private _templateVarID: string = '';\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = '';\r\n\r\n  public templateInstance: VeryEngineObject | null = null;\r\n\r\n  public dataSource: VE_DataSource;\r\n\r\n  public varData: VE_VariableData;\r\n\r\n  public instanceCount(): number {\r\n    return this._instanceCount;\r\n  }\r\n  private _instanceCount: number = 0;\r\n\r\n\r\n  constructor(project_name: string, template_id: string) {\r\n    this._projectName = project_name;\r\n    this._templateID = template_id;\r\n    this.dataSource = new VE_DataSource(project_name, template_id, true);\r\n    this.varData = new VE_VariableData(project_name);\r\n  }\r\n\r\n  public setInstance(instance_obj: VeryEngineObject): void {\r\n    this.templateInstance = instance_obj;\r\n  }\r\n\r\n  public isCreatedVariable(var_id: string): boolean {\r\n    return this.varData.isCreatedVariable(var_id);\r\n  }\r\n\r\n  public addVariable(var_id: string, var_paras: string[], pos: string): void {\r\n    this.varData.addVariable(var_id, var_paras, pos);\r\n  }\r\n\r\n  public unload(): void {\r\n    //TODO: \r\n  }\r\n\r\n  public clone(object_id: string, template_var_id: string): VE_Template {\r\n    let cloneTemplate: VE_Template = new VE_Template(this._projectName, this._templateID);\r\n    cloneTemplate._objectID = object_id;\r\n    cloneTemplate._templateVarID = template_var_id;\r\n    cloneTemplate.dataSource = this.dataSource;\r\n    cloneTemplate.varData = this.varData;\r\n    cloneTemplate._instanceCount = this._instanceCount;\r\n    return cloneTemplate;\r\n  }\r\n\r\n  public clear(): void {\r\n    if (this.dataSource) {\r\n      this.dataSource.clear();\r\n    }\r\n    if (this.varData) {\r\n      this.varData.clear();\r\n    }\r\n    if (this.templateInstance) {\r\n      this.templateInstance.clear();\r\n    }\r\n  }\r\n\r\n}","import { VE_Template } from \"./template\";\r\nimport { ErrorInfo } from \"../utility\";\r\n\r\nexport class VE_Templates {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  private _templateDic: { [key: string]: VE_Template } = {};\r\n\r\n  private _instanceDic: { [key: string]: { [key: string]: VE_Template } } = {};\r\n\r\n\r\n  constructor(project_name: string) {\r\n    this._projectName = project_name;\r\n  }\r\n\r\n  public isCreatedTemplate(template_id: string): boolean {\r\n    if(this._templateDic[template_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTemplate(template_id: string, template: VE_Template): void {\r\n    this._templateDic[template_id] = template;\r\n  }\r\n\r\n  public getTemplate(template_id: string): VE_Template {\r\n    return this._templateDic[template_id];\r\n  }\r\n\r\n  public isCreatedInstance(object_id: string, var_id: string): boolean {\r\n    if(this._instanceDic[object_id] && this._instanceDic[object_id][var_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getInstance(object_id: string, var_id: string): VE_Template {\r\n    return this._instanceDic[object_id][var_id];\r\n  }\r\n\r\n  // public getState(var_id: string, state_id: string, index: number): VE_State {\r\n    \r\n  // } \r\n\r\n  public clear(): void {\r\n    if(this._templateDic) {\r\n      Object.keys(this._templateDic).forEach(key => {\r\n        this._templateDic[key].clear();\r\n      })\r\n      this._templateDic = {};\r\n    }\r\n  }\r\n\r\n  // TODO\r\n  public createInstance (object_id: string, var_id: string, template: VE_Template, object_name: string, error_info: ErrorInfo, destory_on_create_new: boolean): VE_Template\r\n  {\r\n\r\n    return new VE_Template(this._projectName, var_id);\r\n  }\r\n\r\n}","export * from './triggerBehaviour';\r\nexport * from './triggers';","import { VE_State } from \"../state/state\";\r\nimport { StateConst } from \"../state/stateConst\";\r\nimport { IExpression } from \"../expression\";\r\n\r\nexport abstract class VE_TriggerBehaviour {\r\n\r\n  public abstract get ID(): string;\r\n\r\n  protected scene!: BABYLON.Scene;\r\n\r\n  public get enabled(): boolean {\r\n    return this._enabled;\r\n  }\r\n  public set enabled(val: boolean) {\r\n    this._enabled = val;\r\n  }\r\n  private _enabled: boolean = true;\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  public get isEnabled(): boolean {\r\n    if (this._logicalSwitch) {\r\n      for (let i: number = 0; i < this._logicalSwitch.length; i++) {\r\n        if (!this._logicalSwitch[i].evaluate()) {\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // Logical\r\n  private _logicalSwitch: IExpression[] = [];\r\n  private _logicalExp: IExpression[] = [];\r\n  // State\r\n  private _triggerTargets: VE_State[] = [];\r\n\r\n  // protected GameObject ObjectInstance = null;\r\n  // protected VeryEngineObject VeryObject = null;\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = 'object-axxx';\r\n\r\n  public get triggerID(): string {\r\n    return this._triggerID;\r\n  }\r\n  private _triggerID: string = '';\r\n\r\n  private _id: string = '';\r\n\r\n  public call(): void {\r\n    console.log(this._objectID);\r\n  }\r\n\r\n\r\n  public set(scene: BABYLON.Scene): void {\r\n    this.scene = scene;\r\n  }\r\n\r\n  public setTriggerID(trigger_id: string, object_id: string): void {\r\n    this._triggerID = trigger_id;\r\n    this._objectID = object_id;\r\n    this._id = object_id + StateConst.STATE_SEPARATOR + trigger_id;\r\n  }\r\n\r\n  public addLogicalSwitch(exp: IExpression): void {\r\n    this._logicalSwitch.push(exp);\r\n  }\r\n\r\n  public addTriggerTarget(exp: IExpression, state: VE_State): void {\r\n    this._logicalExp.push(exp);\r\n    this._triggerTargets.push(state);\r\n  }\r\n\r\n  public sendEvent(): void {\r\n    if(this.isEnabled) {\r\n      this.eventProcess();\r\n    }\r\n  }\r\n\r\n  // \r\n  private eventProcess(): void {\r\n    if (this._triggerTargets) {\r\n      for (let i: number = 0; i < this._triggerTargets.length; i++) {\r\n        if (this._logicalExp[i].evaluate()) {\r\n          this._triggerTargets[i].action(this._id);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    return true;\r\n  }\r\n\r\n  public update(): void {\r\n    if(this.isEnabled) {\r\n      this.onUpdate();\r\n    }\r\n  }\r\n\r\n  public onUpdate(): void {\r\n\r\n  }\r\n\r\n  public abstract destroy(): void;\r\n\r\n\r\n}","import { VE_TriggerBehaviour } from \"./triggerBehaviour\";\r\nimport { ShowError } from \"../html\";\r\nimport { VeryEngineObject, VE_Objects } from \"../object\";\r\nimport { StateConst } from \"../state\";\r\nimport { VE_Manager } from \"../manager\";\r\n\r\nexport class VE_Triggers {\r\n\r\n  private static _triggerDics: { [key: string]: VE_TriggerBehaviour } = {};\r\n\r\n  public static addTrigger(trigger: VE_TriggerBehaviour): void {\r\n    let ids: string[] = trigger.ID.split('|');\r\n    for (let i: number = 0; i < ids.length; i++) {\r\n      let id: string = ids[i].trim().toLowerCase();\r\n      if (this._triggerDics[id]) {\r\n        ShowError.showError(`IDID${id}ID`);\r\n      } else {\r\n        this._triggerDics[id] = trigger;\r\n      }\r\n    }\r\n  }\r\n\r\n  public static hasTrigger(trigger_id: string): boolean {\r\n    trigger_id = trigger_id.toLowerCase();\r\n    if (this._triggerDics[trigger_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static createTrigger(trigger_id: string): VE_TriggerBehaviour {\r\n    trigger_id = trigger_id.toLowerCase();\r\n    // console.log(this._triggerDics[trigger_id]);\r\n    return Object.create(this._triggerDics[trigger_id]);\r\n  }\r\n\r\n  public static remove(trigger_id: string): void {\r\n    trigger_id = trigger_id.toLowerCase();\r\n    delete this._triggerDics[trigger_id];\r\n  }\r\n\r\n  public static findTrigger(very_object: VeryEngineObject, trigger_id: string): Nullable<VE_TriggerBehaviour> {\r\n    if (very_object.isCreatedTrigger(trigger_id)) {\r\n      return very_object.getTrigger(trigger_id);\r\n    } else {\r\n      let triggerArray: string[] = trigger_id.split(StateConst.STATE_SEPARATOR);\r\n      if (triggerArray.length === 2) {\r\n        let objects: VE_Objects = VE_Manager.objects(very_object.projectName);\r\n        let objectID: string = triggerArray[0].trim();\r\n        let triggerID: string = triggerArray[1].trim();\r\n        if (objects.isCreated(objectID)) {\r\n          let otherObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n          if (otherObject.isCreatedTrigger(triggerID)) {\r\n            return otherObject.getTrigger(triggerID);\r\n          } else {\r\n            return null;\r\n          }\r\n        } else {\r\n          return null;\r\n        }\r\n      } else {\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n}","export class ArrayUtility {\r\n  public static remove<T>(arr: Array<T>, ele: T): void {\r\n    let index = arr.indexOf(ele);\r\n    if (index > -1) {\r\n      arr.splice(index, 1);\r\n    }\r\n  }\r\n\r\n  public static clear<T>(arr: Array<T>): void {\r\n    arr = [];\r\n  }\r\n\r\n}\r\n\r\n","/** */\r\nexport class Dictionary<KT, VT> {\r\n  private _keys: KT[] = [];\r\n  private _values: VT[] = [];\r\n  public get count(): number {\r\n    return this.Count();\r\n  }\r\n\r\n  public constructor() {\r\n  }\r\n\r\n  /**, */\r\n  public Add(key: any, value: any): number {\r\n    this._keys.push(key);\r\n    return this._values.push(value);\r\n  }\r\n\r\n  public Remove(key: any) {\r\n    var index = this._keys.indexOf(key, 0);\r\n    this._keys.splice(index, 1);\r\n    this._values.splice(index, 1);\r\n  }\r\n\r\n  private Count(): number {\r\n    return this._keys.length;\r\n  }\r\n\r\n  /**SetValue() */\r\n  public SetValue(key: any, value: any): boolean {\r\n    var index = this._keys.indexOf(key, 0);\r\n    if (index != -1) {\r\n      this._keys[index] = key;\r\n      this._values[index] = value;\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n  public GetValue(key: KT): VT | null {\r\n    var index = this._keys.indexOf(key, 0);\r\n    if (index != -1) {\r\n      return this._values[index];\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public ContainsKey(key: any): boolean {\r\n    let ks = this._keys;\r\n    for (let i = 0; i < ks.length; ++i) {\r\n      if (ks[i] == key) {\r\n        return true;;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public GetKeys(): KT[] {\r\n    return this._keys;\r\n  }\r\n\r\n  public GetValues(): VT[] {\r\n    return this._values;\r\n  }\r\n}","export class ErrorInfo {\r\n\r\n  public isRight: boolean = true;\r\n  public message: string = '';\r\n\r\n  constructor() {\r\n    \r\n  }\r\n\r\n  public clear(): void {\r\n    this.isRight = true;\r\n    this.message = '';\r\n  }\r\n\r\n}","export * from './arrayUtility';\r\nexport * from './dictionary';\r\nexport * from './errorInfo';\r\nexport * from './stringFormat';","export class VE_StringFormat {\r\n\r\n  private static _illegalChar: { [key: string]: boolean } = {};\r\n  private static _formulaChar: { [key: string]: boolean } = {};\r\n  private static _escapeCharacters: { [key: string]: string } = {};\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public static init() {\r\n    this._escapeCharacters['n'] = '\\n';\r\n    this._escapeCharacters['b'] = '\\b';\r\n    this._escapeCharacters['r'] = '\\r';\r\n    this._escapeCharacters['t'] = '\\t';\r\n    this._escapeCharacters['v'] = '\\v';\r\n    this._escapeCharacters['f'] = '\\f';\r\n    this._escapeCharacters['0'] = '\\0';\r\n\r\n    this._illegalChar['='] = true;\r\n    this._illegalChar[','] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar[':'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['*'] = true;\r\n    this._illegalChar['('] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar[')'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['@'] = true;\r\n    this._illegalChar['#'] = true;\r\n    this._illegalChar['$'] = true;\r\n    this._illegalChar['%'] = true;\r\n    this._illegalChar['&'] = true;\r\n    this._illegalChar['^'] = true;\r\n    this._illegalChar['-'] = true;\r\n    this._illegalChar['+'] = true;\r\n    this._illegalChar['|'] = true;\r\n    this._illegalChar['/'] = true;\r\n    this._illegalChar['['] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar[']'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['{'] = true;\r\n    this._illegalChar['}'] = true;\r\n    this._illegalChar['.'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['<'] = true;\r\n    this._illegalChar['>'] = true;\r\n    this._illegalChar[';'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['?'] = true;\r\n    this._illegalChar['\\\"'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['\\''] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['!'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['`'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['~'] = true;\r\n\r\n    this._formulaChar['('] = true; this._formulaChar[')'] = true; this._formulaChar[''] = true; this._formulaChar[''] = true;\r\n    this._formulaChar['!'] = true; this._formulaChar[''] = true;\r\n    this._formulaChar['^'] = true; this._formulaChar['%'] = true; this._formulaChar['&'] = true; this._formulaChar['-'] = true; this._formulaChar['+'] = true; this._formulaChar['='] = true;\r\n    this._formulaChar['<'] = true; this._formulaChar['>'] = true; this._formulaChar['|'] = true;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param para_str \r\n   */\r\n  public static strEscapeCharacterAction(para_str: string): string {\r\n    let tmpStr: string = \"\";\r\n    for (let i: number = 0; i < para_str.length; i++) {\r\n      if (para_str[i] == '\\\\' && i != para_str.length - 1) {\r\n        tmpStr += this.getEscapeCharacter(para_str[i + 1]);\r\n        i++;\r\n      }\r\n      else {\r\n        tmpStr += para_str[i];\r\n      }\r\n    }\r\n    return tmpStr;\r\n  }\r\n\r\n  /**\r\n   *  \r\n   * @param para_str \r\n   */\r\n  public static strSubsectionAction(para_str: string): string[] {\r\n    let strBuilder: string = '';\r\n    let rStr: string[] = [];\r\n    let bracketFlag: boolean = false;\r\n    let hasQuote: boolean = false;\r\n    for (let i: number = 0; i < para_str.length; i++) {\r\n      if (para_str[i] == '\\\\') {\r\n        if (i < para_str.length - 1) {\r\n          strBuilder += para_str[i + 1];\r\n          i++;\r\n          continue;\r\n        }\r\n        else {\r\n          strBuilder += para_str[i];\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (!hasQuote && (para_str[i] === '\\\"' || para_str[i] === '')) {\r\n        hasQuote = true;\r\n        bracketFlag = true;\r\n        strBuilder += '\\\"';\r\n      }\r\n      else if (hasQuote && (para_str[i] === '\\\"' || para_str[i] === '')) {\r\n        strBuilder += '\\\"';\r\n        bracketFlag = false;\r\n        hasQuote = false;\r\n        if (strBuilder !== '') {\r\n          rStr.push(strBuilder);\r\n        }\r\n        strBuilder = '';\r\n      }\r\n      else if (para_str[i] === ',' || para_str[i] === '') {\r\n        if (!bracketFlag) {\r\n          if (strBuilder !== \"\") {\r\n            rStr.push(strBuilder);\r\n          }\r\n          strBuilder = '';\r\n        }\r\n        else {\r\n          strBuilder += para_str[i];\r\n        }\r\n      }\r\n      else if (para_str[i] === ' ') {\r\n        continue;\r\n      }\r\n      else {\r\n        strBuilder += para_str[i];\r\n      }\r\n    }\r\n    if (strBuilder !== \"\") {\r\n      rStr.push(strBuilder);\r\n    }\r\n    return rStr;\r\n  }\r\n\r\n\r\n  private static getEscapeCharacter(para_char: string): string {\r\n    if (this._escapeCharacters[para_char])\r\n      return this._escapeCharacters[para_char];\r\n    else\r\n      return para_char;\r\n  }\r\n\r\n  private static getEscapeCharacter2(para_char: string, is_escape: boolean[]): string {\r\n    if (this._escapeCharacters[para_char]) {\r\n      is_escape[0] = true;\r\n      return this._escapeCharacters[para_char];\r\n    }\r\n    else {\r\n      is_escape[0] = false;\r\n      return para_char;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \"XXX\"\"XXX\"XXX\r\n   * @param para_str \r\n   */\r\n  public static strSubsection(para_str: string): string[] {\r\n    let strBuilder: string = '';\r\n    let rStr: string[] = [];\r\n    let bracketFlag: boolean = false;\r\n    let needSpace: boolean = false;\r\n    for (let i: number = 0; i < para_str.length; i++) {\r\n      if (para_str[i] == '\\\\') {\r\n        if (i < para_str.length - 1) {\r\n          strBuilder += this.getEscapeCharacter(para_str[i + 1]);\r\n          i++;\r\n          continue;\r\n        }\r\n        else {\r\n          strBuilder += para_str[i];\r\n          break;\r\n        }\r\n      }\r\n      if (para_str[i] === '(' || para_str[i] === '' || para_str[i] === '\\\"' || para_str[i] === '') {\r\n        bracketFlag = true;\r\n        needSpace = false;\r\n      }\r\n      else if (para_str[i] === ')' || para_str[i] === '' || para_str[i] === '\\\"' || para_str[i] === '') {\r\n        bracketFlag = false;\r\n        if (strBuilder !== \"\") {\r\n          rStr.push(strBuilder);\r\n        }\r\n        strBuilder = '';\r\n        needSpace = false;\r\n      }\r\n      else if (para_str[i] === ',' || para_str[i] === '') {\r\n        if (!bracketFlag) {\r\n          if (strBuilder !== \"\") {\r\n            rStr.push(strBuilder);\r\n          }\r\n          strBuilder = '';\r\n        }\r\n        else {\r\n          strBuilder += para_str[i];\r\n        }\r\n        needSpace = false;\r\n      }\r\n      else if (para_str[i] === ' ' && !needSpace) {\r\n        continue;\r\n      }\r\n      else {\r\n        strBuilder += para_str[i];\r\n        needSpace = true;\r\n      }\r\n    }\r\n    if (strBuilder !== \"\") {\r\n      rStr.push(strBuilder);\r\n    }\r\n    return rStr;\r\n  }\r\n\r\n  /**\r\n   * $\r\n   * @param project_name \r\n   * @param para_array \r\n   */\r\n  public static getParaArrayAll(project_name: string, para_array: string[]): string[] {\r\n    let coloneStr: string[] = para_array.slice();\r\n    for (let i: number = 0; i < coloneStr.length; i++) {\r\n      if (coloneStr[i].startsWith(\"$\")) {\r\n        //\r\n        if (coloneStr[i].indexOf(\",\") > -1 || coloneStr[i].indexOf(\"\")) {\r\n          let paraArray: string[] = coloneStr[i].split(/,|/);\r\n          paraArray = this.getParaArrayAll(project_name, paraArray);\r\n          let newPara: string = '';\r\n          for (let j: number = 0; j < paraArray.length; j++) {\r\n            if (j === paraArray.length - 1) {\r\n              newPara += paraArray[j];\r\n            }\r\n            else {\r\n              newPara += paraArray[j];\r\n              newPara += \",\";\r\n            }\r\n          }\r\n          coloneStr[i] = newPara;\r\n        }\r\n        else {\r\n          // TODO\r\n          console.log(\"\" + coloneStr[i] + \"\");\r\n        }\r\n      }\r\n      else if (coloneStr[i].startsWith(\"%\")) {\r\n        //\r\n        if (coloneStr[i].indexOf(\",\") > -1 || coloneStr[i].indexOf(\"\") > -1) {\r\n          let paraArray: string[] = coloneStr[i].split(/,|/);\r\n          paraArray = this.getParaArrayAll(project_name, paraArray);\r\n          let newPara: string = '';\r\n          for (let j: number = 0; j < paraArray.length; j++) {\r\n            if (j == paraArray.length - 1) {\r\n              newPara += paraArray[j];\r\n            }\r\n            else {\r\n              newPara += paraArray[j];\r\n              newPara += \",\";\r\n            }\r\n          }\r\n          coloneStr[i] = newPara;\r\n        }\r\n        else {\r\n          // TODO\r\n          console.log(\"\" + coloneStr[i] + \"BlurVar\");\r\n        }\r\n      }\r\n      //\r\n      else if (coloneStr[i].indexOf(\",\") > -1 || coloneStr[i].indexOf(\"\") > -1) {\r\n        let paraArray: string[] = coloneStr[i].split(/,|/);\r\n        paraArray = this.getParaArrayAll(project_name, paraArray);\r\n        let newPara: string = '';\r\n        for (let j: number = 0; j < paraArray.length; j++) {\r\n          if (j == paraArray.length - 1) {\r\n            newPara += paraArray[j];\r\n          }\r\n          else {\r\n            newPara += paraArray[j];\r\n            newPara += \",\";\r\n          }\r\n        }\r\n        coloneStr[i] = newPara;\r\n      }\r\n    }\r\n    return coloneStr;\r\n  }\r\n\r\n  /**\r\n   * \r\n     1\r\n     2\r\n        1\r\n        2 +\r\n        3+ \r\n        412123\r\n    \r\n   * @param para_str \r\n   */\r\n  public static paraSegment(para_str: string): string[] {\r\n    let strBuilder = '';\r\n    let rStr: string[] = [];\r\n    let bracketFlag: boolean = false;\r\n    let innerBracket: number = 0;\r\n    let saveBracket: boolean = false;\r\n\r\n    let quotationMark: boolean = false;\r\n\r\n    for (let i: number = 0; i < para_str.length; i++) {\r\n      //\r\n      if (para_str[i] == '\\\\') {\r\n        if (i < para_str.length - 1) {\r\n          let isEscape: boolean[] = [true];\r\n          let c: string = this.getEscapeCharacter2(para_str[i + 1], isEscape);\r\n          if (isEscape[0]) {\r\n            i++;\r\n            strBuilder += c;\r\n          }\r\n          else {\r\n            i++;\r\n            strBuilder += para_str[i];\r\n          }\r\n          continue;\r\n        }\r\n        else {\r\n          strBuilder += para_str[i];\r\n          break;\r\n        }\r\n      }\r\n      if (para_str[i] === '(' || para_str[i] === '') {\r\n        if (quotationMark) {\r\n          strBuilder += para_str[i];\r\n        }\r\n        else {\r\n          if (bracketFlag) {\r\n            innerBracket++;\r\n            strBuilder += para_str[i];\r\n          }\r\n          else if (strBuilder.trim() !== \"\") {\r\n            strBuilder += para_str[i];\r\n            saveBracket = true;\r\n          }\r\n          else if (i < para_str.length - 1) {\r\n            if (this.needSaveBracket(para_str.substring(i + 1))) {\r\n              strBuilder += para_str[i];\r\n              saveBracket = true;\r\n            }\r\n          }\r\n          bracketFlag = true;\r\n        }\r\n      }\r\n      else if (para_str[i] === ')' || para_str[i] === '') {\r\n        if (quotationMark) {\r\n          strBuilder += para_str[i];\r\n        }\r\n        else {\r\n          if (innerBracket > 0) {\r\n            innerBracket--;\r\n            bracketFlag = true;\r\n            strBuilder += para_str[i];\r\n          }\r\n          else if (bracketFlag && saveBracket) {\r\n            strBuilder += para_str[i];\r\n            saveBracket = false;\r\n            bracketFlag = false;\r\n          }\r\n          else {\r\n            bracketFlag = false;\r\n          }\r\n        }\r\n      }\r\n      else if (para_str[i] === '\"') {\r\n        strBuilder += para_str[i];\r\n        quotationMark = !quotationMark;\r\n      }\r\n      else if (para_str[i] === ',' || para_str[i] === '') {\r\n        if (quotationMark) {\r\n          strBuilder += para_str[i];\r\n        }\r\n        else {\r\n          if (!bracketFlag) {\r\n            if (strBuilder !== \"\") {\r\n              rStr.push(strBuilder.trim());\r\n            }\r\n            strBuilder = '';\r\n          }\r\n          else {\r\n            strBuilder += para_str[i];\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        strBuilder += para_str[i];\r\n      }\r\n    }\r\n    if (strBuilder !== \"\") {\r\n      rStr.push(strBuilder.trim());\r\n    }\r\n    return rStr;\r\n  }\r\n\r\n\r\n  private static needSaveBracket(str: string): boolean {\r\n    let hasBracket: boolean = false;\r\n    let innerBracket: number = 0;\r\n    for (let i: number = 0; i < str.length; i++) {\r\n      if (hasBracket) {\r\n        if (str[i] === ' ') {\r\n          continue;\r\n        }\r\n        else if (str[i] === ',' || str[i] === '') {\r\n          return false;\r\n        }\r\n        else {\r\n          return true;\r\n        }\r\n      }\r\n      else {\r\n        if (str[i] === '(' || str[i] === '') {\r\n          innerBracket++;\r\n        }\r\n        else if (str[i] === ')' || str[i] === '') {\r\n          if (innerBracket > 0) {\r\n            innerBracket--;\r\n          }\r\n          else {\r\n            hasBracket = true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n\r\n  public static isIDLegal(id: string): boolean {\r\n    for (let i: number = 0; i < id.length; i++) {\r\n      if (this._illegalChar[id[i]]) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n\r\n  public static isFormulaString(var_str: string): boolean {\r\n    for (let i: number = 0; i < var_str.length; i++)\r\n    {\r\n      if (this._formulaChar[var_str[i]]) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n\r\n}\r\n\r\nVE_StringFormat.init();\r\n\r\n// console.log(VE_StringFormat.paraSegment(\", Main Camera, *\"));\r\n// console.log(VE_StringFormat.paraSegment(\", *, *, 1, *\"));\r\n\r\n// console.log(VE_StringFormat.paraSegment(\", *, Pin, Example/SpinAPin/Pin , null, (0, -6, 0), (0,0,90),false\"));","import { ErrorInfo } from \"./errorInfo\";\r\n\r\nexport class VE_TypeConvert {\r\n\r\n\r\n  public static boolConvert(info: string, errorInfo: ErrorInfo): boolean {\r\n    info = info.toLowerCase().trim();\r\n    if(info === 'true' || info === '') {\r\n      return true;\r\n    } else if(info === 'false' || info === '') {\r\n      return false;\r\n    } else {\r\n      errorInfo.isRight = false;\r\n      errorInfo.message = 'bool|' + info;\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static intConvert(info: string, errorInfo: ErrorInfo): number {\r\n    info = info.toLowerCase().trim();\r\n    let num: number = parseFloat(info);\r\n    if(isNaN(num)) {\r\n      errorInfo.isRight = false;\r\n      errorInfo.message = 'number|' + info;\r\n      return - 1;\r\n    } else {\r\n      return Math.round(num);\r\n    }\r\n  }\r\n\r\n  public static floatConvert(info: string, errorInfo: ErrorInfo): number {\r\n    info = info.toLowerCase().trim();\r\n    let num: number = parseFloat(info);\r\n    if(isNaN(num)) {\r\n      errorInfo.isRight = false;\r\n      errorInfo.message = 'number|' + info;\r\n      return - 1;\r\n    } else {\r\n      return num;\r\n    }\r\n  }\r\n\r\n\r\n}","\r\n// import { VeryEngine } from \"../veryEngine\";\r\n\r\nexport class GameObject {\r\n\r\n  public get gameObject(): GameObject {\r\n    return this;\r\n  }\r\n\r\n  public get transform(): Transform {\r\n    return this._transform;\r\n  }\r\n  private _transform: Transform = new Transform();\r\n\r\n  public name: string;\r\n\r\n  private mesh: BABYLON.Nullable<BABYLON.Mesh> = null;\r\n\r\n  constructor(name: string) {\r\n    this.name = name;\r\n    // VeryEngine.Scene.getMeshByName()\r\n  }\r\n\r\n  // TODO\r\n  public static find(name: string): Nullable<GameObject> {\r\n    return new GameObject(name);\r\n  }\r\n\r\n}\r\n\r\n\r\nexport class Transform {\r\n\r\n\r\n  private _transformNode: BABYLON.Nullable<BABYLON.TransformNode> = null;\r\n  private _mesh: BABYLON.Nullable<BABYLON.Mesh> = null;\r\n\r\n  public localPosition: BABYLON.Vector3 = BABYLON.Vector3.Zero();\r\n  public position: BABYLON.Vector3 = BABYLON.Vector3.Zero();\r\n\r\n  public localEulerAngles: BABYLON.Vector3 = BABYLON.Vector3.Zero();\r\n  public eulerAngles: BABYLON.Vector3 = BABYLON.Vector3.Zero();\r\n\r\n  public get childCount(): number {\r\n    return 0;\r\n  }\r\n\r\n  public forward: BABYLON.Vector3 = BABYLON.Vector3.Forward();\r\n\r\n\r\n  public get hierarchyCount(): number {\r\n    return 0;\r\n  }\r\n\r\n  public localScale: BABYLON.Vector3 = new BABYLON.Vector3(1, 1, 1);\r\n\r\n\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n}","export * from \"./IVeryVar\";\r\nexport * from \"./veryVarManager\";\r\nexport * from \"./veryVariables\";\r\nexport * from './babylonVariables';\r\nexport * from './variables';","import { VE_VariableData } from \"../dataSource\";\r\nimport { IVeryVar } from \"./IVeryVar\";\r\nimport { VE_Template } from \"../template\";\r\nimport { IExpression } from \"../expression\";\r\n\r\nexport class VE_Variables {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  public varData: VE_VariableData;\r\n\r\n  private _veryVars: { [key: string]: IVeryVar } = {};\r\n  private _tempalteVars: { [key: string]: VE_Template } = {};\r\n  private _expressions: { [key: string]: IExpression } = {};\r\n\r\n  constructor(project_name: string) {\r\n    this._projectName = project_name;\r\n    this.varData = new VE_VariableData(project_name);\r\n  }\r\n\r\n  public isCreated(id: string): boolean {\r\n    if(this._veryVars[id] || this._tempalteVars[id] || this._expressions[id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isCreatedVariable(id: string): boolean {\r\n    if(this._veryVars[id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addVariable(id: string, very_var: IVeryVar): void {\r\n    this._veryVars[id] = very_var;\r\n  }\r\n\r\n  public getVariable(id: string): IVeryVar {\r\n    return this._veryVars[id];\r\n  }\r\n\r\n  public isCreatedTemplate(id: string): boolean {\r\n    if(this._tempalteVars[id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTemplate(id: string, template: VE_Template): void {\r\n    this._tempalteVars[id] = template;\r\n  }\r\n\r\n  public getTemplate(id: string): VE_Template {\r\n    return this._tempalteVars[id];\r\n  }\r\n\r\n  public isCreatedExpression(id: string): boolean {\r\n    if(this._expressions[id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addExpression(id: string, exp: IExpression): void {\r\n    this._expressions[id] = exp;\r\n  }\r\n\r\n  public getExpression(id: string): IExpression {\r\n    return this._expressions[id];\r\n  }\r\n\r\n\r\n  public clear(): void {\r\n    if(this.varData) {\r\n      this.varData.clear();\r\n    }\r\n    this._veryVars = {};\r\n    this._expressions = {};\r\n    this._tempalteVars = {};\r\n  }\r\n\r\n\r\n\r\n}","import { ShowError } from \"../html/showError\";\r\nimport { IVeryVar } from \"./IVeryVar\";\r\nimport { ErrorInfo } from \"../utility\";\r\nimport { VE_Variables } from \"./variables\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { VeryExpression } from \"./veryVariables\";\r\nimport { VE_Objects, VeryEngineObject } from \"../object\";\r\nimport { VE_Template } from \"../template\";\r\n\r\nexport class VeryVarManager {\r\n\r\n  private static _veryVarTypes: { [key: string]: IVeryVar } = {};\r\n\r\n  public static hasVarType(var_type: string): boolean {\r\n    var_type = var_type.toLowerCase();\r\n    if (this._veryVarTypes[var_type]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static addVarType(var_type: string, var_prototype: IVeryVar): void {\r\n    var_type = var_type.toLowerCase().trim();\r\n    // \r\n    if (this._veryVarTypes[var_type]) {\r\n      ShowError.showError('VeryVar' + var_type + '' + var_prototype.className);\r\n    } else {\r\n      // console.log(var_proto.VarType);\r\n      this._veryVarTypes[var_type] = var_prototype;\r\n      // let a = Object.create(this.GetVarType(var_type));\r\n      // console.log(a.Value);\r\n      // a.Value = true;\r\n      // console.log(a.Value);\r\n      // a.Value = 1234;\r\n      // console.log(a.getValue());\r\n      // console.log(this.GetVarType(var_type).__proto__);\r\n    }\r\n  }\r\n\r\n  // TODO\r\n  public static createVar(var_type: string): IVeryVar {\r\n    var_type = var_type.toLowerCase();\r\n    return Object.create(this.getVarType(var_type));\r\n  }\r\n\r\n  public static createVariable(var_id: string, var_type: string, value: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    var_type = var_type.toLowerCase();\r\n    let variable: any;\r\n    try {\r\n      variable = Object.create(this.getVarType(var_type));\r\n      if (!variable) {\r\n        error_info.isRight = false;\r\n        error_info.message = '' + var_type;\r\n        return null;\r\n      }\r\n      let result: any = (<IVeryVar>variable).initValue(value, error_info);\r\n      if (error_info.isRight) {\r\n        (<IVeryVar>variable).setValue(result);\r\n        return <IVeryVar>variable;\r\n      } else {\r\n        return null;\r\n      }\r\n    } catch (error) {\r\n      console.log(error.message);\r\n      error_info.isRight = false;\r\n      error_info.message = '' + var_type + '' + error.message;\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static getVarType(var_type: string): any {\r\n    var_type = var_type.toLowerCase();\r\n    if (this._veryVarTypes && this._veryVarTypes[var_type]) {\r\n      return this._veryVarTypes[var_type];\r\n    }\r\n    return null;\r\n  }\r\n\r\n\r\n  public static remove(var_type: string): void {\r\n    var_type = var_type.toLowerCase();\r\n    delete this._veryVarTypes[var_type];\r\n  }\r\n\r\n  // *\r\n  // .*\r\n  public static getVariable(var_id: string, project_name: string, object_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (project_name === '') {\r\n      return this.getSceneVariable(var_id, error_info);\r\n    } else if (object_id === '') {\r\n      return this.getGlobalVariable(var_id, project_name, error_info);\r\n    } else {\r\n      let objects: VE_Objects = VE_Manager.objects(project_name);\r\n      if (objects) {\r\n        let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n        if (veryObject) {\r\n          if (veryObject.isCreatedVariable(var_id)) {\r\n            return veryObject.getVariable(var_id);\r\n          } else if (veryObject.isCreatedExpression(var_id)) {\r\n            return new VeryExpression(veryObject.getExpression(var_id));\r\n          } else if (veryObject.isCreatedFsm(var_id)) {\r\n            return veryObject.getFsm(var_id).fsmVar;\r\n          } else {\r\n            return this.getGlobalVariable(var_id, project_name, error_info);\r\n          }\r\n        } else {\r\n          return this.getGlobalVariable(var_id, project_name, error_info);\r\n        }\r\n      } else {\r\n        return this.getGlobalVariable(var_id, project_name, error_info);\r\n      }\r\n    }\r\n  }\r\n\r\n  // *.*\r\n  // .*.*\r\n  public static getTemplateVariable(template_var_id: string, var_id: string, project_name: string, object_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (project_name === '') {\r\n      // \r\n      error_info.isRight = false;\r\n      error_info.message = \"\" + template_var_id + \"\\n\";\r\n      return null;\r\n    }\r\n    else {\r\n      if (object_id !== '')  //\r\n      {\r\n        let objects: VE_Objects = VE_Manager.objects(project_name);\r\n        if (!objects) {\r\n          error_info.isRight = false;\r\n          error_info.message += \"\" + object_id + \"\\n\";\r\n          return null;\r\n        }\r\n        else {\r\n          if (objects.isCreated(object_id)) {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n            if (veryObject.isCreatedTemplate(template_var_id)) {\r\n              let template: VE_Template = veryObject.getTemplate(template_var_id);\r\n              if (template.templateInstance === null) {\r\n                error_info.isRight = false;\r\n                error_info.message += \"\" + template_var_id + \"\\n\";\r\n                return null;\r\n              }\r\n              else {\r\n                if (template.templateInstance.isCreatedVariable(var_id)) {\r\n                  return template.templateInstance.getVariable(var_id);\r\n                }\r\n                else if (template.templateInstance.isCreatedExpression(var_id)) {\r\n                  return new VeryExpression(template.templateInstance.getExpression(var_id));\r\n                }\r\n                else if (template.templateInstance.isCreatedFsm(var_id)) {\r\n                  return template.templateInstance.getFsm(var_id).fsmVar;\r\n                }\r\n                else {\r\n                  error_info.isRight = false;\r\n                  error_info.message += \"\" + template_var_id + \"\" + var_id + \"\\n\";\r\n                  return null;\r\n                }\r\n              }\r\n            }\r\n            else {\r\n              error_info.isRight = false;\r\n              error_info.message += \"\" + template_var_id + \"\\n\";\r\n              return null;\r\n            }\r\n          }\r\n          else {\r\n            error_info.isRight = false;\r\n            error_info.message += \"\" + object_id + \"\\n\";\r\n            return null;\r\n          }\r\n        }\r\n      }\r\n      // \r\n      else {\r\n        let variables: VE_Variables = VE_Manager.variables(project_name);\r\n        if (!variables) {\r\n          error_info.isRight = false;\r\n          error_info.message += \"\" + template_var_id + \"\\n\";\r\n          return null;\r\n        }\r\n        else {\r\n          if (variables.isCreatedTemplate(template_var_id)) {\r\n            let template: VE_Template = variables.getTemplate(template_var_id);\r\n            if (template.templateInstance === null) {\r\n              error_info.isRight = false;\r\n              error_info.message += \"\" + template_var_id + \"\\n\";\r\n              return null;\r\n            }\r\n            else {\r\n              if (template.templateInstance.isCreatedVariable(var_id)) {\r\n                return template.templateInstance.getVariable(var_id);\r\n              }\r\n              else if (template.templateInstance.isCreatedExpression(var_id)) {\r\n                return new VeryExpression(template.templateInstance.getExpression(var_id));\r\n              }\r\n              else if (template.templateInstance.isCreatedFsm(var_id)) {\r\n                return template.templateInstance.getFsm(var_id).fsmVar;\r\n              }\r\n              else {\r\n                error_info.isRight = false;\r\n                error_info.message += \"\" + template_var_id + \"\" + var_id + \"\\n\";\r\n                return null;\r\n              }\r\n            }\r\n          }\r\n          else {\r\n            error_info.isRight = false;\r\n            error_info.message += \"\" + template_var_id + \"\\n\";\r\n            return null;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public static getGlobalVariable(var_id: string, project_name: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (project_name === '') {\r\n      return this.getSceneVariable(var_id, error_info);\r\n    } else {\r\n      let variables: VE_Variables = VE_Manager.variables(project_name);\r\n      if (variables) {\r\n        if (variables.isCreatedVariable(var_id)) {\r\n          return variables.getVariable(var_id);\r\n        } else if (variables.isCreatedExpression(var_id)) {\r\n          return new VeryExpression(variables.getExpression(var_id));\r\n        } else {\r\n          return this.getSceneVariable(var_id, error_info);\r\n        }\r\n      } else {\r\n        return this.getSceneVariable(var_id, error_info);\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public static getSceneVariable(var_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    error_info.isRight = false;\r\n    error_info.message = ''\r\n    return null;\r\n  }\r\n}\r\n","import { IVeryVar } from \"./IVeryVar\";\r\nimport { ErrorInfo } from \"../utility/errorInfo\";\r\nimport { VeryVarManager } from \"./veryVarManager\";\r\nimport { IExpression, ConstantExpression } from \"../expression\";\r\n\r\nexport class VeryBool implements IVeryVar {\r\n  public get varType(): string {\r\n    return \"bool|\";\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"VeryBool\";\r\n  }\r\n\r\n  public get Value(): boolean {\r\n    return this._value;\r\n  }\r\n  public set Value(val: boolean) {\r\n    this._value = val;\r\n  }\r\n  private _value: boolean = false;\r\n\r\n  constructor() {\r\n    this._value = false;\r\n  }\r\n\r\n  public setValue(val: any): void {\r\n    this._value = val;\r\n  }\r\n\r\n  public getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n    value_str = value_str.trim();\r\n    if (value_str.toLowerCase() === \"false\" || value_str === \"\") {\r\n      return false;\r\n    } else if (value_str.toLowerCase() === \"true\" || value_str === \"\") {\r\n      return true;\r\n    } else if (\r\n      value_str === \"\" ||\r\n      value_str.toLowerCase() === \"null\" ||\r\n      value_str.toLowerCase() === \"none\"\r\n    ) {\r\n      return false;\r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message =\r\n        \": \" +\r\n        this.varType +\r\n        \"\" +\r\n        value_str +\r\n        \"\";\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    let varClone: VeryBool = new VeryBool();\r\n    varClone.setValue(this._value);\r\n    return varClone;\r\n  }\r\n}\r\n\r\nexport class VeryInt implements IVeryVar {\r\n  public get varType(): string {\r\n    return \"int|\";\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"VeryInt\";\r\n  }\r\n\r\n  public get Value(): number {\r\n    return Math.round(this._value);\r\n  }\r\n  public set Value(val: number) {\r\n    this._value = Math.round(val);\r\n  }\r\n  private _value: number = 0;\r\n\r\n  constructor() {\r\n    this._value = 0;\r\n  }\r\n\r\n  public getValue(): any {\r\n    return this.Value;\r\n  }\r\n\r\n  public setValue(val: any): void {\r\n    this.Value = val;\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n    // floatparseInt\r\n    let newFloat = parseFloat(value_str);\r\n    if (!isNaN(newFloat)) {\r\n      // float\r\n      return Math.round(newFloat);\r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message =\r\n        \": \" +\r\n        this.varType +\r\n        \"\" +\r\n        value_str +\r\n        \"\";\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    let varClone: VeryInt = new VeryInt();\r\n    varClone.setValue(this._value);\r\n    return varClone;\r\n  }\r\n}\r\n\r\nexport class VeryFloat implements IVeryVar {\r\n  public get varType(): string {\r\n    return \"float|\";\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"VeryFloat\";\r\n  }\r\n\r\n  public get Value(): number {\r\n    return this._value;\r\n  }\r\n  public set Value(val: number) {\r\n    this._value = val;\r\n  }\r\n  private _value: number = 0;\r\n\r\n  constructor() {\r\n    this._value = 0;\r\n  }\r\n\r\n  public setValue(val: number) {\r\n    this._value = val;\r\n  }\r\n\r\n  // \r\n  public getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n    let newVal = parseFloat(value_str);\r\n    if (!isNaN(newVal)) {\r\n      return newVal;\r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message =\r\n        \": \" +\r\n        this.varType +\r\n        \"\" +\r\n        value_str +\r\n        \"\";\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    let varClone: VeryFloat = new VeryFloat();\r\n    varClone.setValue(this._value);\r\n    return varClone;\r\n  }\r\n}\r\n\r\nexport class VeryNumber implements IVeryVar {\r\n  public get varType(): string {\r\n    return \"number|\";\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"VeryNumber\";\r\n  }\r\n\r\n  public get Value(): number {\r\n    return this._value;\r\n  }\r\n  public set Value(val: number) {\r\n    this._value = val;\r\n  }\r\n  private _value: number = 0;\r\n\r\n  constructor() {\r\n    this._value = 0;\r\n  }\r\n\r\n  public setValue(val: number) {\r\n    this._value = val;\r\n  }\r\n\r\n  // \r\n  public getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n    let newVal = parseFloat(value_str);\r\n    if (!isNaN(newVal)) {\r\n      return newVal;\r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message =\r\n        \": \" +\r\n        this.varType +\r\n        \"\" +\r\n        value_str +\r\n        \"\";\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    let varClone: VeryNumber = new VeryNumber();\r\n    varClone.setValue(this._value);\r\n    return varClone;\r\n  }\r\n}\r\n\r\nexport class VeryString implements IVeryVar {\r\n  public get varType(): string {\r\n    return \"string|\";\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"VeryString\";\r\n  }\r\n\r\n  public get Value(): string {\r\n    return this._value;\r\n  }\r\n  public set Value(val: string) {\r\n    this._value = val;\r\n  }\r\n  private _value: string = \"\";\r\n\r\n  constructor() {\r\n    this._value = \"\";\r\n  }\r\n\r\n  public getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  public setValue(val: any): void {\r\n    this._value = val;\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n    let rValue: string;\r\n    if (\r\n      value_str.startsWith(\"'\") ||\r\n      value_str.startsWith('\"') ||\r\n      value_str.startsWith(\"\") ||\r\n      value_str.startsWith(\"\")\r\n    ) {\r\n      rValue = value_str.substring(1, value_str.length - 2);\r\n    } else {\r\n      rValue = value_str;\r\n    }\r\n    return rValue;\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    let varClone: VeryString = new VeryString();\r\n    varClone.setValue(this._value);\r\n    return varClone;\r\n  }\r\n}\r\n\r\nexport class VeryVector3 implements IVeryVar {\r\n  public get varType(): string {\r\n    return \"vector3|\";\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"VeryVector3\";\r\n  }\r\n\r\n  public get Value(): BABYLON.Vector3 {\r\n    //let a: BABYLON.Vector3 = new BABYLON.Vector3 (1,1,1);\r\n    return this._value;\r\n  }\r\n  public set Value(val: BABYLON.Vector3) {\r\n    this._value = val;\r\n  }\r\n  private _value: BABYLON.Vector3 = BABYLON.Vector3.Zero();\r\n\r\n  constructor() {\r\n    this._value = BABYLON.Vector3.Zero();\r\n  }\r\n\r\n  public getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  public setValue(val: any) {\r\n    this._value = val;\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n    let rValue: BABYLON.Vector3 = BABYLON.Vector3.Zero();\r\n    if (value_str === \"none\" || value_str === \"null\" || value_str === \"\") {\r\n      return rValue;\r\n    } else {\r\n      let vec3Str: string[] = value_str.split(/,|/);\r\n      if (vec3Str.length !== 3) {\r\n        error_info.isRight = false;\r\n        error_info.message =\r\n          \": \" +\r\n          this.varType +\r\n          \", : \" +\r\n          value_str +\r\n          \"Vector3|\";\r\n        return null;\r\n      } else {\r\n        let n1: number = parseFloat(vec3Str[0]);\r\n        let n2: number = parseFloat(vec3Str[1]);\r\n        let n3: number = parseFloat(vec3Str[2]);\r\n        if (isNaN(n1) || isNaN(n2) || isNaN(n3)) {\r\n          error_info.isRight = false;\r\n          error_info.message =\r\n            \": \" +\r\n            this.varType +\r\n            \", : \" +\r\n            value_str +\r\n            \"Vector3|\";\r\n          return null;\r\n        } else {\r\n          rValue = new BABYLON.Vector3(n1, n2, n3);\r\n        }\r\n      }\r\n    }\r\n    return rValue;\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    let varClone: VeryVector3 = new VeryVector3();\r\n    let r: BABYLON.Vector3 = new BABYLON.Vector3(\r\n      this._value.x,\r\n      this._value.y,\r\n      this._value.z\r\n    );\r\n    varClone.setValue(r);\r\n    return varClone;\r\n  }\r\n}\r\n\r\nexport class VeryExpression implements IVeryVar {\r\n  public get varType(): string {\r\n    return this._value.expType;\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"VeryExpression\";\r\n  }\r\n\r\n  public get Value(): IExpression {\r\n    return this._value;\r\n  }\r\n  public set Value(val: IExpression) {\r\n    this._value = val;\r\n  }\r\n  private _value: IExpression = ConstantExpression.Empty();\r\n\r\n  constructor(val: IExpression) {\r\n    this._value = val;\r\n  }\r\n\r\n  public setValue(val: any) {\r\n    this._value = val;\r\n  }\r\n\r\n  // \r\n  public getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n    let newVal = parseFloat(value_str);\r\n    if (!isNaN(newVal)) {\r\n      return newVal;\r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message =\r\n        \": \" +\r\n        this.varType +\r\n        \"\" +\r\n        value_str +\r\n        \"\";\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    return new VeryExpression(this._value);\r\n  }\r\n}\r\n\r\nVeryVarManager.addVarType(\"bool\", new VeryBool());\r\nVeryVarManager.addVarType('', new VeryBool());\r\n\r\n// VeryVarManager.addVarType('int', new VeryInt());\r\n// VeryVarManager.addVarType('float', new VeryFloat());\r\n\r\n// VeryVarManager.addVarType('number', new VeryNumber());\r\n// VeryVarManager.addVarType('', new VeryNumber());\r\n\r\n// VeryVarManager.addVarType('string', new VeryString());\r\n// VeryVarManager.addVarType('', new VeryString());\r\n// VeryVarManager.addVarType('vector3', new VeryVector3());\r\n// VeryVarManager.addVarType('', new VeryVector3());\r\n\r\nconsole.log(\"XXX\");\r\n","import { VeryTable } from \"../verytable/index\";\r\nimport { ShowError } from \"./html/showError\";\r\nimport { LoaderManager } from \"./loader/loaderManager\";\r\nimport { ErrorInfo } from \"./utility\";\r\nimport { IVeryVar, VeryVarManager, VeryBool } from \"./variables\";\r\nimport { VE_Expressions } from \"./expression\";\r\nimport { VE_ErrorManager } from \"./global\";\r\n\r\n// entrance\r\nexport * from \"./index\";\r\n\r\nexport class VeryEngine {\r\n\r\n  public static Canvas: HTMLCanvasElement;\r\n  public static Engine: BABYLON.Engine;\r\n  public static Scene: BABYLON.Scene;\r\n\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n\r\n  public init(data: Array<Array<string>>, project_name: string): void {\r\n    // TODO: sTable1\r\n    let tableData: VeryTable = new VeryTable(data, 'VeRyEngine');\r\n    // console.log(tableData.pos(7, 5));\r\n    // console.log(tableData);\r\n    console.log('');\r\n\r\n    VeryVarManager.addVarType('bool', new VeryBool());\r\n\r\n    // let errorInfo: ErrorInfo = new ErrorInfo();\r\n    // let v1: Nullable<IVeryVar> = VeryVarManager.createVariable('a', '', '3.1415926', errorInfo);\r\n    // console.log(v1!.getValue());\r\n    // errorInfo.clear();\r\n    // let v2: Nullable<IVeryVar> = VeryVarManager.createVariable('b', '', '', errorInfo);\r\n    // console.log(v2!.getValue());\r\n    // errorInfo.clear();\r\n    // let v3: Nullable<IVeryVar> = VeryVarManager.createVariable('c', '', '1,2,3', errorInfo);\r\n    // console.log(v3!.clone());\r\n    // errorInfo.clear();\r\n    // let v4: Nullable<IVeryVar> = VeryVarManager.createVariable('c', '', 'ac1,dg2,3', errorInfo);\r\n    // console.log(v4);\r\n    // console.log(errorInfo.message);\r\n\r\n\r\n    let manager: LoaderManager = new LoaderManager();\r\n    let result: boolean = manager.load(projectName, tableData);\r\n    console.log(result);\r\n    if(!result) {\r\n      VE_ErrorManager.print();\r\n    }\r\n\r\n\r\n\r\n    // this.showErrorTest(tableData);\r\n  }\r\n\r\n\r\n  public showErrorTest(tableData: VeryTable): void {\r\n    // /*\r\n    ShowError.show('' + tableData.pos(7, 5));\r\n\r\n    ShowError.showError('' + tableData.pos(7, 5));\r\n\r\n    ShowError.showWarn('' + tableData.pos(7, 5));\r\n\r\n    ShowError.show('' + tableData.pos(7, 5));\r\n\r\n    ShowError.show('' + tableData.pos(7, 5));\r\n\r\n\r\n    document.getElementById(\"settingsButton\")!.addEventListener(\"click\", ShowError.close);\r\n    // */\r\n  }\r\n\r\n}","\r\nexport * from \"./veryTableRow\";\r\nexport * from \"./veryTable\";\r\nexport * from \"./veryTableSet\";\r\n","import { VeryTableRow } from \"./veryTableRow\";\r\n\r\nexport class VeryTable {\r\n  private _id: string = \"\";\r\n  public get ID(): string {\r\n    return this._id;\r\n  }\r\n  public set ID(id: string) {\r\n    this._id = id;\r\n  }\r\n\r\n  private _columnIDs: string[] = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];\r\n\r\n  private _rows: VeryTableRow[] = [];\r\n\r\n  public get RowCount(): number {\r\n    if (!this._rows) {\r\n      return 0;\r\n    } else {\r\n      return this._rows.length;\r\n    }\r\n  }\r\n\r\n  constructor(data: string[][], id = \"Sheet\") {\r\n    this._id = id;\r\n    this._rows = [];\r\n    if (data) {\r\n      for (let i = 0; i < data.length; i++) {\r\n        let newRow = new VeryTableRow(data[i]);\r\n        this._rows.push(newRow);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param row_index \r\n   * @param column_index \r\n   */\r\n  public getData(row_index: number, column_index: number): string {\r\n    // if (row_index >= 0 && row_index < this._rows.length) {\r\n    //   let row: VeryTableRow = this._rows[row_index];\r\n    //   return row.getData(column_index);\r\n    // } else {\r\n    //   return undefined;\r\n    // }\r\n    return this._rows[row_index].getData(column_index);\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param row_index \r\n   */\r\n  public getRow(row_index: number): VeryTableRow | undefined {\r\n    if (row_index >= 0 && row_index < this._rows.length) {\r\n      return this._rows[row_index];\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param row_index \r\n   * @param column_index \r\n   */\r\n  public pos(row_index: number, column_index: number): string {\r\n    // return \"\" + this.ID + \"\" + (row_index + 1) + \"\" + this.getColumnID(column_index) + \"\";\r\n    return \"\" + (row_index + 1) + \"\" + this.getColumnID(column_index) + \"\" + this.ID + \"\";\r\n  }\r\n\r\n  /**\r\n   * ID26\r\n   * @param column_index \r\n   */\r\n  private getColumnID(column_index: number): string {\r\n    if (column_index >= 0 && column_index < 26) {\r\n      return this._columnIDs[column_index];\r\n    } else if (column_index < 0) {\r\n      return 'error';\r\n    } else {\r\n      let a: number = Math.floor(column_index / 26);\r\n      let b: number = column_index % 26;\r\n      if (a === 0) {\r\n        return this._columnIDs[a];\r\n      } else {\r\n        return this._columnIDs[a - 1] + this._columnIDs[b];\r\n      }\r\n    }\r\n  }\r\n\r\n  // public addRowStringArray(row_data: string[]): void {\r\n\r\n  // }\r\n\r\n  // public addRowStrings(...strs: string[]): void {\r\n\r\n  // }\r\n\r\n  public addRow(data: VeryTableRow): void {\r\n    // \r\n    this._rows.push(data);\r\n\r\n  }\r\n\r\n\r\n}","\r\nexport class VeryTableRow {\r\n  public get Count(): number {\r\n    if (!this._rowData) {\r\n      return 0;\r\n    } else {\r\n      return this._rowData.length;\r\n    }\r\n  }\r\n\r\n  private _rowData: string[] = [];\r\n\r\n  constructor(row_data: string[]) {\r\n    this._rowData = row_data;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param column_index \r\n   */\r\n  public getData(column_index: number): string {\r\n    // if (column_index >= 0 && column_index < this.Count) {\r\n    //   return this._rowData[column_index];\r\n    // } else {\r\n    //   return undefined;\r\n    // }\r\n    return this._rowData[column_index];\r\n  }\r\n\r\n  public add(data: string): void {\r\n    this._rowData.push(data);\r\n  }\r\n\r\n  public insert(index: number, data: string): void {\r\n    // 2\r\n    this._rowData.push(data);\r\n    let tempData = this._rowData.slice(index);\r\n    tempData.push(data);\r\n    this._rowData = tempData;\r\n  }\r\n\r\n  public remove(index: number): void {\r\n    this._rowData.splice(index, 1);\r\n  }\r\n\r\n  public removeEnd(): void {\r\n    this._rowData.pop();\r\n  }\r\n\r\n  public isEmpty(): boolean {\r\n    if(!this._rowData) {\r\n      return true;\r\n    }\r\n    for(let i: number = 0; i < this._rowData.length; i++) {\r\n      if(this._rowData[i] !== '') {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // public\r\n\r\n  // public remove(index: number): any {\r\n\r\n  // }\r\n}","// import { VeryTableRow } from \"./veryTableRow\";\r\n/**\r\n * 1. TypeScript\r\n * 2. \r\n */\r\nimport { VeryTable } from \"./veryTable\";\r\n\r\nexport class VeryTableSet {\r\n\r\n  private _tables: VeryTable[] = [];\r\n\r\n  public get Count(): number {\r\n    if (!this._tables) {\r\n      return 0;\r\n    } else {\r\n      return this._tables.length;\r\n    }\r\n  }\r\n\r\n  constructor(tables?: VeryTable[]) {\r\n    if (tables) {\r\n      this._tables = tables;\r\n    }\r\n  }\r\n\r\n  public getTable(index: number): VeryTable | undefined {\r\n    if (index >= 0 && index < this.Count) {\r\n      return this._tables[index];\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  public addTable(table: VeryTable): void {\r\n    this._tables.push(table);\r\n  }\r\n\r\n  public removeTable(index: number): void {\r\n    if (index >= 0 && index < this.Count) {\r\n      this._tables.splice(index, 1);\r\n    }\r\n  }\r\n\r\n\r\n}"]}