{"version":3,"sources":["node_modules/_browser-pack@6.1.0@browser-pack/_prelude.js","src/game.ts","src/main.ts","src/veryengine/action/actionBehaviour.ts","src/veryengine/action/actions.ts","src/veryengine/action/assignment.ts","src/veryengine/action/index.ts","src/veryengine/dataSource/dataSource.ts","src/veryengine/dataSource/fsmData.ts","src/veryengine/dataSource/index.ts","src/veryengine/dataSource/stateActionData.ts","src/veryengine/dataSource/stateData.ts","src/veryengine/dataSource/stateTriggerData.ts","src/veryengine/dataSource/variableData.ts","src/veryengine/enum/enumTypes.ts","src/veryengine/enum/index.ts","src/veryengine/expression/expChar.ts","src/veryengine/expression/expManager.ts","src/veryengine/expression/expressionEnum.ts","src/veryengine/expression/expressionParsing.ts","src/veryengine/expression/expressions.ts","src/veryengine/expression/forwardQuery.ts","src/veryengine/expression/functionExpression.ts","src/veryengine/expression/functions.ts","src/veryengine/expression/index.ts","src/veryengine/expression/positions.ts","src/veryengine/expression/scope.ts","src/veryengine/expression/token.ts","src/veryengine/expression/tokenReader.ts","src/veryengine/expression/tokenizer.ts","src/veryengine/expression/variable.ts","src/veryengine/expression/variableExpression.ts","src/veryengine/global/gameGlobal.ts","src/veryengine/global/index.ts","src/veryengine/global/time.ts","src/veryengine/html/index.ts","src/veryengine/html/showError.ts","src/veryengine/index.ts","src/veryengine/library/action/index.ts","src/veryengine/library/action/transform.ts","src/veryengine/library/trigger/index.ts","src/veryengine/library/trigger/input.ts","src/veryengine/manager/index.ts","src/veryengine/manager/manager.ts","src/veryengine/manager/projects.ts","src/veryengine/manager/reset.ts","src/veryengine/object/index.ts","src/veryengine/object/objects.ts","src/veryengine/object/veryObject.ts","src/veryengine/state/associatedState.ts","src/veryengine/state/fsm.ts","src/veryengine/state/index.ts","src/veryengine/state/state.ts","src/veryengine/state/stateAction.ts","src/veryengine/state/stateConst.ts","src/veryengine/template/index.ts","src/veryengine/template/template.ts","src/veryengine/template/templates.ts","src/veryengine/trigger/index.ts","src/veryengine/trigger/triggerBehaviour.ts","src/veryengine/trigger/triggers.ts","src/veryengine/utility/arrayUtility.ts","src/veryengine/utility/dictionary.ts","src/veryengine/utility/errorInfo.ts","src/veryengine/utility/index.ts","src/veryengine/variables/babylonVariables.ts","src/veryengine/variables/index.ts","src/veryengine/variables/veryVarManager.ts","src/veryengine/variables/veryVariables.ts","src/veryengine/veryEngine.ts","src/verytable/index.ts","src/verytable/veryTable.ts","src/verytable/veryTableRow.ts","src/verytable/veryTableSet.ts"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","veryEngine_1","Game","canvasElement","fps","this","_showFps","_canvas","VeryEngine","Canvas","_fps","_table","document","getElementById","prototype","createScene","_engine","dispose","BABYLON","Engine","engine","window","addEventListener","resize","_scene","Scene","camera","ArcRotateCamera","Vector3","setPosition","attachControl","lowerBetaLimit","upperBetaLimit","Math","PI","lowerRadiusLimit","displayLoadingUI","SceneLoader","Append","scene","hideLoadingUI","init","hot1","getData","projectName","onBeforeRenderObservable","add","Time","_sum","animate","_this","runRenderLoop","width","clientWidth","render","updateFpsPos","toggleDebug","scenes","debugLayer","isVisible","hide","show","embedMode","style","right","body","innerHTML","getFps","toFixed","game","canvas","fpsLabel","game_1","__importDefault","default","enum_1","VE_ActionBehaviour","_enabled","_projectName","_objectID","_actionID","_erveryFrame","isSequence","_sequenceState","SequenceActionState","Initial","Object","defineProperty","val","ActionType","Normal","setEveryFrame","is_every_frame","setActionID","object_id","action_id","paraParser","para_array","action","action_val","every_frame","active","onUpdate","update","pause","Pause","resume","Running","stop","finish","enabled","html_1","VE_Actions","addAction","ids","ID","split","id","trim","toLowerCase","_actionDics","ShowError","showError","hasAction","createAction","create","remove","VE_Assignment","state","total_string","_totalStr","_leftType","AssignType","Variable","_rightType","_state","__export","fsmData_1","VE_DataSource","project_name","name_id","is_template","_templateID","_isTemplate","_fsmIDs","_fsmDic","_triggerIDs","_triggerDic","_actionIDs","_actionDic","_actionInitValue","hasFsm","fsm_id","createFsm","push","VE_FsmData","getFsm","hasFsmIndex","index","getFsmID","hasTrigger","trigger_id","addTrigger","trigger_data","getTrigger","hasTriggerIndex","getTriggerID","action_data","action_init_val","getAction","getActionInitVal","hasActionIndex","getActionID","clear","data_source","_initialValStr","_states","_dataSource","_fsmID","initFsm","initial_var","addState","state_data","getState","VE_StateActionData","sequence","type","StateActionType","Action","totalString","varID","varValue","actionID","everyFrame","setNormalAction","setAssignmentAction","var_id","var_value","Assignment","state_1","VE_StateData","fsm_data","val_str","is_initial_value","state_index","StateConst","STATE_INDEX","_stateIndex","logicalExp","_triggers","_actions","_associatedStates","_isSequence","_fsmData","_valStr","_isInitialValue","hasAssociatedState","addAssociatedState","associated_state_data","getAssociatedState","setSequence","VE_StateTriggerData","triggerID","logicalSwitch","VE_Variable","_variableIDs","_varDics","hasVariable","addVariable","var_paras","getVariableID","getVariableParas","AssociatedFsmType","VariableScope","ExpChar","value","line","pos","_value","_line","_pos","getValue","getLine","getPos","isDigit","test","isLetter","isWhiteSpace","isNewLine","isEndOfInput","is","_i","arguments","toString","scope_1","positions_1","expressionParsing_1","ExpManager","_scope","Scope","Create","isCreated","_expVariable","isCreatedVariable","isCreatedExpression","createVariable","errors","ParseError","NameLocation","setVariable","createExpression","exp_str","exp","VE_ExpressionParsing","parsing","find","evaluate","getExpression","getVariable","console","log","ExpressionType","tokenizer_1","expressions_1","expressionEnum_1","functionExpression_1","functions_1","variableExpression_1","_bracketPair","input_exp","scope","var_scope","_varScope","_tokenizer","Tokenizer","parse","resultExp","buildExpression","current","isEnd","addError","getSource","consume","getProblemCollector","left","relationalExp","isOperator","reOrder","BinaryOperator","Add","Or","algebraExp","LT","LT_EQ","EQ","GT_EQ","GT","NEQ","productExp","Subtract","exponentExp","Multiply","Divide","Modulo","atomExp","BinaryExpression","Not","result","ConstantExpression","setSeal","next","isIdentifier","isKeyword","isStartBracket","newValue","expType","Empty","isConstant","endBracket","className","expectTrigger","OPERATOR","typeStr","isBool","getContents","isNumber","parseFloat","endStart","functionCall","loc","variableID","VariableExpression","isSpecialIdentifier","op","rightOp","isSealed","getPriority","getPriorityOp","replaceLeft","target","newLeft","getLeftExp","leftOp","setLeftExp","end_bracket","FunctionExpression","funcToken","CustomFunctions","hasFunction","fun","createFunction","setFunction","paraCount","addPara","parameterNumber","trigger","matches","getProjectCollector","Local","dictionary_1","TrueExpression","clone","_expType","isEmpty","left_exp","right_exp","_op","_isSealed","_left","_right","resultAutoType","_opDic","Power","And","_priority","setRightExp","getOp","getRightExp","leftValue","rightValue","subtract","multiplyByFloats","pow","l","getBoolean","x","y","z","Vector2","GetValue","Dictionary","ForwardQuery","itemBuffer","endReached","problemCollector","endOfInputIndicator","undefined","nextOffset","offset","item","fetch","endOfInput","consumeNext","numberOfItems","shift","setProblemCollector","_paras","func","_function","expClone","printStr","Pow","args","NaN","Ln","Infinity","Lg","log10","Sqrt","sqrt","Abs","abs","Random","distance","random","Round","round","Sin","sin","ASin","asin","Cos","cos","ACos","acos","Tan","tan","ATan","atan","func_name","_functions","addFunction","funcName","Severity","msg","severity","_message","_severity","Warning","message","getPosition","getMessage","getSeverity","variable_1","_parent","_context","GetRootScope","_root","makeConstant","E","CreateWithParent","parent","name","setType","setValue","Token","STRING","_source","_contents","_trigger","CreateAndFill","ch","addToTrigger","addToSource","addToContentChar","addToContent","getTokenType","setTokenType","new_type","setTrigger","setContent","content","setSource","source","EOI","symbols","isEndBracket","isStartSquareBracket","isEndSquareBracket","isStartBrace","isEndBrace","keywords","KEYWORD","values","triggers","SPECIAL_ID","isSpecialIdentifierWithContent","contents","NUMBER","BOOL","isString","forwardQuery_1","expChar_1","TokenReader","_super","_inputExp","_count","_operator","__extends","readChar","token_1","tokenReader_1","_decimalSeparator","_lineComment","_blockCommentStart","_blockCommentEnd","_brackets","_treatSinglePipeAsBracket","_specialIdStarters","_specialIdTerminators","_keywords","_keywordsCaseSensitive","_stringDelimiters","_boolConstant","isAtStartOfLineComment","skipToEndOfLine","isAtStartOfBlockComment","skipBlockComment","isAtStartOfNumber","fetchNumber","isAtStartOfIdentifier","fetchId","fetchString","isAtBracket","isAtStartOfSpecialId","fetchSpecialId","fetchOperator","hasDecimal","isIdentifierChar","indexOf","specialId","handleKeywords","separator","canConsumeThisString","check_string","isAtEndOfBlockComment","in_symbol","id_token","keyword","keywordToken","addWarning","_name","_constant","getName","GameGlobal","_frame","getDeltaTime","initZone","errorZone","showMsg","prefix","error_msg","errorContentNow","errorContentPrefix","display","closeBtn","querySelector","that","showWarn","close","Action_Translate","apply","_refType","Space","LOCAL","destroy","index_1","trigger_1","Trigger_MouseDown","onPointerObservable","pointInfo","VE_TriggerBehaviour","VE_Triggers","VE_Manager","VE_Projects","VE_Reset","utility_1","VE_Objects","_objectIDs","_objectDics","very_object","getObjectID","getVeryObject","unloadObject","ArrayUtility","tempObject","variables_1","VeryObject","game_object","gameObject","GameObject","_variables","_expressions","_fsms","_templates","addFsm","fsm","variable","hasExpression","exp_id","addExpression","expression","hasTemplate","template_id","addTemplate","template","getTemplate","hasAnyVar","unload","VE_AssociatedState","from_state","_types","_indexs","_numberIndex","_templateIDs","_fromState","key","connect","global_1","stateConst_1","VE_Fsm","_id","_stateDics","_frameCount","hasState","state_value","ContainsKey","removeState","Remove","receiveEvent","frameCount","startsWith","ASSOCIATED_STATE_PREFIX","VE_State","_stateActions","_assocaitedStates","_fsm","state_action","Mesh","bind","VE_StateAction","is_sequence","_type","_action","STATE_SEPARATOR","VARIABLE_SYMBOL","VE_Template","VE_Templates","_logicalSwitch","_logicalExp","_triggerTargets","_triggerID","set","setTriggerID","addLogicalSwitch","addTriggerTarget","sendEvent","isEnabled","eventProcess","_triggerDics","createTrigger","arr","ele","splice","_keys","_values","Count","SetValue","ks","GetKeys","GetValues","ErrorInfo","isRight","mesh","Transform","eulerAngles","Zero","showError_1","VeryVarManager","hasVarType","var_type","_veryVarTypes","addVarType","var_prototype","createVar","getVarType","veryVarManager_1","VeryBool","initValue","value_str","error_info","varType","VeryInt","Value","newFloat","isNaN","VeryFloat","newVal","VeryNumber","VeryString","substr","VeryVector3","data","tableData","VeryTable","showErrorTest","veryTableRow_1","_columnIDs","_rows","newRow","VeryTableRow","row_index","column_index","getRow","getColumnID","floor","b","addRow","row_data","_rowData","insert","tempData","slice","removeEnd","pop","VeryTableSet","tables","_tables","getTable","addTable","table","removeTable"],"mappings":"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","file":"veryengine.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","/// <reference path=\"./dts/babylon.d.ts\"/>\r\n\r\nimport { VeryEngine, Time } from \"./veryengine/veryEngine\";\r\n\r\nexport default class Game {\r\n\tprivate _canvas: HTMLCanvasElement;\r\n\tprivate _fps: HTMLElement;\r\n\tprivate _table!: HTMLElement;\r\n\tprivate _showFps: boolean = true;\r\n\tprivate _engine!: BABYLON.Engine;\r\n\tprivate _scene!: BABYLON.Scene;\r\n\t// private _camera!: BABYLON.FreeCamera;\r\n\r\n\tconstructor(canvasElement: HTMLCanvasElement, fps: HTMLElement) {\r\n\t\tthis._canvas = canvasElement;\r\n\t\tVeryEngine.Canvas = this._canvas;\r\n\t\tthis._fps = fps;\r\n\t\t// this._engine = new BABYLON.Engine(this._canvas, true);\r\n\t\tthis._table = document.getElementById(\"VeryTable\")!;\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\tcreateScene(): Game {\r\n\t\t// engine\r\n\t\tif (this._engine) {\r\n\t\t\tthis._engine.dispose();\r\n\t\t}\r\n\t\tthis._engine = new BABYLON.Engine(this._canvas, true);\r\n\t\tVeryEngine.Engine = this._engine;\r\n\t\t// Resize\r\n\t\tlet engine = this._engine;\r\n\t\twindow.addEventListener(\"resize\", function () {\r\n\t\t\tengine.resize();\r\n\t\t});\r\n\r\n\t\tthis._scene = new BABYLON.Scene(this._engine);\r\n\t\tVeryEngine.Scene = this._scene;\r\n\r\n\t\t// \r\n\t\tvar camera = new BABYLON.ArcRotateCamera(\"MainCamera\", 0, 0, 10, new BABYLON.Vector3(0, 0, 0), this._scene);\r\n    camera.setPosition(new BABYLON.Vector3(20, 200, 400));\r\n    camera.attachControl(this._canvas, true);\r\n    camera.lowerBetaLimit = 0.1;\r\n    camera.upperBetaLimit = (Math.PI / 2) * 0.99;\r\n    camera.lowerRadiusLimit = 150;\r\n\r\n\t\t// \r\n\t\tengine.displayLoadingUI();\r\n\r\n\t\t// scene.babylon\r\n\t\tBABYLON.SceneLoader.Append(\"./scene/\", \"scene.babylon\", this._scene, function (scene) {\r\n\t\t\t\t// do something with the scene\r\n\t\t\t\t// \r\n\t\t\t\tengine.hideLoadingUI();\r\n\t\t});\r\n\r\n\r\n\t\t// const lightPos = new BABYLON.Vector3(0, 1, 0);\r\n\t\t// new BABYLON.HemisphericLight('hemlight', lightPos, this._scene);\r\n\r\n\t\t// const sphereOpts = { segments: 16, diameter: 1 };\r\n\t\t// let sphere = BABYLON.MeshBuilder.CreateSphere(\r\n\t\t// \t'mainsphere',\r\n\t\t// \tsphereOpts,\r\n\t\t// \tthis._scene\r\n\t\t// );\r\n\t\t// sphere.position.y = 1;\r\n\r\n\t\t// const groundOpts = { width: 6, height: 6, subdivisions: 2 };\r\n\t\t// BABYLON.MeshBuilder.CreateGround('mainground', groundOpts, this._scene);\r\n\r\n\t\t// \r\n\t\t// console.log(hot1.getData());\r\n\t\tlet entrance: VeryEngine = new VeryEngine();\r\n\t\tentrance.init(hot1.getData(), projectName);\r\n\r\n\t\t// \r\n\t\tthis._scene.onBeforeRenderObservable.add(() => {\r\n\t\t\t// \r\n\t\t\tTime._sum();\r\n\t\t})\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\tanimate(): Game {\r\n\t\tthis._engine.runRenderLoop(() => {\r\n\t\t\tif (this._canvas.width !== this._canvas.clientWidth) {\r\n\t\t\t\tthis._engine.resize();\r\n\t\t\t}\r\n\r\n\t\t\tif (this._scene) {\r\n\t\t\t\tthis._scene.render();\r\n\t\t\t}\r\n\r\n\t\t\tif (this._showFps) {\r\n\t\t\t\tthis.updateFpsPos();\r\n\t\t\t}\r\n\r\n\r\n\t\t});\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * UI\r\n\t */\r\n\ttoggleDebug(): Game {\r\n\t\tif (this._engine) {\r\n\t\t\t// Always showing the debug layer, because you can close it by itself\r\n\t\t\tvar scene = this._engine.scenes[0];\r\n\t\t\tif (scene.debugLayer.isVisible()) {\r\n\t\t\t\tscene.debugLayer.hide();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// babylon.d.ts\r\n\t\t\t\tscene.debugLayer.show({ embedMode: true });\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * fps\r\n\t */\r\n\tupdateFpsPos(): void {\r\n\t\tif (this._fps) {\r\n\t\t\tthis._fps.style.right = document.body.clientWidth - (this._table.clientWidth + this._canvas.clientWidth) + \"px\";\r\n\r\n\t\t\tthis._fps.innerHTML = this._engine.getFps().toFixed() + \" fps\";\r\n\t\t}\r\n\t}\r\n}\r\n","\r\n\r\nimport Game from \"./game\";\r\n\r\nlet game!:Game;\r\n/**\r\n * \r\n */\r\nfunction initGame(): void {\r\n  let canvas = <HTMLCanvasElement>document.getElementById(\"renderCanvas\");\r\n  let fpsLabel = document.getElementById(\"fpsLabel\");\r\n  if(canvas !== null && fpsLabel !== null) {\r\n    game = new Game(canvas, fpsLabel);\r\n    game.createScene().animate();  // \r\n  }\r\n}\r\n\r\nfunction runBtn(): void {\r\n  if(game) {\r\n    game.createScene().animate();\r\n  }\r\n}\r\n\r\nfunction toggleDebug(): void {\r\n  if(game) {\r\n    game.toggleDebug();\r\n  }\r\n}\r\n\r\n// \r\ndocument.getElementById(\"runButton\")!.addEventListener(\"click\", runBtn);\r\n\r\n// \r\ndocument.getElementById(\"debugButton\")!.addEventListener(\"click\", toggleDebug);\r\n\r\n// \r\ninitGame();\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import { ActionType, SequenceActionState } from \"../enum\";\r\n\r\nexport abstract class VE_ActionBehaviour {\r\n\r\n  public abstract get ID(): string;\r\n\r\n  public get enabled(): boolean {\r\n    return this._enabled;\r\n  }\r\n  public set enabled(val: boolean) {\r\n    this._enabled = val;\r\n  }\r\n  private _enabled: boolean = true;\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  };\r\n  private _projectName: string = '';\r\n\r\n  // protected GameObject ObjectInstance = null;\r\n  // protected veryObject: VeryObject = null;\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  };\r\n  private _objectID: string = '';\r\n\r\n  public get actionID(): string {\r\n    return this._actionID;\r\n  }\r\n  private _actionID: string = '';\r\n\r\n  public get Type(): ActionType {\r\n    return ActionType.Normal;\r\n  }\r\n\r\n  private _erveryFrame: boolean = false;\r\n  public get everyFrame(): boolean {\r\n    return this._erveryFrame;\r\n  }\r\n\r\n\r\n  public isSequence: boolean = false;\r\n\r\n  public get SequenceState(): SequenceActionState {\r\n    return this._sequenceState;\r\n  }\r\n  public set SequenceState(val: SequenceActionState) {\r\n    this._sequenceState = val;\r\n  }\r\n  private _sequenceState: SequenceActionState = SequenceActionState.Initial;\r\n\r\n  // private VE_SequenceActions _sequenceAction = null;\r\n\r\n\r\n  public setEveryFrame(is_every_frame: boolean): void {\r\n    this._erveryFrame = is_every_frame;\r\n  }\r\n\r\n  public setActionID(object_id: string, action_id: string): void {\r\n    this._objectID = object_id;\r\n    this._actionID = action_id;\r\n  }\r\n\r\n  // SetVeryObject(): void {}\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    if (para_array) { }\r\n    return true;\r\n  }\r\n\r\n  public action(action_val: boolean, every_frame: boolean): void {\r\n    this._enabled = action_val;\r\n    this._erveryFrame = every_frame;\r\n    if (this._enabled) {\r\n      this.active()\r\n      if (!this._erveryFrame) {\r\n        this.onUpdate();\r\n      }\r\n    }\r\n  }\r\n\r\n  public abstract active(): void;\r\n\r\n\r\n  public update(): void {\r\n    if(this._enabled && this._erveryFrame) {\r\n      this.onUpdate();\r\n    }\r\n  }\r\n\r\n  public onUpdate(): void {\r\n\r\n  }\r\n\r\n  public pause(): void {\r\n    this._sequenceState = SequenceActionState.Pause;\r\n  }\r\n\r\n  public resume(): void {\r\n    this._sequenceState = SequenceActionState.Running;\r\n  }\r\n\r\n  public stop(): void {\r\n    this._sequenceState = SequenceActionState.Initial;\r\n  }\r\n\r\n  public finish(): void {\r\n    this._sequenceState = SequenceActionState.Initial;\r\n\r\n    this.enabled = false;\r\n  }\r\n\r\n  // add callbackdestroy\r\n  public abstract destroy(): void;\r\n\r\n\r\n}","import { VE_ActionBehaviour } from \"./actionBehaviour\";\r\nimport { ShowError } from \"../html\";\r\n\r\nexport class VE_Actions {\r\n\r\n  private static _actionDics: { [key: string]: VE_ActionBehaviour} = {};\r\n\r\n  public static addAction(action: VE_ActionBehaviour): void {\r\n    let ids: string[] = action.ID.split('|');\r\n    for(let i: number = 0; i < ids.length; i++) {\r\n      let id: string = ids[i].trim().toLowerCase();\r\n      if(this._actionDics[id]) {\r\n        ShowError.showError(`IDID${id}ID`);\r\n      } else {\r\n        this._actionDics[id] = action;\r\n      }\r\n    }\r\n  }\r\n\r\n  public static hasAction(action_id: string): boolean {\r\n    action_id = action_id.toLowerCase();\r\n    if(this._actionDics[action_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static createAction(action_id: string): VE_ActionBehaviour {\r\n    action_id = action_id.toLowerCase();\r\n    return Object.create(this._actionDics[action_id]);\r\n  }\r\n  \r\n  public static remove(action_id: string): void {\r\n    action_id = action_id.toLowerCase();\r\n    delete this._actionDics[action_id];\r\n  }\r\n\r\n\r\n}","import { VE_State } from \"../state\";\r\nimport { AssignType } from \"../enum\";\r\n\r\nexport class VE_Assignment {\r\n\r\n  public get state(): VE_State {\r\n    return this._state;\r\n  }\r\n  private _state: VE_State;\r\n\r\n  private _totalStr: string = '';\r\n\r\n  public get leftType(): AssignType {\r\n    return this._leftType;\r\n  }\r\n  private _leftType: AssignType = AssignType.Variable;\r\n\r\n  public get rightType(): AssignType {\r\n    return this._rightType;\r\n  }\r\n  private _rightType: AssignType = AssignType.Variable;\r\n\r\n  \r\n  constructor(state: VE_State, total_string: string) {\r\n    this._state = state;\r\n    this._totalStr = total_string;\r\n  }\r\n\r\n  \r\n}","export * from './actionBehaviour';\r\nexport * from './assignment';\r\nexport * from './actions';","import { VE_FsmData } from \"./fsmData\";\r\n\r\nexport class VE_DataSource {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = '';\r\n\r\n  public get templateID(): string {\r\n    return this._templateID;\r\n  }\r\n  private _templateID: string = '';\r\n\r\n  public get isTemplate(): boolean {\r\n    return this._isTemplate;\r\n  }\r\n  private _isTemplate: boolean = false;\r\n\r\n  public get id(): string {\r\n    if (this._isTemplate) {\r\n      return this._templateID;\r\n    } else {\r\n      return this._objectID;\r\n    }\r\n  }\r\n\r\n  private _fsmIDs: string[] = [];\r\n  private _fsmDic: { [key: string]: VE_FsmData } = {};\r\n\r\n  private _triggerIDs: string[] = [];\r\n  private _triggerDic: { [key: string]: string[] } = {};\r\n\r\n  private _actionIDs: string[] = [];\r\n  private _actionDic: { [key: string]: string[] } = {};\r\n  private _actionInitValue: { [key: string]: string[] } = {};\r\n\r\n  public get triggerCount(): number {\r\n    return this._triggerIDs.length;\r\n  }\r\n\r\n  public get actionCount(): number {\r\n    return this._actionIDs.length;\r\n  }\r\n\r\n  public get fsmCount(): number {\r\n    return this._fsmIDs.length;\r\n  }\r\n\r\n\r\n  constructor(project_name: string, name_id: string, is_template: boolean) {\r\n    this._projectName = project_name;\r\n    this._isTemplate = is_template;\r\n    if(is_template) {\r\n      this._templateID = name_id;\r\n    } else {\r\n      this._objectID = name_id;\r\n    }\r\n  }\r\n\r\n  public hasFsm(fsm_id: string): boolean {\r\n    if(this._fsmDic[fsm_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public createFsm(fsm_id: string): void {\r\n    this._fsmIDs.push(fsm_id);\r\n    this._fsmDic[fsm_id] = new VE_FsmData(fsm_id, this);\r\n  }\r\n\r\n  public getFsm(fsm_id: string): VE_FsmData {\r\n    return this._fsmDic[fsm_id];\r\n  }\r\n\r\n  public hasFsmIndex(index: number): boolean {\r\n    if(index >= 0 && index < this._fsmIDs.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getFsmID(index: number): string {\r\n    return this._fsmIDs[index];\r\n  }\r\n\r\n  public hasTrigger(trigger_id: string): boolean {\r\n    if(this._triggerDic[trigger_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTrigger(trigger_id: string, trigger_data: string[]): void {\r\n    this._triggerIDs.push(trigger_id);\r\n    this._triggerDic[trigger_id] = trigger_data;\r\n  }\r\n\r\n  public getTrigger(trigger_id: string): string[] {\r\n    return this._triggerDic[trigger_id];\r\n  }\r\n\r\n  public hasTriggerIndex(index: number): boolean {\r\n    if(index >=0 && index < this._triggerIDs.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getTriggerID(index: number): string {\r\n    return this._triggerIDs[index];\r\n  }\r\n\r\n  public hasAction(action_id: string): boolean {\r\n    if(this._actionDic[action_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addAction(action_id: string, action_data: string[], action_init_val: string[]): void {\r\n    this._actionIDs.push(action_id);\r\n    this._actionDic[action_id] = action_data;\r\n    this._actionInitValue[action_id] = action_init_val;\r\n  }\r\n\r\n  public getAction(action_id: string): string[] {\r\n    return this._actionDic[action_id];\r\n  }\r\n\r\n  public getActionInitVal(action_id: string): string[] {\r\n    return this._actionInitValue[action_id];\r\n  }\r\n\r\n  public hasActionIndex(index: number): boolean {\r\n    if(index >= 0 && index < this._actionIDs.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getActionID(index: number): string {\r\n    return this._actionIDs[index];\r\n  }\r\n\r\n  public clear(): void {\r\n    this._fsmIDs = [];\r\n    this._fsmDic = {};\r\n    this._triggerIDs = [];\r\n    this._triggerDic = {};\r\n    this._actionIDs = [];\r\n    this._actionDic = {};\r\n    this._actionInitValue = {};\r\n  }\r\n\r\n\r\n\r\n}","import { VE_DataSource, VE_StateData } from \"./index\";\r\n\r\nexport class VE_FsmData {\r\n  public get dataSource(): VE_DataSource {\r\n    return this._dataSource;\r\n  }\r\n  private _dataSource: VE_DataSource;\r\n\r\n  public get fsmID(): string {\r\n    return this._fsmID;\r\n  }\r\n  private _fsmID: string;\r\n\r\n  public get initialValStr(): string {\r\n    return this._initialValStr;\r\n  }\r\n  private _initialValStr: string = 'defalut';\r\n\r\n  private _states: VE_StateData[] = [];\r\n\r\n  public get count(): number {\r\n    return this._states.length;\r\n  }\r\n\r\n  constructor(fsm_id: string, data_source: VE_DataSource) {\r\n    this._dataSource = data_source;\r\n    this._fsmID = fsm_id;\r\n  }\r\n\r\n  initFsm(initial_var: string): void {\r\n    this._initialValStr = initial_var;\r\n  }\r\n\r\n  addState(state_data: VE_StateData): void {\r\n    this._states.push(state_data);\r\n  }\r\n\r\n  getState(index: number): VE_StateData {\r\n    return this._states[index];\r\n  }\r\n}","export * from './variableData';\r\nexport * from './fsmData';\r\nexport * from './stateActionData';\r\nexport * from './stateTriggerData';\r\nexport * from './stateData';\r\nexport * from './dataSource';\r\n\r\n","import { StateActionType } from \"../enum\";\r\n\r\nexport class VE_StateActionData {\r\n\r\n  actionID: string;\r\n  enabled: string;\r\n  everyFrame: string;\r\n  isSequence: string;\r\n  type: StateActionType;\r\n  totalString: string = '';\r\n  varID: string = '';\r\n  varValue: string = '';\r\n\r\n  constructor(action_id: string, enabled: string = 'false', every_frame: string = 'false', sequence: string = 'false', type: StateActionType = StateActionType.Action) {\r\n    this.actionID = action_id;\r\n    this.enabled = enabled;\r\n    this.everyFrame = every_frame;\r\n    this.isSequence = sequence;\r\n    this.type = type;\r\n  }\r\n\r\n  setNormalAction(action_id: string, enabled: string = 'false', every_frame: string = 'false', sequence: string = 'false'): void {\r\n    this.actionID = action_id;\r\n    this.enabled = enabled;\r\n    this.everyFrame = every_frame;\r\n    this.isSequence = sequence;\r\n    this.type = StateActionType.Action;\r\n  }\r\n\r\n  setAssignmentAction(total_string: string, var_id: string, var_value: string): void {\r\n    this.totalString = total_string;\r\n    this.varID = var_id;\r\n    this.varValue = var_value;\r\n    this.type = StateActionType.Assignment;\r\n  }\r\n\r\n}","import { VE_FsmData } from \"./index\";\r\nimport { StateConst } from \"../state\";\r\nimport { VE_StateTriggerData } from \"./stateTriggerData\";\r\nimport { VE_StateActionData } from \"./stateActionData\";\r\n\r\nexport class VE_StateData {\r\n\r\n  public get fsmData(): VE_FsmData {\r\n    return this._fsmData;\r\n  }\r\n  private _fsmData: VE_FsmData;\r\n\r\n  public get ValStr(): string {\r\n    return this._valStr;\r\n  }\r\n  private _valStr: string;\r\n\r\n  public get isInitialValue(): boolean {\r\n    return this._isInitialValue;\r\n  }\r\n  private _isInitialValue: boolean;\r\n\r\n  public get stateIndex(): number {\r\n    return this._stateIndex;\r\n  }\r\n  private _stateIndex: number = StateConst.STATE_INDEX;\r\n\r\n  public logicalExp: string = '';\r\n\r\n  private _triggers: VE_StateTriggerData[] = [];\r\n  private _actions: VE_StateActionData[] = [];\r\n  private _associatedStates: string[] = [];\r\n\r\n  public get isSequence(): boolean {\r\n    return this._isSequence;\r\n  }\r\n  private _isSequence: boolean = false;\r\n\r\n  public get triggerCount(): number {\r\n    return this._triggers.length;\r\n  }\r\n\r\n  public get actionCount(): number {\r\n    return this._actions.length;\r\n  }\r\n\r\n  public get associatedStateCount(): number {\r\n    return this._associatedStates.length;\r\n  }\r\n\r\n  constructor(fsm_data: VE_FsmData, val_str: string, is_initial_value: boolean, state_index: number = StateConst.STATE_INDEX) {\r\n    this._fsmData = fsm_data;\r\n    this._valStr = val_str;\r\n    this._isInitialValue = is_initial_value;\r\n    this._stateIndex = state_index;\r\n  }\r\n\r\n  hasTrigger(index: number): boolean {\r\n    if(index >= 0 && index < this._triggers.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  addTrigger(trigger_data: VE_StateTriggerData): void {\r\n    this._triggers.push(trigger_data);\r\n  }\r\n\r\n  getTrigger(index: number): VE_StateTriggerData {\r\n    return this._triggers[index];\r\n  }\r\n\r\n  hasAction(index: number): boolean {\r\n    if(index >= 0 && index < this._actions.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  addAction(action_data: VE_StateActionData): void {\r\n    this._actions.push(action_data);\r\n  }\r\n\r\n  getAction(index: number): VE_StateActionData {\r\n    return this._actions[index];\r\n  }\r\n\r\n  hasAssociatedState(index: number): boolean {\r\n    if(index >= 0 && index < this._associatedStates.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  addAssociatedState(associated_state_data: string): void {\r\n    this._associatedStates.push(associated_state_data);\r\n  }\r\n\r\n  getAssociatedState(index: number): string {\r\n    return this._associatedStates[index];\r\n  }\r\n\r\n  setSequence(): void {\r\n    this._isSequence = true;\r\n  }\r\n\r\n}","export class VE_StateTriggerData {\r\n\r\n  triggerID: string;\r\n  logicalSwitch: string;\r\n  logicalExp: string;\r\n\r\n  public static get Empty(): VE_StateTriggerData {\r\n    return new VE_StateTriggerData('');\r\n  }\r\n\r\n  constructor(trigger_id: string) {\r\n    this.triggerID = trigger_id;\r\n    this.logicalSwitch = '';\r\n    this.logicalExp = '';\r\n   }\r\n}","export class VE_Variable {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  private _variableIDs: string[] = [];\r\n  private _varDics: {[key: string]: string[]} = {};\r\n\r\n  public get count(): number {\r\n    return this._variableIDs.length;\r\n  }\r\n\r\n  constructor(project_name: string) {\r\n    this._projectName = project_name;\r\n  }\r\n\r\n  hasVariable(var_id: string): boolean {\r\n    if(this._varDics[var_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  addVariable(var_id: string, var_paras: string[]): void {\r\n    this._varDics[var_id] = var_paras;\r\n    this._variableIDs.push(var_id);\r\n  }\r\n\r\n  getVariableID(index: number): string {\r\n    if(index >= 0 && index < this._variableIDs.length) {\r\n      return this._variableIDs[index];\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n\r\n  getVariableParas(var_id: string): string[] {\r\n    return this._varDics[var_id];\r\n  }\r\n\r\n  clear(): void {\r\n    this._variableIDs = [];\r\n    this._varDics = {};\r\n  }\r\n}","\r\n\r\n\r\nexport enum ActionType {\r\n  Normal, Animation\r\n}\r\n\r\nexport enum SequenceActionState {\r\n  Initial, Prepared, Running, Pause\r\n}\r\n\r\nexport enum StateActionType {\r\n  Action, Assignment\r\n}\r\n\r\nexport enum AssignType {\r\n  Variable = 0,\r\n  Template,\r\n  TemplateVariable,\r\n  Const,\r\n}\r\n\r\nexport enum AssociatedFsmType {\r\n  Object = 0,\r\n  Template\r\n}\r\n\r\nexport enum VariableScope {\r\n  Local = 0,\r\n  Fsm,\r\n  Global,\r\n  Scene\r\n}","export * from './enumTypes';","import { IPosition } from \"./positions\";\r\n\r\nexport class ExpChar implements IPosition {\r\n\r\n  private _value: string = '';\r\n  private _line: number = 0;\r\n  private _pos: number = 0;\r\n\r\n\r\n  constructor(value: string, line: number, pos: number) {\r\n    this._value = value;\r\n    this._line = line;\r\n    this._pos = pos;\r\n  }\r\n\r\n  public getValue(): string {\r\n    return this._value;\r\n  }\r\n\r\n  public getLine(): number {\r\n    return this._line;\r\n  }  \r\n  \r\n  public getPos(): number {\r\n    \r\n    return this._pos;\r\n  }\r\n\r\n  public isDigit(): boolean {\r\n    return (/\\d/).test(this._value);\r\n  }\r\n\r\n  public isLetter(): boolean {\r\n    return (/[a-zA-Z]/).test(this._value);\r\n  }\r\n\r\n  public isWhiteSpace(): boolean {\r\n    return this._value === ' ';\r\n  }\r\n\r\n  public isNewLine(): boolean {\r\n    return this._value === '\\n';\r\n  }\r\n\r\n  public isEndOfInput(): boolean {\r\n    return this._value === '\\0';\r\n  }\r\n\r\n  public is(...val: string[]): boolean {\r\n    for(let i: number = 0; i < val.length; i++) {\r\n      if(val[i] === this._value && val[i] !== '\\0') {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public toString(): string {\r\n    return this._value;\r\n  }\r\n\r\n}\r\n\r\n","import { Scope } from \"./scope\";\r\nimport { IExpression } from \"./expressions\";\r\nimport { ParseError, NameLocation } from \"./positions\";\r\nimport { VE_ExpressionParsing } from \"./expressionParsing\";\r\nimport { VariableScope } from \"../enum\";\r\nimport { Variable } from \"./variable\";\r\n\r\nexport class ExpManager {\r\n\r\n  private static _scope: Scope;\r\n  private static _expVariable: { [key: string]: IExpression } = {};\r\n\r\n  public static errors: ParseError[] = [];\r\n\r\n  private static _projectName = '';\r\n  private static _objectID = '';\r\n\r\n  public static init() {\r\n    this._scope = Scope.Create();\r\n  }\r\n\r\n  public static isCreated(name_id: string): boolean {\r\n    if(this._scope.isCreated(name_id)){\r\n      return true;\r\n    }\r\n    if(this._expVariable[name_id]) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public static isCreatedVariable(name_id: string): boolean {\r\n    if(this._scope.isCreated(name_id)){\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static isCreatedExpression(name_id: string): boolean {\r\n    if(this._expVariable[name_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static createVariable(name_id: string, type: string, value: any): boolean {\r\n    this.errors = [];\r\n    if(this.isCreated(name_id)) {\r\n      this.errors.push(ParseError.Error(new NameLocation(name_id), `${name_id}${type}`));\r\n      return false;\r\n    }\r\n    this._scope.setVariable(name_id, type, value);\r\n    return true;\r\n  }\r\n\r\n  public static createExpression(name_id: string, exp_str: string): boolean {\r\n    this.errors = [];\r\n    if(this.isCreated(name_id)) {\r\n      this.errors.push(ParseError.Error(new NameLocation(name_id), `${name_id}${exp_str}`));\r\n      return false;\r\n    }\r\n    let exp: IExpression = VE_ExpressionParsing.parsing(name_id, exp_str, this._scope, this._projectName, '', '', VariableScope.Scene);\r\n    if(VE_ExpressionParsing.errors.length > 0) {\r\n      for(let i: number = 0; i < VE_ExpressionParsing.errors.length; i++) {\r\n        this.errors.push(VE_ExpressionParsing.errors[i]);\r\n      }\r\n      return false;\r\n    }\r\n    this._expVariable[name_id] = exp;\r\n    return true;\r\n  }\r\n\r\n  public static getValue(name_id: string): any {\r\n    if(this.isCreated(name_id)) {\r\n      if(this.isCreatedVariable(name_id)) {\r\n        return this._scope.find(name_id)!.getValue();\r\n      } else {\r\n        return this._expVariable[name_id].evaluate();\r\n      }\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static getExpression(name_id: string): IExpression | null {\r\n    if(this._expVariable[name_id]) {\r\n      return this._expVariable[name_id];\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static getVariable(name_id: string): Variable | null {\r\n    if(this.isCreatedVariable(name_id)) {\r\n      return this._scope.find(name_id);\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n\r\n}\r\n\r\nExpManager.init();\r\n\r\n\r\nExpManager.createVariable('x', 'number', 1);\r\nExpManager.createVariable('y', 'number', 2);\r\nconsole.log(ExpManager.getValue('y'));\r\n\r\nExpManager.createExpression('add', 'x + y');\r\nconsole.log(ExpManager.getExpression('add'));\r\n\r\nExpManager.createExpression('multiply', 'x * y');\r\nExpManager.createExpression('substract', 'x - y');\r\n\r\nconsole.log(ExpManager.getExpression('add')!.evaluate());\r\n\r\nconsole.log(ExpManager.getExpression('multiply')!.evaluate());\r\nconsole.log(ExpManager.getExpression('substract')!.evaluate());\r\n\r\n\r\n\r\n","export enum ExpressionType {\r\n  ID, SPECIAL_ID, KEYWORD, STRING, NUMBER, BOOL, OPERATOR, INTEGER, FLOAT, DOUBLE, EOI\r\n}","import { Scope } from \"./scope\";\r\nimport { Tokenizer } from \"./tokenizer\";\r\nimport { ParseError, IPosition } from \"./positions\";\r\nimport { IExpression, BinaryOperator, BinaryExpression, ConstantExpression } from \"./expressions\";\r\nimport { ExpressionType } from \"./expressionEnum\";\r\nimport { FunctionExpression } from \"./functionExpression\";\r\nimport { Token } from \"./token\";\r\nimport { IFunction, CustomFunctions } from \"./functions\";\r\nimport { Variable } from \"./variable\";\r\nimport { VariableExpression } from \"./variableExpression\";\r\nimport { VariableScope } from \"../enum\";\r\n\r\n\r\n\r\nexport class VE_ExpressionParsing {\r\n\r\n  private static _bracketPair: { [key: string]: string } = {};\r\n\r\n  private static _scope: Scope;\r\n  private static _tokenizer: Tokenizer;\r\n\r\n  public static errors: ParseError[] = [];\r\n\r\n  private static _projectName: string = '';\r\n  private static _objectID: string = '';\r\n  private static _fsmID = '';\r\n\r\n  private static _varScope: VariableScope = VariableScope.Local;\r\n\r\n\r\n  public static init(): void {\r\n    this._bracketPair['('] = ')';\r\n    this._bracketPair['['] = ']';\r\n    this._bracketPair['{'] = '}';\r\n    this._bracketPair[''] = '';\r\n    this._bracketPair[''] = '';\r\n  }\r\n\r\n  public static parsing(name_id: string, input_exp: string, scope: Scope, project_name: string, object_id: string, fsm_id: string, var_scope: VariableScope): IExpression {\r\n    this._scope = scope;\r\n    this._projectName = project_name;\r\n    this._objectID = object_id;\r\n    this._fsmID = fsm_id;\r\n    this._varScope = var_scope;\r\n    console.log(input_exp);\r\n    this._tokenizer = new Tokenizer(input_exp);\r\n    this.errors = [];\r\n    return this.parse();\r\n  }\r\n\r\n  private static parse(): IExpression {\r\n    let resultExp: IExpression = this.buildExpression();\r\n    if (!this._tokenizer.current().isEnd()) {\r\n      this._tokenizer.addError(this._tokenizer.current(), `${this._tokenizer.current().getSource()}`);\r\n      this._tokenizer.consume();\r\n    }\r\n    this.errors = this._tokenizer.getProblemCollector();\r\n    return resultExp;\r\n  }\r\n\r\n\r\n  private static buildExpression(): IExpression {\r\n    let left: IExpression = this.relationalExp();\r\n    if (this._tokenizer.current().isOperator('&&')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.buildExpression();\r\n      return this.reOrder(left, right, BinaryOperator.Add);\r\n    }\r\n    if (this._tokenizer.current().isOperator('||')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.buildExpression();\r\n      return this.reOrder(left, right, BinaryOperator.Or);\r\n    }\r\n    return left;\r\n  }\r\n\r\n\r\n  private static relationalExp(): IExpression {\r\n    let left: IExpression = this.algebraExp();\r\n    if (this._tokenizer.current().isOperator('<')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.LT);\r\n    }\r\n    if (this._tokenizer.current().isOperator('<=')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.LT_EQ);\r\n    }\r\n    if (this._tokenizer.current().isOperator('==')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.EQ);\r\n    }\r\n    if (this._tokenizer.current().isOperator('>=')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.GT_EQ);\r\n    }\r\n    if (this._tokenizer.current().isOperator('>')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.GT);\r\n    }\r\n    if (this._tokenizer.current().isOperator('!=')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.NEQ);\r\n    }\r\n    return left;\r\n  }\r\n\r\n  private static algebraExp(): IExpression {\r\n    let left: IExpression = this.productExp();\r\n    if (this._tokenizer.current().isOperator('+')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.algebraExp();\r\n      return this.reOrder(left, right, BinaryOperator.Add);\r\n    }\r\n    if (this._tokenizer.current().isOperator('-')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.algebraExp();\r\n      return this.reOrder(left, right, BinaryOperator.Subtract);\r\n    }\r\n    return left;\r\n  }\r\n\r\n  private static productExp(): IExpression {\r\n    let left: IExpression = this.exponentExp();\r\n    if (this._tokenizer.current().isOperator('*')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.productExp();\r\n      return this.reOrder(left, right, BinaryOperator.Multiply);\r\n    }\r\n    if (this._tokenizer.current().isOperator('/')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.productExp();\r\n      return this.reOrder(left, right, BinaryOperator.Divide);\r\n    }\r\n    if (this._tokenizer.current().isOperator('%')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.productExp();\r\n      return this.reOrder(left, right, BinaryOperator.Modulo);\r\n    }\r\n    return left;\r\n  }\r\n\r\n  private static exponentExp(): IExpression {\r\n    let left: IExpression = this.atomExp();\r\n    if (this._tokenizer.current().isOperator('!') || this._tokenizer.current().isOperator('')) {\r\n      left = new BinaryExpression(left, left, BinaryOperator.Not);\r\n    }\r\n    return left;\r\n  }\r\n\r\n  private static atomExp(): IExpression {\r\n    // -\r\n    if (this._tokenizer.current().isOperator('-')) {\r\n      this._tokenizer.consume();\r\n      let result: BinaryExpression = new BinaryExpression(new ConstantExpression(0, 'number'), this.atomExp(), BinaryOperator.Subtract);\r\n      result.setSeal();\r\n      return result;\r\n    }\r\n    // \r\n    if (this._tokenizer.current().isOperator('!') && (this._tokenizer.next().isIdentifier() || this._tokenizer.next().isKeyword() || this._tokenizer.next().isStartBracket())) {\r\n      this._tokenizer.consume();\r\n      let newValue: IExpression = this.atomExp();\r\n      if (newValue.expType === 'bool') {\r\n        let notExp: BinaryExpression = new BinaryExpression(newValue, newValue, BinaryOperator.Not);\r\n        return notExp;\r\n      } else {\r\n        this._tokenizer.addError(this._tokenizer.current(), '(!)bool');\r\n        return ConstantExpression.Empty();\r\n      }\r\n    }\r\n    // +\r\n    if (this._tokenizer.current().isOperator('+') && this._tokenizer.next().isStartBracket()) {\r\n      this._tokenizer.consume();\r\n    }\r\n    // +\r\n    if (this._tokenizer.current().isOperator('+') && this._tokenizer.next().isConstant()) {\r\n      this._tokenizer.consume();\r\n    }\r\n    // +\r\n    if (this._tokenizer.current().isOperator('+') && this._tokenizer.next().isIdentifier()) {\r\n      this._tokenizer.consume();\r\n    }\r\n    // TODOVeryVar\r\n\r\n    // \r\n    if (this._tokenizer.current().isStartBracket()) {\r\n      let endBracket: string = this._bracketPair[this._tokenizer.consume().getTrigger()];\r\n      let result: IExpression = this.buildExpression();\r\n      if (result.className === 'BinaryExpression') {\r\n        (<BinaryExpression>result).setSeal();\r\n      }\r\n      this.expectTrigger(ExpressionType.OPERATOR, endBracket); // \r\n      return result;\r\n    }\r\n    // \r\n    if (this._tokenizer.current().isConstant()) {\r\n      let value: any;\r\n      let typeStr: string = 'string';\r\n      if (this._tokenizer.current().isBool()) {\r\n        value = this._tokenizer.current().getContents().toLowerCase() === 'true' ? true : false;\r\n        typeStr = 'bool';\r\n      } else if (this._tokenizer.current().isNumber()) {\r\n        value = parseFloat(this._tokenizer.current().getContents());\r\n        typeStr = 'number';\r\n      } else {\r\n        value = this._tokenizer.current().getContents();\r\n        typeStr = 'string';\r\n      }\r\n      let constantExp: IExpression = new ConstantExpression(value, typeStr);\r\n      return constantExp;\r\n    }\r\n    // \r\n    if (this._tokenizer.current().isIdentifier()) {\r\n      if (this._tokenizer.next().isStartBracket()) { // \r\n        // \r\n        let endStart: string = this._bracketPair[this._tokenizer.next().getTrigger()];\r\n        return this.functionCall(endStart);\r\n      } else { // \r\n        // VryVar\r\n        let varValue: Variable | null;\r\n        let loc: IPosition = this._tokenizer.current();\r\n        let variableID: string = this._tokenizer.consume().getContents();\r\n        if (this._tokenizer.current().isOperator('*') && this._tokenizer.next().isIdentifier()) { // .*\r\n          // TODOVeryVar\r\n          console.log('TODOVeryVar');\r\n          return ConstantExpression.Empty();\r\n        } else {\r\n          // \r\n          varValue = this._scope.find(variableID);\r\n          console.log(variableID + '  ---  ' + varValue);\r\n          if (varValue === null) {\r\n            this._tokenizer.addError(loc, `${variableID}`);\r\n            return ConstantExpression.Empty();\r\n          } else {\r\n            return new VariableExpression(varValue);\r\n          }\r\n        }\r\n\r\n      }\r\n    }\r\n    // \r\n    if (this._tokenizer.current().isKeyword()) {\r\n      // this\r\n      // TODO: \r\n      return ConstantExpression.Empty();\r\n    }\r\n\r\n    // \r\n    if (this._tokenizer.current().isSpecialIdentifier()) {\r\n      this._tokenizer.addError(this._tokenizer.current(), `ID${this._tokenizer.current().getSource()}`);\r\n      this._tokenizer.consume();\r\n      return ConstantExpression.Empty();\r\n    }\r\n\r\n    // \r\n    this._tokenizer.addError(this._tokenizer.current(), `${this._tokenizer.current().getSource()}`);\r\n    this._tokenizer.consume();\r\n\r\n    return ConstantExpression.Empty();\r\n  }\r\n\r\n  private static reOrder(left: IExpression, right: IExpression, op: BinaryOperator): IExpression {\r\n    if (right.className === 'BinaryExpression') {\r\n      let rightOp: BinaryExpression = <BinaryExpression>right;\r\n      if (!rightOp.isSealed() && rightOp.getPriority() === rightOp.getPriorityOp(op)) {\r\n        this.replaceLeft(rightOp, left, op);\r\n        return right;\r\n      }\r\n    }\r\n    return new BinaryExpression(left, right, op);\r\n  }\r\n\r\n  private static replaceLeft(target: BinaryExpression, newLeft: IExpression, op: BinaryOperator): void {\r\n    if (target.getLeftExp().className === 'BinaryExpression') {\r\n      let leftOp: BinaryExpression = <BinaryExpression>target.getLeftExp();\r\n      if (!leftOp.isSealed() && leftOp.getPriority() === leftOp.getPriorityOp(op)) {\r\n        this.replaceLeft(leftOp, newLeft, op);\r\n        return;\r\n      }\r\n    }\r\n    target.setLeftExp(new BinaryExpression(newLeft, target.getLeftExp(), op));\r\n  }\r\n\r\n  private static functionCall(end_bracket: string): IExpression {\r\n    let call: FunctionExpression = new FunctionExpression();\r\n    let funcToken: Token = this._tokenizer.consume();\r\n    if (!CustomFunctions.hasFunction(funcToken.getContents())) {\r\n      this._tokenizer.addError(funcToken, `${funcToken.getContents()}`);\r\n      return ConstantExpression.Empty();\r\n    }\r\n    let fun: IFunction = CustomFunctions.createFunction(funcToken.getContents());\r\n    call.setFunction(fun);\r\n    this._tokenizer.consume(); // \r\n    while (!this._tokenizer.current().isOperator(end_bracket) && !this._tokenizer.current().isEnd()) {\r\n      if (call.paraCount() !== 0) {\r\n        this.expectTrigger(ExpressionType.OPERATOR, ',');\r\n      }\r\n      call.addPara(this.buildExpression());\r\n    }\r\n    this.expectTrigger(ExpressionType.OPERATOR, end_bracket);\r\n    call.evaluate();\r\n    if (call.paraCount() > fun.parameterNumber() && fun.parameterNumber() >= 0) {\r\n      this._tokenizer.addError(funcToken, `${funcToken.getContents()}Max${fun.parameterNumber()}${call.paraCount()}`);\r\n      return ConstantExpression.Empty();\r\n    }\r\n    return call;\r\n  }\r\n\r\n  private static expectTrigger(type: ExpressionType, trigger: string): void {\r\n    if (this._tokenizer.current().matches(type, trigger)) {\r\n      this._tokenizer.consume();\r\n    } else {\r\n      this._tokenizer.addError(this._tokenizer.current(), `${trigger}${this._tokenizer.current().getTrigger()}`);\r\n    }\r\n  }\r\n\r\n  public static getProjectCollector(): ParseError[] {\r\n    return this._tokenizer.getProblemCollector();\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\n\r\nVE_ExpressionParsing.init();","/////<reference path=\"dictionary.ts\" />\r\nimport { Dictionary } from \"../utility/dictionary\";\r\n\r\nexport interface IExpression {\r\n  expType: string;\r\n  className: string;\r\n  evaluate(): any;\r\n  clone(): IExpression;\r\n}\r\n\r\nexport class TrueExpression implements IExpression {\r\n  public get expType(): string {\r\n    return 'bool';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'TrueExpression';\r\n  }\r\n\r\n  public get value(): boolean {\r\n    return true;\r\n  }\r\n\r\n  constructor() {\r\n  }\r\n\r\n  public evaluate(): any {\r\n    return true;\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let exp: TrueExpression = new TrueExpression();\r\n    return exp;\r\n  }\r\n}\r\n\r\nexport class ConstantExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    return this._expType;\r\n  }\r\n  private _expType: string = 'string';\r\n\r\n  public get className(): string {\r\n    return 'ConstantExpression';\r\n  }\r\n\r\n  private _value: any;\r\n\r\n  constructor(value: any, type: string) {\r\n    this._value = value;\r\n    this._expType = type;\r\n  }\r\n\r\n  public evaluate(): any {\r\n    return this._value;\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let expClone: ConstantExpression = new ConstantExpression(this._value, this._expType);\r\n    return expClone;\r\n  }\r\n\r\n  public static Empty(): ConstantExpression {\r\n    return new ConstantExpression(null, 'string');\r\n  }\r\n\r\n  public isEmpty(): boolean {\r\n    if (this._expType === 'string' && this._value === null) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public toString(): string {\r\n    if (this._value !== null) {\r\n      return this._value.toString();\r\n    } else {\r\n      return 'null';\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport enum BinaryOperator {\r\n  Add, Subtract, Multiply, Divide, Modulo, Power, LT, LT_EQ, EQ, GT_EQ, GT, NEQ, And, Or, Not\r\n}\r\n\r\nexport class BinaryExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    return this._expType;\r\n  }\r\n  private _expType = '';\r\n\r\n  public get className(): string {\r\n    return 'BinaryExpression';\r\n  }\r\n\r\n  private _op: BinaryOperator = BinaryOperator.EQ;\r\n\r\n  private _left: IExpression;\r\n  private _right: IExpression;\r\n  private _isSealed: boolean = false;\r\n\r\n  private static _opDic: { [key: string]: BinaryOperator } = {};\r\n\r\n  private static _priority: Dictionary<BinaryOperator, number> = new Dictionary<BinaryOperator, number>();\r\n\r\n  // private static _priorityKey: BinaryOperator[] = [BinaryOperator.Not, BinaryOperator.Power, BinaryOperator.Multiply, BinaryOperator.Divide, BinaryOperator.Modulo, BinaryOperator.Add, BinaryOperator.Subtract, BinaryOperator.LT, BinaryOperator.LT_EQ, BinaryOperator.EQ, BinaryOperator.GT_EQ, BinaryOperator.GT, BinaryOperator.NEQ, BinaryOperator.And, BinaryOperator.Or];\r\n\r\n  // private static _priorityValue: number[] = [2, 3, 4, 4, 4, 5, 5, 6, 6, 6, 6, 6, 6, 7, 7];\r\n\r\n  public static init(): void {\r\n    this._opDic[\"+\"] = BinaryOperator.Add;\r\n    this._opDic[\"-\"] = BinaryOperator.Subtract;\r\n    this._opDic[\"*\"] = BinaryOperator.Multiply;\r\n    this._opDic[\"/\"] = BinaryOperator.Divide;\r\n    this._opDic[\"%\"] = BinaryOperator.Modulo;\r\n    this._opDic[\"**\"] = BinaryOperator.Power;\r\n    this._opDic[\"^\"] = BinaryOperator.Power;\r\n    this._opDic[\"<\"] = BinaryOperator.LT;\r\n    this._opDic[\"<=\"] = BinaryOperator.LT_EQ;\r\n    this._opDic[\"==\"] = BinaryOperator.EQ;\r\n    this._opDic[\">=\"] = BinaryOperator.GT_EQ;\r\n    this._opDic[\">\"] = BinaryOperator.GT;\r\n    this._opDic[\"!=\"] = BinaryOperator.NEQ;\r\n    this._opDic[\"&&\"] = BinaryOperator.And;\r\n    this._opDic[\"||\"] = BinaryOperator.Or;\r\n    this._opDic[\"!\"] = BinaryOperator.Not;\r\n    this._opDic[\"\"] = BinaryOperator.Not;\r\n\r\n    this._priority.Add(BinaryOperator.Not, 2);\r\n    this._priority.Add(BinaryOperator.Power, 3);\r\n    this._priority.Add(BinaryOperator.Multiply, 4); this._priority.Add(BinaryOperator.Divide, 4); this._priority.Add(BinaryOperator.Modulo, 4);\r\n    this._priority.Add(BinaryOperator.Add, 5); this._priority.Add(BinaryOperator.Subtract, 5);\r\n    this._priority.Add(BinaryOperator.LT, 6); this._priority.Add(BinaryOperator.LT_EQ, 6); this._priority.Add(BinaryOperator.EQ, 6); this._priority.Add(BinaryOperator.GT_EQ, 6); this._priority.Add(BinaryOperator.GT, 6); this._priority.Add(BinaryOperator.NEQ, 6);\r\n    this._priority.Add(BinaryOperator.And, 7); this._priority.Add(BinaryOperator.Or, 7);\r\n  }\r\n\r\n  constructor(left_exp: IExpression, right_exp: IExpression, op: BinaryOperator) {\r\n    this._left = left_exp;\r\n    this._right = right_exp;\r\n    this._op = op;\r\n    console.log(this._left);\r\n    console.log(this._right);\r\n    this._expType = this.resultAutoType(left_exp, right_exp, op);\r\n    if (this._expType === 'null') {\r\n      console.log(\"\" + left_exp.expType + \"\" + right_exp.expType + \"\" + op.toString());\r\n    }\r\n  }\r\n\r\n  private resultAutoType(left: IExpression, right: IExpression, op: BinaryOperator): string {\r\n    if (op === BinaryOperator.Add) {\r\n      if (left.expType === 'string' || right.expType === 'string') {\r\n        return 'string';\r\n      }\r\n      else if (left.expType === 'bool' || right.expType === 'bool') {\r\n        return 'null';\r\n      }\r\n      else if (left.expType === 'number' || right.expType === 'number') {\r\n        return 'number';\r\n      }\r\n      else if (left.expType === 'vector3' || right.expType === 'vector3') {\r\n        return 'vector3';\r\n      }\r\n      else if (left.expType === 'vector2' || right.expType === 'vector2') {\r\n        return 'vector2';\r\n      }\r\n      else {\r\n        return 'null';\r\n      }\r\n    } else if (op === BinaryOperator.Divide || op === BinaryOperator.Multiply || op === BinaryOperator.Modulo || op === BinaryOperator.Power || op === BinaryOperator.Subtract) {\r\n      if (left.expType === 'string' || right.expType === 'string' || left.expType === 'bool' || left.expType === 'bool') {\r\n        return 'null';\r\n      }\r\n      else if (left.expType === 'vector3' && right.expType === 'vector3' && op === BinaryOperator.Subtract) {\r\n        return 'vector3';\r\n      }\r\n      else if (left.expType === 'vector2' && right.expType === 'vector2' && op === BinaryOperator.Subtract) {\r\n        return 'vector2';\r\n      }\r\n      else if ((left.expType === 'number' && right.expType === 'vector3' && op === BinaryOperator.Multiply) || (left.expType === 'vector3' && right.expType === 'number' && op == BinaryOperator.Multiply)) {\r\n        return 'vector3';\r\n      }\r\n      else if ((left.expType === 'number' && right.expType === 'vector2' && op === BinaryOperator.Multiply) || (left.expType === 'vector2' && right.expType === 'number' && op == BinaryOperator.Multiply)) {\r\n        return 'vector2';\r\n      }\r\n      else if (left.expType === 'vector3' && right.expType === 'number' && op === BinaryOperator.Divide) {\r\n        return 'vector3';\r\n      }\r\n      else if (left.expType === 'vector2' && right.expType === 'number' && op === BinaryOperator.Divide) {\r\n        return 'vector2';\r\n      }\r\n      else if (left.expType === 'number' || right.expType === 'number') {\r\n        return 'number';\r\n      }\r\n      else {\r\n        return 'null';\r\n      }\r\n    } else if (op === BinaryOperator.LT || op === BinaryOperator.LT_EQ || op === BinaryOperator.GT_EQ || op === BinaryOperator.GT) {\r\n      if (left.expType === 'string' || right.expType === 'string' || left.expType === 'bool' || right.expType === 'bool') {\r\n        return 'null';\r\n      } else {\r\n        return 'bool';\r\n      }\r\n    } else if (op === BinaryOperator.NEQ || op === BinaryOperator.EQ) {\r\n      if (right.expType !== left.expType) {\r\n        return 'null';\r\n      } else {\r\n        return 'bool';\r\n      }\r\n    } else if (op === BinaryOperator.Not) {\r\n      if (right.expType !== 'bool') {\r\n        return 'null';\r\n      } else {\r\n        return 'bool';\r\n      }\r\n    } else {\r\n      return 'string';\r\n    }\r\n  }\r\n\r\n  public setLeftExp(left_exp: IExpression): void {\r\n    this._left = left_exp;\r\n  }\r\n\r\n  public setRightExp(right_exp: IExpression): void {\r\n    this._right = right_exp;\r\n  }\r\n\r\n  public getOp(): BinaryOperator {\r\n    return this._op;\r\n  }\r\n\r\n  public getLeftExp(): IExpression {\r\n    return this._left;\r\n  }\r\n\r\n  public getRightExp(): IExpression {\r\n    return this._right;\r\n  }\r\n\r\n  public isSealed(): boolean {\r\n    return this._isSealed;\r\n  }\r\n\r\n  public setSeal(): void {\r\n    this._isSealed = true;\r\n  }\r\n\r\n  public toString(): string {\r\n    return \"( \" + this._left.toString() + \" \" + this._op.toString() + \" \" + this._right.toString() + \" )\";\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let expClone: BinaryExpression = new BinaryExpression(this._left.clone(), this._right.clone(), this._op);\r\n    return expClone;\r\n  }\r\n\r\n  public evaluate(): any {\r\n    if (this._expType === 'null') {\r\n      return null;\r\n    }\r\n    if (this._left.className === 'FunctionExpression') {\r\n      this._left.evaluate();\r\n    }\r\n    if (this._right.className === 'FunctionExpression') {\r\n      this._right.evaluate();\r\n    }\r\n    this._expType = this.resultAutoType(this._left, this._right, this._op);\r\n    let leftValue: any = this._left.evaluate();\r\n    let rightValue: any = this._right.evaluate();\r\n    if (leftValue === null || rightValue === null) {\r\n      return null;\r\n    }\r\n    if (this._op === BinaryOperator.Add) {\r\n      if (this._expType === 'string') {\r\n        return leftValue.toString() + rightValue.toString();\r\n      } else if (this._expType === 'number') {\r\n        return leftValue + rightValue;\r\n      } else if (this._expType === 'vector3') {\r\n        return (<BABYLON.Vector3>leftValue).add((<BABYLON.Vector3>rightValue));\r\n      } else if (this._expType === 'vector2') {\r\n        return (<BABYLON.Vector2>leftValue).add((<BABYLON.Vector2>rightValue));\r\n      } else {\r\n        return null;\r\n      }\r\n    } else if (this._op === BinaryOperator.Subtract) {\r\n      if (this._expType === 'number') {\r\n        return leftValue - rightValue;\r\n      } else if (this._expType === 'vector3') {\r\n        return (<BABYLON.Vector3>leftValue).subtract((<BABYLON.Vector3>rightValue));\r\n      } else if (this._expType === 'vector2') {\r\n        return (<BABYLON.Vector2>leftValue).subtract((<BABYLON.Vector2>rightValue));\r\n      } else {\r\n        return null;\r\n      }\r\n    } else if (this._op === BinaryOperator.Multiply) {\r\n      if (this._expType === 'number') {\r\n        return leftValue * rightValue;\r\n      } else if (this._expType === 'vector3') {\r\n        if (typeof (leftValue) === 'number') {\r\n          return (<BABYLON.Vector3>rightValue).multiplyByFloats(leftValue, leftValue, leftValue);\r\n        } else if (typeof (rightValue) === 'number') {\r\n          return (<BABYLON.Vector3>leftValue).multiplyByFloats(rightValue, rightValue, rightValue);\r\n        } else {\r\n          return null;\r\n        }\r\n      } else if (this._expType === 'vector2') {\r\n        if (typeof (leftValue) === 'number') {\r\n          return (<BABYLON.Vector2>rightValue).multiplyByFloats(leftValue, leftValue);\r\n        } else if (typeof (rightValue) === 'number') {\r\n          return (<BABYLON.Vector2>leftValue).multiplyByFloats(rightValue, rightValue);\r\n        } else {\r\n          return null;\r\n        }\r\n      }\r\n    } else if (this._op === BinaryOperator.Divide) {\r\n      if (this._expType === 'number') {\r\n        return leftValue / rightValue;\r\n      } else if (this._expType === 'vector3') {\r\n        if (typeof (rightValue) === 'number') {\r\n          return new BABYLON.Vector3((<BABYLON.Vector3>leftValue).x / rightValue, (<BABYLON.Vector3>leftValue).y / rightValue, (<BABYLON.Vector3>leftValue).z / rightValue);\r\n        } else {\r\n          return null;\r\n        }\r\n      } else if (this._expType === 'vector2') {\r\n        if (typeof (rightValue) === 'number') {\r\n          return new BABYLON.Vector2((<BABYLON.Vector2>leftValue).x / rightValue, (<BABYLON.Vector2>leftValue).y / rightValue);\r\n        } else {\r\n          return null;\r\n        }\r\n      }\r\n    } else if (this._op === BinaryOperator.Modulo) {\r\n      if (typeof (leftValue) === 'number' && typeof (rightValue) === 'number') {\r\n        return leftValue % rightValue;\r\n      } else {\r\n        return null;\r\n      }\r\n    } else if (this._op === BinaryOperator.Power) {\r\n      if (typeof (leftValue) === 'number' && typeof (rightValue) === 'number') {\r\n        return Math.pow(leftValue, rightValue);\r\n      } else {\r\n        return null;\r\n      }\r\n    } else if (this._op === BinaryOperator.And) {\r\n      let l: boolean = this.getBoolean(leftValue);\r\n      let r: boolean = this.getBoolean(rightValue);\r\n      return l && r;\r\n    } else if (this._op === BinaryOperator.Or) {\r\n      let l: boolean = this.getBoolean(leftValue);\r\n      let r: boolean = this.getBoolean(rightValue);\r\n      return l || r;\r\n    } else if (this._op === BinaryOperator.LT) {\r\n      return leftValue < rightValue;\r\n    } else if (this._op === BinaryOperator.LT_EQ) {\r\n      return leftValue <= rightValue;\r\n    } else if (this._op === BinaryOperator.GT_EQ) {\r\n      return leftValue >= rightValue;\r\n    } else if (this._op === BinaryOperator.GT) {\r\n      return leftValue > rightValue;\r\n    } else if (this._op === BinaryOperator.EQ) {\r\n      return leftValue === rightValue;\r\n    } else if (this._op === BinaryOperator.NEQ) {\r\n      return leftValue !== rightValue;\r\n    } else if (this._op === BinaryOperator.Not) {\r\n      return !this.getBoolean(rightValue);\r\n    } else {\r\n      return !this.getBoolean(leftValue);\r\n    }\r\n  }\r\n\r\n  private getBoolean(value: any): boolean {\r\n    if (typeof (value) === 'number') {\r\n      if (value === 0) {\r\n        return false;\r\n      } else {\r\n        return true;\r\n      }\r\n    } else if (typeof (value) === 'string') {\r\n      if (value === '') {\r\n        return false;\r\n      } else {\r\n        return true;\r\n      }\r\n    } else if (typeof (value) === 'boolean') {\r\n      return value;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getPriority(): number {\r\n    // let p: number = BinaryExpression._priorityKey.indexOf(this._op);\r\n    // if(p > -1) {\r\n    //   return BinaryExpression._priorityValue[p];\r\n    // } else {\r\n    //   return 100;\r\n    // }\r\n    let p: number | null = BinaryExpression._priority.GetValue(this._op);\r\n    if(p === null) {\r\n      return 100;\r\n    } else {\r\n      return p;\r\n    }\r\n  }\r\n\r\n  public getPriorityOp(op: BinaryOperator): number {\r\n    // let p: number = BinaryExpression._priorityKey.indexOf(op);\r\n    // if(p > -1) {\r\n    //   return BinaryExpression._priorityValue[p];\r\n    // } else {\r\n    //   return 100;\r\n    // }\r\n    let p: number | null = BinaryExpression._priority.GetValue(op);\r\n    if(p === null) {\r\n      return 100;\r\n    } else {\r\n      return p;\r\n    }\r\n  }\r\n}\r\n\r\n\r\nBinaryExpression.init();","import { ParseError } from \"./positions\";\r\n\r\nexport abstract class ForwardQuery<T> {\r\n\r\n  protected itemBuffer: Array<T> = [];\r\n\r\n  protected endReached: boolean = false;\r\n\r\n  protected problemCollector: Array<ParseError> = [];\r\n\r\n  protected endOfInputIndicator: T | undefined = undefined;\r\n\r\n  public next(): T {\r\n    return this.nextOffset(1);\r\n  }\r\n\r\n  public nextOffset(offset: number): T {\r\n    while (this.itemBuffer.length <= offset && !this.endReached) {\r\n      let item: T | undefined = this.fetch();\r\n      if (item !== undefined) {\r\n        this.itemBuffer.push(item);\r\n      } else {\r\n        this.endReached = true;\r\n      }\r\n    }\r\n    if (offset >= this.itemBuffer.length) {\r\n      if (this.endOfInputIndicator === undefined) {\r\n        this.endOfInputIndicator = this.endOfInput();\r\n      }\r\n      return this.endOfInputIndicator;\r\n    } else {\r\n      return this.itemBuffer[offset];\r\n    }\r\n  }\r\n\r\n  public current(): T {\r\n    return this.nextOffset(0);\r\n  }\r\n\r\n  protected abstract endOfInput(): T;\r\n\r\n  protected abstract fetch(): T | undefined;\r\n\r\n  public consume(): T {\r\n    let result: T = this.current();\r\n    this.consumeNext(1);\r\n    return result;\r\n  }\r\n\r\n  public consumeNext(numberOfItems: number): void {\r\n    if (numberOfItems < 0) {\r\n      return;\r\n    }\r\n    while (numberOfItems-- > 0) {\r\n      if (this.itemBuffer.length !== 0) {\r\n        this.itemBuffer.shift();\r\n      } else {\r\n        if (this.endReached) {\r\n          return;\r\n        } else {\r\n          let item: T | undefined = this.fetch();\r\n          if (item === undefined) {\r\n            this.endReached = true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public getProblemCollector(): Array<ParseError> {\r\n    return this.problemCollector;\r\n  }\r\n\r\n  public setProblemCollector(problemCollector: Array<ParseError>): void {\r\n    this.problemCollector = problemCollector;\r\n  }\r\n\r\n\r\n}","import { IExpression } from \"./expressions\";\r\nimport { IFunction } from \"./functions\";\r\n\r\nexport class FunctionExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    return this._expType;\r\n  }\r\n  private _expType = '';\r\n\r\n  public get className(): string {\r\n    return 'FunctionExpression';\r\n  }\r\n\r\n  private _function!: IFunction;\r\n  private _paras: IExpression[] = [];\r\n\r\n  public setFunction(func: IFunction): void {\r\n    this._function = func;\r\n  }\r\n\r\n  public addPara(exp: IExpression): void {\r\n    this._paras.push(exp);\r\n  }\r\n\r\n  public paraCount(): number {\r\n    return this._paras.length;\r\n  }\r\n\r\n  public evaluate(): any {\r\n    let r: any = null;\r\n    try {\r\n      r = this._function.evaluate(this._paras);\r\n    } catch (e) {\r\n      console.log('' + e);\r\n      return null;\r\n    }\r\n    return r;\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let expClone: FunctionExpression = new FunctionExpression();\r\n    expClone._function = this._function;\r\n    for (let i: number = 0; i < this._paras.length; i++) {\r\n      expClone._paras.push(this._paras[i].clone());\r\n    }\r\n    return expClone;\r\n  }\r\n\r\n  public toString(): string {\r\n    let printStr: string = this._function.className + '( ';\r\n    for(let i: number = 0; i < this._paras.length; i++) {\r\n      if(i > 0) {\r\n        printStr += ', ' + this._paras[i].className;\r\n      } else {\r\n        printStr += this._paras[i].className;\r\n      }\r\n    }\r\n    return printStr + ' )';\r\n  }\r\n\r\n}","import { IExpression } from \"./expressions\";\r\nimport { ShowError } from \"../html\";\r\n\r\nexport interface IFunction {\r\n  expType: string;\r\n  className: string;\r\n  parameterNumber(): number;\r\n  evaluate(args: Array<IExpression>): any;\r\n}\r\n\r\nexport class Pow implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'pow';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 2;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.pow(args[0].evaluate(), args[1].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Pow1${args[0].expType}1${args[0].evaluate()}2${args[1].expType}2${args[1].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Ln implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'ln';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.log(args[0].evaluate());\r\n    if (value === NaN || value === Infinity) {\r\n      ShowError.showError(`Ln${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Lg implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'lg';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.log10(args[0].evaluate());\r\n    if (value === NaN || value === Infinity) {\r\n      ShowError.showError(`Lg${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Sqrt implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'sqrt';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.sqrt(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Sqrt${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Abs implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'abs';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.abs(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Abs${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Random implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'random';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 2;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let distance: number = args[1].evaluate() - args[0].evaluate();\r\n    let value: number = Math.random() * distance;\r\n    if (value === NaN) {\r\n      ShowError.showError(`Random1${args[0].expType}1${args[0].evaluate()}2${args[1].expType}2${args[1].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Round implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'round';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.round(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Round${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Sin implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'sin';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.sin(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Sin${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class ASin implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'asin';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.asin(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`ASin${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Cos implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'cos';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.cos(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Cos${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class ACos implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'acos';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.acos(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`ACos${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Tan implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'tan';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.tan(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Tan${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class ATan implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'atan';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.atan(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`ATan${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\n\r\nexport class CustomFunctions {\r\n  private static _functions: {[key:string]: IFunction} = {};\r\n\r\n  public static hasFunction(func_name: string): boolean {\r\n    func_name = func_name.toLowerCase();\r\n    if(this._functions[func_name]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static addFunction(func: IFunction): void {\r\n    let funcName: string = func.className.toLowerCase();\r\n    if(this._functions[funcName]) {\r\n      ShowError.showError(`IDID${funcName}ID`);\r\n    } else {\r\n      this._functions[funcName] = func;\r\n    }\r\n  }\r\n\r\n  public static createFunction(func_name: string): IFunction {\r\n    func_name = func_name.toLowerCase();\r\n    return Object.create(this._functions[func_name]);\r\n  }\r\n\r\n  public static remove(func_name: string): void {\r\n    func_name = func_name.toLowerCase();\r\n    delete this._functions[func_name];\r\n  }\r\n}\r\n\r\n\r\nCustomFunctions.addFunction(new Pow());\r\nCustomFunctions.addFunction(new Ln());\r\nCustomFunctions.addFunction(new Lg());\r\nCustomFunctions.addFunction(new Sqrt());\r\nCustomFunctions.addFunction(new Abs());\r\nCustomFunctions.addFunction(new Random());\r\nCustomFunctions.addFunction(new Round());\r\nCustomFunctions.addFunction(new Sin());\r\nCustomFunctions.addFunction(new ASin());\r\nCustomFunctions.addFunction(new Cos());\r\nCustomFunctions.addFunction(new ACos());\r\nCustomFunctions.addFunction(new Tan());\r\nCustomFunctions.addFunction(new ATan());\r\n\r\n","export * from './expressionEnum';\r\nexport * from './expressions';\r\nexport * from './functions';\r\nexport * from './positions';\r\nexport * from './expChar';\r\nexport * from './token';\r\nexport * from './forwardQuery';\r\nexport * from './tokenizer';\r\nexport * from './tokenReader';\r\nexport * from './variable';\r\nexport * from './variableExpression';\r\nexport * from './scope';\r\nexport * from './functionExpression';\r\nexport * from './expressionParsing';\r\nexport * from './expManager';","export interface IPosition {\r\n  getLine(): number;\r\n  getPos(): number;\r\n}\r\n\r\n\r\nexport class NameLocation implements IPosition {\r\n\r\n  private _value: string = '';\r\n  private _line: number = 0;\r\n  private _pos: number = 0;\r\n\r\n\r\n  constructor(value: string) {\r\n    this._value = value;\r\n    this._line = 1;\r\n    this._pos = 1;\r\n  }\r\n\r\n\r\n  public getValue(): string {\r\n    return this._value;\r\n  }\r\n\r\n  public getLine(): number {\r\n    return this._line;\r\n  }  \r\n  \r\n  \r\n  public getPos(): number {\r\n    return this._pos;\r\n  }\r\n}\r\n\r\nexport enum Severity{\r\n  Warning,\r\n  Error\r\n}\r\n\r\nexport class ParseError{\r\n\r\n  private _pos: IPosition;\r\n  private _message: string;\r\n  private _severity: Severity;\r\n\r\n  constructor(pos: IPosition, msg: string, severity: Severity) {\r\n    this._pos = pos;\r\n    this._message = msg;\r\n    this._severity = severity;\r\n  }\r\n\r\n  public static Warning(pos: IPosition, msg: string): ParseError {\r\n    let message: string = msg;\r\n    if(pos.getLine() > 0) {\r\n      message = `>>>${pos.getLine()}${pos.getPos()}${msg}`;\r\n    }\r\n    return new ParseError(pos, message, Severity.Warning);\r\n  }\r\n\r\n  public static Error(pos: IPosition, msg: string): ParseError {\r\n    let message: string = msg;\r\n    if(pos.getLine() > 0) {\r\n      message = `>>>${pos.getLine()}${pos.getPos()}${msg}`;\r\n    }\r\n    return new ParseError(pos, message, Severity.Error);\r\n  }\r\n\r\n  public getPosition(): IPosition {\r\n    return this._pos;\r\n  }\r\n\r\n  public getMessage(): string {\r\n    return this._message;\r\n  }\r\n\r\n  public getSeverity(): Severity {\r\n    return this._severity;\r\n  }\r\n\r\n  public toString(): string {\r\n    return `${this._severity.toString()}${this._message}`;\r\n  }\r\n\r\n}","import { Variable } from \"./variable\";\r\n\r\nexport class Scope {\r\n\r\n  private _parent: Scope | undefined = undefined;\r\n\r\n  private _context: { [key: string]: Variable } = {};\r\n\r\n  private static _root: Scope;\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public static Create(): Scope {\r\n    let result: Scope = new Scope();\r\n    result._parent = Scope.GetRootScope();\r\n    return result;\r\n  }\r\n\r\n  public static GetRootScope(): Scope {\r\n    if (Scope._root === undefined) {\r\n      Scope._root = new Scope();\r\n      Scope._root.setVariable(\"PI\", 'number', Math.PI).makeConstant(Math.PI);\r\n      Scope._root.setVariable(\"EULER\", 'number', Math.E).makeConstant(Math.E);\r\n    }\r\n    return Scope._root;\r\n  }\r\n\r\n  public static CreateWithParent(parent: Scope): Scope {\r\n    let result: Scope = Scope.Create();\r\n    result._parent = parent;\r\n    return result;\r\n  }\r\n\r\n  public find(name: string): Variable | null {\r\n    if (this._context[name]) {\r\n      return this._context[name];\r\n    }\r\n    if (this._parent !== undefined) {\r\n      return this._parent.find(name);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  public setVariable(name: string, type: string, value: any): Variable {\r\n    let result: Variable | null = this.find(name);\r\n    if (result !== null) {\r\n      result.setType(type);\r\n      result.setValue(value);\r\n      return result;\r\n    }\r\n    return this.createVariable(name, type, value);\r\n  }\r\n\r\n  public createVariable(name: string, type: string, value: any): Variable {\r\n    if (this._context[name]) {\r\n      this._context[name].setType(type);\r\n      this._context[name].setValue(value);\r\n      return this._context[name];\r\n    }\r\n    let result: Variable = new Variable(name, type, value);\r\n    this._context[name] = result;\r\n    return result;\r\n  }\r\n\r\n\r\n  public setValue(name: string, value: any): void {\r\n    if (this._context[name]) {\r\n      this._context[name].setValue(value);\r\n    }\r\n  }\r\n\r\n  public isCreated(name: string): boolean {\r\n    if (this._context[name]) {\r\n      return true;\r\n    }\r\n    if (this._parent !== undefined) {\r\n      if (this._parent.find(name) !== null) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public clear(): void {\r\n    this._context = {};\r\n  }\r\n\r\n}","import { IPosition } from \"./positions\";\r\nimport { ExpressionType } from \"./expressionEnum\";\r\nimport { ExpChar } from \"./expChar\";\r\n\r\nexport class Token implements IPosition {\r\n\r\n  public type: ExpressionType = ExpressionType.STRING;\r\n\r\n  private _source: string = '';\r\n  private _contents: string = '';\r\n  private _trigger: string = '';\r\n\r\n  private _line: number = 0;\r\n  private _pos: number = 0;\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public static Create(type: ExpressionType, pos: IPosition): Token {\r\n    let result: Token = new Token();\r\n    result.type = type;\r\n    result._line = pos.getLine();\r\n    result._pos = pos.getPos();\r\n    return result;\r\n  }\r\n\r\n  public static CreateAndFill(type: ExpressionType, ch: ExpChar): Token {\r\n    let result: Token = new Token();\r\n    result.type = type;\r\n    result._line = ch.getLine();\r\n    result._pos = ch.getPos();\r\n    result._contents = ch.getValue();\r\n    result._trigger = ch.getValue();\r\n    result._source = ch.toString();\r\n    return result;\r\n  }\r\n\r\n  public addToTrigger(ch: ExpChar): Token {\r\n    this._trigger += ch.getValue();\r\n    this._source += ch.getValue();\r\n    return this;\r\n  }\r\n\r\n  public addToSource(ch: ExpChar): Token {\r\n    this._source += ch.getValue();\r\n    return this;\r\n  }\r\n\r\n  public addToContentChar(ch: ExpChar): Token {\r\n    this.addToContent(ch.getValue());\r\n    return this;\r\n  }\r\n\r\n  public addToContent(ch: string): Token {\r\n    this._trigger += ch;\r\n    this._source += ch;\r\n    return this;\r\n  }\r\n\r\n  public getTrigger(): string {\r\n    return this._trigger;\r\n  }\r\n\r\n  public getTokenType(): ExpressionType {\r\n    return this.type;\r\n  }\r\n\r\n  public getContents(): string {\r\n    return this._contents;\r\n  }\r\n\r\n  public getSource(): string {\r\n    return this._source;\r\n  }\r\n\r\n  public getLine(): number {\r\n    return this._line;\r\n  }\r\n\r\n  public getPos(): number {\r\n    return this._pos;\r\n  }\r\n\r\n  public setTokenType(new_type: ExpressionType): void {\r\n    this.type = new_type;\r\n  }\r\n\r\n  public setTrigger(trigger: string): void {\r\n    this._trigger = trigger;\r\n  }\r\n\r\n  public setContent(content: string): void {\r\n    this._contents = content;\r\n  }\r\n\r\n  public setSource(source: string): void {\r\n    this._source = source;\r\n  }\r\n\r\n  public isEnd(): boolean {\r\n    return this.type === ExpressionType.EOI;\r\n  }\r\n\r\n  public is(type: ExpressionType): boolean {\r\n    return this.type === type;\r\n  }\r\n\r\n  public matches(type: ExpressionType, trigger: string): boolean {\r\n    if (!this.is(type)) {\r\n      return false;\r\n    }\r\n    if (trigger === '') {\r\n      return false;\r\n    }\r\n    return this.getTrigger() === trigger;\r\n  }\r\n\r\n  public isOperator(symbols: string): boolean {\r\n    if (symbols.length === 0) {\r\n      return this.is(ExpressionType.OPERATOR);\r\n    }\r\n    for (let i: number = 0; i < symbols.length; i++) {\r\n      if (this.matches(ExpressionType.OPERATOR, symbols[i])) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public isStartBracket(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === '(' || this._trigger === '') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isEndBracket(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === ')' || this._trigger === '') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isStartSquareBracket(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === '[' || this._trigger === '') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isEndSquareBracket(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === ']' || this._trigger === '') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isStartBrace(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === '{') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isEndBrace(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === '}') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isKeyword(...keywords: string[]): boolean {\r\n    if (keywords.length === 0) {\r\n      return this.is(ExpressionType.KEYWORD);\r\n    }\r\n    for (let i: number = 0; i < keywords.length; i++) {\r\n      if (this.matches(ExpressionType.KEYWORD, keywords[i])) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public isIdentifier(...values: string[]): boolean {\r\n    if (values.length === 0) {\r\n      return this.is(ExpressionType.ID);\r\n    }\r\n    for (let i: number = 0; i < values.length; i++) {\r\n      if (this.matches(ExpressionType.ID, values[i])) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public isSpecialIdentifier(...triggers: string[]): boolean {\r\n    if (triggers.length === 0) {\r\n      return this.is(ExpressionType.SPECIAL_ID);\r\n    }\r\n    for (let i: number = 0; i < triggers.length; i++) {\r\n      if (this.matches(ExpressionType.SPECIAL_ID, triggers[i])) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public isSpecialIdentifierWithContent(trigger: string, ...contents: string[]): boolean {\r\n    if (!this.matches(ExpressionType.SPECIAL_ID, trigger)) {\r\n      return false;\r\n    }\r\n    if (contents.length === 0) {\r\n      return true;\r\n    }\r\n    for (let i: number = 0; i < contents.length; i++) {\r\n      if (this.getContents() === contents[i]) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public isNumber(): boolean {\r\n    return this.is(ExpressionType.NUMBER);\r\n  }\r\n\r\n  public isBool(): boolean {\r\n    return this.is(ExpressionType.BOOL);\r\n  }\r\n\r\n  public isString(): boolean {\r\n    return this.is(ExpressionType.STRING);\r\n  }\r\n\r\n  public isConstant(): boolean {\r\n    return this.isNumber() || this.isBool() || this.isString();\r\n  }\r\n\r\n  public toString(): string {\r\n    return this.getTokenType().toString() + ': ' + this.getContents() + ' (' + this._line + ': ' + this._pos + '), Trigger: ' + this.getTrigger();\r\n  }\r\n\r\n\r\n\r\n\r\n}","import { ForwardQuery } from \"./forwardQuery\";\r\nimport { ExpChar } from \"./expChar\";\r\n\r\nexport class TokenReader extends ForwardQuery<ExpChar> {\r\n\r\n  private _inputExp: string = '';\r\n  private _line: number = 1;\r\n  private _pos: number = 0;\r\n  private _count: number = 0;\r\n  private _operator: number = 0;\r\n\r\n  constructor(input_exp: string) {\r\n    super();\r\n    if (input_exp === '') {\r\n\r\n    }\r\n    this._inputExp = input_exp;\r\n    this._count = input_exp.length;\r\n    this._operator = 0;\r\n  }\r\n\r\n  protected endOfInput(): ExpChar {\r\n    return new ExpChar('\\0', this._line, this._pos);\r\n  }\r\n\r\n\r\n  protected fetch(): ExpChar | undefined {\r\n    if (this._operator <= this._count - 1) {\r\n      let readChar: string = this._inputExp[this._operator];\r\n      this._operator++;\r\n      if (readChar === '\\n') {\r\n        this._line++;\r\n        this._pos = 0;\r\n      }\r\n      this._pos++;\r\n      return new ExpChar(readChar, this._line, this._pos);\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  public toString(): string {\r\n    if (this.itemBuffer.length === 0) {\r\n      return this._line + ':' + this._pos + ': Buffer empty';\r\n    }\r\n    if (this.itemBuffer.length < 2) {\r\n      return this._line + ':' + this._pos + ': ' + this.current().toString();\r\n    }\r\n    return this._line + ':' + this._pos + ': ' + this.current().toString() + ', ' + this.next().toString();\r\n  }\r\n\r\n}","import { ForwardQuery } from \"./forwardQuery\";\r\nimport { Token } from \"./token\";\r\nimport { TokenReader } from \"./tokenReader\";\r\nimport { ExpressionType } from \"./expressionEnum\";\r\nimport { ParseError, IPosition } from \"./positions\";\r\nimport { ExpChar } from \"./expChar\";\r\n\r\nexport class Tokenizer extends ForwardQuery<Token> {\r\n\r\n  private _inputExp: TokenReader;\r\n\r\n  private _decimalSeparator: string = '.';\r\n  private _lineComment: string = '//';\r\n  private _blockCommentStart: string = '/*';\r\n  private _blockCommentEnd: string = '*/';\r\n  private _brackets: string[] = ['(', ')', '', '', '[', ']', '{', '}', '', ''];\r\n  private _treatSinglePipeAsBracket: boolean = true;\r\n  private _specialIdStarters: string[] = [];\r\n  private _specialIdTerminators: string[] = [];\r\n  private _keywords: { [key: string]: string } = {};\r\n  private _keywordsCaseSensitive: boolean = false;\r\n  private _stringDelimiters: { [key: string]: string } = {};\r\n  private _boolConstant: string[] = [];\r\n\r\n  constructor(input_exp: string) {\r\n    super();\r\n    this._inputExp = new TokenReader(input_exp);\r\n    this._stringDelimiters = {};\r\n    this._stringDelimiters['\\\"'] = '\\\\';\r\n    this._stringDelimiters['\\''] = '\\0';\r\n    this._boolConstant = [];\r\n    this._boolConstant.push('false');\r\n    this._boolConstant.push('true');\r\n    this._keywords = {};\r\n    this._keywords['this'] = 'this';\r\n    this._keywords['null'] = 'null';\r\n    this._keywords['none'] = 'none';\r\n    this._keywords['undefined'] = 'undefined';\r\n  }\r\n\r\n  public endOfInput(): Token {\r\n    return Token.CreateAndFill(ExpressionType.EOI, this._inputExp.current());\r\n  }\r\n\r\n  public fetch(): Token | undefined {\r\n    // \r\n    while (this._inputExp.current().isWhiteSpace()) {\r\n      this._inputExp.consume();\r\n    }\r\n\r\n    // \r\n    if (this._inputExp.current().isEndOfInput()) {\r\n      return undefined;\r\n    }\r\n\r\n    // \r\n    if (this.isAtStartOfLineComment(true)) {\r\n      this.skipToEndOfLine();\r\n      return this.fetch();\r\n    }\r\n\r\n    // \r\n    if (this.isAtStartOfBlockComment(true)) {\r\n      this.skipBlockComment();\r\n      return this.fetch();\r\n    }\r\n\r\n    // \r\n    if (this.isAtStartOfNumber()) {\r\n      return this.fetchNumber();\r\n    }\r\n\r\n    // \r\n    if (this.isAtStartOfIdentifier()) {\r\n      return this.fetchId();\r\n    }\r\n\r\n    // \r\n    if (this._stringDelimiters[this._inputExp.current().getValue()]) {\r\n      return this.fetchString();\r\n    }\r\n\r\n    //\r\n    if (this.isAtBracket(false)) {\r\n      return Token.CreateAndFill(ExpressionType.OPERATOR, this._inputExp.consume());\r\n    }\r\n\r\n    // ID$Test$\r\n    if (this.isAtStartOfSpecialId()) {\r\n      return this.fetchSpecialId();\r\n    }\r\n\r\n    // \r\n    if (this.isOperator(this._inputExp.current())) {\r\n      return this.fetchOperator();\r\n    }\r\n\r\n    //\r\n    this.problemCollector.push(ParseError.Error(this._inputExp.current(), \": \" + this._inputExp.current().getValue()));\r\n\r\n    this._inputExp.consume();\r\n    return this.fetch();\r\n  }\r\n\r\n  private fetchNumber(): Token {\r\n    let result: Token = Token.Create(ExpressionType.NUMBER, this._inputExp.current());\r\n    result.addToContentChar(this._inputExp.consume());\r\n    let hasDecimal: boolean = false;\r\n    while (this._inputExp.current().isDigit() || this._inputExp.current().is(this._decimalSeparator)) {\r\n      if (this._inputExp.current().is(this._decimalSeparator)) {\r\n        if (hasDecimal) {\r\n          this.problemCollector.push(ParseError.Error(this._inputExp.current(), \"\"));\r\n        }\r\n        hasDecimal = true;\r\n        result.addToContentChar(this._inputExp.consume());\r\n      } else {\r\n        result.addToContentChar(this._inputExp.consume());\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  private fetchId(): Token {\r\n    let result: Token = Token.Create(ExpressionType.ID, this._inputExp.current());\r\n    result.addToContentChar(this._inputExp.consume());\r\n    while (this.isIdentifierChar(this._inputExp.current())) {\r\n      result.addToContentChar(this._inputExp.consume());\r\n    }\r\n    //UnityEngine.Debug.LogWarning(result.GetContents());\r\n    if (!this._inputExp.current().isEndOfInput() && this._specialIdTerminators.indexOf(this._inputExp.current().getValue()) > -1) {\r\n      let specialId: Token = Token.Create(ExpressionType.SPECIAL_ID, result);\r\n      specialId.setTrigger(this._inputExp.current().getValue());\r\n      specialId.setContent(result.getContents());\r\n      specialId.setSource(result.getContents());\r\n      specialId.addToSource(this._inputExp.current());\r\n      this._inputExp.consume();\r\n      return this.handleKeywords(specialId);\r\n    }\r\n    return this.handleKeywords(result);\r\n  }\r\n\r\n  private fetchString(): Token {\r\n    //\r\n    let separator: string = this._inputExp.current().getValue();\r\n    //\r\n    //char escapeChar = _stringDelimiters[_inputExp.current().GetValue()];\r\n    let result: Token = Token.Create(ExpressionType.STRING, this._inputExp.current());\r\n    result.addToTrigger(this._inputExp.consume());\r\n    while (!this._inputExp.current().isNewLine() && !this._inputExp.current().is(separator) && !this._inputExp.current().isEndOfInput()) {\r\n      result.addToContentChar(this._inputExp.consume());\r\n    }\r\n    if (this._inputExp.current().is(separator)) {\r\n      result.addToSource(this._inputExp.consume());\r\n    }\r\n    else {\r\n      this.problemCollector.push(ParseError.Error(this._inputExp.current(), \"\"));\r\n    }\r\n    return result;\r\n  }\r\n\r\n  private isAtStartOfLineComment(consume: boolean): boolean {\r\n    if (this._lineComment !== '') {\r\n      return this.canConsumeThisString(this._lineComment, consume);\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  private canConsumeThisString(check_string: string, consume: boolean): boolean {\r\n    for (let i: number = 0; i < check_string.length; i++) {\r\n      //next//\r\n      if (!(this._inputExp.nextOffset(i).is(check_string[i]))) {\r\n        return false;\r\n      }\r\n    }\r\n    if (consume) {\r\n      this._inputExp.consumeNext(check_string.length);\r\n    }\r\n    return true;\r\n  }\r\n\r\n  private skipToEndOfLine(): void {\r\n    while (!this._inputExp.current().isEndOfInput() && !this._inputExp.current().isNewLine()) {\r\n      this._inputExp.consume();\r\n    }\r\n  }\r\n\r\n  private isAtStartOfBlockComment(consume: boolean): boolean {\r\n    return this.canConsumeThisString(this._blockCommentStart, consume);\r\n  }\r\n\r\n  private skipBlockComment(): void {\r\n    while (!this._inputExp.current().isEndOfInput()) {\r\n      if (this.isAtEndOfBlockComment()) {\r\n        return;\r\n      }\r\n      this._inputExp.consume();\r\n    }\r\n    this.problemCollector.push(ParseError.Error(this._inputExp.current(), ''));\r\n  }\r\n\r\n  private isAtEndOfBlockComment(): boolean {\r\n    return this.canConsumeThisString(this._blockCommentEnd, true);\r\n  }\r\n\r\n  private isAtStartOfNumber(): boolean {\r\n    if (this._inputExp.current().isDigit()) {\r\n      return true;\r\n    } else if (this._inputExp.current().is('.') && this._inputExp.next().isDigit()) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  private isAtStartOfIdentifier(): boolean {\r\n    return this._inputExp.current().isLetter() || this._inputExp.current().is('_') || this._inputExp.current().is('#');\r\n  }\r\n\r\n  private isIdentifierChar(current: ExpChar): boolean {\r\n    return current.isDigit() || current.isLetter() || current.is('_') || current.is('.') || current.is('#') || current.is(':') || current.is('');\r\n  }\r\n\r\n  private isAtBracket(in_symbol: boolean): boolean {\r\n    let r: boolean = true;\r\n    for (let i: number = 0; i < this._brackets.length; i++) {\r\n      if (!this._inputExp.current().is(this._brackets[i])) {\r\n        r = false;\r\n      }\r\n    }\r\n    if (r) {\r\n      return true;\r\n    }\r\n    if (!in_symbol && this._treatSinglePipeAsBracket && this._inputExp.current().is('|') && this._inputExp.next().is('|')) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private isAtStartOfSpecialId(): boolean {\r\n    return this._specialIdStarters.indexOf(this._inputExp.current().getValue()) > -1;\r\n  }\r\n\r\n  private fetchSpecialId(): Token {\r\n    let result: Token = Token.Create(ExpressionType.SPECIAL_ID, this._inputExp.current());\r\n    result.addToTrigger(this._inputExp.consume());\r\n    while (this.isIdentifierChar(this._inputExp.current())) {\r\n      result.addToContentChar(this._inputExp.consume());\r\n    }\r\n    return this.handleKeywords(result);\r\n  }\r\n\r\n  private handleKeywords(id_token: Token): Token {\r\n    let keyword: string = \"\";\r\n    if (this._keywordsCaseSensitive) {\r\n      if (this._keywords[id_token.getContents()]) {\r\n        keyword = this._keywords[id_token.getContents()];\r\n      }\r\n    } else {\r\n      if (this._keywords[id_token.getContents().toLowerCase()]) {\r\n        keyword = this._keywords[id_token.getContents().toLowerCase()];\r\n      }\r\n    }\r\n    if (keyword != \"\") { //\r\n      let keywordToken: Token = Token.Create(ExpressionType.KEYWORD, id_token);\r\n      keywordToken.setTrigger(keyword);\r\n      keywordToken.setContent(id_token.getContents());\r\n      keywordToken.setSource(id_token.getSource());\r\n      return keywordToken;\r\n    } else if (!id_token.is(ExpressionType.SPECIAL_ID)) { //bool\r\n      keyword = id_token.getContents().toLowerCase();\r\n      if (this._boolConstant.indexOf(keyword) > -1) {\r\n        id_token.setTokenType(ExpressionType.BOOL);\r\n      }\r\n    }\r\n    return id_token;\r\n  }\r\n\r\n  private isOperator(ch: ExpChar): boolean {\r\n    if (ch.isEndOfInput() || ch.isDigit() || ch.isLetter() || ch.isWhiteSpace()) {\r\n      return false;\r\n    }\r\n\r\n    // let c: string = ch.getValue();\r\n    // if (char.IsControl(c)) {\r\n    // \treturn false;\r\n    // }\r\n\r\n    if (this.isAtBracket(true) || this.isAtStartOfBlockComment(false) || this.isAtStartOfLineComment(false) || this.isAtStartOfNumber() || this.isAtStartOfIdentifier() || this._stringDelimiters[ch.getValue()]) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  private fetchOperator(): Token {\r\n    let result: Token = Token.Create(ExpressionType.OPERATOR, this._inputExp.current());\r\n    result.addToTrigger(this._inputExp.consume());\r\n    if (result.isOperator(\"*\") && this._inputExp.current().is('*')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\"&\") && this._inputExp.current().is('&')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\"|\") && this._inputExp.current().is('|')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\"<\") && this._inputExp.current().is('=')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\">\") && this._inputExp.current().is('=')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\"!\") && this._inputExp.current().is('=')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\"=\") && this._inputExp.current().is('=')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public addError(pos: IPosition, msg: string): void {\r\n    this.getProblemCollector().push(ParseError.Error(pos, msg));\r\n  }\r\n\r\n  public addWarning(pos: IPosition, msg: string): void {\r\n    this.getProblemCollector().push(ParseError.Warning(pos, msg));\r\n  }\r\n\r\n\r\n\r\n}","export class Variable {\r\n\r\n  public get expType(): string {\r\n    return this._expType;\r\n  }\r\n  private _expType: string = 'string';\r\n\r\n  private _value: any = null;\r\n\r\n  private _name: string = '';\r\n\r\n  private _constant: boolean = false;\r\n\r\n  constructor(name: string, type: string, value: any) {\r\n    this._name = name;\r\n    this._expType = type;\r\n    this._value = value;\r\n  }\r\n\r\n  public setType(type: string): void {\r\n    if(!this._constant) {\r\n      this._expType = type;\r\n    }\r\n  }\r\n\r\n  public setValue(value: any): void {\r\n    if(!this._constant) {\r\n      this._value = value;\r\n    }\r\n  }\r\n\r\n  public makeConstant(value: any): void {\r\n    this.setValue(value);\r\n    this._constant = true;\r\n  }\r\n\r\n  public getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  public getName(): string {\r\n    return this._name;\r\n  }\r\n\r\n  public isConstant(): boolean {\r\n    return this._constant;\r\n  }\r\n\r\n  public toString(): string {\r\n    return `Type: ${this._expType} --- ${this._name}: ${this._value.toString()}`;\r\n  }\r\n\r\n}","import { IExpression } from \"./expressions\";\r\nimport { Variable } from \"./variable\";\r\n\r\nexport class VariableExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    return this._value.expType;\r\n  }  \r\n\r\n  public get className(): string {\r\n    return 'VariableExpression';\r\n  }\r\n\r\n  private _value: Variable;\r\n  \r\n  constructor(value: Variable) {\r\n    this._value = value;\r\n  }\r\n  \r\n  public evaluate(): any {\r\n    return this._value.getValue();\r\n  }\r\n\r\n  public toString(): string {\r\n    return this._value.getName();\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let expClone: VariableExpression = new VariableExpression(this._value);\r\n    return expClone;\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  \r\n\r\n}","export class GameGlobal {\r\n\r\n  \r\n  \r\n\r\n}","export * from './gameGlobal';\r\nexport * from './time';","import { VeryEngine } from \"../veryEngine\";\r\n\r\nexport class Time {\r\n  \r\n  public static get frameCount(): number {\r\n    return this._frame;\r\n  }\r\n  private static _frame: number = 0;\r\n\r\n\r\n  public static get deltaTime(): number {\r\n    // return 1.0 / GameGlobal.Engine.getFps();\r\n    return VeryEngine.Engine.getDeltaTime() / 1000;\r\n  }\r\n\r\n  public static _sum(): void {\r\n    this._frame++;\r\n  }\r\n}","export * from './showError';","export class ShowError {\r\n\r\n  public static errorContentPrefix: string = '<div class=\"alert alert-error\"><button type=\"button\" class=\"close\" data-dismiss=\"alert\">&times;</button>';\r\n  public static errorContentNow: string;\r\n  public static errorZone: HTMLElement;\r\n\r\n  public static initZone(): void {\r\n    if (!this.errorZone) {\r\n      this.errorZone = document.getElementById(\"errorZone\")!;\r\n    }\r\n  }\r\n  /**\r\n   * \r\n   * TODO: logerrorwarn\r\n   * @param error_msg \r\n   */\r\n  private static showMsg(prefix: string, error_msg: string): void {\r\n    this.initZone();\r\n    if (!this.errorContentNow) {\r\n      this.errorContentNow = this.errorContentPrefix;\r\n    }\r\n    this.errorContentNow += prefix + error_msg + \"<br/>\";\r\n    this.errorZone.style.display = \"block\";\r\n    this.errorZone.innerHTML = this.errorContentNow + '</div>';\r\n    // Close button error\r\n    let closeBtn = this.errorZone.querySelector(\".close\")!;\r\n    let that = this;\r\n    closeBtn.addEventListener(\"click\", function () {\r\n      that.errorZone.style.display = \"none\";\r\n    });\r\n  }\r\n\r\n  public static show(error_msg: string): void {\r\n    this.showMsg('>>>', error_msg);\r\n  }\r\n\r\n  public static showError(error_msg: string): void {\r\n    this.showMsg('>>>', error_msg);\r\n  }\r\n\r\n  public static showWarn(error_msg: string): void {\r\n    this.showMsg('>>>', error_msg);\r\n  }\r\n\r\n  public static clear(): void {\r\n    ShowError.initZone();\r\n    ShowError.errorContentNow = ShowError.errorContentPrefix;\r\n    ShowError.errorZone.innerHTML = ShowError.errorContentNow + '</div>';\r\n    // Close button error\r\n    let closeBtn = ShowError.errorZone.querySelector(\".close\")!;\r\n    let that = ShowError;\r\n    closeBtn.addEventListener(\"click\", function () {\r\n      that.errorZone.style.display = \"none\";\r\n    });\r\n  }\r\n\r\n  public static close(): void {\r\n    ShowError.initZone();\r\n    if(ShowError.errorZone.style.display === \"none\") {\r\n      ShowError.errorZone.style.display = \"block\";\r\n    } else {\r\n      ShowError.errorZone.style.display = \"none\";\r\n    }\r\n  }\r\n}","export * from './utility/index';\r\n\r\nexport * from './action/index';\r\nexport * from './dataSource/index';\r\nexport * from './enum/index';\r\nexport * from './expression/index';\r\nexport * from './global/index';\r\nexport * from './html/index';\r\nexport * from './manager/index';\r\nexport * from './object/index';\r\nexport * from './state/index';\r\nexport * from './template/index';\r\nexport * from './trigger/index';\r\n\r\nexport * from './variables/index';\r\nexport * from '../verytable/index';\r\n\r\nexport * from './library/action/index';\r\nexport * from './library/trigger/index';\r\n","export * from './transform';","import { VE_ActionBehaviour } from '../../index';\r\n\r\nexport class Action_Translate extends VE_ActionBehaviour {\r\n\r\n  public get ID(): string {\r\n    return '|Translate';\r\n  }  \r\n\r\n  private _refType: BABYLON.Space = BABYLON.Space.LOCAL;\r\n\r\n  \r\n  public active(): void {\r\n    \r\n  }\r\n\r\n\r\n  public onUpdate(): void {\r\n    \r\n  }\r\n\r\n\r\n\r\n  public destroy(): void {\r\n    // \r\n  }\r\n\r\n\r\n}\r\n\r\n","export * from './input';","import { VE_TriggerBehaviour } from '../../index';\r\nimport { VE_Triggers } from '../../trigger';\r\n\r\nexport class Trigger_MouseDown extends VE_TriggerBehaviour {\r\n  \r\n\r\n  public get ID(): string {\r\n    return '|Mouse_Down';\r\n  }\r\n\r\n\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n\r\n    let a: BABYLON.Nullable<BABYLON.Observer<BABYLON.PointerInfo>> = this.scene.onPointerObservable.add(  (pointInfo) => {\r\n\r\n    })\r\n\r\n    this.scene.onPointerObservable.remove(a);\r\n\r\n    return true;\r\n  }\r\n\r\n  public onUpdate(): void {\r\n    \r\n  }\r\n\r\n\r\n  public destroy(): void {\r\n    \r\n  }\r\n  \r\n\r\n}\r\n\r\n\r\n\r\nVE_Triggers.addTrigger(new Trigger_MouseDown());","export * from './projects';\r\nexport * from './manager';\r\nexport * from './reset';","export class VE_Manager {\r\n  constructor() {\r\n\r\n  }\r\n}","export class VE_Projects {\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n}","export class VE_Reset {\r\n  constructor() {\r\n\r\n  }\r\n}","export * from './veryObject';\r\nexport * from './objects';","import { VeryObject } from \"./veryObject\";\r\nimport { ArrayUtility } from \"../utility\";\r\n\r\nexport class VE_Objects {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  private _objectIDs: string[] = [];\r\n  private _objectDics: { [key: string]: VeryObject } = {};\r\n\r\n  public get count(): number {\r\n    return this._objectIDs.length;\r\n  }\r\n\r\n  constructor(project_name: string) {\r\n    this._projectName = project_name;\r\n  }\r\n\r\n  isCreated(object_id: string): boolean {\r\n    if (this._objectDics[object_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  add(object_id: string, very_object: VeryObject): void {\r\n    if (!this.isCreated(object_id)) {\r\n      this._objectIDs.push(object_id);\r\n      this._objectDics[object_id] = very_object;\r\n    }\r\n  }\r\n\r\n  getObjectID(index: number): string {\r\n    if(index >= 0 && index < this._objectIDs.length) {\r\n      return this._objectIDs[index];\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n\r\n  getVeryObject(object_id: string): VeryObject {\r\n    return this._objectDics[object_id];\r\n  }\r\n\r\n  unloadObject(object_id: string): void {\r\n    // this._objectIDs.re\r\n    ArrayUtility.remove(this._objectIDs, object_id);\r\n    delete this._objectDics.object_id;\r\n\r\n  }\r\n\r\n  clear(): void {\r\n    for(let i: number = 0; i < this._objectIDs.length; i++) {\r\n      let tempObject = this._objectDics[this._objectIDs[i]];\r\n      if(tempObject) {\r\n        tempObject.clear();\r\n      }\r\n    }\r\n    this._objectIDs = [];\r\n    this._objectDics = {};\r\n  }\r\n}","import { GameObject, IVeryVar } from \"../variables\";\r\nimport { IExpression } from \"../expression\";\r\nimport { VE_ActionBehaviour } from \"../action\";\r\nimport { VE_TriggerBehaviour } from \"../trigger\";\r\nimport { VE_Fsm, VE_State } from \"../state\";\r\nimport { VE_Template } from \"../template\";\r\n\r\nexport class VeryObject {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = '';\r\n\r\n  gameObject: GameObject = new GameObject();\r\n\r\n  private _variables: { [key: string]: IVeryVar } = {};\r\n  private _expressions: { [key: string]: IExpression } = {};\r\n  private _actions: { [key: string]: VE_ActionBehaviour } = {};\r\n  private _triggers: { [key: string]: VE_TriggerBehaviour } = {};\r\n  private _fsms: { [key: string]: VE_Fsm } = {};\r\n  private _templates: { [key: string]: VE_Template } = {};\r\n\r\n\r\n\r\n  constructor(project_name: string, object_id: string, game_object: GameObject) {\r\n    this._projectName = projectName;\r\n    this._objectID = object_id;\r\n    this.gameObject = game_object;\r\n  }\r\n\r\n  hasFsm(fsm_id: string): boolean {\r\n    if (this._fsms[fsm_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  addFsm(fsm_id: string, fsm: VE_Fsm): void {\r\n    this._fsms[fsm_id] = fsm;\r\n  }\r\n\r\n  getFsm(fsm_id: string): VE_Fsm {\r\n    return this._fsms[fsm_id];\r\n  }\r\n\r\n  hasTrigger(trigger_id: string): boolean {\r\n    if (this._triggers[trigger_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  addTrigger(trigger_id: string, trigger: VE_TriggerBehaviour): void {\r\n    this._triggers[trigger_id] = trigger;\r\n  }\r\n\r\n  getTrigger(trigger_id: string): VE_TriggerBehaviour {\r\n    return this._triggers[trigger_id];\r\n  }\r\n\r\n  hasAction(action_id: string): boolean {\r\n    if (this._actions[action_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  addAction(action_id: string, action: VE_ActionBehaviour): void {\r\n    this._actions[action_id] = action;\r\n  }\r\n\r\n  getAction(action_id: string): VE_ActionBehaviour {\r\n    return this._actions[action_id];\r\n  }\r\n\r\n  hasVariable(var_id: string): boolean {\r\n    if (this._variables[var_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  addVariable(var_id: string, variable: IVeryVar): void {\r\n    this._variables[var_id] = variable;\r\n  }\r\n\r\n  getVariable(var_id: string): IVeryVar {\r\n    return this._variables[var_id];\r\n  }\r\n\r\n  hasExpression(exp_id: string): boolean {\r\n    if (this._expressions[exp_id]) {\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  addExpression(exp_id: string, expression: IExpression): void {\r\n    this._expressions[exp_id] = expression;\r\n  }\r\n\r\n  getExpression(exp_id: string): IExpression {\r\n    return this._expressions[exp_id];\r\n  }\r\n\r\n  hasTemplate(template_id: string): boolean {\r\n    if (this._templates[template_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  addTemplate(template_id: string, template: VE_Template): void {\r\n    this._templates[template_id] = template;\r\n  }\r\n\r\n  getTemplate(template_id: string): VE_Template {\r\n    return this._templates[template_id];\r\n  }\r\n\r\n  hasAnyVar(var_id: string): boolean {\r\n    if (this._variables[var_id] || this._expressions[var_id] || this._templates[var_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // getState(fsm_id: string, index: number): VE_State {\r\n\r\n  // }\r\n\r\n    unload():void {}\r\n\r\n    // setUnloadCallback(callback): void {}\r\n\r\n\r\n\r\n\r\n  clear(): void {\r\n\r\n  }\r\n}","import { VE_State } from \"./state\";\r\nimport { AssociatedFsmType } from \"../enum\";\r\nimport { VE_Template } from \"../template\";\r\n\r\nexport class VE_AssociatedState {\r\n\r\n  private _types: AssociatedFsmType[] = [];\r\n  private _indexs: number[] = [];\r\n\r\n  private _numberIndex: { [key: number]: number } = {};\r\n  private _states: { [key: number]: VE_State } = {};\r\n  private _templates: { [key: number]: VE_Template } = {};\r\n  private _templateIDs: { [key: number]: string } = {};\r\n\r\n  public get FromState(): VE_State {\r\n    return this._fromState;\r\n  }\r\n  private _fromState: VE_State;\r\n\r\n  constructor(from_state: VE_State) {\r\n    this._fromState = from_state;\r\n  }\r\n  \r\n  public add(state: VE_State, index: number): void {\r\n    this._types.push(AssociatedFsmType.Object);\r\n    let key: number = this._types.length;\r\n    this._indexs.push(key);\r\n    this._numberIndex[key] = index;\r\n    this._states[key] = state;\r\n  }\r\n\r\n  public addTemplate(template: VE_Template, fsm_id: string, index: number): void {\r\n    this._types.push(AssociatedFsmType.Object);\r\n    let key: number = this._types.length;\r\n    this._indexs.push(key);\r\n    this._numberIndex[key] = index;\r\n    this._templates[key] = template;\r\n    this._templateIDs[key] = fsm_id;\r\n  }\r\n\r\n  public connect(): void {\r\n\r\n  }\r\n\r\n\r\n}","import { Dictionary } from \"../utility/dictionary\";\r\nimport { VE_State } from \"./state\";\r\nimport { Time } from \"../global\";\r\nimport { StateConst } from \"./stateConst\";\r\n\r\nexport class VE_Fsm {\r\n\r\n  public get ID(): string {\r\n    return this._id;\r\n  }\r\n  private _id: string = '';\r\n\r\n  public get ObjectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = '';\r\n\r\n  public get FsmID(): string {\r\n    return this._fsmID;\r\n  }\r\n  private _fsmID: string = '';\r\n\r\n  private _stateDics: Dictionary<string, VE_State> = new Dictionary<string, VE_State>();\r\n  private _states: VE_State[] = [];\r\n\r\n  private _frameCount: number = -1;\r\n  private _triggerIDs: string[] = [];\r\n\r\n  constructor() {\r\n    // this._stateDics.TryGetValue(1);\r\n  }\r\n\r\n  hasState(state_value: string): boolean {\r\n    return this._stateDics.ContainsKey(state_value);\r\n  }\r\n\r\n  addState(state_value: string, state: VE_State): void {\r\n    if (!this._stateDics.ContainsKey(state_value)) {\r\n      this._stateDics.Add(state_value, state);\r\n      this._states.push(state);\r\n    }\r\n  }\r\n\r\n  getState(state_value: string): VE_State | null {\r\n    return this._stateDics.GetValue(state_value);\r\n  }\r\n\r\n  removeState(state_value: string): boolean {\r\n    if (this.hasState(state_value)) {\r\n      this._stateDics.Remove(state_value);\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  receiveEvent(trigger_id: string): boolean {\r\n    if (Time.frameCount != this._frameCount) {\r\n      this._frameCount = Time.frameCount;\r\n      this._triggerIDs = [];\r\n      this._triggerIDs.push(trigger_id);\r\n      return true;\r\n    } else {\r\n      if (trigger_id.startsWith(StateConst.ASSOCIATED_STATE_PREFIX)) {\r\n        // console.log(`ID: ${trigger_id} Return True`);\r\n        return true;\r\n      } else {\r\n        if (this._triggerIDs.indexOf(trigger_id) !== -1) {\r\n          return false;\r\n        } else {\r\n          this._triggerIDs.push(trigger_id);\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n}","export * from './state';\r\nexport * from './fsm';\r\nexport * from './stateAction';\r\nexport * from './associatedState';\r\nexport * from './stateConst';","import { VE_Fsm } from \"./fsm\";\r\nimport { VE_StateAction } from \"./stateAction\";\r\nimport { VE_AssociatedState } from \"./associatedState\";\r\n\r\nexport class VE_State {\r\n  public get Fsm(): VE_Fsm {\r\n    return this._fsm;\r\n  }\r\n  private _fsm: VE_Fsm;\r\n\r\n  public get Value(): string {\r\n    return this._value;\r\n  }\r\n  private _value: string = \"\";\r\n\r\n  private _stateActions: VE_StateAction[] = [];\r\n  private _assocaitedStates: VE_AssociatedState[] = [];\r\n\r\n  public get IsSequence(): boolean {\r\n    return this._isSequence;\r\n  }\r\n  private _isSequence: boolean = false;\r\n\r\n  constructor(fsm: VE_Fsm, state_value: string = \"\") {\r\n    this._fsm = fsm;\r\n    this._value = state_value;\r\n  }\r\n\r\n  setValue(state_value: string): void {\r\n    this._value = state_value;\r\n  }\r\n\r\n  addAction(state_action: VE_StateAction): void {\r\n    this._stateActions.push(state_action);\r\n    BABYLON.Mesh.bind;\r\n  }\r\n\r\n  public action(trigger_id: string): void {\r\n    if(this._fsm.receiveEvent(trigger_id)) {\r\n      \r\n    }\r\n  }\r\n}\r\n","\r\nimport { VE_ActionBehaviour } from \"../action/actionBehaviour\";\r\nimport { StateActionType } from \"../enum\";\r\n\r\nexport class VE_StateAction {\r\n  \r\n  public get Type(): StateActionType {\r\n    return this._type;\r\n  }\r\n  private _type: StateActionType = StateActionType.Action;\r\n\r\n  public get Action(): VE_ActionBehaviour {\r\n    return this._action;\r\n  }\r\n  private _action: VE_ActionBehaviour;\r\n\r\n  constructor(action: VE_ActionBehaviour, enabled: boolean, every_frame: boolean = false, is_sequence: boolean = false) {\r\n    this._action = action;\r\n  }\r\n\r\n\r\n\r\n\r\n}","export class StateConst {\r\n\r\n  public static readonly STATE_SEPARATOR: string = '.';\r\n  public static readonly ASSOCIATED_STATE_PREFIX: string = 'Associated_State:';\r\n  public static readonly VARIABLE_SYMBOL: string = '*';\r\n  public static readonly STATE_INDEX: number = -1;\r\n  \r\n}","export * from './template';\r\nexport * from './templates';","export class VE_Template {\r\n  constructor() {\r\n\r\n  }\r\n}","export class VE_Templates {\r\n  \r\n}","export * from './triggerBehaviour';\r\nexport * from './triggers';","import { VE_State } from \"../state/state\";\r\nimport { StateConst } from \"../state/stateConst\";\r\nimport { IExpression } from \"../expression\";\r\n\r\nexport abstract class VE_TriggerBehaviour {\r\n\r\n  abstract get ID(): string;\r\n\r\n  protected scene!: BABYLON.Scene;\r\n\r\n  public get enabled(): boolean {\r\n    return this._enabled;\r\n  }\r\n  public set enabled(val: boolean) {\r\n    this._enabled = val;\r\n  }\r\n  private _enabled: boolean = true;\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  public get isEnabled(): boolean {\r\n    if (this._logicalSwitch) {\r\n      for (let i: number = 0; i < this._logicalSwitch.length; i++) {\r\n        if (!this._logicalSwitch[i].evaluate()) {\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // Logical\r\n  private _logicalSwitch: IExpression[] = [];\r\n  private _logicalExp: IExpression[] = [];\r\n  // State\r\n  private _triggerTargets: VE_State[] = [];\r\n\r\n  // protected GameObject ObjectInstance = null;\r\n  // protected VeryEngineObject VeryObject = null;\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = 'object-axxx';\r\n\r\n  public get triggerID(): string {\r\n    return this._triggerID;\r\n  }\r\n  private _triggerID: string = '';\r\n\r\n  private _id: string = '';\r\n\r\n  public call(): void {\r\n    console.log(this._objectID);\r\n  }\r\n\r\n\r\n  public set(scene: BABYLON.Scene): void {\r\n    this.scene = scene;\r\n  }\r\n\r\n  public setTriggerID(trigger_id: string, object_id: string): void {\r\n    this._triggerID = trigger_id;\r\n    this._objectID = object_id;\r\n    this._id = object_id + StateConst.STATE_SEPARATOR + trigger_id;\r\n  }\r\n\r\n  public addLogicalSwitch(exp: IExpression): void {\r\n    this._logicalSwitch.push(exp);\r\n  }\r\n\r\n  public addTriggerTarget(exp: IExpression, state: VE_State): void {\r\n    this._logicalExp.push(exp);\r\n    this._triggerTargets.push(state);\r\n  }\r\n\r\n  public sendEvent(): void {\r\n    if(this.isEnabled) {\r\n      this.eventProcess();\r\n    }\r\n  }\r\n\r\n  // \r\n  private eventProcess(): void {\r\n    if (this._triggerTargets) {\r\n      for (let i: number = 0; i < this._triggerTargets.length; i++) {\r\n        if (this._logicalExp[i].evaluate()) {\r\n          this._triggerTargets[i].action(this._id);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    return true;\r\n  }\r\n\r\n  public update(): void {\r\n    if(this.isEnabled) {\r\n      this.onUpdate();\r\n    }\r\n  }\r\n\r\n  public onUpdate(): void {\r\n\r\n  }\r\n\r\n  public abstract destroy(): void;\r\n\r\n\r\n}","import { VE_TriggerBehaviour } from \"./triggerBehaviour\";\r\nimport { ShowError } from \"../html\";\r\n\r\nexport class VE_Triggers {\r\n\r\n  private static _triggerDics: { [key: string]: VE_TriggerBehaviour} = {};\r\n\r\n  public static addTrigger(trigger: VE_TriggerBehaviour): void {\r\n    let ids: string[] = trigger.ID.split('|');\r\n    for(let i: number = 0; i < ids.length; i++) {\r\n      let id: string = ids[i].trim().toLowerCase();\r\n      if(this._triggerDics[id]) {\r\n        ShowError.showError(`IDID${id}ID`);\r\n      } else {\r\n        this._triggerDics[id] = trigger;\r\n      }\r\n    }\r\n  }\r\n\r\n  public static hasTrigger(trigger_id: string): boolean {\r\n    trigger_id = trigger_id.toLowerCase();\r\n    if(this._triggerDics[trigger_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static createTrigger(trigger_id: string): VE_TriggerBehaviour {\r\n    trigger_id = trigger_id.toLowerCase();\r\n    // console.log(this._triggerDics[trigger_id]);\r\n    return Object.create(this._triggerDics[trigger_id]);\r\n  }\r\n  \r\n  public static remove(trigger_id: string): void {\r\n    trigger_id = trigger_id.toLowerCase();\r\n    delete this._triggerDics[trigger_id];\r\n  }\r\n\r\n}","export class ArrayUtility {\r\n  public static remove<T>(arr: Array<T>, ele: T): void {\r\n    let index = arr.indexOf(ele);\r\n    if (index > -1) {\r\n      arr.splice(index, 1);\r\n    }\r\n  }\r\n\r\n  public static clear<T>(arr: Array<T>): void {\r\n    arr = [];\r\n  }\r\n\r\n}\r\n\r\n","/** */\r\nexport class Dictionary<KT, VT> {\r\n  private _keys: KT[] = [];\r\n  private _values: VT[] = [];\r\n  public get count(): number {\r\n    return this.Count();\r\n  }\r\n\r\n  public constructor() {\r\n  }\r\n\r\n  /**, */\r\n  public Add(key: any, value: any): number {\r\n    this._keys.push(key);\r\n    return this._values.push(value);\r\n  }\r\n\r\n  public Remove(key: any) {\r\n    var index = this._keys.indexOf(key, 0);\r\n    this._keys.splice(index, 1);\r\n    this._values.splice(index, 1);\r\n  }\r\n\r\n  private Count(): number {\r\n    return this._keys.length;\r\n  }\r\n\r\n  /**SetValue() */\r\n  public SetValue(key: any, value: any): boolean {\r\n    var index = this._keys.indexOf(key, 0);\r\n    if (index != -1) {\r\n      this._keys[index] = key;\r\n      this._values[index] = value;\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n  public GetValue(key: KT): VT | null {\r\n    var index = this._keys.indexOf(key, 0);\r\n    if (index != -1) {\r\n      return this._values[index];\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public ContainsKey(key: any): boolean {\r\n    let ks = this._keys;\r\n    for (let i = 0; i < ks.length; ++i) {\r\n      if (ks[i] == key) {\r\n        return true;;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public GetKeys(): KT[] {\r\n    return this._keys;\r\n  }\r\n\r\n  public GetValues(): VT[] {\r\n    return this._values;\r\n  }\r\n}","export class ErrorInfo {\r\n\r\n  isRight: boolean = true;\r\n  message: string = '';\r\n\r\n  constructor() {\r\n    \r\n  }\r\n\r\n  clear(): void {\r\n    this.isRight = true;\r\n    this.message = '';\r\n  }\r\n\r\n}","export * from './arrayUtility';\r\nexport * from './dictionary';\r\nexport * from './errorInfo';","\r\n// import { VeryEngine } from \"../veryEngine\";\r\n\r\nexport class GameObject {\r\n\r\n  public get gameObject(): GameObject {\r\n    return this;\r\n  }\r\n\r\n  // transform: sf\r\n  mesh: BABYLON.Nullable<BABYLON.Mesh> = null;\r\n\r\n  constructor() {\r\n    // VeryEngine.Scene.getMeshByName()\r\n  }\r\n\r\n\r\n}\r\n\r\n\r\nexport class Transform {\r\n\r\n  public get localPosition(): BABYLON.Vector3 {\r\n    return BABYLON.Vector3.Zero();\r\n  }\r\n  eulerAngles: BABYLON.Vector3 = BABYLON.Vector3.Zero();\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n}","export * from \"./IVeryVar\";\r\nexport * from \"./veryVarManager\";\r\nexport * from \"./veryVariables\";\r\nexport * from './babylonVariables';","import { ShowError } from \"../html/showError\";\r\nimport { IVeryVar } from \"./IVeryVar\";\r\n\r\nexport class VeryVarManager {\r\n\r\n  private static _veryVarTypes: { [key: string]: IVeryVar } = {};\r\n\r\n  public static hasVarType(var_type: string): boolean {\r\n    var_type = var_type.toLowerCase();\r\n    if (this._veryVarTypes[var_type]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static addVarType(var_type: string, var_prototype: IVeryVar): void {\r\n    var_type = var_type.toLowerCase().trim();\r\n    // \r\n    if (this._veryVarTypes[var_type]) {\r\n      ShowError.showError('VeryVar' + var_type + '' + var_prototype);\r\n    } else {\r\n      // console.log(var_proto.VarType);\r\n      this._veryVarTypes[var_type] = var_prototype;\r\n      // let a = Object.create(this.GetVarType(var_type));\r\n      // console.log(a.Value);\r\n      // a.Value = true;\r\n      // console.log(a.Value);\r\n      // a.Value = 1234;\r\n      // console.log(a.getValue());\r\n      // console.log(this.GetVarType(var_type).__proto__);\r\n    }\r\n  }\r\n\r\n  // TODO\r\n  public static createVar(var_type: string): IVeryVar {\r\n    var_type = var_type.toLowerCase();\r\n    return Object.create(this.getVarType(var_type));\r\n  }\r\n\r\n  public static getVarType(var_type: string): any {\r\n    var_type = var_type.toLowerCase();\r\n    if (this._veryVarTypes && this._veryVarTypes[var_type]) {\r\n      return this._veryVarTypes[var_type];\r\n    }\r\n    return null;\r\n  }\r\n\r\n\r\n  public static remove(var_type: string): void {\r\n    var_type = var_type.toLowerCase();\r\n    delete this._veryVarTypes[var_type];\r\n  }\r\n\r\n\r\n\r\n}","import { IVeryVar } from \"./IVeryVar\";\r\nimport { ErrorInfo } from \"../utility/errorInfo\";\r\nimport { VeryVarManager } from \"./veryVarManager\";\r\n\r\nexport class VeryBool implements IVeryVar {\r\n\r\n  public get varType(): string {\r\n    return 'bool';\r\n  } \r\n\r\n  public get Value(): boolean {\r\n    return this._value;\r\n  }\r\n  public set Value(val: boolean) {\r\n    this._value = val;\r\n  }\r\n  private _value: boolean = false;\r\n\r\n  constructor() {\r\n    this._value = false;\r\n  }\r\n\r\n  setValue(val: any): void {\r\n    this._value = val;\r\n  }\r\n\r\n  getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  initValue(value_str: string, error_info: ErrorInfo): any {\r\n    if(value_str.toLowerCase() === 'false') {\r\n      return false;\r\n    } else if(value_str.toLowerCase() === 'true'){\r\n      return true;\r\n    } \r\n    else if(value_str === '' || value_str.toLowerCase() === 'null' || value_str.toLowerCase() === 'none') {\r\n      return false;\r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message = 'Type: ' + this.varType + '' + value_str + ''\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport class VeryInt implements IVeryVar {\r\n\r\n  public get varType(): string {\r\n    return 'int';\r\n  }\r\n\r\n  public get Value(): number {\r\n    return Math.round(this._value);\r\n  }\r\n  public set Value(val: number) {\r\n    this._value = Math.round(val);\r\n  }\r\n  private _value: number = 0;\r\n\r\n  constructor() {\r\n    this._value = 0;\r\n  }\r\n\r\n  getValue(): any {\r\n    return this.Value;\r\n  }\r\n\r\n  setValue(val: any): void {\r\n    this.Value = val;\r\n  }\r\n\r\n  initValue(value_str: string, error_info: ErrorInfo):any {\r\n    // floatparseInt\r\n    let newFloat = parseFloat(value_str);\r\n    if(!isNaN(newFloat)) {\r\n      // float\r\n      return Math.round(newFloat);\r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message = 'Type: ' + this.varType + '' + value_str + ''\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport class VeryFloat implements IVeryVar {\r\n\r\n  public get varType(): string {\r\n    return 'float';\r\n  }\r\n\r\n  public get Value(): number {\r\n    return this._value;\r\n  }\r\n  public set Value(val: number) {\r\n    this._value = val;\r\n  }\r\n  private _value: number = 0;\r\n\r\n  constructor() {\r\n    this._value = 0;\r\n  }\r\n\r\n  setValue(val: number) {\r\n    this._value = val;\r\n  }\r\n\r\n  // \r\n  getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  initValue(value_str: string, error_info: ErrorInfo): any {\r\n    let newVal = parseFloat(value_str);\r\n    if(!isNaN(newVal)) {\r\n      return newVal;\r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message = 'Type: ' + this.varType + '' + value_str + ''\r\n      return undefined;\r\n    }\r\n  }\r\n}\r\n\r\nexport class VeryNumber implements IVeryVar {\r\n\r\n  public get varType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get Value(): number {\r\n    return this._value;\r\n  }\r\n  public set Value(val: number) {\r\n    this._value = val;\r\n  }\r\n  private _value: number = 0;\r\n\r\n  constructor() {\r\n    this._value = 0;\r\n  }\r\n\r\n  setValue(val: number) {\r\n    this._value = val;\r\n  }\r\n\r\n  // \r\n  getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  initValue(value_str: string, error_info: ErrorInfo): any {\r\n    let newVal = parseFloat(value_str);\r\n    if(!isNaN(newVal)) {\r\n      return newVal;\r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message = 'Type: ' + this.varType + '' + value_str + ''\r\n      return undefined;\r\n    }\r\n  }\r\n}\r\n\r\nexport class VeryString implements IVeryVar {\r\n\r\n  public get varType(): string {\r\n    return 'string';\r\n  }\r\n\r\n  public get Value(): string {\r\n    return this._value;\r\n  }\r\n  public set Value(val: string) {\r\n    this._value = val;\r\n  }\r\n  private _value: string = '';\r\n\r\n  constructor() {\r\n    this._value = '';\r\n  }\r\n\r\n  getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  setValue(val: any): void {\r\n    this._value = val;\r\n  }\r\n\r\n  initValue(value_str: string, error_info: ErrorInfo): any {\r\n    if (value_str.startsWith('\\'') || value_str.startsWith('\"') || value_str.startsWith('') || value_str.startsWith('')) {\r\n      this._value = value_str.substr(1, value_str.length - 2);\r\n    } else {\r\n      this._value = value_str;\r\n    } \r\n    error_info.isRight = true;\r\n  }\r\n}\r\n\r\nexport class VeryVector3 implements IVeryVar {\r\n\r\n  public get varType(): string {\r\n    return 'vector3';\r\n  }\r\n\r\n  public get Value(): BABYLON.Vector3 {\r\n    //let a: BABYLON.Vector3 = new BABYLON.Vector3 (1,1,1);\r\n    return this._value;\r\n  }\r\n  public set Value(val:BABYLON.Vector3) {\r\n    this._value = val;\r\n  }\r\n  private _value: BABYLON.Vector3 = BABYLON.Vector3.Zero();\r\n\r\n\r\n  constructor() {\r\n    this._value = BABYLON.Vector3.Zero();\r\n  }\r\n\r\n  getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  setValue(val: any) {\r\n    this._value = val;\r\n  }\r\n\r\n  initValue(value_str: string, error_info: ErrorInfo): any {\r\n    if(value_str === 'none' || value_str === 'null') {\r\n      \r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message = 'Type: ' + this.varType + '' + value_str + ''\r\n    }\r\n  }\r\n}\r\n\r\nVeryVarManager.addVarType('bool', new VeryBool());\r\nVeryVarManager.addVarType('', new VeryBool());\r\n\r\nVeryVarManager.addVarType('int', new VeryInt());\r\nVeryVarManager.addVarType('float', new VeryFloat());\r\n\r\nVeryVarManager.addVarType('number', new VeryNumber());\r\nVeryVarManager.addVarType('', new VeryNumber());\r\n\r\nVeryVarManager.addVarType('string', new VeryString());\r\nVeryVarManager.addVarType('', new VeryString());\r\nVeryVarManager.addVarType('vector3', new VeryVector3());\r\nVeryVarManager.addVarType('', new VeryVector3());","import { VeryTable } from \"../verytable/index\";\r\nimport { ShowError } from \"./html/showError\";\r\n\r\n// entrance\r\nexport * from \"./index\";\r\n\r\nexport class VeryEngine {\r\n\r\n  public static Canvas: HTMLCanvasElement;\r\n  public static Engine: BABYLON.Engine;\r\n  public static Scene: BABYLON.Scene;\r\n\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n\r\n  init(data: Array<Array<string>>, project_name: string): void {\r\n    // TODO: Table1\r\n    let tableData: VeryTable = new VeryTable(data);\r\n    console.log(tableData.pos(7, 5));\r\n\r\n\r\n\r\n\r\n    // this.showErrorTest(tableData);\r\n  }\r\n\r\n\r\n  showErrorTest(tableData: VeryTable): void {\r\n    // /*\r\n    ShowError.show('' + tableData.pos(7, 5));\r\n\r\n    ShowError.showError('' + tableData.pos(7, 5));\r\n\r\n    ShowError.showWarn('' + tableData.pos(7, 5));\r\n\r\n    ShowError.show('' + tableData.pos(7, 5));\r\n\r\n    ShowError.show('' + tableData.pos(7, 5));\r\n\r\n\r\n    document.getElementById(\"settingsButton\")!.addEventListener(\"click\", ShowError.close);\r\n    // */\r\n  }\r\n\r\n}","\r\nexport * from \"./veryTableRow\";\r\nexport * from \"./veryTable\";\r\nexport * from \"./veryTableSet\";\r\n","import { VeryTableRow } from \"./veryTableRow\";\r\n\r\nexport class VeryTable {\r\n  private _id: string = \"\";\r\n  public get ID(): string {\r\n    return this._id;\r\n  }\r\n  public set ID(id: string) {\r\n    this._id = id;\r\n  }\r\n\r\n  private _columnIDs: string[] = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];\r\n\r\n  private _rows: VeryTableRow[] = [];\r\n\r\n  public get RowCount(): number {\r\n    if (!this._rows) {\r\n      return 0;\r\n    } else {\r\n      return this._rows.length;\r\n    }\r\n  }\r\n\r\n  constructor(data: string[][], id = \"Sheet\") {\r\n    this._id = id;\r\n    this._rows = [];\r\n    if (data) {\r\n      for (let i = 0; i < data.length; i++) {\r\n        let newRow = new VeryTableRow(data[i]);\r\n        this._rows.push(newRow);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param row_index \r\n   * @param column_index \r\n   */\r\n  public getData(row_index: number, column_index: number): string | undefined {\r\n    if (row_index >= 0 && row_index < this._rows.length) {\r\n      let row: VeryTableRow = this._rows[row_index];\r\n      return row.getData(column_index);\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param row_index \r\n   */\r\n  public getRow(row_index: number): VeryTableRow | undefined {\r\n    if (row_index >= 0 && row_index < this._rows.length) {\r\n      return this._rows[row_index];\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param row_index \r\n   * @param column_index \r\n   */\r\n  public pos(row_index: number, column_index: number): string {\r\n    return \"\" + this.ID + \"\" + (row_index + 1) + \"\" + this.getColumnID(column_index) + \"\";\r\n  }\r\n\r\n  /**\r\n   * ID26\r\n   * @param column_index \r\n   */\r\n  private getColumnID(column_index: number): string {\r\n    if (column_index >= 0 && column_index < 26) {\r\n      return this._columnIDs[column_index];\r\n    } else if (column_index < 0) {\r\n      return 'error';\r\n    } else {\r\n      let a: number = Math.floor(column_index / 26);\r\n      let b: number = column_index % 26;\r\n      if (a === 0) {\r\n        return this._columnIDs[a];\r\n      } else {\r\n        return this._columnIDs[a - 1] + this._columnIDs[b];\r\n      }\r\n    }\r\n  }\r\n\r\n  // public addRowStringArray(row_data: string[]): void {\r\n\r\n  // }\r\n\r\n  // public addRowStrings(...strs: string[]): void {\r\n\r\n  // }\r\n\r\n  public addRow(data: VeryTableRow): void {\r\n    // \r\n    this._rows.push(data);\r\n\r\n  }\r\n\r\n\r\n}","\r\nexport class VeryTableRow {\r\n  public get Count(): number {\r\n    if (!this._rowData) {\r\n      return 0;\r\n    } else {\r\n      return this._rowData.length;\r\n    }\r\n  }\r\n\r\n  private _rowData: string[] = [];\r\n\r\n  constructor(row_data: string[]) {\r\n    this._rowData = row_data;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param column_index \r\n   */\r\n  public getData(column_index: number): string | undefined {\r\n    if (column_index >= 0 && column_index < this.Count) {\r\n      return this._rowData[column_index];\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  public add(data: string): void {\r\n    this._rowData.push(data);\r\n  }\r\n\r\n  public insert(index: number, data: string): void {\r\n    // 2\r\n    this._rowData.push(data);\r\n    let tempData = this._rowData.slice(index);\r\n    tempData.push(data);\r\n    this._rowData = tempData;\r\n  }\r\n\r\n  public remove(index: number): void {\r\n    this._rowData.splice(index, 1);\r\n  }\r\n\r\n  public removeEnd(): void {\r\n    this._rowData.pop();\r\n  }\r\n\r\n\r\n\r\n  // public\r\n\r\n  // public remove(index: number): any {\r\n\r\n  // }\r\n}","// import { VeryTableRow } from \"./veryTableRow\";\r\n/**\r\n * 1. TypeScript\r\n * 2. \r\n */\r\nimport { VeryTable } from \"./veryTable\";\r\n\r\nexport class VeryTableSet {\r\n\r\n  private _tables: VeryTable[] = [];\r\n\r\n  public get Count(): number {\r\n    if (!this._tables) {\r\n      return 0;\r\n    } else {\r\n      return this._tables.length;\r\n    }\r\n  }\r\n\r\n  constructor(tables?: VeryTable[]) {\r\n    if (tables) {\r\n      this._tables = tables;\r\n    }\r\n  }\r\n\r\n  public getTable(index: number): VeryTable | undefined {\r\n    if (index >= 0 && index < this.Count) {\r\n      return this._tables[index];\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  public addTable(table: VeryTable): void {\r\n    this._tables.push(table);\r\n  }\r\n\r\n  public removeTable(index: number): void {\r\n    if (index >= 0 && index < this.Count) {\r\n      this._tables.splice(index, 1);\r\n    }\r\n  }\r\n\r\n\r\n}"]}