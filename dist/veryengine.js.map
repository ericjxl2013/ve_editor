{"version":3,"sources":["node_modules/_browser-pack@6.1.0@browser-pack/_prelude.js","src/game.ts","src/main.ts","src/veryengine/action/actionBehaviour.ts","src/veryengine/action/actions.ts","src/veryengine/action/assignment.ts","src/veryengine/action/assignmentTypeJudge.ts","src/veryengine/action/index.ts","src/veryengine/action/sequenceActions.ts","src/veryengine/babylon/babylonVariables.ts","src/veryengine/babylon/engine.ts","src/veryengine/babylon/index.ts","src/veryengine/babylon/time.ts","src/veryengine/dataSource/dataSource.ts","src/veryengine/dataSource/fsmData.ts","src/veryengine/dataSource/index.ts","src/veryengine/dataSource/stateActionData.ts","src/veryengine/dataSource/stateData.ts","src/veryengine/dataSource/stateTriggerData.ts","src/veryengine/dataSource/variableData.ts","src/veryengine/enum/enumTypes.ts","src/veryengine/enum/index.ts","src/veryengine/expression/expChar.ts","src/veryengine/expression/expManager.ts","src/veryengine/expression/expressionEnum.ts","src/veryengine/expression/expressionParsing.ts","src/veryengine/expression/expressions.ts","src/veryengine/expression/forwardQuery.ts","src/veryengine/expression/functionExpression.ts","src/veryengine/expression/functions.ts","src/veryengine/expression/index.ts","src/veryengine/expression/positions.ts","src/veryengine/expression/scope.ts","src/veryengine/expression/token.ts","src/veryengine/expression/tokenReader.ts","src/veryengine/expression/tokenizer.ts","src/veryengine/expression/variable.ts","src/veryengine/expression/variableExpression.ts","src/veryengine/expression/veryExpressions.ts","src/veryengine/global/errorManager.ts","src/veryengine/global/gameGlobal.ts","src/veryengine/global/index.ts","src/veryengine/global/triggerGlobal.ts","src/veryengine/html/index.ts","src/veryengine/html/showError.ts","src/veryengine/index.ts","src/veryengine/library/action/debug.ts","src/veryengine/library/action/index.ts","src/veryengine/library/action/translate.ts","src/veryengine/library/trigger/index.ts","src/veryengine/library/trigger/input.ts","src/veryengine/loader/createInstance.ts","src/veryengine/loader/index.ts","src/veryengine/loader/loaderManager.ts","src/veryengine/manager/index.ts","src/veryengine/manager/manager.ts","src/veryengine/manager/projects.ts","src/veryengine/manager/reset.ts","src/veryengine/object/index.ts","src/veryengine/object/objects.ts","src/veryengine/object/veryengineObject.ts","src/veryengine/scene/index.ts","src/veryengine/scene/verySceneVariables.ts","src/veryengine/state/associatedState.ts","src/veryengine/state/fsm.ts","src/veryengine/state/index.ts","src/veryengine/state/state.ts","src/veryengine/state/stateAction.ts","src/veryengine/state/stateConst.ts","src/veryengine/template/index.ts","src/veryengine/template/template.ts","src/veryengine/template/templates.ts","src/veryengine/trigger/index.ts","src/veryengine/trigger/triggerBehaviour.ts","src/veryengine/trigger/triggers.ts","src/veryengine/utility/arrayUtility.ts","src/veryengine/utility/dictionary.ts","src/veryengine/utility/errorInfo.ts","src/veryengine/utility/index.ts","src/veryengine/utility/keyboardMap.ts","src/veryengine/utility/paraParserUtility.ts","src/veryengine/utility/stringFormat.ts","src/veryengine/utility/typeConvert.ts","src/veryengine/variables/index.ts","src/veryengine/variables/varTools.ts","src/veryengine/variables/variables.ts","src/veryengine/variables/veryExpression.ts","src/veryengine/variables/veryVarManager.ts","src/veryengine/variables/veryVariables.ts","src/veryengine/veryEngine.ts","src/verytable/index.ts","src/verytable/veryTable.ts","src/verytable/veryTableRow.ts","src/verytable/veryTableSet.ts"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","veryEngine_1","babylon_1","Game","canvasElement","fps","this","_showFps","_canvas","BabylonEngine","Canvas","_fps","_table","document","getElementById","prototype","createScene","_engine","VE_Manager","dispose","BABYLON","Engine","engine","window","addEventListener","resize","_scene","Scene","camera","ArcRotateCamera","Vector3","setPosition","attachControl","lowerBetaLimit","upperBetaLimit","Math","PI","lowerRadiusLimit","displayLoadingUI","SceneLoader","Append","scene","hideLoadingUI","entrance","VeryEngine","console","log","hot1","countEmptyRows","init","getData","projectName","error","objects","onBeforeRenderObservable","add","count","objectID","getObjectID","getVeryObject","update","animate","_this","runRenderLoop","width","clientWidth","render","updateFpsPos","toggleDebug","scenes","debugLayer","isVisible","hide","show","embedMode","style","right","body","innerHTML","getFps","toFixed","game","game_1","__importDefault","dataLoaded","canvas","fpsLabel","default","initGame","setTimeout","enum_1","VE_ActionBehaviour","_enabled","_projectName","gameObject","veryObject","_objectID","_actionID","_erveryFrame","isSequence","_sequenceState","SequenceActionState","Initial","Object","defineProperty","val","ActionType","Normal","set","setEveryFrame","is_every_frame","setActionID","project_name","object_id","action_id","setVeryObject","very_object","action","action_val","every_frame","active","onUpdate","pause","Pause","resume","Running","stop","finish","enabled","state_1","manager_1","global_1","utility_1","VE_Actions","addAction","action_class","GameGlobal","PlatformLoaded","tempAction","constructor","ids","ID","split","id","trim","toLowerCase","_actionFunctionDics","VE_ErrorManager","Add","VE_Error","className","Severity","hasAction","createAction","action_type","action_para","init_val","error_info","isRight","message","variable","paraParser","clear","everyFrameFlag","VE_TypeConvert","boolConvert","remove","findAction","isCreatedAction","getAction","actionArray","StateConst","STATE_SEPARATOR","actionID","isCreated","otherObject","html_1","assignmentTypeJudge_1","VE_Assignment","state","total_string","_totalStr","_leftType","AssignType","Variable","_rightType","_leftVariable","_leftTemplate","_leftVarID","_rightConstStr","_rightConstValue","_rightVariable","_rightTemplate","_rightVarID","_pos","_state","setPos","pos","setLeftVariable","setLeftTemplate","template","Template","setLeftTemplateVar","var_id","TemplateVariable","setRightVariable","setRightTemplate","setRightNull","setRightTemplateVariable","setRightConst","const_str","Const","setRightConstValue","const_value","assign","rightAssignment","unload","templateInstance","ShowError","showError","Fsm","fsmID","templateVarID","isCreatedExpression","isCreatedVariable","getVariable","isCreatedFsm","getFsm","fsmVar","setValue","getValue","errorInfo","ErrorInfo","initValue","exp","getExpression","VE_AssignmentTypeJudge","allowExpression","evaluate","v","allow","first","second","varType","expType","__export","VE_SequenceActions","_activeActionIndex","engine_1","GameObject","name","mesh","node","_transform","Transform","transform","isEmpty","Find","getNodeByName","Mesh","TransformNode","getClassName","_transformNode","_mesh","_name","_tempVec","Zero","forward","Forward","localScale","copyFrom","transformNode","position","getAbsolutePosition","setAbsolutePosition","para","rotation","multiplyByFloats","parent_1","parent","setParent","result","parent_2","parent_3","parent_4","translate","translation","relativeTo","translateRelativeTo","trans","direction","clone","transformDirection","Space","WORLD","transformPosition","local_position","matrix","computeWorldMatrix","TransformCoordinates","local_direction","subtract","inverseTransformPosition","global_position","Matrix","Invert","inverseTransformDirection","global_direction","pointA","pointOrigin","Time","_frame","getDeltaTime","_sum","fsmData_1","VE_DataSource","name_id","is_template","_templateID","_isTemplate","_fsmIDs","_fsmDic","_fsmPosDic","_triggerIDs","_triggerDic","_triggerPosDic","_actionIDs","_actionDic","_actionInitValue","_actionPosDic","fsm_id","createFsm","push","VE_FsmData","getFsmData","getFsmPos","hasFsmIndex","index","getFsmID","isCreatedTrigger","trigger_id","addTrigger","trigger_data","getTrigger","getTriggerPos","hasTriggerIndex","getTriggerID","getTriggerPara","action_data","action_init_val","getActionPara","getActionPos","getActionInitVal","hasActionIndex","getActionID","data_source","_fsmType","_initialValStr","_states","_dataSource","_fsmID","initFsm","fsm_type","initial_var","addState","state_data","getStateData","VE_StateActionData","sequence","type","StateActionType","Action","totalString","varID","varValue","everyFrame","setNormalAction","setAssignmentAction","var_value","Assignment","VE_StateData","fsm_data","val_str","is_initial_value","state_index","STATE_INDEX","_stateIndex","logicalExp","rowIndex","_triggers","_triggersPos","_actions","_actionsPos","_associatedStates","_associatedStatesPos","_isSequence","_fsmData","_valStr","_isInitialValue","hasTrigger","hasAssociatedState","addAssociatedState","associated_state_data","getAssociatedState","getAssociatedStatePos","setSequence","VE_StateTriggerData","triggerID","logicalSwitch","VE_VariableData","_variableIDs","_varDics","_varPosDic","addVariable","var_paras","getVariableID","getVariableParas","getPos","AssignmentType","AssociatedFsmType","VariableScope","ParaType","ExpChar","value","line","_value","_line","getLine","isDigit","test","isLetter","isWhiteSpace","isNewLine","isEndOfInput","is","_i","arguments","toString","scope_1","positions_1","expressionParsing_1","ExpManager","_scope","Scope","Create","_expVariable","createVariable","errors","ParseError","NameLocation","setVariable","createExpression","exp_str","VE_ExpressionParsing","parsing","find","printError","ExpressionType","tokenizer_1","expressions_1","expressionEnum_1","functionExpression_1","functions_1","variableExpression_1","veryExpressions_1","_bracketPair","input_exp","scope","var_scope","_varScope","_tokenizer","Tokenizer","parse","resultExp","buildExpression","current","isEnd","addError","getSource","consume","getProblemCollector","left","relationalExp","isOperator","reOrder","BinaryOperator","Or","algebraExp","LT","LT_EQ","EQ","GT_EQ","GT","NEQ","productExp","Subtract","exponentExp","Multiply","Divide","Modulo","atomExp","BinaryExpression","Not","ConstantExpression","setSeal","next","isIdentifier","isKeyword","isStartBracket","newValue","Empty","isConstant","getContents","varExpression","VE_Expressions","getParseExpression","getTemplateExpression","endBracket","expectTrigger","OPERATOR","typeStr","isBool","isNumber","parseFloat","endStart","functionCall","loc","variableID","endsWith","VariableExpression","VeryTemplateExpression","fsm","VeryVarExpression","isSpecialIdentifier","op","rightOp","isSealed","getPriority","getPriorityOp","replaceLeft","target","newLeft","getLeftExp","leftOp","setLeftExp","end_bracket","FunctionExpression","funcToken","CustomFunctions","hasFunction","fun","createFunction","setFunction","paraCount","addPara","parameterNumber","trigger","matches","getProjectCollector","Local","dictionary_1","template_1","TrueExpression","_expType","left_exp","right_exp","_op","_isSealed","_left","_right","resultAutoType","_opDic","Power","And","_priority","setRightExp","getOp","getRightExp","leftValue","rightValue","pow","l","getBoolean","x","y","z","Vector2","GetValue","Dictionary","_template","VE_Template","setTemplate","varExp","ForwardQuery","itemBuffer","endReached","problemCollector","endOfInputIndicator","undefined","nextOffset","offset","item","fetch","endOfInput","consumeNext","numberOfItems","shift","setProblemCollector","_paras","_function","func","expClone","printStr","Pow","args","NaN","Ln","Infinity","Lg","log10","Sqrt","sqrt","Abs","abs","Random","start","distance","random","Round","round","Sin","sin","ASin","asin","Cos","cos","ACos","acos","Tan","tan","ATan","atan","func_name","_functionsDic","addFunction","tempFunc","funcName","SeverityExp","msg","severity","_message","_severity","Warning","getPosition","getMessage","getSeverity","variable_1","_parent","_context","GetRootScope","_root","makeConstant","E","CreateWithParent","setType","Token","STRING","_source","_contents","_trigger","CreateAndFill","ch","addToTrigger","addToSource","addToContentChar","addToContent","getTokenType","setTokenType","new_type","setTrigger","setContent","content","setSource","source","EOI","symbols","isEndBracket","isStartSquareBracket","isEndSquareBracket","isStartBrace","isEndBrace","keywords","KEYWORD","values","triggers","SPECIAL_ID","isSpecialIdentifierWithContent","contents","NUMBER","BOOL","isString","forwardQuery_1","expChar_1","TokenReader","_super","_inputExp","_count","_operator","__extends","readChar","token_1","tokenReader_1","_decimalSeparator","_lineComment","_blockCommentStart","_blockCommentEnd","_brackets","_treatSinglePipeAsBracket","_specialIdStarters","_specialIdTerminators","_keywords","_keywordsCaseSensitive","_stringDelimiters","_boolConstant","isAtStartOfLineComment","skipToEndOfLine","isAtStartOfBlockComment","skipBlockComment","isAtStartOfNumber","fetchNumber","isAtStartOfIdentifier","fetchId","fetchString","isAtBracket","isAtStartOfSpecialId","fetchSpecialId","fetchOperator","hasDecimal","isIdentifierChar","indexOf","specialId","handleKeywords","separator","canConsumeThisString","check_string","isAtEndOfBlockComment","in_symbol","id_token","keyword","keywordToken","addWarning","_constant","getName","scene_1","createSceneExpression","expression_str","sceneExp","errorMessage","createGlobalExpression","globalExp","Global","createLocalExpression","localExp","createFsmExpression","fsmExp","varArray","substring","startsWith","VARIABLE_SYMBOL","getParseGlobal","getParseScene","variables","VerySceneVariables","Variables","errorStr","isCreatedTemplate","getTemplate","table_name","_tableName","warning","getTableName","_errorList","GetError","Print","prefix","splice","warn","PrintWarnning","PrintError","TriggerGlobal","Init","AddKeyboard","key","_scenes","onKeyboardObservable","kbInfo","KeyboardEventTypes","KEYDOWN","_keyUpdate","event","_triggerList","RemoveKeyboard","KeyboardUpdate","_keysDic","unionID","clearProject","KEYMAP","_initialized","initZone","errorZone","showMsg","error_msg","errorContentNow","errorContentPrefix","display","closeBtn","querySelector","that","showWarn","close","TypeVar","action_1","variables_1","Action_Debug","apply","_debugMode","_typeList","_veryVarDic","_templateDic","_constDic","_separator","_strBuilder","VeryVar","para_array","ParaParserUtility","ParaNumbers","debugArray","VarTools","IsVarID","veryVar","GetVeryVarWithExpression","GetTemplate","destroy","Action_Translate","_refType","LOCAL","_translateObj","VeryGameObject","_refObj","_isDeltaTime","VeryBool","_isVec","_vecVar","VeryVector3","_xVar","VeryNumber","_yVar","_zVar","_paraTime","_paraVec","deltaTime","GameObjectPara","Vector3OrNumberParaWithExpression","BoolParaWithExpression","index_1","trigger_1","Trigger_MouseDown","_mouseButtonIndex","_downFlag","_observer","Trigger","onPointerObservable","pointInfo","PointerEventTypes","POINTERDOWN","button","sendEvent","POINTERUP","VE_TriggerBehaviour","Trigger_MouseUp","Trigger_MouseButton","_mouseUpdate","Trigger_Keyboard","_keyboard","VE_KeyboardMap","GetKey","Trigger_KeyDown","Trigger_KeyUp","Trigger_KeyboardCombine","_keyboards","_lastKey","all","VE_Triggers","expression_1","typeConvert_1","CreateInstance","createProject","templates","globalVars","varData","varPara","VeryVarManager","hasVarType","newVar","addTemplate","addExpression","k","dataSource","fsmCount","fsmData","fsmType","initialValStr","VE_Fsm","addFsm","triggerCount","triggerPara","createTrigger","slice","actionCount","actionPara","stateData","VE_State","isInitialValue","setInitialValue","stateAssignment","logicalAssociated","s","triggerData","triggerPos","findTrigger","addTriggerTarget","addLogicalSwitch","actionData","actionPos","enabledFlag","stateAction","VE_StateAction","setAction","assignmentAction","isCreatedState","stateIndex","ValStr","getStateInSequence","associatedStateCount","associatedStateInfo","associatedPos","associatedState","VE_AssociatedState","multipleAssociatedState","www","strArray","intConvert","aFsmID","stateArray","q","aObject","aObjectID","aFsm","toState","getState","global_vars","assignStr","valArray","setTemplateInfo","setStateVariable","tObject","stateVar","setConstValue","assignment","varParas","VE_StringFormat","isFormulaString","AssignmentFormulaCount","AssignmentPrefix","VeryExpression","rightVar","rightTemplate","leftType","leftVariable","setAssignment","createInstance","object_name","destroy_on_create_new","AnalisysType","object_1","dataSource_1","createInstance_1","LoaderManager","_currentType","_lastFsmID","_activeTemplate","_activeObject","_activeFsmData","_activeStateData","load","table","RowCount","getRow","templateID","replace","isIDLegal","objName","nameArray","activeGameObject","tempObject","VeryEngineObject","paraData","paraSegment","paraArray","stateInfo","parseInt","para2Array","tempStr","newActionID","LogCount","equalIndex","projects_1","_projects","VE_Projects","projects","addProject","isCreatedObjects","addObjects","VE_Objects","isCreatedTemplates","addTemplates","VE_Templates","isCreatedVariables","addVariables","VE_Variables","globalVarData","isCreatedGlobals","getGlobalVars","getTemplates","getVariables","getObjects","_objects","_variables","_templates","disposeProject","sleep","VE_Reset","_objectIDs","_objectDics","unloadObject","ArrayUtility","game_object","_expressions","_fsms","exp_id","expression","template_id","isCreatedVar","keys","forEach","_hasLoaded","initIfNeeded","stateConst_1","from_state","_types","_indexs","_posArray","_numberIndex","_templateFsmIDs","_fromState","connect","currentType","Key","numberIndex","ASSOCIATED_STATE_PREFIX","fsm_variable","_id","_stateDics","_frameCount","_fsmVar","_veryObject","removeState","receiveEvent","getFrameId","stateAction_1","_assignmentType","_isTemplateVar","_varID","_templateVar","_assignmentStr","_logicalExpression","_index","_stateVariable","_stateActions","_assocaitedStates","_sequenceActions","_fsm","setLogicalExpression","logical_exp","assign_str","very_var","state_action","addAssignment","associated_state","getTemplateVar","isNull","Value","Type","Animation","SequenceState","Prepared","_type","_action","_everyFrame","_assignment","_templateVarID","_instanceCount","instanceCount","setInstance","instance_obj","template_var_id","cloneTemplate","_instanceDic","isCreatedInstance","getInstance","destory_on_create_new","_logicalSwitch","_logicalExp","_triggerTargets","VeryObject","_triggerID","isEnabled","setTriggerID","eventProcess","trigger_class","tempTrigger","_triggerFunctionDics","trigger_type","trigger_para","triggerArray","arr","ele","_keys","_values","Count","Remove","SetValue","ContainsKey","ks","GetKeys","GetValues","_keyMap","key_str","errorInfo_1","para_type","current_number","required_number","requiredStr","var_str","GetVeryVar","vString","GameObjectParaOnlyVar","StringPara","StringParaOnlyVar","VeryString","StringParaWithExpression","setExpression","NumberPara","NumberParaOnlyVar","isNaN","NumberParaWithExpression","BoolPara","BoolParaOnlyVar","Vector3Para","Vector3OrNumberPara","is_vec","floatsArray","Vector3ParaWithExpression","_escapeCharacters","_illegalChar","_formulaChar","strEscapeCharacterAction","para_str","tmpStr","getEscapeCharacter","strSubsectionAction","strBuilder","rStr","bracketFlag","hasQuote","para_char","getEscapeCharacter2","is_escape","strSubsection","needSpace","getParaArrayAll","coloneStr","newPara","j","innerBracket","saveBracket","quotationMark","isEscape","needSaveBracket","str","hasBracket","info","num","floatConvert","veryExpression_1","GetGlobalVar","GetSceneVar","GetGlobalVarWithExpression","GetSceneVarWithExpression","_veryVars","_tempalteVars","value_str","newVal","var_type","_veryVarFunctions","addVarType","var_function","tempVar","getVarType","getSceneVariable","getGlobalVariable","getTemplateVariable","veryVarManager_1","babylonVariables_1","_isExpression","_expression","varClone","rValue","vec3Str","n1","n2","n3","showError_1","loaderManager_1","data","tableData","VeryTable","showErrorTest","veryTableRow_1","_columnIDs","_rows","newRow","VeryTableRow","row_index","column_index","getColumnID","floor","b","addRow","row_data","_rowData","array","insert","tempData","removeEnd","pop","VeryTableSet","tables","_tables","getTable","addTable","removeTable"],"mappings":"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","file":"veryengine.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","///// <reference path=\"./dts/babylon.d.ts\"/>\r\n\r\nimport { VeryEngine, VE_Objects, VE_Manager } from \"./veryengine/veryEngine\";\r\n\r\nimport { BabylonEngine } from \"./veryengine/babylon\";\r\n\r\nexport default class Game {\r\n\tprivate _canvas: HTMLCanvasElement;\r\n\tprivate _fps: HTMLElement;\r\n\tprivate _table!: HTMLElement;\r\n\tprivate _showFps: boolean = true;\r\n\tprivate _engine!: BABYLON.Engine;\r\n\tprivate _scene!: BABYLON.Scene;\r\n\t// private _camera!: BABYLON.FreeCamera;\r\n\r\n\tconstructor(canvasElement: HTMLCanvasElement, fps: HTMLElement) {\r\n\t\tthis._canvas = canvasElement;\r\n\t\tBabylonEngine.Canvas = this._canvas;\r\n\t\tthis._fps = fps;\r\n\t\t// this._engine = new BABYLON.Engine(this._canvas, true);\r\n\t\tthis._table = document.getElementById(\"VeryTable\")!;\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\tcreateScene(): Game {\r\n\t\t// engine\r\n\t\tif (this._engine) {\r\n\t\t\t// TODO: dispose\r\n\t\t\tVE_Manager.dispose();\r\n\t\t\t// console.log(VE_Manager.projects.projects);\r\n\t\t\tthis._engine.dispose();\r\n\t\t}\r\n\t\tthis._engine = new BABYLON.Engine(this._canvas, true);\r\n\t\tBabylonEngine.Engine = this._engine;\r\n\t\t// Resize\r\n\t\tlet engine = this._engine;\r\n\t\twindow.addEventListener(\"resize\", function () {\r\n\t\t\tengine.resize();\r\n\t\t});\r\n\r\n\t\tthis._scene = new BABYLON.Scene(this._engine);\r\n\t\tBabylonEngine.Scene = this._scene;\r\n\r\n\t\t// TODO: \r\n\t\tvar camera = new BABYLON.ArcRotateCamera(\"MainCamera\", 0, 0, 10, new BABYLON.Vector3(0, 0, 0), this._scene);\r\n\t\tcamera.setPosition(new BABYLON.Vector3(20, 200, 400));\r\n\t\tcamera.attachControl(this._canvas, true);\r\n\t\tcamera.lowerBetaLimit = 0.1;\r\n\t\tcamera.upperBetaLimit = (Math.PI / 2) * 0.99;\r\n\t\tcamera.lowerRadiusLimit = 150;\r\n\r\n\t\tlet inputMap: { [key: string]: boolean } = {};\r\n\r\n\t\t// \r\n\t\tengine.displayLoadingUI();\r\n\r\n\t\t// TODO: scene.babylon\r\n\t\tBABYLON.SceneLoader.Append(\"./scene/\", \"scene.babylon\", this._scene, function (scene) {\r\n\t\t\t// do something with the scene\r\n\t\t\t// \r\n\t\t\tengine.hideLoadingUI();\r\n\r\n\t\t\t// Keyboard events\r\n\t\t\t// var blue = scene.getMeshByName('blue')!;\r\n\r\n\t\t\t// scene.actionManager = new BABYLON.ActionManager(scene);\r\n\t\t\t// scene.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnKeyDownTrigger, function (evt) {\r\n\t\t\t// \tinputMap[evt.sourceEvent.key] = evt.sourceEvent.type == \"keydown\";\r\n\t\t\t// }));\r\n\t\t\t// scene.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnKeyUpTrigger, function (evt) {\r\n\t\t\t// \tinputMap[evt.sourceEvent.key] = evt.sourceEvent.type == \"keydown\";\r\n\t\t\t// }));\r\n\r\n\r\n\t\t\t// // Game/Render loop\r\n\t\t\t// scene.onBeforeRenderObservable.add(() => {\r\n\r\n\t\t\t// \tif (inputMap[\"w\"] || inputMap[\"ArrowUp\"]) {\r\n\t\t\t// \t\tblue.position.z -= 100 * engine.getDeltaTime() / 1000;\r\n\t\t\t// \t}\r\n\t\t\t// \tif (inputMap[\"a\"] || inputMap[\"ArrowLeft\"]) {\r\n\t\t\t// \t\tblue.position.x += 100 * engine.getDeltaTime() / 1000;\r\n\t\t\t// \t}\r\n\t\t\t// \tif (inputMap[\"s\"] || inputMap[\"ArrowDown\"]) {\r\n\t\t\t// \t\tblue.position.z += 100 * engine.getDeltaTime() / 1000;\r\n\t\t\t// \t}\r\n\t\t\t// \tif (inputMap[\"d\"] || inputMap[\"ArrowRight\"]) {\r\n\t\t\t// \t\tblue.position.x -= 100 * engine.getDeltaTime() / 1000;\r\n\t\t\t// \t}\r\n\t\t\t// })\r\n\r\n\t\t\t// // sphere\r\n\t\t\t// var sphere = scene.getMeshByName('sphere')!;\r\n\t\t\t// sphere.actionManager = new BABYLON.ActionManager(scene);\r\n\r\n\t\t\t// sphere.actionManager.registerAction(new BABYLON.SetValueAction(\r\n\t\t\t// \t{ trigger: BABYLON.ActionManager.OnIntersectionEnterTrigger, parameter: blue },\r\n\t\t\t// \tsphere, \"scaling\", new BABYLON.Vector3(2, 2, 2)));\r\n\r\n\t\t\t// sphere.actionManager.registerAction(new BABYLON.SetValueAction(\r\n\t\t\t// \t{ trigger: BABYLON.ActionManager.OnIntersectionExitTrigger, parameter: blue }\r\n\t\t\t// \t, sphere, \"scaling\", new BABYLON.Vector3(1, 1, 1)));\r\n\r\n\t\t\t// TODO: \r\n\t\t\t// console.log(hot1.getData());\r\n\t\t\tlet entrance: VeryEngine = new VeryEngine();\r\n\t\t\tconsole.log(`${hot1.countEmptyRows()}`);\r\n\t\t\ttry {\r\n\t\t\t\tentrance.init(hot1.getData(), projectName);\r\n\t\t\t} catch (e) { // TODO: \r\n\t\t\t\tconsole.error(e);\r\n\t\t\t}\r\n\r\n\t\t\tlet objects: VE_Objects = VE_Manager.objects(projectName);\r\n\t\t\t// \r\n\t\t\tscene.onBeforeRenderObservable.add(() => {\r\n\t\t\t\t// \r\n\t\t\t\t// Time._sum();\r\n\r\n\t\t\t\t// \r\n\t\t\t\tfor (let i: number = 0; i < objects.count; i++) {\r\n\t\t\t\t\tlet objectID: string = objects.getObjectID(i);\r\n\t\t\t\t\tobjects.getVeryObject(objectID).update();\r\n\t\t\t\t}\r\n\r\n\t\t\t})\r\n\r\n\t\t});\r\n\r\n\r\n\t\t// const lightPos = new BABYLON.Vector3(0, 1, 0);\r\n\t\t// new BABYLON.HemisphericLight('hemlight', lightPos, this._scene);\r\n\r\n\t\t// const sphereOpts = { segments: 16, diameter: 1 };\r\n\t\t// let sphere = BABYLON.MeshBuilder.CreateSphere(\r\n\t\t// \t'mainsphere',\r\n\t\t// \tsphereOpts,\r\n\t\t// \tthis._scene\r\n\t\t// );\r\n\t\t// sphere.position.y = 1;\r\n\r\n\t\t// const groundOpts = { width: 6, height: 6, subdivisions: 2 };\r\n\t\t// BABYLON.MeshBuilder.CreateGround('mainground', groundOpts, this._scene);\r\n\r\n\r\n\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\tanimate(): Game {\r\n\t\tthis._engine.runRenderLoop(() => {\r\n\t\t\tif (this._canvas.width !== this._canvas.clientWidth) {\r\n\t\t\t\tthis._engine.resize();\r\n\t\t\t}\r\n\r\n\t\t\tif (this._scene) {\r\n\t\t\t\tthis._scene.render();\r\n\t\t\t}\r\n\r\n\t\t\tif (this._showFps) {\r\n\t\t\t\tthis.updateFpsPos();\r\n\t\t\t}\r\n\r\n\r\n\t\t});\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * UI\r\n\t */\r\n\ttoggleDebug(): Game {\r\n\t\tif (this._engine) {\r\n\t\t\t// Always showing the debug layer, because you can close it by itself\r\n\t\t\tvar scene = this._engine.scenes[0];\r\n\t\t\tif (scene.debugLayer.isVisible()) {\r\n\t\t\t\tscene.debugLayer.hide();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// babylon.d.ts\r\n\t\t\t\tscene.debugLayer.show({ embedMode: true });\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * fps\r\n\t */\r\n\tupdateFpsPos(): void {\r\n\t\tif (this._fps) {\r\n\t\t\tthis._fps.style.right = document.body.clientWidth - (this._table.clientWidth + this._canvas.clientWidth) + \"px\";\r\n\r\n\t\t\tthis._fps.innerHTML = this._engine.getFps().toFixed() + \" fps\";\r\n\t\t}\r\n\t}\r\n}\r\n","\r\n\r\nimport Game from \"./game\";\r\n\r\nlet game!: Game;\r\nlet initFlag: boolean = false;\r\n\r\n/**\r\n * \r\n */\r\nfunction initGame(): void {\r\n  let canvas = <HTMLCanvasElement>document.getElementById(\"renderCanvas\");\r\n  let fpsLabel = document.getElementById(\"fpsLabel\");\r\n  if (canvas !== null && fpsLabel !== null) {\r\n    game = new Game(canvas, fpsLabel);\r\n    game.createScene().animate();  // \r\n  }\r\n}\r\n\r\nfunction runBtn(): void {\r\n  if (game) {\r\n    game.createScene().animate();\r\n  }\r\n}\r\n\r\nfunction toggleDebug(): void {\r\n  if (game) {\r\n    game.toggleDebug();\r\n  }\r\n}\r\n\r\nfunction init(): void {\r\n  // \r\n  if(dataLoaded) {\r\n    initGame();\r\n  } else {\r\n    setTimeout(init, 500);\r\n  }\r\n}\r\n\r\n// \r\ndocument.getElementById(\"runButton\")!.addEventListener(\"click\", runBtn);\r\n\r\n// \r\ndocument.getElementById(\"debugButton\")!.addEventListener(\"click\", toggleDebug);\r\n\r\n// \r\n// \r\ninit();\r\n// loadData2()\r\n//   .then(function (hot: HandTable) {\r\n//     console.log(hot.getData());\r\n//   }\r\n//   );\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import { ActionType, SequenceActionState } from \"../enum\";\r\nimport { GameObject } from \"../babylon\";\r\nimport { VeryEngineObject } from \"../object\";\r\n\r\nexport abstract class VE_ActionBehaviour {\r\n\r\n  public abstract get ID(): string;\r\n\r\n  public abstract get className(): string;\r\n\r\n  protected scene!: BABYLON.Scene;\r\n\r\n  public get enabled(): boolean {\r\n    return this._enabled;\r\n  }\r\n  public set enabled(val: boolean) {\r\n    this._enabled = val;\r\n  }\r\n  private _enabled: boolean = true;\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  };\r\n  private _projectName: string = '';\r\n\r\n  protected gameObject: Nullable<GameObject> = null;\r\n  protected veryObject: Nullable<VeryEngineObject> = null;\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  };\r\n  private _objectID: string = '';\r\n\r\n  public get actionID(): string {\r\n    return this._actionID;\r\n  }\r\n  private _actionID: string = '';\r\n\r\n  public get Type(): ActionType {\r\n    return ActionType.Normal;\r\n  }\r\n\r\n  private _erveryFrame: boolean = false;\r\n  public get everyFrame(): boolean {\r\n    return this._erveryFrame;\r\n  }\r\n\r\n\r\n  public isSequence: boolean = false;\r\n\r\n  public get SequenceState(): SequenceActionState {\r\n    return this._sequenceState;\r\n  }\r\n  public set SequenceState(val: SequenceActionState) {\r\n    this._sequenceState = val;\r\n  }\r\n  private _sequenceState: SequenceActionState = SequenceActionState.Initial;\r\n\r\n  // private VE_SequenceActions _sequenceAction = null;\r\n\r\n  public set(scene: BABYLON.Scene): void {\r\n    this.scene = scene;\r\n  }\r\n\r\n  public setEveryFrame(is_every_frame: boolean): void {\r\n    this._erveryFrame = is_every_frame;\r\n  }\r\n\r\n  public setActionID(project_name: string, object_id: string, action_id: string): void {\r\n    this._projectName = project_name;\r\n    this._objectID = object_id;\r\n    this._actionID = action_id;\r\n  }\r\n\r\n  public setVeryObject(very_object: VeryEngineObject): void {\r\n    this.veryObject = very_object;\r\n    this.gameObject = very_object.gameObject;\r\n  }\r\n\r\n  public abstract paraParser(para_array: string[]): boolean;\r\n\r\n  public action(action_val: boolean, every_frame: boolean): void {\r\n    this._enabled = action_val;\r\n    this._erveryFrame = every_frame;\r\n    if (this._enabled) {\r\n      this.active()\r\n      if (!this._erveryFrame) {\r\n        this.onUpdate();\r\n      }\r\n    }\r\n  }\r\n\r\n  public abstract active(): void;\r\n\r\n\r\n  public update(): void {\r\n    if (this._enabled && this._erveryFrame) {\r\n      this.onUpdate();\r\n    }\r\n  }\r\n\r\n  public onUpdate(): void {\r\n\r\n  }\r\n\r\n  public pause(): void {\r\n    this._sequenceState = SequenceActionState.Pause;\r\n  }\r\n\r\n  public resume(): void {\r\n    this._sequenceState = SequenceActionState.Running;\r\n  }\r\n\r\n  public stop(): void {\r\n    this._sequenceState = SequenceActionState.Initial;\r\n  }\r\n\r\n  public finish(): void {\r\n    this._sequenceState = SequenceActionState.Initial;\r\n\r\n    this.enabled = false;\r\n  }\r\n\r\n  // add callbackdestroy\r\n  public abstract destroy(): void;\r\n\r\n\r\n}","import { VE_ActionBehaviour } from \"./actionBehaviour\";\r\nimport { VeryEngineObject, VE_Objects } from \"../object\";\r\nimport { StateConst } from \"../state\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { GameGlobal, VE_ErrorManager, VE_Error } from \"../global\";\r\nimport { ErrorInfo, VE_TypeConvert } from \"../utility\";\r\nimport { BabylonEngine } from \"../babylon\";\r\nimport { Severity } from \"../enum\";\r\n\r\nexport class VE_Actions {\r\n\r\n  // private static _actionDics: { [key: string]: VE_ActionBehaviour } = {};\r\n\r\n  private static _actionFunctionDics: { [key: string]: Function } = {};\r\n\r\n  // public static addAction(action: VE_ActionBehaviour): void {\r\n  //   // \r\n  //   if (!GameGlobal.PlatformLoaded) {\r\n  //     let ids: string[] = action.ID.split('|');\r\n  //     for (let i: number = 0; i < ids.length; i++) {\r\n  //       let id: string = ids[i].trim().toLowerCase();\r\n  //       if (this._actionDics[id]) {\r\n  //         ShowError.showError(`IDID${id}ID`);\r\n  //       } else {\r\n  //         this._actionDics[id] = action;\r\n  //       }\r\n  //     }\r\n  //   }\r\n  // }\r\n\r\n  public static addAction(action_class: Function): void {\r\n    // \r\n    if (!GameGlobal.PlatformLoaded) {\r\n      let tempAction: any = new action_class.prototype.constructor();\r\n      // console.log(`ID  ${tempAction.ID}  ${tempAction.className} `);\r\n      let ids: string[] = tempAction.ID.split('|');\r\n      for (let i: number = 0; i < ids.length; i++) {\r\n        let id: string = ids[i].trim().toLowerCase();\r\n        if (this._actionFunctionDics[id]) {\r\n          VE_ErrorManager.Add(new VE_Error('', `IDID${id}${tempAction.className}ID`, '', Severity.Error));\r\n        } else {\r\n          this._actionFunctionDics[id] = action_class;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public static hasAction(action_id: string): boolean {\r\n    action_id = action_id.toLowerCase();\r\n    if (this._actionFunctionDics[action_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static createAction(very_object: VeryEngineObject, action_id: string, action_type: string, action_para: string[], init_val: string[], error_info: ErrorInfo): Nullable<VE_ActionBehaviour> {\r\n    action_type = action_type.toLowerCase();\r\n    if (!this._actionFunctionDics[action_type]) {\r\n      error_info.isRight = false;\r\n      error_info.message = `` + action_type;\r\n      return null;\r\n    }\r\n    // console.log(this._actionFunctionDics[action_type]);\r\n    let variable: any;\r\n    try {\r\n      // variable = Object.create(this._actionDics[action_type]);\r\n      // newObject.createprototype\r\n      variable = new this._actionFunctionDics[action_type].prototype.constructor();\r\n\r\n      if (!variable) {\r\n        error_info.isRight = false;\r\n        error_info.message = '' + action_type;\r\n        return null;\r\n      }\r\n\r\n      let action: VE_ActionBehaviour = <VE_ActionBehaviour>variable;\r\n      action.set(BabylonEngine.Scene);\r\n      action.setVeryObject(very_object);\r\n      action.setActionID(very_object.projectName, very_object.objectID, action_id);\r\n      if (!action.paraParser(action_para)) {\r\n        error_info.isRight = false;\r\n        error_info.message = \"\";\r\n        return null;\r\n      }\r\n\r\n      // TODO:\r\n      error_info.clear();\r\n      let everyFrameFlag = VE_TypeConvert.boolConvert(init_val[1], error_info);\r\n      if(!error_info.isRight) {\r\n        error_info.isRight = false;\r\n        error_info.message = \"booltruefalse\";\r\n        return null;\r\n      }\r\n      action.setEveryFrame(everyFrameFlag);\r\n      action.enabled = false;\r\n\r\n      return action;\r\n    } catch (error) {\r\n      console.error(`${error.message}`);\r\n      error_info.isRight = false;\r\n      error_info.message = '' + action_type + '' + error.message;\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static remove(action_type: string): void {\r\n    action_type = action_type.toLowerCase();\r\n    delete this._actionFunctionDics[action_type];\r\n  }\r\n\r\n  public static findAction(very_object: VeryEngineObject, action_id: string): Nullable<VE_ActionBehaviour> {\r\n    if (very_object.isCreatedAction(action_id)) {\r\n      return very_object.getAction(action_id);\r\n    }\r\n    else {\r\n      let actionArray: string[] = action_id.split(StateConst.STATE_SEPARATOR);\r\n      if (actionArray.length === 2) {\r\n        let objects: VE_Objects = VE_Manager.objects(very_object.projectName);\r\n        let objectID: string = actionArray[0].trim();\r\n        let actionID: string = actionArray[1].trim();\r\n        if (objects.isCreated(objectID)) {\r\n          let otherObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n          if (otherObject.isCreatedAction(actionID)) {\r\n            return otherObject.getAction(actionID);\r\n          }\r\n          else {\r\n            return null;\r\n          }\r\n        }\r\n        else {\r\n          return null;\r\n        }\r\n      }\r\n      else {\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public static dispose(): void {\r\n    VE_Actions._actionFunctionDics = {};\r\n  }\r\n}","import { VE_State } from \"../state\";\r\nimport { AssignType } from \"../enum\";\r\nimport { IVeryVar } from \"../variables\";\r\nimport { VE_Template } from \"../template\";\r\nimport { ShowError } from \"../html\";\r\nimport { ErrorInfo } from \"../utility\";\r\nimport { IExpression } from \"../expression\";\r\nimport { VE_AssignmentTypeJudge } from \"./assignmentTypeJudge\";\r\n\r\nexport class VE_Assignment {\r\n\r\n  public get state(): VE_State {\r\n    return this._state;\r\n  }\r\n  private _state: VE_State;\r\n\r\n  private _totalStr: string = '';\r\n\r\n  public get leftType(): AssignType {\r\n    return this._leftType;\r\n  }\r\n  private _leftType: AssignType = AssignType.Variable;\r\n\r\n  public get rightType(): AssignType {\r\n    return this._rightType;\r\n  }\r\n  private _rightType: AssignType = AssignType.Variable;\r\n\r\n  public get leftVariable(): Nullable<IVeryVar> {\r\n    return this._leftVariable;\r\n  }\r\n  private _leftVariable: Nullable<IVeryVar> = null;\r\n  private _leftTemplate: Nullable<VE_Template> = null;\r\n  private _leftVarID: string = '';\r\n\r\n  private _rightConstStr: string = '';\r\n  private _rightConstValue: any = null;\r\n  public get rightVariable(): Nullable<IVeryVar> {\r\n    return this._leftVariable;\r\n  }\r\n  private _rightVariable: Nullable<IVeryVar> = null;\r\n  private _rightTemplate: Nullable<VE_Template> = null;\r\n  private _rightVarID: string = '';\r\n\r\n  private _pos: string = '';\r\n\r\n  constructor(state: VE_State, total_string: string) {\r\n    this._state = state;\r\n    this._totalStr = total_string;\r\n  }\r\n\r\n  public setPos(pos: string): void {\r\n    this._pos = pos;\r\n  }\r\n\r\n  public setLeftVariable(variable: IVeryVar): void {\r\n    this._leftType = AssignType.Variable;\r\n    this._leftVariable = variable;\r\n  }\r\n\r\n  public setLeftTemplate(template: VE_Template): void {\r\n    this._leftType = AssignType.Template;\r\n    this._leftTemplate = template;\r\n  }\r\n\r\n  public setLeftTemplateVar(template: VE_Template, var_id: string): void {\r\n    this._leftType = AssignType.TemplateVariable;\r\n    this._leftTemplate = template;\r\n    this._leftVarID = var_id;\r\n  }\r\n\r\n  public setRightVariable(variable: IVeryVar): void {\r\n    this._rightType = AssignType.Variable;\r\n    this._rightVariable = variable;\r\n  }\r\n\r\n  public setRightTemplate(template: VE_Template): void {\r\n    this._rightType = AssignType.Template;\r\n    this._rightTemplate = template;\r\n  }\r\n\r\n  public setRightNull(): void {\r\n    this._rightType = AssignType.Template;\r\n    this._rightTemplate = null;\r\n  }\r\n\r\n  public setRightTemplateVariable(template: VE_Template, var_id: string): void {\r\n    this._rightType = AssignType.TemplateVariable;\r\n    this._rightTemplate = template;\r\n    this._rightVarID = var_id;\r\n  }\r\n\r\n  public setRightConst(const_str: string): void {\r\n    this._rightType = AssignType.Const;\r\n    this._rightConstStr = const_str;\r\n  }\r\n\r\n  public setRightConstValue(const_value: any) {\r\n    this._rightType = AssignType.Const;\r\n    this._rightConstValue = const_value;\r\n  }\r\n\r\n  public finish(): void {\r\n\r\n  }\r\n\r\n  public assign(): void {\r\n    // \r\n    if (this._leftType === AssignType.Variable) {\r\n      this.rightAssignment();\r\n    }\r\n    // \r\n    else if (this._leftType === AssignType.Template) {\r\n      if (this._rightTemplate == null) {\r\n        if (this._leftTemplate !== null) {\r\n          this._leftTemplate.unload();\r\n        }\r\n      }\r\n      else {\r\n        this._leftTemplate = this._rightTemplate;\r\n      }\r\n    }\r\n    // .\r\n    else {\r\n      if (this._leftTemplate!.templateInstance !== null) {\r\n        if (this._leftTemplate!.templateInstance.isCreatedExpression(this._leftVarID)) {\r\n          ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n          return;\r\n        }\r\n        else if (this._leftTemplate!.templateInstance.isCreatedVariable(this._leftVarID)) {\r\n          this._leftVariable = this._leftTemplate!.templateInstance.getVariable(this._leftVarID);\r\n          this.rightAssignment();\r\n        }\r\n        else if (this._leftTemplate!.templateInstance.isCreatedFsm(this._leftVarID)) {\r\n          this._leftVariable = this._leftTemplate!.templateInstance.getFsm(this._leftVarID).fsmVar;\r\n          this.rightAssignment();\r\n        }\r\n        else {\r\n          ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n          return;\r\n        }\r\n      }\r\n      else {\r\n        ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._leftTemplate!.templateVarID);\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n  private rightAssignment(): void {\r\n    // \r\n    if (this._rightType === AssignType.Variable) {\r\n      this._leftVariable!.setValue(this._rightVariable!.getValue());\r\n    }\r\n    // \r\n    else if (this._rightType === AssignType.Const) {\r\n      if (this._rightConstValue === null) {\r\n        let errorInfo: ErrorInfo = new ErrorInfo();\r\n        this._rightConstValue = this._leftVariable!.initValue(this._rightConstStr, errorInfo);\r\n        if (!errorInfo.isRight) {\r\n          ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightConstStr);\r\n          return;\r\n        }\r\n        else {\r\n          //UnityEngine.Debug.Log(\"1 - \" + _totalStr + \"\" + this._rightConstValue);\r\n          this._leftVariable!.setValue(this._rightConstValue);\r\n        }\r\n      }\r\n      else {\r\n        //UnityEngine.Debug.Log(\"2 - \" + _totalStr + \"\" + this._rightConstValue);\r\n        this._leftVariable!.setValue(this._rightConstValue);\r\n      }\r\n    }\r\n    else  //.\r\n    {\r\n      if (this._rightTemplate!.templateInstance != null) {\r\n        if (this._rightTemplate!.templateInstance.isCreatedExpression(this._rightVarID)) {\r\n          let exp: IExpression = this._rightTemplate!.templateInstance.getExpression(this._rightVarID);\r\n          if (VE_AssignmentTypeJudge.allowExpression(this._leftVariable!, exp)) {\r\n            this._leftVariable!.setValue(exp.evaluate());\r\n          }\r\n          else {\r\n            ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n            return;\r\n          }\r\n        }\r\n        else if (this._rightTemplate!.templateInstance.isCreatedVariable(this._rightVarID)) {\r\n          let v: IVeryVar = this._rightTemplate!.templateInstance.getVariable(this._rightVarID);\r\n          if (VE_AssignmentTypeJudge.allow(this._leftVariable!, v)) {\r\n            this._leftVariable!.setValue(v.getValue());\r\n          }\r\n          else {\r\n            ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n            return;\r\n          }\r\n        }\r\n        else if (this._rightTemplate!.templateInstance.isCreatedFsm(this._rightVarID)) {\r\n          let v: IVeryVar = this._rightTemplate!.templateInstance.getFsm(this._rightVarID).fsmVar;\r\n          if (VE_AssignmentTypeJudge.allow(this._leftVariable!, v)) {\r\n            this._leftVariable!.setValue(v.getValue());\r\n          }\r\n          else {\r\n            ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n            return;\r\n          }\r\n        }\r\n        else {\r\n          ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n          return;\r\n        }\r\n      }\r\n      else {\r\n        ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n}","import { IVeryVar } from \"../variables\";\r\nimport { IExpression } from \"../expression\";\r\n\r\nexport class VE_AssignmentTypeJudge {\r\n\r\n  public static allow(first: IVeryVar, second: IVeryVar): boolean {\r\n    if (first.varType === second.varType) {\r\n      return true;\r\n    }\r\n    else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static allowExpression(first: IVeryVar, second: IExpression): boolean {\r\n    if (first.varType === second.expType) {\r\n      return true;\r\n    }\r\n    else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n}","export * from './actionBehaviour';\r\nexport * from './assignment';\r\nexport * from './actions';\r\nexport * from './sequenceActions';","import { SequenceActionState } from \"../enum\";\r\n\r\nexport class VE_SequenceActions {\r\n\r\n  public get sequenceState(): SequenceActionState {\r\n    return this._sequenceState;\r\n  }\r\n  private _sequenceState: SequenceActionState = SequenceActionState.Initial;\r\n\r\n  private _activeActionIndex: number = -1;\r\n\r\n\r\n\r\n  \r\n  \r\n}","import { BabylonEngine } from \"./engine\";\r\n\r\n\r\nexport class GameObject {\r\n\r\n\r\n  public get gameObject(): GameObject {\r\n    return this;\r\n  }\r\n\r\n  public get transform(): Transform {\r\n    return this._transform;\r\n  }\r\n  public set transform(val: Transform) {\r\n    this._transform = val;\r\n  }\r\n  private _transform: Transform;\r\n\r\n  public get name(): string {\r\n    return this.transform.name;\r\n  }\r\n  public set name(val: string) {\r\n    this.transform.name = val;\r\n  }\r\n\r\n  public get isEmpty(): boolean {\r\n    return this._transform.isEmpty;\r\n  }\r\n\r\n\r\n  constructor(name?: string, mesh: Nullable<BABYLON.Mesh> = null, node: Nullable<BABYLON.TransformNode> = null) {\r\n    if (mesh) {\r\n      this._transform = new Transform('', mesh);\r\n    } else {\r\n      if (node) {\r\n        this._transform = new Transform('', null, node);\r\n      } else if (name) {\r\n        this._transform = new Transform(name);\r\n      } else {\r\n        this._transform = new Transform();\r\n      }\r\n    }\r\n  }\r\n\r\n  // TODO\r\n  public static Find(name: string, scene?: BABYLON.Scene): Nullable<GameObject> {\r\n    if (!scene) {\r\n      scene = BabylonEngine.Scene;\r\n    }\r\n    let node: Nullable<BABYLON.Node> = scene.getNodeByName(name);\r\n    if (!node) {\r\n      return null;\r\n    } else {\r\n      if (node instanceof BABYLON.Mesh) {\r\n        return new GameObject('', <BABYLON.Mesh>node);\r\n      } else if (node instanceof BABYLON.TransformNode) {\r\n        return new GameObject('', null, <BABYLON.TransformNode>node);\r\n      } else {\r\n        console.error('GameObject.Find' + node.getClassName());\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  // public static empty(name: string): GameObject {\r\n\r\n  // }\r\n\r\n}\r\n\r\n\r\nexport class Transform {\r\n\r\n  // public get gameObject(): GameObject {\r\n  //   return this._gameObject;\r\n  // }\r\n  // private _gameObject: GameObject;\r\n\r\n  private _transformNode: BABYLON.Nullable<BABYLON.TransformNode> = null;\r\n  private _mesh: BABYLON.Nullable<BABYLON.Mesh> = null;\r\n\r\n  public get transformNode(): Nullable<BABYLON.TransformNode> {\r\n    if (this._mesh) {\r\n      return this._mesh;\r\n    } else if (this._transformNode) {\r\n      return this._transformNode;\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public get isMesh(): boolean {\r\n    if (this._mesh) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public get isEmpty(): boolean {\r\n    if (this._transformNode || this._mesh) {\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  // public get parent(): Nullable<BABYLON.TransformNode>\r\n\r\n  public get name(): string {\r\n    return this._name;\r\n  }\r\n  public set name(val: string) {\r\n    if (this._transformNode) {\r\n      this._transformNode.name = val;\r\n    }\r\n    if (this._mesh) {\r\n      this._mesh.name = val;\r\n    }\r\n    this._name = val;\r\n  }\r\n  private _name: string = '';\r\n\r\n  private _tempVec: BABYLON.Vector3 = BABYLON.Vector3.Zero();\r\n\r\n  /**\r\n   * \r\n   */\r\n  public get localPosition(): BABYLON.Vector3 {\r\n    if (this.isEmpty) {\r\n      return BABYLON.Vector3.Zero();\r\n    } else {\r\n      this._tempVec.copyFrom(this.transformNode!.position);\r\n      return this._tempVec;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public set localPosition(val: BABYLON.Vector3) {\r\n    if (!this.isEmpty) {\r\n      this.transformNode!.position = val;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public get position(): BABYLON.Vector3 {\r\n    if (this.isEmpty) {\r\n      return BABYLON.Vector3.Zero();\r\n    } else {\r\n      this._tempVec.copyFrom(this.transformNode!.getAbsolutePosition());\r\n      return this._tempVec;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public set position(val: BABYLON.Vector3) {\r\n    if (!this.isEmpty) {\r\n      this.transformNode!.setAbsolutePosition(val);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public get localEulerAngles(): BABYLON.Vector3 {\r\n    if (this.isEmpty) {\r\n      return BABYLON.Vector3.Zero();\r\n    } else {\r\n      let para: number = 180 / Math.PI;\r\n      return this.transformNode!.rotation.multiplyByFloats(para, para, para);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public set localEulerAngles(val: BABYLON.Vector3) {\r\n    if (!this.isEmpty) {\r\n      let para: number = Math.PI / 180;\r\n      this.transformNode!.rotation = val.multiplyByFloats(para, para, para);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public get localRotation(): BABYLON.Vector3 {\r\n    if (this.isEmpty) {\r\n      return BABYLON.Vector3.Zero();\r\n    } else {\r\n      this._tempVec.copyFrom(this.transformNode!.rotation);\r\n      return this._tempVec;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public set localRotation(val: BABYLON.Vector3) {\r\n    if (!this.isEmpty) {\r\n      this.transformNode!.rotation = val;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public get eulerAngles(): BABYLON.Vector3 {\r\n    if (this.isEmpty) {\r\n      return BABYLON.Vector3.Zero();\r\n    } else {\r\n      let parent: Nullable<BABYLON.Node> = this.transformNode!.parent;\r\n      let para: number = 180 / Math.PI;\r\n      this.transformNode!.setParent(null);\r\n      let result: BABYLON.Vector3 = this.transformNode!.rotation.multiplyByFloats(para, para, para);\r\n      this.transformNode!.setParent(parent);\r\n      return result;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public set eulerAngles(val: BABYLON.Vector3) {\r\n    if (!this.isEmpty) {\r\n      let parent: Nullable<BABYLON.Node> = this.transformNode!.parent;\r\n      let para: number = Math.PI / 180;\r\n      this.transformNode!.setParent(null);\r\n      this.transformNode!.rotation = val.multiplyByFloats(para, para, para);\r\n      this.transformNode!.setParent(parent);\r\n\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public get rotation(): BABYLON.Vector3 {\r\n    if (this.isEmpty) {\r\n      return BABYLON.Vector3.Zero();\r\n    } else {\r\n      let parent: Nullable<BABYLON.Node> = this.transformNode!.parent;\r\n      this.transformNode!.setParent(null);\r\n      this._tempVec.copyFrom(this.transformNode!.rotation);\r\n      this.transformNode!.setParent(parent);\r\n      return this._tempVec;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public set rotation(val: BABYLON.Vector3) {\r\n    if (!this.isEmpty) {\r\n      let parent: Nullable<BABYLON.Node> = this.transformNode!.parent;\r\n      this.transformNode!.setParent(null);\r\n      this.transformNode!.rotation = val;\r\n      this.transformNode!.setParent(parent);\r\n    }\r\n  }\r\n\r\n\r\n  public get childCount(): number {\r\n    return 0;\r\n  }\r\n\r\n  public forward: BABYLON.Vector3 = BABYLON.Vector3.Forward();\r\n\r\n\r\n  public get hierarchyCount(): number {\r\n    return 0;\r\n  }\r\n\r\n  public localScale: BABYLON.Vector3 = new BABYLON.Vector3(1, 1, 1);\r\n\r\n\r\n\r\n  constructor(name?: string, mesh: Nullable<BABYLON.Mesh> = null, node: Nullable<BABYLON.TransformNode> = null) {\r\n    if (mesh) {\r\n      this._mesh = mesh;\r\n      this._transformNode = mesh;\r\n      this._name = mesh.name;\r\n    } else {\r\n      if (node) {\r\n        this._mesh = null;\r\n        this._transformNode = node;\r\n        this._name = node.name;\r\n      } else if (name) {\r\n        this._mesh = null;\r\n        this._transformNode = new BABYLON.TransformNode(name);\r\n        this._name = name;\r\n      } else {\r\n        this._mesh = null;\r\n        this._transformNode = null;\r\n        this._name = '';\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param translation \r\n   * @param relativeTo LOCALWORLD\r\n   */\r\n  public translate(translation: BABYLON.Vector3, relativeTo: BABYLON.Space): void {\r\n    if (this.transformNode) {\r\n      this.transformNode.translate(translation, 1, relativeTo);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * null\r\n   * @param translation \r\n   * @param trans \r\n   */\r\n  public translateRelativeTo(translation: BABYLON.Vector3, trans: Transform): void {\r\n    if (this.transformNode) {\r\n      let direction: BABYLON.Vector3 = translation.clone();\r\n      if(trans && trans.transformNode) {\r\n        direction = this.transformDirection(direction);\r\n      } \r\n      this.transformNode.translate(direction, 1, BABYLON.Space.WORLD);\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  /**\r\n   * \r\n   * @param local_position \r\n   */\r\n  public transformPosition(local_position: BABYLON.Vector3): BABYLON.Vector3 {\r\n    if (this.transformNode) {\r\n      let matrix: BABYLON.Matrix = this.transformNode.computeWorldMatrix();\r\n      return BABYLON.Vector3.TransformCoordinates(local_position, matrix);\r\n    } else {\r\n      return local_position;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param local_direction \r\n   */\r\n  public transformDirection(local_direction: BABYLON.Vector3): BABYLON.Vector3 {\r\n    if (this.transformNode) {\r\n      let matrix: BABYLON.Matrix = this.transformNode.computeWorldMatrix();\r\n      return BABYLON.Vector3.TransformCoordinates(local_direction, matrix).subtract(this.transformNode.getAbsolutePosition());\r\n    } else {\r\n      return local_direction;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param global_position \r\n   */\r\n  public inverseTransformPosition(global_position: BABYLON.Vector3): BABYLON.Vector3 {\r\n    if (this.transformNode) {\r\n      let matrix: BABYLON.Matrix = BABYLON.Matrix.Invert(this.transformNode.computeWorldMatrix());\r\n      return BABYLON.Vector3.TransformCoordinates(global_position, matrix);\r\n    } else {\r\n      return global_position;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param global_direction \r\n   */\r\n  public inverseTransformDirection(global_direction: BABYLON.Vector3): BABYLON.Vector3 {\r\n    if (this.transformNode) {\r\n      let matrix: BABYLON.Matrix = BABYLON.Matrix.Invert(this.transformNode.computeWorldMatrix());\r\n      let pointA: BABYLON.Vector3 = BABYLON.Vector3.TransformCoordinates(global_direction, matrix);\r\n      let pointOrigin: BABYLON.Vector3 = BABYLON.Vector3.TransformCoordinates(BABYLON.Vector3.Zero(), matrix);\r\n      return pointA.subtract(pointOrigin);\r\n    } else {\r\n      return global_direction;\r\n    }\r\n  }\r\n\r\n}\r\n\r\n\r\n// let trans: Transform = new Transform();\r\n// let trans2: Transform = new Transform(null, null, 'my name');\r\n// let trans3: Transform = new Transform(new BABYLON.TransformNode('a', null));","export class BabylonEngine {\r\n  public static Canvas: HTMLCanvasElement;\r\n  public static Engine: BABYLON.Engine;\r\n  public static Scene: BABYLON.Scene;\r\n}","export * from './babylonVariables';\r\nexport * from './time';\r\nexport * from './engine';","import { BabylonEngine } from \"./engine\";\r\n\r\nexport class Time {\r\n  \r\n  public static get frameCount(): number {\r\n    return this._frame;\r\n  }\r\n  private static _frame: number = 0;\r\n\r\n\r\n  public static get deltaTime(): number {\r\n    // return 1.0 / GameGlobal.Engine.getFps();\r\n    return BabylonEngine.Engine.getDeltaTime() * 0.001;\r\n  }\r\n\r\n  public static _sum(): void {\r\n    this._frame++;\r\n  }\r\n}","import { VE_FsmData } from \"./fsmData\";\r\n\r\nexport class VE_DataSource {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = '';\r\n\r\n  public get templateID(): string {\r\n    return this._templateID;\r\n  }\r\n  private _templateID: string = '';\r\n\r\n  public get isTemplate(): boolean {\r\n    return this._isTemplate;\r\n  }\r\n  private _isTemplate: boolean = false;\r\n\r\n  public get id(): string {\r\n    if (this._isTemplate) {\r\n      return this._templateID;\r\n    } else {\r\n      return this._objectID;\r\n    }\r\n  }\r\n\r\n  private _fsmIDs: string[] = [];\r\n  private _fsmDic: { [key: string]: VE_FsmData } = {};\r\n  private _fsmPosDic: { [key: string]: string } = {};\r\n\r\n  private _triggerIDs: string[] = [];\r\n  private _triggerDic: { [key: string]: string[] } = {};\r\n  private _triggerPosDic: { [key: string]: string } = {};\r\n\r\n  private _actionIDs: string[] = [];\r\n  private _actionDic: { [key: string]: string[] } = {};\r\n  private _actionInitValue: { [key: string]: string[] } = {};\r\n  private _actionPosDic: { [key: string]: string } = {};\r\n\r\n  public get triggerCount(): number {\r\n    return this._triggerIDs.length;\r\n  }\r\n\r\n  public get actionCount(): number {\r\n    return this._actionIDs.length;\r\n  }\r\n\r\n  public get fsmCount(): number {\r\n    return this._fsmIDs.length;\r\n  }\r\n\r\n\r\n  constructor(project_name: string, name_id: string, is_template: boolean) {\r\n    this._projectName = project_name;\r\n    this._isTemplate = is_template;\r\n    if(is_template) {\r\n      this._templateID = name_id;\r\n    } else {\r\n      this._objectID = name_id;\r\n    }\r\n  }\r\n\r\n  public isCreatedFsm(fsm_id: string): boolean {\r\n    if(this._fsmDic[fsm_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public createFsm(fsm_id: string, pos: string): void {\r\n    this._fsmIDs.push(fsm_id);\r\n    this._fsmDic[fsm_id] = new VE_FsmData(fsm_id, this);\r\n    this._fsmPosDic[fsm_id] = pos;\r\n  }\r\n\r\n  public getFsmData(fsm_id: string): VE_FsmData {\r\n    return this._fsmDic[fsm_id];\r\n  }\r\n\r\n  public getFsmPos(fsm_id: string): string {\r\n    return this._fsmPosDic[fsm_id];\r\n  }\r\n\r\n  public hasFsmIndex(index: number): boolean {\r\n    if(index >= 0 && index < this._fsmIDs.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getFsmID(index: number): string {\r\n    return this._fsmIDs[index];\r\n  }\r\n\r\n  public isCreatedTrigger(trigger_id: string): boolean {\r\n    if(this._triggerDic[trigger_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTrigger(trigger_id: string, trigger_data: string[], pos: string): void {\r\n    this._triggerIDs.push(trigger_id);\r\n    this._triggerDic[trigger_id] = trigger_data;\r\n    this._triggerPosDic[trigger_id] = pos;\r\n  }\r\n\r\n  public getTrigger(trigger_id: string): string[] {\r\n    return this._triggerDic[trigger_id];\r\n  }\r\n\r\n  public getTriggerPos(trigger_id: string): string {\r\n    return this._triggerPosDic[trigger_id];\r\n  }\r\n\r\n  public hasTriggerIndex(index: number): boolean {\r\n    if(index >=0 && index < this._triggerIDs.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getTriggerID(index: number): string {\r\n    return this._triggerIDs[index];\r\n  }\r\n\r\n  public getTriggerPara(trigger_id: string): string[] {\r\n    return this._triggerDic[trigger_id];\r\n  }\r\n\r\n  public isCreatedAction(action_id: string): boolean {\r\n    if(this._actionDic[action_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addAction(action_id: string, action_data: string[], action_init_val: string[], pos: string): void {\r\n    this._actionIDs.push(action_id);\r\n    this._actionDic[action_id] = action_data;\r\n    this._actionInitValue[action_id] = action_init_val;\r\n    this._actionPosDic[action_id] = pos;\r\n  }\r\n\r\n  public getActionPara(action_id: string): string[] {\r\n    return this._actionDic[action_id];\r\n  }\r\n\r\n  public getActionPos(action_id: string): string {\r\n    return this._actionPosDic[action_id];\r\n  }\r\n\r\n  public getActionInitVal(action_id: string): string[] {\r\n    return this._actionInitValue[action_id];\r\n  }\r\n\r\n  public hasActionIndex(index: number): boolean {\r\n    if(index >= 0 && index < this._actionIDs.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getActionID(index: number): string {\r\n    return this._actionIDs[index];\r\n  }\r\n\r\n  public clear(): void {\r\n    this._fsmIDs = [];\r\n    this._fsmDic = {};\r\n    this._triggerIDs = [];\r\n    this._triggerDic = {};\r\n    this._actionIDs = [];\r\n    this._actionDic = {};\r\n    this._actionInitValue = {};\r\n  }\r\n\r\n\r\n\r\n}","import { VE_DataSource, VE_StateData } from \"./index\";\r\n\r\nexport class VE_FsmData {\r\n  public get dataSource(): VE_DataSource {\r\n    return this._dataSource;\r\n  }\r\n  private _dataSource: VE_DataSource;\r\n\r\n  public get fsmID(): string {\r\n    return this._fsmID;\r\n  }\r\n  private _fsmID: string;\r\n\r\n  public get fsmType(): string {\r\n    return this._fsmType;\r\n  }\r\n  private _fsmType: string = '';\r\n\r\n  public get initialValStr(): string {\r\n    return this._initialValStr;\r\n  }\r\n  private _initialValStr: string = 'defalut';\r\n\r\n  private _states: VE_StateData[] = [];\r\n\r\n  public get count(): number {\r\n    return this._states.length;\r\n  }\r\n\r\n  constructor(fsm_id: string, data_source: VE_DataSource) {\r\n    this._dataSource = data_source;\r\n    this._fsmID = fsm_id;\r\n  }\r\n\r\n  public initFsm(fsm_type: string, initial_var: string): void {\r\n    this._fsmType = fsm_type;\r\n    this._initialValStr = initial_var;\r\n  }\r\n\r\n  public addState(state_data: VE_StateData): void {\r\n    this._states.push(state_data);\r\n  }\r\n\r\n  public getStateData(index: number): VE_StateData {\r\n    return this._states[index];\r\n  }\r\n\r\n}","export * from './variableData';\r\nexport * from './fsmData';\r\nexport * from './stateActionData';\r\nexport * from './stateTriggerData';\r\nexport * from './stateData';\r\nexport * from './dataSource';\r\n\r\n","import { StateActionType } from \"../enum\";\r\n\r\nexport class VE_StateActionData {\r\n\r\n  public actionID: string;\r\n  public enabled: string;\r\n  public everyFrame: string;\r\n  public isSequence: string;\r\n  public type: StateActionType;\r\n  public totalString: string = '';\r\n  public varID: string = '';\r\n  public varValue: string = '';\r\n\r\n  constructor(action_id: string, enabled: string = 'false', every_frame: string = 'false', sequence: string = 'false', type: StateActionType = StateActionType.Action) {\r\n    this.actionID = action_id;\r\n    this.enabled = enabled;\r\n    this.everyFrame = every_frame;\r\n    this.isSequence = sequence;\r\n    this.type = type;\r\n  }\r\n\r\n  public setNormalAction(action_id: string, enabled: string = 'false', every_frame: string = 'false', sequence: string = 'false'): void {\r\n    this.actionID = action_id;\r\n    this.enabled = enabled;\r\n    this.everyFrame = every_frame;\r\n    this.isSequence = sequence;\r\n    this.type = StateActionType.Action;\r\n  }\r\n\r\n  public setAssignmentAction(total_string: string, var_id: string, var_value: string): void {\r\n    this.totalString = total_string;\r\n    this.varID = var_id;\r\n    this.varValue = var_value;\r\n    this.type = StateActionType.Assignment;\r\n  }\r\n\r\n}","import { VE_FsmData } from \"./index\";\r\nimport { StateConst } from \"../state\";\r\nimport { VE_StateTriggerData } from \"./stateTriggerData\";\r\nimport { VE_StateActionData } from \"./stateActionData\";\r\n\r\nexport class VE_StateData {\r\n\r\n  public get fsmData(): VE_FsmData {\r\n    return this._fsmData;\r\n  }\r\n  private _fsmData: VE_FsmData;\r\n\r\n  public get ValStr(): string {\r\n    return this._valStr;\r\n  }\r\n  private _valStr: string;\r\n\r\n  public get isInitialValue(): boolean {\r\n    return this._isInitialValue;\r\n  }\r\n  private _isInitialValue: boolean;\r\n\r\n  public get stateIndex(): number {\r\n    return this._stateIndex;\r\n  }\r\n  private _stateIndex: number = StateConst.STATE_INDEX;\r\n\r\n  public logicalExp: string = '';\r\n\r\n  public rowIndex: number = -1;\r\n\r\n  private _triggers: VE_StateTriggerData[] = [];\r\n  private _triggersPos: string[] = [];\r\n  private _actions: VE_StateActionData[] = [];\r\n  private _actionsPos: string[] = [];\r\n  private _associatedStates: string[] = [];\r\n  private _associatedStatesPos: string[] = [];\r\n\r\n  public get isSequence(): boolean {\r\n    return this._isSequence;\r\n  }\r\n  private _isSequence: boolean = false;\r\n\r\n  public get triggerCount(): number {\r\n    return this._triggers.length;\r\n  }\r\n\r\n  public get actionCount(): number {\r\n    return this._actions.length;\r\n  }\r\n\r\n  public get associatedStateCount(): number {\r\n    return this._associatedStates.length;\r\n  }\r\n\r\n  constructor(fsm_data: VE_FsmData, val_str: string, is_initial_value: boolean, state_index: number = StateConst.STATE_INDEX) {\r\n    this._fsmData = fsm_data;\r\n    this._valStr = val_str;\r\n    this._isInitialValue = is_initial_value;\r\n    this._stateIndex = state_index;\r\n  }\r\n\r\n  public hasTrigger(index: number): boolean {\r\n    if(index >= 0 && index < this._triggers.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTrigger(trigger_data: VE_StateTriggerData, pos: string): void {\r\n    this._triggers.push(trigger_data);\r\n    this._triggersPos.push(pos);\r\n  }\r\n\r\n  public getTrigger(index: number): VE_StateTriggerData {\r\n    return this._triggers[index];\r\n  }\r\n\r\n  public getTriggerPos(index: number): string {\r\n    return this._triggersPos[index];\r\n  }\r\n\r\n  public hasAction(index: number): boolean {\r\n    if(index >= 0 && index < this._actions.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addAction(action_data: VE_StateActionData, pos: string): void {\r\n    this._actions.push(action_data);\r\n    this._actionsPos.push(pos);\r\n  }\r\n\r\n  public getAction(index: number): VE_StateActionData {\r\n    return this._actions[index];\r\n  }\r\n\r\n  public getActionPos(index: number): string {\r\n    return this._actionsPos[index];\r\n  }\r\n\r\n  public hasAssociatedState(index: number): boolean {\r\n    if(index >= 0 && index < this._associatedStates.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addAssociatedState(associated_state_data: string, pos: string): void {\r\n    this._associatedStates.push(associated_state_data);\r\n    this._associatedStatesPos.push(pos);\r\n  }\r\n\r\n  public getAssociatedState(index: number): string {\r\n    return this._associatedStates[index];\r\n  }\r\n\r\n  public getAssociatedStatePos(index: number): string {\r\n    return this._associatedStatesPos[index];\r\n  }\r\n\r\n  public setSequence(): void {\r\n    this._isSequence = true;\r\n  }\r\n\r\n}","export class VE_StateTriggerData {\r\n\r\n  public triggerID: string;\r\n  public logicalSwitch: string;\r\n  public logicalExp: string;\r\n\r\n  public static get Empty(): VE_StateTriggerData {\r\n    return new VE_StateTriggerData('');\r\n  }\r\n\r\n  constructor(trigger_id: string) {\r\n    this.triggerID = trigger_id;\r\n    this.logicalSwitch = '';\r\n    this.logicalExp = '';\r\n   }\r\n}","export class VE_VariableData {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  private _variableIDs: string[] = [];\r\n  private _varDics: { [key: string]: string[] } = {};\r\n  private _varPosDic: { [key: string]: string } = {};\r\n\r\n  public get count(): number {\r\n    return this._variableIDs.length;\r\n  }\r\n\r\n  constructor(project_name: string) {\r\n    this._projectName = project_name;\r\n  }\r\n\r\n  public isCreatedVariable(var_id: string): boolean {\r\n    if (this._varDics[var_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addVariable(var_id: string, var_paras: string[], pos: string): void {\r\n    this._varDics[var_id] = var_paras;\r\n    this._variableIDs.push(var_id);\r\n    this._varPosDic[var_id] = pos;\r\n  }\r\n\r\n  public getVariableID(index: number): string {\r\n    if (index >= 0 && index < this._variableIDs.length) {\r\n      return this._variableIDs[index];\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n\r\n  public getVariableParas(var_id: string): string[] {\r\n    return this._varDics[var_id];\r\n  }\r\n\r\n  public getPos(var_id: string): string {\r\n    return this._varPosDic[var_id];\r\n  }\r\n\r\n  public clear(): void {\r\n    this._variableIDs = [];\r\n    this._varDics = {};\r\n  }\r\n}","\r\n\r\n\r\nexport enum ActionType {\r\n  Normal, Animation\r\n}\r\n\r\nexport enum SequenceActionState {\r\n  Initial, Prepared, Running, Pause\r\n}\r\n\r\nexport enum StateActionType {\r\n  Action, Assignment\r\n}\r\n\r\nexport enum AssignType {\r\n  Variable = 0,\r\n  Template,\r\n  TemplateVariable,\r\n  Const,\r\n}\r\n\r\nexport enum AssignmentType {\r\n  Const = 0,\r\n  Variable,\r\n  Expression\r\n}\r\n\r\nexport enum AssociatedFsmType {\r\n  Object = 0,\r\n  Template\r\n}\r\n\r\nexport enum VariableScope {\r\n  Local = 0,\r\n  Fsm,\r\n  Global,\r\n  Scene\r\n}\r\n\r\nexport enum Severity {\r\n  Warning,\r\n  Error\r\n}\r\n\r\nexport enum ParaType {\r\n  Action = 0,\r\n  Trigger\r\n}\r\n\r\n","export * from './enumTypes';","import { IPosition } from \"./positions\";\r\n\r\nexport class ExpChar implements IPosition {\r\n\r\n  private _value: string = '';\r\n  private _line: number = 0;\r\n  private _pos: number = 0;\r\n\r\n\r\n  constructor(value: string, line: number, pos: number) {\r\n    this._value = value;\r\n    this._line = line;\r\n    this._pos = pos;\r\n  }\r\n\r\n  public getValue(): string {\r\n    return this._value;\r\n  }\r\n\r\n  public getLine(): number {\r\n    return this._line;\r\n  }  \r\n  \r\n  public getPos(): number {\r\n    \r\n    return this._pos;\r\n  }\r\n\r\n  public isDigit(): boolean {\r\n    return (/\\d/).test(this._value);\r\n  }\r\n\r\n  public isLetter(): boolean {\r\n    return (/[a-zA-Z]/).test(this._value);\r\n  }\r\n\r\n  public isWhiteSpace(): boolean {\r\n    return this._value === ' ';\r\n  }\r\n\r\n  public isNewLine(): boolean {\r\n    return this._value === '\\n';\r\n  }\r\n\r\n  public isEndOfInput(): boolean {\r\n    return this._value === '\\0';\r\n  }\r\n\r\n  public is(...val: string[]): boolean {\r\n    for(let i: number = 0; i < val.length; i++) {\r\n      if(val[i] === this._value && val[i] !== '\\0') {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public toString(): string {\r\n    return this._value;\r\n  }\r\n\r\n}\r\n\r\n","import { Scope } from \"./scope\";\r\nimport { IExpression } from \"./expressions\";\r\nimport { ParseError, NameLocation } from \"./positions\";\r\nimport { VE_ExpressionParsing } from \"./expressionParsing\";\r\nimport { VariableScope } from \"../enum\";\r\nimport { Variable } from \"./variable\";\r\nimport { ShowError } from \"../html\";\r\n\r\nexport class ExpManager {\r\n\r\n  private static _scope: Scope;\r\n  private static _expVariable: { [key: string]: IExpression } = {};\r\n\r\n  public static errors: ParseError[] = [];\r\n\r\n  private static _projectName = '';\r\n  private static _objectID = '';\r\n\r\n  public static init() {\r\n    this._scope = Scope.Create();\r\n  }\r\n\r\n  public static isCreated(name_id: string): boolean {\r\n    if (this._scope.isCreated(name_id)) {\r\n      return true;\r\n    }\r\n    if (this._expVariable[name_id]) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public static isCreatedVariable(name_id: string): boolean {\r\n    if (this._scope.isCreated(name_id)) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static isCreatedExpression(name_id: string): boolean {\r\n    if (this._expVariable[name_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static createVariable(name_id: string, type: string, value: any): boolean {\r\n    this.errors = [];\r\n    if (this.isCreated(name_id)) {\r\n      this.errors.push(ParseError.Error(new NameLocation(name_id), `${name_id}${type}`));\r\n      return false;\r\n    }\r\n    this._scope.setVariable(name_id, type, value);\r\n    return true;\r\n  }\r\n\r\n  public static createExpression(name_id: string, exp_str: string): boolean {\r\n    this.errors = [];\r\n    if (this.isCreated(name_id)) {\r\n      this.errors.push(ParseError.Error(new NameLocation(name_id), `${name_id}${exp_str}`));\r\n      return false;\r\n    }\r\n    let exp: IExpression = VE_ExpressionParsing.parsing(name_id, exp_str, this._scope, this._projectName, '', '', VariableScope.Scene);\r\n    if (VE_ExpressionParsing.errors.length > 0) {\r\n      for (let i: number = 0; i < VE_ExpressionParsing.errors.length; i++) {\r\n        this.errors.push(VE_ExpressionParsing.errors[i]);\r\n      }\r\n      return false;\r\n    }\r\n    this._expVariable[name_id] = exp;\r\n    return true;\r\n  }\r\n\r\n  public static getValue(name_id: string): any {\r\n    if (this.isCreated(name_id)) {\r\n      if (this.isCreatedVariable(name_id)) {\r\n        return this._scope.find(name_id)!.getValue();\r\n      } else {\r\n        return this._expVariable[name_id].evaluate();\r\n      }\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static getExpression(name_id: string): IExpression | null {\r\n    if (this._expVariable[name_id]) {\r\n      return this._expVariable[name_id];\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static getVariable(name_id: string): Variable | null {\r\n    if (this.isCreatedVariable(name_id)) {\r\n      return this._scope.find(name_id);\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n\r\n  public static printError(): void {\r\n    if (this.errors.length > 0) {\r\n      for (let i: number = 0; i < this.errors.length; i++) {\r\n        console.error(this.errors[i].toString());\r\n        ShowError.showError(this.errors[i].toString());\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n}\r\n\r\nExpManager.init();\r\n\r\n// try {\r\n//   ExpManager.createVariable('first', 'number', 1);\r\n//   ExpManager.createVariable('second', 'number', 2);\r\n//   ExpManager.createVariable('third', 'bool', true);\r\n//   console.log(ExpManager.getValue('third'));\r\n\r\n//   // ExpManager.createExpression('add', '(1 + first + second * (first + second + 3)) / 2');\r\n//   // ExpManager.createExpression('add', 'cos(PI/2) + sin(PI/2)');\r\n//   // console.log(ExpManager.getExpression('add')!.toString());\r\n//   // console.log(' ' + ExpManager.getExpression('add')!.evaluate());\r\n\r\n//   // ExpManager.createExpression('exp1', 'second + 2 * second + abs(-10)');\r\n//   ExpManager.createExpression('exp1', 'first * second + second > 10');\r\n//   console.log('2 ' + ExpManager.getExpression('exp1')!.evaluate());\r\n\r\n//   // ExpManager.createExpression('multiply', 'x * y');\r\n//   // ExpManager.createExpression('substract', 'x - y');\r\n\r\n//   // console.log(ExpManager.getExpression('add')!.evaluate());\r\n\r\n//   // console.log(ExpManager.getExpression('multiply')!.evaluate());\r\n//   // console.log(ExpManager.getExpression('substract')!.evaluate());\r\n\r\n// }\r\n// catch {\r\n\r\n// }\r\n\r\n// ExpManager.printError();\r\n\r\n\r\n","export enum ExpressionType {\r\n  ID, SPECIAL_ID, KEYWORD, STRING, NUMBER, BOOL, OPERATOR, INTEGER, FLOAT, DOUBLE, EOI\r\n}","import { Scope } from \"./scope\";\r\nimport { Tokenizer } from \"./tokenizer\";\r\nimport { ParseError, IPosition } from \"./positions\";\r\nimport { IExpression, BinaryOperator, BinaryExpression, ConstantExpression, VeryTemplateExpression, VeryVarExpression } from \"./expressions\";\r\nimport { ExpressionType } from \"./expressionEnum\";\r\nimport { FunctionExpression } from \"./functionExpression\";\r\nimport { Token } from \"./token\";\r\nimport { IFunction, CustomFunctions } from \"./functions\";\r\nimport { Variable } from \"./variable\";\r\nimport { VariableExpression } from \"./variableExpression\";\r\nimport { VariableScope } from \"../enum\";\r\nimport { VE_Expressions } from \"./veryExpressions\";\r\nimport { VE_Objects, VeryEngineObject } from \"../object\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { VE_Fsm } from \"../state\";\r\n\r\n\r\n\r\nexport class VE_ExpressionParsing {\r\n\r\n  private static _bracketPair: { [key: string]: string } = {};\r\n\r\n  private static _scope: Scope;\r\n  private static _tokenizer: Tokenizer;\r\n\r\n  public static errors: ParseError[] = [];\r\n\r\n  private static _projectName: string = '';\r\n  private static _objectID: string = '';\r\n  private static _fsmID = '';\r\n\r\n  private static _varScope: VariableScope = VariableScope.Local;\r\n\r\n\r\n  public static init(): void {\r\n    this._bracketPair['('] = ')';\r\n    this._bracketPair['['] = ']';\r\n    this._bracketPair['{'] = '}';\r\n    this._bracketPair[''] = '';\r\n    this._bracketPair[''] = '';\r\n  }\r\n\r\n  public static parsing(name_id: string, input_exp: string, scope: Scope, project_name: string, object_id: string, fsm_id: string, var_scope: VariableScope): IExpression {\r\n    this._scope = scope;\r\n    this._projectName = project_name;\r\n    this._objectID = object_id;\r\n    this._fsmID = fsm_id;\r\n    this._varScope = var_scope;\r\n    this._tokenizer = new Tokenizer(input_exp);\r\n    // while(!this._tokenizer.current().isEnd()) {\r\n    //   console.log(this._tokenizer.consume());\r\n    // }\r\n    this.errors = [];\r\n    return this.parse();\r\n  }\r\n\r\n  private static parse(): IExpression {\r\n    let resultExp: IExpression = this.buildExpression();\r\n    // console.log(this._tokenizer.current());\r\n    if (!this._tokenizer.current().isEnd()) {\r\n      this._tokenizer.addError(this._tokenizer.current(), `${this._tokenizer.current().getSource()} `);\r\n      this._tokenizer.consume();\r\n    }\r\n    this.errors = this._tokenizer.getProblemCollector();\r\n    return resultExp;\r\n  }\r\n\r\n\r\n  private static buildExpression(): IExpression {\r\n    let left: IExpression = this.relationalExp();\r\n    if (this._tokenizer.current().isOperator('&&')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.buildExpression();\r\n      return this.reOrder(left, right, BinaryOperator.Add);\r\n    }\r\n    if (this._tokenizer.current().isOperator('||')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.buildExpression();\r\n      return this.reOrder(left, right, BinaryOperator.Or);\r\n    }\r\n    return left;\r\n  }\r\n\r\n\r\n  private static relationalExp(): IExpression {\r\n    let left: IExpression = this.algebraExp();\r\n    if (this._tokenizer.current().isOperator('<')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.LT);\r\n    }\r\n    if (this._tokenizer.current().isOperator('<=')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.LT_EQ);\r\n    }\r\n    if (this._tokenizer.current().isOperator('==')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.EQ);\r\n    }\r\n    if (this._tokenizer.current().isOperator('>=')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.GT_EQ);\r\n    }\r\n    if (this._tokenizer.current().isOperator('>')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.GT);\r\n    }\r\n    if (this._tokenizer.current().isOperator('!=')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.NEQ);\r\n    }\r\n    return left;\r\n  }\r\n\r\n  private static algebraExp(): IExpression {\r\n    let left: IExpression = this.productExp();\r\n    if (this._tokenizer.current().isOperator('+')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.algebraExp();\r\n      return this.reOrder(left, right, BinaryOperator.Add);\r\n    }\r\n    if (this._tokenizer.current().isOperator('-')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.algebraExp();\r\n      return this.reOrder(left, right, BinaryOperator.Subtract);\r\n    }\r\n    return left;\r\n  }\r\n\r\n  private static productExp(): IExpression {\r\n    let left: IExpression = this.exponentExp();\r\n    if (this._tokenizer.current().isOperator('*')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.productExp();\r\n      return this.reOrder(left, right, BinaryOperator.Multiply);\r\n    }\r\n    if (this._tokenizer.current().isOperator('/')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.productExp();\r\n      return this.reOrder(left, right, BinaryOperator.Divide);\r\n    }\r\n    if (this._tokenizer.current().isOperator('%')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.productExp();\r\n      return this.reOrder(left, right, BinaryOperator.Modulo);\r\n    }\r\n    return left;\r\n  }\r\n\r\n  private static exponentExp(): IExpression {\r\n    let left: IExpression = this.atomExp();\r\n    if (this._tokenizer.current().isOperator('!') || this._tokenizer.current().isOperator('')) {\r\n      left = new BinaryExpression(left, left, BinaryOperator.Not);\r\n    }\r\n    return left;\r\n  }\r\n\r\n  private static atomExp(): IExpression {\r\n    // -\r\n    if (this._tokenizer.current().isOperator('-')) {\r\n      this._tokenizer.consume();\r\n      let result: BinaryExpression = new BinaryExpression(new ConstantExpression(0, 'number'), this.atomExp(), BinaryOperator.Subtract);\r\n      result.setSeal();\r\n      return result;\r\n    }\r\n    // \r\n    if (this._tokenizer.current().isOperator('!') && (this._tokenizer.next().isIdentifier() || this._tokenizer.next().isKeyword() || this._tokenizer.next().isStartBracket())) {\r\n      this._tokenizer.consume();\r\n      let newValue: IExpression = this.atomExp();\r\n      if (newValue.expType === 'bool') {\r\n        let notExp: BinaryExpression = new BinaryExpression(newValue, newValue, BinaryOperator.Not);\r\n        return notExp;\r\n      } else {\r\n        this._tokenizer.addError(this._tokenizer.current(), '(!)bool');\r\n        return ConstantExpression.Empty();\r\n      }\r\n    }\r\n    // +\r\n    if (this._tokenizer.current().isOperator('+') && this._tokenizer.next().isStartBracket()) {\r\n      this._tokenizer.consume();\r\n    }\r\n    // +\r\n    if (this._tokenizer.current().isOperator('+') && this._tokenizer.next().isConstant()) {\r\n      this._tokenizer.consume();\r\n    }\r\n    // +\r\n    if (this._tokenizer.current().isOperator('+') && this._tokenizer.next().isIdentifier()) {\r\n      this._tokenizer.consume();\r\n    }\r\n\r\n    // VeryVar\r\n    // \r\n    // 1**null2.**null3*.*4.*.*\r\n\r\n    // 1.*==null\r\n    // 2..*\r\n    if (this._tokenizer.current().isOperator(\"*\") && this._tokenizer.next().isIdentifier())  //*VeryVarVeryVarExpression\r\n    {\r\n      this._tokenizer.consume();\r\n      let varID: string = \"*\" + this._tokenizer.current().getContents();\r\n      let varExpression: Nullable<IExpression> = VE_Expressions.getParseExpression(this._projectName, this._objectID, varID, this._varScope);\r\n      if (varExpression === null) {\r\n        // \r\n        let templateExpression: Nullable<VeryTemplateExpression> = VE_Expressions.getTemplateExpression(this._projectName, this._objectID, varID, this._varScope);\r\n        if (templateExpression === null) {\r\n          this._tokenizer.addError(this._tokenizer.current(), \"VeryVar\" + varID + \"VeryVar\");\r\n          this._tokenizer.consume();\r\n          return ConstantExpression.Empty();\r\n        }\r\n        else {\r\n          //UnityEngine.Debug.LogError(\"\" + _tokenizer.current());\r\n          // this._tokenizer.consume();\r\n          // return templateExpression;\r\n          // TODO: \r\n          this._tokenizer.addError(this._tokenizer.current(), \"VeryVar\" + varID + \"\");\r\n          this._tokenizer.consume();\r\n          return ConstantExpression.Empty();\r\n        }\r\n      }\r\n      else {\r\n        this._tokenizer.consume();\r\n        return varExpression;\r\n      }\r\n    }\r\n\r\n    // \r\n    if (this._tokenizer.current().isStartBracket()) {\r\n      let endBracket: string = this._bracketPair[this._tokenizer.consume().getTrigger()];\r\n      let result: IExpression = this.buildExpression();\r\n      if (result.className === 'BinaryExpression') {\r\n        (<BinaryExpression>result).setSeal();\r\n      }\r\n      this.expectTrigger(ExpressionType.OPERATOR, endBracket); // \r\n      return result;\r\n    }\r\n    // \r\n    if (this._tokenizer.current().isConstant()) {\r\n      let value: any;\r\n      let typeStr: string = 'string';\r\n      if (this._tokenizer.current().isBool()) {\r\n        value = this._tokenizer.current().getContents().toLowerCase() === 'true' ? true : false;\r\n        typeStr = 'bool';\r\n      } else if (this._tokenizer.current().isNumber()) {\r\n        value = parseFloat(this._tokenizer.current().getContents());\r\n        typeStr = 'number';\r\n        // console.log('' + value);\r\n      } else {\r\n        value = this._tokenizer.current().getContents();\r\n        typeStr = 'string';\r\n      }\r\n      this._tokenizer.consume();\r\n      let constantExp: IExpression = new ConstantExpression(value, typeStr);\r\n      return constantExp;\r\n    }\r\n    // \r\n    if (this._tokenizer.current().isIdentifier()) {\r\n      if (this._tokenizer.next().isStartBracket()) { // \r\n        // \r\n        let endStart: string = this._bracketPair[this._tokenizer.next().getTrigger()];\r\n        return this.functionCall(endStart);\r\n      } else { // \r\n        // VryVar\r\n        let varValue: Variable | null;\r\n        let loc: IPosition = this._tokenizer.current();\r\n        let variableID: string = this._tokenizer.consume().getContents();\r\n        if (variableID.endsWith('.') && this._tokenizer.current().isOperator('*') && this._tokenizer.next().isIdentifier()) { // .*\r\n          // VeryVar.*\r\n          this._tokenizer.consume();\r\n          let varID: string = variableID + '*' + this._tokenizer.current().getContents();\r\n          let varExpression: Nullable<IExpression> = VE_Expressions.getParseExpression(this._projectName, this._objectID, varID, this._varScope);\r\n          if (varExpression === null) {\r\n            // TODO\r\n            let templateExpression: Nullable<VeryTemplateExpression> = VE_Expressions.getTemplateExpression(this._projectName, this._objectID, varID, this._varScope);\r\n            if (templateExpression === null) {\r\n              this._tokenizer.addError(loc, `VeryVar${varID}VeryVar`);\r\n            } else {\r\n              this._tokenizer.addError(this._tokenizer.current(), \"VeryVar\" + varID + \"\");\r\n            }\r\n            this._tokenizer.consume();\r\n            return ConstantExpression.Empty();\r\n          } else {\r\n            this._tokenizer.consume();\r\n            return varExpression;\r\n          }\r\n          // return ConstantExpression.Empty();\r\n        } else {\r\n          // \r\n          varValue = this._scope.find(variableID);\r\n          // console.log(variableID + '  ---  ' + varValue);\r\n          if (varValue === null) {\r\n            this._tokenizer.addError(loc, `${variableID}`);\r\n            return ConstantExpression.Empty();\r\n          } else {\r\n            return new VariableExpression(varValue);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    // TODO\r\n    if (this._tokenizer.current().isKeyword()) {\r\n      // this\r\n      if (this._tokenizer.current().getContents().toLowerCase().trim() === \"this\") {\r\n        if (this._varScope === VariableScope.Fsm && this._fsmID !== \"\") {\r\n          // \r\n          let objects: VE_Objects = VE_Manager.objects(this._projectName);\r\n          if (objects !== null) {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(this._objectID);\r\n            if (veryObject != null) {\r\n              let fsm: VE_Fsm = veryObject.getFsm(this._fsmID);\r\n              if (fsm != null) {\r\n                this._tokenizer.consume();\r\n                return new VeryVarExpression(fsm.fsmVar);\r\n              }\r\n            }\r\n          }\r\n        }\r\n        this._tokenizer.addError(this._tokenizer.current(), \"this\");\r\n        this._tokenizer.consume();\r\n        return ConstantExpression.Empty();\r\n      }\r\n      //   == null \r\n      else if (this._tokenizer.current().getContents().toLowerCase().trim() === \"null\" || this._tokenizer.current().getContents().toLowerCase().trim() === \"none\") {\r\n        //UnityEngine.Debug.LogError(\"\" + _tokenizer.current());\r\n        this._tokenizer.consume();\r\n        // TODO: \r\n        return new VeryTemplateExpression();\r\n      }\r\n      else {\r\n        this._tokenizer.addError(this._tokenizer.current(), \"\" + this._tokenizer.current().getContents() + \"\");\r\n        this._tokenizer.consume();\r\n        return ConstantExpression.Empty();\r\n      }\r\n    }\r\n\r\n    // \r\n    if (this._tokenizer.current().isSpecialIdentifier()) {\r\n      this._tokenizer.addError(this._tokenizer.current(), `ID${this._tokenizer.current().getSource()}`);\r\n      this._tokenizer.consume();\r\n      return ConstantExpression.Empty();\r\n    }\r\n\r\n    // \r\n    this._tokenizer.addError(this._tokenizer.current(), `${this._tokenizer.current().getSource()}`);\r\n    this._tokenizer.consume();\r\n\r\n    return ConstantExpression.Empty();\r\n  }\r\n\r\n  private static reOrder(left: IExpression, right: IExpression, op: BinaryOperator): IExpression {\r\n    if (right.className === 'BinaryExpression') {\r\n      let rightOp: BinaryExpression = <BinaryExpression>right;\r\n      if (!rightOp.isSealed() && rightOp.getPriority() === rightOp.getPriorityOp(op)) {\r\n        this.replaceLeft(rightOp, left, op);\r\n        return right;\r\n      }\r\n    }\r\n    return new BinaryExpression(left, right, op);\r\n  }\r\n\r\n  private static replaceLeft(target: BinaryExpression, newLeft: IExpression, op: BinaryOperator): void {\r\n    if (target.getLeftExp().className === 'BinaryExpression') {\r\n      let leftOp: BinaryExpression = <BinaryExpression>target.getLeftExp();\r\n      if (!leftOp.isSealed() && leftOp.getPriority() === leftOp.getPriorityOp(op)) {\r\n        this.replaceLeft(leftOp, newLeft, op);\r\n        return;\r\n      }\r\n    }\r\n    target.setLeftExp(new BinaryExpression(newLeft, target.getLeftExp(), op));\r\n  }\r\n\r\n  private static functionCall(end_bracket: string): IExpression {\r\n    let call: FunctionExpression = new FunctionExpression();\r\n    let funcToken: Token = this._tokenizer.consume();\r\n    if (!CustomFunctions.hasFunction(funcToken.getContents())) {\r\n      this._tokenizer.addError(funcToken, `${funcToken.getContents()}`);\r\n      return ConstantExpression.Empty();\r\n    }\r\n    let fun: IFunction = CustomFunctions.createFunction(funcToken.getContents());\r\n    call.setFunction(fun);\r\n    this._tokenizer.consume(); // \r\n    while (!this._tokenizer.current().isOperator(end_bracket) && !this._tokenizer.current().isEnd()) {\r\n      if (call.paraCount() !== 0) {\r\n        this.expectTrigger(ExpressionType.OPERATOR, ',');\r\n      }\r\n      call.addPara(this.buildExpression());\r\n    }\r\n    this.expectTrigger(ExpressionType.OPERATOR, end_bracket);\r\n    call.evaluate();\r\n    if (call.paraCount() > fun.parameterNumber() && fun.parameterNumber() >= 0) {\r\n      this._tokenizer.addError(funcToken, `${funcToken.getContents()}Max${fun.parameterNumber()}${call.paraCount()}`);\r\n      return ConstantExpression.Empty();\r\n    }\r\n    return call;\r\n  }\r\n\r\n  private static expectTrigger(type: ExpressionType, trigger: string): void {\r\n    if (this._tokenizer.current().matches(type, trigger)) {\r\n      this._tokenizer.consume();\r\n    } else {\r\n      this._tokenizer.addError(this._tokenizer.current(), `${trigger}${this._tokenizer.current().getTrigger()}`);\r\n    }\r\n  }\r\n\r\n  public static getProjectCollector(): ParseError[] {\r\n    return this._tokenizer.getProblemCollector();\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\n\r\nVE_ExpressionParsing.init();","import { Dictionary } from \"../utility/dictionary\";\r\nimport { IVeryVar } from \"../variables\";\r\nimport { VE_Template } from \"../template\";\r\n\r\nexport interface IExpression {\r\n  expType: string;\r\n  className: string;\r\n  evaluate(): any;\r\n  clone(): IExpression;\r\n}\r\n\r\nexport class TrueExpression implements IExpression {\r\n  public get expType(): string {\r\n    return 'bool';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'TrueExpression';\r\n  }\r\n\r\n  public get value(): boolean {\r\n    return true;\r\n  }\r\n\r\n  constructor() {\r\n  }\r\n\r\n  public evaluate(): any {\r\n    return true;\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let exp: TrueExpression = new TrueExpression();\r\n    return exp;\r\n  }\r\n\r\n  public toString(): string {\r\n    return 'true';\r\n  }\r\n}\r\n\r\nexport class ConstantExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    return this._expType;\r\n  }\r\n  private _expType: string = 'string';\r\n\r\n  public get className(): string {\r\n    return 'ConstantExpression';\r\n  }\r\n\r\n  private _value: any;\r\n\r\n  constructor(value: any, type: string) {\r\n    this._value = value;\r\n    this._expType = type;\r\n  }\r\n\r\n  public evaluate(): any {\r\n    return this._value;\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let expClone: ConstantExpression = new ConstantExpression(this._value, this._expType);\r\n    return expClone;\r\n  }\r\n\r\n  public static Empty(): ConstantExpression {\r\n    return new ConstantExpression(null, 'string');\r\n  }\r\n\r\n  public isEmpty(): boolean {\r\n    if (this._expType === 'string' && this._value === null) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public toString(): string {\r\n    if (this._value !== null) {\r\n      return this._value.toString();\r\n    } else {\r\n      return 'null';\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport enum BinaryOperator {\r\n  Add = '+', Subtract = '-', Multiply = '*', Divide = '/', Modulo = '%', Power = '^', LT = '<', LT_EQ = '<=', EQ = '=', GT_EQ = '>=', GT = '>', NEQ = '!=', And = '&&', Or = '||', Not = '!'\r\n}\r\n\r\nexport class BinaryExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    return this._expType;\r\n  }\r\n  private _expType = '';\r\n\r\n  public get className(): string {\r\n    return 'BinaryExpression';\r\n  }\r\n\r\n  public isRight: boolean = true;\r\n\r\n  private _op: BinaryOperator = BinaryOperator.EQ;\r\n\r\n  private _left: IExpression;\r\n  private _right: IExpression;\r\n  private _isSealed: boolean = false;\r\n\r\n  private static _opDic: { [key: string]: BinaryOperator } = {};\r\n\r\n  private static _priority: Dictionary<BinaryOperator, number> = new Dictionary<BinaryOperator, number>();\r\n\r\n  // private static _priorityKey: BinaryOperator[] = [BinaryOperator.Not, BinaryOperator.Power, BinaryOperator.Multiply, BinaryOperator.Divide, BinaryOperator.Modulo, BinaryOperator.Add, BinaryOperator.Subtract, BinaryOperator.LT, BinaryOperator.LT_EQ, BinaryOperator.EQ, BinaryOperator.GT_EQ, BinaryOperator.GT, BinaryOperator.NEQ, BinaryOperator.And, BinaryOperator.Or];\r\n\r\n  // private static _priorityValue: number[] = [2, 3, 4, 4, 4, 5, 5, 6, 6, 6, 6, 6, 6, 7, 7];\r\n\r\n  public static init(): void {\r\n    this._opDic[\"+\"] = BinaryOperator.Add;\r\n    this._opDic[\"-\"] = BinaryOperator.Subtract;\r\n    this._opDic[\"*\"] = BinaryOperator.Multiply;\r\n    this._opDic[\"/\"] = BinaryOperator.Divide;\r\n    this._opDic[\"%\"] = BinaryOperator.Modulo;\r\n    this._opDic[\"**\"] = BinaryOperator.Power;\r\n    this._opDic[\"^\"] = BinaryOperator.Power;\r\n    this._opDic[\"<\"] = BinaryOperator.LT;\r\n    this._opDic[\"<=\"] = BinaryOperator.LT_EQ;\r\n    this._opDic[\"==\"] = BinaryOperator.EQ;\r\n    this._opDic[\">=\"] = BinaryOperator.GT_EQ;\r\n    this._opDic[\">\"] = BinaryOperator.GT;\r\n    this._opDic[\"!=\"] = BinaryOperator.NEQ;\r\n    this._opDic[\"&&\"] = BinaryOperator.And;\r\n    this._opDic[\"||\"] = BinaryOperator.Or;\r\n    this._opDic[\"!\"] = BinaryOperator.Not;\r\n    this._opDic[\"\"] = BinaryOperator.Not;\r\n\r\n    this._priority.Add(BinaryOperator.Not, 2);\r\n    this._priority.Add(BinaryOperator.Power, 3);\r\n    this._priority.Add(BinaryOperator.Multiply, 4); this._priority.Add(BinaryOperator.Divide, 4); this._priority.Add(BinaryOperator.Modulo, 4);\r\n    this._priority.Add(BinaryOperator.Add, 5); this._priority.Add(BinaryOperator.Subtract, 5);\r\n    this._priority.Add(BinaryOperator.LT, 6); this._priority.Add(BinaryOperator.LT_EQ, 6); this._priority.Add(BinaryOperator.EQ, 6); this._priority.Add(BinaryOperator.GT_EQ, 6); this._priority.Add(BinaryOperator.GT, 6); this._priority.Add(BinaryOperator.NEQ, 6);\r\n    this._priority.Add(BinaryOperator.And, 7); this._priority.Add(BinaryOperator.Or, 7);\r\n  }\r\n\r\n  constructor(left_exp: IExpression, right_exp: IExpression, op: BinaryOperator) {\r\n    this._left = left_exp;\r\n    this._right = right_exp;\r\n    this._op = op;\r\n    // console.log(this._left);\r\n    // console.log(this._right);\r\n    this._expType = this.resultAutoType(left_exp, right_exp, op);\r\n    if (this._expType === 'null') {\r\n      // TODO\r\n      this.isRight = false;\r\n      console.error(\"\" + left_exp.expType + \"\" + right_exp.expType + \"\" + op.toString());\r\n    }\r\n  }\r\n\r\n  private resultAutoType(left: IExpression, right: IExpression, op: BinaryOperator): string {\r\n    if (op === BinaryOperator.Add) {\r\n      if (left.expType === 'string' || right.expType === 'string') {\r\n        return 'string';\r\n      }\r\n      else if (left.expType === 'bool' || right.expType === 'bool') {\r\n        return 'null';\r\n      }\r\n      else if (left.expType === 'number' || right.expType === 'number') {\r\n        return 'number';\r\n      }\r\n      else if (left.expType === 'vector3' || right.expType === 'vector3') {\r\n        return 'vector3';\r\n      }\r\n      else if (left.expType === 'vector2' || right.expType === 'vector2') {\r\n        return 'vector2';\r\n      }\r\n      else {\r\n        return 'null';\r\n      }\r\n    } else if (op === BinaryOperator.Divide || op === BinaryOperator.Multiply || op === BinaryOperator.Modulo || op === BinaryOperator.Power || op === BinaryOperator.Subtract) {\r\n      if (left.expType === 'string' || right.expType === 'string' || left.expType === 'bool' || left.expType === 'bool') {\r\n        return 'null';\r\n      }\r\n      else if (left.expType === 'vector3' && right.expType === 'vector3' && op === BinaryOperator.Subtract) {\r\n        return 'vector3';\r\n      }\r\n      else if (left.expType === 'vector2' && right.expType === 'vector2' && op === BinaryOperator.Subtract) {\r\n        return 'vector2';\r\n      }\r\n      else if ((left.expType === 'number' && right.expType === 'vector3' && op === BinaryOperator.Multiply) || (left.expType === 'vector3' && right.expType === 'number' && op == BinaryOperator.Multiply)) {\r\n        return 'vector3';\r\n      }\r\n      else if ((left.expType === 'number' && right.expType === 'vector2' && op === BinaryOperator.Multiply) || (left.expType === 'vector2' && right.expType === 'number' && op == BinaryOperator.Multiply)) {\r\n        return 'vector2';\r\n      }\r\n      else if (left.expType === 'vector3' && right.expType === 'number' && op === BinaryOperator.Divide) {\r\n        return 'vector3';\r\n      }\r\n      else if (left.expType === 'vector2' && right.expType === 'number' && op === BinaryOperator.Divide) {\r\n        return 'vector2';\r\n      }\r\n      else if (left.expType === 'number' || right.expType === 'number') {\r\n        return 'number';\r\n      }\r\n      else {\r\n        return 'null';\r\n      }\r\n    } else if (op === BinaryOperator.LT || op === BinaryOperator.LT_EQ || op === BinaryOperator.GT_EQ || op === BinaryOperator.GT) {\r\n      if (left.expType === 'string' || right.expType === 'string' || left.expType === 'bool' || right.expType === 'bool') {\r\n        return 'null';\r\n      } else {\r\n        return 'bool';\r\n      }\r\n    } else if (op === BinaryOperator.NEQ || op === BinaryOperator.EQ) {\r\n      if (right.expType !== left.expType) {\r\n        return 'null';\r\n      } else {\r\n        return 'bool';\r\n      }\r\n    } else if (op === BinaryOperator.Not) {\r\n      if (right.expType !== 'bool') {\r\n        return 'null';\r\n      } else {\r\n        return 'bool';\r\n      }\r\n    } else {\r\n      return 'string';\r\n    }\r\n  }\r\n\r\n  public setLeftExp(left_exp: IExpression): void {\r\n    this._left = left_exp;\r\n  }\r\n\r\n  public setRightExp(right_exp: IExpression): void {\r\n    this._right = right_exp;\r\n  }\r\n\r\n  public getOp(): BinaryOperator {\r\n    return this._op;\r\n  }\r\n\r\n  public getLeftExp(): IExpression {\r\n    return this._left;\r\n  }\r\n\r\n  public getRightExp(): IExpression {\r\n    return this._right;\r\n  }\r\n\r\n  public isSealed(): boolean {\r\n    return this._isSealed;\r\n  }\r\n\r\n  public setSeal(): void {\r\n    this._isSealed = true;\r\n  }\r\n\r\n  public toString(): string {\r\n    return \"(\" + this._left.toString() + \" \" + this._op.toString() + \" \" + this._right.toString() + \")\";\r\n    // return this._left.toString() + this._op.toString() + this._right.toString();\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let expClone: BinaryExpression = new BinaryExpression(this._left.clone(), this._right.clone(), this._op);\r\n    return expClone;\r\n  }\r\n\r\n  public evaluate(): any {\r\n    if (this._expType === 'null') {\r\n      return null;\r\n    }\r\n    if (this._left.className === 'FunctionExpression') {\r\n      this._left.evaluate();\r\n    }\r\n    if (this._right.className === 'FunctionExpression') {\r\n      this._right.evaluate();\r\n    }\r\n    this._expType = this.resultAutoType(this._left, this._right, this._op);\r\n    let leftValue: any = this._left.evaluate();\r\n    let rightValue: any = this._right.evaluate();\r\n    if (leftValue === null || rightValue === null) {\r\n      return null;\r\n    }\r\n    if (this._op === BinaryOperator.Add) {\r\n      if (this._expType === 'string') {\r\n        return leftValue.toString() + rightValue.toString();\r\n      } else if (this._expType === 'number') {\r\n        return leftValue + rightValue;\r\n      } else if (this._expType === 'vector3') {\r\n        return (<BABYLON.Vector3>leftValue).add((<BABYLON.Vector3>rightValue));\r\n      } else if (this._expType === 'vector2') {\r\n        return (<BABYLON.Vector2>leftValue).add((<BABYLON.Vector2>rightValue));\r\n      } else {\r\n        return null;\r\n      }\r\n    } else if (this._op === BinaryOperator.Subtract) {\r\n      if (this._expType === 'number') {\r\n        return leftValue - rightValue;\r\n      } else if (this._expType === 'vector3') {\r\n        return (<BABYLON.Vector3>leftValue).subtract((<BABYLON.Vector3>rightValue));\r\n      } else if (this._expType === 'vector2') {\r\n        return (<BABYLON.Vector2>leftValue).subtract((<BABYLON.Vector2>rightValue));\r\n      } else {\r\n        return null;\r\n      }\r\n    } else if (this._op === BinaryOperator.Multiply) {\r\n      if (this._expType === 'number') {\r\n        return leftValue * rightValue;\r\n      } else if (this._expType === 'vector3') {\r\n        if (typeof (leftValue) === 'number') {\r\n          return (<BABYLON.Vector3>rightValue).multiplyByFloats(leftValue, leftValue, leftValue);\r\n        } else if (typeof (rightValue) === 'number') {\r\n          return (<BABYLON.Vector3>leftValue).multiplyByFloats(rightValue, rightValue, rightValue);\r\n        } else {\r\n          return null;\r\n        }\r\n      } else if (this._expType === 'vector2') {\r\n        if (typeof (leftValue) === 'number') {\r\n          return (<BABYLON.Vector2>rightValue).multiplyByFloats(leftValue, leftValue);\r\n        } else if (typeof (rightValue) === 'number') {\r\n          return (<BABYLON.Vector2>leftValue).multiplyByFloats(rightValue, rightValue);\r\n        } else {\r\n          return null;\r\n        }\r\n      }\r\n    } else if (this._op === BinaryOperator.Divide) {\r\n      if (this._expType === 'number') {\r\n        return leftValue / rightValue;\r\n      } else if (this._expType === 'vector3') {\r\n        if (typeof (rightValue) === 'number') {\r\n          return new BABYLON.Vector3((<BABYLON.Vector3>leftValue).x / rightValue, (<BABYLON.Vector3>leftValue).y / rightValue, (<BABYLON.Vector3>leftValue).z / rightValue);\r\n        } else {\r\n          return null;\r\n        }\r\n      } else if (this._expType === 'vector2') {\r\n        if (typeof (rightValue) === 'number') {\r\n          return new BABYLON.Vector2((<BABYLON.Vector2>leftValue).x / rightValue, (<BABYLON.Vector2>leftValue).y / rightValue);\r\n        } else {\r\n          return null;\r\n        }\r\n      }\r\n    } else if (this._op === BinaryOperator.Modulo) {\r\n      if (typeof (leftValue) === 'number' && typeof (rightValue) === 'number') {\r\n        return leftValue % rightValue;\r\n      } else {\r\n        return null;\r\n      }\r\n    } else if (this._op === BinaryOperator.Power) {\r\n      if (typeof (leftValue) === 'number' && typeof (rightValue) === 'number') {\r\n        return Math.pow(leftValue, rightValue);\r\n      } else {\r\n        return null;\r\n      }\r\n    } else if (this._op === BinaryOperator.And) {\r\n      let l: boolean = this.getBoolean(leftValue);\r\n      let r: boolean = this.getBoolean(rightValue);\r\n      return l && r;\r\n    } else if (this._op === BinaryOperator.Or) {\r\n      let l: boolean = this.getBoolean(leftValue);\r\n      let r: boolean = this.getBoolean(rightValue);\r\n      return l || r;\r\n    } else if (this._op === BinaryOperator.LT) {\r\n      return leftValue < rightValue;\r\n    } else if (this._op === BinaryOperator.LT_EQ) {\r\n      return leftValue <= rightValue;\r\n    } else if (this._op === BinaryOperator.GT_EQ) {\r\n      return leftValue >= rightValue;\r\n    } else if (this._op === BinaryOperator.GT) {\r\n      return leftValue > rightValue;\r\n    } else if (this._op === BinaryOperator.EQ) {\r\n      return leftValue === rightValue;\r\n    } else if (this._op === BinaryOperator.NEQ) {\r\n      return leftValue !== rightValue;\r\n    } else if (this._op === BinaryOperator.Not) {\r\n      return !this.getBoolean(rightValue);\r\n    } else {\r\n      return !this.getBoolean(leftValue);\r\n    }\r\n  }\r\n\r\n  private getBoolean(value: any): boolean {\r\n    if (typeof (value) === 'number') {\r\n      if (value === 0) {\r\n        return false;\r\n      } else {\r\n        return true;\r\n      }\r\n    } else if (typeof (value) === 'string') {\r\n      if (value === '') {\r\n        return false;\r\n      } else {\r\n        return true;\r\n      }\r\n    } else if (typeof (value) === 'boolean') {\r\n      return value;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getPriority(): number {\r\n    // let p: number = BinaryExpression._priorityKey.indexOf(this._op);\r\n    // if(p > -1) {\r\n    //   return BinaryExpression._priorityValue[p];\r\n    // } else {\r\n    //   return 100;\r\n    // }\r\n    let p: number | null = BinaryExpression._priority.GetValue(this._op);\r\n    if (p === null) {\r\n      return 100;\r\n    } else {\r\n      return p;\r\n    }\r\n  }\r\n\r\n  public getPriorityOp(op: BinaryOperator): number {\r\n    // let p: number = BinaryExpression._priorityKey.indexOf(op);\r\n    // if(p > -1) {\r\n    //   return BinaryExpression._priorityValue[p];\r\n    // } else {\r\n    //   return 100;\r\n    // }\r\n    let p: number | null = BinaryExpression._priority.GetValue(op);\r\n    if (p === null) {\r\n      return 100;\r\n    } else {\r\n      return p;\r\n    }\r\n  }\r\n}\r\n\r\nexport class VeryVarExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    if (this._value) {\r\n      return this._value.varType;\r\n    } else {\r\n      return 'null';\r\n    }\r\n  }\r\n\r\n  private _value: IVeryVar;\r\n\r\n  public get className(): string {\r\n    return 'VeryVarExpression';\r\n  }\r\n\r\n  public get value(): IVeryVar {\r\n    return this._value;\r\n  }\r\n\r\n  constructor(value: IVeryVar) {\r\n    this._value = value;\r\n  }\r\n\r\n  public evaluate(): any {\r\n    return this._value.getValue();\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let expClone: VeryVarExpression = new VeryVarExpression(this._value.clone());\r\n    return expClone;\r\n  }\r\n\r\n  public toString(): string {\r\n    if (this._value) {\r\n      return this._value.toString();\r\n    } else {\r\n      return 'null';\r\n    }\r\n  }\r\n}\r\n\r\nexport class VeryTemplateExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    return 'bool';\r\n  }\r\n\r\n  private _isTemplate: boolean = false;\r\n  private _template: VE_Template;\r\n\r\n  public get className(): string {\r\n    return 'VeryTemplateExpression';\r\n  }\r\n\r\n  // public get value(): IVeryVar {\r\n  //   return this._value;\r\n  // }\r\n\r\n  // TODO \r\n  constructor() {\r\n    this._template = new VE_Template('', '');\r\n  }\r\n\r\n  public setTemplate(template: VE_Template): void {\r\n    this._isTemplate = true;\r\n    this._template = template;\r\n  }\r\n\r\n  public evaluate(): any {\r\n    if (this._isTemplate) {\r\n      if (!this._template) {\r\n        return false;\r\n      }\r\n      else {\r\n        return this._template.templateInstance !== null;\r\n      }\r\n    }\r\n    else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let varExp: VeryTemplateExpression = new VeryTemplateExpression();\r\n    varExp._template = this._template;\r\n    varExp._isTemplate = this._isTemplate;\r\n    return varExp;\r\n  }\r\n\r\n  public toString(): string {\r\n    if (this._isTemplate) {\r\n      if (!this._template) {\r\n        return \"false\";\r\n      }\r\n      else {\r\n        return (this._template.templateInstance === null).toString();\r\n      }\r\n    }\r\n    else {\r\n      return \"false\";\r\n    }\r\n  }\r\n}\r\n\r\n\r\nBinaryExpression.init();","import { ParseError } from \"./positions\";\r\n\r\nexport abstract class ForwardQuery<T> {\r\n\r\n  protected itemBuffer: Array<T> = [];\r\n\r\n  protected endReached: boolean = false;\r\n\r\n  protected problemCollector: Array<ParseError> = [];\r\n\r\n  protected endOfInputIndicator: T | undefined = undefined;\r\n\r\n  public next(): T {\r\n    return this.nextOffset(1);\r\n  }\r\n\r\n  public nextOffset(offset: number): T {\r\n    while (this.itemBuffer.length <= offset && !this.endReached) {\r\n      let item: T | undefined = this.fetch();\r\n      if (item !== undefined) {\r\n        this.itemBuffer.push(item);\r\n      } else {\r\n        this.endReached = true;\r\n      }\r\n    }\r\n    if (offset >= this.itemBuffer.length) {\r\n      if (this.endOfInputIndicator === undefined) {\r\n        this.endOfInputIndicator = this.endOfInput();\r\n      }\r\n      return this.endOfInputIndicator;\r\n    } else {\r\n      return this.itemBuffer[offset];\r\n    }\r\n  }\r\n\r\n  public current(): T {\r\n    return this.nextOffset(0);\r\n  }\r\n\r\n  protected abstract endOfInput(): T;\r\n\r\n  protected abstract fetch(): T | undefined;\r\n\r\n  public consume(): T {\r\n    let result: T = this.current();\r\n    this.consumeNext(1);\r\n    return result;\r\n  }\r\n\r\n  public consumeNext(numberOfItems: number): void {\r\n    if (numberOfItems < 0) {\r\n      return;\r\n    }\r\n    while (numberOfItems-- > 0) {\r\n      if (this.itemBuffer.length !== 0) {\r\n        this.itemBuffer.shift();\r\n      } else {\r\n        if (this.endReached) {\r\n          return;\r\n        } else {\r\n          let item: T | undefined = this.fetch();\r\n          if (item === undefined) {\r\n            this.endReached = true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public getProblemCollector(): Array<ParseError> {\r\n    return this.problemCollector;\r\n  }\r\n\r\n  public setProblemCollector(problemCollector: Array<ParseError>): void {\r\n    this.problemCollector = problemCollector;\r\n  }\r\n\r\n\r\n}","import { IExpression } from \"./expressions\";\r\nimport { IFunction } from \"./functions\";\r\n\r\nexport class FunctionExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    return this._function.expType;\r\n  }\r\n\r\n  public get className(): string {\r\n    return this._function.className;\r\n  }\r\n\r\n  private _function!: IFunction;\r\n  private _paras: IExpression[] = [];\r\n\r\n  public setFunction(func: IFunction): void {\r\n    this._function = func;\r\n  }\r\n\r\n  public addPara(exp: IExpression): void {\r\n    this._paras.push(exp);\r\n  }\r\n\r\n  public paraCount(): number {\r\n    return this._paras.length;\r\n  }\r\n\r\n  public evaluate(): any {\r\n    let r: any = null;\r\n    try {\r\n      r = this._function.evaluate(this._paras);\r\n    } catch (e) {\r\n      console.error('' + e);\r\n      return null;\r\n    }\r\n    return r;\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let expClone: FunctionExpression = new FunctionExpression();\r\n    expClone._function = this._function;\r\n    for (let i: number = 0; i < this._paras.length; i++) {\r\n      expClone._paras.push(this._paras[i].clone());\r\n    }\r\n    return expClone;\r\n  }\r\n\r\n  public toString(): string {\r\n    let printStr: string = this._function.className + '(';\r\n    for(let i: number = 0; i < this._paras.length; i++) {\r\n      if(i > 0) {\r\n        printStr += ',' + this._paras[i].toString();\r\n      } else {\r\n        printStr += this._paras[i].toString();\r\n      }\r\n    }\r\n    return printStr + ')';\r\n  }\r\n\r\n}","import { IExpression } from \"./expressions\";\r\nimport { ShowError } from \"../html\";\r\nimport { VE_ErrorManager, VE_Error } from \"../global\";\r\nimport { Severity } from \"../enum\";\r\n\r\nexport interface IFunction {\r\n  expType: string;\r\n  className: string;\r\n  parameterNumber(): number;\r\n  evaluate(args: Array<IExpression>): any;\r\n}\r\n\r\nexport class Pow implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'pow';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 2;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.pow(args[0].evaluate(), args[1].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Pow1${args[0].expType}1${args[0].evaluate()}2${args[1].expType}2${args[1].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Ln implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'ln';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.log(args[0].evaluate());\r\n    if (value === NaN || value === Infinity) {\r\n      ShowError.showError(`Ln${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Lg implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'lg';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.log10(args[0].evaluate());\r\n    if (value === NaN || value === Infinity) {\r\n      ShowError.showError(`Lg${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Sqrt implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'sqrt';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.sqrt(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Sqrt${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Abs implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'abs';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.abs(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Abs${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Random implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'random';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 2;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let start: number = args[0].evaluate();\r\n    let distance: number = args[1].evaluate() - args[0].evaluate();\r\n    let value: number = Math.random() * distance + start;\r\n    if (value === NaN) {\r\n      ShowError.showError(`Random1${args[0].expType}1${args[0].evaluate()}2${args[1].expType}2${args[1].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Round implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'round';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.round(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Round${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Sin implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'sin';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.sin(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Sin${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class ASin implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'asin';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.asin(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`ASin${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Cos implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'cos';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.cos(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Cos${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class ACos implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'acos';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.acos(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`ACos${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Tan implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'tan';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.tan(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Tan${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class ATan implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'atan';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.atan(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`ATan${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\n\r\nexport class CustomFunctions {\r\n\r\n  // private static _functions: {[key:string]: IFunction} = {};\r\n\r\n  private static _functionsDic: { [key: string]: Function } = {};\r\n\r\n  public static hasFunction(func_name: string): boolean {\r\n    func_name = func_name.toLowerCase();\r\n    if (this._functionsDic[func_name]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // public static addFunction(func: IFunction): void {\r\n  //   let funcName: string = func.className.toLowerCase();\r\n  //   if(this._functions[funcName]) {\r\n  //     ShowError.showError(`IDID${funcName}ID`);\r\n  //   } else {\r\n  //     this._functions[funcName] = func;\r\n  //   }\r\n  // }\r\n\r\n  public static addFunction(func: Function): void {\r\n    let tempFunc: any = new func.prototype.constructor();\r\n    let funcName: string = tempFunc.className.toLowerCase();\r\n    if (this._functionsDic[funcName]) {\r\n      VE_ErrorManager.Add(new VE_Error('', `IDID${tempFunc.className}ID`, '', Severity.Error));\r\n    } else {\r\n      this._functionsDic[funcName] = func;\r\n    }\r\n  }\r\n\r\n  public static createFunction(func_name: string): IFunction {\r\n    let tempFunc: any = new this._functionsDic[func_name.trim().toLowerCase()].prototype.constructor();\r\n    return <IFunction>tempFunc;\r\n  }\r\n\r\n  public static remove(func_name: string): void {\r\n    func_name = func_name.toLowerCase();\r\n    delete this._functionsDic[func_name];\r\n  }\r\n}\r\n\r\n\r\nCustomFunctions.addFunction(Pow);\r\nCustomFunctions.addFunction(Ln);\r\nCustomFunctions.addFunction(Lg);\r\nCustomFunctions.addFunction(Sqrt);\r\nCustomFunctions.addFunction(Abs);\r\nCustomFunctions.addFunction(Random);\r\nCustomFunctions.addFunction(Round);\r\nCustomFunctions.addFunction(Sin);\r\nCustomFunctions.addFunction(ASin);\r\nCustomFunctions.addFunction(Cos);\r\nCustomFunctions.addFunction(ACos);\r\nCustomFunctions.addFunction(Tan);\r\nCustomFunctions.addFunction(ATan);\r\n\r\n","export * from './expressionEnum';\r\nexport * from './expressions';\r\nexport * from './functions';\r\nexport * from './positions';\r\nexport * from './expChar';\r\nexport * from './token';\r\nexport * from './forwardQuery';\r\nexport * from './tokenizer';\r\nexport * from './tokenReader';\r\nexport * from './variable';\r\nexport * from './variableExpression';\r\nexport * from './scope';\r\nexport * from './functionExpression';\r\nexport * from './expressionParsing';\r\nexport * from './expManager';\r\nexport * from './veryExpressions';","export interface IPosition {\r\n  getLine(): number;\r\n  getPos(): number;\r\n}\r\n\r\n\r\nexport class NameLocation implements IPosition {\r\n\r\n  private _value: string = '';\r\n  private _line: number = 0;\r\n  private _pos: number = 0;\r\n\r\n\r\n  constructor(value: string) {\r\n    this._value = value;\r\n    this._line = 1;\r\n    this._pos = 1;\r\n  }\r\n\r\n\r\n  public getValue(): string {\r\n    return this._value;\r\n  }\r\n\r\n  public getLine(): number {\r\n    return this._line;\r\n  }  \r\n  \r\n  \r\n  public getPos(): number {\r\n    return this._pos;\r\n  }\r\n}\r\n\r\nexport enum SeverityExp{\r\n  Warning,\r\n  Error\r\n}\r\n\r\nexport class ParseError{\r\n\r\n  private _pos: IPosition;\r\n  private _message: string;\r\n  private _severity: SeverityExp;\r\n\r\n  constructor(pos: IPosition, msg: string, severity: SeverityExp) {\r\n    this._pos = pos;\r\n    this._message = msg;\r\n    this._severity = severity;\r\n  }\r\n\r\n  public static Warning(pos: IPosition, msg: string): ParseError {\r\n    let message: string = msg;\r\n    if(pos.getLine() > 0) {\r\n      message = `>>>${pos.getLine()}${pos.getPos()}${msg}`;\r\n    }\r\n    return new ParseError(pos, message, SeverityExp.Warning);\r\n  }\r\n\r\n  public static Error(pos: IPosition, msg: string): ParseError {\r\n    let message: string = msg;\r\n    if(pos.getLine() > 0) {\r\n      message = `>>>${pos.getLine()}${pos.getPos()}${msg}`;\r\n    }\r\n    return new ParseError(pos, message, SeverityExp.Error);\r\n  }\r\n\r\n  public getPosition(): IPosition {\r\n    return this._pos;\r\n  }\r\n\r\n  public getMessage(): string {\r\n    return this._message;\r\n  }\r\n\r\n  public getSeverity(): SeverityExp {\r\n    return this._severity;\r\n  }\r\n\r\n  public toString(): string {\r\n    return `${this._severity.toString()}${this._message}`;\r\n  }\r\n\r\n}","import { Variable } from \"./variable\";\r\n\r\nexport class Scope {\r\n\r\n  private _parent: Scope | undefined = undefined;\r\n\r\n  private _context: { [key: string]: Variable } = {};\r\n\r\n  private static _root: Scope;\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public static Create(): Scope {\r\n    let result: Scope = new Scope();\r\n    result._parent = Scope.GetRootScope();\r\n    return result;\r\n  }\r\n\r\n  public static GetRootScope(): Scope {\r\n    if (Scope._root === undefined) {\r\n      Scope._root = new Scope();\r\n      Scope._root.setVariable(\"PI\", 'number', Math.PI).makeConstant(Math.PI);\r\n      Scope._root.setVariable(\"EULER\", 'number', Math.E).makeConstant(Math.E);\r\n    }\r\n    return Scope._root;\r\n  }\r\n\r\n  public static CreateWithParent(parent: Scope): Scope {\r\n    let result: Scope = Scope.Create();\r\n    result._parent = parent;\r\n    return result;\r\n  }\r\n\r\n  public find(name: string): Variable | null {\r\n    if (this._context[name]) {\r\n      return this._context[name];\r\n    }\r\n    if (this._parent !== undefined) {\r\n      return this._parent.find(name);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  public setVariable(name: string, type: string, value: any): Variable {\r\n    let result: Variable | null = this.find(name);\r\n    if (result !== null) {\r\n      result.setType(type);\r\n      result.setValue(value);\r\n      return result;\r\n    }\r\n    return this.createVariable(name, type, value);\r\n  }\r\n\r\n  public createVariable(name: string, type: string, value: any): Variable {\r\n    if (this._context[name]) {\r\n      this._context[name].setType(type);\r\n      this._context[name].setValue(value);\r\n      return this._context[name];\r\n    }\r\n    let result: Variable = new Variable(name, type, value);\r\n    this._context[name] = result;\r\n    return result;\r\n  }\r\n\r\n\r\n  public setValue(name: string, value: any): void {\r\n    if (this._context[name]) {\r\n      this._context[name].setValue(value);\r\n    }\r\n  }\r\n\r\n  public isCreated(name: string): boolean {\r\n    if (this._context[name]) {\r\n      return true;\r\n    }\r\n    if (this._parent !== undefined) {\r\n      if (this._parent.find(name) !== null) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public clear(): void {\r\n    this._context = {};\r\n  }\r\n\r\n}","import { IPosition } from \"./positions\";\r\nimport { ExpressionType } from \"./expressionEnum\";\r\nimport { ExpChar } from \"./expChar\";\r\n\r\nexport class Token implements IPosition {\r\n\r\n  public type: ExpressionType = ExpressionType.STRING;\r\n\r\n  private _source: string = '';\r\n  private _contents: string = '';\r\n  private _trigger: string = '';\r\n\r\n  private _line: number = 0;\r\n  private _pos: number = 0;\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public static Create(type: ExpressionType, pos: IPosition): Token {\r\n    let result: Token = new Token();\r\n    result.type = type;\r\n    result._line = pos.getLine();\r\n    result._pos = pos.getPos();\r\n    return result;\r\n  }\r\n\r\n  public static CreateAndFill(type: ExpressionType, ch: ExpChar): Token {\r\n    let result: Token = new Token();\r\n    result.type = type;\r\n    result._line = ch.getLine();\r\n    result._pos = ch.getPos();\r\n    result._contents = ch.getValue();\r\n    result._trigger = ch.getValue();\r\n    result._source = ch.toString();\r\n    return result;\r\n  }\r\n\r\n  public addToTrigger(ch: ExpChar): Token {\r\n    this._trigger += ch.getValue();\r\n    this._source += ch.getValue();\r\n    return this;\r\n  }\r\n\r\n  public addToSource(ch: ExpChar): Token {\r\n    this._source += ch.getValue();\r\n    return this;\r\n  }\r\n\r\n  public addToContentChar(ch: ExpChar): Token {\r\n    this.addToContent(ch.getValue());\r\n    return this;\r\n  }\r\n\r\n  public addToContent(ch: string): Token {\r\n    this._contents += ch;\r\n    this._source += ch;\r\n    return this;\r\n  }\r\n\r\n  public getTrigger(): string {\r\n    return this._trigger;\r\n  }\r\n\r\n  public getTokenType(): ExpressionType {\r\n    return this.type;\r\n  }\r\n\r\n  public getContents(): string {\r\n    return this._contents;\r\n  }\r\n\r\n  public getSource(): string {\r\n    return this._source;\r\n  }\r\n\r\n  public getLine(): number {\r\n    return this._line;\r\n  }\r\n\r\n  public getPos(): number {\r\n    return this._pos;\r\n  }\r\n\r\n  public setTokenType(new_type: ExpressionType): void {\r\n    this.type = new_type;\r\n  }\r\n\r\n  public setTrigger(trigger: string): void {\r\n    this._trigger = trigger;\r\n  }\r\n\r\n  public setContent(content: string): void {\r\n    this._contents = content;\r\n  }\r\n\r\n  public setSource(source: string): void {\r\n    this._source = source;\r\n  }\r\n\r\n  public isEnd(): boolean {\r\n    return this.type === ExpressionType.EOI;\r\n  }\r\n\r\n  public is(type: ExpressionType): boolean {\r\n    return this.type === type;\r\n  }\r\n\r\n  public matches(type: ExpressionType, trigger: string): boolean {\r\n    if (!this.is(type)) {\r\n      return false;\r\n    }\r\n    if (trigger === '') {\r\n      return false;\r\n    }\r\n    return this.getTrigger() === trigger;\r\n  }\r\n\r\n  public isOperator(...symbols: string[]): boolean {\r\n    if (symbols.length === 0) {\r\n      return this.is(ExpressionType.OPERATOR);\r\n    }\r\n    for (let i: number = 0; i < symbols.length; i++) {\r\n      if (this.matches(ExpressionType.OPERATOR, symbols[i])) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public isStartBracket(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === '(' || this._trigger === '') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isEndBracket(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === ')' || this._trigger === '') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isStartSquareBracket(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === '[' || this._trigger === '') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isEndSquareBracket(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === ']' || this._trigger === '') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isStartBrace(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === '{') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isEndBrace(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === '}') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isKeyword(...keywords: string[]): boolean {\r\n    if (keywords.length === 0) {\r\n      return this.is(ExpressionType.KEYWORD);\r\n    }\r\n    for (let i: number = 0; i < keywords.length; i++) {\r\n      if (this.matches(ExpressionType.KEYWORD, keywords[i])) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public isIdentifier(...values: string[]): boolean {\r\n    if (values.length === 0) {\r\n      return this.is(ExpressionType.ID);\r\n    }\r\n    for (let i: number = 0; i < values.length; i++) {\r\n      if (this.matches(ExpressionType.ID, values[i])) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public isSpecialIdentifier(...triggers: string[]): boolean {\r\n    if (triggers.length === 0) {\r\n      return this.is(ExpressionType.SPECIAL_ID);\r\n    }\r\n    for (let i: number = 0; i < triggers.length; i++) {\r\n      if (this.matches(ExpressionType.SPECIAL_ID, triggers[i])) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public isSpecialIdentifierWithContent(trigger: string, ...contents: string[]): boolean {\r\n    if (!this.matches(ExpressionType.SPECIAL_ID, trigger)) {\r\n      return false;\r\n    }\r\n    if (contents.length === 0) {\r\n      return true;\r\n    }\r\n    for (let i: number = 0; i < contents.length; i++) {\r\n      if (this.getContents() === contents[i]) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public isNumber(): boolean {\r\n    return this.is(ExpressionType.NUMBER);\r\n  }\r\n\r\n  public isBool(): boolean {\r\n    return this.is(ExpressionType.BOOL);\r\n  }\r\n\r\n  public isString(): boolean {\r\n    return this.is(ExpressionType.STRING);\r\n  }\r\n\r\n  public isConstant(): boolean {\r\n    return this.isNumber() || this.isBool() || this.isString();\r\n  }\r\n\r\n  public toString(): string {\r\n    return this.getTokenType().toString() + ': ' + this.getContents() + ' (' + this._line + ': ' + this._pos + '), Trigger: ' + this.getTrigger();\r\n  }\r\n\r\n\r\n\r\n\r\n}","import { ForwardQuery } from \"./forwardQuery\";\r\nimport { ExpChar } from \"./expChar\";\r\n\r\nexport class TokenReader extends ForwardQuery<ExpChar> {\r\n\r\n  private _inputExp: string = '';\r\n  private _line: number = 1;\r\n  private _pos: number = 0;\r\n  private _count: number = 0;\r\n  private _operator: number = 0;\r\n\r\n  constructor(input_exp: string) {\r\n    super();\r\n    if (input_exp === '') {\r\n\r\n    }\r\n    this._inputExp = input_exp;\r\n    this._count = input_exp.length;\r\n    this._operator = 0;\r\n  }\r\n\r\n  protected endOfInput(): ExpChar {\r\n    return new ExpChar('\\0', this._line, this._pos);\r\n  }\r\n\r\n\r\n  protected fetch(): ExpChar | undefined {\r\n    if (this._operator <= this._count - 1) {\r\n      let readChar: string = this._inputExp[this._operator];\r\n      this._operator++;\r\n      if (readChar === '\\n') {\r\n        this._line++;\r\n        this._pos = 0;\r\n      }\r\n      this._pos++;\r\n      return new ExpChar(readChar, this._line, this._pos);\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  public toString(): string {\r\n    if (this.itemBuffer.length === 0) {\r\n      return this._line + ':' + this._pos + ': Buffer empty';\r\n    }\r\n    if (this.itemBuffer.length < 2) {\r\n      return this._line + ':' + this._pos + ': ' + this.current().toString();\r\n    }\r\n    return this._line + ':' + this._pos + ': ' + this.current().toString() + ', ' + this.next().toString();\r\n  }\r\n\r\n}","import { ForwardQuery } from \"./forwardQuery\";\r\nimport { Token } from \"./token\";\r\nimport { TokenReader } from \"./tokenReader\";\r\nimport { ExpressionType } from \"./expressionEnum\";\r\nimport { ParseError, IPosition } from \"./positions\";\r\nimport { ExpChar } from \"./expChar\";\r\n\r\nexport class Tokenizer extends ForwardQuery<Token> {\r\n\r\n  private _inputExp: TokenReader;\r\n\r\n  private _decimalSeparator: string = '.';\r\n  private _lineComment: string = '//';\r\n  private _blockCommentStart: string = '/*';\r\n  private _blockCommentEnd: string = '*/';\r\n  private _brackets: string[] = ['(', ')', '', '', '[', ']', '{', '}', '', ''];\r\n  private _treatSinglePipeAsBracket: boolean = true;\r\n  private _specialIdStarters: string[] = [];\r\n  private _specialIdTerminators: string[] = [];\r\n  private _keywords: { [key: string]: string } = {};\r\n  private _keywordsCaseSensitive: boolean = false;\r\n  private _stringDelimiters: { [key: string]: string } = {};\r\n  private _boolConstant: string[] = [];\r\n\r\n  constructor(input_exp: string) {\r\n    super();\r\n    this._inputExp = new TokenReader(input_exp);\r\n    this._stringDelimiters = {};\r\n    this._stringDelimiters['\\\"'] = '\\\\';\r\n    this._stringDelimiters['\\''] = '\\0';\r\n    this._boolConstant = [];\r\n    this._boolConstant.push('false');\r\n    this._boolConstant.push('true');\r\n    this._keywords = {};\r\n    this._keywords['this'] = 'this';\r\n    this._keywords['null'] = 'null';\r\n    this._keywords['none'] = 'none';\r\n    this._keywords['undefined'] = 'undefined';\r\n  }\r\n\r\n  public endOfInput(): Token {\r\n    return Token.CreateAndFill(ExpressionType.EOI, this._inputExp.current());\r\n  }\r\n\r\n  public fetch(): Token | undefined {\r\n    // \r\n    while (this._inputExp.current().isWhiteSpace()) {\r\n      this._inputExp.consume();\r\n    }\r\n\r\n    // \r\n    if (this._inputExp.current().isEndOfInput()) {\r\n      return undefined;\r\n    }\r\n\r\n    // \r\n    if (this.isAtStartOfLineComment(true)) {\r\n      this.skipToEndOfLine();\r\n      return this.fetch();\r\n    }\r\n\r\n    // \r\n    if (this.isAtStartOfBlockComment(true)) {\r\n      this.skipBlockComment();\r\n      return this.fetch();\r\n    }\r\n\r\n    // \r\n    if (this.isAtStartOfNumber()) {\r\n      return this.fetchNumber();\r\n    }\r\n\r\n    // \r\n    if (this.isAtStartOfIdentifier()) {\r\n      return this.fetchId();\r\n    }\r\n\r\n    // \r\n    if (this._stringDelimiters[this._inputExp.current().getValue()]) {\r\n      return this.fetchString();\r\n    }\r\n\r\n    //\r\n    if (this.isAtBracket(false)) {\r\n      return Token.CreateAndFill(ExpressionType.OPERATOR, this._inputExp.consume());\r\n    }\r\n\r\n    // ID$Test$\r\n    if (this.isAtStartOfSpecialId()) {\r\n      return this.fetchSpecialId();\r\n    }\r\n\r\n    // \r\n    if (this.isOperator(this._inputExp.current())) {\r\n      return this.fetchOperator();\r\n    }\r\n\r\n    //\r\n    this.problemCollector.push(ParseError.Error(this._inputExp.current(), \": \" + this._inputExp.current().getValue()));\r\n\r\n    this._inputExp.consume();\r\n    return this.fetch();\r\n  }\r\n\r\n  private fetchNumber(): Token {\r\n    let result: Token = Token.Create(ExpressionType.NUMBER, this._inputExp.current());\r\n    result.addToContentChar(this._inputExp.consume());\r\n    let hasDecimal: boolean = false;\r\n    while (this._inputExp.current().isDigit() || this._inputExp.current().is(this._decimalSeparator)) {\r\n      if (this._inputExp.current().is(this._decimalSeparator)) {\r\n        if (hasDecimal) {\r\n          this.problemCollector.push(ParseError.Error(this._inputExp.current(), \"\"));\r\n        }\r\n        hasDecimal = true;\r\n        result.addToContentChar(this._inputExp.consume());\r\n      } else {\r\n        result.addToContentChar(this._inputExp.consume());\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  private fetchId(): Token {\r\n    let result: Token = Token.Create(ExpressionType.ID, this._inputExp.current());\r\n    result.addToContentChar(this._inputExp.consume());\r\n    while (this.isIdentifierChar(this._inputExp.current())) {\r\n      result.addToContentChar(this._inputExp.consume());\r\n    }\r\n    //UnityEngine.Debug.LogWarning(result.GetContents());\r\n    if (!this._inputExp.current().isEndOfInput() && this._specialIdTerminators.indexOf(this._inputExp.current().getValue()) > -1) {\r\n      let specialId: Token = Token.Create(ExpressionType.SPECIAL_ID, result);\r\n      specialId.setTrigger(this._inputExp.current().getValue());\r\n      specialId.setContent(result.getContents());\r\n      specialId.setSource(result.getContents());\r\n      specialId.addToSource(this._inputExp.current());\r\n      this._inputExp.consume();\r\n      return this.handleKeywords(specialId);\r\n    }\r\n    return this.handleKeywords(result);\r\n  }\r\n\r\n  private fetchString(): Token {\r\n    //\r\n    let separator: string = this._inputExp.current().getValue();\r\n    //\r\n    //char escapeChar = _stringDelimiters[_inputExp.current().GetValue()];\r\n    let result: Token = Token.Create(ExpressionType.STRING, this._inputExp.current());\r\n    result.addToTrigger(this._inputExp.consume());\r\n    while (!this._inputExp.current().isNewLine() && !this._inputExp.current().is(separator) && !this._inputExp.current().isEndOfInput()) {\r\n      result.addToContentChar(this._inputExp.consume());\r\n    }\r\n    if (this._inputExp.current().is(separator)) {\r\n      result.addToSource(this._inputExp.consume());\r\n    }\r\n    else {\r\n      this.problemCollector.push(ParseError.Error(this._inputExp.current(), \"\"));\r\n    }\r\n    return result;\r\n  }\r\n\r\n  private isAtStartOfLineComment(consume: boolean): boolean {\r\n    if (this._lineComment !== '') {\r\n      return this.canConsumeThisString(this._lineComment, consume);\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  private canConsumeThisString(check_string: string, consume: boolean): boolean {\r\n    for (let i: number = 0; i < check_string.length; i++) {\r\n      //next//\r\n      if (!(this._inputExp.nextOffset(i).is(check_string[i]))) {\r\n        return false;\r\n      }\r\n    }\r\n    if (consume) {\r\n      this._inputExp.consumeNext(check_string.length);\r\n    }\r\n    return true;\r\n  }\r\n\r\n  private skipToEndOfLine(): void {\r\n    while (!this._inputExp.current().isEndOfInput() && !this._inputExp.current().isNewLine()) {\r\n      this._inputExp.consume();\r\n    }\r\n  }\r\n\r\n  private isAtStartOfBlockComment(consume: boolean): boolean {\r\n    return this.canConsumeThisString(this._blockCommentStart, consume);\r\n  }\r\n\r\n  private skipBlockComment(): void {\r\n    while (!this._inputExp.current().isEndOfInput()) {\r\n      if (this.isAtEndOfBlockComment()) {\r\n        return;\r\n      }\r\n      this._inputExp.consume();\r\n    }\r\n    this.problemCollector.push(ParseError.Error(this._inputExp.current(), ''));\r\n  }\r\n\r\n  private isAtEndOfBlockComment(): boolean {\r\n    return this.canConsumeThisString(this._blockCommentEnd, true);\r\n  }\r\n\r\n  private isAtStartOfNumber(): boolean {\r\n    if (this._inputExp.current().isDigit()) {\r\n      return true;\r\n    } else if (this._inputExp.current().is('.') && this._inputExp.next().isDigit()) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  private isAtStartOfIdentifier(): boolean {\r\n    return this._inputExp.current().isLetter() || this._inputExp.current().is('_') || this._inputExp.current().is('#');\r\n  }\r\n\r\n  private isIdentifierChar(current: ExpChar): boolean {\r\n    return current.isDigit() || current.isLetter() || current.is('_') || current.is('.') || current.is('#') || current.is(':') || current.is('');\r\n  }\r\n\r\n  private isAtBracket(in_symbol: boolean): boolean {\r\n    let r: boolean = true;\r\n    for (let i: number = 0; i < this._brackets.length; i++) {\r\n      if (!this._inputExp.current().is(this._brackets[i])) {\r\n        r = false;\r\n      }\r\n    }\r\n    if (r) {\r\n      return true;\r\n    }\r\n    if (!in_symbol && this._treatSinglePipeAsBracket && this._inputExp.current().is('|') && this._inputExp.next().is('|')) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private isAtStartOfSpecialId(): boolean {\r\n    return this._specialIdStarters.indexOf(this._inputExp.current().getValue()) > -1;\r\n  }\r\n\r\n  private fetchSpecialId(): Token {\r\n    let result: Token = Token.Create(ExpressionType.SPECIAL_ID, this._inputExp.current());\r\n    result.addToTrigger(this._inputExp.consume());\r\n    while (this.isIdentifierChar(this._inputExp.current())) {\r\n      result.addToContentChar(this._inputExp.consume());\r\n    }\r\n    return this.handleKeywords(result);\r\n  }\r\n\r\n  private handleKeywords(id_token: Token): Token {\r\n    let keyword: string = \"\";\r\n    if (this._keywordsCaseSensitive) {\r\n      if (this._keywords[id_token.getContents()]) {\r\n        keyword = this._keywords[id_token.getContents()];\r\n      }\r\n    } else {\r\n      if (this._keywords[id_token.getContents().toLowerCase()]) {\r\n        keyword = this._keywords[id_token.getContents().toLowerCase()];\r\n      }\r\n    }\r\n    if (keyword != \"\") { //\r\n      let keywordToken: Token = Token.Create(ExpressionType.KEYWORD, id_token);\r\n      keywordToken.setTrigger(keyword);\r\n      keywordToken.setContent(id_token.getContents());\r\n      keywordToken.setSource(id_token.getSource());\r\n      return keywordToken;\r\n    } else if (!id_token.is(ExpressionType.SPECIAL_ID)) { //bool\r\n      keyword = id_token.getContents().toLowerCase();\r\n      if (this._boolConstant.indexOf(keyword) > -1) {\r\n        id_token.setTokenType(ExpressionType.BOOL);\r\n      }\r\n    }\r\n    return id_token;\r\n  }\r\n\r\n  private isOperator(ch: ExpChar): boolean {\r\n    if (ch.isEndOfInput() || ch.isDigit() || ch.isLetter() || ch.isWhiteSpace()) {\r\n      return false;\r\n    }\r\n\r\n    // let c: string = ch.getValue();\r\n    // if (char.IsControl(c)) {\r\n    // \treturn false;\r\n    // }\r\n\r\n    if (this.isAtBracket(true) || this.isAtStartOfBlockComment(false) || this.isAtStartOfLineComment(false) || this.isAtStartOfNumber() || this.isAtStartOfIdentifier() || this._stringDelimiters[ch.getValue()]) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  private fetchOperator(): Token {\r\n    let result: Token = Token.Create(ExpressionType.OPERATOR, this._inputExp.current());\r\n    result.addToTrigger(this._inputExp.consume());\r\n    if (result.isOperator(\"*\") && this._inputExp.current().is('*')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\"&\") && this._inputExp.current().is('&')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\"|\") && this._inputExp.current().is('|')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\"<\") && this._inputExp.current().is('=')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\">\") && this._inputExp.current().is('=')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\"!\") && this._inputExp.current().is('=')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\"=\") && this._inputExp.current().is('=')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public addError(pos: IPosition, msg: string): void {\r\n    this.getProblemCollector().push(ParseError.Error(pos, msg));\r\n  }\r\n\r\n  public addWarning(pos: IPosition, msg: string): void {\r\n    this.getProblemCollector().push(ParseError.Warning(pos, msg));\r\n  }\r\n\r\n\r\n\r\n}","export class Variable {\r\n\r\n  public get expType(): string {\r\n    return this._expType;\r\n  }\r\n  private _expType: string = 'string';\r\n\r\n  private _value: any = null;\r\n\r\n  private _name: string = '';\r\n\r\n  private _constant: boolean = false;\r\n\r\n  constructor(name: string, type: string, value: any) {\r\n    this._name = name;\r\n    this._expType = type;\r\n    this._value = value;\r\n  }\r\n\r\n  public setType(type: string): void {\r\n    if(!this._constant) {\r\n      this._expType = type;\r\n    }\r\n  }\r\n\r\n  public setValue(value: any): void {\r\n    if(!this._constant) {\r\n      this._value = value;\r\n    }\r\n  }\r\n\r\n  public makeConstant(value: any): void {\r\n    this.setValue(value);\r\n    this._constant = true;\r\n  }\r\n\r\n  public getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  public getName(): string {\r\n    return this._name;\r\n  }\r\n\r\n  public isConstant(): boolean {\r\n    return this._constant;\r\n  }\r\n\r\n  public toString(): string {\r\n    return `Type: ${this._expType} --- ${this._name}: ${this._value.toString()}`;\r\n  }\r\n\r\n}","import { IExpression } from \"./expressions\";\r\nimport { Variable } from \"./variable\";\r\n\r\nexport class VariableExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    return this._value.expType;\r\n  }  \r\n\r\n  public get className(): string {\r\n    return 'VariableExpression';\r\n  }\r\n\r\n  private _value: Variable;\r\n  \r\n  constructor(value: Variable) {\r\n    this._value = value;\r\n  }\r\n  \r\n  public evaluate(): any {\r\n    return this._value.getValue();\r\n  }\r\n\r\n  public toString(): string {\r\n    return this._value.getName();\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let expClone: VariableExpression = new VariableExpression(this._value);\r\n    return expClone;\r\n  }\r\n  \r\n\r\n}","import { Scope } from \"./scope\";\r\nimport { ErrorInfo } from \"../utility\";\r\nimport { IExpression, VeryVarExpression, VeryTemplateExpression } from \"./expressions\";\r\nimport { VE_ExpressionParsing } from \"./expressionParsing\";\r\nimport { VariableScope } from \"../enum\";\r\nimport { ParseError } from \"./positions\";\r\nimport { VerySceneVariables } from \"../scene\";\r\nimport { IVeryVar, VE_Variables } from \"../variables\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { StateConst } from \"../state\";\r\nimport { VE_Objects, VeryEngineObject } from \"../object\";\r\nimport { Variable } from \"./variable\";\r\nimport { VE_Template } from \"../template\";\r\n\r\n\r\nexport class VE_Expressions {\r\n\r\n  public static _scope: Scope = Scope.Create();\r\n\r\n  // 1 - \r\n  // 2 -  + \r\n  // 3 -  +  +  + \r\n  // 4 -  +  +  + \r\n  // 5 -  +  +  + bool\r\n  // 6 - \r\n\r\n\r\n  // TODO == GameObject\r\n  // \r\n  public static createSceneExpression(name_id: string, expression_str: string, error_info: ErrorInfo): IExpression {\r\n    let sceneExp: IExpression = VE_ExpressionParsing.parsing(name_id, expression_str, VE_Expressions._scope, '', '', '', VariableScope.Scene);\r\n    if (VE_ExpressionParsing.errors.length > 0) {\r\n      error_info.isRight = false;\r\n      error_info.message = VE_Expressions.errorMessage(VE_ExpressionParsing.errors);\r\n    }\r\n    return sceneExp;\r\n  }\r\n\r\n  // \r\n  public static createGlobalExpression(name_id: string, expression_str: string, project_name: string, error_info: ErrorInfo): IExpression {\r\n    let globalExp: IExpression = VE_ExpressionParsing.parsing(name_id, expression_str, VE_Expressions._scope, project_name, '', '', VariableScope.Global);\r\n    if (VE_ExpressionParsing.errors.length > 0) {\r\n      error_info.isRight = false;\r\n      error_info.message = VE_Expressions.errorMessage(VE_ExpressionParsing.errors);\r\n    }\r\n    return globalExp;\r\n  }\r\n\r\n  // \r\n  public static createLocalExpression(name_id: string, expression_str: string, project_name: string, object_id: string, error_info: ErrorInfo): IExpression {\r\n    let localExp: IExpression = VE_ExpressionParsing.parsing(name_id, expression_str, VE_Expressions._scope, project_name, object_id, '', VariableScope.Local);\r\n    if (VE_ExpressionParsing.errors.length > 0) {\r\n      error_info.isRight = false;\r\n      error_info.message = VE_Expressions.errorMessage(VE_ExpressionParsing.errors);\r\n    }\r\n    return localExp;\r\n  }\r\n\r\n  // \r\n  public static createFsmExpression(name_id: string, expression_str: string, project_name: string, object_id: string, fsm_id: string, error_info: ErrorInfo): IExpression {\r\n    let fsmExp: IExpression = VE_ExpressionParsing.parsing(name_id, expression_str, VE_Expressions._scope, project_name, object_id, fsm_id, VariableScope.Fsm);\r\n    if (VE_ExpressionParsing.errors.length > 0) {\r\n      error_info.isRight = false;\r\n      error_info.message = VE_Expressions.errorMessage(VE_ExpressionParsing.errors);\r\n    }\r\n    return fsmExp;\r\n  }\r\n\r\n\r\n  // \r\n  public static getParseExpression(project_name: string, object_id: string, var_id: string, var_scope: VariableScope): Nullable<IExpression> {\r\n    // TODO: \r\n    // .*\r\n    if (var_id.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n      let varArray: string[] = var_id.split(StateConst.STATE_SEPARATOR);\r\n      if (varArray.length !== 2) {\r\n        return null;\r\n      } else {\r\n        object_id = varArray[0].trim();\r\n        var_id = varArray[1].trim().substring(1);\r\n        if (var_scope === VariableScope.Local || var_scope === VariableScope.Fsm) {\r\n          //  +  +  + \r\n          // 1. \r\n          // 2. \r\n          // 3. \r\n          // 4. \r\n          let objects: VE_Objects = VE_Manager.objects(project_name);\r\n          if (!objects) {\r\n            return null;\r\n          } else {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n            if (!veryObject) {\r\n              return null;\r\n            } else {\r\n              // \r\n              if (veryObject.isCreatedVariable(var_id)) {\r\n                let v: IVeryVar = veryObject.getVariable(var_id);\r\n                return new VeryVarExpression(v);\r\n              }\r\n              // \r\n              else if (veryObject.isCreatedExpression(var_id)) {\r\n                return veryObject.getExpression(var_id);\r\n              }\r\n              // \r\n              else if (veryObject.isCreatedFsm(var_id)) {\r\n                let v: IVeryVar = veryObject.getFsm(var_id).fsmVar;\r\n                return new VeryVarExpression(v);\r\n              }\r\n              else {\r\n                // \r\n                return null;\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          return null;\r\n        }\r\n      }\r\n    }\r\n    // *\r\n    else {\r\n      if (var_id.startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n        var_id = var_id.substring(1);\r\n        if (var_scope === VariableScope.Local || var_scope === VariableScope.Fsm) {\r\n          //  +  +  + \r\n          // 1. \r\n          // 2. \r\n          // 3. \r\n          // 4. \r\n          let objects: VE_Objects = VE_Manager.objects(project_name);\r\n          if (!objects) {\r\n            return null;\r\n          } else {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n            if (!veryObject) {\r\n              return null;\r\n            } else {\r\n              //\r\n              if (veryObject.isCreatedVariable(var_id)) {\r\n                let v: IVeryVar = veryObject.getVariable(var_id);\r\n                return new VeryVarExpression(v);\r\n              }\r\n              //\r\n              else if (veryObject.isCreatedExpression(var_id)) {\r\n                return veryObject.getExpression(var_id);\r\n              }\r\n              //\r\n              else if (veryObject.isCreatedFsm(var_id)) {\r\n                let v: IVeryVar = veryObject.getFsm(var_id).fsmVar;\r\n                return new VeryVarExpression(v);\r\n              }\r\n              else {\r\n                //\r\n                return this.getParseGlobal(project_name, var_id);\r\n              }\r\n            }\r\n          }\r\n        } else if (var_scope === VariableScope.Global) {\r\n          // \r\n          return this.getParseGlobal(project_name, var_id);\r\n        } else {\r\n          // \r\n          return this.getParseScene(var_id);\r\n        }\r\n      } else {\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n  private static getParseGlobal(project_name: string, var_id: string): Nullable<IExpression> {\r\n    // \r\n    let variables: VE_Variables = VE_Manager.variables(project_name);\r\n    if (!variables) {\r\n      return null;\r\n    } else {\r\n      if (variables.isCreatedVariable(var_id)) {\r\n        let v: IVeryVar = variables.getVariable(var_id);\r\n        return new VeryVarExpression(v);\r\n      } else if (variables.isCreatedExpression(var_id)) {\r\n        return variables.getExpression(var_id);\r\n      } else {\r\n        // \r\n        return this.getParseScene(var_id);\r\n      }\r\n    }\r\n  }\r\n\r\n  // \r\n  private static getParseScene(var_id: string): Nullable<IExpression> {\r\n    // \r\n    if (VerySceneVariables.Variables.isCreated(var_id)) {\r\n      let v: IVeryVar = VerySceneVariables.Variables.getVariable(var_id);\r\n      return new VeryVarExpression(v);\r\n    } else if (VerySceneVariables.Variables.isCreatedExpression(var_id)) {\r\n      return VerySceneVariables.Variables.getExpression(var_id);\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  private static errorMessage(errors: ParseError[]): string {\r\n    let errorStr: string = '';\r\n    for (let i: number = 0; i < errors.length; i++) {\r\n      errorStr += errors[i].getMessage() + ';\\n';\r\n    }\r\n    return errorStr;\r\n  }\r\n\r\n\r\n  public static getTemplateExpression(project_name: string, object_id: string, var_id: string, var_scope: VariableScope): Nullable<VeryTemplateExpression> {\r\n    // .*\r\n    if (var_id.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n      let varArray: string[] = var_id.split(StateConst.STATE_SEPARATOR);\r\n      if (varArray.length !== 2) {\r\n        //error_info = \".*ID\" + var_id + \"\";\r\n        return null;\r\n      }\r\n      else {\r\n        object_id = varArray[0].trim();\r\n        var_id = varArray[1].trim().substring(1);\r\n        if (var_scope === VariableScope.Local || var_scope === VariableScope.Fsm) {\r\n          let objects: VE_Objects = VE_Manager.objects(project_name);\r\n          if (!objects) {\r\n            return null;\r\n          }\r\n          else {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n            if (!veryObject) {\r\n              return null;\r\n            }\r\n            else {\r\n              // \r\n              if (veryObject.isCreatedTemplate(var_id)) {\r\n                let template: VE_Template = veryObject.getTemplate(var_id);\r\n                let r = new VeryTemplateExpression();\r\n                r.setTemplate(template);\r\n                return r;\r\n              }\r\n              else {\r\n                // \r\n                return null;\r\n              }\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          return null;\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      // *\r\n      if (var_id.startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n        var_id = var_id.substring(1);\r\n        if (var_scope === VariableScope.Local || var_scope === VariableScope.Fsm) {\r\n          let objects: VE_Objects = VE_Manager.objects(project_name);\r\n          if (!objects) {\r\n            return null;\r\n          }\r\n          else {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n            if (!veryObject) {\r\n              return null;\r\n            }\r\n            else {\r\n              // \r\n              if (veryObject.isCreatedTemplate(var_id)) {\r\n                let template: VE_Template = veryObject.getTemplate(var_id);\r\n                let r: VeryTemplateExpression = new VeryTemplateExpression();\r\n                r.setTemplate(template);\r\n                return r;\r\n              }\r\n              else {\r\n                // \r\n                let variables: VE_Variables = VE_Manager.variables(project_name);\r\n                if (!variables) {\r\n                  return null;\r\n                }\r\n                else {\r\n                  if (variables.isCreatedTemplate(var_id)) {\r\n                    let template: VE_Template = variables.getTemplate(var_id);\r\n                    let r: VeryTemplateExpression = new VeryTemplateExpression();\r\n                    r.setTemplate(template);\r\n                    return r;\r\n                  }\r\n                  else {\r\n                    // \r\n                    return null;\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        else if (var_scope === VariableScope.Global) {\r\n          // \r\n          let variables: VE_Variables = VE_Manager.variables(project_name);\r\n          if (!variables) {\r\n            return null;\r\n          }\r\n          else {\r\n            if (variables.isCreatedTemplate(var_id)) {\r\n              let template: VE_Template = variables.getTemplate(var_id);\r\n              let r: VeryTemplateExpression = new VeryTemplateExpression();\r\n              r.setTemplate(template);\r\n              return r;\r\n            }\r\n            else {\r\n              //\r\n              return null;\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          return null;\r\n        }\r\n      }\r\n      else {\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\r\n\r\n","import { Severity } from \"../enum\";\r\n\r\nexport class VE_Error {\r\n  private _pos: string = '';\r\n  private _message: string = '';\r\n  private _tableName: string = '';\r\n  private _severity: Severity = Severity.Error;\r\n\r\n  /**\r\n   * \r\n   * @param pos \r\n   * @param message \r\n   * @param table_name \r\n   * @param severity \r\n   */\r\n  constructor(pos: string, message: string, table_name: string, severity: Severity) {\r\n    this._pos = pos;\r\n    this._message = message;\r\n    this._severity = severity;\r\n    this._tableName = table_name;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param pos \r\n   * @param msg \r\n   * @param table_name \r\n   */\r\n  public static warning(pos: string, msg: string, table_name: string): VE_Error {\r\n    return new VE_Error(pos, msg, table_name, Severity.Warning);\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param pos \r\n   * @param msg \r\n   * @param table_name \r\n   */\r\n  public static error(pos: string, msg: string, table_name: string): VE_Error {\r\n    return new VE_Error(pos, msg, table_name, Severity.Error);\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public getPos(): string {\r\n    return this._pos;\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public getMessage(): string {\r\n    return this._message;\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public getTableName(): string {\r\n    return this._tableName;\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public getSeverity(): Severity {\r\n    return this._severity;\r\n  }\r\n\r\n  public toString(): string {\r\n    return \"\" + this._pos + \"\" + this._message + \"\" + this._tableName;\r\n  }\r\n}\r\n\r\n\r\nexport class VE_ErrorManager {\r\n\r\n  private static _errorList: VE_Error[] = [];\r\n\r\n  /// <summary>\r\n  /// \r\n  /// </summary>\r\n  public static get Count() {\r\n    return this._errorList.length;\r\n  }\r\n\r\n  /// <summary>\r\n  /// \r\n  /// </summary>\r\n  /// <param name=\"error\"></param>\r\n  public static Add(error: VE_Error): void {\r\n    this._errorList.push(error);\r\n  }\r\n\r\n  /// <summary>\r\n  /// \r\n  /// </summary>\r\n  /// <param name=\"index\"></param>\r\n  /// <returns></returns>\r\n  public static GetError(index: number): VE_Error {\r\n    return this._errorList[index];\r\n  }\r\n\r\n  /// <summary>\r\n  /// TODO: \r\n  /// </summary>\r\n  /// <param name=\"prefix\"></param>\r\n  public static Print(prefix?: string): void {\r\n    if (prefix) {\r\n      for (let i: number = 0; i < this._errorList.length; i++) {\r\n        if (this._errorList[i].getSeverity() === Severity.Error) {\r\n          console.error('' + prefix + \" -> \" + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n        else if (this._errorList[i].getSeverity() === Severity.Warning) {\r\n          console.warn('' + prefix + \" -> \" + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n    } else {\r\n      for (let i: number = 0; i < this._errorList.length; i++) {\r\n        if (this._errorList[i].getSeverity() === Severity.Error) {\r\n          console.error('' + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n        else if (this._errorList[i].getSeverity() === Severity.Warning) {\r\n          console.warn('' + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /// <summary>\r\n  /// \r\n  /// </summary>\r\n  /// <param name=\"prefix\"></param>\r\n  public static PrintWarnning(prefix?: string): void {\r\n    if (prefix) {\r\n      for (let i: number = 0; i < this._errorList.length; i++) {\r\n        if (this._errorList[i].getSeverity() === Severity.Warning) {\r\n          console.warn('' + prefix + \" -> \" + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n    } else {\r\n      for (let i: number = 0; i < this._errorList.length; i++) {\r\n        if (this._errorList[i].getSeverity() === Severity.Warning) {\r\n          console.warn('' + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /// <summary>\r\n  /// \r\n  /// </summary>\r\n  /// <param name=\"prefix\"></param>\r\n  public static PrintError(prefix: string): void {\r\n    if (prefix) {\r\n      for (let i: number = 0; i < this._errorList.length; i++) {\r\n        if (this._errorList[i].getSeverity() === Severity.Error) {\r\n          console.error('' + prefix + \" -> \" + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n    } else {\r\n      for (let i: number = 0; i < this._errorList.length; i++) {\r\n        if (this._errorList[i].getSeverity() === Severity.Error) {\r\n          console.error('' + prefix + \" -> \" + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}","export class GameGlobal {\r\n\r\n  \r\n  public static PlatformLoaded: boolean = false;\r\n  \r\n\r\n}","export * from './gameGlobal';\r\nexport * from './errorManager';\r\nexport * from './triggerGlobal';","import { VE_TriggerBehaviour } from \"../trigger\";\r\n\r\nexport class TriggerGlobal {\r\n\r\n  private static KEYMAP: {[key: string]: string} = {};\r\n  private static _keyUpdate: {[key: string]: boolean} = {};\r\n\r\n  private static _keysDic: { [key: string]: string } = {};\r\n\r\n  private static _triggerList: VE_TriggerBehaviour[] = [];\r\n\r\n  private static _scenes: BABYLON.Scene[] = [];\r\n  private static _initialized: boolean = false;\r\n\r\n  public static Init(): void {\r\n    \r\n\r\n  }\r\n\r\n  public static AddKeyboard(key: string, trigger: VE_TriggerBehaviour): void {\r\n    // TODO\r\n    // \r\n    if(this._scenes.indexOf(trigger.scene) === -1) {\r\n      this._scenes.push(trigger.scene);\r\n      trigger.scene.onKeyboardObservable.add( kbInfo => {\r\n        if(kbInfo.type === BABYLON.KeyboardEventTypes.KEYDOWN) {\r\n          this._keyUpdate[kbInfo.event.key.toLowerCase()] = true;\r\n        } else {\r\n          this._keyUpdate[kbInfo.event.key.toLowerCase()] = false;\r\n        }\r\n      });\r\n    }\r\n    this._triggerList.push(trigger);\r\n    // this._keysDic\r\n\r\n  }\r\n\r\n\r\n  public static RemoveKeyboard(trigger_id: string): void {\r\n\r\n  }\r\n\r\n  // \r\n\r\n  public static KeyboardUpdate(): void {\r\n\r\n    \r\n\r\n    for(let i = 0; i < this._triggerList.length; i++) {\r\n      if(this._triggerList[i].enabled) {\r\n        if(this._keyUpdate[this._keysDic[this._triggerList[i].unionID]]) {\r\n\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public static clear(): void {\r\n\r\n  }\r\n\r\n  public static clearProject(project_name: string): void {\r\n    this._scenes[0].onKeyboardObservable.clear();\r\n  }\r\n\r\n}","export * from './showError';","export class ShowError {\r\n\r\n  public static errorContentPrefix: string = '<div class=\"alert alert-error\"><button type=\"button\" class=\"close\" data-dismiss=\"alert\">&times;</button>';\r\n  public static errorContentNow: string;\r\n  public static errorZone: HTMLElement;\r\n\r\n  public static initZone(): void {\r\n    if (!this.errorZone) {\r\n      this.errorZone = document.getElementById(\"errorZone\")!;\r\n    }\r\n  }\r\n  /**\r\n   * \r\n   * TODO: logerrorwarn\r\n   * @param error_msg \r\n   */\r\n  private static showMsg(prefix: string, error_msg: string): void {\r\n    this.initZone();\r\n    if (!this.errorContentNow) {\r\n      this.errorContentNow = this.errorContentPrefix;\r\n    }\r\n    this.errorContentNow += prefix + error_msg + \"<br/>\";\r\n    this.errorZone.style.display = \"block\";\r\n    this.errorZone.innerHTML = this.errorContentNow + '</div>';\r\n    // Close button error\r\n    let closeBtn = this.errorZone.querySelector(\".close\")!;\r\n    let that = this;\r\n    closeBtn.addEventListener(\"click\", function () {\r\n      that.errorZone.style.display = \"none\";\r\n    });\r\n  }\r\n\r\n  public static show(error_msg: string): void {\r\n    this.showMsg('>>>', error_msg);\r\n  }\r\n\r\n  public static showError(error_msg: string): void {\r\n    this.showMsg('>>>', error_msg);\r\n  }\r\n\r\n  public static showWarn(error_msg: string): void {\r\n    this.showMsg('>>>', error_msg);\r\n  }\r\n\r\n  public static clear(): void {\r\n    ShowError.initZone();\r\n    ShowError.errorContentNow = ShowError.errorContentPrefix;\r\n    ShowError.errorZone.innerHTML = ShowError.errorContentNow + '</div>';\r\n    // Close button error\r\n    let closeBtn = ShowError.errorZone.querySelector(\".close\")!;\r\n    let that = ShowError;\r\n    closeBtn.addEventListener(\"click\", function () {\r\n      that.errorZone.style.display = \"none\";\r\n    });\r\n  }\r\n\r\n  public static close(): void {\r\n    ShowError.initZone();\r\n    if(ShowError.errorZone.style.display === \"none\") {\r\n      ShowError.errorZone.style.display = \"block\";\r\n    } else {\r\n      ShowError.errorZone.style.display = \"none\";\r\n    }\r\n  }\r\n}","export * from './utility/index';\r\n\r\nexport * from './action/index';\r\nexport * from './dataSource/index';\r\nexport * from './enum/index';\r\nexport * from './expression/index';\r\nexport * from './global/index';\r\nexport * from './html/index';\r\nexport * from './manager/index';\r\nexport * from './object/index';\r\nexport * from './state/index';\r\nexport * from './template/index';\r\nexport * from './trigger/index';\r\nexport * from './loader/index';\r\n\r\nexport * from './variables/index';\r\nexport * from './scene/index';\r\n\r\nexport * from '../verytable/index';\r\n\r\nexport * from './library/action/index';\r\nexport * from './library/trigger/index';\r\n","import { VE_ActionBehaviour, VE_Actions } from \"../../action\";\r\nimport { IVeryVar, VarTools } from \"../../variables\";\r\nimport { VE_Template } from \"../../template\";\r\nimport { ParaParserUtility, ErrorInfo } from \"../../utility\";\r\nimport { ParaType, Severity } from \"../../enum\";\r\nimport { VE_ErrorManager, VE_Error } from \"../../global\";\r\n\r\nenum TypeVar { VeryVar, Template, Const };\r\n\r\nexport class Action_Debug extends VE_ActionBehaviour {\r\n\r\n  public get ID(): string {\r\n    return 'Debug|';\r\n  };\r\n\r\n  public get className(): string {\r\n    return 'Action_Debug';\r\n  };\r\n\r\n  private _debugMode: number = 0;\r\n\r\n  private _typeList: Array<TypeVar> = [];\r\n  private _veryVarDic: { [key: number]: IVeryVar } = {};\r\n  private _templateDic: { [key: number]: VE_Template } = {};\r\n  private _constDic: { [key: number]: string } = {};\r\n\r\n  private _separator: string = \" \";\r\n\r\n  private _strBuilder: string = '';\r\n\r\n  public active(): void {\r\n\r\n  }\r\n\r\n  public onUpdate(): void {\r\n    this._strBuilder = '';\r\n    for (let i: number = 0; i < this._typeList.length; i++) {\r\n      if (this._typeList[i] === TypeVar.Const) {\r\n        this._strBuilder += this._constDic[i];\r\n      }\r\n      else if (this._typeList[i] === TypeVar.VeryVar) {\r\n        this._strBuilder += this._veryVarDic[i].getValue();\r\n      }\r\n      else if (this._typeList[i] === TypeVar.Template) { // TODO\r\n        //this._templateDic[i].\r\n        //_strBuilder.Append(_toString.GetString(_blueVarDic[i].VarType, _blueVarDic[i].GetValue()));\r\n      }\r\n      this._strBuilder += this._separator;\r\n    }\r\n    this._strBuilder = this._strBuilder.trim();\r\n    if (this._debugMode === 0) {\r\n      console.log(` >>> ${this._strBuilder}`);\r\n    }\r\n    else if (this._debugMode == 1) {\r\n      console.warn(` >>> ${this._strBuilder}`);\r\n    }\r\n    else if (this._debugMode == 2) {\r\n      console.error(` >>> ${this._strBuilder}`);\r\n    }\r\n  }\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    if (!ParaParserUtility.ParaNumbers(this.ID, ParaType.Action, para_array.length, 2)) {\r\n      return false;\r\n    } else {\r\n      // 1\r\n      if (para_array[0].toLowerCase() === \"log\" || para_array[0] === \"\") {\r\n        this._debugMode = 0;\r\n      }\r\n      else if (para_array[0].toLowerCase() === \"warn\" || para_array[0] === \"\") {\r\n        this._debugMode = 1;\r\n      }\r\n      else if (para_array[0].toLowerCase() === \"error\" || para_array[0] === \"\") {\r\n        this._debugMode = 2;\r\n      }\r\n      else {\r\n        VE_ErrorManager.Add(new VE_Error('', this.ID + \"  LogWarnError \" + para_array[0] + \"\", '', Severity.Error));\r\n        return false;\r\n      }\r\n\r\n      // 2\r\n      //12*3.*4*5.*6*.*7.*.*\r\n      let debugArray: string[] = para_array[1].split('+');\r\n      for (let i: number = 0; i < debugArray.length; i++) {\r\n        debugArray[i] = debugArray[i].trim();\r\n        if (VarTools.IsVarID(debugArray[i])) {\r\n          let errorInfo: ErrorInfo = new ErrorInfo();\r\n          let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVarWithExpression(this.projectName, this.objectID, debugArray[i], errorInfo);\r\n          if (veryVar === null) {\r\n            errorInfo.clear();\r\n            let template: Nullable<VE_Template> = VarTools.GetTemplate(this.projectName, this.objectID, debugArray[i], errorInfo);\r\n            if (template === null) {\r\n              VE_ErrorManager.Add(new VE_Error('', this.ID + \"  \" + debugArray[i] + \"\", '', Severity.Error));\r\n              this._constDic[this._typeList.length] = debugArray[i];\r\n              this._typeList.push(TypeVar.Const);\r\n            }\r\n            else {\r\n              this._templateDic[this._typeList.length] = template;\r\n              this._typeList.push(TypeVar.Template);\r\n            }\r\n          }\r\n          else {\r\n            this._veryVarDic[this._typeList.length] = veryVar;\r\n            this._typeList.push(TypeVar.VeryVar);\r\n          }\r\n        }\r\n        else {\r\n          this._constDic[this._typeList.length] = debugArray[i];\r\n          this._typeList.push(TypeVar.Const);\r\n        }\r\n      }\r\n\r\n      return true;\r\n    }\r\n  }\r\n\r\n\r\n  public destroy(): void {\r\n\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\nVE_Actions.addAction(Action_Debug);","export * from './translate';\r\nexport * from './debug';","import { VE_ActionBehaviour, VE_Actions } from '../../action';\r\nimport { VeryGameObject, VeryBool, VeryVector3, VeryNumber } from '../../variables';\r\nimport { Time } from '../../babylon';\r\nimport { ParaParserUtility } from '../../utility';\r\nimport { ParaType, Severity } from '../../enum';\r\nimport { VE_ErrorManager, VE_Error } from '../../global';\r\n\r\nexport class Action_Translate extends VE_ActionBehaviour {\r\n\r\n  public get ID(): string {\r\n    return '|Translate';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'Action_Translate';\r\n  }\r\n\r\n  private _refType: BABYLON.Space = BABYLON.Space.LOCAL;\r\n\r\n  private _translateObj: VeryGameObject = new VeryGameObject();\r\n  private _refObj: VeryGameObject = new VeryGameObject();\r\n\r\n  private _isDeltaTime: VeryBool = new VeryBool();\r\n\r\n  private _isVec: boolean[] = [true];\r\n  private _vecVar: VeryVector3 = new VeryVector3();\r\n  private _xVar: VeryNumber = new VeryNumber();\r\n  private _yVar: VeryNumber = new VeryNumber();\r\n  private _zVar: VeryNumber = new VeryNumber();\r\n\r\n  private _paraTime: number = 1;\r\n  private _paraVec: VeryVector3 = new VeryVector3();\r\n\r\n  public active(): void {\r\n    // console.log(this.actionID);\r\n  }\r\n\r\n\r\n  public onUpdate(): void {\r\n    if (!this._translateObj || !this._translateObj.value) {\r\n      return;\r\n    } else {\r\n      // \r\n      if (this._isDeltaTime && this._isDeltaTime.value) {\r\n        this._paraTime = Time.deltaTime;\r\n      } else {\r\n        this._paraTime = 1;\r\n      }\r\n\r\n      // \r\n      if (this._isVec[0]) {\r\n        // \r\n        this._paraVec.value.copyFrom(this._vecVar.value);\r\n      } else {\r\n        this._paraVec.value.x = this._xVar.value;\r\n        this._paraVec.value.y = this._yVar.value;\r\n        this._paraVec.value.z = this._zVar.value;\r\n      }\r\n      this._paraVec.value = this._paraVec.value.multiplyByFloats(this._paraTime, this._paraTime, this._paraTime);\r\n\r\n      // \r\n      if (this._refType === BABYLON.Space.LOCAL || this._refType === BABYLON.Space.WORLD) {\r\n        this._translateObj.value.transform.translate(this._paraVec.value, this._refType);\r\n      }\r\n      // \r\n      else {\r\n        if (this._refObj && this._refObj.value) {\r\n          this._translateObj.value.transform.translateRelativeTo(this._paraVec.value, this._refObj.value.transform);\r\n        } else {\r\n          this._translateObj.value.transform.translate(this._paraVec.value, BABYLON.Space.WORLD);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    if (!ParaParserUtility.ParaNumbers(this.ID, ParaType.Action, para_array.length, 4)) {\r\n      return false;\r\n    } else {\r\n      // 1\r\n      if (!ParaParserUtility.GameObjectPara(this.projectName, this.objectID, this.ID, ParaType.Action, this._translateObj, para_array[0])) {\r\n        return false;\r\n      }\r\n\r\n      // 2\r\n      if (!ParaParserUtility.Vector3OrNumberParaWithExpression(this.projectName, this.objectID, this.ID, ParaType.Action, this._vecVar, this._xVar, this._yVar, this._zVar, this._isVec, para_array[1])) {\r\n        return false;\r\n      }\r\n\r\n      // 3\r\n      if (para_array[2].toLowerCase() === \"world\" || para_array[2] === \"\") {\r\n        this._refType = BABYLON.Space.WORLD;\r\n      }\r\n      else if (para_array[2].toLowerCase() === \"self\" || para_array[2] === \"\") {\r\n        this._refType = BABYLON.Space.LOCAL;\r\n      }\r\n      else {\r\n        if (!ParaParserUtility.GameObjectPara(this.projectName, this.objectID, this.ID, ParaType.Action, this._refObj, para_array[2])) {\r\n          return false;\r\n        }\r\n        if (this._refObj.value === null) {\r\n          VE_ErrorManager.Add(new VE_Error('', this.ID + \"   \" + para_array[2] + \"\", '', Severity.Error));\r\n        }\r\n      }\r\n\r\n      // 4\r\n      if (!ParaParserUtility.BoolParaWithExpression(this.projectName, this.objectID, this.ID, ParaType.Action, this._isDeltaTime, para_array[3])) {\r\n        return false;\r\n      }\r\n\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public destroy(): void {\r\n    // \r\n  }\r\n\r\n\r\n}\r\n\r\n\r\nVE_Actions.addAction(Action_Translate);\r\n\r\n","export * from './input';","import { VE_TriggerBehaviour } from '../../index';\r\nimport { VE_Triggers } from '../../trigger';\r\nimport { ParaParserUtility, VE_KeyboardMap } from '../../utility';\r\nimport { ParaType, Severity } from '../../enum';\r\nimport { VE_ErrorManager, VE_Error } from '../../global';\r\n\r\n// \r\nexport class Trigger_MouseDown extends VE_TriggerBehaviour {\r\n\r\n  public get ID(): string {\r\n    return 'Mouse_Down|';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'Trigger_MouseDown';\r\n  }\r\n\r\n  private _mouseButtonIndex: number = 0;\r\n  private _downFlag: boolean = false;\r\n\r\n  private _observer: Nullable<BABYLON.Observer<BABYLON.PointerInfo>> = null;\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    if (!ParaParserUtility.ParaNumbers(this.ID, ParaType.Trigger, para_array.length, 1)) {\r\n      return false;\r\n    } else {\r\n      // 1\r\n      if (para_array[0] === \"0\" || para_array[0].toLowerCase() === \"left\" || para_array[0] === \"\") {\r\n        this._mouseButtonIndex = 0;\r\n      }\r\n      else if (para_array[0] === \"1\" || para_array[0].toLowerCase() === \"right\" || para_array[0] === \"\") {\r\n        this._mouseButtonIndex = 2;\r\n      }\r\n      else if (para_array[0] === \"2\" || para_array[0].toLowerCase() === \"middle\" || para_array[0] === \"\") {\r\n        this._mouseButtonIndex = 1;\r\n      }\r\n      else {\r\n        VE_ErrorManager.Add(new VE_Error('', this.ID + \"  \" + para_array[0] + \"012leftrightmiddle\", '', Severity.Error));\r\n        return false;\r\n      }\r\n\r\n      this._observer = this._scene.onPointerObservable.add(pointInfo => {\r\n        if (pointInfo.type === BABYLON.PointerEventTypes.POINTERDOWN) {\r\n          if (!this._downFlag && pointInfo.event.button === this._mouseButtonIndex) {\r\n            this._downFlag = true;\r\n            this.sendEvent();\r\n          }\r\n        } else if (pointInfo.type === BABYLON.PointerEventTypes.POINTERUP) {\r\n          if (this._downFlag && pointInfo.event.button === this._mouseButtonIndex) {\r\n            this._downFlag = false;\r\n          }\r\n        }\r\n      })\r\n\r\n      return true;\r\n    }\r\n\r\n  }\r\n\r\n  public destroy(): void {\r\n    if (this._observer) {\r\n      this._scene.onPointerObservable.remove(this._observer);\r\n    }\r\n  }\r\n\r\n}\r\n\r\n// \r\nexport class Trigger_MouseUp extends VE_TriggerBehaviour {\r\n\r\n  public get ID(): string {\r\n    return 'Mouse_Up|';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'Trigger_MouseUp';\r\n  }\r\n\r\n  private _mouseButtonIndex: number = 0;\r\n  private _downFlag: boolean = false;\r\n\r\n  private _observer: Nullable<BABYLON.Observer<BABYLON.PointerInfo>> = null;\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    if (!ParaParserUtility.ParaNumbers(this.ID, ParaType.Trigger, para_array.length, 1)) {\r\n      return false;\r\n    } else {\r\n      // 1\r\n      if (para_array[0] === \"0\" || para_array[0].toLowerCase() === \"left\" || para_array[0] === \"\") {\r\n        this._mouseButtonIndex = 0;\r\n      }\r\n      else if (para_array[0] === \"1\" || para_array[0].toLowerCase() === \"right\" || para_array[0] === \"\") {\r\n        this._mouseButtonIndex = 2;\r\n      }\r\n      else if (para_array[0] === \"2\" || para_array[0].toLowerCase() === \"middle\" || para_array[0] === \"\") {\r\n        this._mouseButtonIndex = 1;\r\n      }\r\n      else {\r\n        VE_ErrorManager.Add(new VE_Error('', this.ID + \"  \" + para_array[0] + \"012leftrightmiddle\", '', Severity.Error));\r\n        return false;\r\n      }\r\n\r\n      this._observer = this._scene.onPointerObservable.add(pointInfo => {\r\n        if (pointInfo.type === BABYLON.PointerEventTypes.POINTERDOWN) {\r\n          if (!this._downFlag && pointInfo.event.button === this._mouseButtonIndex) {\r\n            this._downFlag = true;\r\n          }\r\n        } else if (pointInfo.type === BABYLON.PointerEventTypes.POINTERUP) {\r\n          if (this._downFlag && pointInfo.event.button === this._mouseButtonIndex) {\r\n            this._downFlag = false;\r\n            this.sendEvent();\r\n          }\r\n        }\r\n      })\r\n\r\n      return true;\r\n    }\r\n\r\n  }\r\n\r\n  public destroy(): void {\r\n    if (this._observer) {\r\n      this._scene.onPointerObservable.remove(this._observer);\r\n    }\r\n  }\r\n\r\n}\r\n\r\n// \r\nexport class Trigger_MouseButton extends VE_TriggerBehaviour {\r\n\r\n  public get ID(): string {\r\n    return 'Mouse_Button|';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'Trigger_MouseButton';\r\n  }\r\n\r\n  private _mouseButtonIndex: number = 0;\r\n  private _mouseUpdate: { [key: number]: boolean } = {};\r\n  private _observer: Nullable<BABYLON.Observer<BABYLON.PointerInfo>> = null;\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    if (!ParaParserUtility.ParaNumbers(this.ID, ParaType.Trigger, para_array.length, 1)) {\r\n      return false;\r\n    } else {\r\n      // 1\r\n      if (para_array[0] === \"0\" || para_array[0].toLowerCase() === \"left\" || para_array[0] === \"\") {\r\n        this._mouseButtonIndex = 0;\r\n      }\r\n      else if (para_array[0] === \"1\" || para_array[0].toLowerCase() === \"right\" || para_array[0] === \"\") {\r\n        this._mouseButtonIndex = 2;\r\n      }\r\n      else if (para_array[0] === \"2\" || para_array[0].toLowerCase() === \"middle\" || para_array[0] === \"\") {\r\n        this._mouseButtonIndex = 1;\r\n      }\r\n      else {\r\n        VE_ErrorManager.Add(new VE_Error('', this.ID + \"  \" + para_array[0] + \"012leftrightmiddle\", '', Severity.Error));\r\n        return false;\r\n      }\r\n\r\n      this._observer = this._scene.onPointerObservable.add(pointInfo => {\r\n        if (pointInfo.type === BABYLON.PointerEventTypes.POINTERDOWN) {\r\n          this._mouseUpdate[pointInfo.event.button] = true;\r\n        } else if (pointInfo.type === BABYLON.PointerEventTypes.POINTERUP) {\r\n          this._mouseUpdate[pointInfo.event.button] = false;\r\n        }\r\n      })\r\n\r\n      return true;\r\n    }\r\n\r\n  }\r\n\r\n  public onUpdate(): void {\r\n    if (this._mouseUpdate[this._mouseButtonIndex]) {\r\n      this.sendEvent();\r\n    }\r\n  }\r\n\r\n  public destroy(): void {\r\n    if (this._observer) {\r\n      this._scene.onPointerObservable.remove(this._observer);\r\n    }\r\n  }\r\n\r\n}\r\n\r\n// \r\nexport class Trigger_Keyboard extends VE_TriggerBehaviour {\r\n\r\n  public get ID(): string {\r\n    return '|Key_Button';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'Trigger_Keyboard';\r\n  }\r\n\r\n  private _keyboard: string = '';\r\n  private _keyUpdate: { [key: string]: boolean } = {};\r\n  private _observer: Nullable<BABYLON.Observer<BABYLON.KeyboardInfo>> = null;\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n\r\n    if (!ParaParserUtility.ParaNumbers(this.ID, ParaType.Trigger, para_array.length, 1)) {\r\n      return false;\r\n    } else {\r\n      // 1\r\n      this._keyboard = VE_KeyboardMap.GetKey(para_array[0]).toLowerCase();\r\n      if (this._keyboard === 'null') {\r\n        VE_ErrorManager.Add(new VE_Error('', this.ID + \"  \" + para_array[0] + \"\", '', Severity.Error));\r\n        return false;\r\n      }\r\n\r\n      this._observer = this.scene.onKeyboardObservable.add(kbInfo => {\r\n        if (kbInfo.type === BABYLON.KeyboardEventTypes.KEYDOWN) {\r\n          this._keyUpdate[kbInfo.event.key.toLowerCase()] = true;\r\n        } else {\r\n          this._keyUpdate[kbInfo.event.key.toLowerCase()] = false;\r\n        }\r\n      });\r\n\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public onUpdate(): void {\r\n    if (this._keyUpdate[this._keyboard]) {\r\n      // console.log(this.triggerID);\r\n      this.sendEvent();\r\n    }\r\n  }\r\n\r\n  public destroy(): void {\r\n    if (this._observer) {\r\n      this._scene.onKeyboardObservable.remove(this._observer);\r\n    }\r\n  }\r\n\r\n\r\n}\r\n\r\n// \r\nexport class Trigger_KeyDown extends VE_TriggerBehaviour {\r\n\r\n  public get ID(): string {\r\n    return '|Key_Down';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'Trigger_KeyDown';\r\n  }\r\n\r\n  private _keyboard: string = '';\r\n  private _downFlag: boolean = false;\r\n\r\n  private _observer: Nullable<BABYLON.Observer<BABYLON.KeyboardInfo>> = null;\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n\r\n    if (!ParaParserUtility.ParaNumbers(this.ID, ParaType.Trigger, para_array.length, 1)) {\r\n      return false;\r\n    } else {\r\n      // 1\r\n      this._keyboard = VE_KeyboardMap.GetKey(para_array[0]).toLowerCase();\r\n      if (this._keyboard === 'null') {\r\n        VE_ErrorManager.Add(new VE_Error('', this.ID + \"  \" + para_array[0] + \"\", '', Severity.Error));\r\n        return false;\r\n      }\r\n\r\n      this._observer = this.scene.onKeyboardObservable.add(kbInfo => {\r\n        if (kbInfo.type === BABYLON.KeyboardEventTypes.KEYDOWN) {\r\n          if (!this._downFlag && kbInfo.event.key.toLowerCase() === this._keyboard) {\r\n            this._downFlag = true;\r\n            this.sendEvent();\r\n          }\r\n        } else {\r\n          if (this._downFlag && kbInfo.event.key.toLowerCase() === this._keyboard) {\r\n            this._downFlag = false;\r\n          }\r\n        }\r\n      });\r\n\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public destroy(): void {\r\n    if (this._observer) {\r\n      this._scene.onKeyboardObservable.remove(this._observer);\r\n    }\r\n  }\r\n\r\n\r\n}\r\n\r\n// \r\nexport class Trigger_KeyUp extends VE_TriggerBehaviour {\r\n\r\n  public get ID(): string {\r\n    return '|Key_Up';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'Trigger_KeyUp';\r\n  }\r\n\r\n  private _keyboard: string = '';\r\n  private _downFlag: boolean = false;\r\n\r\n  private _observer: Nullable<BABYLON.Observer<BABYLON.KeyboardInfo>> = null;\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n\r\n    if (!ParaParserUtility.ParaNumbers(this.ID, ParaType.Trigger, para_array.length, 1)) {\r\n      return false;\r\n    } else {\r\n      // 1\r\n      this._keyboard = VE_KeyboardMap.GetKey(para_array[0]).toLowerCase();\r\n      if (this._keyboard === 'null') {\r\n        VE_ErrorManager.Add(new VE_Error('', this.ID + \"  \" + para_array[0] + \"\", '', Severity.Error));\r\n        return false;\r\n      }\r\n\r\n      this._observer = this.scene.onKeyboardObservable.add(kbInfo => {\r\n        if (kbInfo.type === BABYLON.KeyboardEventTypes.KEYDOWN) {\r\n          if (!this._downFlag && kbInfo.event.key.toLowerCase() === this._keyboard) {\r\n            this._downFlag = true;\r\n          }\r\n        } else {\r\n          if (this._downFlag && kbInfo.event.key.toLowerCase() === this._keyboard) {\r\n            this._downFlag = false;\r\n            this.sendEvent();\r\n          }\r\n        }\r\n      });\r\n\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public destroy(): void {\r\n    if (this._observer) {\r\n      this._scene.onKeyboardObservable.remove(this._observer);\r\n    }\r\n  }\r\n\r\n\r\n}\r\n\r\n// \r\nexport class Trigger_KeyboardCombine extends VE_TriggerBehaviour {\r\n\r\n  public get ID(): string {\r\n    return 'Key_Combination|';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'Trigger_KeyboardCombine';\r\n  }\r\n\r\n  private _keyboards: string[] = [];\r\n  private _lastKey: string = '';\r\n  private _downFlag: boolean = false;\r\n  private _trigger: boolean = false;\r\n\r\n  private _keyUpdate: { [key: string]: boolean } = {};\r\n  private _observer: Nullable<BABYLON.Observer<BABYLON.KeyboardInfo>> = null;\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n\r\n    if (para_array.length < 2) {\r\n      VE_ErrorManager.Add(new VE_Error('', this.ID + \"  2\", '', Severity.Error));\r\n      return false;\r\n    } else {\r\n      // n\r\n      for (let i: number = 0; i < para_array.length; i++) {\r\n        let key: string = VE_KeyboardMap.GetKey(para_array[i]).toLowerCase();\r\n        if (key === 'null') {\r\n          VE_ErrorManager.Add(new VE_Error('', this.ID + \"  \" + para_array[i] + \"\", '', Severity.Error));\r\n          return false;\r\n        }\r\n        this._keyboards.push(key);\r\n      }\r\n      this._lastKey = this._keyboards[this._keyboards.length - 1];\r\n\r\n      this._observer = this.scene.onKeyboardObservable.add(kbInfo => {\r\n        if (kbInfo.type === BABYLON.KeyboardEventTypes.KEYDOWN) {\r\n          if (!this._downFlag && this._lastKey === kbInfo.event.key.toLowerCase()) {\r\n            this._downFlag = true;\r\n            this._trigger = true;\r\n          }\r\n          this._keyUpdate[kbInfo.event.key.toLowerCase()] = true;\r\n        } else {\r\n          if (this._downFlag && this._lastKey === kbInfo.event.key.toLowerCase()) {\r\n            this._downFlag = false;\r\n            this._trigger = false;\r\n          }\r\n          this._keyUpdate[kbInfo.event.key.toLowerCase()] = false;\r\n        }\r\n      });\r\n\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public onUpdate(): void {\r\n    if (this._keyboards && this._keyboards.length > 0) {\r\n      let all: boolean = true;\r\n      for (let i: number = 0; i < this._keyboards.length; i++) {\r\n        if (i === this._keyboards.length - 1) {\r\n          if (all && this._downFlag && this._trigger) {\r\n            this._trigger = false;\r\n            this.sendEvent();\r\n          }\r\n        } else {\r\n          if (!this._keyUpdate[this._keyboards[i]]) {\r\n            all = false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    // if (this._keyUpdate[this._keyboard]) {\r\n    //   // console.log(this.triggerID);\r\n    //   this.sendEvent();\r\n    // }\r\n  }\r\n\r\n  public destroy(): void {\r\n    if (this._observer) {\r\n      this._scene.onKeyboardObservable.remove(this._observer);\r\n    }\r\n  }\r\n\r\n\r\n}\r\n\r\n\r\n// Mouse Input\r\nVE_Triggers.addTrigger(Trigger_MouseDown);\r\nVE_Triggers.addTrigger(Trigger_MouseUp);\r\nVE_Triggers.addTrigger(Trigger_MouseButton);\r\n\r\n// Keyboard Input\r\nVE_Triggers.addTrigger(Trigger_Keyboard);\r\nVE_Triggers.addTrigger(Trigger_KeyDown);\r\nVE_Triggers.addTrigger(Trigger_KeyUp);\r\nVE_Triggers.addTrigger(Trigger_KeyboardCombine);","import { VE_Templates, VE_Template } from \"../template\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { VE_Objects, VeryEngineObject } from \"../object\";\r\nimport { VE_Variables, VeryVarManager, IVeryVar, VeryExpression } from \"../variables\";\r\nimport { ErrorInfo, VE_StringFormat } from \"../utility\";\r\nimport { VE_ErrorManager, VE_Error } from \"../global\";\r\nimport { VE_Expressions, IExpression } from \"../expression\";\r\nimport { VE_FsmData, VE_StateData, VE_StateTriggerData, VE_StateActionData } from \"../dataSource\";\r\nimport { VE_Fsm, VE_State, VE_StateAction, VE_AssociatedState, StateConst } from \"../state\";\r\nimport { VE_Triggers, VE_TriggerBehaviour } from \"../trigger\";\r\nimport { VE_Actions, VE_ActionBehaviour, VE_Assignment } from \"../action\";\r\nimport { StateActionType, AssignType } from \"../enum\";\r\nimport { VE_TypeConvert } from \"../utility/typeConvert\";\r\nimport { VE_AssignmentTypeJudge } from \"../action/assignmentTypeJudge\";\r\nimport { VerySceneVariables } from \"../scene\";\r\n\r\nexport class CreateInstance {\r\n\r\n\r\n\r\n\r\n\r\n  public static createProject(project_name: string): boolean {\r\n    let templates: VE_Templates = VE_Manager.templates(project_name);\r\n    let objects: VE_Objects = VE_Manager.objects(project_name);\r\n    let globalVars: VE_Variables = VE_Manager.variables(project_name);\r\n\r\n    // 1. \r\n    // (1).\r\n    for (let i: number = 0; i < globalVars.varData.count; i++) {\r\n      let varID: string = globalVars.varData.getVariableID(i);\r\n      let varPara: string[] = globalVars.varData.getVariableParas(varID);\r\n      // 1.2.3.\r\n      // 1.\r\n      if (varPara[0] === \"\" || varPara[0].toLowerCase() === \"expression\") {\r\n        continue;\r\n      }\r\n      // 2.IVeryVar\r\n      else if (VeryVarManager.hasVarType(varPara[0])) {\r\n        let errorInfo: ErrorInfo = new ErrorInfo();\r\n        let newVar: Nullable<IVeryVar> = VeryVarManager.createVariable(varID, varPara[0], varPara[1], errorInfo);\r\n        // TODO: ListDictionary\r\n        if (!errorInfo.isRight || newVar === null) {\r\n          VE_ErrorManager.Add(VE_Error.error(globalVars.varData.getPos(varID), \"\" + project_name + \"\" + varID + \"\" + varPara[0] + \"\" + varPara[1] + \"\" + errorInfo.message + \"\", ''));\r\n          return false;\r\n        } else {\r\n          globalVars.addVariable(varID, newVar);\r\n        }\r\n      }\r\n      // 3.\r\n      else if (templates.isCreatedTemplate(varPara[0])) {\r\n        globalVars.addTemplate(varID, templates.getTemplate(varPara[0]).clone('__global__', varID));\r\n      }\r\n      // \r\n      else {\r\n        VE_ErrorManager.Add(VE_Error.error(globalVars.varData.getPos(varID), \"\" + project_name + \"\" + varID + \"\" + varPara[0] + \"\" + varPara[1] + \"\", ''));\r\n        return false;\r\n      }\r\n    }\r\n\r\n    // (2).\r\n    for (let i: number = 0; i < globalVars.varData.count; i++) {\r\n      let varID: string = globalVars.varData.getVariableID(i);\r\n      let varPara: string[] = globalVars.varData.getVariableParas(varID);\r\n      // \r\n      // 1.\r\n      if (varPara[0] === \"\" || varPara[0].toLowerCase() === \"expression\") {\r\n        // \r\n        let errorInfo: ErrorInfo = new ErrorInfo();\r\n        let globalExp: IExpression = VE_Expressions.createGlobalExpression(varID, varPara[1], project_name, errorInfo);\r\n        if (!errorInfo.isRight || !globalExp) {\r\n          VE_ErrorManager.Add(VE_Error.error(globalVars.varData.getPos(varID), \"\" + project_name + \"\" + varID + \",\" + varPara[0] + \",\" + varPara[1] + \"\\n\" + errorInfo.message, \"\"));\r\n          return false;\r\n        }\r\n        globalVars.addExpression(varID, globalExp);\r\n      }\r\n      else {\r\n        continue;\r\n      }\r\n    }\r\n\r\n    // 2. ----\r\n    // 1.\r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.varData.count; k++) {\r\n        // (1). \r\n        let varID: string = veryObject.varData.getVariableID(k);\r\n        let varPara: string[] = veryObject.varData.getVariableParas(varID);\r\n        // 1.2.3.\r\n        // 1.\r\n        if (varPara[0] === \"\" || varPara[0].toLowerCase().trim() === \"expression\") {\r\n          continue;\r\n        }\r\n        // 2.IVeryVar\r\n        else if (VeryVarManager.hasVarType(varPara[0])) {\r\n          let errorInfo: ErrorInfo = new ErrorInfo();\r\n          let newVar: Nullable<IVeryVar> = VeryVarManager.createVariable(varID, varPara[0], varPara[1], errorInfo);\r\n          // TODO: ListDictionary\r\n          if (newVar === null || !errorInfo.isRight) {\r\n            VE_ErrorManager.Add(VE_Error.error(veryObject.varData.getPos(varID), \"\" + project_name + \"\" + varID + \"\" + varPara[0] + \"\" + varPara[1] + \"\" + errorInfo.message + \"\", ''));\r\n            return false;\r\n          } else {\r\n            globalVars.addVariable(varID, newVar);\r\n          }\r\n        }\r\n        // 3.\r\n        else if (templates.isCreatedTemplate(varPara[0])) {\r\n          veryObject.addTemplate(varID, templates.getTemplate(varPara[0]).clone(objectID, varID));\r\n        }\r\n        // \r\n        else {\r\n          VE_ErrorManager.Add(VE_Error.error(veryObject.varData.getPos(varID), \"\" + project_name + \"\" + objectID + \"\" + varID + \",\" + varPara[0] + \",\" + varPara[1] + \"\", \"\"));\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    // 3.   \r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.dataSource.fsmCount; k++) {\r\n        let fsmID: string = veryObject.dataSource.getFsmID(k);\r\n        let fsmData: VE_FsmData = veryObject.dataSource.getFsmData(fsmID);\r\n        // \r\n        let errorInfo: ErrorInfo = new ErrorInfo();\r\n        let newVar: Nullable<IVeryVar> = VeryVarManager.createVariable(fsmID, fsmData.fsmType, fsmData.initialValStr, errorInfo);\r\n        // TODO: ListDictionary\r\n        if (newVar === null || !errorInfo.isRight) {\r\n          VE_ErrorManager.Add(VE_Error.error(veryObject.dataSource.getFsmPos(fsmID), \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + errorInfo.message + \"\", ''));\r\n          return false;\r\n        }\r\n        // \r\n        let fsm: VE_Fsm = new VE_Fsm(project_name, objectID, fsmID, newVar, veryObject);\r\n        veryObject.addFsm(fsmID, fsm);\r\n      }\r\n    }\r\n    // \r\n    // 4. \r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.varData.count; k++) {\r\n        // (1). \r\n        let varID: string = veryObject.varData.getVariableID(k);\r\n        let varPara: string[] = veryObject.varData.getVariableParas(varID);\r\n        // 1.2.3.\r\n        // 1.\r\n        if (varPara[0] === \"\" || varPara[0].toLowerCase().trim() === \"expression\") {\r\n          // \r\n          let errorInfo: ErrorInfo = new ErrorInfo();\r\n          let newVar: IExpression = VE_Expressions.createLocalExpression(varID, varPara[1], project_name, objectID, errorInfo);\r\n          if (!errorInfo.isRight || !newVar) {\r\n            VE_ErrorManager.Add(VE_Error.error(veryObject.varData.getPos(varID), \"\" + project_name + \"\" + objectID + \"\" + varID + \",\" + varPara[0] + \",\" + varPara[1] + \"\\n\" + errorInfo.message, ''));\r\n            return false;\r\n          }\r\n          veryObject.addExpression(varID, newVar);\r\n        }\r\n        else {\r\n          continue;\r\n        }\r\n      }\r\n    }\r\n\r\n    // TODO: UI\r\n\r\n    // 6. \r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.dataSource.triggerCount; k++) {\r\n        let triggerID: string = veryObject.dataSource.getTriggerID(k);\r\n        //Debug.Log(\"ID\" + triggerID);\r\n        let triggerPara: string[] = veryObject.dataSource.getTriggerPara(triggerID);\r\n\r\n        if (!VE_Triggers.hasTrigger(triggerPara[0])) {\r\n          VE_ErrorManager.Add(VE_Error.error(veryObject.dataSource.getTriggerPos(triggerID), \"\" + project_name + \"\" + objectID + \"\" + triggerID + \"\" + triggerPara[0] + \"\", \"\"));\r\n          return false;\r\n        } else {\r\n          // Trigger\r\n          let errorInfo: ErrorInfo = new ErrorInfo();\r\n          let trigger: Nullable<VE_TriggerBehaviour> = VE_Triggers.createTrigger(veryObject, triggerID, triggerPara[0], triggerPara.slice(1), errorInfo);\r\n\r\n          if (!errorInfo.isRight || !trigger) {\r\n            VE_ErrorManager.Add(VE_Error.error(veryObject.dataSource.getTriggerPos(triggerID), \"\" + project_name + \"\" + objectID + \"\" + triggerID + \"\" + errorInfo.message + \"\", \"\"));\r\n            return false;\r\n          }\r\n\r\n          veryObject.addTrigger(triggerID, trigger!);\r\n        }\r\n      }\r\n    }\r\n\r\n    // 5. \r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.dataSource.actionCount; k++) {\r\n        let actionID: string = veryObject.dataSource.getActionID(k);\r\n        let actionPara: string[] = veryObject.dataSource.getActionPara(actionID);\r\n        // console.log(actionID);\r\n        // console.log(actionPara);\r\n        if (!VE_Actions.hasAction(actionPara[0])) {\r\n          VE_ErrorManager.Add(VE_Error.error(veryObject.dataSource.getActionPos(actionID), \"\" + project_name + \"\" + objectID + \"\" + actionID + \"\" + actionPara[0] + \"\", \"\"));\r\n          return false;\r\n        } else {\r\n          // Action\r\n          let errorInfo: ErrorInfo = new ErrorInfo();\r\n          let action: Nullable<VE_ActionBehaviour> = VE_Actions.createAction(veryObject, actionID, actionPara[0], actionPara.slice(1), veryObject.dataSource.getActionInitVal(actionID), errorInfo);\r\n\r\n          if (!errorInfo.isRight || !action) {\r\n            VE_ErrorManager.Add(VE_Error.error(veryObject.dataSource.getActionPos(actionID), \"\" + project_name + \"\" + objectID + \"\" + actionID + \"\" + errorInfo.message + \"\", \"\"));\r\n            return false;\r\n          }\r\n\r\n          veryObject.addAction(actionID, action!);\r\n        }\r\n      }\r\n    }\r\n\r\n    // 7.    +  + \r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.dataSource.fsmCount; k++) {\r\n        let fsmID: string = veryObject.dataSource.getFsmID(k);\r\n        let fsmData: VE_FsmData = veryObject.dataSource.getFsmData(fsmID);\r\n        // \r\n        let fsm: VE_Fsm = veryObject.getFsm(fsmID);\r\n        // \r\n        for (let p: number = 0; p < fsmData.count; p++) {\r\n          let stateData: VE_StateData = fsmData.getStateData(p);\r\n          let state: VE_State = new VE_State(fsm, fsm.count + 1);\r\n          // \r\n          if (stateData.isInitialValue) {\r\n            state.setInitialValue(fsm.fsmVar.getValue());\r\n          }\r\n          else {\r\n            // TODO: \r\n            if (!this.stateAssignment(project_name, objectID, fsmID, globalVars, objects, veryObject, fsm, stateData, state)) {\r\n              return false;\r\n            }\r\n          }\r\n\r\n          // \r\n          if (stateData.isSequence) {\r\n            state.setSequence();\r\n          }\r\n\r\n          // \r\n          if (stateData.logicalExp !== '') {\r\n            let errorInfo: ErrorInfo = new ErrorInfo();\r\n            let logicalExp: IExpression = VE_Expressions.createFsmExpression('', stateData.logicalExp, project_name, objectID, fsmID, errorInfo);\r\n            if (!errorInfo.isRight || !logicalExp) {\r\n              VE_ErrorManager.Add(VE_Error.error(\"\" + stateData.rowIndex.toString() + \"E\", \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + stateData.logicalExp + \"\\n\" + errorInfo.message, \"\"));\r\n              return false;\r\n            }\r\n            state.logicalAssociated = logicalExp;\r\n          }\r\n\r\n          // \r\n          for (let s: number = 0; s < stateData.triggerCount; s++) {\r\n            let triggerData: VE_StateTriggerData = stateData.getTrigger(s);\r\n            let triggerPos: string = stateData.getTriggerPos(s);\r\n            // \r\n            let trigger: Nullable<VE_TriggerBehaviour> = VE_Triggers.findTrigger(veryObject, triggerData.triggerID);\r\n            if (trigger === null) {\r\n              VE_ErrorManager.Add(VE_Error.error(triggerPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + triggerData.triggerID + \"\", \"\"));\r\n              return false;\r\n            }\r\n            // \r\n            let logicalExp: Nullable<IExpression> = null;\r\n            // Debug.LogWarning(\"\" + triggerData.LogicalExp);\r\n            if (triggerData.logicalExp !== '') {\r\n              // \r\n              let errorInfo: ErrorInfo = new ErrorInfo();\r\n              logicalExp = VE_Expressions.createFsmExpression('', triggerData.logicalExp, project_name, objectID, fsmID, errorInfo);\r\n              // Debug.LogWarning(logicalExp);\r\n              if (!errorInfo.isRight || logicalExp === null) {\r\n                VE_ErrorManager.Add(VE_Error.error(triggerPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + triggerData.logicalExp + \"\\n\" + errorInfo.message, \"\"));\r\n                return false;\r\n              }\r\n            }\r\n            // console.log(state);\r\n            // console.log(trigger);\r\n            trigger.addTriggerTarget(logicalExp!, state);\r\n            // \r\n            if (triggerData.logicalSwitch !== '') {\r\n              // \r\n              let errorInfo: ErrorInfo = new ErrorInfo();\r\n              let logicalSwitch: IExpression = VE_Expressions.createFsmExpression('', triggerData.logicalSwitch, project_name, objectID, fsmID, errorInfo);\r\n              if (!errorInfo.isRight || logicalSwitch === null) {\r\n                VE_ErrorManager.Add(VE_Error.error(triggerPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + triggerData.logicalSwitch + \"\\n\" + errorInfo.message, \"\"));\r\n                return false;\r\n              }\r\n              trigger.addLogicalSwitch(logicalSwitch);\r\n            }\r\n          }\r\n\r\n          // \r\n          for (let s: number = 0; s < stateData.actionCount; s++) {\r\n            let actionData: VE_StateActionData = stateData.getAction(s);\r\n            let actionPos: string = stateData.getActionPos(s);\r\n            // \r\n            if (actionData.type === StateActionType.Action) {\r\n              // \r\n              let action: Nullable<VE_ActionBehaviour> = VE_Actions.findAction(veryObject, actionData.actionID);\r\n              if (action === null) {\r\n                VE_ErrorManager.Add(VE_Error.error(actionPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + actionData.actionID + \"\", \"\"));\r\n                return false;\r\n              }\r\n              // bool\r\n              // \r\n              let errorInfo: ErrorInfo = new ErrorInfo();\r\n              let enabledFlag: boolean = VE_TypeConvert.boolConvert(actionData.enabled, errorInfo);\r\n              if (!errorInfo.isRight) {\r\n                VE_ErrorManager.Add(VE_Error.error(actionPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + actionData.actionID + \"booltruefalse\", \"\"));\r\n                return false;\r\n              }\r\n\r\n              // \r\n              let everyFrameFlag = VE_TypeConvert.boolConvert(actionData.everyFrame, errorInfo);\r\n              if (!errorInfo.isRight) {\r\n                VE_ErrorManager.Add(VE_Error.error(actionPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + actionData.actionID + \"booltruefalse\", \"\"));\r\n                return false;\r\n              }\r\n              // \r\n              let isSequence = VE_TypeConvert.boolConvert(actionData.isSequence, errorInfo);\r\n              if (!errorInfo.isRight) {\r\n                VE_ErrorManager.Add(VE_Error.error(actionPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + actionData.actionID + \"booltruefalse\", \"\"));\r\n                return false;\r\n              }\r\n              let stateAction: VE_StateAction = new VE_StateAction();\r\n              // console.log(`isSequence: ${isSequence}`);\r\n              stateAction.setAction(action, enabledFlag, everyFrameFlag, isSequence);\r\n              state.addAction(stateAction);\r\n            }\r\n            //\r\n            else {\r\n              // TODO\r\n              if (!this.assignmentAction(project_name, objectID, fsmID, globalVars, objects, veryObject, actionData, state)) {\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n\r\n          // \r\n          if (fsm.isCreatedState(stateData.stateIndex)) {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\" + stateData.rowIndex.toString() + \"I\", \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + stateData.ValStr + \"ID\", \"\"));\r\n            return false;\r\n          }\r\n          else {\r\n            fsm.addState(state, stateData.stateIndex);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // 8.   \r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.dataSource.fsmCount; k++) {\r\n        let fsmID: string = veryObject.dataSource.getFsmID(k);\r\n        let fsmData: VE_FsmData = veryObject.dataSource.getFsmData(fsmID);\r\n        // \r\n        let fsm: VE_Fsm = veryObject.getFsm(fsmID);\r\n        // \r\n        for (let p: number = 0; p < fsmData.count; p++) {\r\n          let stateData: VE_StateData = fsmData.getStateData(p);\r\n          let state: Nullable<VE_State> = fsm.getStateInSequence(p);\r\n          // \r\n          for (let s: number = 0; s < stateData.associatedStateCount; s++) {\r\n            let associatedStateInfo: string = stateData.getAssociatedState(s);\r\n            let associatedPos: string = stateData.getAssociatedStatePos(s);\r\n            let associatedState: VE_AssociatedState = new VE_AssociatedState(state!);\r\n            let multipleAssociatedState: string[] = associatedStateInfo.split(/,|/);\r\n            for (let www: number = 0; www < multipleAssociatedState.length; www++) {\r\n              associatedStateInfo = multipleAssociatedState[www].trim();\r\n              let stateIndex: number = StateConst.STATE_INDEX;\r\n              let strArray: string[] = associatedStateInfo.split('=');\r\n              if (strArray.length === 1) {\r\n                stateIndex = StateConst.STATE_INDEX;\r\n              }\r\n              else if (strArray.length === 2) {\r\n                let errorInfo: ErrorInfo = new ErrorInfo();\r\n                stateIndex = VE_TypeConvert.intConvert(strArray[1].trim(), errorInfo);\r\n                if (!errorInfo.isRight) {\r\n                  VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"=ID\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"=ID\", \"\"));\r\n                return false;\r\n              }\r\n              // 1. \r\n              // 2. .\r\n              // 3. *.\r\n              // 4. .*.\r\n\r\n              let aFsmID: string = strArray[0].trim();\r\n              if (aFsmID.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n                let stateArray: string[] = aFsmID.split(StateConst.STATE_SEPARATOR);\r\n                for (let q: number = 0; q < stateArray.length; q++) {\r\n                  stateArray[q] = stateArray[q].trim();\r\n                }\r\n                // .*.\r\n                if (stateArray.length === 3) {\r\n                  if (objects.isCreated(stateArray[0])) {\r\n                    let aObject: VeryEngineObject = objects.getVeryObject(stateArray[0]);\r\n                    if (stateArray[1].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n                      let varID: string = stateArray[1].substring(1);\r\n                      if (aObject.isCreatedTemplate(varID)) {\r\n                        let template: VE_Template = aObject.getTemplate(varID);\r\n                        if (template.dataSource.isCreatedFsm(stateArray[2])) {\r\n                          associatedState.addTemplate(template, stateArray[2], stateIndex, associatedPos);\r\n                          // VE_AssociatedState associatedState = new VE_AssociatedState(state, template, stateArray[2], stateIndex);\r\n                          // state.AddAssociatedState(associatedState);\r\n                        }\r\n                        else {\r\n                          VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".*.\", \"\"));\r\n                          return false;\r\n                        }\r\n                      }\r\n                      else {\r\n                        VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".*.\", \"\"));\r\n                        return false;\r\n                      }\r\n                    }\r\n                    else {\r\n                      VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".*.\", \"\"));\r\n                      return false;\r\n                    }\r\n                  }\r\n                  else {\r\n                    VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".*.\", \"\"));\r\n                    return false;\r\n                  }\r\n                }\r\n                else if (stateArray.length === 2) {\r\n                  let aObjectID: string = stateArray[0].trim();\r\n                  aFsmID = stateArray[1].trim();\r\n                  // *.\r\n                  if (aObjectID.startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n                    aObjectID = aObjectID.substring(1);\r\n                    if (veryObject.isCreatedTemplate(aObjectID)) {\r\n                      let template: VE_Template = veryObject.getTemplate(aObjectID);\r\n                      if (template.dataSource.isCreatedFsm(stateArray[1])) {\r\n                        associatedState.addTemplate(template, stateArray[1], stateIndex, associatedPos);\r\n                        // VE_AssociatedState associatedState = new VE_AssociatedState(state, template, stateArray[1], stateIndex);\r\n                        // state.AddAssociatedState(associatedState);\r\n                      }\r\n                      else {\r\n                        VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"*.\", \"\"));\r\n                        return false;\r\n                      }\r\n                    }\r\n                    else {\r\n                      if (globalVars.isCreatedTemplate(aObjectID)) {\r\n                        let template: VE_Template = globalVars.getTemplate(aObjectID);\r\n                        if (template.dataSource.isCreatedFsm(stateArray[1])) {\r\n                          associatedState.addTemplate(template, stateArray[1], stateIndex, associatedPos);\r\n                          // VE_AssociatedState associatedState = new VE_AssociatedState(state, template, stateArray[1], stateIndex);\r\n                          // state.AddAssociatedState(associatedState);\r\n                        }\r\n                        else {\r\n                          VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"*.\", \"\"));\r\n                          return false;\r\n                        }\r\n                      }\r\n                      else {\r\n                        VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"*.\", \"\"));\r\n                        return false;\r\n                      }\r\n                    }\r\n                  }\r\n                  // .\r\n                  else {\r\n                    let aObject: VeryEngineObject = objects.getVeryObject(aObjectID);\r\n                    if (aObject === null) {\r\n                      VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".\", \"\"));\r\n                      return false;\r\n                    }\r\n                    let aFsm: VE_Fsm = aObject.getFsm(aFsmID);\r\n                    if (aFsm === null) {\r\n                      VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".\", \"\"));\r\n                      return false;\r\n                    }\r\n                    let toState: Nullable<VE_State> = aFsm.getState(stateIndex);\r\n                    if (toState === null) {\r\n                      VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".\", \"\"));\r\n                      return false;\r\n                    }\r\n                    associatedState.add(toState, stateIndex, associatedPos);\r\n                    // VE_AssociatedState associatedState = new VE_AssociatedState(state, toState);\r\n                    // state.AddAssociatedState(associatedState);\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              //\r\n              else {\r\n                let aFsm: VE_Fsm = veryObject.getFsm(aFsmID);\r\n                if (aFsm === null) {\r\n                  VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"\", \"\"));\r\n                  return false;\r\n                }\r\n                let toState: Nullable<VE_State> = aFsm.getState(stateIndex);\r\n                if (toState === null) {\r\n                  VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"\", \"\"));\r\n                  return false;\r\n                }\r\n\r\n                associatedState.add(toState, stateIndex, associatedPos);\r\n                //VE_AssociatedState associatedState = new VE_AssociatedState(state, toState);\r\n                //state.AddAssociatedState(associatedState);\r\n              }\r\n            }\r\n            state!.addAssociatedState(associatedState);\r\n\r\n          }\r\n\r\n        }\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n\r\n  private static stateAssignment(project_name: string, object_id: string, fsm_id: string, global_vars: VE_Variables, objects: VE_Objects, very_object: VeryEngineObject, fsm: VE_Fsm, state_data: VE_StateData, state: VE_State): boolean {\r\n    // \r\n    // \r\n    let assignStr: string = state_data.ValStr;\r\n    // *\r\n    // .*\r\n    // *.*\r\n    // .*.*\r\n    if (assignStr.indexOf(StateConst.VARIABLE_SYMBOL) > -1)  // \r\n    {\r\n      if (assignStr.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n        let valArray: string[] = assignStr.split(StateConst.STATE_SEPARATOR);\r\n        for (let q: number = 0; q < valArray.length; q++) {\r\n          valArray[q] = valArray[q].trim();\r\n        }\r\n        if (valArray.length === 2) {\r\n          if (!valArray[1].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"1*2.*3*.*4.*.*\", \"\"));\r\n            return false;\r\n          }\r\n          else {\r\n            // *.*\r\n            if (valArray[0].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n              let templateVarID: string = valArray[0].substring(1);\r\n              let varID: string = valArray[1].substring(1);\r\n              if (very_object.isCreatedTemplate(templateVarID)) {\r\n                let template: VE_Template = very_object.getTemplate(templateVarID);\r\n                if (template.varData.isCreatedVariable(varID) || template.dataSource.isCreatedFsm(varID)) {\r\n                  state.setTemplateInfo(template, varID, assignStr);\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"*.***\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                if (global_vars.isCreatedTemplate(templateVarID)) {\r\n                  let template: VE_Template = global_vars.getTemplate(templateVarID);\r\n                  if (template.varData.isCreatedVariable(varID) || template.dataSource.isCreatedFsm(varID)) {\r\n                    state.setTemplateInfo(template, varID, assignStr);\r\n                  }\r\n                  else {\r\n                    VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"*.***\", \"\"));\r\n                    return false;\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"*.**\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n            }\r\n            // .*\r\n            else {\r\n              if (valArray[0] === object_id && valArray[1].substring(1) === fsm_id) {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \".*\", \"\"));\r\n                return false;\r\n              }\r\n              let errorInfo: ErrorInfo = new ErrorInfo();\r\n\r\n              let veryVar: Nullable<IVeryVar> = VeryVarManager.getVariable(valArray[1].substring(1), project_name, valArray[0], errorInfo);\r\n              if (!errorInfo.isRight || veryVar === null) {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \".**\" + valArray[1] + \"\" + errorInfo, \"\"));\r\n                return false;\r\n              }\r\n              else {\r\n                // \r\n                if (VE_AssignmentTypeJudge.allow(fsm.fsmVar, veryVar)) {\r\n                  state.setStateVariable(veryVar);\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \".*\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        else if (valArray.length === 3) {\r\n          // .*.*\r\n          if (valArray[0].startsWith(StateConst.STATE_SEPARATOR) || !valArray[1].startsWith(StateConst.STATE_SEPARATOR) || !valArray[2].startsWith(StateConst.STATE_SEPARATOR)) {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"1*2.*3*.*4.*.*\", \"\"));\r\n            return false;\r\n          }\r\n          else {\r\n            let templateVarID: string = valArray[1].substring(1);\r\n            let varID: string = valArray[2].substring(1);\r\n            if (objects.isCreated(valArray[0])) {\r\n              let tObject: VeryEngineObject = objects.getVeryObject(valArray[0]);\r\n              if (tObject.isCreatedTemplate(templateVarID)) {\r\n                let template: VE_Template = tObject.getTemplate(templateVarID);\r\n                if (template.varData.isCreatedVariable(varID) || template.dataSource.isCreatedFsm(varID)) {\r\n                  state.setTemplateInfo(template, varID, assignStr);\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \".*.*.**\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \".*.**\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n            else {\r\n              VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \".*.*\", \"\"));\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"1*2.*3*.*4.*.*\", \"\"));\r\n          return false;\r\n        }\r\n      }\r\n      else {\r\n        // *\r\n        let varID: string = assignStr.substring(1);\r\n        if (varID == fsm_id) {\r\n          VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"*\", \"\"));\r\n          return false;\r\n        }\r\n        let errorInfo: ErrorInfo = new ErrorInfo();\r\n        let stateVar: Nullable<IVeryVar> = VeryVarManager.getVariable(varID, project_name, object_id, errorInfo);\r\n        if (stateVar === null) {\r\n          VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"\" + errorInfo, \"\"));\r\n          return false;\r\n        }\r\n        else {\r\n          //\r\n          if (VE_AssignmentTypeJudge.allow(fsm.fsmVar, stateVar)) {\r\n            state.setStateVariable(stateVar);\r\n          }\r\n          else {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"*\", \"\"));\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    //\r\n    else {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let val: any = fsm.fsmVar.initValue(assignStr, errorInfo);\r\n      if (!errorInfo.isRight) {\r\n        VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"\", \"\"));\r\n        return false;\r\n      }\r\n      state.setConstValue(val);\r\n    }\r\n    return true;\r\n  }\r\n\r\n\r\n  private static assignmentAction(project_name: string, object_id: string, fsm_id: string, global_vars: VE_Variables, objects: VE_Objects, very_object: VeryEngineObject, action_data: VE_StateActionData, state: VE_State): boolean {\r\n    // \r\n    let assignment: VE_Assignment = new VE_Assignment(state, action_data.totalString);\r\n    let varID: string = action_data.varID;\r\n    // Debug.LogWarning(\"\" + action_data.TotalString);\r\n    // 1 1*2.*3*.*4.*.*\r\n    if (varID.indexOf(StateConst.VARIABLE_SYMBOL) > -1)  // \r\n    {\r\n      if (varID.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n        let valArray: string[] = varID.split(StateConst.STATE_SEPARATOR);\r\n        for (let q: number = 0; q < valArray.length; q++) {\r\n          valArray[q] = valArray[q].trim();\r\n        }\r\n        // .* or *.*\r\n        if (valArray.length === 2) {\r\n          // *.*\r\n          if (valArray[0].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n            let templateVarID: string = valArray[0].substring(1);\r\n            varID = valArray[1].substring(1);\r\n            if (very_object.isCreatedTemplate(templateVarID)) {\r\n              let template: VE_Template = very_object.getTemplate(templateVarID);\r\n              if (template.varData.isCreatedVariable(varID)) {\r\n                let varPara: string[] = template.varData.getVariableParas(varID);\r\n                if (varPara[1].toLowerCase() === \"expression\" || varPara[1].toLowerCase() === \"\") {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.*\", \"\"));\r\n                  return false;\r\n                }\r\n                else {\r\n                  assignment.setLeftTemplateVar(template, varID);\r\n                }\r\n              }\r\n              else if (template.dataSource.isCreatedFsm(varID)) {\r\n                assignment.setLeftTemplateVar(template, varID);\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.***\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n            else {\r\n              if (global_vars.isCreatedTemplate(templateVarID)) {\r\n                let template: VE_Template = global_vars.getTemplate(templateVarID);\r\n                if (template.varData.isCreatedVariable(varID)) {\r\n                  let varPara: string[] = template.varData.getVariableParas(varID);\r\n                  if (varPara[1].toLowerCase() === \"expression\" || varPara[1].toLowerCase() === \"\") {\r\n                    VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.*\", \"\"));\r\n                    return false;\r\n                  }\r\n                  else {\r\n                    assignment.setLeftTemplateVar(template, varID);\r\n                  }\r\n                }\r\n                else if (template.dataSource.isCreatedFsm(varID)) {\r\n                  assignment.setLeftTemplateVar(template, varID);\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.***\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.**\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          //.*\r\n          else {\r\n            if (objects.isCreated(valArray[0])) {\r\n              let aObject: VeryEngineObject = objects.getVeryObject(valArray[0]);\r\n              varID = varID.substring(1);\r\n              if (aObject.isCreatedExpression(varID)) {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*\", \"\"));\r\n                return false;\r\n              }\r\n              else if (aObject.isCreatedFsm(varID)) {\r\n                let v: IVeryVar = aObject.getFsm(varID).fsmVar;\r\n                assignment.setLeftVariable(v);\r\n              }\r\n              else if (aObject.isCreatedVariable(varID)) {\r\n                let v: IVeryVar = aObject.getVariable(varID);\r\n                assignment.setLeftVariable(v);\r\n              }\r\n              else if (aObject.isCreatedTemplate(varID)) {\r\n                let template: VE_Template = aObject.getTemplate(varID);\r\n                assignment.setLeftTemplate(template);\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n            else {\r\n              VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*\", \"\"));\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        else if (valArray.length === 3)  // .*.*\r\n        {\r\n          // .*.*\r\n          if (valArray[0].startsWith(StateConst.STATE_SEPARATOR) || !valArray[1].startsWith(StateConst.STATE_SEPARATOR) || !valArray[2].startsWith(StateConst.STATE_SEPARATOR)) {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"1*2.*3*.*4.*.*\", \"\"));\r\n            return false;\r\n          }\r\n          else {\r\n            let templateVarID: string = valArray[1].substring(1);\r\n            varID = valArray[2].substring(1);\r\n            if (objects.isCreated(valArray[0])) {\r\n              let tObject: VeryEngineObject = objects.getVeryObject(valArray[0]);\r\n              if (tObject.isCreatedTemplate(templateVarID)) {\r\n                let template: VE_Template = tObject.getTemplate(templateVarID);\r\n                if (template.dataSource.isCreatedFsm(varID)) {\r\n                  assignment.setLeftTemplateVar(template, varID);\r\n                }\r\n                else if (template.varData.isCreatedVariable(varID)) {\r\n                  let varParas: string[] = template.varData.getVariableParas(varID);\r\n                  if (varParas[1].toLowerCase() === \"expression\" || varParas[1].toLowerCase() === \"\") {\r\n                    VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.*.*.*\", \"\"));\r\n                    return false;\r\n                  }\r\n                  else {\r\n                    assignment.setLeftTemplateVar(template, varID);\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.*.**\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.**\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n            else {\r\n              VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.*\", \"\"));\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"1*2.*3*.*4.*.*\", \"\"));\r\n          return false;\r\n        }\r\n      }\r\n      else // *\r\n      {\r\n        varID = varID.substring(1);\r\n        if (very_object.isCreatedExpression(varID)) {\r\n          VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*\", \"\"));\r\n          return false;\r\n        }\r\n        else if (very_object.isCreatedFsm(varID)) {\r\n          let v: IVeryVar = very_object.getFsm(varID).fsmVar;\r\n          assignment.setLeftVariable(v);\r\n        }\r\n        else if (very_object.isCreatedVariable(varID)) {\r\n          let v: IVeryVar = very_object.getVariable(varID);\r\n          assignment.setLeftVariable(v);\r\n        }\r\n        else if (very_object.isCreatedTemplate(varID)) {\r\n          let template: VE_Template = very_object.getTemplate(varID);\r\n          assignment.setLeftTemplate(template);\r\n        }\r\n        else {\r\n          // \r\n          if (global_vars.isCreatedExpression(varID)) {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*\", \"\"));\r\n            return false;\r\n          }\r\n          else if (global_vars.isCreatedVariable(varID)) {\r\n            let v: IVeryVar = global_vars.getVariable(varID);\r\n            assignment.setLeftVariable(v);\r\n          }\r\n          else if (global_vars.isCreatedTemplate(varID)) {\r\n            let template: VE_Template = global_vars.getTemplate(varID);\r\n            assignment.setLeftTemplate(template);\r\n          }\r\n          else {\r\n            // \r\n            // if (VerySceneVariables.Variables.isCreatedExpression(varID)) {\r\n            //   VE_ErrorManager.Add(VE_Error.Error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.TotalString + \"*\", \"\"));\r\n            //   return false;\r\n            // }\r\n            // else if (VerySceneVariables.Variables.IsCreatedVariable(varID)) {\r\n            //   IVeryVar v = VerySceneVariables.Variables.GetVariable(varID);\r\n            //   assignment.SetLeft(v);\r\n            // }\r\n            // else {\r\n            //   VE_ErrorManager.Add(VE_Error.Error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.TotalString + \"*\", \"\"));\r\n            //   return false;\r\n            // }\r\n            VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*\", \"\"));\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n      return false;\r\n    }\r\n\r\n\r\n    // 2 1*2.*3*.*4.*.*5\r\n    varID = action_data.varValue.trim();\r\n\r\n    // \r\n    if (varID.startsWith(\"\\\"\") || varID.startsWith(\"'\") || varID.startsWith(\"\") || varID.startsWith(\"\")) {\r\n      assignment.setRightConst(varID.substring(1, varID.length - 2).trim());\r\n    }\r\n    else if (VE_StringFormat.isFormulaString(varID))  // \r\n    {\r\n      // Debug.LogError(varID);\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      StateConst.AssignmentFormulaCount++;\r\n      let localExp: IExpression = VE_Expressions.createLocalExpression(StateConst.AssignmentPrefix + StateConst.AssignmentFormulaCount.toString(), varID, project_name, object_id, errorInfo);\r\n      if (!errorInfo.isRight || !localExp) {\r\n        // errorInfo = \"\\n\" + errorInfo + \"\" + errorPos;\r\n        // return null;\r\n        VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\" + errorInfo, \"\"));\r\n        return false;\r\n      }\r\n      assignment.setRightVariable(new VeryExpression(localExp));\r\n    }\r\n    else {\r\n      if (varID.indexOf(StateConst.VARIABLE_SYMBOL) > -1)  // \r\n      {\r\n        if (varID.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n          let valArray: string[] = varID.split(StateConst.STATE_SEPARATOR);\r\n          for (let q: number = 0; q < valArray.length; q++) {\r\n            valArray[q] = valArray[q].trim();\r\n          }\r\n          // .* or *.*\r\n          if (valArray.length === 2) {\r\n            // *.*\r\n            if (valArray[0].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n              let templateVarID: string = valArray[0].substring(1);\r\n              varID = valArray[1].substring(1);\r\n              if (very_object.isCreatedTemplate(templateVarID)) {\r\n                let template: VE_Template = very_object.getTemplate(templateVarID);\r\n                if (template.varData.isCreatedVariable(varID) || template.dataSource.isCreatedFsm(varID)) {\r\n                  // \r\n                  assignment.setRightTemplateVariable(template, varID);\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.***\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                if (global_vars.isCreatedTemplate(templateVarID)) {\r\n                  let template: VE_Template = global_vars.getTemplate(templateVarID);\r\n                  if (template.varData.isCreatedVariable(varID) || template.dataSource.isCreatedFsm(varID)) {\r\n                    // \r\n                    assignment.setRightTemplateVariable(template, varID);\r\n                  }\r\n                  else {\r\n                    VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.***\", \"\"));\r\n                    return false;\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.**\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n            }\r\n            // .*\r\n            else {\r\n              if (objects.isCreated(valArray[0])) {\r\n                let aObject: VeryEngineObject = objects.getVeryObject(valArray[0]);\r\n                varID = varID.substring(1);\r\n                let rightVar: Nullable<IVeryVar> = null;\r\n                let rightTemplate: Nullable<VE_Template> = null;\r\n                if (aObject.isCreatedExpression(varID)) {\r\n                  rightVar = new VeryExpression(aObject.getExpression(varID));\r\n                }\r\n                else if (aObject.isCreatedFsm(varID)) {\r\n                  rightVar = aObject.getFsm(varID).fsmVar;\r\n                }\r\n                else if (aObject.isCreatedVariable(varID)) {\r\n                  rightVar = aObject.getVariable(varID);\r\n                }\r\n                else if (aObject.isCreatedTemplate(varID)) {\r\n                  rightTemplate = aObject.getTemplate(varID);\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*\", \"\"));\r\n                  return false;\r\n                }\r\n                // \r\n                if (rightVar !== null) {\r\n                  if (assignment.leftType === AssignType.Template) {\r\n                    VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n                    return false;\r\n                  }\r\n                  else if (assignment.leftType === AssignType.Variable) {\r\n                    if (VE_AssignmentTypeJudge.allow(assignment.leftVariable!, rightVar)) {\r\n                      assignment.setRightVariable(rightVar);\r\n                    }\r\n                    else {\r\n                      VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n                      return false;\r\n                    }\r\n                  }\r\n                  else {\r\n                    // \r\n                    assignment.setRightVariable(rightVar);\r\n                  }\r\n                }\r\n                else if (rightTemplate != null) {\r\n                  if (assignment.leftType === AssignType.Template) {\r\n                    assignment.setRightTemplate(rightTemplate);\r\n                  }\r\n                  else {\r\n                    VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n                    return false;\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          else if (valArray.length === 3)  // .*.*\r\n          {\r\n            // .*.*\r\n            if (valArray[0].startsWith(StateConst.STATE_SEPARATOR) || !valArray[1].startsWith(StateConst.STATE_SEPARATOR) || !valArray[2].startsWith(StateConst.STATE_SEPARATOR)) {\r\n              VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"1*2.*3*.*4.*.*\", \"\"));\r\n              return false;\r\n            }\r\n            else {\r\n              let templateVarID: string = valArray[1].substring(1);\r\n              varID = valArray[2].substring(1);\r\n              if (objects.isCreated(valArray[0])) {\r\n                let tObject: VeryEngineObject = objects.getVeryObject(valArray[0]);\r\n                if (tObject.isCreatedTemplate(templateVarID)) {\r\n                  let template: VE_Template = tObject.getTemplate(templateVarID);\r\n                  // \r\n                  if (template.dataSource.isCreatedFsm(varID) || template.varData.isCreatedVariable(varID)) {\r\n                    // \r\n                    assignment.setRightTemplateVariable(template, varID);\r\n                  }\r\n                  else {\r\n                    VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.*.**\", \"\"));\r\n                    return false;\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.**\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.*\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          else {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"1*2.*3*.*4.*.*\", \"\"));\r\n            return false;\r\n          }\r\n        }\r\n        else // *\r\n        {\r\n          varID = varID.substring(1);\r\n          let rightVar: Nullable<IVeryVar> = null;\r\n          let rightTemplate: Nullable<VE_Template> = null;\r\n          if (very_object.isCreatedExpression(varID)) {\r\n            rightVar = new VeryExpression(very_object.getExpression(varID));\r\n          }\r\n          else if (very_object.isCreatedFsm(varID)) {\r\n            rightVar = very_object.getFsm(varID).fsmVar;\r\n          }\r\n          else if (very_object.isCreatedVariable(varID)) {\r\n            rightVar = very_object.getVariable(varID);\r\n          }\r\n          else if (very_object.isCreatedTemplate(varID)) {\r\n            rightTemplate = very_object.getTemplate(varID);\r\n          }\r\n          else {\r\n            // \r\n            if (global_vars.isCreatedExpression(varID)) {\r\n              rightVar = new VeryExpression(global_vars.getExpression(varID));\r\n            }\r\n            else if (global_vars.isCreatedVariable(varID)) {\r\n              rightVar = global_vars.getVariable(varID);\r\n            }\r\n            else if (global_vars.isCreatedTemplate(varID)) {\r\n              rightTemplate = global_vars.getTemplate(varID);\r\n            }\r\n            else {\r\n              //\r\n              if (VerySceneVariables.Variables.isCreatedExpression(varID)) {\r\n                rightVar = new VeryExpression(VerySceneVariables.Variables.getExpression(varID));\r\n              }\r\n              else if (VerySceneVariables.Variables.isCreatedVariable(varID)) {\r\n                rightVar = VerySceneVariables.Variables.getVariable(varID);\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          // \r\n          if (rightVar != null) {\r\n            if (assignment.leftType === AssignType.Template) {\r\n              VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n              return false;\r\n            }\r\n            else if (assignment.leftType === AssignType.Variable) {\r\n              if (VE_AssignmentTypeJudge.allow(assignment.leftVariable!, rightVar)) {\r\n                assignment.setRightVariable(rightVar);\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n            else {\r\n              // \r\n              assignment.setRightVariable(rightVar);\r\n            }\r\n          }\r\n          else if (rightTemplate != null) {\r\n            if (assignment.leftType === AssignType.Template) {\r\n              assignment.setRightTemplate(rightTemplate);\r\n            }\r\n            else {\r\n              VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n              return false;\r\n            }\r\n          }\r\n          else {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n      else  // \r\n      {\r\n        if (assignment.leftType === AssignType.Template) {\r\n          if (varID.trim().toLowerCase() === \"null\") {\r\n            assignment.setRightNull();\r\n          }\r\n          else {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"null\", \"\"));\r\n            return false;\r\n          }\r\n        }\r\n        else if (assignment.leftType === AssignType.TemplateVariable) {\r\n          assignment.setRightConst(varID);\r\n        }\r\n        else {\r\n          if (assignment.leftVariable !== null) {\r\n            let errorInfo: ErrorInfo = new ErrorInfo();\r\n            let newValue: any = assignment.leftVariable.initValue(varID, errorInfo);\r\n            if (!errorInfo.isRight || !newValue) {\r\n              VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\" + errorInfo + \"\", \"\"));\r\n              return false;\r\n            }\r\n            else {\r\n              assignment.setRightConstValue(newValue);\r\n            }\r\n          }\r\n          else {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    let stateAction: VE_StateAction = new VE_StateAction();\r\n    stateAction.setAssignment(assignment);\r\n    state.addAction(stateAction);\r\n    return true;\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n  public static createInstance(project_name: string, object_id: string, var_id: string, template: VE_Template, object_name: string, error_info: ErrorInfo, destroy_on_create_new: boolean): VE_Template {\r\n\r\n\r\n    return template;\r\n  }\r\n\r\n\r\n}","export * from './loaderManager';\r\nexport * from './createInstance';","import { VeryTable } from '../index';\r\nimport { VE_Template, VE_Templates } from '../template';\r\nimport { VeryEngineObject, VE_Objects } from '../object';\r\nimport { VE_FsmData, VE_StateData, VE_StateTriggerData, VE_StateActionData } from '../dataSource';\r\nimport { VE_Manager } from '../manager';\r\nimport { VE_Variables, VeryVarManager } from '../variables';\r\nimport { VE_StringFormat } from '../utility';\r\nimport { VE_ErrorManager, VE_Error } from '../global';\r\nimport { StateConst } from '../state';\r\nimport { CreateInstance } from './createInstance';\r\nimport { GameObject } from '../babylon';\r\n\r\n\r\nexport enum AnalisysType { Global, Object, Template }\r\n\r\nexport class LoaderManager {\r\n\r\n  private _currentType: AnalisysType = AnalisysType.Global;\r\n\r\n  private _table!: VeryTable;\r\n\r\n  private _projectName: string = '';\r\n\r\n  private _lastFsmID: string = '';\r\n  private _activeTemplate: Nullable<VE_Template> = null;\r\n  private _activeObject: Nullable<VeryEngineObject> = null;\r\n  private _activeFsmData: Nullable<VE_FsmData> = null;\r\n  private _activeStateData: Nullable<VE_StateData> = null;\r\n\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public load(project_name: string, table: VeryTable): boolean {\r\n    this._projectName = project_name;\r\n    this._table = table;\r\n\r\n    // \r\n    VE_Manager.createProject(project_name);\r\n\r\n    let templates: VE_Templates = VE_Manager.templates(project_name);\r\n    let objects: VE_Objects = VE_Manager.objects(project_name);\r\n    let globalVars: VE_Variables = VE_Manager.variables(project_name);\r\n\r\n    // console.log(table);\r\n    if (table) {\r\n      for (let i: number = 1; i < table.RowCount; i++) {\r\n        // console.log(`${i+1}${table.getData(i, 0)}`);\r\n        // \r\n        if(table.getData(i, 0).startsWith('//')) {\r\n          continue;\r\n        }\r\n        // \r\n        if(table.getRow(i)!.isEmpty()) {\r\n          // console.log('' + (i + 1));\r\n          continue;\r\n        }\r\n        // 1\r\n        if (table.getData(i, 0).startsWith(\"_\")) {\r\n          this._activeFsmData = null;\r\n          this._activeStateData = null;\r\n          this._currentType = AnalisysType.Template;\r\n          let templateID = table.getData(i, 0).replace(' ', '').substring(3);\r\n          // TODO: \r\n          if (templateID.indexOf(':') > -1 || templateID.indexOf('') > -1) {\r\n\r\n          } else {\r\n            if (!VE_StringFormat.isIDLegal(templateID)) {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 0), \"\" + table.getData(i, 0) + \"\", table.ID))\r\n              return false;\r\n            }\r\n            if (!templates.isCreatedTemplate(templateID)) {\r\n              let template: VE_Template = new VE_Template(project_name, templateID);\r\n              templates.addTemplate(templateID, template);\r\n              this._activeTemplate = template;\r\n            } else {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 0), \"\" + table.getData(i, 0) + \"\", table.ID))\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        // 2\r\n        else if (table.getData(i, 0) !== '') {\r\n          this._activeFsmData = null;\r\n          this._activeStateData = null;\r\n          this._currentType = AnalisysType.Object;\r\n          let objectID: string = table.getData(i, 0);\r\n          let objName: string = '';\r\n          if (objectID.indexOf('=') > -1) {\r\n            let nameArray: string[] = objectID.split('=');\r\n            if (nameArray.length === 2) {\r\n              objectID = nameArray[0].trim();\r\n              objName = nameArray[1].trim();\r\n            } else {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 0), \"\" + table.getData(i, 0) + \"=\", table.ID))\r\n              return false;\r\n            }\r\n          }\r\n          \r\n          if (!VE_StringFormat.isIDLegal(objectID)) {\r\n            VE_ErrorManager.Add(VE_Error.error(table.pos(i, 0), \"\" + table.getData(i, 0) + \"\", table.ID))\r\n            return false;\r\n          }\r\n          // GameObject\r\n          let activeGameObject: Nullable<GameObject> = null;\r\n          if (objName === '') {\r\n            activeGameObject = new GameObject(`__${objectID}_Empty`);\r\n          } else {\r\n            activeGameObject = GameObject.Find(objName);\r\n            if (activeGameObject === null) {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 0), \"\" + objName + \"\", table.ID))\r\n              return false;\r\n            }\r\n          }\r\n          if (!objects.isCreated(objectID)) {\r\n            // \r\n            let tempObject: VeryEngineObject = new VeryEngineObject(project_name, objectID, activeGameObject);\r\n            objects.add(objectID, tempObject);\r\n            this._activeObject = tempObject;\r\n          } else {\r\n            VE_ErrorManager.Add(VE_Error.error(table.pos(i, 0), \"\" + table.getData(i, 0) + \"\", table.ID))\r\n            return false;\r\n          }\r\n        }\r\n        // 3\r\n        else if (table.getData(i, 5) !== \"\" && table.getData(i, 1) === \"\" && table.getData(i, 2) === \"\" && table.getData(i, 3) === \"\" && table.getData(i, 4) === \"\" && table.getData(i, 6) === \"\" && table.getData(i, 7) === \"\" && table.getData(i, 8) === \"\") {\r\n          let paraData: string = table.getData(i, 5);\r\n          // \r\n          if (this._currentType === AnalisysType.Global) {\r\n            // \r\n            let varArray: string[] = VE_StringFormat.paraSegment(paraData);\r\n            if (varArray.length === 2 || varArray.length === 3) {\r\n              let varID: string = varArray[0].trim();\r\n              if (!VE_StringFormat.isIDLegal(varID)) {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              }\r\n              let paraArray: string[] = [varArray[1].trim()];\r\n              if (varArray.length === 2) {\r\n                paraArray[1] = '';\r\n              } else {\r\n                paraArray[1] = varArray[2].trim();\r\n              }\r\n              if (!globalVars.varData.isCreatedVariable(varID)) {\r\n                globalVars.varData.addVariable(varID, paraArray, table.pos(i, 5));\r\n              } else {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              }\r\n            } else {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n              return false;\r\n            }\r\n          }\r\n          // \r\n          else if (paraData.indexOf('=') > -1) {\r\n            let paraArray: string[] = paraData.split('=');\r\n            // \r\n            // \r\n            if (paraArray.length === 2 && paraArray[0].trim() === this._lastFsmID) {\r\n              if (this._activeFsmData === null) {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              } else {\r\n                let stateInfo: string[] = paraArray[1].trim().split(/,|/);\r\n                let stateIndex: number = StateConst.STATE_INDEX;\r\n                let stateData: Nullable<VE_StateData> = null;\r\n                if (stateInfo.length === 2) {\r\n                  stateInfo[0] = stateInfo[0].trim();\r\n                  stateInfo[1] = stateInfo[1].trim();\r\n                  if (stateInfo[1].startsWith('#')) {\r\n                    stateIndex = parseInt(stateInfo[1].substring(1));\r\n                    if (stateIndex === NaN) {\r\n                      VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"IDIDID=#ID\", table.ID))\r\n                      return false;\r\n                    }\r\n                  } else {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"IDIDID=#ID\", table.ID))\r\n                    return false;\r\n                  }\r\n                }\r\n                stateData = new VE_StateData(this._activeFsmData, stateInfo[0].trim(), false, stateIndex);\r\n                stateData.rowIndex = i;\r\n                this._activeFsmData.addState(stateData);\r\n                this._activeStateData = stateData;\r\n              }\r\n            }\r\n            // \r\n            else {\r\n              let varArray: string[] = VE_StringFormat.paraSegment(paraData);\r\n              if (varArray.length === 3) {\r\n                let varID: string = varArray[0].trim();\r\n                if (!VE_StringFormat.isIDLegal(varID)) {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                let para2Array: string[] = [varArray[1].trim(), varArray[2].trim()];\r\n                // \r\n                if (this._currentType === AnalisysType.Object) {\r\n                  if (this._activeObject!.varData.isCreatedVariable(varID)) {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeObject!.objectID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  // \r\n                  if (this._activeObject!.dataSource.isCreatedFsm(varID)) {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeObject!.objectID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  this._activeObject!.varData.addVariable(varID, para2Array, table.pos(i, 5));\r\n                }\r\n                else if (this._currentType === AnalisysType.Template) {\r\n                  if (this._activeTemplate!.varData.isCreatedVariable(varID)) {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeTemplate!.templateID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  // \r\n                  if (this._activeTemplate!.dataSource.isCreatedFsm(varID)) {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  this._activeTemplate!.varData.addVariable(varID, para2Array, table.pos(i, 5));\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n              } else {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          // \r\n          else {\r\n            let varArray: string[] = VE_StringFormat.paraSegment(paraData);\r\n            if (varArray.length === 2 || varArray.length === 3) {\r\n              let varID: string = varArray[0].trim();\r\n              if (!VE_StringFormat.isIDLegal(varID)) {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              }\r\n              let paraArray: string[] = [varArray[1].trim()];\r\n              if (varArray.length === 2) {\r\n                paraArray[1] = '';\r\n              } else {\r\n                paraArray[1] = varArray[2].trim();\r\n              }\r\n              // \r\n              if (this._currentType === AnalisysType.Object) {\r\n                if (this._activeObject!.varData.isCreatedVariable(varID)) {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeObject!.objectID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                // \r\n                if (this._activeObject!.dataSource.isCreatedFsm(varID)) {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeObject!.objectID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                this._activeObject!.varData.addVariable(varID, paraArray, table.pos(i, 5));\r\n              }\r\n              else if (this._currentType === AnalisysType.Template) {\r\n                if (this._activeTemplate!.varData.isCreatedVariable(varID)) {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeTemplate!.templateID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                // \r\n                if (this._activeTemplate!.dataSource.isCreatedFsm(varID)) {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeTemplate!.templateID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                this._activeTemplate!.varData.addVariable(varID, paraArray, table.pos(i, 5));\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              }\r\n            } else {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        // 4 +  +  +  + \r\n        else {\r\n          // \r\n          if (table.getData(i, 5) !== '') {\r\n            let paraData: string = table.getData(i, 5);\r\n            // \r\n            if (paraData.indexOf('=') > -1) {\r\n              let stateArray: string[] = paraData.split('=');\r\n              let fsmID: string = stateArray[0].trim();\r\n              // \r\n              if (stateArray.length === 2 && fsmID === this._lastFsmID) {\r\n                if (this._activeFsmData === null) {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                } else {\r\n                  let stateInfo: string[] = stateArray[1].trim().split(/,|/);\r\n                  let stateIndex: number = StateConst.STATE_INDEX;\r\n                  let stateData: Nullable<VE_StateData> = null;\r\n                  if (stateInfo.length === 2) {\r\n                    stateInfo[0] = stateInfo[0].trim();\r\n                    stateInfo[1] = stateInfo[1].trim();\r\n                    if (stateInfo[1].startsWith('#')) {\r\n                      stateIndex = parseInt(stateInfo[1].substring(1));\r\n                      if (stateIndex === NaN) {\r\n                        VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"IDIDID=#ID\", table.ID))\r\n                        return false;\r\n                      }\r\n                    } else {\r\n                      VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"IDIDID=#ID\", table.ID))\r\n                      return false;\r\n                    }\r\n                  }\r\n                  stateData = new VE_StateData(this._activeFsmData, stateInfo[0].trim(), false, stateIndex);\r\n                  stateData.rowIndex = i;\r\n                  this._activeFsmData.addState(stateData);\r\n                  this._activeStateData = stateData;\r\n                }\r\n              } else {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\" + fsmID + \"\", table.ID))\r\n                return false;\r\n              }\r\n            }\r\n            // \r\n            else {\r\n              let varArray: string[] = VE_StringFormat.paraSegment(paraData);\r\n              if (varArray.length === 2 || varArray.length === 3 || varArray.length === 4) {\r\n                let fsmID: string = varArray[0].trim();\r\n                if (!VE_StringFormat.isIDLegal(fsmID)) {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                this._lastFsmID = fsmID;\r\n                let paraArray: string[] = [varArray[1].trim()];\r\n                if (varArray.length === 2) {\r\n                  paraArray[1] = '';\r\n                } else {\r\n                  paraArray[1] = varArray[2].trim();\r\n                }\r\n                let stateIndex: number = StateConst.STATE_INDEX;\r\n                if (varArray.length === 4) {\r\n                  if (varArray[3].startsWith('#')) {\r\n                    stateIndex = parseInt(varArray[3].substring(1));\r\n                    if (stateIndex === NaN) {\r\n                      VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + varArray[3] + \"IDIDID#ID\", table.ID))\r\n                      return false;\r\n                    }\r\n                  } else {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + varArray[3] + \"IDIDID#ID\", table.ID))\r\n                    return false;\r\n                  }\r\n                }\r\n                // \r\n                if (this._currentType === AnalisysType.Object) {\r\n                  if (this._activeObject!.varData.isCreatedVariable(fsmID)) {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeObject!.objectID + \"\" + fsmID + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  // \r\n                  if (this._activeObject!.dataSource.isCreatedFsm(fsmID)) {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeObject!.objectID + \"\" + fsmID + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  // \r\n                  this._activeObject!.dataSource.createFsm(fsmID, table.pos(i, 5));\r\n                  this._activeFsmData = this._activeObject!.dataSource.getFsmData(fsmID);\r\n                  // \r\n                  if (VeryVarManager.hasVarType(paraArray[0])) {\r\n                    this._activeFsmData.initFsm(paraArray[0], paraArray[1]);\r\n                    // \r\n                    let stateData: VE_StateData = new VE_StateData(this._activeFsmData, paraArray[1], true, stateIndex);\r\n                    stateData.rowIndex = i;\r\n                    this._activeFsmData.addState(stateData);\r\n                    this._activeStateData = stateData;\r\n                  } else {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeObject!.objectID + \"\" + fsmID + \"\" + paraArray[0] + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                }\r\n                else if (this._currentType === AnalisysType.Template) {\r\n                  if (this._activeTemplate!.varData.isCreatedVariable(fsmID)) {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeTemplate!.templateID + \"\" + fsmID + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  // \r\n                  if (this._activeTemplate!.dataSource.isCreatedFsm(fsmID)) {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeTemplate!.templateID + \"\" + fsmID + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  // \r\n                  this._activeTemplate!.dataSource.createFsm(fsmID, table.pos(i, 5));\r\n                  this._activeFsmData = this._activeTemplate!.dataSource.getFsmData(fsmID);\r\n                  // \r\n                  if (VeryVarManager.hasVarType(paraArray[0])) {\r\n                    this._activeFsmData.initFsm(paraArray[0], paraArray[1]);\r\n                    // \r\n                    let stateData: VE_StateData = new VE_StateData(this._activeFsmData, paraArray[1], true, stateIndex);\r\n                    stateData.rowIndex = i;\r\n                    this._activeFsmData.addState(stateData);\r\n                    this._activeStateData = stateData;\r\n                  } else {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeTemplate!.objectID + \"\" + fsmID + \"\" + paraArray[0] + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n              } else {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n\r\n          // \r\n          if (table.getData(i, 2) !== '') {\r\n            if (this._activeFsmData === null || this._activeStateData === null) {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 2), \"\" + table.getData(i, 2) + \"\", table.ID))\r\n              return false;\r\n            }\r\n            // DataSource\r\n            let triggerID: string = table.getData(i, 2);\r\n            if (!VE_StringFormat.isIDLegal(triggerID)) {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 2), \"\" + table.getData(i, 2) + \"\", table.ID))\r\n              return false;\r\n            }\r\n            if (table.getData(i, 3) !== '') {\r\n              if (!this._activeFsmData!.dataSource.isCreatedTrigger(triggerID)) {\r\n                this._activeFsmData!.dataSource.addTrigger(triggerID, VE_StringFormat.paraSegment(table.getData(i, 3)), table.pos(i, 2));\r\n              } else {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 2), \"\" + table.getData(i, 2) + \"\", table.ID))\r\n                return false;\r\n              }\r\n            }\r\n\r\n            // StateData\r\n            let triggerData: VE_StateTriggerData = new VE_StateTriggerData(triggerID);\r\n            this._activeStateData.addTrigger(triggerData, table.pos(i, 2));\r\n\r\n            // \r\n            if (table.getData(i, 1) !== '') {\r\n              triggerData.logicalSwitch = table.getData(i, 1);\r\n            }\r\n\r\n            // \r\n            if (table.getData(i, 4) !== '') {\r\n              triggerData.logicalExp = table.getData(i, 4);\r\n            }\r\n          } else {\r\n            // \r\n            if (table.getData(i, 1) !== '') {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 1), \"\" + table.getData(i, 1) + \"\", table.ID))\r\n              return false;\r\n            }\r\n\r\n            // \r\n            if (table.getData(i, 4) !== '') {\r\n              if (this._activeFsmData === null || this._activeStateData === null) {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 4), \"\" + table.getData(i, 4) + \"\", table.ID))\r\n                return false;\r\n              }\r\n              if (this._activeStateData.logicalExp !== '') {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 4), \"\" + table.getData(i, 4) + \"12\", table.ID))\r\n                return false;\r\n              } else {\r\n                this._activeStateData.logicalExp = table.getData(i, 4);\r\n              }\r\n            }\r\n\r\n            if (table.getData(i, 3) !== '') {\r\n              VE_ErrorManager.Add(VE_Error.warning(table.pos(i, 3), \"\" + table.getData(i, 3) + \"\", table.ID))\r\n            }\r\n          }\r\n\r\n          // \r\n          if (table.getData(i, 6) !== '') {\r\n            if (this._activeFsmData === null || this._activeStateData === null) {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 6), \"\" + table.getData(i, 6) + \"\", table.ID))\r\n              return false;\r\n            }\r\n            // \r\n            let tempStr: string = table.getData(i, 6).toLowerCase();\r\n            if (tempStr.startsWith('log(') || tempStr.startsWith('log') || tempStr.startsWith('') || tempStr.startsWith('(')) {\r\n              let newActionID: string = project_name + '___' + StateConst.LogCount++;\r\n              let actionData: VE_StateActionData = new VE_StateActionData(newActionID, 'true', 'false');\r\n              this._activeStateData.addAction(actionData, table.pos(i, 6));\r\n              let actionPara: string = table.getData(i, 6).substring(4);\r\n              if (tempStr.startsWith('')) {\r\n                actionPara = table.getData(i, 6).substring(3);\r\n              }\r\n              this._activeFsmData.dataSource.addAction(newActionID, ['', '', actionPara.substring(0, actionPara.length - 1)], ['false', 'false'], table.pos(i, 6));\r\n              if (table.getData(i, 7) !== '') {\r\n                VE_ErrorManager.Add(VE_Error.warning(table.pos(i, 7), \"\" + table.getData(i, 7) + \"\", table.ID))\r\n              }\r\n            }\r\n            else if (tempStr.startsWith('error(') || tempStr.startsWith('error') || tempStr.startsWith('') || tempStr.startsWith('(')) {\r\n              let newActionID: string = project_name + '___' + StateConst.LogCount++;\r\n              let actionData: VE_StateActionData = new VE_StateActionData(newActionID, 'true', 'false');\r\n              this._activeStateData.addAction(actionData, table.pos(i, 6));\r\n              let actionPara: string = table.getData(i, 6).substring(6);\r\n              if (tempStr.startsWith('')) {\r\n                actionPara = table.getData(i, 6).substring(3);\r\n              }\r\n              this._activeFsmData.dataSource.addAction(newActionID, ['', '', actionPara.substring(0, actionPara.length - 1)], ['false', 'false'], table.pos(i, 6));\r\n              if (table.getData(i, 7) !== '') {\r\n                VE_ErrorManager.Add(VE_Error.warning(table.pos(i, 7), \"\" + table.getData(i, 7) + \"\", table.ID))\r\n              }\r\n            }\r\n            else if (tempStr.startsWith('warn(') || tempStr.startsWith('warn') || tempStr.startsWith('') || tempStr.startsWith('(')) {\r\n              let newActionID: string = project_name + '___' + StateConst.LogCount++;\r\n              let actionData: VE_StateActionData = new VE_StateActionData(newActionID, 'true', 'false');\r\n              this._activeStateData.addAction(actionData, table.pos(i, 6));\r\n              let actionPara: string = table.getData(i, 6).substring(5);\r\n              if (tempStr.startsWith('')) {\r\n                actionPara = table.getData(i, 6).substring(3);\r\n              }\r\n              this._activeFsmData.dataSource.addAction(newActionID, ['', '', actionPara.substring(0, actionPara.length - 1)], ['false', 'false'], table.pos(i, 6));\r\n              if (table.getData(i, 7) !== '') {\r\n                VE_ErrorManager.Add(VE_Error.warning(table.pos(i, 7), \"\" + table.getData(i, 7) + \"\", table.ID))\r\n              }\r\n            }\r\n            else if (table.getData(i, 6).indexOf('=') > -1) {\r\n              if (table.getData(i, 7) !== '') {\r\n                VE_ErrorManager.Add(VE_Error.warning(table.pos(i, 7), \"\" + table.getData(i, 7) + \"\", table.ID))\r\n              }\r\n\r\n              // = \r\n              let equalIndex: number = table.getData(i, 6).indexOf('=');\r\n              let actionData: VE_StateActionData = new VE_StateActionData('');\r\n              actionData.setAssignmentAction(table.getData(i, 6), table.getData(i, 6).substring(0, equalIndex).trim(), table.getData(i, 6).substring(equalIndex + 1).trim());\r\n              this._activeStateData.addAction(actionData, table.pos(i, 6));\r\n            }\r\n            else {\r\n              // ID\r\n              let actionArray: string[] = VE_StringFormat.paraSegment(table.getData(i, 6));\r\n              // console.log(actionArray);\r\n              if (actionArray.length === 2 || actionArray.length === 3 || actionArray.length === 4) {\r\n                let actionData: VE_StateActionData;\r\n                if (actionArray.length === 2) {\r\n                  actionData = new VE_StateActionData(actionArray[0], actionArray[1]);\r\n                } else if (actionArray.length === 3) {\r\n                  actionData = new VE_StateActionData(actionArray[0], actionArray[1], actionArray[2]);\r\n                } else {\r\n                  actionData = new VE_StateActionData(actionArray[0], actionArray[1], actionArray[2], actionArray[3]);\r\n                }\r\n                this._activeStateData.addAction(actionData, table.pos(i, 6));\r\n              } else {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 6), \"\" + table.getData(i, 6) + \"IDboolbool\", table.ID))\r\n                return false;\r\n              }\r\n\r\n              // \r\n              if (table.getData(i, 7) !== '') {\r\n                if (!VE_StringFormat.isIDLegal(actionArray[0])) {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 6), \"\" + table.getData(i, 6) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                if (!this._activeFsmData.dataSource.isCreatedAction(actionArray[0])) {\r\n                  if (actionArray.length == 2) {\r\n                    this._activeFsmData.dataSource.addAction(actionArray[0], VE_StringFormat.paraSegment(table.getData(i, 7)), [actionArray[1], 'false'], table.pos(i, 6));\r\n                  } else {\r\n                    this._activeFsmData.dataSource.addAction(actionArray[0], VE_StringFormat.paraSegment(table.getData(i, 7)), [actionArray[1], actionArray[2]], table.pos(i, 6));\r\n                  }\r\n                } else {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 6), \"\" + table.getData(i, 6) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n              }\r\n            }\r\n          } else {\r\n            if (table.getData(i, 7) !== '') {\r\n              VE_ErrorManager.Add(VE_Error.warning(table.pos(i, 7), \"\" + table.getData(i, 7) + \"\", table.ID))\r\n            }\r\n          }\r\n\r\n          // \r\n          if (table.getData(i, 8) !== '') {\r\n            if (this._activeFsmData === null || this._activeStateData === null) {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 8), \"\" + table.getData(i, 8) + \"\", table.ID))\r\n              return false;\r\n            }\r\n            this._activeStateData!.addAssociatedState(table.getData(i, 8), table.pos(i, 8));\r\n          }\r\n        }\r\n      }\r\n\r\n      return CreateInstance.createProject(project_name);\r\n    } else {\r\n      VE_ErrorManager.Add(VE_Error.error('', '', 'null'));\r\n      return false;\r\n    }\r\n\r\n  }\r\n\r\n\r\n}","export * from './projects';\r\nexport * from './manager';\r\nexport * from './reset';","import { VE_Projects } from \"./projects\";\r\nimport { VE_Objects } from \"../object\";\r\nimport { VE_Templates } from \"../template\";\r\nimport { VE_Variables } from \"../variables\";\r\nimport { VE_VariableData } from \"../dataSource\";\r\nimport { StateConst } from \"../state\";\r\n\r\nexport class VE_Manager {\r\n\r\n  public static get projects(): VE_Projects {\r\n    if (this._projects === null) {\r\n      this._projects = new VE_Projects();\r\n    }\r\n    return this._projects;\r\n  }\r\n  private static _projects: VE_Projects | null = null;\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public static createProject(project_name: string): void {\r\n    VE_Manager.projects.addProject(project_name);\r\n    if (!VE_Manager.projects.isCreatedObjects(project_name)) {\r\n      VE_Manager.projects.addObjects(project_name, new VE_Objects(project_name));\r\n    }\r\n    if (!VE_Manager.projects.isCreatedTemplates(project_name)) {\r\n      VE_Manager.projects.addTemplates(project_name, new VE_Templates(project_name));\r\n    }\r\n    if (!VE_Manager.projects.isCreatedVariables(project_name)) {\r\n      VE_Manager.projects.addVariables(project_name, new VE_Variables(project_name));\r\n    }\r\n  }\r\n\r\n  public static globalVarData(project_name: string): VE_VariableData {\r\n    if (!VE_Manager.projects.isCreatedGlobals(project_name)) {\r\n      VE_Manager.projects.addVariables(project_name, new VE_Variables(project_name));\r\n    }\r\n    return VE_Manager.projects.getGlobalVars(project_name);\r\n  }\r\n\r\n  public static templates(project_name: string): VE_Templates {\r\n    if (!VE_Manager.projects.isCreatedTemplates(project_name)) {\r\n      VE_Manager.projects.addTemplates(project_name, new VE_Templates(project_name));\r\n    }\r\n    return VE_Manager.projects.getTemplates(project_name);\r\n  }\r\n\r\n  public static variables(project_name: string): VE_Variables {\r\n    if (!VE_Manager.projects.isCreatedVariables(project_name)) {\r\n      VE_Manager.projects.addVariables(project_name, new VE_Variables(project_name));\r\n    }\r\n    return VE_Manager.projects.getVariables(project_name);\r\n  }\r\n\r\n  public static objects(project_name: string): VE_Objects {\r\n    if (!VE_Manager.projects.isCreatedObjects(project_name)) {\r\n      VE_Manager.projects.addObjects(project_name, new VE_Objects(project_name));\r\n    }\r\n    return VE_Manager.projects.getObjects(project_name);\r\n  }\r\n\r\n  public static clear(): void {\r\n    VE_Manager.projects.clear()\r\n    this._projects = null;\r\n  }\r\n\r\n  public static clearProject(project_name: string): void {\r\n    VE_Manager.projects.clearProject(project_name);\r\n  }\r\n\r\n  public static dispose(): void {\r\n    if (VE_Manager.projects) {\r\n      VE_Manager.clear();\r\n      StateConst.LogCount = 0;\r\n      StateConst.AssignmentFormulaCount = 0;\r\n    }\r\n  }\r\n\r\n}","import { VE_Objects } from \"../object\";\r\nimport { VE_VariableData } from \"../dataSource\";\r\nimport { VE_Templates } from \"../template\";\r\nimport { VE_Variables } from \"../variables\";\r\n\r\n\r\nexport class VE_Projects {\r\n\r\n  private _objects: { [key: string]: VE_Objects } = {};\r\n  private _variables: { [key: string]: VE_Variables } = {};\r\n  private _templates: { [key: string]: VE_Templates } = {};\r\n\r\n  public projects: string[] = [];\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public addProject(project_name: string): void {\r\n    if (this.projects.indexOf(project_name) === -1) {\r\n      this.projects.push(project_name);\r\n    }\r\n  }\r\n\r\n  public isCreatedObjects(project_name: string): boolean {\r\n    if (this._objects[project_name]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addObjects(project_name: string, objects: VE_Objects): void {\r\n    this._objects[project_name] = objects;\r\n  }\r\n\r\n  public getObjects(project_name: string): VE_Objects {\r\n    return this._objects[project_name];\r\n  }\r\n\r\n  public isCreatedVariables(project_name: string): boolean {\r\n    if (this._variables[project_name]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addVariables(project_name: string, variables: VE_Variables): void {\r\n    this._variables[project_name] = variables;\r\n  }\r\n\r\n  public getVariables(project_name: string): VE_Variables {\r\n    return this._variables[project_name];\r\n  }\r\n\r\n  public isCreatedTemplates(project_name: string): boolean {\r\n    if (this._templates[project_name]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTemplates(project_name: string, templates: VE_Templates): void {\r\n    this._templates[project_name] = templates;\r\n  }\r\n\r\n  public getTemplates(project_name: string): VE_Templates {\r\n    return this._templates[project_name];\r\n  }\r\n\r\n  public isCreatedGlobals(project_name: string): boolean {\r\n    if (this._variables[project_name]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getGlobalVars(project_name: string): VE_VariableData {\r\n    return this._variables[project_name].varData;\r\n  }\r\n\r\n  public clear(): void {\r\n    for (let i: number = 0; i < this.projects.length; i++) {\r\n      this.disposeProject(this.projects[i]);\r\n    }\r\n    this.projects = [];\r\n  }\r\n\r\n\r\n\r\n  public clearProject(project_name: string): void {\r\n    this.disposeProject(project_name);\r\n    let index: number = this.projects.indexOf(project_name);\r\n    if (index > -1) {\r\n      this.projects.splice(index, 1);\r\n    }\r\n  }\r\n\r\n  private disposeProject(project_name: string): void {\r\n    if (this._objects[project_name]) {\r\n      this._objects[project_name].clear();\r\n    }\r\n    delete this._objects[project_name];\r\n    if (this._templates[project_name]) {\r\n      this._templates[project_name].clear();\r\n    }\r\n    delete this._templates[project_name];\r\n    if (this._variables[project_name]) {\r\n      this._variables[project_name].clear();\r\n    }\r\n    delete this._variables[project_name];\r\n  }\r\n\r\n  public sleep(): void {\r\n\r\n  }\r\n\r\n  public dispose(): void {\r\n    this.clear();\r\n  }\r\n\r\n}","import { VE_Manager } from \"./manager\";\r\n\r\nexport class VE_Reset {\r\n\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public static dispose(): void {\r\n\r\n    // \r\n    VE_Manager.clear();\r\n\r\n    // \r\n\r\n    // \r\n\r\n    // \r\n\r\n  }\r\n\r\n\r\n\r\n}","export * from './veryengineObject';\r\nexport * from './objects';","import { VeryEngineObject } from \"./veryengineObject\";\r\nimport { ArrayUtility } from \"../utility\";\r\n\r\nexport class VE_Objects {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  private _objectIDs: string[] = [];\r\n  private _objectDics: { [key: string]: VeryEngineObject } = {};\r\n\r\n  public get count(): number {\r\n    return this._objectIDs.length;\r\n  }\r\n\r\n  constructor(project_name: string) {\r\n    this._projectName = project_name;\r\n  }\r\n\r\n  public isCreated(object_id: string): boolean {\r\n    if (this._objectDics[object_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public add(object_id: string, very_object: VeryEngineObject): void {\r\n    if (!this.isCreated(object_id)) {\r\n      this._objectIDs.push(object_id);\r\n      this._objectDics[object_id] = very_object;\r\n    }\r\n  }\r\n\r\n  public getObjectID(index: number): string {\r\n    if(index >= 0 && index < this._objectIDs.length) {\r\n      return this._objectIDs[index];\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n\r\n  public getVeryObject(object_id: string): VeryEngineObject {\r\n    return this._objectDics[object_id];\r\n  }\r\n\r\n  public unloadObject(object_id: string): void {\r\n    // this._objectIDs.re\r\n    ArrayUtility.remove(this._objectIDs, object_id);\r\n    delete this._objectDics.object_id;\r\n\r\n  }\r\n\r\n  public clear(): void {\r\n    for(let i: number = 0; i < this._objectIDs.length; i++) {\r\n      let tempObject = this._objectDics[this._objectIDs[i]];\r\n      if(tempObject) {\r\n        tempObject.clear();\r\n      }\r\n    }\r\n    this._objectIDs = [];\r\n    this._objectDics = {};\r\n  }\r\n}","import { IVeryVar } from \"../variables\";\r\nimport { IExpression } from \"../expression\";\r\nimport { VE_ActionBehaviour } from \"../action\";\r\nimport { VE_TriggerBehaviour } from \"../trigger\";\r\nimport { VE_Fsm } from \"../state\";\r\nimport { VE_Template } from \"../template\";\r\nimport { VE_DataSource, VE_VariableData } from \"../dataSource\";\r\nimport { GameObject } from \"../babylon\";\r\n\r\nexport class VeryEngineObject {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = '';\r\n\r\n  public gameObject: GameObject = new GameObject('');\r\n\r\n  private _variables: { [key: string]: IVeryVar } = {};\r\n  private _expressions: { [key: string]: IExpression } = {};\r\n  private _actions: { [key: string]: VE_ActionBehaviour } = {};\r\n  private _triggers: { [key: string]: VE_TriggerBehaviour } = {};\r\n  private _fsms: { [key: string]: VE_Fsm } = {};\r\n  private _templates: { [key: string]: VE_Template } = {};\r\n\r\n  public dataSource: VE_DataSource;\r\n\r\n  public varData: VE_VariableData;\r\n\r\n\r\n\r\n  constructor(project_name: string, object_id: string, game_object: GameObject) {\r\n    this._projectName = projectName;\r\n    this._objectID = object_id;\r\n    this.gameObject = game_object;\r\n    this.dataSource = new VE_DataSource(project_name, object_id, false);\r\n    this.varData = new VE_VariableData(project_name);\r\n  }\r\n\r\n  public isCreatedFsm(fsm_id: string): boolean {\r\n    if (this._fsms[fsm_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addFsm(fsm_id: string, fsm: VE_Fsm): void {\r\n    this._fsms[fsm_id] = fsm;\r\n  }\r\n\r\n  public getFsm(fsm_id: string): VE_Fsm {\r\n    return this._fsms[fsm_id];\r\n  }\r\n\r\n  public isCreatedTrigger(trigger_id: string): boolean {\r\n    if (this._triggers[trigger_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTrigger(trigger_id: string, trigger: VE_TriggerBehaviour): void {\r\n    this._triggers[trigger_id] = trigger;\r\n  }\r\n\r\n  public getTrigger(trigger_id: string): VE_TriggerBehaviour {\r\n    return this._triggers[trigger_id];\r\n  }\r\n\r\n  public isCreatedAction(action_id: string): boolean {\r\n    if (this._actions[action_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addAction(action_id: string, action: VE_ActionBehaviour): void {\r\n    this._actions[action_id] = action;\r\n  }\r\n\r\n  public getAction(action_id: string): VE_ActionBehaviour {\r\n    return this._actions[action_id];\r\n  }\r\n\r\n  public isCreatedVariable(var_id: string): boolean {\r\n    if (this._variables[var_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addVariable(var_id: string, variable: IVeryVar): void {\r\n    this._variables[var_id] = variable;\r\n  }\r\n\r\n  public getVariable(var_id: string): IVeryVar {\r\n    return this._variables[var_id];\r\n  }\r\n\r\n  public isCreatedExpression(exp_id: string): boolean {\r\n    if (this._expressions[exp_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addExpression(exp_id: string, expression: IExpression): void {\r\n    this._expressions[exp_id] = expression;\r\n  }\r\n\r\n  public getExpression(exp_id: string): IExpression {\r\n    return this._expressions[exp_id];\r\n  }\r\n\r\n  public isCreatedTemplate(template_id: string): boolean {\r\n    if (this._templates[template_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTemplate(template_id: string, template: VE_Template): void {\r\n    this._templates[template_id] = template;\r\n  }\r\n\r\n  public getTemplate(template_id: string): VE_Template {\r\n    return this._templates[template_id];\r\n  }\r\n\r\n  public isCreatedVar(var_id: string): boolean {\r\n    if (this._variables[var_id] || this._expressions[var_id] || this._templates[var_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // getState(fsm_id: string, index: number): VE_State {\r\n\r\n  // }\r\n\r\n  unload(): void { }\r\n\r\n  // setUnloadCallback(callback): void {}\r\n\r\n\r\n  public update(): void {\r\n    // trigger update\r\n    Object.keys(this._triggers).forEach( key => {\r\n      this._triggers[key].update();\r\n    })\r\n    // action update\r\n    Object.keys(this._actions).forEach( key => {\r\n      this._actions[key].update();\r\n    })\r\n    // TODO: template\r\n    \r\n  }\r\n\r\n\r\n  public clear(): void {\r\n\r\n    if (this.dataSource) {\r\n      this.dataSource.clear();\r\n    }\r\n    if (this.varData) {\r\n      this.varData.clear();\r\n    }\r\n    this._variables = {};\r\n    this._expressions = {};\r\n\r\n    if (this._templates) {\r\n      Object.keys(this._templates).forEach(key => {\r\n        this._templates[key].clear();\r\n      })\r\n      this._templates = {};\r\n    }\r\n\r\n    this._fsms = {};\r\n\r\n    if (this._actions) {\r\n      Object.keys(this._actions).forEach(key => {\r\n        this._actions[key].destroy();\r\n      })\r\n      this._actions = {};\r\n    }\r\n\r\n    if (this._triggers) {\r\n      Object.keys(this._triggers).forEach(key => {\r\n        this._triggers[key].destroy();\r\n      })\r\n      this._triggers = {};\r\n    }\r\n  }\r\n\r\n\r\n}","export * from './verySceneVariables';","import { VE_Variables } from \"../variables\";\r\n\r\nexport class VerySceneVariables {\r\n\r\n  public static get Variables(): VE_Variables {\r\n    if(VerySceneVariables._variables === null) {\r\n      VerySceneVariables._variables = new VE_Variables('__scene_varibale__');\r\n    }\r\n    return VerySceneVariables._variables;\r\n  }\r\n  private static _variables: Nullable<VE_Variables> = null;\r\n\r\n  public static get HasLoaded(): boolean {\r\n    return this._hasLoaded;\r\n  }\r\n  private static _hasLoaded: boolean = false;\r\n\r\n  public static initIfNeeded(): void {\r\n    if(!this._hasLoaded) {\r\n      console.log('TODO: ');\r\n    }\r\n  }\r\n}","import { VE_State } from \"./state\";\r\nimport { AssociatedFsmType } from \"../enum\";\r\nimport { VE_Template } from \"../template\";\r\nimport { StateConst } from \"./stateConst\";\r\nimport { VE_Fsm } from \"./fsm\";\r\n\r\nexport class VE_AssociatedState {\r\n\r\n  private _types: AssociatedFsmType[] = [];\r\n  private _indexs: number[] = [];\r\n\r\n  private _posArray: string[] = [];\r\n\r\n  private _numberIndex: { [key: number]: number } = {};\r\n  private _states: { [key: number]: VE_State } = {};\r\n  private _templates: { [key: number]: VE_Template } = {};\r\n  private _templateFsmIDs: { [key: number]: string } = {};\r\n\r\n  public get FromState(): VE_State {\r\n    return this._fromState;\r\n  }\r\n  private _fromState: VE_State;\r\n\r\n  constructor(from_state: VE_State) {\r\n    this._fromState = from_state;\r\n  }\r\n\r\n  public add(state: VE_State, index: number, pos: string): void {\r\n    this._types.push(AssociatedFsmType.Object);\r\n    let key: number = this._types.length;\r\n    this._indexs.push(key);\r\n    this._numberIndex[key] = index;\r\n    this._states[key] = state;\r\n    this._posArray.push(pos);\r\n  }\r\n\r\n  public addTemplate(template: VE_Template, fsm_id: string, index: number, pos: string): void {\r\n    this._types.push(AssociatedFsmType.Template);\r\n    let key: number = this._types.length;\r\n    this._indexs.push(key);\r\n    this._numberIndex[key] = index;\r\n    this._templates[key] = template;\r\n    this._templateFsmIDs[key] = fsm_id;\r\n    this._posArray.push(pos);\r\n  }\r\n\r\n  public connect(): void {\r\n    for (let i: number = 0; i < this._types.length; i++) {\r\n      let currentType: AssociatedFsmType = this._types[i];\r\n      let Key: number = this._indexs[i];\r\n\r\n      // \r\n      if (currentType === AssociatedFsmType.Object) {\r\n        let toState: VE_State = this._states[Key];\r\n        if (toState.logicalAssociated === null || toState.logicalAssociated.evaluate() === true) {\r\n          toState.action(StateConst.ASSOCIATED_STATE_PREFIX + this._fromState.Fsm.ID);\r\n          // \r\n          return;\r\n        }\r\n      }\r\n      // State\r\n      else {\r\n        let template: VE_Template = this._templates[Key];\r\n        let fsmID: string = this._templateFsmIDs[Key];\r\n        let numberIndex: number = this._numberIndex[Key];\r\n\r\n        if (template.templateInstance !== null) {\r\n          if (template.templateInstance.isCreatedFsm(fsmID)) {\r\n            let fsm: VE_Fsm = template.templateInstance.getFsm(fsmID);\r\n            let toState: Nullable<VE_State> = fsm.getState(numberIndex);\r\n            if (toState !== null) {\r\n              toState.action(StateConst.ASSOCIATED_STATE_PREFIX + this._fromState.Fsm.ID);\r\n              //\r\n              return;\r\n            }\r\n            else {\r\n              console.error(' >>> ' + this._posArray[i] + '' + \"\" + this._fromState.Fsm.projectName + \"\" + this._fromState.Fsm.objectID + \"\" + this._fromState.Fsm.fsmID + \"\" + template.templateVarID + \"\" + fsmID + \"\" + numberIndex + \"\");\r\n              return;\r\n            }\r\n          }\r\n          else {\r\n            console.error(' >>> ' + this._posArray[i] + '' + \"\" + this._fromState.Fsm.projectName + \"\" + this._fromState.Fsm.objectID + \"\" + this._fromState.Fsm.fsmID + \"\" + template.templateVarID + \"\" + fsmID + \"\");\r\n            return;\r\n          }\r\n        }\r\n        else {\r\n          console.error(' >>> ' + this._posArray[i] + '' + \"\" + this._fromState.Fsm.projectName + \"\" + this._fromState.Fsm.objectID + \"\" + this._fromState.Fsm.fsmID + \"\" + template.templateVarID + \"\");\r\n          return;\r\n        }\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n\r\n}","import { VE_State } from \"./state\";\r\nimport { BabylonEngine } from \"../babylon\";\r\nimport { StateConst } from \"./stateConst\";\r\nimport { IVeryVar } from \"../variables\";\r\nimport { VeryEngineObject } from \"../object\";\r\n\r\nexport class VE_Fsm {\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = \"\";\r\n\r\n  public get ID(): string {\r\n    return this._id;\r\n  }\r\n  private _id: string = \"\";\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = \"\";\r\n\r\n  public get fsmID(): string {\r\n    return this._fsmID;\r\n  }\r\n  private _fsmID: string = \"\";\r\n\r\n  public get fsmVar(): IVeryVar {\r\n    return this._fsmVar;\r\n  }\r\n  private _fsmVar: IVeryVar;\r\n\r\n  public get VeryObject(): VeryEngineObject {\r\n    return this._veryObject;\r\n  }\r\n  private _veryObject: VeryEngineObject;\r\n\r\n  private _stateDics: { [key: number]: VE_State } = {};\r\n  private _states: VE_State[] = [];\r\n\r\n  public get count(): number {\r\n    return this._states.length;\r\n  }\r\n\r\n  private _frameCount: number = -1;\r\n  private _triggerIDs: string[] = [];\r\n\r\n  constructor(\r\n    project_name: string,\r\n    object_id: string,\r\n    fsm_id: string,\r\n    fsm_variable: IVeryVar,\r\n    very_object: VeryEngineObject\r\n  ) {\r\n    this._projectName = project_name;\r\n    this._objectID = object_id;\r\n    this._fsmID = fsm_id;\r\n    this._fsmVar = fsm_variable;\r\n    this._veryObject = very_object;\r\n  }\r\n\r\n  public isCreatedState(state_index: number): boolean {\r\n    if (this._stateDics[state_index]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addState(state: VE_State, state_index: number): void {\r\n    this._states.push(state);\r\n    if (state_index !== StateConst.STATE_INDEX && !this._stateDics[state_index]) {\r\n      this._stateDics[state_index] = state;\r\n    }\r\n  }\r\n\r\n  public getState(state_index: number): Nullable<VE_State> {\r\n    if (state_index === StateConst.STATE_INDEX) {\r\n      return this._states[0];\r\n    } else {\r\n      if (this._stateDics[state_index]) {\r\n        return this._stateDics[state_index];\r\n      } else {\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n  public getStateInSequence(index: number): Nullable<VE_State> {\r\n    if (index >= 0 && index < this._states.length) {\r\n      return this._states[index];\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public removeState(state_index: number): void {\r\n    delete this._stateDics[state_index];\r\n  }\r\n\r\n  public receiveEvent(trigger_id: string): boolean {\r\n\r\n    if (BabylonEngine.Scene.getFrameId() != this._frameCount) {\r\n      this._frameCount = BabylonEngine.Scene.getFrameId();\r\n      this._triggerIDs = [];\r\n      this._triggerIDs.push(trigger_id);\r\n      return true;\r\n    } else {\r\n      if (trigger_id.startsWith(StateConst.ASSOCIATED_STATE_PREFIX)) {\r\n        // console.log(`ID: ${trigger_id} Return True`);\r\n        return true;\r\n      } else {\r\n        if (this._triggerIDs.indexOf(trigger_id) !== -1) {\r\n          return false;\r\n        } else {\r\n          this._triggerIDs.push(trigger_id);\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public setValue(value: any): void {\r\n    this._fsmVar.setValue(value);\r\n  }\r\n}\r\n","export * from './state';\r\nexport * from './fsm';\r\nexport * from './stateAction';\r\nexport * from './associatedState';\r\nexport * from './stateConst';","import { VE_Fsm } from \"./fsm\";\r\nimport { VE_StateAction } from \"./stateAction\";\r\nimport { VE_AssociatedState } from \"./associatedState\";\r\nimport {\r\n  AssignmentType,\r\n  StateActionType,\r\n  ActionType,\r\n  SequenceActionState\r\n} from \"../enum\";\r\nimport { VE_Template } from \"../template\";\r\nimport { IVeryVar, VeryExpression } from \"../variables\";\r\nimport { IExpression } from \"../expression\";\r\nimport { VE_SequenceActions, VE_Assignment } from \"../action\";\r\n\r\nexport class VE_State {\r\n  public get Fsm(): VE_Fsm {\r\n    return this._fsm;\r\n  }\r\n  private _fsm: VE_Fsm;\r\n\r\n  public get isInitialValue(): boolean {\r\n    return this._isInitialValue;\r\n  }\r\n  private _isInitialValue: boolean = false;\r\n\r\n  public get Value(): any {\r\n    return this._value;\r\n  }\r\n  private _value: any = \"\";\r\n\r\n  private _assignmentType: AssignmentType = AssignmentType.Const;\r\n\r\n  public get isTemplateVar(): boolean {\r\n    return this._isTemplateVar;\r\n  }\r\n  private _isTemplateVar: boolean = false;\r\n\r\n  private _template: Nullable<VE_Template> = null;\r\n  private _varID: string = \"\";\r\n  private _templateVar: Nullable<IVeryVar> = null;\r\n  private _assignmentStr: string = \"\";\r\n\r\n  public get logicalExpression(): Nullable<IExpression> {\r\n    return this._logicalExpression;\r\n  }\r\n  private _logicalExpression: Nullable<IExpression> = null;\r\n\r\n  public get index(): number {\r\n    return this._index;\r\n  }\r\n  private _index: number = 0;\r\n\r\n  public get stateVariable(): Nullable<IVeryVar> {\r\n    return this._stateVariable;\r\n  }\r\n  private _stateVariable: Nullable<IVeryVar> = null;\r\n\r\n  public logicalAssociated: Nullable<IExpression> = null;\r\n\r\n  private _stateActions: VE_StateAction[] = [];\r\n  private _assocaitedStates: VE_AssociatedState[] = [];\r\n\r\n  public get IsSequence(): boolean {\r\n    return this._isSequence;\r\n  }\r\n  private _isSequence: boolean = false;\r\n\r\n  public _sequenceActions: Nullable<VE_SequenceActions> = null;\r\n\r\n  // \r\n  // 1.\r\n\r\n  constructor(fsm: VE_Fsm, index: number) {\r\n    this._fsm = fsm;\r\n    this._index = index;\r\n  }\r\n\r\n  public setInitialValue(value: any): void {\r\n    this._value = value;\r\n    this._assignmentType = AssignmentType.Const;\r\n  }\r\n\r\n  public setSequence(): void {\r\n    this._isSequence = true;\r\n  }\r\n\r\n  public setLogicalExpression(logical_exp: IExpression): void {\r\n    this._logicalExpression = logical_exp;\r\n  }\r\n\r\n  public setTemplateInfo(\r\n    template: VE_Template,\r\n    var_id: string,\r\n    assign_str: string\r\n  ): void {\r\n    this._isTemplateVar = true;\r\n    this._template = template;\r\n    this._varID = var_id;\r\n    this._assignmentStr = assign_str;\r\n  }\r\n\r\n  public setConstValue(value: any): void {\r\n    this._value = value;\r\n    this._assignmentType = AssignmentType.Const;\r\n  }\r\n\r\n  public setStateVariable(very_var: IVeryVar): void {\r\n    this._stateVariable = very_var;\r\n    this._assignmentType = AssignmentType.Variable;\r\n  }\r\n\r\n  public addAction(state_action: VE_StateAction): void {\r\n    this._stateActions.push(state_action);\r\n    if (\r\n      state_action.type === StateActionType.Action &&\r\n      state_action.action!.isSequence\r\n    ) {\r\n      this._isSequence = true;\r\n    }\r\n  }\r\n\r\n  public addAssignment(assignment: VE_Assignment): void {\r\n    let stateAction: VE_StateAction = new VE_StateAction();\r\n    stateAction.setAssignment(assignment);\r\n    this._stateActions.push(stateAction);\r\n  }\r\n\r\n  public addAssociatedState(associated_state: VE_AssociatedState): void {\r\n    this._assocaitedStates.push(associated_state);\r\n  }\r\n\r\n  // TODO\r\n  public action(trigger_id: string): void {\r\n    // Parent\r\n    if (this._fsm.receiveEvent(trigger_id)) {\r\n      if (this._isTemplateVar) {\r\n        // TODO:null\r\n        if (this._templateVar === null) {\r\n          this.getTemplateVar();\r\n        } else {\r\n          if (this._templateVar.className === \"VeryExpression\") {\r\n            // TODO\r\n            if ((<VeryExpression>this._templateVar).isNull) {\r\n              this.getTemplateVar();\r\n            } else {\r\n              this.Fsm.setValue(this._templateVar.getValue());\r\n            }\r\n          } else {\r\n            this.Fsm.setValue(this._templateVar.getValue());\r\n          }\r\n        }\r\n      } else {\r\n        // \r\n        if (this._assignmentType == AssignmentType.Const) {\r\n          // \r\n          this.Fsm.setValue(this.Value);\r\n        } else if (this._assignmentType == AssignmentType.Variable) {\r\n          // \r\n          this.Fsm.setValue(this._stateVariable!.getValue());\r\n        } // \r\n        else {\r\n          // \r\n          // this.Fsm.setValue(this._stateExpression.evaluate());\r\n        }\r\n      }\r\n\r\n      // \r\n      for (let i: number = 0; i < this._stateActions.length; i++) {\r\n        //\r\n        if (\r\n          this._stateActions[i].type === StateActionType.Action &&\r\n          this._stateActions[i]!.action!.Type === ActionType.Animation\r\n        ) {\r\n          if (\r\n            this._stateActions[i]!.action!.SequenceState ===\r\n            SequenceActionState.Prepared ||\r\n            this._stateActions[i]!.action!.SequenceState ===\r\n            SequenceActionState.Running\r\n          ) {\r\n            console.error(\r\n              \" >>> \" +\r\n              this._fsm.projectName +\r\n              \"\" +\r\n              this._fsm.objectID +\r\n              \"\" +\r\n              this._fsm.fsmID +\r\n              \"ID\" +\r\n              this._index +\r\n              \"\" +\r\n              this._stateActions[i]!.action!.actionID +\r\n              \"\"\r\n            );\r\n            return;\r\n          } else if (\r\n            this._stateActions[i]!.action!.SequenceState ===\r\n            SequenceActionState.Pause\r\n          ) {\r\n            console.error(\r\n              \" >>> \" +\r\n              this._fsm.projectName +\r\n              \"\" +\r\n              this._fsm.objectID +\r\n              \"\" +\r\n              this._fsm.fsmID +\r\n              \"ID\" +\r\n              this._index +\r\n              \"\" +\r\n              this._stateActions[i]!.action!.actionID +\r\n              \"\"\r\n            );\r\n            return;\r\n          }\r\n        }\r\n      }\r\n\r\n      //, TODO: \r\n      if (this._isSequence) {\r\n        // TODO: \r\n        console.log('');\r\n        // this._sequenceActions = this._fsm.VeryObject.gameObject.AddComponent<\r\n        //   VE_SequenceActions\r\n        // >();\r\n        // this._sequenceActions!.sequenceAction(\r\n        //   this._stateActions,\r\n        //   this._associatedStates\r\n        // );\r\n      } else {\r\n        // \r\n        for (let i: number = 0; i < this._stateActions.length; i++) {\r\n          let stateAction: VE_StateAction = this._stateActions[i];\r\n          // \r\n          if (stateAction.type === StateActionType.Action) {\r\n            // TODO: \r\n            stateAction!.action!.action(\r\n              stateAction.enabled,\r\n              stateAction.everyFrame\r\n            );\r\n          }\r\n          // \r\n          else {\r\n            stateAction!.assignment!.assign();\r\n          }\r\n        }\r\n        // \r\n        if (this._assocaitedStates.length > 0) {\r\n          // \r\n          // \r\n          for (let i: number = 0; i < this._assocaitedStates.length; i++) {\r\n            this._assocaitedStates[i].connect();\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private getTemplateVar(): void {\r\n    if (this._template!.templateInstance === null) {\r\n      console.error(\r\n        \" >>> \" +\r\n        this._fsm.projectName +\r\n        \"\" +\r\n        this._fsm.objectID +\r\n        \"\" +\r\n        this._fsm.fsmID +\r\n        \"\" +\r\n        this._assignmentStr +\r\n        \"\"\r\n      );\r\n      this._templateVar = null;\r\n      return;\r\n    } else {\r\n      if (this._template!.templateInstance.isCreatedVariable(this._varID)) {\r\n        this._templateVar = this._template!.templateInstance.getVariable(\r\n          this._varID\r\n        );\r\n      } else if (\r\n        this._template!.templateInstance.isCreatedExpression(this._varID)\r\n      ) {\r\n        this._templateVar = new VeryExpression(\r\n          this._template!.templateInstance.getExpression(this._varID)\r\n        );\r\n      } else if (this._template!.templateInstance.isCreatedFsm(this._varID)) {\r\n        this._templateVar = this._template!.templateInstance.getFsm(\r\n          this._varID\r\n        ).fsmVar;\r\n      } else {\r\n        console.error(\r\n          \" >>> \" +\r\n          this._fsm.projectName +\r\n          \"\" +\r\n          this._fsm.objectID +\r\n          \"\" +\r\n          this._fsm.fsmID +\r\n          \"\" +\r\n          this._assignmentStr +\r\n          \"\" +\r\n          this._varID +\r\n          \"\"\r\n        );\r\n        this._templateVar = null;\r\n        return;\r\n      }\r\n      this._fsm.setValue(this._templateVar.getValue());\r\n    }\r\n  }\r\n}\r\n","\r\nimport { VE_ActionBehaviour } from \"../action/actionBehaviour\";\r\nimport { StateActionType } from \"../enum\";\r\nimport { VE_Assignment } from \"../action\";\r\n\r\nexport class VE_StateAction {\r\n\r\n  public get type(): StateActionType {\r\n    return this._type;\r\n  }\r\n  private _type: StateActionType = StateActionType.Action;\r\n\r\n  public get action(): Nullable<VE_ActionBehaviour> {\r\n    return this._action;\r\n  }\r\n  private _action: Nullable<VE_ActionBehaviour> = null;\r\n\r\n  public get enabled(): boolean {\r\n    return this._enabled;\r\n  }\r\n  private _enabled: boolean = false;\r\n\r\n  public get everyFrame(): boolean {\r\n    return this._everyFrame;\r\n  }\r\n  private _everyFrame: boolean = false;\r\n\r\n  public get assignment(): Nullable<VE_Assignment> {\r\n    return this._assignment;\r\n  }\r\n  private _assignment: Nullable<VE_Assignment> = null;\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public setAction(action: VE_ActionBehaviour, enabled: boolean = false, every_frame: boolean = false, sequence: boolean = false): void {\r\n    this._action = action;\r\n    this._enabled = enabled;\r\n    this._everyFrame = every_frame;\r\n    this._action.isSequence = sequence;\r\n    this._type = StateActionType.Action; \r\n  }\r\n\r\n  public setAssignment(assignment: VE_Assignment): void {\r\n    this._assignment = assignment;\r\n    this._type = StateActionType.Assignment; \r\n  }\r\n\r\n\r\n}","export class StateConst {\r\n\r\n  public static readonly STATE_SEPARATOR: string = '.';\r\n  public static readonly ASSOCIATED_STATE_PREFIX: string = 'Associated_State:';\r\n  public static readonly VARIABLE_SYMBOL: string = '*';\r\n  public static readonly STATE_INDEX: number = -1;\r\n  public static LogCount: number = 0;\r\n\r\n  public static readonly AssignmentPrefix: string = \"AssignmentFormula_\";\r\n  public static AssignmentFormulaCount: number = 0;\r\n\r\n\r\n}","export * from './template';\r\nexport * from './templates';","import { VeryEngineObject } from \"../object\";\r\nimport { VE_DataSource, VE_VariableData } from \"../dataSource\";\r\n\r\nexport class VE_Template {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  public get templateID(): string {\r\n    return this._templateID;\r\n  }\r\n  private _templateID: string = '';\r\n\r\n  public get templateVarID(): string {\r\n    return this._templateVarID;\r\n  }\r\n  private _templateVarID: string = '';\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = '';\r\n\r\n  public templateInstance: Nullable<VeryEngineObject> = null;\r\n\r\n  public dataSource: VE_DataSource;\r\n\r\n  public varData: VE_VariableData;\r\n\r\n  public instanceCount(): number {\r\n    return this._instanceCount;\r\n  }\r\n  private _instanceCount: number = 0;\r\n\r\n\r\n  constructor(project_name: string, template_id: string) {\r\n    this._projectName = project_name;\r\n    this._templateID = template_id;\r\n    this.dataSource = new VE_DataSource(project_name, template_id, true);\r\n    this.varData = new VE_VariableData(project_name);\r\n  }\r\n\r\n  public setInstance(instance_obj: VeryEngineObject): void {\r\n    this.templateInstance = instance_obj;\r\n  }\r\n\r\n  public isCreatedVariable(var_id: string): boolean {\r\n    return this.varData.isCreatedVariable(var_id);\r\n  }\r\n\r\n  public addVariable(var_id: string, var_paras: string[], pos: string): void {\r\n    this.varData.addVariable(var_id, var_paras, pos);\r\n  }\r\n\r\n  public unload(): void {\r\n    //TODO: \r\n  }\r\n\r\n  public clone(object_id: string, template_var_id: string): VE_Template {\r\n    let cloneTemplate: VE_Template = new VE_Template(this._projectName, this._templateID);\r\n    cloneTemplate._objectID = object_id;\r\n    cloneTemplate._templateVarID = template_var_id;\r\n    cloneTemplate.dataSource = this.dataSource;\r\n    cloneTemplate.varData = this.varData;\r\n    cloneTemplate._instanceCount = this._instanceCount;\r\n    return cloneTemplate;\r\n  }\r\n\r\n  public clear(): void {\r\n    if (this.dataSource) {\r\n      this.dataSource.clear();\r\n    }\r\n    if (this.varData) {\r\n      this.varData.clear();\r\n    }\r\n    if (this.templateInstance) {\r\n      this.templateInstance.clear();\r\n    }\r\n  }\r\n\r\n}","import { VE_Template } from \"./template\";\r\nimport { ErrorInfo } from \"../utility\";\r\n\r\nexport class VE_Templates {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  private _templateDic: { [key: string]: VE_Template } = {};\r\n\r\n  private _instanceDic: { [key: string]: { [key: string]: VE_Template } } = {};\r\n\r\n\r\n  constructor(project_name: string) {\r\n    this._projectName = project_name;\r\n  }\r\n\r\n  public isCreatedTemplate(template_id: string): boolean {\r\n    if(this._templateDic[template_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTemplate(template_id: string, template: VE_Template): void {\r\n    this._templateDic[template_id] = template;\r\n  }\r\n\r\n  public getTemplate(template_id: string): VE_Template {\r\n    return this._templateDic[template_id];\r\n  }\r\n\r\n  public isCreatedInstance(object_id: string, var_id: string): boolean {\r\n    if(this._instanceDic[object_id] && this._instanceDic[object_id][var_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getInstance(object_id: string, var_id: string): VE_Template {\r\n    return this._instanceDic[object_id][var_id];\r\n  }\r\n\r\n  // public getState(var_id: string, state_id: string, index: number): VE_State {\r\n    \r\n  // } \r\n\r\n  public clear(): void {\r\n    if(this._templateDic) {\r\n      Object.keys(this._templateDic).forEach(key => {\r\n        this._templateDic[key].clear();\r\n      })\r\n      this._templateDic = {};\r\n    }\r\n  }\r\n\r\n  // TODO\r\n  public createInstance (object_id: string, var_id: string, template: VE_Template, object_name: string, error_info: ErrorInfo, destory_on_create_new: boolean): VE_Template\r\n  {\r\n\r\n    return new VE_Template(this._projectName, var_id);\r\n  }\r\n\r\n}","export * from './triggerBehaviour';\r\nexport * from './triggers';","import { VE_State } from \"../state/state\";\r\nimport { StateConst } from \"../state/stateConst\";\r\nimport { IExpression } from \"../expression\";\r\nimport { VeryEngineObject } from \"../object\";\r\n\r\nexport abstract class VE_TriggerBehaviour {\r\n\r\n  public abstract get ID(): string;\r\n\r\n  public abstract get className(): string;\r\n\r\n  public get scene(): BABYLON.Scene {\r\n    return this._scene;\r\n  }\r\n  public _scene!: BABYLON.Scene;\r\n\r\n  public get enabled(): boolean {\r\n    return this._enabled && this.isEnabled;\r\n  }\r\n  public set enabled(val: boolean) {\r\n    this._enabled = val;\r\n  }\r\n  private _enabled: boolean = true;\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  public get isEnabled(): boolean {\r\n    if (this._logicalSwitch) {\r\n      for (let i: number = 0; i < this._logicalSwitch.length; i++) {\r\n        if (this._logicalSwitch[i] && !this._logicalSwitch[i].evaluate()) {\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // Logical\r\n  private _logicalSwitch: IExpression[] = [];\r\n  private _logicalExp: IExpression[] = [];\r\n  // State\r\n  private _triggerTargets: VE_State[] = [];\r\n\r\n  // protected GameObject ObjectInstance = null;\r\n  protected VeryObject: Nullable<VeryEngineObject> = null;\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = 'object-axxx';\r\n\r\n  public get triggerID(): string {\r\n    return this._triggerID;\r\n  }\r\n  private _triggerID: string = '';\r\n\r\n  public get unionID(): string {\r\n    return this._id;\r\n  }\r\n  private _id: string = '';\r\n\r\n  public test(): void {\r\n    console.log(this._objectID);\r\n  }\r\n\r\n\r\n  public set(scene: BABYLON.Scene): void {\r\n    this._scene = scene;\r\n  }\r\n\r\n  public setTriggerID(project_name: string, trigger_id: string, object_id: string): void {\r\n    this._projectName = project_name;\r\n    this._triggerID = trigger_id;\r\n    this._objectID = object_id;\r\n    this._id = object_id + StateConst.STATE_SEPARATOR + trigger_id;\r\n  }\r\n\r\n  public addLogicalSwitch(exp: IExpression): void {\r\n    this._logicalSwitch.push(exp);\r\n  }\r\n\r\n  public addTriggerTarget(exp: IExpression, state: VE_State): void {\r\n    this._logicalExp.push(exp);\r\n    this._triggerTargets.push(state);\r\n  }\r\n\r\n  public setVeryObject(very_object: VeryEngineObject): void {\r\n    this.VeryObject = very_object;\r\n  }\r\n\r\n  public sendEvent(): void {\r\n    this.eventProcess();\r\n  }\r\n\r\n  // \r\n  private eventProcess(): void {\r\n    if (this._triggerTargets) {\r\n      // console.log(`ID: ${this.triggerID} --- Count: ${this._triggerTargets.length}`);\r\n      for (let i: number = 0; i < this._triggerTargets.length; i++) {\r\n        if (!this._logicalExp[i] || this._logicalExp[i].evaluate()) {\r\n          this._triggerTargets[i].action(this._id);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public abstract paraParser(para_array: string[]): boolean;\r\n\r\n  public update(): void {\r\n    if (this.isEnabled) {\r\n      this.onUpdate();\r\n    }\r\n  }\r\n\r\n  public onUpdate(): void {\r\n\r\n  }\r\n\r\n  public abstract destroy(): void;\r\n\r\n\r\n}","import { VE_TriggerBehaviour } from \"./triggerBehaviour\";\r\nimport { VeryEngineObject, VE_Objects } from \"../object\";\r\nimport { StateConst } from \"../state\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { GameGlobal, VE_ErrorManager, VE_Error } from \"../global\";\r\nimport { ErrorInfo } from \"../utility\";\r\nimport { BabylonEngine } from \"../babylon\";\r\nimport { Severity } from \"../enum\";\r\n\r\nexport class VE_Triggers {\r\n\r\n  // private static _triggerDics: { [key: string]: VE_TriggerBehaviour } = {};\r\n\r\n  private static _triggerFunctionDics: { [key: string]: Function } = {};\r\n\r\n  // public static addTrigger(trigger: VE_TriggerBehaviour): void {\r\n  //   // \r\n  //   if (!GameGlobal.PlatformLoaded) {\r\n  //     let ids: string[] = trigger.ID.split('|');\r\n  //     for (let i: number = 0; i < ids.length; i++) {\r\n  //       let id: string = ids[i].trim().toLowerCase();\r\n  //       if (this._triggerDics[id]) {\r\n  //         ShowError.showError(`IDID${id}ID`);\r\n  //       } else {\r\n  //         this._triggerDics[id] = trigger;\r\n  //       }\r\n  //     }\r\n  //   }\r\n  // }\r\n\r\n  public static addTrigger(trigger_class: Function): void {\r\n    // \r\n    if (!GameGlobal.PlatformLoaded) {\r\n      let tempTrigger: any = new trigger_class.prototype.constructor();\r\n      // console.log(`ID  ${tempTrigger.ID}  ${tempTrigger.className} `);\r\n      let ids: string[] = tempTrigger.ID.split('|');\r\n      for (let i: number = 0; i < ids.length; i++) {\r\n        let id: string = ids[i].trim().toLowerCase();\r\n        if (this._triggerFunctionDics[id]) {\r\n          VE_ErrorManager.Add(new VE_Error('', `IDID${id}${tempTrigger.className}ID`, '', Severity.Error));\r\n        } else {\r\n          this._triggerFunctionDics[id] = trigger_class;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public static hasTrigger(trigger_type: string): boolean {\r\n    trigger_type = trigger_type.toLowerCase();\r\n    if (this._triggerFunctionDics[trigger_type]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static createTrigger(very_object: VeryEngineObject, trigger_id: string, trigger_type: string, trigger_para: string[], error_info: ErrorInfo): Nullable<VE_TriggerBehaviour> {\r\n    trigger_type = trigger_type.toLowerCase();\r\n    // console.log(this._triggerFunctionDics[trigger_type]);\r\n    if (!this._triggerFunctionDics[trigger_type]) {\r\n      error_info.isRight = false;\r\n      error_info.message = `` + trigger_type;\r\n      return null;\r\n    }\r\n    let variable: any;\r\n    try {\r\n      // newObject.createprototype\r\n      variable = new this._triggerFunctionDics[trigger_type].prototype.constructor();\r\n\r\n      if (!variable) {\r\n        error_info.isRight = false;\r\n        error_info.message = `` + trigger_type;\r\n        return null;\r\n      }\r\n\r\n      let trigger: VE_TriggerBehaviour = <VE_TriggerBehaviour>variable;\r\n      trigger.set(BabylonEngine.Scene);\r\n      trigger.setVeryObject(very_object);\r\n      trigger.setTriggerID(very_object.projectName, trigger_id, very_object.objectID);\r\n      if (!trigger.paraParser(trigger_para)) {\r\n        error_info.isRight = false;\r\n        error_info.message = \"\";\r\n        return null;\r\n      }\r\n      return trigger;\r\n    } catch (error) {\r\n      console.error(`${error.message}`);\r\n      error_info.isRight = false;\r\n      error_info.message = '' + trigger_type + '' + error.message;\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static remove(trigger_type: string): void {\r\n    trigger_type = trigger_type.toLowerCase();\r\n    delete this._triggerFunctionDics[trigger_type];\r\n  }\r\n\r\n  public static findTrigger(very_object: VeryEngineObject, trigger_id: string): Nullable<VE_TriggerBehaviour> {\r\n    if (very_object.isCreatedTrigger(trigger_id)) {\r\n      return very_object.getTrigger(trigger_id);\r\n    } else {\r\n      let triggerArray: string[] = trigger_id.split(StateConst.STATE_SEPARATOR);\r\n      if (triggerArray.length === 2) {\r\n        let objects: VE_Objects = VE_Manager.objects(very_object.projectName);\r\n        let objectID: string = triggerArray[0].trim();\r\n        let triggerID: string = triggerArray[1].trim();\r\n        if (objects.isCreated(objectID)) {\r\n          let otherObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n          if (otherObject.isCreatedTrigger(triggerID)) {\r\n            return otherObject.getTrigger(triggerID);\r\n          } else {\r\n            return null;\r\n          }\r\n        } else {\r\n          return null;\r\n        }\r\n      } else {\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n  public static dispose(): void {\r\n    VE_Triggers._triggerFunctionDics = {};\r\n  }\r\n\r\n}","export class ArrayUtility {\r\n  public static remove<T>(arr: Array<T>, ele: T): void {\r\n    let index = arr.indexOf(ele);\r\n    if (index > -1) {\r\n      arr.splice(index, 1);\r\n    }\r\n  }\r\n\r\n  public static clear<T>(arr: Array<T>): void {\r\n    arr = [];\r\n  }\r\n\r\n  // public static T[] RemoveAt<T>(T[] array, int index) {\r\n  //   List < T > list = new List<T>(array);\r\n  //   list.RemoveAt(index);\r\n  //   return list.ToArray();\r\n  // }\r\n\r\n}\r\n\r\n","/** */\r\nexport class Dictionary<KT, VT> {\r\n  private _keys: KT[] = [];\r\n  private _values: VT[] = [];\r\n  public get count(): number {\r\n    return this.Count();\r\n  }\r\n\r\n  public constructor() {\r\n  }\r\n\r\n  /**, */\r\n  public Add(key: any, value: any): number {\r\n    this._keys.push(key);\r\n    return this._values.push(value);\r\n  }\r\n\r\n  public Remove(key: any) {\r\n    var index = this._keys.indexOf(key, 0);\r\n    this._keys.splice(index, 1);\r\n    this._values.splice(index, 1);\r\n  }\r\n\r\n  private Count(): number {\r\n    return this._keys.length;\r\n  }\r\n\r\n  /**SetValue() */\r\n  public SetValue(key: any, value: any): boolean {\r\n    var index = this._keys.indexOf(key, 0);\r\n    if (index != -1) {\r\n      this._keys[index] = key;\r\n      this._values[index] = value;\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n  public GetValue(key: KT): VT | null {\r\n    var index = this._keys.indexOf(key, 0);\r\n    if (index != -1) {\r\n      return this._values[index];\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public ContainsKey(key: any): boolean {\r\n    let ks = this._keys;\r\n    for (let i = 0; i < ks.length; ++i) {\r\n      if (ks[i] == key) {\r\n        return true;;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public GetKeys(): KT[] {\r\n    return this._keys;\r\n  }\r\n\r\n  public GetValues(): VT[] {\r\n    return this._values;\r\n  }\r\n}","export class ErrorInfo {\r\n\r\n  public isRight: boolean = true;\r\n  public message: string = '';\r\n\r\n  constructor() {\r\n    \r\n  }\r\n\r\n  public clear(): void {\r\n    this.isRight = true;\r\n    this.message = '';\r\n  }\r\n\r\n}","export * from './arrayUtility';\r\nexport * from './dictionary';\r\nexport * from './errorInfo';\r\nexport * from './stringFormat';\r\nexport * from './paraParserUtility';\r\nexport * from './keyboardMap';\r\nexport * from './typeConvert';","export class VE_KeyboardMap {\r\n\r\n  private static _keyMap: { [key: string]: string } = {};\r\n  private static _initialized = false;\r\n\r\n  private static init(): void {\r\n    this._keyMap['backspace'] = 'Backspace';\r\n    this._keyMap[''] = 'Backspace';\r\n    this._keyMap['tab'] = 'Tab';\r\n    this._keyMap['enter'] = 'Enter';\r\n    this._keyMap[''] = 'Enter';\r\n    this._keyMap['shift'] = 'Shift';\r\n    this._keyMap['control'] = 'Control';\r\n    this._keyMap['ctrl'] = 'Control';\r\n    this._keyMap['alt'] = 'Alt';\r\n    this._keyMap['pause'] = 'Pause';\r\n    this._keyMap['capsLock'] = 'CapsLock';\r\n    this._keyMap['escape'] = 'Escape';\r\n    this._keyMap['pageup'] = 'PageUp';\r\n    this._keyMap[''] = 'PageUp';\r\n    this._keyMap['pagedown'] = 'PageDown';\r\n    this._keyMap[''] = 'PageDown';\r\n    this._keyMap['end'] = 'End';\r\n    this._keyMap['home'] = 'Home';\r\n    this._keyMap['arrowleft'] = 'ArrowLeft';\r\n    this._keyMap[''] = 'ArrowLeft';\r\n    this._keyMap['arrowup'] = 'ArrowUp';\r\n    this._keyMap[''] = 'ArrowUp';\r\n    this._keyMap['arrowright'] = 'ArrowRight';\r\n    this._keyMap[''] = 'ArrowRight';\r\n    this._keyMap['arrowdown'] = 'ArrowDown';\r\n    this._keyMap[''] = 'ArrowDown';\r\n    this._keyMap['insert'] = 'Insert';\r\n    this._keyMap[''] = 'Insert';\r\n    this._keyMap['delete'] = 'Delete';\r\n    this._keyMap[''] = 'Delete';\r\n    this._keyMap['0'] = '0';\r\n    this._keyMap['1'] = '1';\r\n    this._keyMap['2'] = '2';\r\n    this._keyMap['3'] = '3';\r\n    this._keyMap['4'] = '4';\r\n    this._keyMap['5'] = '5';\r\n    this._keyMap['6'] = '6';\r\n    this._keyMap['7'] = '7';\r\n    this._keyMap['8'] = '8';\r\n    this._keyMap['9'] = '9';\r\n    this._keyMap[')'] = ')';\r\n    this._keyMap[''] = ')';\r\n    this._keyMap['!'] = '!';\r\n    this._keyMap[''] = '!';\r\n    this._keyMap['@'] = '@';\r\n    this._keyMap['#'] = '#';\r\n    this._keyMap['$'] = '$';\r\n    this._keyMap[''] = '$';\r\n    this._keyMap['%'] = '%';\r\n    this._keyMap['^'] = '^';\r\n    this._keyMap[''] = '^';\r\n    this._keyMap['&'] = '&';\r\n    this._keyMap['*'] = '*';\r\n    this._keyMap['('] = '(';\r\n    this._keyMap[''] = '(';\r\n    this._keyMap['meta'] = 'meta';\r\n    this._keyMap['windows'] = 'meta';\r\n    this._keyMap['contextmenu'] = 'ContextMenu';\r\n    this._keyMap[''] = 'ContextMenu';\r\n    this._keyMap['f1'] = 'F1';\r\n    this._keyMap['f2'] = 'F2';\r\n    this._keyMap['f3'] = 'F3';\r\n    this._keyMap['f4'] = 'F4';\r\n    this._keyMap['f5'] = 'F5';\r\n    this._keyMap['f6'] = 'F6';\r\n    this._keyMap['f7'] = 'F7';\r\n    this._keyMap['f8'] = 'F8';\r\n    this._keyMap['f9'] = 'F9';\r\n    this._keyMap['f10'] = 'F10';\r\n    this._keyMap['f11'] = 'F11';\r\n    this._keyMap['f12'] = 'F12';\r\n    this._keyMap['scrolllock'] = 'ScrollLock';\r\n    this._keyMap[';'] = ';';\r\n    this._keyMap[''] = ';';\r\n    this._keyMap[':'] = ':';\r\n    this._keyMap[''] = ':';\r\n    this._keyMap['='] = '=';\r\n    this._keyMap['+'] = '+';\r\n    this._keyMap['-'] = '-';\r\n    this._keyMap['_'] = '_';\r\n    this._keyMap[''] = '_';\r\n    this._keyMap[','] = ',';\r\n    this._keyMap[''] = ',';\r\n    this._keyMap['<'] = '<';\r\n    this._keyMap[''] = '<';\r\n    this._keyMap['.'] = '.';\r\n    this._keyMap[''] = '.';\r\n    this._keyMap['>'] = '>';\r\n    this._keyMap[''] = '>';\r\n    this._keyMap['?'] = '?';\r\n    this._keyMap[''] = '?';\r\n    this._keyMap['/'] = '/';\r\n    this._keyMap['`'] = '`';\r\n    this._keyMap[''] = '`';\r\n    this._keyMap['~'] = '~';\r\n    this._keyMap['|'] = '|';\r\n    this._keyMap['\\\\'] = '\\\\';\r\n    this._keyMap['\\\\'] = '\\\\';\r\n    this._keyMap['numlock'] = 'NumLock';\r\n    this._keyMap['a'] = 'a';\r\n    this._keyMap['b'] = 'b';\r\n    this._keyMap['c'] = 'c';\r\n    this._keyMap['d'] = 'd';\r\n    this._keyMap['e'] = 'e';\r\n    this._keyMap['f'] = 'f';\r\n    this._keyMap['g'] = 'g';\r\n    this._keyMap['h'] = 'h';\r\n    this._keyMap['i'] = 'i';\r\n    this._keyMap['j'] = 'j';\r\n    this._keyMap['k'] = 'k';\r\n    this._keyMap['l'] = 'l';\r\n    this._keyMap['m'] = 'm';\r\n    this._keyMap['n'] = 'n';\r\n    this._keyMap['o'] = 'o';\r\n    this._keyMap['p'] = 'p';\r\n    this._keyMap['q'] = 'q';\r\n    this._keyMap['r'] = 'r';\r\n    this._keyMap['s'] = 's';\r\n    this._keyMap['t'] = 't';\r\n    this._keyMap['u'] = 'u';\r\n    this._keyMap['v'] = 'v';\r\n    this._keyMap['w'] = 'w';\r\n    this._keyMap['x'] = 'x';\r\n    this._keyMap['y'] = 'y';\r\n    this._keyMap['z'] = 'z';\r\n    \r\n\r\n  }\r\n\r\n  public static GetKey(key_str: string): string {\r\n    if(!this._initialized) {\r\n      this.init();\r\n      this._initialized = true;\r\n    }\r\n    key_str = key_str.trim().toLowerCase();\r\n    if (this._keyMap[key_str]) {\r\n      return this._keyMap[key_str];\r\n    } else {\r\n      return 'null';\r\n    }\r\n  }\r\n\r\n\r\n\r\n}","import { ParaType, Severity } from \"../enum\";\r\nimport { VE_ErrorManager, VE_Error } from \"../global\";\r\nimport { VeryGameObject, VeryVarManager, VarTools, IVeryVar, VeryString, VeryExpression, VeryNumber, VeryBool, VeryVector3 } from \"../variables\";\r\nimport { ErrorInfo } from \"./errorInfo\";\r\nimport { VE_Template } from \"../template\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { GameObject } from \"../babylon\";\r\nimport { VeryEngineObject } from \"../object\";\r\nimport { VE_TypeConvert } from \"./typeConvert\";\r\n\r\nexport class ParaParserUtility {\r\n\r\n  /**\r\n   * \r\n   * @param id \r\n   * @param para_type \r\n   * @param current_number \r\n   * @param required_number \r\n   */\r\n  public static ParaNumbers(id: string, para_type: ParaType, current_number: number, ...required_number: number[]): boolean {\r\n    for (let i: number = 0; i < required_number.length; i++) {\r\n      if (required_number[i] === current_number) {\r\n        return true;\r\n      }\r\n    }\r\n    let requiredStr: string = \"\";\r\n    for (let i: number = 0; i < required_number.length; i++) {\r\n      if (i === 0) {\r\n        requiredStr += (required_number[i] + 1).toString() + \"\";\r\n      }\r\n      else {\r\n        requiredStr += \"\" + (required_number[i] + 1).toString() + \"\";\r\n      }\r\n    }\r\n    if (para_type === ParaType.Action) {\r\n\r\n      VE_ErrorManager.Add(new VE_Error('', id + \"  \" + requiredStr + \"\" + (current_number + 1) + \"\", '', Severity.Error));\r\n    }\r\n    else {\r\n      VE_ErrorManager.Add(new VE_Error('', id + \"  \" + requiredStr + \"\" + (current_number + 1) + \"\", '', Severity.Error));\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * VeryGameObject\r\n   * @param project_name \r\n   * @param object_id \r\n   * @param id ID\r\n   * @param para_type \r\n   * @param very_var \r\n   * @param var_str \r\n   * @param log \r\n   * \r\n   */\r\n  public static GameObjectPara(project_name: string, object_id: string, id: string, para_type: ParaType, very_var: VeryGameObject, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVar(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        // Template\r\n        errorInfo.clear();\r\n        let template: Nullable<VE_Template> = VarTools.GetTemplate(project_name, object_id, var_str, errorInfo);\r\n        if (template === null) {\r\n          if (log) {\r\n            VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}`, '', Severity.Error));\r\n          }\r\n          return false;\r\n        }\r\n        else {\r\n          if (template.templateInstance === null) {\r\n            if (log) {\r\n              VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}GameObject`, '', Severity.Error));\r\n            }\r\n            return false;\r\n          }\r\n          else {\r\n            if (!very_var) {\r\n              very_var = new VeryGameObject();\r\n            }\r\n            very_var.value = template.templateInstance.gameObject;\r\n            return true;\r\n          }\r\n        }\r\n      }\r\n      else if (veryVar.className === 'VeryGameObject') {\r\n        very_var = <VeryGameObject>veryVar;\r\n        return true;\r\n      }\r\n      else if (veryVar.className === 'VeryString') {\r\n        let vString: VeryString = <VeryString>veryVar;\r\n        very_var.value = GameObject.Find(vString.value);\r\n        if (very_var.value === null) {\r\n          if (log) {\r\n            VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${vString.value}`, '', Severity.Error));\r\n          }\r\n          return false;\r\n        }\r\n        return true;\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}GameObject`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      if (very_var === null) {\r\n        very_var = new VeryGameObject();\r\n      }\r\n      if (var_str.toLowerCase().trim() === \"this\") {\r\n        let veryObject: VeryEngineObject = VE_Manager.objects(project_name).getVeryObject(object_id);\r\n        if (veryObject === null) {\r\n          if (log) {\r\n            VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''}  ${object_id}`, '', Severity.Error));\r\n          }\r\n          return false;\r\n        }\r\n        else {\r\n          very_var.value = veryObject.gameObject;\r\n        }\r\n      }\r\n      else if (var_str.toLowerCase().trim() === \"null\" || var_str.toLowerCase().trim() === \"none\" || var_str.toLowerCase().trim() === \"\") {\r\n        very_var.value = null;\r\n      }\r\n      else if (var_str.startsWith(\"/\")) {\r\n        let veryObject: VeryEngineObject = VE_Manager.objects(project_name).getVeryObject(object_id);\r\n        if (!veryObject) {\r\n          if (log) {\r\n            VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''}  ${object_id}`, '', Severity.Error));\r\n          }\r\n          return false;\r\n        }\r\n        else {\r\n          let parentObj: GameObject = veryObject.gameObject;\r\n          let childName: string = var_str.substring(1).trim();\r\n          // TODO: \r\n          // very_var.value = GameObject.FindChild(parentObj, childName);\r\n          if (very_var.value === null) {\r\n            if (log) {\r\n              VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${object_id}${var_str}`, '', Severity.Error));\r\n            }\r\n            return false;\r\n          }\r\n          return true;\r\n        }\r\n      }\r\n      else {\r\n        very_var.value = GameObject.Find(var_str);\r\n        if (very_var.value === null) {\r\n          if (log) {\r\n            VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''}  ${object_id}`, '', Severity.Error));\r\n          }\r\n          return false;\r\n        }\r\n      }\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public static GameObjectParaOnlyVar(project_name: string, object_id: string, id: string, para_type: ParaType, very_var: VeryGameObject, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVar(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}GameObject`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryGameObject') {\r\n        very_var = <VeryGameObject>veryVar;\r\n        return true;\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}GameObject`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      if (log) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}GameObject`, '', Severity.Error));\r\n      }\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static StringPara(project_name: string, object_id: string, id: string, para_type: ParaType, very_var: VeryString, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      return ParaParserUtility.StringParaOnlyVar(project_name, object_id, id, para_type, very_var, var_str, log);\r\n    }\r\n    else {\r\n      if (very_var === null) {\r\n        very_var = new VeryString();\r\n      }\r\n      very_var.value = var_str;\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public static StringParaWithExpression(project_name: string, object_id: string, id: string, para_type: ParaType, very_var: VeryString, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVarWithExpression(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}${errorInfo.message}`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryString') {\r\n        very_var = <VeryString>veryVar;\r\n        return true;\r\n      }\r\n      else if (veryVar.className === 'VeryExpression') {\r\n        if (veryVar.varType === 'string') {\r\n          very_var = new VeryString();\r\n          very_var.setExpression(<VeryExpression>veryVar);\r\n          return true;\r\n        }\r\n        else {\r\n          if (log) {\r\n            VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}String`, '', Severity.Error));\r\n          }\r\n          return false;\r\n        }\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}String`, '', Severity.Error));\r\n        }\r\n      }\r\n      return false;\r\n    }\r\n    else {\r\n      if (very_var === null) {\r\n        very_var = new VeryString();\r\n      }\r\n      very_var.value = var_str;\r\n      return true;\r\n    }\r\n  }\r\n\r\n\r\n  public static StringParaOnlyVar(project_name: string, object_id: string, id: string, para_type: ParaType, very_var: VeryString, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVar(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}${errorInfo.message}`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryString') {\r\n        very_var = <VeryString>veryVar;\r\n        return true;\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}String`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      if (log) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}String`, '', Severity.Error));\r\n      }\r\n      return false;\r\n    }\r\n  }\r\n\r\n\r\n  public static NumberPara(project_name: string, object_id: string, id: string, para_type: ParaType, very_var: VeryNumber, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      return ParaParserUtility.NumberParaOnlyVar(project_name, object_id, id, para_type, very_var, var_str, log);\r\n    }\r\n    else {\r\n      if (very_var === null) {\r\n        very_var = new VeryNumber();\r\n      }\r\n      very_var.value = parseFloat(var_str);\r\n      if (isNaN(very_var.value)) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}number`, '', Severity.Error));\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  public static NumberParaWithExpression(project_name: string, object_id: string, id: string, para_type: ParaType, very_var: VeryNumber, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVarWithExpression(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}${errorInfo.message}`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryNumber') {\r\n        very_var = <VeryNumber>veryVar;\r\n        return true;\r\n      }\r\n      else if (veryVar.className === 'VeryExpression') {\r\n        if (veryVar.varType === 'number') {\r\n          very_var = new VeryNumber();\r\n          very_var.setExpression(<VeryExpression>veryVar);\r\n          return true;\r\n        }\r\n        else {\r\n          if (log) {\r\n            VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}number`, '', Severity.Error));\r\n          }\r\n          return false;\r\n        }\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}number`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      if (very_var === null) {\r\n        very_var = new VeryNumber();\r\n      }\r\n      very_var.value = parseFloat(var_str);\r\n      if (isNaN(very_var.value)) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}number`, '', Severity.Error));\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public static NumberParaOnlyVar(project_name: string, object_id: string, id: string, para_type: ParaType, very_var: VeryNumber, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVar(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}${errorInfo.message}`, '', Severity.Error));\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryNumber') {\r\n        very_var = <VeryNumber>veryVar;\r\n        return true;\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}number`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      if (log) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}number`, '', Severity.Error));\r\n      }\r\n      return false;\r\n    }\r\n  }\r\n\r\n\r\n  public static BoolPara(project_name: string, object_id: string, id: string, para_type: ParaType, very_var: VeryBool, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      return ParaParserUtility.BoolParaOnlyVar(project_name, object_id, id, para_type, very_var, var_str, log);\r\n    }\r\n    else {\r\n      if (very_var === null) {\r\n        very_var = new VeryBool();\r\n      }\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      very_var.value = VE_TypeConvert.boolConvert(var_str, errorInfo);\r\n      if (errorInfo.isRight === false) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}bool`, '', Severity.Error));\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n  }\r\n\r\n\r\n  public static BoolParaWithExpression(project_name: string, object_id: string, id: string, para_type: ParaType, very_var: VeryBool, var_str: string, log: boolean = true) {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVar(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}${errorInfo.message}`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryBool') {\r\n        very_var = <VeryBool>veryVar;\r\n        return true;\r\n      }\r\n      else if (veryVar.className === 'VeryExpression') {\r\n        if (veryVar.varType === 'bool') {\r\n          very_var = new VeryBool();\r\n          very_var.setExpression(<VeryExpression>veryVar);\r\n          return true;\r\n        }\r\n        else {\r\n          if (log) {\r\n            VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}bool`, '', Severity.Error));\r\n          }\r\n          return false;\r\n        }\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}bool`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      if (very_var === null) {\r\n        very_var = new VeryBool();\r\n      }\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      very_var.value = VE_TypeConvert.boolConvert(var_str, errorInfo);\r\n      if (errorInfo.isRight === false) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}bool`, '', Severity.Error));\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public static BoolParaOnlyVar(project_name: string, object_id: string, id: string, para_type: ParaType, very_var: VeryBool, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVar(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}${errorInfo.message}`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryBool') {\r\n        very_var = <VeryBool>veryVar;\r\n        return true;\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}bool`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      if (log) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}bool`, '', Severity.Error));\r\n      }\r\n      return false;\r\n    }\r\n  }\r\n\r\n\r\n  public static Vector3Para(project_name: string, object_id: string, id: string, para_type: ParaType, very_var: VeryVector3, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVar(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}${errorInfo.message}`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryVector3') {\r\n        very_var = <VeryVector3>veryVar;\r\n        return true;\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}Vector3`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      if (log) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}Vector3`, '', Severity.Error));\r\n      }\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static Vector3OrNumberPara(project_name: string, object_id: string, id: string, para_type: ParaType, very_var: VeryVector3, x: VeryNumber, y: VeryNumber, z: VeryNumber, is_vec: boolean[], var_str: string, log: boolean = true): boolean {\r\n    if (var_str.indexOf(\",\") > -1 || var_str.indexOf(\"\") > -1) {\r\n      is_vec[0] = false;\r\n      let floatsArray: string[] = var_str.split(/,|/);\r\n      if (floatsArray.length === 3) {\r\n        if (!this.NumberPara(project_name, object_id, id, para_type, x, floatsArray[0].trim(), log)) {\r\n          return false;\r\n        }\r\n        if (!this.NumberPara(project_name, object_id, id, para_type, y, floatsArray[1].trim(), log)) {\r\n          return false;\r\n        }\r\n        if (!this.NumberPara(project_name, object_id, id, para_type, z, floatsArray[2].trim(), log)) {\r\n          return false;\r\n        }\r\n        return true;\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}1, 2, 3number`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      is_vec[0] = true;\r\n      return this.Vector3Para(project_name, object_id, id, para_type, very_var, var_str, log);\r\n    }\r\n  }\r\n\r\n\r\n  public static Vector3ParaWithExpression(project_name: string, object_id: string, id: string, para_type: ParaType, very_var: VeryVector3, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVarWithExpression(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}${errorInfo.message}`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryVector3') {\r\n        very_var = <VeryVector3>veryVar;\r\n        return true;\r\n      }\r\n      else if (veryVar.className === 'VeryExpression') {\r\n        if (veryVar.varType === 'Vector3') {\r\n          very_var.setExpression(<VeryExpression>veryVar);\r\n          return true;\r\n        }\r\n        else {\r\n          if (log) {\r\n            VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}Vector3`, '', Severity.Error));\r\n          }\r\n          return false;\r\n        }\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}Vector3`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      if (log) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}Vector3`, '', Severity.Error));\r\n      }\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static Vector3OrNumberParaWithExpression(project_name: string, object_id: string, id: string, para_type: ParaType, very_var: VeryVector3, x: VeryNumber, y: VeryNumber, z: VeryNumber, is_vec: boolean[], var_str: string, log: boolean = true): boolean {\r\n    if (var_str.indexOf(\",\") > -1 || var_str.indexOf(\"\") > -1) {\r\n      is_vec[0] = false;\r\n      let floatsArray: string[] = var_str.split(/,|/);\r\n      if (floatsArray.length === 3) {\r\n        if (!this.NumberParaWithExpression(project_name, object_id, id, para_type, x, floatsArray[0].trim(), log)) {\r\n          return false;\r\n        }\r\n        if (!this.NumberParaWithExpression(project_name, object_id, id, para_type, y, floatsArray[1].trim(), log)) {\r\n          return false;\r\n        }\r\n        if (!this.NumberParaWithExpression(project_name, object_id, id, para_type, z, floatsArray[2].trim(), log)) {\r\n          return false;\r\n        }\r\n        return true;\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}1, 2, 3Vector3`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      is_vec[0] = true;\r\n      return this.Vector3ParaWithExpression(project_name, object_id, id, para_type, very_var, var_str, log);\r\n    }\r\n  }\r\n\r\n\r\n}","export class VE_StringFormat {\r\n\r\n  private static _illegalChar: { [key: string]: boolean } = {};\r\n  private static _formulaChar: { [key: string]: boolean } = {};\r\n  private static _escapeCharacters: { [key: string]: string } = {};\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public static init() {\r\n    this._escapeCharacters['n'] = '\\n';\r\n    this._escapeCharacters['b'] = '\\b';\r\n    this._escapeCharacters['r'] = '\\r';\r\n    this._escapeCharacters['t'] = '\\t';\r\n    this._escapeCharacters['v'] = '\\v';\r\n    this._escapeCharacters['f'] = '\\f';\r\n    this._escapeCharacters['0'] = '\\0';\r\n\r\n    this._illegalChar['='] = true;\r\n    this._illegalChar[','] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar[':'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['*'] = true;\r\n    this._illegalChar['('] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar[')'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['@'] = true;\r\n    this._illegalChar['#'] = true;\r\n    this._illegalChar['$'] = true;\r\n    this._illegalChar['%'] = true;\r\n    this._illegalChar['&'] = true;\r\n    this._illegalChar['^'] = true;\r\n    this._illegalChar['-'] = true;\r\n    this._illegalChar['+'] = true;\r\n    this._illegalChar['|'] = true;\r\n    this._illegalChar['/'] = true;\r\n    this._illegalChar['['] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar[']'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['{'] = true;\r\n    this._illegalChar['}'] = true;\r\n    this._illegalChar['.'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['<'] = true;\r\n    this._illegalChar['>'] = true;\r\n    this._illegalChar[';'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['?'] = true;\r\n    this._illegalChar['\\\"'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['\\''] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['!'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['`'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['~'] = true;\r\n\r\n    this._formulaChar['('] = true; this._formulaChar[')'] = true; this._formulaChar[''] = true; this._formulaChar[''] = true;\r\n    this._formulaChar['!'] = true; this._formulaChar[''] = true;\r\n    this._formulaChar['^'] = true; this._formulaChar['%'] = true; this._formulaChar['&'] = true; this._formulaChar['-'] = true; this._formulaChar['+'] = true; this._formulaChar['='] = true;\r\n    this._formulaChar['<'] = true; this._formulaChar['>'] = true; this._formulaChar['|'] = true;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param para_str \r\n   */\r\n  public static strEscapeCharacterAction(para_str: string): string {\r\n    let tmpStr: string = \"\";\r\n    for (let i: number = 0; i < para_str.length; i++) {\r\n      if (para_str[i] == '\\\\' && i != para_str.length - 1) {\r\n        tmpStr += this.getEscapeCharacter(para_str[i + 1]);\r\n        i++;\r\n      }\r\n      else {\r\n        tmpStr += para_str[i];\r\n      }\r\n    }\r\n    return tmpStr;\r\n  }\r\n\r\n  /**\r\n   *  \r\n   * @param para_str \r\n   */\r\n  public static strSubsectionAction(para_str: string): string[] {\r\n    let strBuilder: string = '';\r\n    let rStr: string[] = [];\r\n    let bracketFlag: boolean = false;\r\n    let hasQuote: boolean = false;\r\n    for (let i: number = 0; i < para_str.length; i++) {\r\n      if (para_str[i] == '\\\\') {\r\n        if (i < para_str.length - 1) {\r\n          strBuilder += para_str[i + 1];\r\n          i++;\r\n          continue;\r\n        }\r\n        else {\r\n          strBuilder += para_str[i];\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (!hasQuote && (para_str[i] === '\\\"' || para_str[i] === '')) {\r\n        hasQuote = true;\r\n        bracketFlag = true;\r\n        strBuilder += '\\\"';\r\n      }\r\n      else if (hasQuote && (para_str[i] === '\\\"' || para_str[i] === '')) {\r\n        strBuilder += '\\\"';\r\n        bracketFlag = false;\r\n        hasQuote = false;\r\n        if (strBuilder !== '') {\r\n          rStr.push(strBuilder);\r\n        }\r\n        strBuilder = '';\r\n      }\r\n      else if (para_str[i] === ',' || para_str[i] === '') {\r\n        if (!bracketFlag) {\r\n          if (strBuilder !== \"\") {\r\n            rStr.push(strBuilder);\r\n          }\r\n          strBuilder = '';\r\n        }\r\n        else {\r\n          strBuilder += para_str[i];\r\n        }\r\n      }\r\n      else if (para_str[i] === ' ') {\r\n        continue;\r\n      }\r\n      else {\r\n        strBuilder += para_str[i];\r\n      }\r\n    }\r\n    if (strBuilder !== \"\") {\r\n      rStr.push(strBuilder);\r\n    }\r\n    return rStr;\r\n  }\r\n\r\n\r\n  private static getEscapeCharacter(para_char: string): string {\r\n    if (this._escapeCharacters[para_char])\r\n      return this._escapeCharacters[para_char];\r\n    else\r\n      return para_char;\r\n  }\r\n\r\n  private static getEscapeCharacter2(para_char: string, is_escape: boolean[]): string {\r\n    if (this._escapeCharacters[para_char]) {\r\n      is_escape[0] = true;\r\n      return this._escapeCharacters[para_char];\r\n    }\r\n    else {\r\n      is_escape[0] = false;\r\n      return para_char;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \"XXX\"\"XXX\"XXX\r\n   * @param para_str \r\n   */\r\n  public static strSubsection(para_str: string): string[] {\r\n    let strBuilder: string = '';\r\n    let rStr: string[] = [];\r\n    let bracketFlag: boolean = false;\r\n    let needSpace: boolean = false;\r\n    for (let i: number = 0; i < para_str.length; i++) {\r\n      if (para_str[i] == '\\\\') {\r\n        if (i < para_str.length - 1) {\r\n          strBuilder += this.getEscapeCharacter(para_str[i + 1]);\r\n          i++;\r\n          continue;\r\n        }\r\n        else {\r\n          strBuilder += para_str[i];\r\n          break;\r\n        }\r\n      }\r\n      if (para_str[i] === '(' || para_str[i] === '' || para_str[i] === '\\\"' || para_str[i] === '') {\r\n        bracketFlag = true;\r\n        needSpace = false;\r\n      }\r\n      else if (para_str[i] === ')' || para_str[i] === '' || para_str[i] === '\\\"' || para_str[i] === '') {\r\n        bracketFlag = false;\r\n        if (strBuilder !== \"\") {\r\n          rStr.push(strBuilder);\r\n        }\r\n        strBuilder = '';\r\n        needSpace = false;\r\n      }\r\n      else if (para_str[i] === ',' || para_str[i] === '') {\r\n        if (!bracketFlag) {\r\n          if (strBuilder !== \"\") {\r\n            rStr.push(strBuilder);\r\n          }\r\n          strBuilder = '';\r\n        }\r\n        else {\r\n          strBuilder += para_str[i];\r\n        }\r\n        needSpace = false;\r\n      }\r\n      else if (para_str[i] === ' ' && !needSpace) {\r\n        continue;\r\n      }\r\n      else {\r\n        strBuilder += para_str[i];\r\n        needSpace = true;\r\n      }\r\n    }\r\n    if (strBuilder !== \"\") {\r\n      rStr.push(strBuilder);\r\n    }\r\n    return rStr;\r\n  }\r\n\r\n  /**\r\n   * $\r\n   * @param project_name \r\n   * @param para_array \r\n   */\r\n  public static getParaArrayAll(project_name: string, para_array: string[]): string[] {\r\n    let coloneStr: string[] = para_array.slice();\r\n    for (let i: number = 0; i < coloneStr.length; i++) {\r\n      if (coloneStr[i].startsWith(\"$\")) {\r\n        //\r\n        if (coloneStr[i].indexOf(\",\") > -1 || coloneStr[i].indexOf(\"\")) {\r\n          let paraArray: string[] = coloneStr[i].split(/,|/);\r\n          paraArray = this.getParaArrayAll(project_name, paraArray);\r\n          let newPara: string = '';\r\n          for (let j: number = 0; j < paraArray.length; j++) {\r\n            if (j === paraArray.length - 1) {\r\n              newPara += paraArray[j];\r\n            }\r\n            else {\r\n              newPara += paraArray[j];\r\n              newPara += \",\";\r\n            }\r\n          }\r\n          coloneStr[i] = newPara;\r\n        }\r\n        else {\r\n          // TODO\r\n          console.error(\"\" + coloneStr[i] + \"\");\r\n        }\r\n      }\r\n      else if (coloneStr[i].startsWith(\"%\")) {\r\n        //\r\n        if (coloneStr[i].indexOf(\",\") > -1 || coloneStr[i].indexOf(\"\") > -1) {\r\n          let paraArray: string[] = coloneStr[i].split(/,|/);\r\n          paraArray = this.getParaArrayAll(project_name, paraArray);\r\n          let newPara: string = '';\r\n          for (let j: number = 0; j < paraArray.length; j++) {\r\n            if (j == paraArray.length - 1) {\r\n              newPara += paraArray[j];\r\n            }\r\n            else {\r\n              newPara += paraArray[j];\r\n              newPara += \",\";\r\n            }\r\n          }\r\n          coloneStr[i] = newPara;\r\n        }\r\n        else {\r\n          // TODO\r\n          console.error(\"\" + coloneStr[i] + \"BlurVar\");\r\n        }\r\n      }\r\n      //\r\n      else if (coloneStr[i].indexOf(\",\") > -1 || coloneStr[i].indexOf(\"\") > -1) {\r\n        let paraArray: string[] = coloneStr[i].split(/,|/);\r\n        paraArray = this.getParaArrayAll(project_name, paraArray);\r\n        let newPara: string = '';\r\n        for (let j: number = 0; j < paraArray.length; j++) {\r\n          if (j == paraArray.length - 1) {\r\n            newPara += paraArray[j];\r\n          }\r\n          else {\r\n            newPara += paraArray[j];\r\n            newPara += \",\";\r\n          }\r\n        }\r\n        coloneStr[i] = newPara;\r\n      }\r\n    }\r\n    return coloneStr;\r\n  }\r\n\r\n  /**\r\n   * \r\n     1\r\n     2\r\n        1\r\n        2 +\r\n        3+ \r\n        412123\r\n    \r\n   * @param para_str \r\n   */\r\n  public static paraSegment(para_str: string): string[] {\r\n    let strBuilder = '';\r\n    let rStr: string[] = [];\r\n    let bracketFlag: boolean = false;\r\n    let innerBracket: number = 0;\r\n    let saveBracket: boolean = false;\r\n\r\n    let quotationMark: boolean = false;\r\n\r\n    for (let i: number = 0; i < para_str.length; i++) {\r\n      //\r\n      if (para_str[i] == '\\\\') {\r\n        if (i < para_str.length - 1) {\r\n          let isEscape: boolean[] = [true];\r\n          let c: string = this.getEscapeCharacter2(para_str[i + 1], isEscape);\r\n          if (isEscape[0]) {\r\n            i++;\r\n            strBuilder += c;\r\n          }\r\n          else {\r\n            i++;\r\n            strBuilder += para_str[i];\r\n          }\r\n          continue;\r\n        }\r\n        else {\r\n          strBuilder += para_str[i];\r\n          break;\r\n        }\r\n      }\r\n      if (para_str[i] === '(' || para_str[i] === '') {\r\n        if (quotationMark) {\r\n          strBuilder += para_str[i];\r\n        }\r\n        else {\r\n          if (bracketFlag) {\r\n            innerBracket++;\r\n            strBuilder += para_str[i];\r\n          }\r\n          else if (strBuilder.trim() !== \"\") {\r\n            strBuilder += para_str[i];\r\n            saveBracket = true;\r\n          }\r\n          else if (i < para_str.length - 1) {\r\n            if (this.needSaveBracket(para_str.substring(i + 1))) {\r\n              strBuilder += para_str[i];\r\n              saveBracket = true;\r\n            }\r\n          }\r\n          bracketFlag = true;\r\n        }\r\n      }\r\n      else if (para_str[i] === ')' || para_str[i] === '') {\r\n        if (quotationMark) {\r\n          strBuilder += para_str[i];\r\n        }\r\n        else {\r\n          if (innerBracket > 0) {\r\n            innerBracket--;\r\n            bracketFlag = true;\r\n            strBuilder += para_str[i];\r\n          }\r\n          else if (bracketFlag && saveBracket) {\r\n            strBuilder += para_str[i];\r\n            saveBracket = false;\r\n            bracketFlag = false;\r\n          }\r\n          else {\r\n            bracketFlag = false;\r\n          }\r\n        }\r\n      }\r\n      else if (para_str[i] === '\"') {\r\n        strBuilder += para_str[i];\r\n        quotationMark = !quotationMark;\r\n      }\r\n      else if (para_str[i] === ',' || para_str[i] === '') {\r\n        if (quotationMark) {\r\n          strBuilder += para_str[i];\r\n        }\r\n        else {\r\n          if (!bracketFlag) {\r\n            if (strBuilder !== \"\") {\r\n              rStr.push(strBuilder.trim());\r\n            }\r\n            strBuilder = '';\r\n          }\r\n          else {\r\n            strBuilder += para_str[i];\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        strBuilder += para_str[i];\r\n      }\r\n    }\r\n    if (strBuilder !== \"\") {\r\n      rStr.push(strBuilder.trim());\r\n    }\r\n    return rStr;\r\n  }\r\n\r\n\r\n  private static needSaveBracket(str: string): boolean {\r\n    let hasBracket: boolean = false;\r\n    let innerBracket: number = 0;\r\n    for (let i: number = 0; i < str.length; i++) {\r\n      if (hasBracket) {\r\n        if (str[i] === ' ') {\r\n          continue;\r\n        }\r\n        else if (str[i] === ',' || str[i] === '') {\r\n          return false;\r\n        }\r\n        else {\r\n          return true;\r\n        }\r\n      }\r\n      else {\r\n        if (str[i] === '(' || str[i] === '') {\r\n          innerBracket++;\r\n        }\r\n        else if (str[i] === ')' || str[i] === '') {\r\n          if (innerBracket > 0) {\r\n            innerBracket--;\r\n          }\r\n          else {\r\n            hasBracket = true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n\r\n  public static isIDLegal(id: string): boolean {\r\n    for (let i: number = 0; i < id.length; i++) {\r\n      if (this._illegalChar[id[i]]) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n\r\n  public static isFormulaString(var_str: string): boolean {\r\n    for (let i: number = 0; i < var_str.length; i++)\r\n    {\r\n      if (this._formulaChar[var_str[i]]) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n\r\n}\r\n\r\nVE_StringFormat.init();\r\n\r\n// console.log(VE_StringFormat.paraSegment(\", Main Camera, *\"));\r\n// console.log(VE_StringFormat.paraSegment(\", *, *, 1, *\"));\r\n\r\n// console.log(VE_StringFormat.paraSegment(\", *, Pin, Example/SpinAPin/Pin , null, (0, -6, 0), (0,0,90),false\"));","import { ErrorInfo } from \"./errorInfo\";\r\n\r\nexport class VE_TypeConvert {\r\n\r\n\r\n  public static boolConvert(info: string, errorInfo: ErrorInfo): boolean {\r\n    info = info.toLowerCase().trim();\r\n    if(info === 'true' || info === '') {\r\n      return true;\r\n    } else if(info === 'false' || info === '') {\r\n      return false;\r\n    } else {\r\n      errorInfo.isRight = false;\r\n      errorInfo.message = 'bool|' + info;\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static intConvert(info: string, errorInfo: ErrorInfo): number {\r\n    info = info.toLowerCase().trim();\r\n    let num: number = parseFloat(info);\r\n    if(isNaN(num)) {\r\n      errorInfo.isRight = false;\r\n      errorInfo.message = 'number|' + info;\r\n      return - 1;\r\n    } else {\r\n      return Math.round(num);\r\n    }\r\n  }\r\n\r\n  public static floatConvert(info: string, errorInfo: ErrorInfo): number {\r\n    info = info.toLowerCase().trim();\r\n    let num: number = parseFloat(info);\r\n    if(isNaN(num)) {\r\n      errorInfo.isRight = false;\r\n      errorInfo.message = 'number|' + info;\r\n      return - 1;\r\n    } else {\r\n      return num;\r\n    }\r\n  }\r\n\r\n\r\n}","export * from './IVeryVar';\r\nexport * from './veryExpression';\r\nexport * from './veryVarManager';\r\nexport * from './veryVariables';\r\nexport * from './variables';\r\nexport * from './varTools';","import { StateConst } from \"../state\";\r\nimport { IVeryVar } from \"./IVeryVar\";\r\nimport { ErrorInfo } from \"../utility\";\r\nimport { VerySceneVariables } from \"../scene\";\r\nimport { VE_Variables } from \"./variables\";\r\nimport { VE_Objects, VeryEngineObject } from \"../object\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { VE_Template } from \"../template\";\r\nimport { VeryExpression } from \"./veryExpression\";\r\n\r\nexport class VarTools {\r\n\r\n  /**\r\n   * ID\r\n   * @param var_id ID\r\n   */\r\n  public static IsVarID(var_id: string): boolean {\r\n    return var_id.indexOf(StateConst.VARIABLE_SYMBOL) > -1;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * 1. * -  ->  -> \r\n   * 2. .* - \r\n   * @param project_name \r\n   * @param object_id \r\n   * @param var_id ID\r\n   * @param error_info \r\n   */\r\n  public static GetVeryVar(project_name: string, object_id: string, var_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (var_id.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n      let varArray: string[] = var_id.split(StateConst.STATE_SEPARATOR);\r\n      if (varArray.length !== 2) {\r\n        error_info.isRight = false;\r\n        error_info.message = \".*ID\" + var_id + \"\";\r\n        return null;\r\n      }\r\n      else {\r\n        for (let i: number = 0; i < varArray.length; i++) {\r\n          varArray[i] = varArray[i].trim();\r\n        }\r\n        // .*\r\n        if (varArray[1].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n          let objects: VE_Objects = VE_Manager.objects(project_name);\r\n          if (objects.isCreated(varArray[0])) {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(varArray[0]);\r\n            let varID: string = varArray[1].substring(1);\r\n            if (veryObject.isCreatedVariable(varID)) {\r\n              return veryObject.getVariable(varID);\r\n            }\r\n            else if (veryObject.isCreatedFsm(varID)) {\r\n              error_info.isRight = false;\r\n              error_info.message = \"ID\" + var_id + \"\";\r\n              return null;\r\n            }\r\n            else if (veryObject.isCreatedExpression(varID)) {\r\n              error_info.isRight = false;\r\n              error_info.message = \"ID\" + var_id + \"\";\r\n              return null;\r\n            }\r\n            else if (veryObject.isCreatedTemplate(varID)) {\r\n              error_info.isRight = false;\r\n              error_info.message = \"ID\" + var_id + \"\";\r\n              return null;\r\n            }\r\n            else {\r\n              error_info.isRight = false;\r\n              error_info.message = \".*ID\" + var_id + \"\";\r\n              return null;\r\n            }\r\n          }\r\n          else {\r\n            error_info.isRight = false;\r\n            error_info.message = \".*ID\" + var_id + \"\";\r\n            return null;\r\n          }\r\n        }\r\n        else {\r\n          error_info.isRight = false;\r\n          error_info.message = \".*ID\" + var_id + \"\";\r\n          return null;\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      // *\r\n      if (var_id.startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n        var_id = var_id.substring(1);\r\n        let objects: VE_Objects = VE_Manager.objects(project_name);\r\n        if (objects.isCreated(object_id)) {\r\n          let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n          if (veryObject.isCreatedVariable(var_id)) {\r\n            return veryObject.getVariable(var_id);\r\n          }\r\n          else if (veryObject.isCreatedFsm(var_id)) {\r\n            error_info.isRight = false;\r\n            error_info.message = \"ID\" + var_id + \"\";\r\n            return null;\r\n          }\r\n          else if (veryObject.isCreatedExpression(var_id)) {\r\n            error_info.isRight = false;\r\n            error_info.message = \"ID\" + var_id + \"\";\r\n            return null;\r\n          }\r\n          else if (veryObject.isCreatedTemplate(var_id)) {\r\n            error_info.isRight = false;\r\n            error_info.message = \"ID\" + var_id + \"\";\r\n            return null;\r\n          }\r\n          else {\r\n            return VarTools.GetGlobalVar(VE_Manager.variables(project_name), var_id, error_info);\r\n          }\r\n        }\r\n        else {\r\n          return VarTools.GetGlobalVar(VE_Manager.variables(project_name), var_id, error_info);\r\n        }\r\n      }\r\n      else {\r\n        error_info.isRight = false;\r\n        error_info.message = \"*ID\" + var_id + \"\";\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param global_vars \r\n   * @param var_id ID\r\n   * @param error_info \r\n   */\r\n  public static GetGlobalVar(global_vars: VE_Variables, var_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (global_vars.isCreatedVariable(var_id)) {\r\n      return global_vars.getVariable(var_id);\r\n    }\r\n    else if (global_vars.isCreatedExpression(var_id)) {\r\n      error_info.isRight = false;\r\n      error_info.message = \"ID\" + var_id + \"\";\r\n      return null;\r\n    }\r\n    else if (global_vars.isCreatedTemplate(var_id)) {\r\n      error_info.isRight = false;\r\n      error_info.message = \"ID\" + var_id + \"\";\r\n      return null;\r\n    }\r\n    else {\r\n      return VarTools.GetSceneVar(var_id, error_info);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param var_id ID\r\n   * @param error_info \r\n   */\r\n  public static GetSceneVar(var_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (VerySceneVariables.Variables.isCreatedVariable(var_id)) {\r\n      return VerySceneVariables.Variables.getVariable(var_id);\r\n    }\r\n    else if (VerySceneVariables.Variables.isCreatedExpression(var_id)) {\r\n      error_info.isRight = false;\r\n      error_info.message = \"ID\" + var_id + \"\";\r\n      return null;\r\n    }\r\n    else {\r\n      error_info.isRight = false;\r\n      error_info.message = \"ID\" + var_id + \"\";\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * 1. * -  -> \r\n   * 2. .* - \r\n   * @param project_name \r\n   * @param object_id \r\n   * @param var_id ID\r\n   * @param error_info \r\n   */\r\n  public static GetTemplate(project_name: string, object_id: string, var_id: string, error_info: ErrorInfo): Nullable<VE_Template> {\r\n    if (var_id.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n      let varArray: string[] = var_id.split(StateConst.STATE_SEPARATOR);\r\n      if (varArray.length !== 2) {\r\n        error_info.isRight = false;\r\n        error_info.message = \".*ID\" + var_id + \"\";\r\n        return null;\r\n      }\r\n      else {\r\n        for (let i: number = 0; i < varArray.length; i++) {\r\n          varArray[i] = varArray[i].trim();\r\n        }\r\n        // .*\r\n        if (varArray[1].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n          let objects: VE_Objects = VE_Manager.objects(project_name);\r\n          if (objects.isCreated(varArray[0])) {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(varArray[0]);\r\n            let varID: string = varArray[1].substring(1);\r\n            if (veryObject.isCreatedTemplate(varID)) {\r\n              return veryObject.getTemplate(varID);\r\n            }\r\n            else {\r\n              error_info.isRight = false;\r\n              error_info.message = \".*ID\" + var_id + \"\";\r\n              return null;\r\n            }\r\n          }\r\n          else {\r\n            error_info.isRight = false;\r\n            error_info.message = \".*ID\" + var_id + \"\";\r\n            return null;\r\n          }\r\n        }\r\n        else {\r\n          error_info.isRight = false;\r\n          error_info.message = \".*ID\" + var_id + \"\";\r\n          return null;\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      // *\r\n      if (var_id.startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n        var_id = var_id.substring(1);\r\n        let objects: VE_Objects = VE_Manager.objects(project_name);\r\n        if (objects.isCreated(object_id)) {\r\n          let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n          if (veryObject.isCreatedTemplate(var_id)) {\r\n            return veryObject.getTemplate(var_id);\r\n          }\r\n        }\r\n        let globalVars: VE_Variables = VE_Manager.variables(project_name);\r\n        if (globalVars.isCreatedTemplate(var_id)) {\r\n          return globalVars.getTemplate(var_id);\r\n        }\r\n        else {\r\n          error_info.isRight = false;\r\n          error_info.message = \"*ID\" + var_id + \"\";\r\n          return null;\r\n        }\r\n      }\r\n      else {\r\n        error_info.isRight = false;\r\n        error_info.message = \"*ID\" + var_id + \"\";\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public static GetVeryVarWithExpression(project_name: string, object_id: string, var_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (var_id.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n      let varArray: string[] = var_id.split(StateConst.STATE_SEPARATOR);\r\n      if (varArray.length !== 2) {\r\n        error_info.isRight = false;\r\n        error_info.message = \".*ID\" + var_id + \"\";\r\n        return null;\r\n      }\r\n      else {\r\n        for (let i: number = 0; i < varArray.length; i++) {\r\n          varArray[i] = varArray[i].trim();\r\n        }\r\n        // .*\r\n        if (varArray[1].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n          let objects: VE_Objects = VE_Manager.objects(project_name);\r\n          if (objects.isCreated(varArray[0])) {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(varArray[0]);\r\n            let varID: string = varArray[1].substring(1);\r\n            if (veryObject.isCreatedVariable(varID)) {\r\n              return veryObject.getVariable(varID);\r\n            }\r\n            else if (veryObject.isCreatedFsm(varID)) {\r\n              return veryObject.getFsm(varID).fsmVar;\r\n            }\r\n            else if (veryObject.isCreatedExpression(varID)) {\r\n              return new VeryExpression(veryObject.getExpression(varID));\r\n            }\r\n            else if (veryObject.isCreatedTemplate(varID)) {\r\n              error_info.isRight = false;\r\n              error_info.message = \"ID\" + var_id + \"\";\r\n              return null;\r\n            }\r\n            else {\r\n              error_info.isRight = false;\r\n              error_info.message = \".*ID\" + var_id + \"\";\r\n              return null;\r\n            }\r\n          }\r\n          else {\r\n            error_info.isRight = false;\r\n            error_info.message = \".*ID\" + var_id + \"\";\r\n            return null;\r\n          }\r\n        }\r\n        else {\r\n          error_info.isRight = false;\r\n          error_info.message = \".*ID\" + var_id + \"\";\r\n          return null;\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      // *\r\n      if (var_id.startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n        var_id = var_id.substring(1);\r\n        let objects: VE_Objects = VE_Manager.objects(project_name);\r\n        if (objects.isCreated(object_id)) {\r\n          let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n          if (veryObject.isCreatedVariable(var_id)) {\r\n            return veryObject.getVariable(var_id);\r\n          }\r\n          else if (veryObject.isCreatedFsm(var_id)) {\r\n            return veryObject.getFsm(var_id).fsmVar;\r\n          }\r\n          else if (veryObject.isCreatedExpression(var_id)) {\r\n            return new VeryExpression(veryObject.getExpression(var_id));\r\n          }\r\n          else if (veryObject.isCreatedTemplate(var_id)) {\r\n            error_info.isRight = false;\r\n            error_info.message = \"ID\" + var_id + \"\";\r\n            return null;\r\n          }\r\n          else {\r\n            return VarTools.GetGlobalVarWithExpression(VE_Manager.variables(project_name), var_id, error_info);\r\n          }\r\n        }\r\n        else {\r\n          return VarTools.GetGlobalVarWithExpression(VE_Manager.variables(project_name), var_id, error_info);\r\n        }\r\n      }\r\n      else {\r\n        error_info.isRight = false;\r\n        error_info.message = \"*ID\" + var_id + \"\";\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public static GetGlobalVarWithExpression(global_vars: VE_Variables, var_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (global_vars.isCreatedVariable(var_id)) {\r\n      return global_vars.getVariable(var_id);\r\n    }\r\n    else if (global_vars.isCreatedExpression(var_id)) {\r\n      return new VeryExpression(global_vars.getExpression(var_id));\r\n    }\r\n    else if (global_vars.isCreatedTemplate(var_id)) {\r\n      error_info.isRight = false;\r\n      error_info.message = \"ID\" + var_id + \"\";\r\n      return null;\r\n    }\r\n    else {\r\n      return VarTools.GetSceneVarWithExpression(var_id, error_info);\r\n    }\r\n  }\r\n\r\n  public static GetSceneVarWithExpression(var_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (VerySceneVariables.Variables.isCreatedVariable(var_id)) {\r\n      return VerySceneVariables.Variables.getVariable(var_id);\r\n    }\r\n    else if (VerySceneVariables.Variables.isCreatedExpression(var_id)) {\r\n      return new VeryExpression(VerySceneVariables.Variables.getExpression(var_id));\r\n    }\r\n    else {\r\n      error_info.isRight = false;\r\n      error_info.message = \"ID\" + var_id + \"\";\r\n      return null;\r\n    }\r\n  }\r\n\r\n}","import { VE_VariableData } from \"../dataSource\";\r\nimport { IVeryVar } from \"./IVeryVar\";\r\nimport { VE_Template } from \"../template\";\r\nimport { IExpression } from \"../expression\";\r\n\r\nexport class VE_Variables {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  public varData: VE_VariableData;\r\n\r\n  private _veryVars: { [key: string]: IVeryVar } = {};\r\n  private _tempalteVars: { [key: string]: VE_Template } = {};\r\n  private _expressions: { [key: string]: IExpression } = {};\r\n\r\n  constructor(project_name: string) {\r\n    this._projectName = project_name;\r\n    this.varData = new VE_VariableData(project_name);\r\n  }\r\n\r\n  public isCreated(id: string): boolean {\r\n    if(this._veryVars[id] || this._tempalteVars[id] || this._expressions[id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isCreatedVariable(id: string): boolean {\r\n    if(this._veryVars[id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addVariable(id: string, very_var: IVeryVar): void {\r\n    this._veryVars[id] = very_var;\r\n  }\r\n\r\n  public getVariable(id: string): IVeryVar {\r\n    return this._veryVars[id];\r\n  }\r\n\r\n  public isCreatedTemplate(id: string): boolean {\r\n    if(this._tempalteVars[id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTemplate(id: string, template: VE_Template): void {\r\n    this._tempalteVars[id] = template;\r\n  }\r\n\r\n  public getTemplate(id: string): VE_Template {\r\n    return this._tempalteVars[id];\r\n  }\r\n\r\n  public isCreatedExpression(id: string): boolean {\r\n    if(this._expressions[id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addExpression(id: string, exp: IExpression): void {\r\n    this._expressions[id] = exp;\r\n  }\r\n\r\n  public getExpression(id: string): IExpression {\r\n    return this._expressions[id];\r\n  }\r\n\r\n\r\n  public clear(): void {\r\n    if(this.varData) {\r\n      this.varData.clear();\r\n    }\r\n    this._veryVars = {};\r\n    this._expressions = {};\r\n    this._tempalteVars = {};\r\n  }\r\n\r\n\r\n\r\n}","import { IVeryVar } from \"./IVeryVar\";\r\nimport { IExpression, ConstantExpression } from \"../expression\";\r\nimport { ErrorInfo } from \"../utility\";\r\n\r\nexport class VeryExpression implements IVeryVar {\r\n  public get varType(): string {\r\n    return this._value.expType;\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"VeryExpression\";\r\n  }\r\n\r\n  public get ID(): string {\r\n    return \"VeryExpression|\";\r\n  }\r\n\r\n  public get value(): IExpression {\r\n    return this._value;\r\n  }\r\n  public set value(val: IExpression) {\r\n    this._value = val;\r\n  }\r\n  private _value: IExpression = ConstantExpression.Empty();\r\n\r\n  public get isNull(): boolean {\r\n    return this._value === null;\r\n  }\r\n\r\n  constructor(val: IExpression) {\r\n    this._value = val;\r\n  }\r\n\r\n  public setValue(val: any) {\r\n    this._value = val;\r\n  }\r\n\r\n  // \r\n  public getValue(): any {\r\n    return this._value.evaluate();\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n    let newVal = parseFloat(value_str);\r\n    if (!isNaN(newVal)) {\r\n      return newVal;\r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message =\r\n        \": \" +\r\n        this.varType +\r\n        \"\" +\r\n        value_str +\r\n        \"\";\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    return new VeryExpression(this._value);\r\n  }\r\n}","import { ShowError } from \"../html/showError\";\r\nimport { IVeryVar } from \"./IVeryVar\";\r\nimport { ErrorInfo } from \"../utility\";\r\nimport { VE_Variables } from \"./variables\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { VE_Objects, VeryEngineObject } from \"../object\";\r\nimport { VE_Template } from \"../template\";\r\nimport { GameGlobal, VE_ErrorManager, VE_Error } from \"../global\";\r\nimport { VeryExpression } from \"./veryExpression\";\r\nimport { Severity } from \"../enum\";\r\n\r\nexport class VeryVarManager {\r\n\r\n  // private static _veryVarTypes: { [key: string]: IVeryVar } = {};\r\n\r\n  private static _veryVarFunctions: { [key: string]: Function } = {};\r\n\r\n  public static hasVarType(var_type: string): boolean {\r\n    var_type = var_type.toLowerCase();\r\n    if (this._veryVarFunctions[var_type]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // public static addVarType(var_type: string, var_prototype: IVeryVar): void {\r\n  //   // \r\n  //   if (!GameGlobal.PlatformLoaded) {\r\n  //     var_type = var_type.toLowerCase().trim();\r\n  //     // \r\n  //     if (this._veryVarTypes[var_type]) {\r\n  //       ShowError.showError('VeryVar' + var_type + '' + var_prototype.className);\r\n  //     } else {\r\n  //       // console.log(var_proto.VarType);\r\n  //       this._veryVarTypes[var_type] = var_prototype;\r\n  //       // let a = Object.create(this.GetVarType(var_type));\r\n  //       // console.log(a.Value);\r\n  //       // a.Value = true;\r\n  //       // console.log(a.Value);\r\n  //       // a.Value = 1234;\r\n  //       // console.log(a.getValue());\r\n  //       // console.log(this.GetVarType(var_type).__proto__);\r\n  //     }\r\n  //   }\r\n  // }\r\n\r\n  public static addVarType(var_function: Function): void {\r\n    // \r\n    if (!GameGlobal.PlatformLoaded) {\r\n      let tempVar: any = new var_function.prototype.constructor();\r\n      // console.log(`ID  ${tempVar.ID}  ${tempVar.className} `);\r\n      let ids: string[] = tempVar.ID.split('|');\r\n      for (let i: number = 0; i < ids.length; i++) {\r\n        let id: string = ids[i].trim().toLowerCase();\r\n        if (this._veryVarFunctions[id]) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}${tempVar.className}`, '', Severity.Error));\r\n        } else {\r\n          this._veryVarFunctions[id] = var_function;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public static createVariable(var_id: string, var_type: string, value: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    var_type = var_type.toLowerCase();\r\n    if (!this._veryVarFunctions[var_type]) {\r\n      error_info.isRight = false;\r\n      error_info.message = `` + var_type;\r\n      return null;\r\n    }\r\n\r\n    let variable: any;\r\n    try {\r\n      // variable = Object.create(this.getVarType(var_type));\r\n      // newObject.createprototype\r\n      variable = new this._veryVarFunctions[var_type].prototype.constructor();\r\n\r\n      if (!variable) {\r\n        error_info.isRight = false;\r\n        error_info.message = '' + var_type;\r\n        return null;\r\n      }\r\n      let result: any = (<IVeryVar>variable).initValue(value, error_info);\r\n      if (error_info.isRight) {\r\n        (<IVeryVar>variable).setValue(result);\r\n        return <IVeryVar>variable;\r\n      } else {\r\n        return null;\r\n      }\r\n    } catch (error) {\r\n      console.log(`${error.message}`);\r\n      error_info.isRight = false;\r\n      error_info.message = '' + var_type + '' + error.message;\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static getVarType(var_type: string): any {\r\n    var_type = var_type.toLowerCase();\r\n    if (this._veryVarFunctions && this._veryVarFunctions[var_type]) {\r\n      return this._veryVarFunctions[var_type];\r\n    }\r\n    return null;\r\n  }\r\n\r\n\r\n  public static remove(var_type: string): void {\r\n    var_type = var_type.toLowerCase();\r\n    delete this._veryVarFunctions[var_type];\r\n  }\r\n\r\n  // *\r\n  // .*\r\n  public static getVariable(var_id: string, project_name: string, object_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (project_name === '') {\r\n      return this.getSceneVariable(var_id, error_info);\r\n    } else if (object_id === '') {\r\n      return this.getGlobalVariable(var_id, project_name, error_info);\r\n    } else {\r\n      let objects: VE_Objects = VE_Manager.objects(project_name);\r\n      if (objects) {\r\n        let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n        if (veryObject) {\r\n          if (veryObject.isCreatedVariable(var_id)) {\r\n            return veryObject.getVariable(var_id);\r\n          } else if (veryObject.isCreatedExpression(var_id)) {\r\n            return new VeryExpression(veryObject.getExpression(var_id));\r\n          } else if (veryObject.isCreatedFsm(var_id)) {\r\n            return veryObject.getFsm(var_id).fsmVar;\r\n          } else {\r\n            return this.getGlobalVariable(var_id, project_name, error_info);\r\n          }\r\n        } else {\r\n          return this.getGlobalVariable(var_id, project_name, error_info);\r\n        }\r\n      } else {\r\n        return this.getGlobalVariable(var_id, project_name, error_info);\r\n      }\r\n    }\r\n  }\r\n\r\n  // *.*\r\n  // .*.*\r\n  public static getTemplateVariable(template_var_id: string, var_id: string, project_name: string, object_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (project_name === '') {\r\n      // \r\n      error_info.isRight = false;\r\n      error_info.message = \"\" + template_var_id + \"\\n\";\r\n      return null;\r\n    }\r\n    else {\r\n      if (object_id !== '')  //\r\n      {\r\n        let objects: VE_Objects = VE_Manager.objects(project_name);\r\n        if (!objects) {\r\n          error_info.isRight = false;\r\n          error_info.message += \"\" + object_id + \"\\n\";\r\n          return null;\r\n        }\r\n        else {\r\n          if (objects.isCreated(object_id)) {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n            if (veryObject.isCreatedTemplate(template_var_id)) {\r\n              let template: VE_Template = veryObject.getTemplate(template_var_id);\r\n              if (template.templateInstance === null) {\r\n                error_info.isRight = false;\r\n                error_info.message += \"\" + template_var_id + \"\\n\";\r\n                return null;\r\n              }\r\n              else {\r\n                if (template.templateInstance.isCreatedVariable(var_id)) {\r\n                  return template.templateInstance.getVariable(var_id);\r\n                }\r\n                else if (template.templateInstance.isCreatedExpression(var_id)) {\r\n                  return new VeryExpression(template.templateInstance.getExpression(var_id));\r\n                }\r\n                else if (template.templateInstance.isCreatedFsm(var_id)) {\r\n                  return template.templateInstance.getFsm(var_id).fsmVar;\r\n                }\r\n                else {\r\n                  error_info.isRight = false;\r\n                  error_info.message += \"\" + template_var_id + \"\" + var_id + \"\\n\";\r\n                  return null;\r\n                }\r\n              }\r\n            }\r\n            else {\r\n              error_info.isRight = false;\r\n              error_info.message += \"\" + template_var_id + \"\\n\";\r\n              return null;\r\n            }\r\n          }\r\n          else {\r\n            error_info.isRight = false;\r\n            error_info.message += \"\" + object_id + \"\\n\";\r\n            return null;\r\n          }\r\n        }\r\n      }\r\n      // \r\n      else {\r\n        let variables: VE_Variables = VE_Manager.variables(project_name);\r\n        if (!variables) {\r\n          error_info.isRight = false;\r\n          error_info.message += \"\" + template_var_id + \"\\n\";\r\n          return null;\r\n        }\r\n        else {\r\n          if (variables.isCreatedTemplate(template_var_id)) {\r\n            let template: VE_Template = variables.getTemplate(template_var_id);\r\n            if (template.templateInstance === null) {\r\n              error_info.isRight = false;\r\n              error_info.message += \"\" + template_var_id + \"\\n\";\r\n              return null;\r\n            }\r\n            else {\r\n              if (template.templateInstance.isCreatedVariable(var_id)) {\r\n                return template.templateInstance.getVariable(var_id);\r\n              }\r\n              else if (template.templateInstance.isCreatedExpression(var_id)) {\r\n                return new VeryExpression(template.templateInstance.getExpression(var_id));\r\n              }\r\n              else if (template.templateInstance.isCreatedFsm(var_id)) {\r\n                return template.templateInstance.getFsm(var_id).fsmVar;\r\n              }\r\n              else {\r\n                error_info.isRight = false;\r\n                error_info.message += \"\" + template_var_id + \"\" + var_id + \"\\n\";\r\n                return null;\r\n              }\r\n            }\r\n          }\r\n          else {\r\n            error_info.isRight = false;\r\n            error_info.message += \"\" + template_var_id + \"\\n\";\r\n            return null;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public static getGlobalVariable(var_id: string, project_name: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (project_name === '') {\r\n      return this.getSceneVariable(var_id, error_info);\r\n    } else {\r\n      let variables: VE_Variables = VE_Manager.variables(project_name);\r\n      if (variables) {\r\n        if (variables.isCreatedVariable(var_id)) {\r\n          return variables.getVariable(var_id);\r\n        } else if (variables.isCreatedExpression(var_id)) {\r\n          return new VeryExpression(variables.getExpression(var_id));\r\n        } else {\r\n          return this.getSceneVariable(var_id, error_info);\r\n        }\r\n      } else {\r\n        return this.getSceneVariable(var_id, error_info);\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public static getSceneVariable(var_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    error_info.isRight = false;\r\n    error_info.message = ''\r\n    return null;\r\n  }\r\n\r\n  public static dispose(): void {\r\n    VeryVarManager._veryVarFunctions = {};\r\n  }\r\n}\r\n","import { IVeryVar } from \"./IVeryVar\";\r\nimport { ErrorInfo } from \"../utility/errorInfo\";\r\nimport { VeryVarManager } from \"./veryVarManager\";\r\nimport { GameObject } from \"../babylon/babylonVariables\";\r\nimport { VeryExpression } from \"./veryExpression\";\r\n\r\nexport class VeryBool implements IVeryVar {\r\n  public get varType(): string {\r\n    return \"bool\";\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"VeryBool\";\r\n  }\r\n\r\n  public get ID(): string {\r\n    return 'bool|';\r\n  }\r\n\r\n  private _isExpression: boolean = false;\r\n  private _expression: Nullable<VeryExpression> = null;\r\n\r\n  public get value(): boolean {\r\n    if (this._isExpression) {\r\n      return this._expression!.value.evaluate();\r\n    }\r\n    return this._value;\r\n  }\r\n  public set value(val: boolean) {\r\n    this._value = val;\r\n  }\r\n  private _value: boolean = false;\r\n\r\n  constructor() {\r\n    this._value = false;\r\n  }\r\n\r\n  public setValue(val: any): void {\r\n    this._value = val;\r\n  }\r\n\r\n  public getValue(): any {\r\n    if (this._isExpression) {\r\n      return this._expression!.value.evaluate();\r\n    }\r\n    return this._value;\r\n  }\r\n\r\n  public setExpression(expression: VeryExpression): void {\r\n    this._expression = expression;\r\n    this._isExpression = true;\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n    value_str = value_str.trim();\r\n    if (value_str.toLowerCase() === \"false\" || value_str === \"\") {\r\n      return false;\r\n    } else if (value_str.toLowerCase() === \"true\" || value_str === \"\") {\r\n      return true;\r\n    } else if (\r\n      value_str === \"\" ||\r\n      value_str.toLowerCase() === \"null\" ||\r\n      value_str.toLowerCase() === \"none\"\r\n    ) {\r\n      return false;\r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message =\r\n        \": \" +\r\n        this.varType +\r\n        \"\" +\r\n        value_str +\r\n        \"\";\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    let varClone: VeryBool = new VeryBool();\r\n    varClone.setValue(this._value);\r\n    return varClone;\r\n  }\r\n}\r\n\r\nexport class VeryNumber implements IVeryVar {\r\n  public get varType(): string {\r\n    return \"number\";\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"VeryNumber\";\r\n  }\r\n\r\n  public get ID(): string {\r\n    return 'number|';\r\n  }\r\n\r\n  private _isExpression: boolean = false;\r\n  private _expression: Nullable<VeryExpression> = null;\r\n\r\n  public get value(): number {\r\n    if (this._isExpression && this._expression) {\r\n      return this._expression.value.evaluate();\r\n    }\r\n    return this._value;\r\n  }\r\n  public set value(val: number) {\r\n    this._value = val;\r\n  }\r\n  private _value: number = 0;\r\n\r\n  constructor() {\r\n    this._value = 0;\r\n  }\r\n\r\n  public setValue(val: number): void {\r\n    this._value = val;\r\n  }\r\n\r\n  public setExpression(expression: VeryExpression): void {\r\n    this._expression = expression;\r\n    this._isExpression = true;\r\n  }\r\n\r\n  public getValue(): any {\r\n    if (this._isExpression && this._expression) {\r\n      return this._expression.value.evaluate();\r\n    }\r\n    return this._value;\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n    let newVal = parseFloat(value_str);\r\n    if (!isNaN(newVal)) {\r\n      return newVal;\r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message =\r\n        \": \" +\r\n        this.varType +\r\n        \"\" +\r\n        value_str +\r\n        \"\";\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    let varClone: VeryNumber = new VeryNumber();\r\n    varClone.setValue(this._value);\r\n    return varClone;\r\n  }\r\n}\r\n\r\nexport class VeryString implements IVeryVar {\r\n  public get varType(): string {\r\n    return \"string\";\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"VeryString\";\r\n  }\r\n\r\n  public get ID(): string {\r\n    return 'string|';\r\n  }\r\n\r\n  private _isExpression: boolean = false;\r\n  private _expression: Nullable<VeryExpression> = null;\r\n\r\n  public get value(): string {\r\n    if (this._isExpression) {\r\n      return this._expression!.value.evaluate().toString();\r\n    }\r\n    return this._value;\r\n  }\r\n  public set value(val: string) {\r\n    this._value = val;\r\n  }\r\n  private _value: string = \"\";\r\n\r\n  constructor() {\r\n    this._value = \"\";\r\n  }\r\n\r\n  public getValue(): any {\r\n    if (this._isExpression) {\r\n      return this._expression!.value.evaluate().toString();\r\n    }\r\n    return this._value;\r\n  }\r\n\r\n  public setValue(val: any): void {\r\n    this._value = val;\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n    let rValue: string;\r\n    if (\r\n      value_str.startsWith(\"'\") ||\r\n      value_str.startsWith('\"') ||\r\n      value_str.startsWith(\"\") ||\r\n      value_str.startsWith(\"\")\r\n    ) {\r\n      rValue = value_str.substring(1, value_str.length - 2);\r\n    } else {\r\n      rValue = value_str;\r\n    }\r\n    return rValue;\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    let varClone: VeryString = new VeryString();\r\n    varClone.setValue(this._value);\r\n    return varClone;\r\n  }\r\n\r\n  public setExpression(expression: VeryExpression): void {\r\n    this._isExpression = true;\r\n    this._expression = expression;\r\n  }\r\n}\r\n\r\nexport class VeryVector3 implements IVeryVar {\r\n  public get varType(): string {\r\n    return \"Vector3\";\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"VeryVector3\";\r\n  }\r\n\r\n  public get ID(): string {\r\n    return 'Vector3|';\r\n  }\r\n\r\n  private _isExpression: boolean = false;\r\n  private _expression: Nullable<VeryExpression> = null;\r\n\r\n  public get value(): BABYLON.Vector3 {\r\n    if (this._isExpression && this._expression) {\r\n      return this._expression.value.evaluate();\r\n    }\r\n    return this._value;\r\n  }\r\n  public set value(val: BABYLON.Vector3) {\r\n    this._value = val;\r\n  }\r\n  private _value: BABYLON.Vector3 = BABYLON.Vector3.Zero();\r\n\r\n  constructor() {\r\n    this._value = BABYLON.Vector3.Zero();\r\n  }\r\n\r\n  public getValue(): any {\r\n    if (this._isExpression && this._expression) {\r\n      return this._expression.value.evaluate();\r\n    }\r\n    return this._value;\r\n  }\r\n\r\n  public setValue(val: any) {\r\n    this._value = val;\r\n  }\r\n\r\n  public setExpression(expression: VeryExpression): void {\r\n    this._isExpression = true;\r\n    this._expression = expression;\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n    let rValue: BABYLON.Vector3 = BABYLON.Vector3.Zero();\r\n    if (value_str === \"none\" || value_str === \"null\" || value_str === \"\") {\r\n      return rValue;\r\n    } else {\r\n      let vec3Str: string[] = value_str.split(/,|/);\r\n      if (vec3Str.length !== 3) {\r\n        error_info.isRight = false;\r\n        error_info.message =\r\n          \": \" +\r\n          this.varType +\r\n          \", : \" +\r\n          value_str +\r\n          \"Vector3|\";\r\n        return null;\r\n      } else {\r\n        let n1: number = parseFloat(vec3Str[0]);\r\n        let n2: number = parseFloat(vec3Str[1]);\r\n        let n3: number = parseFloat(vec3Str[2]);\r\n        if (isNaN(n1) || isNaN(n2) || isNaN(n3)) {\r\n          error_info.isRight = false;\r\n          error_info.message =\r\n            \": \" +\r\n            this.varType +\r\n            \", : \" +\r\n            value_str +\r\n            \"Vector3|\";\r\n          return null;\r\n        } else {\r\n          rValue = new BABYLON.Vector3(n1, n2, n3);\r\n        }\r\n      }\r\n    }\r\n    return rValue;\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    let varClone: VeryVector3 = new VeryVector3();\r\n    let r: BABYLON.Vector3 = new BABYLON.Vector3(\r\n      this._value.x,\r\n      this._value.y,\r\n      this._value.z\r\n    );\r\n    varClone.setValue(r);\r\n    return varClone;\r\n  }\r\n}\r\n\r\nexport class VeryGameObject implements IVeryVar {\r\n  public get varType(): string {\r\n    return \"GameObject\";\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"VeryGameObject\";\r\n  }\r\n\r\n  public get ID(): string {\r\n    return 'GameObject|';\r\n  }\r\n\r\n  public get value(): Nullable<GameObject> {\r\n    return this._value;\r\n  }\r\n  public set value(val: Nullable<GameObject>) {\r\n    this._value = val;\r\n  }\r\n  private _value: Nullable<GameObject> = null;\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public setValue(val: any) {\r\n    this._value = val;\r\n  }\r\n\r\n  // \r\n  public getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n\r\n    if (value_str === '' || value_str.toLowerCase() === 'null' || value_str.toLowerCase() === 'none') {\r\n      return null;\r\n    } else {\r\n      let rValue: Nullable<GameObject> = GameObject.Find(value_str);\r\n      if (rValue === null) {\r\n        error_info.isRight = false;\r\n        error_info.message =\r\n          \": \" +\r\n          this.varType +\r\n          \"\" +\r\n          value_str +\r\n          \"\";\r\n      }\r\n      return rValue;\r\n    }\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    let varClone: VeryGameObject = new VeryGameObject();\r\n    varClone.setValue(this._value);\r\n    return varClone;\r\n  }\r\n}\r\n\r\n\r\nVeryVarManager.addVarType(VeryBool);\r\nVeryVarManager.addVarType(VeryNumber);\r\nVeryVarManager.addVarType(VeryString);\r\nVeryVarManager.addVarType(VeryVector3);\r\nVeryVarManager.addVarType(VeryGameObject);\r\n\r\n","import { VeryTable } from \"../verytable/index\";\r\nimport { ShowError } from \"./html/showError\";\r\nimport { LoaderManager } from \"./loader/loaderManager\";\r\nimport { ErrorInfo } from \"./utility\";\r\nimport { IVeryVar, VeryVarManager, VeryBool } from \"./variables\";\r\nimport { VE_Expressions } from \"./expression\";\r\nimport { VE_ErrorManager, GameGlobal } from \"./global\";\r\nimport { VE_Reset } from \"./manager\";\r\n\r\n// entrance\r\nexport * from \"./index\";\r\n\r\nexport class VeryEngine {\r\n\r\n  \r\n\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n\r\n  public init(data: Array<Array<string>>, project_name: string): void {\r\n\r\n    // \r\n    VE_Reset.dispose();\r\n\r\n    // TODO: sTable1\r\n    let tableData: VeryTable = new VeryTable(data, 'VeRyEngine');\r\n    // console.log(tableData.pos(7, 5));\r\n    // console.log(tableData);\r\n    // console.log('');\r\n\r\n    // VeryVarManager.addVarType('bool', new VeryBool());\r\n\r\n    // let errorInfo: ErrorInfo = new ErrorInfo();\r\n    // let v1: Nullable<IVeryVar> = VeryVarManager.createVariable('a', '', '3.1415926', errorInfo);\r\n    // console.log(v1!.getValue());\r\n    // errorInfo.clear();\r\n    // let v2: Nullable<IVeryVar> = VeryVarManager.createVariable('b', '', '', errorInfo);\r\n    // console.log(v2!.getValue());\r\n    // errorInfo.clear();\r\n    // let v3: Nullable<IVeryVar> = VeryVarManager.createVariable('c', '', '1,2,3', errorInfo);\r\n    // console.log(v3!.clone());\r\n    // errorInfo.clear();\r\n    // let v4: Nullable<IVeryVar> = VeryVarManager.createVariable('c', '', 'ac1,dg2,3', errorInfo);\r\n    // console.log(v4);\r\n    // console.log(errorInfo.message);\r\n\r\n\r\n    let manager: LoaderManager = new LoaderManager();\r\n    let result: boolean = manager.load(projectName, tableData);\r\n    console.log(`${result}`);\r\n    if(!result) {\r\n      VE_ErrorManager.Print();\r\n    }\r\n\r\n    // \r\n    GameGlobal.PlatformLoaded = true;\r\n\r\n\r\n\r\n    // this.showErrorTest(tableData);\r\n  }\r\n\r\n\r\n  public showErrorTest(tableData: VeryTable): void {\r\n    // /*\r\n    ShowError.show('' + tableData.pos(7, 5));\r\n\r\n    ShowError.showError('' + tableData.pos(7, 5));\r\n\r\n    ShowError.showWarn('' + tableData.pos(7, 5));\r\n\r\n    ShowError.show('' + tableData.pos(7, 5));\r\n\r\n    ShowError.show('' + tableData.pos(7, 5));\r\n\r\n\r\n    document.getElementById(\"settingsButton\")!.addEventListener(\"click\", ShowError.close);\r\n    // */\r\n  }\r\n\r\n}","\r\nexport * from \"./veryTableRow\";\r\nexport * from \"./veryTable\";\r\nexport * from \"./veryTableSet\";\r\n","import { VeryTableRow } from \"./veryTableRow\";\r\n\r\nexport class VeryTable {\r\n  private _id: string = \"\";\r\n  public get ID(): string {\r\n    return this._id;\r\n  }\r\n  public set ID(id: string) {\r\n    this._id = id;\r\n  }\r\n\r\n  private _columnIDs: string[] = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];\r\n\r\n  private _rows: VeryTableRow[] = [];\r\n\r\n  public get RowCount(): number {\r\n    if (!this._rows) {\r\n      return 0;\r\n    } else {\r\n      return this._rows.length;\r\n    }\r\n  }\r\n\r\n  constructor(data: string[][], id = \"Sheet\") {\r\n    this._id = id;\r\n    this._rows = [];\r\n    if (data) {\r\n      for (let i = 0; i < data.length; i++) {\r\n        let newRow = new VeryTableRow(data[i]);\r\n        this._rows.push(newRow);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param row_index \r\n   * @param column_index \r\n   */\r\n  public getData(row_index: number, column_index: number): string {\r\n    // if (row_index >= 0 && row_index < this._rows.length) {\r\n    //   let row: VeryTableRow = this._rows[row_index];\r\n    //   return row.getData(column_index);\r\n    // } else {\r\n    //   return undefined;\r\n    // }\r\n    return this._rows[row_index].getData(column_index);\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param row_index \r\n   */\r\n  public getRow(row_index: number): VeryTableRow | undefined {\r\n    if (row_index >= 0 && row_index < this._rows.length) {\r\n      return this._rows[row_index];\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param row_index \r\n   * @param column_index \r\n   */\r\n  public pos(row_index: number, column_index: number): string {\r\n    // return \"\" + this.ID + \"\" + (row_index + 1) + \"\" + this.getColumnID(column_index) + \"\";\r\n    return \"\" + (row_index + 1) + \"\" + this.getColumnID(column_index) + \"\" + this.ID + \"\";\r\n  }\r\n\r\n  /**\r\n   * ID26\r\n   * @param column_index \r\n   */\r\n  private getColumnID(column_index: number): string {\r\n    if (column_index >= 0 && column_index < 26) {\r\n      return this._columnIDs[column_index];\r\n    } else if (column_index < 0) {\r\n      return 'error';\r\n    } else {\r\n      let a: number = Math.floor(column_index / 26);\r\n      let b: number = column_index % 26;\r\n      if (a === 0) {\r\n        return this._columnIDs[a];\r\n      } else {\r\n        return this._columnIDs[a - 1] + this._columnIDs[b];\r\n      }\r\n    }\r\n  }\r\n\r\n  // public addRowStringArray(row_data: string[]): void {\r\n\r\n  // }\r\n\r\n  // public addRowStrings(...strs: string[]): void {\r\n\r\n  // }\r\n\r\n  public addRow(data: VeryTableRow): void {\r\n    // \r\n    this._rows.push(data);\r\n\r\n  }\r\n\r\n\r\n}","\r\nexport class VeryTableRow {\r\n  public get Count(): number {\r\n    if (!this._rowData) {\r\n      return 0;\r\n    } else {\r\n      return this._rowData.length;\r\n    }\r\n  }\r\n\r\n  private _rowData: string[] = [];\r\n\r\n  constructor(row_data: string[]) {\r\n    // nullundefined\"\"\r\n    row_data.forEach((val, index, array) => {\r\n      if(!array[index]) {\r\n        array[index] = \"\";\r\n      }\r\n    });\r\n    this._rowData = row_data;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param column_index \r\n   */\r\n  public getData(column_index: number): string {\r\n    // if (column_index >= 0 && column_index < this.Count) {\r\n    //   return this._rowData[column_index];\r\n    // } else {\r\n    //   return undefined;\r\n    // }\r\n    return this._rowData[column_index];\r\n  }\r\n\r\n  public add(data: string): void {\r\n    this._rowData.push(data);\r\n  }\r\n\r\n  public insert(index: number, data: string): void {\r\n    // 2\r\n    this._rowData.push(data);\r\n    let tempData = this._rowData.slice(index);\r\n    tempData.push(data);\r\n    this._rowData = tempData;\r\n  }\r\n\r\n  public remove(index: number): void {\r\n    this._rowData.splice(index, 1);\r\n  }\r\n\r\n  public removeEnd(): void {\r\n    this._rowData.pop();\r\n  }\r\n\r\n  public isEmpty(): boolean {\r\n    if(!this._rowData) {\r\n      return true;\r\n    }\r\n    for(let i: number = 0; i < this._rowData.length; i++) {\r\n      if(this._rowData[i] === '' || this._rowData[i] === null || this._rowData[i] === undefined) {\r\n        continue;\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // public\r\n\r\n  // public remove(index: number): any {\r\n\r\n  // }\r\n}","// import { VeryTableRow } from \"./veryTableRow\";\r\n/**\r\n * 1. TypeScript\r\n * 2. \r\n */\r\nimport { VeryTable } from \"./veryTable\";\r\n\r\nexport class VeryTableSet {\r\n\r\n  private _tables: VeryTable[] = [];\r\n\r\n  public get Count(): number {\r\n    if (!this._tables) {\r\n      return 0;\r\n    } else {\r\n      return this._tables.length;\r\n    }\r\n  }\r\n\r\n  constructor(tables?: VeryTable[]) {\r\n    if (tables) {\r\n      this._tables = tables;\r\n    }\r\n  }\r\n\r\n  public getTable(index: number): VeryTable | undefined {\r\n    if (index >= 0 && index < this.Count) {\r\n      return this._tables[index];\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  public addTable(table: VeryTable): void {\r\n    this._tables.push(table);\r\n  }\r\n\r\n  public removeTable(index: number): void {\r\n    if (index >= 0 && index < this.Count) {\r\n      this._tables.splice(index, 1);\r\n    }\r\n  }\r\n\r\n\r\n}"]}