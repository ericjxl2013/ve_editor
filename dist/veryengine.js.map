{"version":3,"sources":["node_modules/_browser-pack@6.1.0@browser-pack/_prelude.js","src/game.ts","src/main.ts","src/veryengine/action/actionBehaviour.ts","src/veryengine/action/actions.ts","src/veryengine/action/assignment.ts","src/veryengine/action/assignmentTypeJudge.ts","src/veryengine/action/index.ts","src/veryengine/action/sequenceActions.ts","src/veryengine/babylon/babylonVariables.ts","src/veryengine/babylon/engine.ts","src/veryengine/babylon/index.ts","src/veryengine/babylon/time.ts","src/veryengine/dataSource/dataSource.ts","src/veryengine/dataSource/fsmData.ts","src/veryengine/dataSource/index.ts","src/veryengine/dataSource/stateActionData.ts","src/veryengine/dataSource/stateData.ts","src/veryengine/dataSource/stateTriggerData.ts","src/veryengine/dataSource/variableData.ts","src/veryengine/enum/enumTypes.ts","src/veryengine/enum/index.ts","src/veryengine/expression/expChar.ts","src/veryengine/expression/expManager.ts","src/veryengine/expression/expressionEnum.ts","src/veryengine/expression/expressionParsing.ts","src/veryengine/expression/expressions.ts","src/veryengine/expression/forwardQuery.ts","src/veryengine/expression/functionExpression.ts","src/veryengine/expression/functions.ts","src/veryengine/expression/index.ts","src/veryengine/expression/positions.ts","src/veryengine/expression/scope.ts","src/veryengine/expression/token.ts","src/veryengine/expression/tokenReader.ts","src/veryengine/expression/tokenizer.ts","src/veryengine/expression/variable.ts","src/veryengine/expression/variableExpression.ts","src/veryengine/expression/veryExpressions.ts","src/veryengine/global/errorManager.ts","src/veryengine/global/gameGlobal.ts","src/veryengine/global/index.ts","src/veryengine/html/index.ts","src/veryengine/html/showError.ts","src/veryengine/index.ts","src/veryengine/library/action/index.ts","src/veryengine/library/action/translate.ts","src/veryengine/library/trigger/index.ts","src/veryengine/library/trigger/input.ts","src/veryengine/loader/createInstance.ts","src/veryengine/loader/index.ts","src/veryengine/loader/loaderManager.ts","src/veryengine/manager/index.ts","src/veryengine/manager/manager.ts","src/veryengine/manager/projects.ts","src/veryengine/manager/reset.ts","src/veryengine/object/index.ts","src/veryengine/object/objects.ts","src/veryengine/object/veryengineObject.ts","src/veryengine/scene/index.ts","src/veryengine/scene/verySceneVariables.ts","src/veryengine/state/associatedState.ts","src/veryengine/state/fsm.ts","src/veryengine/state/index.ts","src/veryengine/state/state.ts","src/veryengine/state/stateAction.ts","src/veryengine/state/stateConst.ts","src/veryengine/template/index.ts","src/veryengine/template/template.ts","src/veryengine/template/templates.ts","src/veryengine/trigger/index.ts","src/veryengine/trigger/triggerBehaviour.ts","src/veryengine/trigger/triggers.ts","src/veryengine/utility/arrayUtility.ts","src/veryengine/utility/dictionary.ts","src/veryengine/utility/errorInfo.ts","src/veryengine/utility/index.ts","src/veryengine/utility/paraParserUtility.ts","src/veryengine/utility/stringFormat.ts","src/veryengine/utility/typeConvert.ts","src/veryengine/variables/index.ts","src/veryengine/variables/varTools.ts","src/veryengine/variables/variables.ts","src/veryengine/variables/veryExpression.ts","src/veryengine/variables/veryVarManager.ts","src/veryengine/variables/veryVariables.ts","src/veryengine/veryEngine.ts","src/verytable/index.ts","src/verytable/veryTable.ts","src/verytable/veryTableRow.ts","src/verytable/veryTableSet.ts"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","veryEngine_1","babylon_1","Game","canvasElement","fps","this","_showFps","_canvas","BabylonEngine","Canvas","_fps","_table","document","getElementById","prototype","createScene","_engine","dispose","BABYLON","Engine","engine","window","addEventListener","resize","_scene","Scene","camera","ArcRotateCamera","Vector3","setPosition","attachControl","lowerBetaLimit","upperBetaLimit","Math","PI","lowerRadiusLimit","inputMap","displayLoadingUI","SceneLoader","Append","scene","hideLoadingUI","blue","getMeshByName","actionManager","ActionManager","registerAction","ExecuteCodeAction","OnKeyDownTrigger","evt","sourceEvent","key","type","OnKeyUpTrigger","onBeforeRenderObservable","add","position","z","getDeltaTime","x","sphere","SetValueAction","trigger","OnIntersectionEnterTrigger","parameter","OnIntersectionExitTrigger","entrance","VeryEngine","console","log","hot1","countEmptyRows","init","getData","projectName","Time","_sum","animate","_this","runRenderLoop","width","clientWidth","render","updateFpsPos","toggleDebug","scenes","debugLayer","isVisible","hide","show","embedMode","style","right","body","innerHTML","getFps","toFixed","game","game_1","__importDefault","dataLoaded","canvas","fpsLabel","default","initGame","setTimeout","enum_1","VE_ActionBehaviour","_enabled","_projectName","gameObject","veryObject","_objectID","_actionID","_erveryFrame","isSequence","_sequenceState","SequenceActionState","Initial","Object","defineProperty","val","ActionType","Normal","setEveryFrame","is_every_frame","setActionID","object_id","action_id","setVeryObject","very_object","action","action_val","every_frame","active","onUpdate","update","pause","Pause","resume","Running","stop","finish","enabled","html_1","state_1","manager_1","global_1","VE_Actions","addAction","GameGlobal","PlatformLoaded","ids","ID","split","id","trim","toLowerCase","_actionDics","ShowError","showError","hasAction","createAction","create","remove","findAction","isCreatedAction","getAction","actionArray","StateConst","STATE_SEPARATOR","objects","VE_Manager","objectID","actionID","isCreated","otherObject","getVeryObject","utility_1","assignmentTypeJudge_1","VE_Assignment","state","total_string","_totalStr","_leftType","AssignType","Variable","_rightType","_leftVariable","_leftTemplate","_leftVarID","_rightConstStr","_rightConstValue","_rightVariable","_rightTemplate","_rightVarID","_pos","_state","setPos","pos","setLeftVariable","variable","setLeftTemplate","template","Template","setLeftTemplateVar","var_id","TemplateVariable","setRightVariable","setRightTemplate","setRightNull","setRightTemplateVariable","setRightConst","const_str","Const","setRightConstValue","const_value","assign","rightAssignment","unload","templateInstance","Fsm","fsmID","templateVarID","isCreatedExpression","isCreatedVariable","getVariable","isCreatedFsm","getFsm","fsmVar","setValue","getValue","errorInfo","ErrorInfo","initValue","isRight","exp","getExpression","VE_AssignmentTypeJudge","allowExpression","evaluate","v","allow","first","second","varType","expType","__export","VE_SequenceActions","_activeActionIndex","engine_1","GameObject","name","mesh","node","_transform","Transform","transform","isEmpty","Find","getNodeByName","Mesh","TransformNode","getClassName","_transformNode","_mesh","_name","_tempVec","Zero","forward","Forward","localScale","copyFrom","transformNode","getAbsolutePosition","setAbsolutePosition","para","rotation","multiplyByFloats","parent_1","parent","setParent","result","parent_2","parent_3","parent_4","translate","translation","relativeTo","translateRelativeTo","trans","direction","clone","transformDirection","Space","WORLD","transformPosition","local_position","matrix","computeWorldMatrix","TransformCoordinates","local_direction","subtract","inverseTransformPosition","global_position","Matrix","Invert","inverseTransformDirection","global_direction","pointA","pointOrigin","_frame","fsmData_1","VE_DataSource","project_name","name_id","is_template","_templateID","_isTemplate","_fsmIDs","_fsmDic","_fsmPosDic","_triggerIDs","_triggerDic","_triggerPosDic","_actionIDs","_actionDic","_actionInitValue","_actionPosDic","fsm_id","createFsm","push","VE_FsmData","getFsmData","getFsmPos","hasFsmIndex","index","getFsmID","isCreatedTrigger","trigger_id","addTrigger","trigger_data","getTrigger","getTriggerPos","hasTriggerIndex","getTriggerID","getTriggerPara","action_data","action_init_val","getActionPara","getActionPos","getActionInitVal","hasActionIndex","getActionID","clear","data_source","_fsmType","_initialValStr","_states","_dataSource","_fsmID","initFsm","fsm_type","initial_var","addState","state_data","getStateData","VE_StateActionData","sequence","StateActionType","Action","totalString","varID","varValue","everyFrame","setNormalAction","setAssignmentAction","var_value","Assignment","VE_StateData","fsm_data","val_str","is_initial_value","state_index","STATE_INDEX","_stateIndex","logicalExp","rowIndex","_triggers","_triggersPos","_actions","_actionsPos","_associatedStates","_associatedStatesPos","_isSequence","_fsmData","_valStr","_isInitialValue","hasTrigger","hasAssociatedState","addAssociatedState","associated_state_data","getAssociatedState","getAssociatedStatePos","setSequence","VE_StateTriggerData","triggerID","logicalSwitch","VE_VariableData","_variableIDs","_varDics","_varPosDic","addVariable","var_paras","getVariableID","getVariableParas","getPos","AssignmentType","AssociatedFsmType","VariableScope","Severity","ParaType","ExpChar","value","line","_value","_line","getLine","isDigit","test","isLetter","isWhiteSpace","isNewLine","isEndOfInput","is","_i","arguments","toString","scope_1","positions_1","expressionParsing_1","ExpManager","_scope","Scope","Create","_expVariable","createVariable","errors","ParseError","NameLocation","setVariable","createExpression","exp_str","VE_ExpressionParsing","parsing","find","printError","ExpressionType","tokenizer_1","expressions_1","expressionEnum_1","functionExpression_1","functions_1","variableExpression_1","veryExpressions_1","_bracketPair","input_exp","scope","var_scope","_varScope","_tokenizer","Tokenizer","parse","resultExp","buildExpression","current","isEnd","addError","getSource","consume","getProblemCollector","left","relationalExp","isOperator","reOrder","BinaryOperator","Add","Or","algebraExp","LT","LT_EQ","EQ","GT_EQ","GT","NEQ","productExp","Subtract","exponentExp","Multiply","Divide","Modulo","atomExp","BinaryExpression","Not","ConstantExpression","setSeal","next","isIdentifier","isKeyword","isStartBracket","newValue","Empty","isConstant","getContents","varExpression","VE_Expressions","getParseExpression","getTemplateExpression","endBracket","className","expectTrigger","OPERATOR","typeStr","isBool","isNumber","parseFloat","endStart","functionCall","loc","variableID","endsWith","VariableExpression","VeryTemplateExpression","fsm","VeryVarExpression","isSpecialIdentifier","op","rightOp","isSealed","getPriority","getPriorityOp","replaceLeft","target","newLeft","getLeftExp","leftOp","setLeftExp","end_bracket","FunctionExpression","funcToken","CustomFunctions","hasFunction","fun","createFunction","setFunction","paraCount","addPara","parameterNumber","matches","getProjectCollector","Local","dictionary_1","template_1","TrueExpression","_expType","left_exp","right_exp","_op","_isSealed","_left","_right","resultAutoType","_opDic","Power","And","_priority","setRightExp","getOp","getRightExp","leftValue","rightValue","pow","l","getBoolean","y","Vector2","GetValue","Dictionary","_template","VE_Template","setTemplate","varExp","ForwardQuery","itemBuffer","endReached","problemCollector","endOfInputIndicator","undefined","nextOffset","offset","item","fetch","endOfInput","consumeNext","numberOfItems","shift","setProblemCollector","_paras","_function","func","expClone","printStr","Pow","args","NaN","Ln","Infinity","Lg","log10","Sqrt","sqrt","Abs","abs","Random","start","distance","random","Round","round","Sin","sin","ASin","asin","Cos","cos","ACos","acos","Tan","tan","ATan","atan","func_name","_functions","addFunction","funcName","SeverityExp","msg","severity","_message","_severity","Warning","message","getPosition","getMessage","getSeverity","variable_1","_parent","_context","GetRootScope","_root","makeConstant","E","CreateWithParent","setType","Token","STRING","_source","_contents","_trigger","CreateAndFill","ch","addToTrigger","addToSource","addToContentChar","addToContent","getTokenType","setTokenType","new_type","setTrigger","setContent","content","setSource","source","EOI","symbols","isEndBracket","isStartSquareBracket","isEndSquareBracket","isStartBrace","isEndBrace","keywords","KEYWORD","values","triggers","SPECIAL_ID","isSpecialIdentifierWithContent","contents","NUMBER","BOOL","isString","forwardQuery_1","expChar_1","TokenReader","_super","_inputExp","_count","_operator","__extends","readChar","token_1","tokenReader_1","_decimalSeparator","_lineComment","_blockCommentStart","_blockCommentEnd","_brackets","_treatSinglePipeAsBracket","_specialIdStarters","_specialIdTerminators","_keywords","_keywordsCaseSensitive","_stringDelimiters","_boolConstant","isAtStartOfLineComment","skipToEndOfLine","isAtStartOfBlockComment","skipBlockComment","isAtStartOfNumber","fetchNumber","isAtStartOfIdentifier","fetchId","fetchString","isAtBracket","isAtStartOfSpecialId","fetchSpecialId","fetchOperator","hasDecimal","isIdentifierChar","indexOf","specialId","handleKeywords","separator","canConsumeThisString","check_string","isAtEndOfBlockComment","in_symbol","id_token","keyword","keywordToken","addWarning","_constant","getName","scene_1","createSceneExpression","expression_str","error_info","sceneExp","errorMessage","createGlobalExpression","globalExp","Global","createLocalExpression","localExp","createFsmExpression","fsmExp","varArray","substring","startsWith","VARIABLE_SYMBOL","getParseGlobal","getParseScene","variables","VerySceneVariables","Variables","errorStr","isCreatedTemplate","getTemplate","VE_Error","table_name","_tableName","warning","error","getTableName","VE_ErrorManager","_errorList","GetError","Print","prefix","splice","PrintWarnning","PrintError","initZone","errorZone","showMsg","error_msg","errorContentNow","errorContentPrefix","display","closeBtn","querySelector","that","showWarn","close","action_1","variables_1","Action_Translate","apply","_refType","LOCAL","_translateObj","_refObj","_isDeltaTime","VeryBool","_isVec","_vecVar","VeryVector3","_xVar","VeryNumber","_yVar","_zVar","_paraTime","_paraVec","deltaTime","paraParser","para_array","ParaParserUtility","ParaNumbers","destroy","index_1","trigger_1","Trigger_MouseDown","onPointerObservable","pointInfo","VE_TriggerBehaviour","VE_Triggers","expression_1","typeConvert_1","CreateInstance","createProject","templates","globalVars","varData","count","varPara","VeryVarManager","hasVarType","newVar","addTemplate","addExpression","getObjectID","k","dataSource","fsmCount","fsmData","fsmType","initialValStr","VE_Fsm","addFsm","triggerCount","triggerPara","createTrigger","actionCount","actionPara","stateData","VE_State","isInitialValue","setInitialValue","stateAssignment","logicalAssociated","s","triggerData","triggerPos","findTrigger","addTriggerTarget","addLogicalSwitch","actionData","actionPos","VE_TypeConvert","boolConvert","stateAction","VE_StateAction","setAction","assignmentAction","isCreatedState","stateIndex","ValStr","getState","associatedStateCount","associatedStateInfo","associatedPos","associatedState","VE_AssociatedState","multipleAssociatedState","www","strArray","intConvert","aFsmID","stateArray","q","aObject","aObjectID","aFsm","toState","global_vars","assignStr","valArray","setTemplateInfo","veryVar","setStateVariable","tObject","stateVar","setConstValue","assignment","varParas","VE_StringFormat","isFormulaString","AssignmentFormulaCount","AssignmentPrefix","VeryExpression","rightVar","rightTemplate","leftType","leftVariable","setAssignment","createInstance","object_name","destroy_on_create_new","AnalisysType","object_1","dataSource_1","createInstance_1","LoaderManager","_currentType","_lastFsmID","_activeTemplate","_activeObject","_activeFsmData","_activeStateData","load","table","RowCount","getRow","templateID","replace","isIDLegal","objName","nameArray","activeGameObject","tempObject","VeryEngineObject","paraData","paraSegment","paraArray","stateInfo","parseInt","para2Array","tempStr","newActionID","LogCount","equalIndex","projects_1","_projects","VE_Projects","projects","isCreatedObjects","addObjects","VE_Objects","isCreatedTemplates","addTemplates","VE_Templates","isCreatedVariables","addVariables","VE_Variables","globalVarData","isCreatedGlobals","getGlobalVars","getTemplates","getVariables","getObjects","clearProject","_objects","_variables","_templates","sleep","VE_Reset","_objectIDs","_objectDics","unloadObject","ArrayUtility","game_object","_expressions","_fsms","exp_id","expression","template_id","isCreatedVar","keys","forEach","_hasLoaded","initIfNeeded","from_state","_types","_indexs","_numberIndex","_templateIDs","_fromState","connect","stateConst_1","fsm_variable","_id","_stateDics","_frameCount","_fsmVar","_veryObject","ContainsKey","removeState","Remove","receiveEvent","frameCount","ASSOCIATED_STATE_PREFIX","stateAction_1","_assignmentType","_isTemplateVar","_varID","_templateVar","_assignmentStr","_logicalExpression","_index","_stateVariable","_stateActions","_assocaitedStates","_sequenceActions","_fsm","setLogicalExpression","logical_exp","assign_str","very_var","state_action","addAssignment","associated_state","getTemplateVar","isNull","Value","Type","Animation","SequenceState","Prepared","_type","_action","_everyFrame","_assignment","_templateVarID","_instanceCount","instanceCount","setInstance","instance_obj","template_var_id","cloneTemplate","_templateDic","_instanceDic","isCreatedInstance","getInstance","destory_on_create_new","_logicalSwitch","_logicalExp","_triggerTargets","_triggerID","set","setTriggerID","sendEvent","isEnabled","eventProcess","_triggerDics","triggerArray","arr","ele","_keys","_values","Count","SetValue","ks","GetKeys","GetValues","errorInfo_1","para_type","current_number","required_number","requiredStr","GameObjectPara","var_str","VarTools","IsVarID","GetVeryVar","GetTemplate","VeryGameObject","vString","GameObjectParaOnlyVar","StringPara","StringParaOnlyVar","VeryString","StringParaWithExpression","GetVeryVarWithExpression","setExpression","NumberPara","NumberParaOnlyVar","isNaN","NumberParaWithExpression","BoolPara","BoolParaOnlyVar","BoolParaWithExpression","_escapeCharacters","_illegalChar","_formulaChar","strEscapeCharacterAction","para_str","tmpStr","getEscapeCharacter","strSubsectionAction","strBuilder","rStr","bracketFlag","hasQuote","para_char","getEscapeCharacter2","is_escape","strSubsection","needSpace","getParaArrayAll","coloneStr","slice","newPara","j","innerBracket","saveBracket","quotationMark","isEscape","needSaveBracket","str","hasBracket","info","num","floatConvert","veryExpression_1","GetGlobalVar","GetSceneVar","GetGlobalVarWithExpression","GetSceneVarWithExpression","_veryVars","_tempalteVars","value_str","newVal","showError_1","var_type","_veryVarTypes","addVarType","var_prototype","createVar","getVarType","getSceneVariable","getGlobalVariable","getTemplateVariable","veryVarManager_1","babylonVariables_1","_isExpression","_expression","varClone","VeryInt","newFloat","VeryFloat","rValue","vec3Str","n1","n2","n3","loaderManager_1","data","tableData","VeryTable","showErrorTest","veryTableRow_1","_columnIDs","_rows","newRow","VeryTableRow","row_index","column_index","getColumnID","floor","b","addRow","row_data","_rowData","array","insert","tempData","removeEnd","pop","VeryTableSet","tables","_tables","getTable","addTable","removeTable"],"mappings":"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","file":"veryengine.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","/// <reference path=\"./dts/babylon.d.ts\"/>\r\n\r\nimport { VeryEngine } from \"./veryengine/veryEngine\";\r\n\r\nimport { Time, BabylonEngine, GameObject } from \"./veryengine/babylon\";\r\n\r\nexport default class Game {\r\n\tprivate _canvas: HTMLCanvasElement;\r\n\tprivate _fps: HTMLElement;\r\n\tprivate _table!: HTMLElement;\r\n\tprivate _showFps: boolean = true;\r\n\tprivate _engine!: BABYLON.Engine;\r\n\tprivate _scene!: BABYLON.Scene;\r\n\t// private _camera!: BABYLON.FreeCamera;\r\n\r\n\tconstructor(canvasElement: HTMLCanvasElement, fps: HTMLElement) {\r\n\t\tthis._canvas = canvasElement;\r\n\t\tBabylonEngine.Canvas = this._canvas;\r\n\t\tthis._fps = fps;\r\n\t\t// this._engine = new BABYLON.Engine(this._canvas, true);\r\n\t\tthis._table = document.getElementById(\"VeryTable\")!;\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\tcreateScene(): Game {\r\n\t\t// engine\r\n\t\tif (this._engine) {\r\n\t\t\tthis._engine.dispose();\r\n\t\t}\r\n\t\tthis._engine = new BABYLON.Engine(this._canvas, true);\r\n\t\tBabylonEngine.Engine = this._engine;\r\n\t\t// Resize\r\n\t\tlet engine = this._engine;\r\n\t\twindow.addEventListener(\"resize\", function () {\r\n\t\t\tengine.resize();\r\n\t\t});\r\n\r\n\t\tthis._scene = new BABYLON.Scene(this._engine);\r\n\t\tBabylonEngine.Scene = this._scene;\r\n\r\n\t\t// \r\n\t\tvar camera = new BABYLON.ArcRotateCamera(\"MainCamera\", 0, 0, 10, new BABYLON.Vector3(0, 0, 0), this._scene);\r\n\t\tcamera.setPosition(new BABYLON.Vector3(20, 200, 400));\r\n\t\tcamera.attachControl(this._canvas, true);\r\n\t\tcamera.lowerBetaLimit = 0.1;\r\n\t\tcamera.upperBetaLimit = (Math.PI / 2) * 0.99;\r\n\t\tcamera.lowerRadiusLimit = 150;\r\n\r\n\t\tlet inputMap: { [key: string]: boolean } = {};\r\n\r\n\t\t// \r\n\t\tengine.displayLoadingUI();\r\n\r\n\t\t// TODO: scene.babylon\r\n\t\tBABYLON.SceneLoader.Append(\"./scene/\", \"scene.babylon\", this._scene, function (scene) {\r\n\t\t\t// do something with the scene\r\n\t\t\t// \r\n\t\t\tengine.hideLoadingUI();\r\n\r\n\t\t\t// Keyboard events\r\n\t\t\tvar blue = scene.getMeshByName('blue')!;\r\n\r\n\t\t\tscene.actionManager = new BABYLON.ActionManager(scene);\r\n\t\t\tscene.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnKeyDownTrigger, function (evt) {\r\n\t\t\t\tinputMap[evt.sourceEvent.key] = evt.sourceEvent.type == \"keydown\";\r\n\t\t\t}));\r\n\t\t\tscene.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnKeyUpTrigger, function (evt) {\r\n\t\t\t\tinputMap[evt.sourceEvent.key] = evt.sourceEvent.type == \"keydown\";\r\n\t\t\t}));\r\n\r\n\r\n\t\t\t// Game/Render loop\r\n\t\t\tscene.onBeforeRenderObservable.add(() => {\r\n\r\n\t\t\t\tif (inputMap[\"w\"] || inputMap[\"ArrowUp\"]) {\r\n\t\t\t\t\tblue.position.z -= 100 * engine.getDeltaTime() / 1000;\r\n\t\t\t\t}\r\n\t\t\t\tif (inputMap[\"a\"] || inputMap[\"ArrowLeft\"]) {\r\n\t\t\t\t\tblue.position.x += 100 * engine.getDeltaTime() / 1000;\r\n\t\t\t\t}\r\n\t\t\t\tif (inputMap[\"s\"] || inputMap[\"ArrowDown\"]) {\r\n\t\t\t\t\tblue.position.z += 100 * engine.getDeltaTime() / 1000;\r\n\t\t\t\t}\r\n\t\t\t\tif (inputMap[\"d\"] || inputMap[\"ArrowRight\"]) {\r\n\t\t\t\t\tblue.position.x -= 100 * engine.getDeltaTime() / 1000;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\t// sphere\r\n\t\t\tvar sphere = scene.getMeshByName('sphere')!;\r\n\t\t\tsphere.actionManager = new BABYLON.ActionManager(scene);\r\n\r\n\t\t\tsphere.actionManager.registerAction(new BABYLON.SetValueAction(\r\n\t\t\t\t{ trigger: BABYLON.ActionManager.OnIntersectionEnterTrigger, parameter: blue },\r\n\t\t\t\tsphere, \"scaling\", new BABYLON.Vector3(2, 2, 2)));\r\n\r\n\t\t\tsphere.actionManager.registerAction(new BABYLON.SetValueAction(\r\n\t\t\t\t{ trigger: BABYLON.ActionManager.OnIntersectionExitTrigger, parameter: blue }\r\n\t\t\t\t, sphere, \"scaling\", new BABYLON.Vector3(1, 1, 1)));\r\n\r\n\r\n\t\t\t// let blueObj: GameObject = GameObject.Find('blue')!;\r\n\t\t\t\r\n\t\t\t// console.log(blueObj.transform.transformNode);\r\n\t\t\t// console.log(blueObj.transform.localPosition);\r\n\t\t\t// let emptyNode: GameObject = new GameObject('abc');\r\n\r\n\t\t\t// blueObj.transform.transformNode!.setParent(emptyNode.transform.transformNode);\r\n\r\n\t\t\t// emptyNode.transform.eulerAngles = new BABYLON.Vector3(0, 45, 0);\r\n\r\n\t\t\t// blueObj.transform.localPosition = new BABYLON.Vector3(45, 0, 0);\r\n\t\t\t\r\n\t\t\t// blueObj.transform.localEulerAngles = new BABYLON.Vector3(0, 45, 0);\r\n\r\n\t\t\t// console.log(blueObj.transform.eulerAngles);\r\n\t\t\t// console.log(blueObj.transform.rotation);\r\n\t\t\t// blueObj.transform.rotation = BABYLON.Vector3.Zero();\r\n\t\t\t// console.log(blueObj.transform.rotation);\r\n\t\t\t// console.log(blueObj.transform.localRotation);\r\n\r\n\t\t\t// blueObj.transform.eulerAngles = new BABYLON.Vector3(80, 80, 80);\r\n\r\n\t\t\t// console.log(blueObj.transform.localRotation);\r\n\t\t\t// blueObj.transform.transformNode!.setParent(null);\r\n\t\t\t// blueObj.transform.position = new BABYLON.Vector3(100, 0, 0);\r\n\r\n\r\n\t\t});\r\n\r\n\r\n\t\t// const lightPos = new BABYLON.Vector3(0, 1, 0);\r\n\t\t// new BABYLON.HemisphericLight('hemlight', lightPos, this._scene);\r\n\r\n\t\t// const sphereOpts = { segments: 16, diameter: 1 };\r\n\t\t// let sphere = BABYLON.MeshBuilder.CreateSphere(\r\n\t\t// \t'mainsphere',\r\n\t\t// \tsphereOpts,\r\n\t\t// \tthis._scene\r\n\t\t// );\r\n\t\t// sphere.position.y = 1;\r\n\r\n\t\t// const groundOpts = { width: 6, height: 6, subdivisions: 2 };\r\n\t\t// BABYLON.MeshBuilder.CreateGround('mainground', groundOpts, this._scene);\r\n\r\n\r\n\r\n\t\t// \r\n\t\t// console.log(hot1.getData());\r\n\t\tlet entrance: VeryEngine = new VeryEngine();\r\n\t\tconsole.log(`${hot1.countEmptyRows()}`);\r\n\t\tentrance.init(hot1.getData(), projectName);\r\n\r\n\t\t// \r\n\t\tthis._scene.onBeforeRenderObservable.add(() => {\r\n\t\t\t// \r\n\t\t\tTime._sum();\r\n\t\t})\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\tanimate(): Game {\r\n\t\tthis._engine.runRenderLoop(() => {\r\n\t\t\tif (this._canvas.width !== this._canvas.clientWidth) {\r\n\t\t\t\tthis._engine.resize();\r\n\t\t\t}\r\n\r\n\t\t\tif (this._scene) {\r\n\t\t\t\tthis._scene.render();\r\n\t\t\t}\r\n\r\n\t\t\tif (this._showFps) {\r\n\t\t\t\tthis.updateFpsPos();\r\n\t\t\t}\r\n\r\n\r\n\t\t});\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * UI\r\n\t */\r\n\ttoggleDebug(): Game {\r\n\t\tif (this._engine) {\r\n\t\t\t// Always showing the debug layer, because you can close it by itself\r\n\t\t\tvar scene = this._engine.scenes[0];\r\n\t\t\tif (scene.debugLayer.isVisible()) {\r\n\t\t\t\tscene.debugLayer.hide();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// babylon.d.ts\r\n\t\t\t\tscene.debugLayer.show({ embedMode: true });\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * fps\r\n\t */\r\n\tupdateFpsPos(): void {\r\n\t\tif (this._fps) {\r\n\t\t\tthis._fps.style.right = document.body.clientWidth - (this._table.clientWidth + this._canvas.clientWidth) + \"px\";\r\n\r\n\t\t\tthis._fps.innerHTML = this._engine.getFps().toFixed() + \" fps\";\r\n\t\t}\r\n\t}\r\n}\r\n","\r\n\r\nimport Game from \"./game\";\r\n\r\nlet game!: Game;\r\nlet initFlag: boolean = false;\r\n\r\n/**\r\n * \r\n */\r\nfunction initGame(): void {\r\n  let canvas = <HTMLCanvasElement>document.getElementById(\"renderCanvas\");\r\n  let fpsLabel = document.getElementById(\"fpsLabel\");\r\n  if (canvas !== null && fpsLabel !== null) {\r\n    game = new Game(canvas, fpsLabel);\r\n    game.createScene().animate();  // \r\n  }\r\n}\r\n\r\nfunction runBtn(): void {\r\n  if (game) {\r\n    game.createScene().animate();\r\n  }\r\n}\r\n\r\nfunction toggleDebug(): void {\r\n  if (game) {\r\n    game.toggleDebug();\r\n  }\r\n}\r\n\r\nfunction init(): void {\r\n  // \r\n  if(dataLoaded) {\r\n    initGame();\r\n  } else {\r\n    setTimeout(init, 500);\r\n  }\r\n}\r\n\r\n// \r\ndocument.getElementById(\"runButton\")!.addEventListener(\"click\", runBtn);\r\n\r\n// \r\ndocument.getElementById(\"debugButton\")!.addEventListener(\"click\", toggleDebug);\r\n\r\n// \r\n// \r\ninit();\r\n// loadData2()\r\n//   .then(function (hot: HandTable) {\r\n//     console.log(hot.getData());\r\n//   }\r\n//   );\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import { ActionType, SequenceActionState } from \"../enum\";\r\nimport { GameObject, BabylonEngine } from \"../babylon\";\r\nimport { VeryEngineObject } from \"../object\";\r\n\r\nexport abstract class VE_ActionBehaviour {\r\n\r\n  public abstract get ID(): string;\r\n\r\n  public get scene(): BABYLON.Scene {\r\n    return BabylonEngine.Scene;\r\n  }\r\n\r\n  public get enabled(): boolean {\r\n    return this._enabled;\r\n  }\r\n  public set enabled(val: boolean) {\r\n    this._enabled = val;\r\n  }\r\n  private _enabled: boolean = true;\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  };\r\n  private _projectName: string = '';\r\n\r\n  protected gameObject: Nullable<GameObject> = null;\r\n  protected veryObject: Nullable<VeryEngineObject> = null;\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  };\r\n  private _objectID: string = '';\r\n\r\n  public get actionID(): string {\r\n    return this._actionID;\r\n  }\r\n  private _actionID: string = '';\r\n\r\n  public get Type(): ActionType {\r\n    return ActionType.Normal;\r\n  }\r\n\r\n  private _erveryFrame: boolean = false;\r\n  public get everyFrame(): boolean {\r\n    return this._erveryFrame;\r\n  }\r\n\r\n\r\n  public isSequence: boolean = false;\r\n\r\n  public get SequenceState(): SequenceActionState {\r\n    return this._sequenceState;\r\n  }\r\n  public set SequenceState(val: SequenceActionState) {\r\n    this._sequenceState = val;\r\n  }\r\n  private _sequenceState: SequenceActionState = SequenceActionState.Initial;\r\n\r\n  // private VE_SequenceActions _sequenceAction = null;\r\n\r\n\r\n  public setEveryFrame(is_every_frame: boolean): void {\r\n    this._erveryFrame = is_every_frame;\r\n  }\r\n\r\n  public setActionID(object_id: string, action_id: string): void {\r\n    this._objectID = object_id;\r\n    this._actionID = action_id;\r\n  }\r\n\r\n  public setVeryObject(very_object: VeryEngineObject): void {\r\n    this.veryObject = very_object;\r\n    this.gameObject = very_object.gameObject;\r\n  }\r\n\r\n  public abstract paraParser(para_array: string[]): boolean;\r\n\r\n  public action(action_val: boolean, every_frame: boolean): void {\r\n    this._enabled = action_val;\r\n    this._erveryFrame = every_frame;\r\n    if (this._enabled) {\r\n      this.active()\r\n      if (!this._erveryFrame) {\r\n        this.onUpdate();\r\n      }\r\n    }\r\n  }\r\n\r\n  public abstract active(): void;\r\n\r\n\r\n  public update(): void {\r\n    if (this._enabled && this._erveryFrame) {\r\n      this.onUpdate();\r\n    }\r\n  }\r\n\r\n  public onUpdate(): void {\r\n\r\n  }\r\n\r\n  public pause(): void {\r\n    this._sequenceState = SequenceActionState.Pause;\r\n  }\r\n\r\n  public resume(): void {\r\n    this._sequenceState = SequenceActionState.Running;\r\n  }\r\n\r\n  public stop(): void {\r\n    this._sequenceState = SequenceActionState.Initial;\r\n  }\r\n\r\n  public finish(): void {\r\n    this._sequenceState = SequenceActionState.Initial;\r\n\r\n    this.enabled = false;\r\n  }\r\n\r\n  // add callbackdestroy\r\n  public abstract destroy(): void;\r\n\r\n\r\n}","import { VE_ActionBehaviour } from \"./actionBehaviour\";\r\nimport { ShowError } from \"../html\";\r\nimport { VeryEngineObject, VE_Objects } from \"../object\";\r\nimport { StateConst } from \"../state\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { GameGlobal } from \"../global\";\r\n\r\nexport class VE_Actions {\r\n\r\n  private static _actionDics: { [key: string]: VE_ActionBehaviour } = {};\r\n\r\n  public static addAction(action: VE_ActionBehaviour): void {\r\n    // \r\n    if (!GameGlobal.PlatformLoaded) {\r\n      let ids: string[] = action.ID.split('|');\r\n      for (let i: number = 0; i < ids.length; i++) {\r\n        let id: string = ids[i].trim().toLowerCase();\r\n        if (this._actionDics[id]) {\r\n          ShowError.showError(`IDID${id}ID`);\r\n        } else {\r\n          this._actionDics[id] = action;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public static hasAction(action_id: string): boolean {\r\n    action_id = action_id.toLowerCase();\r\n    if (this._actionDics[action_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static createAction(action_id: string): VE_ActionBehaviour {\r\n    action_id = action_id.toLowerCase();\r\n    return Object.create(this._actionDics[action_id]);\r\n  }\r\n\r\n  public static remove(action_id: string): void {\r\n    action_id = action_id.toLowerCase();\r\n    delete this._actionDics[action_id];\r\n  }\r\n\r\n  public static findAction(very_object: VeryEngineObject, action_id: string): Nullable<VE_ActionBehaviour> {\r\n    if (very_object.isCreatedAction(action_id)) {\r\n      return very_object.getAction(action_id);\r\n    }\r\n    else {\r\n      let actionArray: string[] = action_id.split(StateConst.STATE_SEPARATOR);\r\n      if (actionArray.length === 2) {\r\n        let objects: VE_Objects = VE_Manager.objects(very_object.projectName);\r\n        let objectID: string = actionArray[0].trim();\r\n        let actionID: string = actionArray[1].trim();\r\n        if (objects.isCreated(objectID)) {\r\n          let otherObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n          if (otherObject.isCreatedAction(actionID)) {\r\n            return otherObject.getAction(actionID);\r\n          }\r\n          else {\r\n            return null;\r\n          }\r\n        }\r\n        else {\r\n          return null;\r\n        }\r\n      }\r\n      else {\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public static dispose(): void {\r\n    VE_Actions._actionDics = {};\r\n  }\r\n}","import { VE_State } from \"../state\";\r\nimport { AssignType } from \"../enum\";\r\nimport { IVeryVar } from \"../variables\";\r\nimport { VE_Template } from \"../template\";\r\nimport { ShowError } from \"../html\";\r\nimport { ErrorInfo } from \"../utility\";\r\nimport { IExpression } from \"../expression\";\r\nimport { VE_AssignmentTypeJudge } from \"./assignmentTypeJudge\";\r\n\r\nexport class VE_Assignment {\r\n\r\n  public get state(): VE_State {\r\n    return this._state;\r\n  }\r\n  private _state: VE_State;\r\n\r\n  private _totalStr: string = '';\r\n\r\n  public get leftType(): AssignType {\r\n    return this._leftType;\r\n  }\r\n  private _leftType: AssignType = AssignType.Variable;\r\n\r\n  public get rightType(): AssignType {\r\n    return this._rightType;\r\n  }\r\n  private _rightType: AssignType = AssignType.Variable;\r\n\r\n  public get leftVariable(): Nullable<IVeryVar> {\r\n    return this._leftVariable;\r\n  }\r\n  private _leftVariable: Nullable<IVeryVar> = null;\r\n  private _leftTemplate: Nullable<VE_Template> = null;\r\n  private _leftVarID: string = '';\r\n\r\n  private _rightConstStr: string = '';\r\n  private _rightConstValue: any = null;\r\n  public get rightVariable(): Nullable<IVeryVar> {\r\n    return this._leftVariable;\r\n  }\r\n  private _rightVariable: Nullable<IVeryVar> = null;\r\n  private _rightTemplate: Nullable<VE_Template> = null;\r\n  private _rightVarID: string = '';\r\n\r\n  private _pos: string = '';\r\n\r\n  constructor(state: VE_State, total_string: string) {\r\n    this._state = state;\r\n    this._totalStr = total_string;\r\n  }\r\n\r\n  public setPos(pos: string): void {\r\n    this._pos = pos;\r\n  }\r\n\r\n  public setLeftVariable(variable: IVeryVar): void {\r\n    this._leftType = AssignType.Variable;\r\n    this._leftVariable = variable;\r\n  }\r\n\r\n  public setLeftTemplate(template: VE_Template): void {\r\n    this._leftType = AssignType.Template;\r\n    this._leftTemplate = template;\r\n  }\r\n\r\n  public setLeftTemplateVar(template: VE_Template, var_id: string): void {\r\n    this._leftType = AssignType.TemplateVariable;\r\n    this._leftTemplate = template;\r\n    this._leftVarID = var_id;\r\n  }\r\n\r\n  public setRightVariable(variable: IVeryVar): void {\r\n    this._rightType = AssignType.Variable;\r\n    this._rightVariable = variable;\r\n  }\r\n\r\n  public setRightTemplate(template: VE_Template): void {\r\n    this._rightType = AssignType.Template;\r\n    this._rightTemplate = template;\r\n  }\r\n\r\n  public setRightNull(): void {\r\n    this._rightType = AssignType.Template;\r\n    this._rightTemplate = null;\r\n  }\r\n\r\n  public setRightTemplateVariable(template: VE_Template, var_id: string): void {\r\n    this._rightType = AssignType.TemplateVariable;\r\n    this._rightTemplate = template;\r\n    this._rightVarID = var_id;\r\n  }\r\n\r\n  public setRightConst(const_str: string): void {\r\n    this._rightType = AssignType.Const;\r\n    this._rightConstStr = const_str;\r\n  }\r\n\r\n  public setRightConstValue(const_value: any) {\r\n    this._rightType = AssignType.Const;\r\n    this._rightConstValue = const_value;\r\n  }\r\n\r\n  public finish(): void {\r\n\r\n  }\r\n\r\n  public assign(): void {\r\n    // \r\n    if (this._leftType === AssignType.Variable) {\r\n      this.rightAssignment();\r\n    }\r\n    // \r\n    else if (this._leftType === AssignType.Template) {\r\n      if (this._rightTemplate == null) {\r\n        if (this._leftTemplate !== null) {\r\n          this._leftTemplate.unload();\r\n        }\r\n      }\r\n      else {\r\n        this._leftTemplate = this._rightTemplate;\r\n      }\r\n    }\r\n    // .\r\n    else {\r\n      if (this._leftTemplate!.templateInstance !== null) {\r\n        if (this._leftTemplate!.templateInstance.isCreatedExpression(this._leftVarID)) {\r\n          ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n          return;\r\n        }\r\n        else if (this._leftTemplate!.templateInstance.isCreatedVariable(this._leftVarID)) {\r\n          this._leftVariable = this._leftTemplate!.templateInstance.getVariable(this._leftVarID);\r\n          this.rightAssignment();\r\n        }\r\n        else if (this._leftTemplate!.templateInstance.isCreatedFsm(this._leftVarID)) {\r\n          this._leftVariable = this._leftTemplate!.templateInstance.getFsm(this._leftVarID).fsmVar;\r\n          this.rightAssignment();\r\n        }\r\n        else {\r\n          ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n          return;\r\n        }\r\n      }\r\n      else {\r\n        ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._leftTemplate!.templateVarID);\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n  private rightAssignment(): void {\r\n    // \r\n    if (this._rightType === AssignType.Variable) {\r\n      this._leftVariable!.setValue(this._rightVariable!.getValue());\r\n    }\r\n    // \r\n    else if (this._rightType === AssignType.Const) {\r\n      if (this._rightConstValue === null) {\r\n        let errorInfo: ErrorInfo = new ErrorInfo();\r\n        this._rightConstValue = this._leftVariable!.initValue(this._rightConstStr, errorInfo);\r\n        if (!errorInfo.isRight) {\r\n          ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightConstStr);\r\n          return;\r\n        }\r\n        else {\r\n          //UnityEngine.Debug.Log(\"1 - \" + _totalStr + \"\" + this._rightConstValue);\r\n          this._leftVariable!.setValue(this._rightConstValue);\r\n        }\r\n      }\r\n      else {\r\n        //UnityEngine.Debug.Log(\"2 - \" + _totalStr + \"\" + this._rightConstValue);\r\n        this._leftVariable!.setValue(this._rightConstValue);\r\n      }\r\n    }\r\n    else  //.\r\n    {\r\n      if (this._rightTemplate!.templateInstance != null) {\r\n        if (this._rightTemplate!.templateInstance.isCreatedExpression(this._rightVarID)) {\r\n          let exp: IExpression = this._rightTemplate!.templateInstance.getExpression(this._rightVarID);\r\n          if (VE_AssignmentTypeJudge.allowExpression(this._leftVariable!, exp)) {\r\n            this._leftVariable!.setValue(exp.evaluate());\r\n          }\r\n          else {\r\n            ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n            return;\r\n          }\r\n        }\r\n        else if (this._rightTemplate!.templateInstance.isCreatedVariable(this._rightVarID)) {\r\n          let v: IVeryVar = this._rightTemplate!.templateInstance.getVariable(this._rightVarID);\r\n          if (VE_AssignmentTypeJudge.allow(this._leftVariable!, v)) {\r\n            this._leftVariable!.setValue(v.getValue());\r\n          }\r\n          else {\r\n            ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n            return;\r\n          }\r\n        }\r\n        else if (this._rightTemplate!.templateInstance.isCreatedFsm(this._rightVarID)) {\r\n          let v: IVeryVar = this._rightTemplate!.templateInstance.getFsm(this._rightVarID).fsmVar;\r\n          if (VE_AssignmentTypeJudge.allow(this._leftVariable!, v)) {\r\n            this._leftVariable!.setValue(v.getValue());\r\n          }\r\n          else {\r\n            ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n            return;\r\n          }\r\n        }\r\n        else {\r\n          ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n          return;\r\n        }\r\n      }\r\n      else {\r\n        ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n}","import { IVeryVar } from \"../variables\";\r\nimport { IExpression } from \"../expression\";\r\n\r\nexport class VE_AssignmentTypeJudge {\r\n\r\n  public static allow(first: IVeryVar, second: IVeryVar): boolean {\r\n    if (first.varType === second.varType) {\r\n      return true;\r\n    }\r\n    else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static allowExpression(first: IVeryVar, second: IExpression): boolean {\r\n    if (first.varType === second.expType) {\r\n      return true;\r\n    }\r\n    else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n}","export * from './actionBehaviour';\r\nexport * from './assignment';\r\nexport * from './actions';\r\nexport * from './sequenceActions';","import { SequenceActionState } from \"../enum\";\r\n\r\nexport class VE_SequenceActions {\r\n\r\n  public get sequenceState(): SequenceActionState {\r\n    return this._sequenceState;\r\n  }\r\n  private _sequenceState: SequenceActionState = SequenceActionState.Initial;\r\n\r\n  private _activeActionIndex: number = -1;\r\n\r\n\r\n\r\n  \r\n  \r\n}","import { BabylonEngine } from \"./engine\";\r\n\r\n\r\nexport class GameObject {\r\n\r\n\r\n  public get gameObject(): GameObject {\r\n    return this;\r\n  }\r\n\r\n  public get transform(): Transform {\r\n    return this._transform;\r\n  }\r\n  public set transform(val: Transform) {\r\n    this._transform = val;\r\n  }\r\n  private _transform: Transform;\r\n\r\n  public get name(): string {\r\n    return this.transform.name;\r\n  }\r\n  public set name(val: string) {\r\n    this.transform.name = val;\r\n  }\r\n\r\n  public get isEmpty(): boolean {\r\n    return this._transform.isEmpty;\r\n  }\r\n\r\n\r\n  constructor(name?: string, mesh: Nullable<BABYLON.Mesh> = null, node: Nullable<BABYLON.TransformNode> = null) {\r\n    if (mesh) {\r\n      this._transform = new Transform('', mesh);\r\n    } else {\r\n      if (node) {\r\n        this._transform = new Transform('', null, node);\r\n      } else if (name) {\r\n        this._transform = new Transform(name);\r\n      } else {\r\n        this._transform = new Transform();\r\n      }\r\n    }\r\n  }\r\n\r\n  // TODO\r\n  public static Find(name: string, scene?: BABYLON.Scene): Nullable<GameObject> {\r\n    if (!scene) {\r\n      scene = BabylonEngine.Scene;\r\n    }\r\n    let node: Nullable<BABYLON.Node> = scene.getNodeByName(name);\r\n    if (!node) {\r\n      return null;\r\n    } else {\r\n      if (node instanceof BABYLON.Mesh) {\r\n        return new GameObject('', <BABYLON.Mesh>node);\r\n      } else if (node instanceof BABYLON.TransformNode) {\r\n        return new GameObject('', null, <BABYLON.TransformNode>node);\r\n      } else {\r\n        console.log('GameObject.Find' + node.getClassName());\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  // public static empty(name: string): GameObject {\r\n\r\n  // }\r\n\r\n}\r\n\r\n\r\nexport class Transform {\r\n\r\n  // public get gameObject(): GameObject {\r\n  //   return this._gameObject;\r\n  // }\r\n  // private _gameObject: GameObject;\r\n\r\n  private _transformNode: BABYLON.Nullable<BABYLON.TransformNode> = null;\r\n  private _mesh: BABYLON.Nullable<BABYLON.Mesh> = null;\r\n\r\n  public get transformNode(): Nullable<BABYLON.TransformNode> {\r\n    if (this._mesh) {\r\n      return this._mesh;\r\n    } else if (this._transformNode) {\r\n      return this._transformNode;\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public get isMesh(): boolean {\r\n    if (this._mesh) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public get isEmpty(): boolean {\r\n    if (this._transformNode || this._mesh) {\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  // public get parent(): Nullable<BABYLON.TransformNode>\r\n\r\n  public get name(): string {\r\n    return this._name;\r\n  }\r\n  public set name(val: string) {\r\n    if (this._transformNode) {\r\n      this._transformNode.name = val;\r\n    }\r\n    if (this._mesh) {\r\n      this._mesh.name = val;\r\n    }\r\n    this._name = val;\r\n  }\r\n  private _name: string = '';\r\n\r\n  private _tempVec: BABYLON.Vector3 = BABYLON.Vector3.Zero();\r\n\r\n  /**\r\n   * \r\n   */\r\n  public get localPosition(): BABYLON.Vector3 {\r\n    if (this.isEmpty) {\r\n      return BABYLON.Vector3.Zero();\r\n    } else {\r\n      this._tempVec.copyFrom(this.transformNode!.position);\r\n      return this._tempVec;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public set localPosition(val: BABYLON.Vector3) {\r\n    if (!this.isEmpty) {\r\n      this.transformNode!.position = val;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public get position(): BABYLON.Vector3 {\r\n    if (this.isEmpty) {\r\n      return BABYLON.Vector3.Zero();\r\n    } else {\r\n      this._tempVec.copyFrom(this.transformNode!.getAbsolutePosition());\r\n      return this._tempVec;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public set position(val: BABYLON.Vector3) {\r\n    if (!this.isEmpty) {\r\n      this.transformNode!.setAbsolutePosition(val);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public get localEulerAngles(): BABYLON.Vector3 {\r\n    if (this.isEmpty) {\r\n      return BABYLON.Vector3.Zero();\r\n    } else {\r\n      let para: number = 180 / Math.PI;\r\n      return this.transformNode!.rotation.multiplyByFloats(para, para, para);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public set localEulerAngles(val: BABYLON.Vector3) {\r\n    if (!this.isEmpty) {\r\n      let para: number = Math.PI / 180;\r\n      this.transformNode!.rotation = val.multiplyByFloats(para, para, para);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public get localRotation(): BABYLON.Vector3 {\r\n    if (this.isEmpty) {\r\n      return BABYLON.Vector3.Zero();\r\n    } else {\r\n      this._tempVec.copyFrom(this.transformNode!.rotation);\r\n      return this._tempVec;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public set localRotation(val: BABYLON.Vector3) {\r\n    if (!this.isEmpty) {\r\n      this.transformNode!.rotation = val;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public get eulerAngles(): BABYLON.Vector3 {\r\n    if (this.isEmpty) {\r\n      return BABYLON.Vector3.Zero();\r\n    } else {\r\n      let parent: Nullable<BABYLON.Node> = this.transformNode!.parent;\r\n      let para: number = 180 / Math.PI;\r\n      this.transformNode!.setParent(null);\r\n      let result: BABYLON.Vector3 = this.transformNode!.rotation.multiplyByFloats(para, para, para);\r\n      this.transformNode!.setParent(parent);\r\n      return result;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public set eulerAngles(val: BABYLON.Vector3) {\r\n    if (!this.isEmpty) {\r\n      let parent: Nullable<BABYLON.Node> = this.transformNode!.parent;\r\n      let para: number = Math.PI / 180;\r\n      this.transformNode!.setParent(null);\r\n      this.transformNode!.rotation = val.multiplyByFloats(para, para, para);\r\n      this.transformNode!.setParent(parent);\r\n\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public get rotation(): BABYLON.Vector3 {\r\n    if (this.isEmpty) {\r\n      return BABYLON.Vector3.Zero();\r\n    } else {\r\n      let parent: Nullable<BABYLON.Node> = this.transformNode!.parent;\r\n      this.transformNode!.setParent(null);\r\n      this._tempVec.copyFrom(this.transformNode!.rotation);\r\n      this.transformNode!.setParent(parent);\r\n      return this._tempVec;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public set rotation(val: BABYLON.Vector3) {\r\n    if (!this.isEmpty) {\r\n      let parent: Nullable<BABYLON.Node> = this.transformNode!.parent;\r\n      this.transformNode!.setParent(null);\r\n      this.transformNode!.rotation = val;\r\n      this.transformNode!.setParent(parent);\r\n    }\r\n  }\r\n\r\n\r\n  public get childCount(): number {\r\n    return 0;\r\n  }\r\n\r\n  public forward: BABYLON.Vector3 = BABYLON.Vector3.Forward();\r\n\r\n\r\n  public get hierarchyCount(): number {\r\n    return 0;\r\n  }\r\n\r\n  public localScale: BABYLON.Vector3 = new BABYLON.Vector3(1, 1, 1);\r\n\r\n\r\n\r\n  constructor(name?: string, mesh: Nullable<BABYLON.Mesh> = null, node: Nullable<BABYLON.TransformNode> = null) {\r\n    if (mesh) {\r\n      this._mesh = mesh;\r\n      this._transformNode = mesh;\r\n      this._name = mesh.name;\r\n    } else {\r\n      if (node) {\r\n        this._mesh = null;\r\n        this._transformNode = node;\r\n        this._name = node.name;\r\n      } else if (name) {\r\n        this._mesh = null;\r\n        this._transformNode = new BABYLON.TransformNode(name);\r\n        this._name = name;\r\n      } else {\r\n        this._mesh = null;\r\n        this._transformNode = null;\r\n        this._name = '';\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param translation \r\n   * @param relativeTo LOCALWORLD\r\n   */\r\n  public translate(translation: BABYLON.Vector3, relativeTo: BABYLON.Space): void {\r\n    if (this.transformNode) {\r\n      this.transformNode.translate(translation, 1, relativeTo);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * null\r\n   * @param translation \r\n   * @param trans \r\n   */\r\n  public translateRelativeTo(translation: BABYLON.Vector3, trans: Transform): void {\r\n    if (this.transformNode) {\r\n      let direction: BABYLON.Vector3 = translation.clone();\r\n      if(trans && trans.transformNode) {\r\n        direction = this.transformDirection(direction);\r\n      } \r\n      this.transformNode.translate(direction, 1, BABYLON.Space.WORLD);\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  /**\r\n   * \r\n   * @param local_position \r\n   */\r\n  public transformPosition(local_position: BABYLON.Vector3): BABYLON.Vector3 {\r\n    if (this.transformNode) {\r\n      let matrix: BABYLON.Matrix = this.transformNode.computeWorldMatrix();\r\n      return BABYLON.Vector3.TransformCoordinates(local_position, matrix);\r\n    } else {\r\n      return local_position;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param local_direction \r\n   */\r\n  public transformDirection(local_direction: BABYLON.Vector3): BABYLON.Vector3 {\r\n    if (this.transformNode) {\r\n      let matrix: BABYLON.Matrix = this.transformNode.computeWorldMatrix();\r\n      return BABYLON.Vector3.TransformCoordinates(local_direction, matrix).subtract(this.transformNode.getAbsolutePosition());\r\n    } else {\r\n      return local_direction;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param global_position \r\n   */\r\n  public inverseTransformPosition(global_position: BABYLON.Vector3): BABYLON.Vector3 {\r\n    if (this.transformNode) {\r\n      let matrix: BABYLON.Matrix = BABYLON.Matrix.Invert(this.transformNode.computeWorldMatrix());\r\n      return BABYLON.Vector3.TransformCoordinates(global_position, matrix);\r\n    } else {\r\n      return global_position;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param global_direction \r\n   */\r\n  public inverseTransformDirection(global_direction: BABYLON.Vector3): BABYLON.Vector3 {\r\n    if (this.transformNode) {\r\n      let matrix: BABYLON.Matrix = BABYLON.Matrix.Invert(this.transformNode.computeWorldMatrix());\r\n      let pointA: BABYLON.Vector3 = BABYLON.Vector3.TransformCoordinates(global_direction, matrix);\r\n      let pointOrigin: BABYLON.Vector3 = BABYLON.Vector3.TransformCoordinates(BABYLON.Vector3.Zero(), matrix);\r\n      return pointA.subtract(pointOrigin);\r\n    } else {\r\n      return global_direction;\r\n    }\r\n  }\r\n\r\n}\r\n\r\n\r\n// let trans: Transform = new Transform();\r\n// let trans2: Transform = new Transform(null, null, 'my name');\r\n// let trans3: Transform = new Transform(new BABYLON.TransformNode('a', null));","export class BabylonEngine {\r\n  public static Canvas: HTMLCanvasElement;\r\n  public static Engine: BABYLON.Engine;\r\n  public static Scene: BABYLON.Scene;\r\n}","export * from './babylonVariables';\r\nexport * from './time';\r\nexport * from './engine';","import { BabylonEngine } from \"./engine\";\r\n\r\nexport class Time {\r\n  \r\n  public static get frameCount(): number {\r\n    return this._frame;\r\n  }\r\n  private static _frame: number = 0;\r\n\r\n\r\n  public static get deltaTime(): number {\r\n    // return 1.0 / GameGlobal.Engine.getFps();\r\n    return BabylonEngine.Engine.getDeltaTime() * 0.001;\r\n  }\r\n\r\n  public static _sum(): void {\r\n    this._frame++;\r\n  }\r\n}","import { VE_FsmData } from \"./fsmData\";\r\n\r\nexport class VE_DataSource {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = '';\r\n\r\n  public get templateID(): string {\r\n    return this._templateID;\r\n  }\r\n  private _templateID: string = '';\r\n\r\n  public get isTemplate(): boolean {\r\n    return this._isTemplate;\r\n  }\r\n  private _isTemplate: boolean = false;\r\n\r\n  public get id(): string {\r\n    if (this._isTemplate) {\r\n      return this._templateID;\r\n    } else {\r\n      return this._objectID;\r\n    }\r\n  }\r\n\r\n  private _fsmIDs: string[] = [];\r\n  private _fsmDic: { [key: string]: VE_FsmData } = {};\r\n  private _fsmPosDic: { [key: string]: string } = {};\r\n\r\n  private _triggerIDs: string[] = [];\r\n  private _triggerDic: { [key: string]: string[] } = {};\r\n  private _triggerPosDic: { [key: string]: string } = {};\r\n\r\n  private _actionIDs: string[] = [];\r\n  private _actionDic: { [key: string]: string[] } = {};\r\n  private _actionInitValue: { [key: string]: string[] } = {};\r\n  private _actionPosDic: { [key: string]: string } = {};\r\n\r\n  public get triggerCount(): number {\r\n    return this._triggerIDs.length;\r\n  }\r\n\r\n  public get actionCount(): number {\r\n    return this._actionIDs.length;\r\n  }\r\n\r\n  public get fsmCount(): number {\r\n    return this._fsmIDs.length;\r\n  }\r\n\r\n\r\n  constructor(project_name: string, name_id: string, is_template: boolean) {\r\n    this._projectName = project_name;\r\n    this._isTemplate = is_template;\r\n    if(is_template) {\r\n      this._templateID = name_id;\r\n    } else {\r\n      this._objectID = name_id;\r\n    }\r\n  }\r\n\r\n  public isCreatedFsm(fsm_id: string): boolean {\r\n    if(this._fsmDic[fsm_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public createFsm(fsm_id: string, pos: string): void {\r\n    this._fsmIDs.push(fsm_id);\r\n    this._fsmDic[fsm_id] = new VE_FsmData(fsm_id, this);\r\n    this._fsmPosDic[fsm_id] = pos;\r\n  }\r\n\r\n  public getFsmData(fsm_id: string): VE_FsmData {\r\n    return this._fsmDic[fsm_id];\r\n  }\r\n\r\n  public getFsmPos(fsm_id: string): string {\r\n    return this._fsmPosDic[fsm_id];\r\n  }\r\n\r\n  public hasFsmIndex(index: number): boolean {\r\n    if(index >= 0 && index < this._fsmIDs.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getFsmID(index: number): string {\r\n    return this._fsmIDs[index];\r\n  }\r\n\r\n  public isCreatedTrigger(trigger_id: string): boolean {\r\n    if(this._triggerDic[trigger_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTrigger(trigger_id: string, trigger_data: string[], pos: string): void {\r\n    this._triggerIDs.push(trigger_id);\r\n    this._triggerDic[trigger_id] = trigger_data;\r\n    this._triggerPosDic[trigger_id] = pos;\r\n  }\r\n\r\n  public getTrigger(trigger_id: string): string[] {\r\n    return this._triggerDic[trigger_id];\r\n  }\r\n\r\n  public getTriggerPos(trigger_id: string): string {\r\n    return this._triggerPosDic[trigger_id];\r\n  }\r\n\r\n  public hasTriggerIndex(index: number): boolean {\r\n    if(index >=0 && index < this._triggerIDs.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getTriggerID(index: number): string {\r\n    return this._triggerIDs[index];\r\n  }\r\n\r\n  public getTriggerPara(trigger_id: string): string[] {\r\n    return this._triggerDic[trigger_id];\r\n  }\r\n\r\n  public isCreatedAction(action_id: string): boolean {\r\n    if(this._actionDic[action_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addAction(action_id: string, action_data: string[], action_init_val: string[], pos: string): void {\r\n    this._actionIDs.push(action_id);\r\n    this._actionDic[action_id] = action_data;\r\n    this._actionInitValue[action_id] = action_init_val;\r\n    this._actionPosDic[action_id] = pos;\r\n  }\r\n\r\n  public getActionPara(action_id: string): string[] {\r\n    return this._actionDic[action_id];\r\n  }\r\n\r\n  public getActionPos(action_id: string): string {\r\n    return this._actionPosDic[action_id];\r\n  }\r\n\r\n  public getActionInitVal(action_id: string): string[] {\r\n    return this._actionInitValue[action_id];\r\n  }\r\n\r\n  public hasActionIndex(index: number): boolean {\r\n    if(index >= 0 && index < this._actionIDs.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getActionID(index: number): string {\r\n    return this._actionIDs[index];\r\n  }\r\n\r\n  public clear(): void {\r\n    this._fsmIDs = [];\r\n    this._fsmDic = {};\r\n    this._triggerIDs = [];\r\n    this._triggerDic = {};\r\n    this._actionIDs = [];\r\n    this._actionDic = {};\r\n    this._actionInitValue = {};\r\n  }\r\n\r\n\r\n\r\n}","import { VE_DataSource, VE_StateData } from \"./index\";\r\n\r\nexport class VE_FsmData {\r\n  public get dataSource(): VE_DataSource {\r\n    return this._dataSource;\r\n  }\r\n  private _dataSource: VE_DataSource;\r\n\r\n  public get fsmID(): string {\r\n    return this._fsmID;\r\n  }\r\n  private _fsmID: string;\r\n\r\n  public get fsmType(): string {\r\n    return this._fsmType;\r\n  }\r\n  private _fsmType: string = '';\r\n\r\n  public get initialValStr(): string {\r\n    return this._initialValStr;\r\n  }\r\n  private _initialValStr: string = 'defalut';\r\n\r\n  private _states: VE_StateData[] = [];\r\n\r\n  public get count(): number {\r\n    return this._states.length;\r\n  }\r\n\r\n  constructor(fsm_id: string, data_source: VE_DataSource) {\r\n    this._dataSource = data_source;\r\n    this._fsmID = fsm_id;\r\n  }\r\n\r\n  public initFsm(fsm_type: string, initial_var: string): void {\r\n    this._fsmType = fsm_type;\r\n    this._initialValStr = initial_var;\r\n  }\r\n\r\n  public addState(state_data: VE_StateData): void {\r\n    this._states.push(state_data);\r\n  }\r\n\r\n  public getStateData(index: number): VE_StateData {\r\n    return this._states[index];\r\n  }\r\n\r\n}","export * from './variableData';\r\nexport * from './fsmData';\r\nexport * from './stateActionData';\r\nexport * from './stateTriggerData';\r\nexport * from './stateData';\r\nexport * from './dataSource';\r\n\r\n","import { StateActionType } from \"../enum\";\r\n\r\nexport class VE_StateActionData {\r\n\r\n  public actionID: string;\r\n  public enabled: string;\r\n  public everyFrame: string;\r\n  public isSequence: string;\r\n  public type: StateActionType;\r\n  public totalString: string = '';\r\n  public varID: string = '';\r\n  public varValue: string = '';\r\n\r\n  constructor(action_id: string, enabled: string = 'false', every_frame: string = 'false', sequence: string = 'false', type: StateActionType = StateActionType.Action) {\r\n    this.actionID = action_id;\r\n    this.enabled = enabled;\r\n    this.everyFrame = every_frame;\r\n    this.isSequence = sequence;\r\n    this.type = type;\r\n  }\r\n\r\n  public setNormalAction(action_id: string, enabled: string = 'false', every_frame: string = 'false', sequence: string = 'false'): void {\r\n    this.actionID = action_id;\r\n    this.enabled = enabled;\r\n    this.everyFrame = every_frame;\r\n    this.isSequence = sequence;\r\n    this.type = StateActionType.Action;\r\n  }\r\n\r\n  public setAssignmentAction(total_string: string, var_id: string, var_value: string): void {\r\n    this.totalString = total_string;\r\n    this.varID = var_id;\r\n    this.varValue = var_value;\r\n    this.type = StateActionType.Assignment;\r\n  }\r\n\r\n}","import { VE_FsmData } from \"./index\";\r\nimport { StateConst } from \"../state\";\r\nimport { VE_StateTriggerData } from \"./stateTriggerData\";\r\nimport { VE_StateActionData } from \"./stateActionData\";\r\n\r\nexport class VE_StateData {\r\n\r\n  public get fsmData(): VE_FsmData {\r\n    return this._fsmData;\r\n  }\r\n  private _fsmData: VE_FsmData;\r\n\r\n  public get ValStr(): string {\r\n    return this._valStr;\r\n  }\r\n  private _valStr: string;\r\n\r\n  public get isInitialValue(): boolean {\r\n    return this._isInitialValue;\r\n  }\r\n  private _isInitialValue: boolean;\r\n\r\n  public get stateIndex(): number {\r\n    return this._stateIndex;\r\n  }\r\n  private _stateIndex: number = StateConst.STATE_INDEX;\r\n\r\n  public logicalExp: string = '';\r\n\r\n  public rowIndex: number = -1;\r\n\r\n  private _triggers: VE_StateTriggerData[] = [];\r\n  private _triggersPos: string[] = [];\r\n  private _actions: VE_StateActionData[] = [];\r\n  private _actionsPos: string[] = [];\r\n  private _associatedStates: string[] = [];\r\n  private _associatedStatesPos: string[] = [];\r\n\r\n  public get isSequence(): boolean {\r\n    return this._isSequence;\r\n  }\r\n  private _isSequence: boolean = false;\r\n\r\n  public get triggerCount(): number {\r\n    return this._triggers.length;\r\n  }\r\n\r\n  public get actionCount(): number {\r\n    return this._actions.length;\r\n  }\r\n\r\n  public get associatedStateCount(): number {\r\n    return this._associatedStates.length;\r\n  }\r\n\r\n  constructor(fsm_data: VE_FsmData, val_str: string, is_initial_value: boolean, state_index: number = StateConst.STATE_INDEX) {\r\n    this._fsmData = fsm_data;\r\n    this._valStr = val_str;\r\n    this._isInitialValue = is_initial_value;\r\n    this._stateIndex = state_index;\r\n  }\r\n\r\n  public hasTrigger(index: number): boolean {\r\n    if(index >= 0 && index < this._triggers.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTrigger(trigger_data: VE_StateTriggerData, pos: string): void {\r\n    this._triggers.push(trigger_data);\r\n    this._triggersPos.push(pos);\r\n  }\r\n\r\n  public getTrigger(index: number): VE_StateTriggerData {\r\n    return this._triggers[index];\r\n  }\r\n\r\n  public getTriggerPos(index: number): string {\r\n    return this._triggersPos[index];\r\n  }\r\n\r\n  public hasAction(index: number): boolean {\r\n    if(index >= 0 && index < this._actions.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addAction(action_data: VE_StateActionData, pos: string): void {\r\n    this._actions.push(action_data);\r\n    this._actionsPos.push(pos);\r\n  }\r\n\r\n  public getAction(index: number): VE_StateActionData {\r\n    return this._actions[index];\r\n  }\r\n\r\n  public getActionPos(index: number): string {\r\n    return this._actionsPos[index];\r\n  }\r\n\r\n  public hasAssociatedState(index: number): boolean {\r\n    if(index >= 0 && index < this._associatedStates.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addAssociatedState(associated_state_data: string, pos: string): void {\r\n    this._associatedStates.push(associated_state_data);\r\n    this._associatedStatesPos.push(pos);\r\n  }\r\n\r\n  public getAssociatedState(index: number): string {\r\n    return this._associatedStates[index];\r\n  }\r\n\r\n  public getAssociatedStatePos(index: number): string {\r\n    return this._associatedStatesPos[index];\r\n  }\r\n\r\n  public setSequence(): void {\r\n    this._isSequence = true;\r\n  }\r\n\r\n}","export class VE_StateTriggerData {\r\n\r\n  public triggerID: string;\r\n  public logicalSwitch: string;\r\n  public logicalExp: string;\r\n\r\n  public static get Empty(): VE_StateTriggerData {\r\n    return new VE_StateTriggerData('');\r\n  }\r\n\r\n  constructor(trigger_id: string) {\r\n    this.triggerID = trigger_id;\r\n    this.logicalSwitch = '';\r\n    this.logicalExp = '';\r\n   }\r\n}","export class VE_VariableData {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  private _variableIDs: string[] = [];\r\n  private _varDics: { [key: string]: string[] } = {};\r\n  private _varPosDic: { [key: string]: string } = {};\r\n\r\n  public get count(): number {\r\n    return this._variableIDs.length;\r\n  }\r\n\r\n  constructor(project_name: string) {\r\n    this._projectName = project_name;\r\n  }\r\n\r\n  public isCreatedVariable(var_id: string): boolean {\r\n    if (this._varDics[var_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addVariable(var_id: string, var_paras: string[], pos: string): void {\r\n    this._varDics[var_id] = var_paras;\r\n    this._variableIDs.push(var_id);\r\n    this._varPosDic[var_id] = pos;\r\n  }\r\n\r\n  public getVariableID(index: number): string {\r\n    if (index >= 0 && index < this._variableIDs.length) {\r\n      return this._variableIDs[index];\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n\r\n  public getVariableParas(var_id: string): string[] {\r\n    return this._varDics[var_id];\r\n  }\r\n\r\n  public getPos(var_id: string): string {\r\n    return this._varPosDic[var_id];\r\n  }\r\n\r\n  public clear(): void {\r\n    this._variableIDs = [];\r\n    this._varDics = {};\r\n  }\r\n}","\r\n\r\n\r\nexport enum ActionType {\r\n  Normal, Animation\r\n}\r\n\r\nexport enum SequenceActionState {\r\n  Initial, Prepared, Running, Pause\r\n}\r\n\r\nexport enum StateActionType {\r\n  Action, Assignment\r\n}\r\n\r\nexport enum AssignType {\r\n  Variable = 0,\r\n  Template,\r\n  TemplateVariable,\r\n  Const,\r\n}\r\n\r\nexport enum AssignmentType {\r\n  Const = 0,\r\n  Variable,\r\n  Expression\r\n}\r\n\r\nexport enum AssociatedFsmType {\r\n  Object = 0,\r\n  Template\r\n}\r\n\r\nexport enum VariableScope {\r\n  Local = 0,\r\n  Fsm,\r\n  Global,\r\n  Scene\r\n}\r\n\r\nexport enum Severity {\r\n  Warning,\r\n  Error\r\n}\r\n\r\nexport enum ParaType {\r\n  Action = 0,\r\n  Trigger\r\n}\r\n\r\n","export * from './enumTypes';","import { IPosition } from \"./positions\";\r\n\r\nexport class ExpChar implements IPosition {\r\n\r\n  private _value: string = '';\r\n  private _line: number = 0;\r\n  private _pos: number = 0;\r\n\r\n\r\n  constructor(value: string, line: number, pos: number) {\r\n    this._value = value;\r\n    this._line = line;\r\n    this._pos = pos;\r\n  }\r\n\r\n  public getValue(): string {\r\n    return this._value;\r\n  }\r\n\r\n  public getLine(): number {\r\n    return this._line;\r\n  }  \r\n  \r\n  public getPos(): number {\r\n    \r\n    return this._pos;\r\n  }\r\n\r\n  public isDigit(): boolean {\r\n    return (/\\d/).test(this._value);\r\n  }\r\n\r\n  public isLetter(): boolean {\r\n    return (/[a-zA-Z]/).test(this._value);\r\n  }\r\n\r\n  public isWhiteSpace(): boolean {\r\n    return this._value === ' ';\r\n  }\r\n\r\n  public isNewLine(): boolean {\r\n    return this._value === '\\n';\r\n  }\r\n\r\n  public isEndOfInput(): boolean {\r\n    return this._value === '\\0';\r\n  }\r\n\r\n  public is(...val: string[]): boolean {\r\n    for(let i: number = 0; i < val.length; i++) {\r\n      if(val[i] === this._value && val[i] !== '\\0') {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public toString(): string {\r\n    return this._value;\r\n  }\r\n\r\n}\r\n\r\n","import { Scope } from \"./scope\";\r\nimport { IExpression } from \"./expressions\";\r\nimport { ParseError, NameLocation } from \"./positions\";\r\nimport { VE_ExpressionParsing } from \"./expressionParsing\";\r\nimport { VariableScope } from \"../enum\";\r\nimport { Variable } from \"./variable\";\r\nimport { ShowError } from \"../html\";\r\n\r\nexport class ExpManager {\r\n\r\n  private static _scope: Scope;\r\n  private static _expVariable: { [key: string]: IExpression } = {};\r\n\r\n  public static errors: ParseError[] = [];\r\n\r\n  private static _projectName = '';\r\n  private static _objectID = '';\r\n\r\n  public static init() {\r\n    this._scope = Scope.Create();\r\n  }\r\n\r\n  public static isCreated(name_id: string): boolean {\r\n    if (this._scope.isCreated(name_id)) {\r\n      return true;\r\n    }\r\n    if (this._expVariable[name_id]) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public static isCreatedVariable(name_id: string): boolean {\r\n    if (this._scope.isCreated(name_id)) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static isCreatedExpression(name_id: string): boolean {\r\n    if (this._expVariable[name_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static createVariable(name_id: string, type: string, value: any): boolean {\r\n    this.errors = [];\r\n    if (this.isCreated(name_id)) {\r\n      this.errors.push(ParseError.Error(new NameLocation(name_id), `${name_id}${type}`));\r\n      return false;\r\n    }\r\n    this._scope.setVariable(name_id, type, value);\r\n    return true;\r\n  }\r\n\r\n  public static createExpression(name_id: string, exp_str: string): boolean {\r\n    this.errors = [];\r\n    if (this.isCreated(name_id)) {\r\n      this.errors.push(ParseError.Error(new NameLocation(name_id), `${name_id}${exp_str}`));\r\n      return false;\r\n    }\r\n    let exp: IExpression = VE_ExpressionParsing.parsing(name_id, exp_str, this._scope, this._projectName, '', '', VariableScope.Scene);\r\n    if (VE_ExpressionParsing.errors.length > 0) {\r\n      for (let i: number = 0; i < VE_ExpressionParsing.errors.length; i++) {\r\n        this.errors.push(VE_ExpressionParsing.errors[i]);\r\n      }\r\n      return false;\r\n    }\r\n    this._expVariable[name_id] = exp;\r\n    return true;\r\n  }\r\n\r\n  public static getValue(name_id: string): any {\r\n    if (this.isCreated(name_id)) {\r\n      if (this.isCreatedVariable(name_id)) {\r\n        return this._scope.find(name_id)!.getValue();\r\n      } else {\r\n        return this._expVariable[name_id].evaluate();\r\n      }\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static getExpression(name_id: string): IExpression | null {\r\n    if (this._expVariable[name_id]) {\r\n      return this._expVariable[name_id];\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static getVariable(name_id: string): Variable | null {\r\n    if (this.isCreatedVariable(name_id)) {\r\n      return this._scope.find(name_id);\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n\r\n  public static printError(): void {\r\n    if (this.errors.length > 0) {\r\n      for (let i: number = 0; i < this.errors.length; i++) {\r\n        console.log(this.errors[i].toString());\r\n        ShowError.showError(this.errors[i].toString());\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n}\r\n\r\nExpManager.init();\r\n\r\n// try {\r\n//   ExpManager.createVariable('first', 'number', 1);\r\n//   ExpManager.createVariable('second', 'number', 2);\r\n//   ExpManager.createVariable('third', 'bool', true);\r\n//   console.log(ExpManager.getValue('third'));\r\n\r\n//   // ExpManager.createExpression('add', '(1 + first + second * (first + second + 3)) / 2');\r\n//   // ExpManager.createExpression('add', 'cos(PI/2) + sin(PI/2)');\r\n//   // console.log(ExpManager.getExpression('add')!.toString());\r\n//   // console.log(' ' + ExpManager.getExpression('add')!.evaluate());\r\n\r\n//   // ExpManager.createExpression('exp1', 'second + 2 * second + abs(-10)');\r\n//   ExpManager.createExpression('exp1', 'first * second + second > 10');\r\n//   console.log('2 ' + ExpManager.getExpression('exp1')!.evaluate());\r\n\r\n//   // ExpManager.createExpression('multiply', 'x * y');\r\n//   // ExpManager.createExpression('substract', 'x - y');\r\n\r\n//   // console.log(ExpManager.getExpression('add')!.evaluate());\r\n\r\n//   // console.log(ExpManager.getExpression('multiply')!.evaluate());\r\n//   // console.log(ExpManager.getExpression('substract')!.evaluate());\r\n\r\n// }\r\n// catch {\r\n\r\n// }\r\n\r\n// ExpManager.printError();\r\n\r\n\r\n","export enum ExpressionType {\r\n  ID, SPECIAL_ID, KEYWORD, STRING, NUMBER, BOOL, OPERATOR, INTEGER, FLOAT, DOUBLE, EOI\r\n}","import { Scope } from \"./scope\";\r\nimport { Tokenizer } from \"./tokenizer\";\r\nimport { ParseError, IPosition } from \"./positions\";\r\nimport { IExpression, BinaryOperator, BinaryExpression, ConstantExpression, VeryTemplateExpression, VeryVarExpression } from \"./expressions\";\r\nimport { ExpressionType } from \"./expressionEnum\";\r\nimport { FunctionExpression } from \"./functionExpression\";\r\nimport { Token } from \"./token\";\r\nimport { IFunction, CustomFunctions } from \"./functions\";\r\nimport { Variable } from \"./variable\";\r\nimport { VariableExpression } from \"./variableExpression\";\r\nimport { VariableScope } from \"../enum\";\r\nimport { VE_Expressions } from \"./veryExpressions\";\r\nimport { VE_Objects, VeryEngineObject } from \"../object\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { VE_Fsm } from \"../state\";\r\n\r\n\r\n\r\nexport class VE_ExpressionParsing {\r\n\r\n  private static _bracketPair: { [key: string]: string } = {};\r\n\r\n  private static _scope: Scope;\r\n  private static _tokenizer: Tokenizer;\r\n\r\n  public static errors: ParseError[] = [];\r\n\r\n  private static _projectName: string = '';\r\n  private static _objectID: string = '';\r\n  private static _fsmID = '';\r\n\r\n  private static _varScope: VariableScope = VariableScope.Local;\r\n\r\n\r\n  public static init(): void {\r\n    this._bracketPair['('] = ')';\r\n    this._bracketPair['['] = ']';\r\n    this._bracketPair['{'] = '}';\r\n    this._bracketPair[''] = '';\r\n    this._bracketPair[''] = '';\r\n  }\r\n\r\n  public static parsing(name_id: string, input_exp: string, scope: Scope, project_name: string, object_id: string, fsm_id: string, var_scope: VariableScope): IExpression {\r\n    this._scope = scope;\r\n    this._projectName = project_name;\r\n    this._objectID = object_id;\r\n    this._fsmID = fsm_id;\r\n    this._varScope = var_scope;\r\n    this._tokenizer = new Tokenizer(input_exp);\r\n    // while(!this._tokenizer.current().isEnd()) {\r\n    //   console.log(this._tokenizer.consume());\r\n    // }\r\n    this.errors = [];\r\n    return this.parse();\r\n  }\r\n\r\n  private static parse(): IExpression {\r\n    let resultExp: IExpression = this.buildExpression();\r\n    if (!this._tokenizer.current().isEnd()) {\r\n      this._tokenizer.addError(this._tokenizer.current(), `${this._tokenizer.current().getSource()}`);\r\n      this._tokenizer.consume();\r\n    }\r\n    this.errors = this._tokenizer.getProblemCollector();\r\n    return resultExp;\r\n  }\r\n\r\n\r\n  private static buildExpression(): IExpression {\r\n    let left: IExpression = this.relationalExp();\r\n    if (this._tokenizer.current().isOperator('&&')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.buildExpression();\r\n      return this.reOrder(left, right, BinaryOperator.Add);\r\n    }\r\n    if (this._tokenizer.current().isOperator('||')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.buildExpression();\r\n      return this.reOrder(left, right, BinaryOperator.Or);\r\n    }\r\n    return left;\r\n  }\r\n\r\n\r\n  private static relationalExp(): IExpression {\r\n    let left: IExpression = this.algebraExp();\r\n    if (this._tokenizer.current().isOperator('<')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.LT);\r\n    }\r\n    if (this._tokenizer.current().isOperator('<=')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.LT_EQ);\r\n    }\r\n    if (this._tokenizer.current().isOperator('==')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.EQ);\r\n    }\r\n    if (this._tokenizer.current().isOperator('>=')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.GT_EQ);\r\n    }\r\n    if (this._tokenizer.current().isOperator('>')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.GT);\r\n    }\r\n    if (this._tokenizer.current().isOperator('!=')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.NEQ);\r\n    }\r\n    return left;\r\n  }\r\n\r\n  private static algebraExp(): IExpression {\r\n    let left: IExpression = this.productExp();\r\n    if (this._tokenizer.current().isOperator('+')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.algebraExp();\r\n      return this.reOrder(left, right, BinaryOperator.Add);\r\n    }\r\n    if (this._tokenizer.current().isOperator('-')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.algebraExp();\r\n      return this.reOrder(left, right, BinaryOperator.Subtract);\r\n    }\r\n    return left;\r\n  }\r\n\r\n  private static productExp(): IExpression {\r\n    let left: IExpression = this.exponentExp();\r\n    if (this._tokenizer.current().isOperator('*')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.productExp();\r\n      return this.reOrder(left, right, BinaryOperator.Multiply);\r\n    }\r\n    if (this._tokenizer.current().isOperator('/')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.productExp();\r\n      return this.reOrder(left, right, BinaryOperator.Divide);\r\n    }\r\n    if (this._tokenizer.current().isOperator('%')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.productExp();\r\n      return this.reOrder(left, right, BinaryOperator.Modulo);\r\n    }\r\n    return left;\r\n  }\r\n\r\n  private static exponentExp(): IExpression {\r\n    let left: IExpression = this.atomExp();\r\n    if (this._tokenizer.current().isOperator('!') || this._tokenizer.current().isOperator('')) {\r\n      left = new BinaryExpression(left, left, BinaryOperator.Not);\r\n    }\r\n    return left;\r\n  }\r\n\r\n  private static atomExp(): IExpression {\r\n    // -\r\n    if (this._tokenizer.current().isOperator('-')) {\r\n      this._tokenizer.consume();\r\n      let result: BinaryExpression = new BinaryExpression(new ConstantExpression(0, 'number'), this.atomExp(), BinaryOperator.Subtract);\r\n      result.setSeal();\r\n      return result;\r\n    }\r\n    // \r\n    if (this._tokenizer.current().isOperator('!') && (this._tokenizer.next().isIdentifier() || this._tokenizer.next().isKeyword() || this._tokenizer.next().isStartBracket())) {\r\n      this._tokenizer.consume();\r\n      let newValue: IExpression = this.atomExp();\r\n      if (newValue.expType === 'bool') {\r\n        let notExp: BinaryExpression = new BinaryExpression(newValue, newValue, BinaryOperator.Not);\r\n        return notExp;\r\n      } else {\r\n        this._tokenizer.addError(this._tokenizer.current(), '(!)bool');\r\n        return ConstantExpression.Empty();\r\n      }\r\n    }\r\n    // +\r\n    if (this._tokenizer.current().isOperator('+') && this._tokenizer.next().isStartBracket()) {\r\n      this._tokenizer.consume();\r\n    }\r\n    // +\r\n    if (this._tokenizer.current().isOperator('+') && this._tokenizer.next().isConstant()) {\r\n      this._tokenizer.consume();\r\n    }\r\n    // +\r\n    if (this._tokenizer.current().isOperator('+') && this._tokenizer.next().isIdentifier()) {\r\n      this._tokenizer.consume();\r\n    }\r\n\r\n    // VeryVar\r\n    // \r\n    // 1**null2.**null3*.*4.*.*\r\n\r\n    // 1.*==null\r\n    // 2..*\r\n    if (this._tokenizer.current().isOperator(\"*\") && this._tokenizer.next().isIdentifier())  //*VeryVarVeryVarExpression\r\n    {\r\n      this._tokenizer.consume();\r\n      let varID: string = \"*\" + this._tokenizer.current().getContents();\r\n      let varExpression: Nullable<IExpression> = VE_Expressions.getParseExpression(this._projectName, this._objectID, varID, this._varScope);\r\n      if (varExpression === null) {\r\n        // \r\n        let templateExpression: Nullable<VeryTemplateExpression> = VE_Expressions.getTemplateExpression(this._projectName, this._objectID, varID, this._varScope);\r\n        if (templateExpression === null) {\r\n          this._tokenizer.addError(this._tokenizer.current(), \"VeryVar\" + varID + \"VeryVar\");\r\n          this._tokenizer.consume();\r\n          return ConstantExpression.Empty();\r\n        }\r\n        else {\r\n          //UnityEngine.Debug.LogError(\"\" + _tokenizer.current());\r\n          // this._tokenizer.consume();\r\n          // return templateExpression;\r\n          // TODO: \r\n          this._tokenizer.addError(this._tokenizer.current(), \"VeryVar\" + varID + \"\");\r\n          this._tokenizer.consume();\r\n          return ConstantExpression.Empty();\r\n        }\r\n      }\r\n      else {\r\n        this._tokenizer.consume();\r\n        return varExpression;\r\n      }\r\n    }\r\n\r\n    // \r\n    if (this._tokenizer.current().isStartBracket()) {\r\n      let endBracket: string = this._bracketPair[this._tokenizer.consume().getTrigger()];\r\n      let result: IExpression = this.buildExpression();\r\n      if (result.className === 'BinaryExpression') {\r\n        (<BinaryExpression>result).setSeal();\r\n      }\r\n      this.expectTrigger(ExpressionType.OPERATOR, endBracket); // \r\n      return result;\r\n    }\r\n    // \r\n    if (this._tokenizer.current().isConstant()) {\r\n      let value: any;\r\n      let typeStr: string = 'string';\r\n      if (this._tokenizer.current().isBool()) {\r\n        value = this._tokenizer.current().getContents().toLowerCase() === 'true' ? true : false;\r\n        typeStr = 'bool';\r\n      } else if (this._tokenizer.current().isNumber()) {\r\n        value = parseFloat(this._tokenizer.current().getContents());\r\n        typeStr = 'number';\r\n        // console.log('' + value);\r\n      } else {\r\n        value = this._tokenizer.current().getContents();\r\n        typeStr = 'string';\r\n      }\r\n      this._tokenizer.consume();\r\n      let constantExp: IExpression = new ConstantExpression(value, typeStr);\r\n      return constantExp;\r\n    }\r\n    // \r\n    if (this._tokenizer.current().isIdentifier()) {\r\n      if (this._tokenizer.next().isStartBracket()) { // \r\n        // \r\n        let endStart: string = this._bracketPair[this._tokenizer.next().getTrigger()];\r\n        return this.functionCall(endStart);\r\n      } else { // \r\n        // VryVar\r\n        let varValue: Variable | null;\r\n        let loc: IPosition = this._tokenizer.current();\r\n        let variableID: string = this._tokenizer.consume().getContents();\r\n        if (variableID.endsWith('.') && this._tokenizer.current().isOperator('*') && this._tokenizer.next().isIdentifier()) { // .*\r\n          // VeryVar.*\r\n          this._tokenizer.consume();\r\n          let varID: string = variableID + '*' + this._tokenizer.current().getContents();\r\n          let varExpression: Nullable<IExpression> = VE_Expressions.getParseExpression(this._projectName, this._objectID, varID, this._varScope);\r\n          if (varExpression === null) {\r\n            // TODO\r\n            let templateExpression: Nullable<VeryTemplateExpression> = VE_Expressions.getTemplateExpression(this._projectName, this._objectID, varID, this._varScope);\r\n            if (templateExpression === null) {\r\n              this._tokenizer.addError(loc, `VeryVar${varID}VeryVar`);\r\n            } else {\r\n              this._tokenizer.addError(this._tokenizer.current(), \"VeryVar\" + varID + \"\");\r\n            }\r\n            this._tokenizer.consume();\r\n            return ConstantExpression.Empty();\r\n          } else {\r\n            this._tokenizer.consume();\r\n            return varExpression;\r\n          }\r\n          // return ConstantExpression.Empty();\r\n        } else {\r\n          // \r\n          varValue = this._scope.find(variableID);\r\n          // console.log(variableID + '  ---  ' + varValue);\r\n          if (varValue === null) {\r\n            this._tokenizer.addError(loc, `${variableID}`);\r\n            return ConstantExpression.Empty();\r\n          } else {\r\n            return new VariableExpression(varValue);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    // TODO\r\n    if (this._tokenizer.current().isKeyword()) {\r\n      // this\r\n      if (this._tokenizer.current().getContents().toLowerCase().trim() === \"this\") {\r\n        if (this._varScope === VariableScope.Fsm && this._fsmID !== \"\") {\r\n          // \r\n          let objects: VE_Objects = VE_Manager.objects(this._projectName);\r\n          if (objects !== null) {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(this._objectID);\r\n            if (veryObject != null) {\r\n              let fsm: VE_Fsm = veryObject.getFsm(this._fsmID);\r\n              if (fsm != null) {\r\n                this._tokenizer.consume();\r\n                return new VeryVarExpression(fsm.fsmVar);\r\n              }\r\n            }\r\n          }\r\n        }\r\n        this._tokenizer.addError(this._tokenizer.current(), \"this\");\r\n        this._tokenizer.consume();\r\n        return ConstantExpression.Empty();\r\n      }\r\n      //   == null \r\n      else if (this._tokenizer.current().getContents().toLowerCase().trim() === \"null\" || this._tokenizer.current().getContents().toLowerCase().trim() === \"none\") {\r\n        //UnityEngine.Debug.LogError(\"\" + _tokenizer.current());\r\n        this._tokenizer.consume();\r\n        // TODO: \r\n        return new VeryTemplateExpression();\r\n      }\r\n      else {\r\n        this._tokenizer.addError(this._tokenizer.current(), \"\" + this._tokenizer.current().getContents() + \"\");\r\n        this._tokenizer.consume();\r\n        return ConstantExpression.Empty();\r\n      }\r\n    }\r\n\r\n    // \r\n    if (this._tokenizer.current().isSpecialIdentifier()) {\r\n      this._tokenizer.addError(this._tokenizer.current(), `ID${this._tokenizer.current().getSource()}`);\r\n      this._tokenizer.consume();\r\n      return ConstantExpression.Empty();\r\n    }\r\n\r\n    // \r\n    this._tokenizer.addError(this._tokenizer.current(), `${this._tokenizer.current().getSource()}`);\r\n    this._tokenizer.consume();\r\n\r\n    return ConstantExpression.Empty();\r\n  }\r\n\r\n  private static reOrder(left: IExpression, right: IExpression, op: BinaryOperator): IExpression {\r\n    if (right.className === 'BinaryExpression') {\r\n      let rightOp: BinaryExpression = <BinaryExpression>right;\r\n      if (!rightOp.isSealed() && rightOp.getPriority() === rightOp.getPriorityOp(op)) {\r\n        this.replaceLeft(rightOp, left, op);\r\n        return right;\r\n      }\r\n    }\r\n    return new BinaryExpression(left, right, op);\r\n  }\r\n\r\n  private static replaceLeft(target: BinaryExpression, newLeft: IExpression, op: BinaryOperator): void {\r\n    if (target.getLeftExp().className === 'BinaryExpression') {\r\n      let leftOp: BinaryExpression = <BinaryExpression>target.getLeftExp();\r\n      if (!leftOp.isSealed() && leftOp.getPriority() === leftOp.getPriorityOp(op)) {\r\n        this.replaceLeft(leftOp, newLeft, op);\r\n        return;\r\n      }\r\n    }\r\n    target.setLeftExp(new BinaryExpression(newLeft, target.getLeftExp(), op));\r\n  }\r\n\r\n  private static functionCall(end_bracket: string): IExpression {\r\n    let call: FunctionExpression = new FunctionExpression();\r\n    let funcToken: Token = this._tokenizer.consume();\r\n    if (!CustomFunctions.hasFunction(funcToken.getContents())) {\r\n      this._tokenizer.addError(funcToken, `${funcToken.getContents()}`);\r\n      return ConstantExpression.Empty();\r\n    }\r\n    let fun: IFunction = CustomFunctions.createFunction(funcToken.getContents());\r\n    call.setFunction(fun);\r\n    this._tokenizer.consume(); // \r\n    while (!this._tokenizer.current().isOperator(end_bracket) && !this._tokenizer.current().isEnd()) {\r\n      if (call.paraCount() !== 0) {\r\n        this.expectTrigger(ExpressionType.OPERATOR, ',');\r\n      }\r\n      call.addPara(this.buildExpression());\r\n    }\r\n    this.expectTrigger(ExpressionType.OPERATOR, end_bracket);\r\n    call.evaluate();\r\n    if (call.paraCount() > fun.parameterNumber() && fun.parameterNumber() >= 0) {\r\n      this._tokenizer.addError(funcToken, `${funcToken.getContents()}Max${fun.parameterNumber()}${call.paraCount()}`);\r\n      return ConstantExpression.Empty();\r\n    }\r\n    return call;\r\n  }\r\n\r\n  private static expectTrigger(type: ExpressionType, trigger: string): void {\r\n    if (this._tokenizer.current().matches(type, trigger)) {\r\n      this._tokenizer.consume();\r\n    } else {\r\n      this._tokenizer.addError(this._tokenizer.current(), `${trigger}${this._tokenizer.current().getTrigger()}`);\r\n    }\r\n  }\r\n\r\n  public static getProjectCollector(): ParseError[] {\r\n    return this._tokenizer.getProblemCollector();\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\n\r\nVE_ExpressionParsing.init();","import { Dictionary } from \"../utility/dictionary\";\r\nimport { IVeryVar } from \"../variables\";\r\nimport { VE_Template } from \"../template\";\r\n\r\nexport interface IExpression {\r\n  expType: string;\r\n  className: string;\r\n  evaluate(): any;\r\n  clone(): IExpression;\r\n}\r\n\r\nexport class TrueExpression implements IExpression {\r\n  public get expType(): string {\r\n    return 'bool';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'TrueExpression';\r\n  }\r\n\r\n  public get value(): boolean {\r\n    return true;\r\n  }\r\n\r\n  constructor() {\r\n  }\r\n\r\n  public evaluate(): any {\r\n    return true;\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let exp: TrueExpression = new TrueExpression();\r\n    return exp;\r\n  }\r\n\r\n  public toString(): string {\r\n    return 'true';\r\n  }\r\n}\r\n\r\nexport class ConstantExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    return this._expType;\r\n  }\r\n  private _expType: string = 'string';\r\n\r\n  public get className(): string {\r\n    return 'ConstantExpression';\r\n  }\r\n\r\n  private _value: any;\r\n\r\n  constructor(value: any, type: string) {\r\n    this._value = value;\r\n    this._expType = type;\r\n  }\r\n\r\n  public evaluate(): any {\r\n    return this._value;\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let expClone: ConstantExpression = new ConstantExpression(this._value, this._expType);\r\n    return expClone;\r\n  }\r\n\r\n  public static Empty(): ConstantExpression {\r\n    return new ConstantExpression(null, 'string');\r\n  }\r\n\r\n  public isEmpty(): boolean {\r\n    if (this._expType === 'string' && this._value === null) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public toString(): string {\r\n    if (this._value !== null) {\r\n      return this._value.toString();\r\n    } else {\r\n      return 'null';\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport enum BinaryOperator {\r\n  Add = '+', Subtract = '-', Multiply = '*', Divide = '/', Modulo = '%', Power = '^', LT = '<', LT_EQ = '<=', EQ = '=', GT_EQ = '>=', GT = '>', NEQ = '!=', And = '&&', Or = '||', Not = '!'\r\n}\r\n\r\nexport class BinaryExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    return this._expType;\r\n  }\r\n  private _expType = '';\r\n\r\n  public get className(): string {\r\n    return 'BinaryExpression';\r\n  }\r\n\r\n  public isRight: boolean = true;\r\n\r\n  private _op: BinaryOperator = BinaryOperator.EQ;\r\n\r\n  private _left: IExpression;\r\n  private _right: IExpression;\r\n  private _isSealed: boolean = false;\r\n\r\n  private static _opDic: { [key: string]: BinaryOperator } = {};\r\n\r\n  private static _priority: Dictionary<BinaryOperator, number> = new Dictionary<BinaryOperator, number>();\r\n\r\n  // private static _priorityKey: BinaryOperator[] = [BinaryOperator.Not, BinaryOperator.Power, BinaryOperator.Multiply, BinaryOperator.Divide, BinaryOperator.Modulo, BinaryOperator.Add, BinaryOperator.Subtract, BinaryOperator.LT, BinaryOperator.LT_EQ, BinaryOperator.EQ, BinaryOperator.GT_EQ, BinaryOperator.GT, BinaryOperator.NEQ, BinaryOperator.And, BinaryOperator.Or];\r\n\r\n  // private static _priorityValue: number[] = [2, 3, 4, 4, 4, 5, 5, 6, 6, 6, 6, 6, 6, 7, 7];\r\n\r\n  public static init(): void {\r\n    this._opDic[\"+\"] = BinaryOperator.Add;\r\n    this._opDic[\"-\"] = BinaryOperator.Subtract;\r\n    this._opDic[\"*\"] = BinaryOperator.Multiply;\r\n    this._opDic[\"/\"] = BinaryOperator.Divide;\r\n    this._opDic[\"%\"] = BinaryOperator.Modulo;\r\n    this._opDic[\"**\"] = BinaryOperator.Power;\r\n    this._opDic[\"^\"] = BinaryOperator.Power;\r\n    this._opDic[\"<\"] = BinaryOperator.LT;\r\n    this._opDic[\"<=\"] = BinaryOperator.LT_EQ;\r\n    this._opDic[\"==\"] = BinaryOperator.EQ;\r\n    this._opDic[\">=\"] = BinaryOperator.GT_EQ;\r\n    this._opDic[\">\"] = BinaryOperator.GT;\r\n    this._opDic[\"!=\"] = BinaryOperator.NEQ;\r\n    this._opDic[\"&&\"] = BinaryOperator.And;\r\n    this._opDic[\"||\"] = BinaryOperator.Or;\r\n    this._opDic[\"!\"] = BinaryOperator.Not;\r\n    this._opDic[\"\"] = BinaryOperator.Not;\r\n\r\n    this._priority.Add(BinaryOperator.Not, 2);\r\n    this._priority.Add(BinaryOperator.Power, 3);\r\n    this._priority.Add(BinaryOperator.Multiply, 4); this._priority.Add(BinaryOperator.Divide, 4); this._priority.Add(BinaryOperator.Modulo, 4);\r\n    this._priority.Add(BinaryOperator.Add, 5); this._priority.Add(BinaryOperator.Subtract, 5);\r\n    this._priority.Add(BinaryOperator.LT, 6); this._priority.Add(BinaryOperator.LT_EQ, 6); this._priority.Add(BinaryOperator.EQ, 6); this._priority.Add(BinaryOperator.GT_EQ, 6); this._priority.Add(BinaryOperator.GT, 6); this._priority.Add(BinaryOperator.NEQ, 6);\r\n    this._priority.Add(BinaryOperator.And, 7); this._priority.Add(BinaryOperator.Or, 7);\r\n  }\r\n\r\n  constructor(left_exp: IExpression, right_exp: IExpression, op: BinaryOperator) {\r\n    this._left = left_exp;\r\n    this._right = right_exp;\r\n    this._op = op;\r\n    // console.log(this._left);\r\n    // console.log(this._right);\r\n    this._expType = this.resultAutoType(left_exp, right_exp, op);\r\n    if (this._expType === 'null') {\r\n      // TODO\r\n      this.isRight = false;\r\n      console.log(\"\" + left_exp.expType + \"\" + right_exp.expType + \"\" + op.toString());\r\n    }\r\n  }\r\n\r\n  private resultAutoType(left: IExpression, right: IExpression, op: BinaryOperator): string {\r\n    if (op === BinaryOperator.Add) {\r\n      if (left.expType === 'string' || right.expType === 'string') {\r\n        return 'string';\r\n      }\r\n      else if (left.expType === 'bool' || right.expType === 'bool') {\r\n        return 'null';\r\n      }\r\n      else if (left.expType === 'number' || right.expType === 'number') {\r\n        return 'number';\r\n      }\r\n      else if (left.expType === 'vector3' || right.expType === 'vector3') {\r\n        return 'vector3';\r\n      }\r\n      else if (left.expType === 'vector2' || right.expType === 'vector2') {\r\n        return 'vector2';\r\n      }\r\n      else {\r\n        return 'null';\r\n      }\r\n    } else if (op === BinaryOperator.Divide || op === BinaryOperator.Multiply || op === BinaryOperator.Modulo || op === BinaryOperator.Power || op === BinaryOperator.Subtract) {\r\n      if (left.expType === 'string' || right.expType === 'string' || left.expType === 'bool' || left.expType === 'bool') {\r\n        return 'null';\r\n      }\r\n      else if (left.expType === 'vector3' && right.expType === 'vector3' && op === BinaryOperator.Subtract) {\r\n        return 'vector3';\r\n      }\r\n      else if (left.expType === 'vector2' && right.expType === 'vector2' && op === BinaryOperator.Subtract) {\r\n        return 'vector2';\r\n      }\r\n      else if ((left.expType === 'number' && right.expType === 'vector3' && op === BinaryOperator.Multiply) || (left.expType === 'vector3' && right.expType === 'number' && op == BinaryOperator.Multiply)) {\r\n        return 'vector3';\r\n      }\r\n      else if ((left.expType === 'number' && right.expType === 'vector2' && op === BinaryOperator.Multiply) || (left.expType === 'vector2' && right.expType === 'number' && op == BinaryOperator.Multiply)) {\r\n        return 'vector2';\r\n      }\r\n      else if (left.expType === 'vector3' && right.expType === 'number' && op === BinaryOperator.Divide) {\r\n        return 'vector3';\r\n      }\r\n      else if (left.expType === 'vector2' && right.expType === 'number' && op === BinaryOperator.Divide) {\r\n        return 'vector2';\r\n      }\r\n      else if (left.expType === 'number' || right.expType === 'number') {\r\n        return 'number';\r\n      }\r\n      else {\r\n        return 'null';\r\n      }\r\n    } else if (op === BinaryOperator.LT || op === BinaryOperator.LT_EQ || op === BinaryOperator.GT_EQ || op === BinaryOperator.GT) {\r\n      if (left.expType === 'string' || right.expType === 'string' || left.expType === 'bool' || right.expType === 'bool') {\r\n        return 'null';\r\n      } else {\r\n        return 'bool';\r\n      }\r\n    } else if (op === BinaryOperator.NEQ || op === BinaryOperator.EQ) {\r\n      if (right.expType !== left.expType) {\r\n        return 'null';\r\n      } else {\r\n        return 'bool';\r\n      }\r\n    } else if (op === BinaryOperator.Not) {\r\n      if (right.expType !== 'bool') {\r\n        return 'null';\r\n      } else {\r\n        return 'bool';\r\n      }\r\n    } else {\r\n      return 'string';\r\n    }\r\n  }\r\n\r\n  public setLeftExp(left_exp: IExpression): void {\r\n    this._left = left_exp;\r\n  }\r\n\r\n  public setRightExp(right_exp: IExpression): void {\r\n    this._right = right_exp;\r\n  }\r\n\r\n  public getOp(): BinaryOperator {\r\n    return this._op;\r\n  }\r\n\r\n  public getLeftExp(): IExpression {\r\n    return this._left;\r\n  }\r\n\r\n  public getRightExp(): IExpression {\r\n    return this._right;\r\n  }\r\n\r\n  public isSealed(): boolean {\r\n    return this._isSealed;\r\n  }\r\n\r\n  public setSeal(): void {\r\n    this._isSealed = true;\r\n  }\r\n\r\n  public toString(): string {\r\n    return \"(\" + this._left.toString() + \" \" + this._op.toString() + \" \" + this._right.toString() + \")\";\r\n    // return this._left.toString() + this._op.toString() + this._right.toString();\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let expClone: BinaryExpression = new BinaryExpression(this._left.clone(), this._right.clone(), this._op);\r\n    return expClone;\r\n  }\r\n\r\n  public evaluate(): any {\r\n    if (this._expType === 'null') {\r\n      return null;\r\n    }\r\n    if (this._left.className === 'FunctionExpression') {\r\n      this._left.evaluate();\r\n    }\r\n    if (this._right.className === 'FunctionExpression') {\r\n      this._right.evaluate();\r\n    }\r\n    this._expType = this.resultAutoType(this._left, this._right, this._op);\r\n    let leftValue: any = this._left.evaluate();\r\n    let rightValue: any = this._right.evaluate();\r\n    if (leftValue === null || rightValue === null) {\r\n      return null;\r\n    }\r\n    if (this._op === BinaryOperator.Add) {\r\n      if (this._expType === 'string') {\r\n        return leftValue.toString() + rightValue.toString();\r\n      } else if (this._expType === 'number') {\r\n        return leftValue + rightValue;\r\n      } else if (this._expType === 'vector3') {\r\n        return (<BABYLON.Vector3>leftValue).add((<BABYLON.Vector3>rightValue));\r\n      } else if (this._expType === 'vector2') {\r\n        return (<BABYLON.Vector2>leftValue).add((<BABYLON.Vector2>rightValue));\r\n      } else {\r\n        return null;\r\n      }\r\n    } else if (this._op === BinaryOperator.Subtract) {\r\n      if (this._expType === 'number') {\r\n        return leftValue - rightValue;\r\n      } else if (this._expType === 'vector3') {\r\n        return (<BABYLON.Vector3>leftValue).subtract((<BABYLON.Vector3>rightValue));\r\n      } else if (this._expType === 'vector2') {\r\n        return (<BABYLON.Vector2>leftValue).subtract((<BABYLON.Vector2>rightValue));\r\n      } else {\r\n        return null;\r\n      }\r\n    } else if (this._op === BinaryOperator.Multiply) {\r\n      if (this._expType === 'number') {\r\n        return leftValue * rightValue;\r\n      } else if (this._expType === 'vector3') {\r\n        if (typeof (leftValue) === 'number') {\r\n          return (<BABYLON.Vector3>rightValue).multiplyByFloats(leftValue, leftValue, leftValue);\r\n        } else if (typeof (rightValue) === 'number') {\r\n          return (<BABYLON.Vector3>leftValue).multiplyByFloats(rightValue, rightValue, rightValue);\r\n        } else {\r\n          return null;\r\n        }\r\n      } else if (this._expType === 'vector2') {\r\n        if (typeof (leftValue) === 'number') {\r\n          return (<BABYLON.Vector2>rightValue).multiplyByFloats(leftValue, leftValue);\r\n        } else if (typeof (rightValue) === 'number') {\r\n          return (<BABYLON.Vector2>leftValue).multiplyByFloats(rightValue, rightValue);\r\n        } else {\r\n          return null;\r\n        }\r\n      }\r\n    } else if (this._op === BinaryOperator.Divide) {\r\n      if (this._expType === 'number') {\r\n        return leftValue / rightValue;\r\n      } else if (this._expType === 'vector3') {\r\n        if (typeof (rightValue) === 'number') {\r\n          return new BABYLON.Vector3((<BABYLON.Vector3>leftValue).x / rightValue, (<BABYLON.Vector3>leftValue).y / rightValue, (<BABYLON.Vector3>leftValue).z / rightValue);\r\n        } else {\r\n          return null;\r\n        }\r\n      } else if (this._expType === 'vector2') {\r\n        if (typeof (rightValue) === 'number') {\r\n          return new BABYLON.Vector2((<BABYLON.Vector2>leftValue).x / rightValue, (<BABYLON.Vector2>leftValue).y / rightValue);\r\n        } else {\r\n          return null;\r\n        }\r\n      }\r\n    } else if (this._op === BinaryOperator.Modulo) {\r\n      if (typeof (leftValue) === 'number' && typeof (rightValue) === 'number') {\r\n        return leftValue % rightValue;\r\n      } else {\r\n        return null;\r\n      }\r\n    } else if (this._op === BinaryOperator.Power) {\r\n      if (typeof (leftValue) === 'number' && typeof (rightValue) === 'number') {\r\n        return Math.pow(leftValue, rightValue);\r\n      } else {\r\n        return null;\r\n      }\r\n    } else if (this._op === BinaryOperator.And) {\r\n      let l: boolean = this.getBoolean(leftValue);\r\n      let r: boolean = this.getBoolean(rightValue);\r\n      return l && r;\r\n    } else if (this._op === BinaryOperator.Or) {\r\n      let l: boolean = this.getBoolean(leftValue);\r\n      let r: boolean = this.getBoolean(rightValue);\r\n      return l || r;\r\n    } else if (this._op === BinaryOperator.LT) {\r\n      return leftValue < rightValue;\r\n    } else if (this._op === BinaryOperator.LT_EQ) {\r\n      return leftValue <= rightValue;\r\n    } else if (this._op === BinaryOperator.GT_EQ) {\r\n      return leftValue >= rightValue;\r\n    } else if (this._op === BinaryOperator.GT) {\r\n      return leftValue > rightValue;\r\n    } else if (this._op === BinaryOperator.EQ) {\r\n      return leftValue === rightValue;\r\n    } else if (this._op === BinaryOperator.NEQ) {\r\n      return leftValue !== rightValue;\r\n    } else if (this._op === BinaryOperator.Not) {\r\n      return !this.getBoolean(rightValue);\r\n    } else {\r\n      return !this.getBoolean(leftValue);\r\n    }\r\n  }\r\n\r\n  private getBoolean(value: any): boolean {\r\n    if (typeof (value) === 'number') {\r\n      if (value === 0) {\r\n        return false;\r\n      } else {\r\n        return true;\r\n      }\r\n    } else if (typeof (value) === 'string') {\r\n      if (value === '') {\r\n        return false;\r\n      } else {\r\n        return true;\r\n      }\r\n    } else if (typeof (value) === 'boolean') {\r\n      return value;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getPriority(): number {\r\n    // let p: number = BinaryExpression._priorityKey.indexOf(this._op);\r\n    // if(p > -1) {\r\n    //   return BinaryExpression._priorityValue[p];\r\n    // } else {\r\n    //   return 100;\r\n    // }\r\n    let p: number | null = BinaryExpression._priority.GetValue(this._op);\r\n    if (p === null) {\r\n      return 100;\r\n    } else {\r\n      return p;\r\n    }\r\n  }\r\n\r\n  public getPriorityOp(op: BinaryOperator): number {\r\n    // let p: number = BinaryExpression._priorityKey.indexOf(op);\r\n    // if(p > -1) {\r\n    //   return BinaryExpression._priorityValue[p];\r\n    // } else {\r\n    //   return 100;\r\n    // }\r\n    let p: number | null = BinaryExpression._priority.GetValue(op);\r\n    if (p === null) {\r\n      return 100;\r\n    } else {\r\n      return p;\r\n    }\r\n  }\r\n}\r\n\r\nexport class VeryVarExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    if (this._value) {\r\n      return this._value.varType;\r\n    } else {\r\n      return 'null';\r\n    }\r\n  }\r\n\r\n  private _value: IVeryVar;\r\n\r\n  public get className(): string {\r\n    return 'VeryVarExpression';\r\n  }\r\n\r\n  public get value(): IVeryVar {\r\n    return this._value;\r\n  }\r\n\r\n  constructor(value: IVeryVar) {\r\n    this._value = value;\r\n  }\r\n\r\n  public evaluate(): any {\r\n    return this._value.getValue();\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let expClone: VeryVarExpression = new VeryVarExpression(this._value.clone());\r\n    return expClone;\r\n  }\r\n\r\n  public toString(): string {\r\n    if (this._value) {\r\n      return this._value.toString();\r\n    } else {\r\n      return 'null';\r\n    }\r\n  }\r\n}\r\n\r\nexport class VeryTemplateExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    return 'bool';\r\n  }\r\n\r\n  private _isTemplate: boolean = false;\r\n  private _template: VE_Template;\r\n\r\n  public get className(): string {\r\n    return 'VeryTemplateExpression';\r\n  }\r\n\r\n  // public get value(): IVeryVar {\r\n  //   return this._value;\r\n  // }\r\n\r\n  // TODO \r\n  constructor() {\r\n    this._template = new VE_Template('', '');\r\n  }\r\n\r\n  public setTemplate(template: VE_Template): void {\r\n    this._isTemplate = true;\r\n    this._template = template;\r\n  }\r\n\r\n  public evaluate(): any {\r\n    if (this._isTemplate) {\r\n      if (!this._template) {\r\n        return false;\r\n      }\r\n      else {\r\n        return this._template.templateInstance !== null;\r\n      }\r\n    }\r\n    else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let varExp: VeryTemplateExpression = new VeryTemplateExpression();\r\n    varExp._template = this._template;\r\n    varExp._isTemplate = this._isTemplate;\r\n    return varExp;\r\n  }\r\n\r\n  public toString(): string {\r\n    if (this._isTemplate) {\r\n      if (!this._template) {\r\n        return \"false\";\r\n      }\r\n      else {\r\n        return (this._template.templateInstance === null).toString();\r\n      }\r\n    }\r\n    else {\r\n      return \"false\";\r\n    }\r\n  }\r\n}\r\n\r\n\r\nBinaryExpression.init();","import { ParseError } from \"./positions\";\r\n\r\nexport abstract class ForwardQuery<T> {\r\n\r\n  protected itemBuffer: Array<T> = [];\r\n\r\n  protected endReached: boolean = false;\r\n\r\n  protected problemCollector: Array<ParseError> = [];\r\n\r\n  protected endOfInputIndicator: T | undefined = undefined;\r\n\r\n  public next(): T {\r\n    return this.nextOffset(1);\r\n  }\r\n\r\n  public nextOffset(offset: number): T {\r\n    while (this.itemBuffer.length <= offset && !this.endReached) {\r\n      let item: T | undefined = this.fetch();\r\n      if (item !== undefined) {\r\n        this.itemBuffer.push(item);\r\n      } else {\r\n        this.endReached = true;\r\n      }\r\n    }\r\n    if (offset >= this.itemBuffer.length) {\r\n      if (this.endOfInputIndicator === undefined) {\r\n        this.endOfInputIndicator = this.endOfInput();\r\n      }\r\n      return this.endOfInputIndicator;\r\n    } else {\r\n      return this.itemBuffer[offset];\r\n    }\r\n  }\r\n\r\n  public current(): T {\r\n    return this.nextOffset(0);\r\n  }\r\n\r\n  protected abstract endOfInput(): T;\r\n\r\n  protected abstract fetch(): T | undefined;\r\n\r\n  public consume(): T {\r\n    let result: T = this.current();\r\n    this.consumeNext(1);\r\n    return result;\r\n  }\r\n\r\n  public consumeNext(numberOfItems: number): void {\r\n    if (numberOfItems < 0) {\r\n      return;\r\n    }\r\n    while (numberOfItems-- > 0) {\r\n      if (this.itemBuffer.length !== 0) {\r\n        this.itemBuffer.shift();\r\n      } else {\r\n        if (this.endReached) {\r\n          return;\r\n        } else {\r\n          let item: T | undefined = this.fetch();\r\n          if (item === undefined) {\r\n            this.endReached = true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public getProblemCollector(): Array<ParseError> {\r\n    return this.problemCollector;\r\n  }\r\n\r\n  public setProblemCollector(problemCollector: Array<ParseError>): void {\r\n    this.problemCollector = problemCollector;\r\n  }\r\n\r\n\r\n}","import { IExpression } from \"./expressions\";\r\nimport { IFunction } from \"./functions\";\r\n\r\nexport class FunctionExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    return this._function.expType;\r\n  }\r\n\r\n  public get className(): string {\r\n    return this._function.className;\r\n  }\r\n\r\n  private _function!: IFunction;\r\n  private _paras: IExpression[] = [];\r\n\r\n  public setFunction(func: IFunction): void {\r\n    this._function = func;\r\n  }\r\n\r\n  public addPara(exp: IExpression): void {\r\n    this._paras.push(exp);\r\n  }\r\n\r\n  public paraCount(): number {\r\n    return this._paras.length;\r\n  }\r\n\r\n  public evaluate(): any {\r\n    let r: any = null;\r\n    try {\r\n      r = this._function.evaluate(this._paras);\r\n    } catch (e) {\r\n      console.log('' + e);\r\n      return null;\r\n    }\r\n    return r;\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let expClone: FunctionExpression = new FunctionExpression();\r\n    expClone._function = this._function;\r\n    for (let i: number = 0; i < this._paras.length; i++) {\r\n      expClone._paras.push(this._paras[i].clone());\r\n    }\r\n    return expClone;\r\n  }\r\n\r\n  public toString(): string {\r\n    let printStr: string = this._function.className + '(';\r\n    for(let i: number = 0; i < this._paras.length; i++) {\r\n      if(i > 0) {\r\n        printStr += ',' + this._paras[i].toString();\r\n      } else {\r\n        printStr += this._paras[i].toString();\r\n      }\r\n    }\r\n    return printStr + ')';\r\n  }\r\n\r\n}","import { IExpression } from \"./expressions\";\r\nimport { ShowError } from \"../html\";\r\n\r\nexport interface IFunction {\r\n  expType: string;\r\n  className: string;\r\n  parameterNumber(): number;\r\n  evaluate(args: Array<IExpression>): any;\r\n}\r\n\r\nexport class Pow implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'pow';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 2;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.pow(args[0].evaluate(), args[1].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Pow1${args[0].expType}1${args[0].evaluate()}2${args[1].expType}2${args[1].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Ln implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'ln';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.log(args[0].evaluate());\r\n    if (value === NaN || value === Infinity) {\r\n      ShowError.showError(`Ln${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Lg implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'lg';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.log10(args[0].evaluate());\r\n    if (value === NaN || value === Infinity) {\r\n      ShowError.showError(`Lg${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Sqrt implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'sqrt';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.sqrt(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Sqrt${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Abs implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'abs';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.abs(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Abs${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Random implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'random';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 2;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let start: number = args[0].evaluate();\r\n    let distance: number = args[1].evaluate() - args[0].evaluate();\r\n    let value: number = Math.random() * distance + start;\r\n    if (value === NaN) {\r\n      ShowError.showError(`Random1${args[0].expType}1${args[0].evaluate()}2${args[1].expType}2${args[1].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Round implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'round';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.round(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Round${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Sin implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'sin';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.sin(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Sin${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class ASin implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'asin';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.asin(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`ASin${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Cos implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'cos';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.cos(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Cos${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class ACos implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'acos';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.acos(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`ACos${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Tan implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'tan';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.tan(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Tan${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class ATan implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'atan';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.atan(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`ATan${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\n\r\nexport class CustomFunctions {\r\n  private static _functions: {[key:string]: IFunction} = {};\r\n\r\n  public static hasFunction(func_name: string): boolean {\r\n    func_name = func_name.toLowerCase();\r\n    if(this._functions[func_name]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static addFunction(func: IFunction): void {\r\n    let funcName: string = func.className.toLowerCase();\r\n    if(this._functions[funcName]) {\r\n      ShowError.showError(`IDID${funcName}ID`);\r\n    } else {\r\n      this._functions[funcName] = func;\r\n    }\r\n  }\r\n\r\n  public static createFunction(func_name: string): IFunction {\r\n    func_name = func_name.toLowerCase();\r\n    return Object.create(this._functions[func_name]);\r\n  }\r\n\r\n  public static remove(func_name: string): void {\r\n    func_name = func_name.toLowerCase();\r\n    delete this._functions[func_name];\r\n  }\r\n}\r\n\r\n\r\nCustomFunctions.addFunction(new Pow());\r\nCustomFunctions.addFunction(new Ln());\r\nCustomFunctions.addFunction(new Lg());\r\nCustomFunctions.addFunction(new Sqrt());\r\nCustomFunctions.addFunction(new Abs());\r\nCustomFunctions.addFunction(new Random());\r\nCustomFunctions.addFunction(new Round());\r\nCustomFunctions.addFunction(new Sin());\r\nCustomFunctions.addFunction(new ASin());\r\nCustomFunctions.addFunction(new Cos());\r\nCustomFunctions.addFunction(new ACos());\r\nCustomFunctions.addFunction(new Tan());\r\nCustomFunctions.addFunction(new ATan());\r\n\r\n","export * from './expressionEnum';\r\nexport * from './expressions';\r\nexport * from './functions';\r\nexport * from './positions';\r\nexport * from './expChar';\r\nexport * from './token';\r\nexport * from './forwardQuery';\r\nexport * from './tokenizer';\r\nexport * from './tokenReader';\r\nexport * from './variable';\r\nexport * from './variableExpression';\r\nexport * from './scope';\r\nexport * from './functionExpression';\r\nexport * from './expressionParsing';\r\nexport * from './expManager';\r\nexport * from './veryExpressions';","export interface IPosition {\r\n  getLine(): number;\r\n  getPos(): number;\r\n}\r\n\r\n\r\nexport class NameLocation implements IPosition {\r\n\r\n  private _value: string = '';\r\n  private _line: number = 0;\r\n  private _pos: number = 0;\r\n\r\n\r\n  constructor(value: string) {\r\n    this._value = value;\r\n    this._line = 1;\r\n    this._pos = 1;\r\n  }\r\n\r\n\r\n  public getValue(): string {\r\n    return this._value;\r\n  }\r\n\r\n  public getLine(): number {\r\n    return this._line;\r\n  }  \r\n  \r\n  \r\n  public getPos(): number {\r\n    return this._pos;\r\n  }\r\n}\r\n\r\nexport enum SeverityExp{\r\n  Warning,\r\n  Error\r\n}\r\n\r\nexport class ParseError{\r\n\r\n  private _pos: IPosition;\r\n  private _message: string;\r\n  private _severity: SeverityExp;\r\n\r\n  constructor(pos: IPosition, msg: string, severity: SeverityExp) {\r\n    this._pos = pos;\r\n    this._message = msg;\r\n    this._severity = severity;\r\n  }\r\n\r\n  public static Warning(pos: IPosition, msg: string): ParseError {\r\n    let message: string = msg;\r\n    if(pos.getLine() > 0) {\r\n      message = `>>>${pos.getLine()}${pos.getPos()}${msg}`;\r\n    }\r\n    return new ParseError(pos, message, SeverityExp.Warning);\r\n  }\r\n\r\n  public static Error(pos: IPosition, msg: string): ParseError {\r\n    let message: string = msg;\r\n    if(pos.getLine() > 0) {\r\n      message = `>>>${pos.getLine()}${pos.getPos()}${msg}`;\r\n    }\r\n    return new ParseError(pos, message, SeverityExp.Error);\r\n  }\r\n\r\n  public getPosition(): IPosition {\r\n    return this._pos;\r\n  }\r\n\r\n  public getMessage(): string {\r\n    return this._message;\r\n  }\r\n\r\n  public getSeverity(): SeverityExp {\r\n    return this._severity;\r\n  }\r\n\r\n  public toString(): string {\r\n    return `${this._severity.toString()}${this._message}`;\r\n  }\r\n\r\n}","import { Variable } from \"./variable\";\r\n\r\nexport class Scope {\r\n\r\n  private _parent: Scope | undefined = undefined;\r\n\r\n  private _context: { [key: string]: Variable } = {};\r\n\r\n  private static _root: Scope;\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public static Create(): Scope {\r\n    let result: Scope = new Scope();\r\n    result._parent = Scope.GetRootScope();\r\n    return result;\r\n  }\r\n\r\n  public static GetRootScope(): Scope {\r\n    if (Scope._root === undefined) {\r\n      Scope._root = new Scope();\r\n      Scope._root.setVariable(\"PI\", 'number', Math.PI).makeConstant(Math.PI);\r\n      Scope._root.setVariable(\"EULER\", 'number', Math.E).makeConstant(Math.E);\r\n    }\r\n    return Scope._root;\r\n  }\r\n\r\n  public static CreateWithParent(parent: Scope): Scope {\r\n    let result: Scope = Scope.Create();\r\n    result._parent = parent;\r\n    return result;\r\n  }\r\n\r\n  public find(name: string): Variable | null {\r\n    if (this._context[name]) {\r\n      return this._context[name];\r\n    }\r\n    if (this._parent !== undefined) {\r\n      return this._parent.find(name);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  public setVariable(name: string, type: string, value: any): Variable {\r\n    let result: Variable | null = this.find(name);\r\n    if (result !== null) {\r\n      result.setType(type);\r\n      result.setValue(value);\r\n      return result;\r\n    }\r\n    return this.createVariable(name, type, value);\r\n  }\r\n\r\n  public createVariable(name: string, type: string, value: any): Variable {\r\n    if (this._context[name]) {\r\n      this._context[name].setType(type);\r\n      this._context[name].setValue(value);\r\n      return this._context[name];\r\n    }\r\n    let result: Variable = new Variable(name, type, value);\r\n    this._context[name] = result;\r\n    return result;\r\n  }\r\n\r\n\r\n  public setValue(name: string, value: any): void {\r\n    if (this._context[name]) {\r\n      this._context[name].setValue(value);\r\n    }\r\n  }\r\n\r\n  public isCreated(name: string): boolean {\r\n    if (this._context[name]) {\r\n      return true;\r\n    }\r\n    if (this._parent !== undefined) {\r\n      if (this._parent.find(name) !== null) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public clear(): void {\r\n    this._context = {};\r\n  }\r\n\r\n}","import { IPosition } from \"./positions\";\r\nimport { ExpressionType } from \"./expressionEnum\";\r\nimport { ExpChar } from \"./expChar\";\r\n\r\nexport class Token implements IPosition {\r\n\r\n  public type: ExpressionType = ExpressionType.STRING;\r\n\r\n  private _source: string = '';\r\n  private _contents: string = '';\r\n  private _trigger: string = '';\r\n\r\n  private _line: number = 0;\r\n  private _pos: number = 0;\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public static Create(type: ExpressionType, pos: IPosition): Token {\r\n    let result: Token = new Token();\r\n    result.type = type;\r\n    result._line = pos.getLine();\r\n    result._pos = pos.getPos();\r\n    return result;\r\n  }\r\n\r\n  public static CreateAndFill(type: ExpressionType, ch: ExpChar): Token {\r\n    let result: Token = new Token();\r\n    result.type = type;\r\n    result._line = ch.getLine();\r\n    result._pos = ch.getPos();\r\n    result._contents = ch.getValue();\r\n    result._trigger = ch.getValue();\r\n    result._source = ch.toString();\r\n    return result;\r\n  }\r\n\r\n  public addToTrigger(ch: ExpChar): Token {\r\n    this._trigger += ch.getValue();\r\n    this._source += ch.getValue();\r\n    return this;\r\n  }\r\n\r\n  public addToSource(ch: ExpChar): Token {\r\n    this._source += ch.getValue();\r\n    return this;\r\n  }\r\n\r\n  public addToContentChar(ch: ExpChar): Token {\r\n    this.addToContent(ch.getValue());\r\n    return this;\r\n  }\r\n\r\n  public addToContent(ch: string): Token {\r\n    this._contents += ch;\r\n    this._source += ch;\r\n    return this;\r\n  }\r\n\r\n  public getTrigger(): string {\r\n    return this._trigger;\r\n  }\r\n\r\n  public getTokenType(): ExpressionType {\r\n    return this.type;\r\n  }\r\n\r\n  public getContents(): string {\r\n    return this._contents;\r\n  }\r\n\r\n  public getSource(): string {\r\n    return this._source;\r\n  }\r\n\r\n  public getLine(): number {\r\n    return this._line;\r\n  }\r\n\r\n  public getPos(): number {\r\n    return this._pos;\r\n  }\r\n\r\n  public setTokenType(new_type: ExpressionType): void {\r\n    this.type = new_type;\r\n  }\r\n\r\n  public setTrigger(trigger: string): void {\r\n    this._trigger = trigger;\r\n  }\r\n\r\n  public setContent(content: string): void {\r\n    this._contents = content;\r\n  }\r\n\r\n  public setSource(source: string): void {\r\n    this._source = source;\r\n  }\r\n\r\n  public isEnd(): boolean {\r\n    return this.type === ExpressionType.EOI;\r\n  }\r\n\r\n  public is(type: ExpressionType): boolean {\r\n    return this.type === type;\r\n  }\r\n\r\n  public matches(type: ExpressionType, trigger: string): boolean {\r\n    if (!this.is(type)) {\r\n      return false;\r\n    }\r\n    if (trigger === '') {\r\n      return false;\r\n    }\r\n    return this.getTrigger() === trigger;\r\n  }\r\n\r\n  public isOperator(symbols: string): boolean {\r\n    if (symbols.length === 0) {\r\n      return this.is(ExpressionType.OPERATOR);\r\n    }\r\n    for (let i: number = 0; i < symbols.length; i++) {\r\n      if (this.matches(ExpressionType.OPERATOR, symbols[i])) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public isStartBracket(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === '(' || this._trigger === '') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isEndBracket(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === ')' || this._trigger === '') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isStartSquareBracket(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === '[' || this._trigger === '') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isEndSquareBracket(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === ']' || this._trigger === '') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isStartBrace(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === '{') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isEndBrace(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === '}') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isKeyword(...keywords: string[]): boolean {\r\n    if (keywords.length === 0) {\r\n      return this.is(ExpressionType.KEYWORD);\r\n    }\r\n    for (let i: number = 0; i < keywords.length; i++) {\r\n      if (this.matches(ExpressionType.KEYWORD, keywords[i])) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public isIdentifier(...values: string[]): boolean {\r\n    if (values.length === 0) {\r\n      return this.is(ExpressionType.ID);\r\n    }\r\n    for (let i: number = 0; i < values.length; i++) {\r\n      if (this.matches(ExpressionType.ID, values[i])) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public isSpecialIdentifier(...triggers: string[]): boolean {\r\n    if (triggers.length === 0) {\r\n      return this.is(ExpressionType.SPECIAL_ID);\r\n    }\r\n    for (let i: number = 0; i < triggers.length; i++) {\r\n      if (this.matches(ExpressionType.SPECIAL_ID, triggers[i])) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public isSpecialIdentifierWithContent(trigger: string, ...contents: string[]): boolean {\r\n    if (!this.matches(ExpressionType.SPECIAL_ID, trigger)) {\r\n      return false;\r\n    }\r\n    if (contents.length === 0) {\r\n      return true;\r\n    }\r\n    for (let i: number = 0; i < contents.length; i++) {\r\n      if (this.getContents() === contents[i]) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public isNumber(): boolean {\r\n    return this.is(ExpressionType.NUMBER);\r\n  }\r\n\r\n  public isBool(): boolean {\r\n    return this.is(ExpressionType.BOOL);\r\n  }\r\n\r\n  public isString(): boolean {\r\n    return this.is(ExpressionType.STRING);\r\n  }\r\n\r\n  public isConstant(): boolean {\r\n    return this.isNumber() || this.isBool() || this.isString();\r\n  }\r\n\r\n  public toString(): string {\r\n    return this.getTokenType().toString() + ': ' + this.getContents() + ' (' + this._line + ': ' + this._pos + '), Trigger: ' + this.getTrigger();\r\n  }\r\n\r\n\r\n\r\n\r\n}","import { ForwardQuery } from \"./forwardQuery\";\r\nimport { ExpChar } from \"./expChar\";\r\n\r\nexport class TokenReader extends ForwardQuery<ExpChar> {\r\n\r\n  private _inputExp: string = '';\r\n  private _line: number = 1;\r\n  private _pos: number = 0;\r\n  private _count: number = 0;\r\n  private _operator: number = 0;\r\n\r\n  constructor(input_exp: string) {\r\n    super();\r\n    if (input_exp === '') {\r\n\r\n    }\r\n    this._inputExp = input_exp;\r\n    this._count = input_exp.length;\r\n    this._operator = 0;\r\n  }\r\n\r\n  protected endOfInput(): ExpChar {\r\n    return new ExpChar('\\0', this._line, this._pos);\r\n  }\r\n\r\n\r\n  protected fetch(): ExpChar | undefined {\r\n    if (this._operator <= this._count - 1) {\r\n      let readChar: string = this._inputExp[this._operator];\r\n      this._operator++;\r\n      if (readChar === '\\n') {\r\n        this._line++;\r\n        this._pos = 0;\r\n      }\r\n      this._pos++;\r\n      return new ExpChar(readChar, this._line, this._pos);\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  public toString(): string {\r\n    if (this.itemBuffer.length === 0) {\r\n      return this._line + ':' + this._pos + ': Buffer empty';\r\n    }\r\n    if (this.itemBuffer.length < 2) {\r\n      return this._line + ':' + this._pos + ': ' + this.current().toString();\r\n    }\r\n    return this._line + ':' + this._pos + ': ' + this.current().toString() + ', ' + this.next().toString();\r\n  }\r\n\r\n}","import { ForwardQuery } from \"./forwardQuery\";\r\nimport { Token } from \"./token\";\r\nimport { TokenReader } from \"./tokenReader\";\r\nimport { ExpressionType } from \"./expressionEnum\";\r\nimport { ParseError, IPosition } from \"./positions\";\r\nimport { ExpChar } from \"./expChar\";\r\n\r\nexport class Tokenizer extends ForwardQuery<Token> {\r\n\r\n  private _inputExp: TokenReader;\r\n\r\n  private _decimalSeparator: string = '.';\r\n  private _lineComment: string = '//';\r\n  private _blockCommentStart: string = '/*';\r\n  private _blockCommentEnd: string = '*/';\r\n  private _brackets: string[] = ['(', ')', '', '', '[', ']', '{', '}', '', ''];\r\n  private _treatSinglePipeAsBracket: boolean = true;\r\n  private _specialIdStarters: string[] = [];\r\n  private _specialIdTerminators: string[] = [];\r\n  private _keywords: { [key: string]: string } = {};\r\n  private _keywordsCaseSensitive: boolean = false;\r\n  private _stringDelimiters: { [key: string]: string } = {};\r\n  private _boolConstant: string[] = [];\r\n\r\n  constructor(input_exp: string) {\r\n    super();\r\n    this._inputExp = new TokenReader(input_exp);\r\n    this._stringDelimiters = {};\r\n    this._stringDelimiters['\\\"'] = '\\\\';\r\n    this._stringDelimiters['\\''] = '\\0';\r\n    this._boolConstant = [];\r\n    this._boolConstant.push('false');\r\n    this._boolConstant.push('true');\r\n    this._keywords = {};\r\n    this._keywords['this'] = 'this';\r\n    this._keywords['null'] = 'null';\r\n    this._keywords['none'] = 'none';\r\n    this._keywords['undefined'] = 'undefined';\r\n  }\r\n\r\n  public endOfInput(): Token {\r\n    return Token.CreateAndFill(ExpressionType.EOI, this._inputExp.current());\r\n  }\r\n\r\n  public fetch(): Token | undefined {\r\n    // \r\n    while (this._inputExp.current().isWhiteSpace()) {\r\n      this._inputExp.consume();\r\n    }\r\n\r\n    // \r\n    if (this._inputExp.current().isEndOfInput()) {\r\n      return undefined;\r\n    }\r\n\r\n    // \r\n    if (this.isAtStartOfLineComment(true)) {\r\n      this.skipToEndOfLine();\r\n      return this.fetch();\r\n    }\r\n\r\n    // \r\n    if (this.isAtStartOfBlockComment(true)) {\r\n      this.skipBlockComment();\r\n      return this.fetch();\r\n    }\r\n\r\n    // \r\n    if (this.isAtStartOfNumber()) {\r\n      return this.fetchNumber();\r\n    }\r\n\r\n    // \r\n    if (this.isAtStartOfIdentifier()) {\r\n      return this.fetchId();\r\n    }\r\n\r\n    // \r\n    if (this._stringDelimiters[this._inputExp.current().getValue()]) {\r\n      return this.fetchString();\r\n    }\r\n\r\n    //\r\n    if (this.isAtBracket(false)) {\r\n      return Token.CreateAndFill(ExpressionType.OPERATOR, this._inputExp.consume());\r\n    }\r\n\r\n    // ID$Test$\r\n    if (this.isAtStartOfSpecialId()) {\r\n      return this.fetchSpecialId();\r\n    }\r\n\r\n    // \r\n    if (this.isOperator(this._inputExp.current())) {\r\n      return this.fetchOperator();\r\n    }\r\n\r\n    //\r\n    this.problemCollector.push(ParseError.Error(this._inputExp.current(), \": \" + this._inputExp.current().getValue()));\r\n\r\n    this._inputExp.consume();\r\n    return this.fetch();\r\n  }\r\n\r\n  private fetchNumber(): Token {\r\n    let result: Token = Token.Create(ExpressionType.NUMBER, this._inputExp.current());\r\n    result.addToContentChar(this._inputExp.consume());\r\n    let hasDecimal: boolean = false;\r\n    while (this._inputExp.current().isDigit() || this._inputExp.current().is(this._decimalSeparator)) {\r\n      if (this._inputExp.current().is(this._decimalSeparator)) {\r\n        if (hasDecimal) {\r\n          this.problemCollector.push(ParseError.Error(this._inputExp.current(), \"\"));\r\n        }\r\n        hasDecimal = true;\r\n        result.addToContentChar(this._inputExp.consume());\r\n      } else {\r\n        result.addToContentChar(this._inputExp.consume());\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  private fetchId(): Token {\r\n    let result: Token = Token.Create(ExpressionType.ID, this._inputExp.current());\r\n    result.addToContentChar(this._inputExp.consume());\r\n    while (this.isIdentifierChar(this._inputExp.current())) {\r\n      result.addToContentChar(this._inputExp.consume());\r\n    }\r\n    //UnityEngine.Debug.LogWarning(result.GetContents());\r\n    if (!this._inputExp.current().isEndOfInput() && this._specialIdTerminators.indexOf(this._inputExp.current().getValue()) > -1) {\r\n      let specialId: Token = Token.Create(ExpressionType.SPECIAL_ID, result);\r\n      specialId.setTrigger(this._inputExp.current().getValue());\r\n      specialId.setContent(result.getContents());\r\n      specialId.setSource(result.getContents());\r\n      specialId.addToSource(this._inputExp.current());\r\n      this._inputExp.consume();\r\n      return this.handleKeywords(specialId);\r\n    }\r\n    return this.handleKeywords(result);\r\n  }\r\n\r\n  private fetchString(): Token {\r\n    //\r\n    let separator: string = this._inputExp.current().getValue();\r\n    //\r\n    //char escapeChar = _stringDelimiters[_inputExp.current().GetValue()];\r\n    let result: Token = Token.Create(ExpressionType.STRING, this._inputExp.current());\r\n    result.addToTrigger(this._inputExp.consume());\r\n    while (!this._inputExp.current().isNewLine() && !this._inputExp.current().is(separator) && !this._inputExp.current().isEndOfInput()) {\r\n      result.addToContentChar(this._inputExp.consume());\r\n    }\r\n    if (this._inputExp.current().is(separator)) {\r\n      result.addToSource(this._inputExp.consume());\r\n    }\r\n    else {\r\n      this.problemCollector.push(ParseError.Error(this._inputExp.current(), \"\"));\r\n    }\r\n    return result;\r\n  }\r\n\r\n  private isAtStartOfLineComment(consume: boolean): boolean {\r\n    if (this._lineComment !== '') {\r\n      return this.canConsumeThisString(this._lineComment, consume);\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  private canConsumeThisString(check_string: string, consume: boolean): boolean {\r\n    for (let i: number = 0; i < check_string.length; i++) {\r\n      //next//\r\n      if (!(this._inputExp.nextOffset(i).is(check_string[i]))) {\r\n        return false;\r\n      }\r\n    }\r\n    if (consume) {\r\n      this._inputExp.consumeNext(check_string.length);\r\n    }\r\n    return true;\r\n  }\r\n\r\n  private skipToEndOfLine(): void {\r\n    while (!this._inputExp.current().isEndOfInput() && !this._inputExp.current().isNewLine()) {\r\n      this._inputExp.consume();\r\n    }\r\n  }\r\n\r\n  private isAtStartOfBlockComment(consume: boolean): boolean {\r\n    return this.canConsumeThisString(this._blockCommentStart, consume);\r\n  }\r\n\r\n  private skipBlockComment(): void {\r\n    while (!this._inputExp.current().isEndOfInput()) {\r\n      if (this.isAtEndOfBlockComment()) {\r\n        return;\r\n      }\r\n      this._inputExp.consume();\r\n    }\r\n    this.problemCollector.push(ParseError.Error(this._inputExp.current(), ''));\r\n  }\r\n\r\n  private isAtEndOfBlockComment(): boolean {\r\n    return this.canConsumeThisString(this._blockCommentEnd, true);\r\n  }\r\n\r\n  private isAtStartOfNumber(): boolean {\r\n    if (this._inputExp.current().isDigit()) {\r\n      return true;\r\n    } else if (this._inputExp.current().is('.') && this._inputExp.next().isDigit()) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  private isAtStartOfIdentifier(): boolean {\r\n    return this._inputExp.current().isLetter() || this._inputExp.current().is('_') || this._inputExp.current().is('#');\r\n  }\r\n\r\n  private isIdentifierChar(current: ExpChar): boolean {\r\n    return current.isDigit() || current.isLetter() || current.is('_') || current.is('.') || current.is('#') || current.is(':') || current.is('');\r\n  }\r\n\r\n  private isAtBracket(in_symbol: boolean): boolean {\r\n    let r: boolean = true;\r\n    for (let i: number = 0; i < this._brackets.length; i++) {\r\n      if (!this._inputExp.current().is(this._brackets[i])) {\r\n        r = false;\r\n      }\r\n    }\r\n    if (r) {\r\n      return true;\r\n    }\r\n    if (!in_symbol && this._treatSinglePipeAsBracket && this._inputExp.current().is('|') && this._inputExp.next().is('|')) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private isAtStartOfSpecialId(): boolean {\r\n    return this._specialIdStarters.indexOf(this._inputExp.current().getValue()) > -1;\r\n  }\r\n\r\n  private fetchSpecialId(): Token {\r\n    let result: Token = Token.Create(ExpressionType.SPECIAL_ID, this._inputExp.current());\r\n    result.addToTrigger(this._inputExp.consume());\r\n    while (this.isIdentifierChar(this._inputExp.current())) {\r\n      result.addToContentChar(this._inputExp.consume());\r\n    }\r\n    return this.handleKeywords(result);\r\n  }\r\n\r\n  private handleKeywords(id_token: Token): Token {\r\n    let keyword: string = \"\";\r\n    if (this._keywordsCaseSensitive) {\r\n      if (this._keywords[id_token.getContents()]) {\r\n        keyword = this._keywords[id_token.getContents()];\r\n      }\r\n    } else {\r\n      if (this._keywords[id_token.getContents().toLowerCase()]) {\r\n        keyword = this._keywords[id_token.getContents().toLowerCase()];\r\n      }\r\n    }\r\n    if (keyword != \"\") { //\r\n      let keywordToken: Token = Token.Create(ExpressionType.KEYWORD, id_token);\r\n      keywordToken.setTrigger(keyword);\r\n      keywordToken.setContent(id_token.getContents());\r\n      keywordToken.setSource(id_token.getSource());\r\n      return keywordToken;\r\n    } else if (!id_token.is(ExpressionType.SPECIAL_ID)) { //bool\r\n      keyword = id_token.getContents().toLowerCase();\r\n      if (this._boolConstant.indexOf(keyword) > -1) {\r\n        id_token.setTokenType(ExpressionType.BOOL);\r\n      }\r\n    }\r\n    return id_token;\r\n  }\r\n\r\n  private isOperator(ch: ExpChar): boolean {\r\n    if (ch.isEndOfInput() || ch.isDigit() || ch.isLetter() || ch.isWhiteSpace()) {\r\n      return false;\r\n    }\r\n\r\n    // let c: string = ch.getValue();\r\n    // if (char.IsControl(c)) {\r\n    // \treturn false;\r\n    // }\r\n\r\n    if (this.isAtBracket(true) || this.isAtStartOfBlockComment(false) || this.isAtStartOfLineComment(false) || this.isAtStartOfNumber() || this.isAtStartOfIdentifier() || this._stringDelimiters[ch.getValue()]) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  private fetchOperator(): Token {\r\n    let result: Token = Token.Create(ExpressionType.OPERATOR, this._inputExp.current());\r\n    result.addToTrigger(this._inputExp.consume());\r\n    if (result.isOperator(\"*\") && this._inputExp.current().is('*')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\"&\") && this._inputExp.current().is('&')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\"|\") && this._inputExp.current().is('|')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\"<\") && this._inputExp.current().is('=')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\">\") && this._inputExp.current().is('=')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\"!\") && this._inputExp.current().is('=')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\"=\") && this._inputExp.current().is('=')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public addError(pos: IPosition, msg: string): void {\r\n    this.getProblemCollector().push(ParseError.Error(pos, msg));\r\n  }\r\n\r\n  public addWarning(pos: IPosition, msg: string): void {\r\n    this.getProblemCollector().push(ParseError.Warning(pos, msg));\r\n  }\r\n\r\n\r\n\r\n}","export class Variable {\r\n\r\n  public get expType(): string {\r\n    return this._expType;\r\n  }\r\n  private _expType: string = 'string';\r\n\r\n  private _value: any = null;\r\n\r\n  private _name: string = '';\r\n\r\n  private _constant: boolean = false;\r\n\r\n  constructor(name: string, type: string, value: any) {\r\n    this._name = name;\r\n    this._expType = type;\r\n    this._value = value;\r\n  }\r\n\r\n  public setType(type: string): void {\r\n    if(!this._constant) {\r\n      this._expType = type;\r\n    }\r\n  }\r\n\r\n  public setValue(value: any): void {\r\n    if(!this._constant) {\r\n      this._value = value;\r\n    }\r\n  }\r\n\r\n  public makeConstant(value: any): void {\r\n    this.setValue(value);\r\n    this._constant = true;\r\n  }\r\n\r\n  public getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  public getName(): string {\r\n    return this._name;\r\n  }\r\n\r\n  public isConstant(): boolean {\r\n    return this._constant;\r\n  }\r\n\r\n  public toString(): string {\r\n    return `Type: ${this._expType} --- ${this._name}: ${this._value.toString()}`;\r\n  }\r\n\r\n}","import { IExpression } from \"./expressions\";\r\nimport { Variable } from \"./variable\";\r\n\r\nexport class VariableExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    return this._value.expType;\r\n  }  \r\n\r\n  public get className(): string {\r\n    return 'VariableExpression';\r\n  }\r\n\r\n  private _value: Variable;\r\n  \r\n  constructor(value: Variable) {\r\n    this._value = value;\r\n  }\r\n  \r\n  public evaluate(): any {\r\n    return this._value.getValue();\r\n  }\r\n\r\n  public toString(): string {\r\n    return this._value.getName();\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let expClone: VariableExpression = new VariableExpression(this._value);\r\n    return expClone;\r\n  }\r\n  \r\n\r\n}","import { Scope } from \"./scope\";\r\nimport { ErrorInfo } from \"../utility\";\r\nimport { IExpression, VeryVarExpression, VeryTemplateExpression } from \"./expressions\";\r\nimport { VE_ExpressionParsing } from \"./expressionParsing\";\r\nimport { VariableScope } from \"../enum\";\r\nimport { ParseError } from \"./positions\";\r\nimport { VerySceneVariables } from \"../scene\";\r\nimport { IVeryVar, VE_Variables } from \"../variables\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { StateConst } from \"../state\";\r\nimport { VE_Objects, VeryEngineObject } from \"../object\";\r\nimport { Variable } from \"./variable\";\r\nimport { VE_Template } from \"../template\";\r\n\r\n\r\nexport class VE_Expressions {\r\n\r\n  public static _scope: Scope = Scope.Create();\r\n\r\n  // 1 - \r\n  // 2 -  + \r\n  // 3 -  +  +  + \r\n  // 4 -  +  +  + \r\n  // 5 -  +  +  + bool\r\n  // 6 - \r\n\r\n\r\n  // TODO == GameObject\r\n  // \r\n  public static createSceneExpression(name_id: string, expression_str: string, error_info: ErrorInfo): IExpression {\r\n    let sceneExp: IExpression = VE_ExpressionParsing.parsing(name_id, expression_str, VE_Expressions._scope, '', '', '', VariableScope.Scene);\r\n    if (VE_ExpressionParsing.errors.length > 0) {\r\n      error_info.isRight = false;\r\n      error_info.message = VE_Expressions.errorMessage(VE_ExpressionParsing.errors);\r\n    }\r\n    return sceneExp;\r\n  }\r\n\r\n  // \r\n  public static createGlobalExpression(name_id: string, expression_str: string, project_name: string, error_info: ErrorInfo): IExpression {\r\n    let globalExp: IExpression = VE_ExpressionParsing.parsing(name_id, expression_str, VE_Expressions._scope, project_name, '', '', VariableScope.Global);\r\n    if (VE_ExpressionParsing.errors.length > 0) {\r\n      error_info.isRight = false;\r\n      error_info.message = VE_Expressions.errorMessage(VE_ExpressionParsing.errors);\r\n    }\r\n    return globalExp;\r\n  }\r\n\r\n  // \r\n  public static createLocalExpression(name_id: string, expression_str: string, project_name: string, object_id: string, error_info: ErrorInfo): IExpression {\r\n    let localExp: IExpression = VE_ExpressionParsing.parsing(name_id, expression_str, VE_Expressions._scope, project_name, object_id, '', VariableScope.Local);\r\n    if (VE_ExpressionParsing.errors.length > 0) {\r\n      error_info.isRight = false;\r\n      error_info.message = VE_Expressions.errorMessage(VE_ExpressionParsing.errors);\r\n    }\r\n    return localExp;\r\n  }\r\n\r\n  // \r\n  public static createFsmExpression(name_id: string, expression_str: string, project_name: string, object_id: string, fsm_id: string, error_info: ErrorInfo): IExpression {\r\n    let fsmExp: IExpression = VE_ExpressionParsing.parsing(name_id, expression_str, VE_Expressions._scope, project_name, object_id, fsm_id, VariableScope.Fsm);\r\n    if (VE_ExpressionParsing.errors.length > 0) {\r\n      error_info.isRight = false;\r\n      error_info.message = VE_Expressions.errorMessage(VE_ExpressionParsing.errors);\r\n    }\r\n    return fsmExp;\r\n  }\r\n\r\n\r\n  // \r\n  public static getParseExpression(project_name: string, object_id: string, var_id: string, var_scope: VariableScope): Nullable<IExpression> {\r\n    // TODO: \r\n    // .*\r\n    if (var_id.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n      let varArray: string[] = var_id.split(StateConst.STATE_SEPARATOR);\r\n      if (varArray.length !== 2) {\r\n        return null;\r\n      } else {\r\n        object_id = varArray[0].trim();\r\n        var_id = varArray[1].trim().substring(1);\r\n        if (var_scope === VariableScope.Local || var_scope === VariableScope.Fsm) {\r\n          //  +  +  + \r\n          // 1. \r\n          // 2. \r\n          // 3. \r\n          // 4. \r\n          let objects: VE_Objects = VE_Manager.objects(project_name);\r\n          if (!objects) {\r\n            return null;\r\n          } else {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n            if (!veryObject) {\r\n              return null;\r\n            } else {\r\n              // \r\n              if (veryObject.isCreatedVariable(var_id)) {\r\n                let v: IVeryVar = veryObject.getVariable(var_id);\r\n                return new VeryVarExpression(v);\r\n              }\r\n              // \r\n              else if (veryObject.isCreatedExpression(var_id)) {\r\n                return veryObject.getExpression(var_id);\r\n              }\r\n              // \r\n              else if (veryObject.isCreatedFsm(var_id)) {\r\n                let v: IVeryVar = veryObject.getFsm(var_id).fsmVar;\r\n                return new VeryVarExpression(v);\r\n              }\r\n              else {\r\n                // \r\n                return null;\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          return null;\r\n        }\r\n      }\r\n    }\r\n    // *\r\n    else {\r\n      if (var_id.startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n        var_id = var_id.substring(1);\r\n        if (var_scope === VariableScope.Local || var_scope === VariableScope.Fsm) {\r\n          //  +  +  + \r\n          // 1. \r\n          // 2. \r\n          // 3. \r\n          // 4. \r\n          let objects: VE_Objects = VE_Manager.objects(project_name);\r\n          if (!objects) {\r\n            return null;\r\n          } else {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n            if (!veryObject) {\r\n              return null;\r\n            } else {\r\n              //\r\n              if (veryObject.isCreatedVariable(var_id)) {\r\n                let v: IVeryVar = veryObject.getVariable(var_id);\r\n                return new VeryVarExpression(v);\r\n              }\r\n              //\r\n              else if (veryObject.isCreatedExpression(var_id)) {\r\n                return veryObject.getExpression(var_id);\r\n              }\r\n              //\r\n              else if (veryObject.isCreatedFsm(var_id)) {\r\n                let v: IVeryVar = veryObject.getFsm(var_id).fsmVar;\r\n                return new VeryVarExpression(v);\r\n              }\r\n              else {\r\n                //\r\n                return this.getParseGlobal(project_name, var_id);\r\n              }\r\n            }\r\n          }\r\n        } else if (var_scope === VariableScope.Global) {\r\n          // \r\n          return this.getParseGlobal(project_name, var_id);\r\n        } else {\r\n          // \r\n          return this.getParseScene(var_id);\r\n        }\r\n      } else {\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n  private static getParseGlobal(project_name: string, var_id: string): Nullable<IExpression> {\r\n    // \r\n    let variables: VE_Variables = VE_Manager.variables(project_name);\r\n    if (!variables) {\r\n      return null;\r\n    } else {\r\n      if (variables.isCreatedVariable(var_id)) {\r\n        let v: IVeryVar = variables.getVariable(var_id);\r\n        return new VeryVarExpression(v);\r\n      } else if (variables.isCreatedExpression(var_id)) {\r\n        return variables.getExpression(var_id);\r\n      } else {\r\n        // \r\n        return this.getParseScene(var_id);\r\n      }\r\n    }\r\n  }\r\n\r\n  // \r\n  private static getParseScene(var_id: string): Nullable<IExpression> {\r\n    // \r\n    if (VerySceneVariables.Variables.isCreated(var_id)) {\r\n      let v: IVeryVar = VerySceneVariables.Variables.getVariable(var_id);\r\n      return new VeryVarExpression(v);\r\n    } else if (VerySceneVariables.Variables.isCreatedExpression(var_id)) {\r\n      return VerySceneVariables.Variables.getExpression(var_id);\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  private static errorMessage(errors: ParseError[]): string {\r\n    let errorStr: string = '';\r\n    for (let i: number = 0; i < errors.length; i++) {\r\n      errorStr += errors[i].getMessage() + ';\\n';\r\n    }\r\n    return errorStr;\r\n  }\r\n\r\n\r\n  public static getTemplateExpression(project_name: string, object_id: string, var_id: string, var_scope: VariableScope): Nullable<VeryTemplateExpression> {\r\n    // .*\r\n    if (var_id.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n      let varArray: string[] = var_id.split(StateConst.STATE_SEPARATOR);\r\n      if (varArray.length !== 2) {\r\n        //error_info = \".*ID\" + var_id + \"\";\r\n        return null;\r\n      }\r\n      else {\r\n        object_id = varArray[0].trim();\r\n        var_id = varArray[1].trim().substring(1);\r\n        if (var_scope === VariableScope.Local || var_scope === VariableScope.Fsm) {\r\n          let objects: VE_Objects = VE_Manager.objects(project_name);\r\n          if (!objects) {\r\n            return null;\r\n          }\r\n          else {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n            if (!veryObject) {\r\n              return null;\r\n            }\r\n            else {\r\n              // \r\n              if (veryObject.isCreatedTemplate(var_id)) {\r\n                let template: VE_Template = veryObject.getTemplate(var_id);\r\n                let r = new VeryTemplateExpression();\r\n                r.setTemplate(template);\r\n                return r;\r\n              }\r\n              else {\r\n                // \r\n                return null;\r\n              }\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          return null;\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      // *\r\n      if (var_id.startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n        var_id = var_id.substring(1);\r\n        if (var_scope === VariableScope.Local || var_scope === VariableScope.Fsm) {\r\n          let objects: VE_Objects = VE_Manager.objects(project_name);\r\n          if (!objects) {\r\n            return null;\r\n          }\r\n          else {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n            if (!veryObject) {\r\n              return null;\r\n            }\r\n            else {\r\n              // \r\n              if (veryObject.isCreatedTemplate(var_id)) {\r\n                let template: VE_Template = veryObject.getTemplate(var_id);\r\n                let r: VeryTemplateExpression = new VeryTemplateExpression();\r\n                r.setTemplate(template);\r\n                return r;\r\n              }\r\n              else {\r\n                // \r\n                let variables: VE_Variables = VE_Manager.variables(project_name);\r\n                if (!variables) {\r\n                  return null;\r\n                }\r\n                else {\r\n                  if (variables.isCreatedTemplate(var_id)) {\r\n                    let template: VE_Template = variables.getTemplate(var_id);\r\n                    let r: VeryTemplateExpression = new VeryTemplateExpression();\r\n                    r.setTemplate(template);\r\n                    return r;\r\n                  }\r\n                  else {\r\n                    // \r\n                    return null;\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        else if (var_scope === VariableScope.Global) {\r\n          // \r\n          let variables: VE_Variables = VE_Manager.variables(project_name);\r\n          if (!variables) {\r\n            return null;\r\n          }\r\n          else {\r\n            if (variables.isCreatedTemplate(var_id)) {\r\n              let template: VE_Template = variables.getTemplate(var_id);\r\n              let r: VeryTemplateExpression = new VeryTemplateExpression();\r\n              r.setTemplate(template);\r\n              return r;\r\n            }\r\n            else {\r\n              //\r\n              return null;\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          return null;\r\n        }\r\n      }\r\n      else {\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\r\n\r\n","import { Severity } from \"../enum\";\r\n\r\nexport class VE_Error {\r\n  private _pos: string = '';\r\n  private _message: string = '';\r\n  private _tableName: string = '';\r\n  private _severity: Severity = Severity.Error;\r\n\r\n  /**\r\n   * \r\n   * @param pos \r\n   * @param message \r\n   * @param table_name \r\n   * @param severity \r\n   */\r\n  constructor(pos: string, message: string, table_name: string, severity: Severity) {\r\n    this._pos = pos;\r\n    this._message = message;\r\n    this._severity = severity;\r\n    this._tableName = table_name;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param pos \r\n   * @param msg \r\n   * @param table_name \r\n   */\r\n  public static warning(pos: string, msg: string, table_name: string): VE_Error {\r\n    return new VE_Error(pos, msg, table_name, Severity.Warning);\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param pos \r\n   * @param msg \r\n   * @param table_name \r\n   */\r\n  public static error(pos: string, msg: string, table_name: string): VE_Error {\r\n    return new VE_Error(pos, msg, table_name, Severity.Error);\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public getPos(): string {\r\n    return this._pos;\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public getMessage(): string {\r\n    return this._message;\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public getTableName(): string {\r\n    return this._tableName;\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public getSeverity(): Severity {\r\n    return this._severity;\r\n  }\r\n\r\n  public toString(): string {\r\n    return \"\" + this._pos + \"\" + this._message + \"\" + this._tableName;\r\n  }\r\n}\r\n\r\n\r\nexport class VE_ErrorManager {\r\n\r\n  private static _errorList: VE_Error[] = [];\r\n\r\n  /// <summary>\r\n  /// \r\n  /// </summary>\r\n  public static get Count() {\r\n    return this._errorList.length;\r\n  }\r\n\r\n  /// <summary>\r\n  /// \r\n  /// </summary>\r\n  /// <param name=\"error\"></param>\r\n  public static Add(error: VE_Error): void {\r\n    this._errorList.push(error);\r\n  }\r\n\r\n  /// <summary>\r\n  /// \r\n  /// </summary>\r\n  /// <param name=\"index\"></param>\r\n  /// <returns></returns>\r\n  public static GetError(index: number): VE_Error {\r\n    return this._errorList[index];\r\n  }\r\n\r\n  /// <summary>\r\n  /// TODO: \r\n  /// </summary>\r\n  /// <param name=\"prefix\"></param>\r\n  public static Print(prefix?: string): void {\r\n    if (prefix) {\r\n      for (let i: number = 0; i < this._errorList.length; i++) {\r\n        if (this._errorList[i].getSeverity() === Severity.Error) {\r\n          console.log('' + prefix + \" -> \" + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n        else if (this._errorList[i].getSeverity() === Severity.Warning) {\r\n          console.log('' + prefix + \" -> \" + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n    } else {\r\n      for (let i: number = 0; i < this._errorList.length; i++) {\r\n        if (this._errorList[i].getSeverity() === Severity.Error) {\r\n          console.log('' + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n        else if (this._errorList[i].getSeverity() === Severity.Warning) {\r\n          console.log('' + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /// <summary>\r\n  /// \r\n  /// </summary>\r\n  /// <param name=\"prefix\"></param>\r\n  public static PrintWarnning(prefix?: string): void {\r\n    if (prefix) {\r\n      for (let i: number = 0; i < this._errorList.length; i++) {\r\n        if (this._errorList[i].getSeverity() === Severity.Warning) {\r\n          console.log('' + prefix + \" -> \" + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n    } else {\r\n      for (let i: number = 0; i < this._errorList.length; i++) {\r\n        if (this._errorList[i].getSeverity() === Severity.Warning) {\r\n          console.log('' + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /// <summary>\r\n  /// \r\n  /// </summary>\r\n  /// <param name=\"prefix\"></param>\r\n  public static PrintError(prefix: string): void {\r\n    if (prefix) {\r\n      for (let i: number = 0; i < this._errorList.length; i++) {\r\n        if (this._errorList[i].getSeverity() === Severity.Error) {\r\n          console.log('' + prefix + \" -> \" + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n    } else {\r\n      for (let i: number = 0; i < this._errorList.length; i++) {\r\n        if (this._errorList[i].getSeverity() === Severity.Error) {\r\n          console.log('' + prefix + \" -> \" + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}","export class GameGlobal {\r\n\r\n  \r\n  public static PlatformLoaded: boolean = false;\r\n  \r\n\r\n}","export * from './gameGlobal';\r\nexport * from './errorManager';","export * from './showError';","export class ShowError {\r\n\r\n  public static errorContentPrefix: string = '<div class=\"alert alert-error\"><button type=\"button\" class=\"close\" data-dismiss=\"alert\">&times;</button>';\r\n  public static errorContentNow: string;\r\n  public static errorZone: HTMLElement;\r\n\r\n  public static initZone(): void {\r\n    if (!this.errorZone) {\r\n      this.errorZone = document.getElementById(\"errorZone\")!;\r\n    }\r\n  }\r\n  /**\r\n   * \r\n   * TODO: logerrorwarn\r\n   * @param error_msg \r\n   */\r\n  private static showMsg(prefix: string, error_msg: string): void {\r\n    this.initZone();\r\n    if (!this.errorContentNow) {\r\n      this.errorContentNow = this.errorContentPrefix;\r\n    }\r\n    this.errorContentNow += prefix + error_msg + \"<br/>\";\r\n    this.errorZone.style.display = \"block\";\r\n    this.errorZone.innerHTML = this.errorContentNow + '</div>';\r\n    // Close button error\r\n    let closeBtn = this.errorZone.querySelector(\".close\")!;\r\n    let that = this;\r\n    closeBtn.addEventListener(\"click\", function () {\r\n      that.errorZone.style.display = \"none\";\r\n    });\r\n  }\r\n\r\n  public static show(error_msg: string): void {\r\n    this.showMsg('>>>', error_msg);\r\n  }\r\n\r\n  public static showError(error_msg: string): void {\r\n    this.showMsg('>>>', error_msg);\r\n  }\r\n\r\n  public static showWarn(error_msg: string): void {\r\n    this.showMsg('>>>', error_msg);\r\n  }\r\n\r\n  public static clear(): void {\r\n    ShowError.initZone();\r\n    ShowError.errorContentNow = ShowError.errorContentPrefix;\r\n    ShowError.errorZone.innerHTML = ShowError.errorContentNow + '</div>';\r\n    // Close button error\r\n    let closeBtn = ShowError.errorZone.querySelector(\".close\")!;\r\n    let that = ShowError;\r\n    closeBtn.addEventListener(\"click\", function () {\r\n      that.errorZone.style.display = \"none\";\r\n    });\r\n  }\r\n\r\n  public static close(): void {\r\n    ShowError.initZone();\r\n    if(ShowError.errorZone.style.display === \"none\") {\r\n      ShowError.errorZone.style.display = \"block\";\r\n    } else {\r\n      ShowError.errorZone.style.display = \"none\";\r\n    }\r\n  }\r\n}","export * from './utility/index';\r\n\r\nexport * from './action/index';\r\nexport * from './dataSource/index';\r\nexport * from './enum/index';\r\nexport * from './expression/index';\r\nexport * from './global/index';\r\nexport * from './html/index';\r\nexport * from './manager/index';\r\nexport * from './object/index';\r\nexport * from './state/index';\r\nexport * from './template/index';\r\nexport * from './trigger/index';\r\nexport * from './loader/index';\r\n\r\nexport * from './variables/index';\r\nexport * from './scene/index';\r\n\r\nexport * from '../verytable/index';\r\n\r\nexport * from './library/action/index';\r\nexport * from './library/trigger/index';\r\n","export * from './translate';","import { VE_ActionBehaviour, VE_Actions } from '../../action';\r\nimport { VeryGameObject, VeryBool, VeryVector3, VeryNumber } from '../../variables';\r\nimport { Time } from '../../babylon';\r\nimport { ParaParserUtility } from '../../utility';\r\nimport { ParaType } from '../../enum';\r\n\r\nexport class Action_Translate extends VE_ActionBehaviour {\r\n\r\n  public get ID(): string {\r\n    return '|Translate';\r\n  }\r\n\r\n  private _refType: BABYLON.Space = BABYLON.Space.LOCAL;\r\n\r\n  private _translateObj: Nullable<VeryGameObject> = null;\r\n  private _refObj: Nullable<VeryGameObject> = null;\r\n\r\n  private _isDeltaTime: VeryBool = new VeryBool();\r\n\r\n  private _isVec: boolean = true;\r\n  private _vecVar: VeryVector3 = new VeryVector3();\r\n  private _xVar: VeryNumber = new VeryNumber();\r\n  private _yVar: VeryNumber = new VeryNumber();\r\n  private _zVar: VeryNumber = new VeryNumber();\r\n\r\n  private _paraTime: number = 1;\r\n  private _paraVec: VeryVector3 = new VeryVector3();\r\n\r\n  public active(): void {\r\n\r\n  }\r\n\r\n\r\n  public onUpdate(): void {\r\n    if (!this._translateObj || !this._translateObj.value) {\r\n      return;\r\n    } else {\r\n      // \r\n      if (this._isDeltaTime) {\r\n        this._paraTime = Time.deltaTime;\r\n      } else {\r\n        this._paraTime = 1;\r\n      }\r\n\r\n      // \r\n      if (this._isVec) {\r\n        // \r\n        this._paraVec.value.copyFrom(this._vecVar.value);\r\n      } else {\r\n        this._paraVec.value.x = this._xVar.value;\r\n        this._paraVec.value.y = this._yVar.value;\r\n        this._paraVec.value.z = this._zVar.value;\r\n      }\r\n\r\n      this._paraVec.value = this._paraVec.value.multiplyByFloats(this._paraTime, this._paraTime, this._paraTime);\r\n\r\n      // \r\n      if (this._refType === BABYLON.Space.LOCAL || this._refType === BABYLON.Space.WORLD) {\r\n        this._translateObj.value.transform.translate(this._paraVec.value, this._refType);\r\n      }\r\n      // \r\n      else {\r\n        if (this._refObj && this._refObj.value) {\r\n          this._translateObj.value.transform.translateRelativeTo(this._paraVec.value, this._refObj.value.transform);\r\n        } else {\r\n          this._translateObj.value.transform.translate(this._paraVec.value, BABYLON.Space.WORLD);\r\n        }\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    if (!ParaParserUtility.ParaNumbers(this.ID, ParaType.Action, para_array.length, 4)) {\r\n      return false;\r\n    } else {\r\n      // 1\r\n      \r\n    }\r\n    return true;\r\n  }\r\n\r\n  public destroy(): void {\r\n    // \r\n  }\r\n\r\n\r\n\r\n}\r\n\r\n\r\nVE_Actions.addAction(new Action_Translate());\r\n\r\n","export * from './input';","import { VE_TriggerBehaviour } from '../../index';\r\nimport { VE_Triggers } from '../../trigger';\r\n\r\nexport class Trigger_MouseDown extends VE_TriggerBehaviour {\r\n  \r\n\r\n  public get ID(): string {\r\n    return '|Mouse_Down';\r\n  }\r\n\r\n\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n\r\n    let a: BABYLON.Nullable<BABYLON.Observer<BABYLON.PointerInfo>> = this.scene.onPointerObservable.add(  (pointInfo) => {\r\n\r\n    })\r\n\r\n    this.scene.onPointerObservable.remove(a);\r\n\r\n    return true;\r\n  }\r\n\r\n  public onUpdate(): void {\r\n    \r\n  }\r\n\r\n\r\n  public destroy(): void {\r\n    \r\n  }\r\n  \r\n\r\n}\r\n\r\n\r\n\r\nVE_Triggers.addTrigger(new Trigger_MouseDown());","import { VE_Templates, VE_Template } from \"../template\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { VE_Objects, VeryEngineObject } from \"../object\";\r\nimport { VE_Variables, VeryVarManager, IVeryVar, VeryExpression } from \"../variables\";\r\nimport { ErrorInfo, VE_StringFormat } from \"../utility\";\r\nimport { VE_ErrorManager, VE_Error } from \"../global\";\r\nimport { VE_Expressions, IExpression } from \"../expression\";\r\nimport { VE_FsmData, VE_StateData, VE_StateTriggerData, VE_StateActionData } from \"../dataSource\";\r\nimport { VE_Fsm, VE_State, VE_StateAction, VE_AssociatedState, StateConst } from \"../state\";\r\nimport { VE_Triggers, VE_TriggerBehaviour } from \"../trigger\";\r\nimport { VE_Actions, VE_ActionBehaviour, VE_Assignment } from \"../action\";\r\nimport { StateActionType, AssignType } from \"../enum\";\r\nimport { VE_TypeConvert } from \"../utility/typeConvert\";\r\nimport { VE_AssignmentTypeJudge } from \"../action/assignmentTypeJudge\";\r\nimport { VerySceneVariables } from \"../scene\";\r\n\r\nexport class CreateInstance {\r\n\r\n\r\n\r\n\r\n\r\n  public static createProject(project_name: string): boolean {\r\n    let templates: VE_Templates = VE_Manager.templates(project_name);\r\n    let objects: VE_Objects = VE_Manager.objects(project_name);\r\n    let globalVars: VE_Variables = VE_Manager.variables(project_name);\r\n\r\n    // 1. \r\n    // (1).\r\n    for (let i: number = 0; i < globalVars.varData.count; i++) {\r\n      let varID: string = globalVars.varData.getVariableID(i);\r\n      let varPara: string[] = globalVars.varData.getVariableParas(varID);\r\n      // 1.2.3.\r\n      // 1.\r\n      if (varPara[0] === \"\" || varPara[0].toLowerCase() === \"expression\") {\r\n        continue;\r\n      }\r\n      // 2.IVeryVar\r\n      else if (VeryVarManager.hasVarType(varPara[0])) {\r\n        let errorInfo: ErrorInfo = new ErrorInfo();\r\n        let newVar: Nullable<IVeryVar> = VeryVarManager.createVariable(varID, varPara[0], varPara[1], errorInfo);\r\n        // TODO: ListDictionary\r\n        if (!errorInfo.isRight || newVar === null) {\r\n          VE_ErrorManager.Add(VE_Error.error(globalVars.varData.getPos(varID), \"\" + project_name + \"\" + varID + \"\" + varPara[0] + \"\" + varPara[1] + \"\" + errorInfo.message + \"\", ''));\r\n          return false;\r\n        } else {\r\n          globalVars.addVariable(varID, newVar);\r\n        }\r\n      }\r\n      // 3.\r\n      else if (templates.isCreatedTemplate(varPara[0])) {\r\n        globalVars.addTemplate(varID, templates.getTemplate(varPara[0]).clone('__global__', varID));\r\n      }\r\n      // \r\n      else {\r\n        VE_ErrorManager.Add(VE_Error.error(globalVars.varData.getPos(varID), \"\" + project_name + \"\" + varID + \"\" + varPara[0] + \"\" + varPara[1] + \"\", ''));\r\n        return false;\r\n      }\r\n    }\r\n\r\n    // (2).\r\n    for (let i: number = 0; i < globalVars.varData.count; i++) {\r\n      let varID: string = globalVars.varData.getVariableID(i);\r\n      let varPara: string[] = globalVars.varData.getVariableParas(varID);\r\n      // \r\n      // 1.\r\n      if (varPara[0] === \"\" || varPara[0].toLowerCase() === \"expression\") {\r\n        // \r\n        let errorInfo: ErrorInfo = new ErrorInfo();\r\n        let globalExp: IExpression = VE_Expressions.createGlobalExpression(varID, varPara[1], project_name, errorInfo);\r\n        if (!errorInfo.isRight || !globalExp) {\r\n          VE_ErrorManager.Add(VE_Error.error(globalVars.varData.getPos(varID), \"\" + project_name + \"\" + varID + \",\" + varPara[0] + \",\" + varPara[1] + \"\\n\" + errorInfo.message, \"\"));\r\n          return false;\r\n        }\r\n        globalVars.addExpression(varID, globalExp);\r\n      }\r\n      else {\r\n        continue;\r\n      }\r\n    }\r\n\r\n    // 2. ----\r\n    // 1.\r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.varData.count; k++) {\r\n        // (1). \r\n        let varID: string = veryObject.varData.getVariableID(k);\r\n        let varPara: string[] = veryObject.varData.getVariableParas(varID);\r\n        // 1.2.3.\r\n        // 1.\r\n        if (varPara[0] === \"\" || varPara[0].toLowerCase().trim() === \"expression\") {\r\n          continue;\r\n        }\r\n        // 2.IVeryVar\r\n        else if (VeryVarManager.hasVarType(varPara[0])) {\r\n          let errorInfo: ErrorInfo = new ErrorInfo();\r\n          let newVar: Nullable<IVeryVar> = VeryVarManager.createVariable(varID, varPara[0], varPara[1], errorInfo);\r\n          // TODO: ListDictionary\r\n          if (newVar === null || !errorInfo.isRight) {\r\n            VE_ErrorManager.Add(VE_Error.error(veryObject.varData.getPos(varID), \"\" + project_name + \"\" + varID + \"\" + varPara[0] + \"\" + varPara[1] + \"\" + errorInfo.message + \"\", ''));\r\n            return false;\r\n          } else {\r\n            globalVars.addVariable(varID, newVar);\r\n          }\r\n        }\r\n        // 3.\r\n        else if (templates.isCreatedTemplate(varPara[0])) {\r\n          veryObject.addTemplate(varID, templates.getTemplate(varPara[0]).clone(objectID, varID));\r\n        }\r\n        // \r\n        else {\r\n          VE_ErrorManager.Add(VE_Error.error(veryObject.varData.getPos(varID), \"\" + project_name + \"\" + objectID + \"\" + varID + \",\" + varPara[0] + \",\" + varPara[1] + \"\", \"\"));\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n\r\n    // 3.   \r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.dataSource.fsmCount; k++) {\r\n        let fsmID: string = veryObject.dataSource.getFsmID(k);\r\n        let fsmData: VE_FsmData = veryObject.dataSource.getFsmData(fsmID);\r\n        // \r\n        let errorInfo: ErrorInfo = new ErrorInfo();\r\n        let newVar: Nullable<IVeryVar> = VeryVarManager.createVariable(fsmID, fsmData.fsmType, fsmData.initialValStr, errorInfo);\r\n        // TODO: ListDictionary\r\n        if (newVar === null || !errorInfo.isRight) {\r\n          VE_ErrorManager.Add(VE_Error.error(veryObject.dataSource.getFsmPos(fsmID), \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + errorInfo.message + \"\", ''));\r\n          return false;\r\n        }\r\n        // \r\n        let fsm: VE_Fsm = new VE_Fsm(project_name, objectID, fsmID, newVar, veryObject);\r\n        veryObject.addFsm(fsmID, fsm);\r\n      }\r\n    }\r\n\r\n    // \r\n    // 4. \r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.varData.count; k++) {\r\n        // (1). \r\n        let varID: string = veryObject.varData.getVariableID(k);\r\n        let varPara: string[] = veryObject.varData.getVariableParas(varID);\r\n        // 1.2.3.\r\n        // 1.\r\n        if (varPara[0] === \"\" || varPara[0].toLowerCase().trim() === \"expression\") {\r\n          // \r\n          let errorInfo: ErrorInfo = new ErrorInfo();\r\n          let newVar: IExpression = VE_Expressions.createLocalExpression(varID, varPara[1], project_name, objectID, errorInfo);\r\n          if (!errorInfo.isRight || !newVar) {\r\n            VE_ErrorManager.Add(VE_Error.error(veryObject.varData.getPos(varID), \"\" + project_name + \"\" + objectID + \"\" + varID + \",\" + varPara[0] + \",\" + varPara[1] + \"\\n\" + errorInfo.message, ''));\r\n            return false;\r\n          }\r\n          veryObject.addExpression(varID, newVar);\r\n        }\r\n        else {\r\n          continue;\r\n        }\r\n      }\r\n    }\r\n\r\n    // TODO: UI\r\n\r\n    // 6. \r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.dataSource.triggerCount; k++) {\r\n        let triggerID: string = veryObject.dataSource.getTriggerID(k);\r\n        //Debug.Log(\"ID\" + triggerID);\r\n        let triggerPara: string[] = veryObject.dataSource.getTriggerPara(triggerID);\r\n\r\n        if (!VE_Triggers.hasTrigger(triggerPara[0])) {\r\n          VE_ErrorManager.Add(VE_Error.error(veryObject.dataSource.getTriggerPos(triggerID), \"\" + project_name + \"\" + objectID + \"\" + triggerID + \"\" + triggerPara[0] + \"\", \"\"));\r\n          return false;\r\n        } else {\r\n          // TODO: Trigger\r\n          let trigger: VE_TriggerBehaviour = VE_Triggers.createTrigger(triggerPara[0]);\r\n          veryObject.addTrigger(triggerID, trigger);\r\n        }\r\n      }\r\n    }\r\n\r\n    // 5. \r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.dataSource.actionCount; k++) {\r\n        let actionID: string = veryObject.dataSource.getActionID(k);\r\n        let actionPara: string[] = veryObject.dataSource.getActionPara(actionID);\r\n\r\n        if (!VE_Actions.hasAction(actionPara[0])) {\r\n          VE_ErrorManager.Add(VE_Error.error(veryObject.dataSource.getActionPos(actionID), \"\" + project_name + \"\" + objectID + \"\" + actionID + \"\" + actionPara[0] + \"\", \"\"));\r\n          return false;\r\n        } else {\r\n          // TODO: Action\r\n          let action: VE_ActionBehaviour = VE_Actions.createAction(actionPara[0]);\r\n          veryObject.addAction(actionID, action);\r\n        }\r\n      }\r\n    }\r\n\r\n    // 7.    +  + \r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.dataSource.fsmCount; k++) {\r\n        let fsmID: string = veryObject.dataSource.getFsmID(k);\r\n        let fsmData: VE_FsmData = veryObject.dataSource.getFsmData(fsmID);\r\n        // \r\n        let fsm: VE_Fsm = veryObject.getFsm(fsmID);\r\n        // \r\n        for (let p: number = 0; p < fsmData.count; p++) {\r\n          let stateData: VE_StateData = fsmData.getStateData(p);\r\n          let state: VE_State = new VE_State(fsm, fsm.count + 1);\r\n          // \r\n          if (stateData.isInitialValue) {\r\n            state.setInitialValue(fsm.fsmVar.getValue());\r\n          }\r\n          else {\r\n            // TODO: \r\n            if (!this.stateAssignment(project_name, objectID, fsmID, globalVars, objects, veryObject, fsm, stateData, state)) {\r\n              return false;\r\n            }\r\n          }\r\n\r\n          // \r\n          if (stateData.isSequence) {\r\n            state.setSequence();\r\n          }\r\n\r\n          // \r\n          if (stateData.logicalExp !== '') {\r\n            let errorInfo: ErrorInfo = new ErrorInfo();\r\n            let logicalExp: IExpression = VE_Expressions.createFsmExpression('', stateData.logicalExp, project_name, objectID, fsmID, errorInfo);\r\n            if (!errorInfo.isRight || !logicalExp) {\r\n              VE_ErrorManager.Add(VE_Error.error(\"\" + stateData.rowIndex.toString() + \"E\", \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + stateData.logicalExp + \"\\n\" + errorInfo.message, \"\"));\r\n              return false;\r\n            }\r\n            state.logicalAssociated = logicalExp;\r\n          }\r\n\r\n          // \r\n          for (let s: number = 0; s < stateData.triggerCount; s++) {\r\n            let triggerData: VE_StateTriggerData = stateData.getTrigger(s);\r\n            let triggerPos: string = stateData.getTriggerPos(s);\r\n            // \r\n            let trigger: Nullable<VE_TriggerBehaviour> = VE_Triggers.findTrigger(veryObject, triggerData.triggerID);\r\n            if (trigger === null) {\r\n              VE_ErrorManager.Add(VE_Error.error(triggerPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + triggerData.triggerID + \"\", \"\"));\r\n              return false;\r\n            }\r\n            // \r\n            let logicalExp: Nullable<IExpression> = null;\r\n            // Debug.LogWarning(\"\" + triggerData.LogicalExp);\r\n            if (triggerData.logicalExp !== '') {\r\n              // \r\n              let errorInfo: ErrorInfo = new ErrorInfo();\r\n              logicalExp = VE_Expressions.createFsmExpression('', triggerData.logicalExp, project_name, objectID, fsmID, errorInfo);\r\n              // Debug.LogWarning(logicalExp);\r\n              if (!errorInfo.isRight || logicalExp === null) {\r\n                VE_ErrorManager.Add(VE_Error.error(triggerPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + triggerData.logicalExp + \"\\n\" + errorInfo.message, \"\"));\r\n                return false;\r\n              }\r\n            }\r\n            trigger.addTriggerTarget(logicalExp!, state);\r\n            // \r\n            if (triggerData.logicalSwitch !== '') {\r\n              // \r\n              let errorInfo: ErrorInfo = new ErrorInfo();\r\n              let logicalSwitch: IExpression = VE_Expressions.createFsmExpression('', triggerData.logicalSwitch, project_name, objectID, fsmID, errorInfo);\r\n              if (!errorInfo.isRight || logicalSwitch === null) {\r\n                VE_ErrorManager.Add(VE_Error.error(triggerPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + triggerData.logicalSwitch + \"\\n\" + errorInfo.message, \"\"));\r\n                return false;\r\n              }\r\n              trigger.addLogicalSwitch(logicalSwitch);\r\n            }\r\n          }\r\n\r\n          // \r\n          for (let s: number = 0; s < stateData.actionCount; s++) {\r\n            let actionData: VE_StateActionData = stateData.getAction(s);\r\n            let actionPos: string = stateData.getActionPos(s);\r\n            // \r\n            if (actionData.type === StateActionType.Action) {\r\n              // \r\n              let action: Nullable<VE_ActionBehaviour> = VE_Actions.findAction(veryObject, actionData.actionID);\r\n              if (action === null) {\r\n                VE_ErrorManager.Add(VE_Error.error(actionPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + actionData.actionID + \"\", \"\"));\r\n                return false;\r\n              }\r\n              // bool\r\n              // \r\n              let errorInfo: ErrorInfo = new ErrorInfo();\r\n              let enabledFlag: boolean = VE_TypeConvert.boolConvert(actionData.enabled, errorInfo);\r\n              if (!errorInfo.isRight) {\r\n                VE_ErrorManager.Add(VE_Error.error(actionPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + actionData.actionID + \"booltruefalse\", \"\"));\r\n                return false;\r\n              }\r\n\r\n              // \r\n              let everyFrameFlag = VE_TypeConvert.boolConvert(actionData.everyFrame, errorInfo);\r\n              if (!errorInfo.isRight) {\r\n                VE_ErrorManager.Add(VE_Error.error(actionPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + actionData.actionID + \"booltruefalse\", \"\"));\r\n                return false;\r\n              }\r\n              // \r\n              let isSequence = VE_TypeConvert.boolConvert(actionData.everyFrame, errorInfo);\r\n              if (!errorInfo.isRight) {\r\n                VE_ErrorManager.Add(VE_Error.error(actionPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + actionData.actionID + \"booltruefalse\", \"\"));\r\n                return false;\r\n              }\r\n              let stateAction: VE_StateAction = new VE_StateAction();\r\n              stateAction.setAction(action)\r\n              state.addAction(stateAction);\r\n            }\r\n            //\r\n            else {\r\n              // TODO\r\n              if (!this.assignmentAction(project_name, objectID, fsmID, globalVars, objects, veryObject, actionData, state)) {\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n\r\n          // \r\n          if (fsm.isCreatedState(stateData.stateIndex)) {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\" + stateData.rowIndex.toString() + \"I\", \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + stateData.ValStr + \"ID\", \"\"));\r\n            return false;\r\n          }\r\n          else {\r\n            fsm.addState(state, stateData.stateIndex);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // 8.   \r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.dataSource.fsmCount; k++) {\r\n        let fsmID: string = veryObject.dataSource.getFsmID(k);\r\n        let fsmData: VE_FsmData = veryObject.dataSource.getFsmData(fsmID);\r\n        // \r\n        let fsm: VE_Fsm = veryObject.getFsm(fsmID);\r\n        // \r\n        for (let p: number = 0; p < fsmData.count; p++) {\r\n          let stateData: VE_StateData = fsmData.getStateData(p);\r\n          let state: Nullable<VE_State> = fsm.getState(p);\r\n\r\n          // \r\n          for (let s: number = 0; s < stateData.associatedStateCount; s++) {\r\n            let associatedStateInfo: string = stateData.getAssociatedState(s);\r\n            let associatedPos: string = stateData.getAssociatedStatePos(s);\r\n            let associatedState: VE_AssociatedState = new VE_AssociatedState(state!);\r\n            let multipleAssociatedState: string[] = associatedStateInfo.split(/,|/);\r\n\r\n            for (let www: number = 0; www < multipleAssociatedState.length; www++) {\r\n              associatedStateInfo = multipleAssociatedState[www].trim();\r\n              let stateIndex: number = StateConst.STATE_INDEX;\r\n              let strArray: string[] = associatedStateInfo.split('=');\r\n              if (strArray.length === 1) {\r\n                stateIndex = StateConst.STATE_INDEX;\r\n              }\r\n              else if (strArray.length === 2) {\r\n                let errorInfo: ErrorInfo = new ErrorInfo();\r\n                stateIndex = VE_TypeConvert.intConvert(strArray[1].trim(), errorInfo);\r\n                if (!errorInfo.isRight) {\r\n                  VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"=ID\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"=ID\", \"\"));\r\n                return false;\r\n              }\r\n\r\n              // 1. \r\n              // 2. .\r\n              // 3. *.\r\n              // 4. .*.\r\n\r\n              let aFsmID: string = strArray[0].trim();\r\n              if (aFsmID.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n                let stateArray: string[] = aFsmID.split(StateConst.STATE_SEPARATOR);\r\n                for (let q: number = 0; q < stateArray.length; q++) {\r\n                  stateArray[q] = stateArray[q].trim();\r\n                }\r\n                // .*.\r\n                if (stateArray.length === 3) {\r\n                  if (objects.isCreated(stateArray[0])) {\r\n                    let aObject: VeryEngineObject = objects.getVeryObject(stateArray[0]);\r\n                    if (stateArray[1].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n                      let varID: string = stateArray[1].substring(1);\r\n                      if (aObject.isCreatedTemplate(varID)) {\r\n                        let template: VE_Template = aObject.getTemplate(varID);\r\n                        if (template.dataSource.isCreatedFsm(stateArray[2])) {\r\n                          associatedState.addTemplate(template, stateArray[2], stateIndex);\r\n                          // VE_AssociatedState associatedState = new VE_AssociatedState(state, template, stateArray[2], stateIndex);\r\n                          // state.AddAssociatedState(associatedState);\r\n                        }\r\n                        else {\r\n                          VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".*.\", \"\"));\r\n                          return false;\r\n                        }\r\n                      }\r\n                      else {\r\n                        VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".*.\", \"\"));\r\n                        return false;\r\n                      }\r\n                    }\r\n                    else {\r\n                      VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".*.\", \"\"));\r\n                      return false;\r\n                    }\r\n                  }\r\n                  else {\r\n                    VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".*.\", \"\"));\r\n                    return false;\r\n                  }\r\n                }\r\n                else if (stateArray.length === 2) {\r\n                  let aObjectID: string = stateArray[0].trim();\r\n                  aFsmID = stateArray[1].trim();\r\n                  // *.\r\n                  if (aObjectID.startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n                    aObjectID = aObjectID.substring(1);\r\n                    if (veryObject.isCreatedTemplate(aObjectID)) {\r\n                      let template: VE_Template = veryObject.getTemplate(aObjectID);\r\n                      if (template.dataSource.isCreatedFsm(stateArray[1])) {\r\n                        associatedState.addTemplate(template, stateArray[1], stateIndex);\r\n                        // VE_AssociatedState associatedState = new VE_AssociatedState(state, template, stateArray[1], stateIndex);\r\n                        // state.AddAssociatedState(associatedState);\r\n                      }\r\n                      else {\r\n                        VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"*.\", \"\"));\r\n                        return false;\r\n                      }\r\n                    }\r\n                    else {\r\n                      if (globalVars.isCreatedTemplate(aObjectID)) {\r\n                        let template: VE_Template = globalVars.getTemplate(aObjectID);\r\n                        if (template.dataSource.isCreatedFsm(stateArray[1])) {\r\n                          associatedState.addTemplate(template, stateArray[1], stateIndex);\r\n                          // VE_AssociatedState associatedState = new VE_AssociatedState(state, template, stateArray[1], stateIndex);\r\n                          // state.AddAssociatedState(associatedState);\r\n                        }\r\n                        else {\r\n                          VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"*.\", \"\"));\r\n                          return false;\r\n                        }\r\n                      }\r\n                      else {\r\n                        VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"*.\", \"\"));\r\n                        return false;\r\n                      }\r\n                    }\r\n                  }\r\n                  // .\r\n                  else {\r\n                    let aObject: VeryEngineObject = objects.getVeryObject(aObjectID);\r\n                    if (aObject === null) {\r\n                      VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".\", \"\"));\r\n                      return false;\r\n                    }\r\n                    let aFsm: VE_Fsm = aObject.getFsm(aFsmID);\r\n                    if (aFsm === null) {\r\n                      VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".\", \"\"));\r\n                      return false;\r\n                    }\r\n                    let toState: Nullable<VE_State> = aFsm.getState(stateIndex);\r\n                    if (toState === null) {\r\n                      VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".\", \"\"));\r\n                      return false;\r\n                    }\r\n                    associatedState.add(toState, stateIndex);\r\n                    // VE_AssociatedState associatedState = new VE_AssociatedState(state, toState);\r\n                    // state.AddAssociatedState(associatedState);\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              //\r\n              else {\r\n                let aFsm: VE_Fsm = veryObject.getFsm(aFsmID);\r\n                if (aFsm === null) {\r\n                  VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"\", \"\"));\r\n                  return false;\r\n                }\r\n\r\n                let toState: Nullable<VE_State> = aFsm.getState(stateIndex);\r\n                if (toState === null) {\r\n                  VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"\", \"\"));\r\n                  return false;\r\n                }\r\n                associatedState.add(toState, stateIndex);\r\n                //VE_AssociatedState associatedState = new VE_AssociatedState(state, toState);\r\n                //state.AddAssociatedState(associatedState);\r\n              }\r\n            }\r\n            state!.addAssociatedState(associatedState);\r\n          }\r\n\r\n        }\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n\r\n  private static stateAssignment(project_name: string, object_id: string, fsm_id: string, global_vars: VE_Variables, objects: VE_Objects, very_object: VeryEngineObject, fsm: VE_Fsm, state_data: VE_StateData, state: VE_State): boolean {\r\n    // \r\n    // \r\n    let assignStr: string = state_data.ValStr;\r\n    // *\r\n    // .*\r\n    // *.*\r\n    // .*.*\r\n    if (assignStr.indexOf(StateConst.VARIABLE_SYMBOL) > -1)  // \r\n    {\r\n      if (assignStr.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n        let valArray: string[] = assignStr.split(StateConst.STATE_SEPARATOR);\r\n        for (let q: number = 0; q < valArray.length; q++) {\r\n          valArray[q] = valArray[q].trim();\r\n        }\r\n        if (valArray.length === 2) {\r\n          if (!valArray[1].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"1*2.*3*.*4.*.*\", \"\"));\r\n            return false;\r\n          }\r\n          else {\r\n            // *.*\r\n            if (valArray[0].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n              let templateVarID: string = valArray[0].substring(1);\r\n              let varID: string = valArray[1].substring(1);\r\n              if (very_object.isCreatedTemplate(templateVarID)) {\r\n                let template: VE_Template = very_object.getTemplate(templateVarID);\r\n                if (template.varData.isCreatedVariable(varID) || template.dataSource.isCreatedFsm(varID)) {\r\n                  state.setTemplateInfo(template, varID, assignStr);\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"*.***\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                if (global_vars.isCreatedTemplate(templateVarID)) {\r\n                  let template: VE_Template = global_vars.getTemplate(templateVarID);\r\n                  if (template.varData.isCreatedVariable(varID) || template.dataSource.isCreatedFsm(varID)) {\r\n                    state.setTemplateInfo(template, varID, assignStr);\r\n                  }\r\n                  else {\r\n                    VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"*.***\", \"\"));\r\n                    return false;\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"*.**\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n            }\r\n            // .*\r\n            else {\r\n              if (valArray[0] === object_id && valArray[1].substring(1) === fsm_id) {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \".*\", \"\"));\r\n                return false;\r\n              }\r\n              let errorInfo: ErrorInfo = new ErrorInfo();\r\n\r\n              let veryVar: Nullable<IVeryVar> = VeryVarManager.getVariable(valArray[1].substring(1), project_name, valArray[0], errorInfo);\r\n              if (!errorInfo.isRight || veryVar === null) {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \".**\" + valArray[1] + \"\" + errorInfo, \"\"));\r\n                return false;\r\n              }\r\n              else {\r\n                // \r\n                if (VE_AssignmentTypeJudge.allow(fsm.fsmVar, veryVar)) {\r\n                  state.setStateVariable(veryVar);\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \".*\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        else if (valArray.length === 3) {\r\n          // .*.*\r\n          if (valArray[0].startsWith(StateConst.STATE_SEPARATOR) || !valArray[1].startsWith(StateConst.STATE_SEPARATOR) || !valArray[2].startsWith(StateConst.STATE_SEPARATOR)) {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"1*2.*3*.*4.*.*\", \"\"));\r\n            return false;\r\n          }\r\n          else {\r\n            let templateVarID: string = valArray[1].substring(1);\r\n            let varID: string = valArray[2].substring(1);\r\n            if (objects.isCreated(valArray[0])) {\r\n              let tObject: VeryEngineObject = objects.getVeryObject(valArray[0]);\r\n              if (tObject.isCreatedTemplate(templateVarID)) {\r\n                let template: VE_Template = tObject.getTemplate(templateVarID);\r\n                if (template.varData.isCreatedVariable(varID) || template.dataSource.isCreatedFsm(varID)) {\r\n                  state.setTemplateInfo(template, varID, assignStr);\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \".*.*.**\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \".*.**\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n            else {\r\n              VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \".*.*\", \"\"));\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"1*2.*3*.*4.*.*\", \"\"));\r\n          return false;\r\n        }\r\n      }\r\n      else {\r\n        // *\r\n        let varID: string = assignStr.substring(1);\r\n        if (varID == fsm_id) {\r\n          VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"*\", \"\"));\r\n          return false;\r\n        }\r\n        let errorInfo: ErrorInfo = new ErrorInfo();\r\n        let stateVar: Nullable<IVeryVar> = VeryVarManager.getVariable(varID, project_name, object_id, errorInfo);\r\n        if (stateVar === null) {\r\n          VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"\" + errorInfo, \"\"));\r\n          return false;\r\n        }\r\n        else {\r\n          //\r\n          if (VE_AssignmentTypeJudge.allow(fsm.fsmVar, stateVar)) {\r\n            state.setStateVariable(stateVar);\r\n          }\r\n          else {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"*\", \"\"));\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    //\r\n    else {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let val: any = fsm.fsmVar.initValue(assignStr, errorInfo);\r\n      if (!errorInfo.isRight) {\r\n        VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"\", \"\"));\r\n        return false;\r\n      }\r\n      state.setConstValue(val);\r\n    }\r\n    return true;\r\n  }\r\n\r\n\r\n  private static assignmentAction(project_name: string, object_id: string, fsm_id: string, global_vars: VE_Variables, objects: VE_Objects, very_object: VeryEngineObject, action_data: VE_StateActionData, state: VE_State): boolean {\r\n    // \r\n    let assignment: VE_Assignment = new VE_Assignment(state, action_data.totalString);\r\n    let varID: string = action_data.varID;\r\n    // Debug.LogWarning(\"\" + action_data.TotalString);\r\n    // 1 1*2.*3*.*4.*.*\r\n    if (varID.indexOf(StateConst.VARIABLE_SYMBOL) > -1)  // \r\n    {\r\n      if (varID.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n        let valArray: string[] = varID.split(StateConst.STATE_SEPARATOR);\r\n        for (let q: number = 0; q < valArray.length; q++) {\r\n          valArray[q] = valArray[q].trim();\r\n        }\r\n        // .* or *.*\r\n        if (valArray.length === 2) {\r\n          // *.*\r\n          if (valArray[0].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n            let templateVarID: string = valArray[0].substring(1);\r\n            varID = valArray[1].substring(1);\r\n            if (very_object.isCreatedTemplate(templateVarID)) {\r\n              let template: VE_Template = very_object.getTemplate(templateVarID);\r\n              if (template.varData.isCreatedVariable(varID)) {\r\n                let varPara: string[] = template.varData.getVariableParas(varID);\r\n                if (varPara[1].toLowerCase() === \"expression\" || varPara[1].toLowerCase() === \"\") {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.*\", \"\"));\r\n                  return false;\r\n                }\r\n                else {\r\n                  assignment.setLeftTemplateVar(template, varID);\r\n                }\r\n              }\r\n              else if (template.dataSource.isCreatedFsm(varID)) {\r\n                assignment.setLeftTemplateVar(template, varID);\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.***\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n            else {\r\n              if (global_vars.isCreatedTemplate(templateVarID)) {\r\n                let template: VE_Template = global_vars.getTemplate(templateVarID);\r\n                if (template.varData.isCreatedVariable(varID)) {\r\n                  let varPara: string[] = template.varData.getVariableParas(varID);\r\n                  if (varPara[1].toLowerCase() === \"expression\" || varPara[1].toLowerCase() === \"\") {\r\n                    VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.*\", \"\"));\r\n                    return false;\r\n                  }\r\n                  else {\r\n                    assignment.setLeftTemplateVar(template, varID);\r\n                  }\r\n                }\r\n                else if (template.dataSource.isCreatedFsm(varID)) {\r\n                  assignment.setLeftTemplateVar(template, varID);\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.***\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.**\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          //.*\r\n          else {\r\n            if (objects.isCreated(valArray[0])) {\r\n              let aObject: VeryEngineObject = objects.getVeryObject(valArray[0]);\r\n              varID = varID.substring(1);\r\n              if (aObject.isCreatedExpression(varID)) {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*\", \"\"));\r\n                return false;\r\n              }\r\n              else if (aObject.isCreatedFsm(varID)) {\r\n                let v: IVeryVar = aObject.getFsm(varID).fsmVar;\r\n                assignment.setLeftVariable(v);\r\n              }\r\n              else if (aObject.isCreatedVariable(varID)) {\r\n                let v: IVeryVar = aObject.getVariable(varID);\r\n                assignment.setLeftVariable(v);\r\n              }\r\n              else if (aObject.isCreatedTemplate(varID)) {\r\n                let template: VE_Template = aObject.getTemplate(varID);\r\n                assignment.setLeftTemplate(template);\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n            else {\r\n              VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*\", \"\"));\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        else if (valArray.length === 3)  // .*.*\r\n        {\r\n          // .*.*\r\n          if (valArray[0].startsWith(StateConst.STATE_SEPARATOR) || !valArray[1].startsWith(StateConst.STATE_SEPARATOR) || !valArray[2].startsWith(StateConst.STATE_SEPARATOR)) {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"1*2.*3*.*4.*.*\", \"\"));\r\n            return false;\r\n          }\r\n          else {\r\n            let templateVarID: string = valArray[1].substring(1);\r\n            varID = valArray[2].substring(1);\r\n            if (objects.isCreated(valArray[0])) {\r\n              let tObject: VeryEngineObject = objects.getVeryObject(valArray[0]);\r\n              if (tObject.isCreatedTemplate(templateVarID)) {\r\n                let template: VE_Template = tObject.getTemplate(templateVarID);\r\n                if (template.dataSource.isCreatedFsm(varID)) {\r\n                  assignment.setLeftTemplateVar(template, varID);\r\n                }\r\n                else if (template.varData.isCreatedVariable(varID)) {\r\n                  let varParas: string[] = template.varData.getVariableParas(varID);\r\n                  if (varParas[1].toLowerCase() === \"expression\" || varParas[1].toLowerCase() === \"\") {\r\n                    VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.*.*.*\", \"\"));\r\n                    return false;\r\n                  }\r\n                  else {\r\n                    assignment.setLeftTemplateVar(template, varID);\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.*.**\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.**\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n            else {\r\n              VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.*\", \"\"));\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"1*2.*3*.*4.*.*\", \"\"));\r\n          return false;\r\n        }\r\n      }\r\n      else // *\r\n      {\r\n        varID = varID.substring(1);\r\n        if (very_object.isCreatedExpression(varID)) {\r\n          VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*\", \"\"));\r\n          return false;\r\n        }\r\n        else if (very_object.isCreatedFsm(varID)) {\r\n          let v: IVeryVar = very_object.getFsm(varID).fsmVar;\r\n          assignment.setLeftVariable(v);\r\n        }\r\n        else if (very_object.isCreatedVariable(varID)) {\r\n          let v: IVeryVar = very_object.getVariable(varID);\r\n          assignment.setLeftVariable(v);\r\n        }\r\n        else if (very_object.isCreatedTemplate(varID)) {\r\n          let template: VE_Template = very_object.getTemplate(varID);\r\n          assignment.setLeftTemplate(template);\r\n        }\r\n        else {\r\n          // \r\n          if (global_vars.isCreatedExpression(varID)) {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*\", \"\"));\r\n            return false;\r\n          }\r\n          else if (global_vars.isCreatedVariable(varID)) {\r\n            let v: IVeryVar = global_vars.getVariable(varID);\r\n            assignment.setLeftVariable(v);\r\n          }\r\n          else if (global_vars.isCreatedTemplate(varID)) {\r\n            let template: VE_Template = global_vars.getTemplate(varID);\r\n            assignment.setLeftTemplate(template);\r\n          }\r\n          else {\r\n            // \r\n            // if (VerySceneVariables.Variables.isCreatedExpression(varID)) {\r\n            //   VE_ErrorManager.Add(VE_Error.Error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.TotalString + \"*\", \"\"));\r\n            //   return false;\r\n            // }\r\n            // else if (VerySceneVariables.Variables.IsCreatedVariable(varID)) {\r\n            //   IVeryVar v = VerySceneVariables.Variables.GetVariable(varID);\r\n            //   assignment.SetLeft(v);\r\n            // }\r\n            // else {\r\n            //   VE_ErrorManager.Add(VE_Error.Error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.TotalString + \"*\", \"\"));\r\n            //   return false;\r\n            // }\r\n            VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*\", \"\"));\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n      return false;\r\n    }\r\n\r\n\r\n    // 2 1*2.*3*.*4.*.*5\r\n    varID = action_data.varValue.trim();\r\n\r\n    // \r\n    if (varID.startsWith(\"\\\"\") || varID.startsWith(\"'\") || varID.startsWith(\"\") || varID.startsWith(\"\")) {\r\n      assignment.setRightConst(varID.substring(1, varID.length - 2).trim());\r\n    }\r\n    else if (VE_StringFormat.isFormulaString(varID))  // \r\n    {\r\n      // Debug.LogError(varID);\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      StateConst.AssignmentFormulaCount++;\r\n      let localExp: IExpression = VE_Expressions.createLocalExpression(StateConst.AssignmentPrefix + StateConst.AssignmentFormulaCount.toString(), varID, project_name, object_id, errorInfo);\r\n      if (!errorInfo.isRight || !localExp) {\r\n        // errorInfo = \"\\n\" + errorInfo + \"\" + errorPos;\r\n        // return null;\r\n        VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\" + errorInfo, \"\"));\r\n        return false;\r\n      }\r\n      assignment.setRightVariable(new VeryExpression(localExp));\r\n    }\r\n    else {\r\n      if (varID.indexOf(StateConst.VARIABLE_SYMBOL) > -1)  // \r\n      {\r\n        if (varID.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n          let valArray: string[] = varID.split(StateConst.STATE_SEPARATOR);\r\n          for (let q: number = 0; q < valArray.length; q++) {\r\n            valArray[q] = valArray[q].trim();\r\n          }\r\n          // .* or *.*\r\n          if (valArray.length === 2) {\r\n            // *.*\r\n            if (valArray[0].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n              let templateVarID: string = valArray[0].substring(1);\r\n              varID = valArray[1].substring(1);\r\n              if (very_object.isCreatedTemplate(templateVarID)) {\r\n                let template: VE_Template = very_object.getTemplate(templateVarID);\r\n                if (template.varData.isCreatedVariable(varID) || template.dataSource.isCreatedFsm(varID)) {\r\n                  // \r\n                  assignment.setRightTemplateVariable(template, varID);\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.***\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                if (global_vars.isCreatedTemplate(templateVarID)) {\r\n                  let template: VE_Template = global_vars.getTemplate(templateVarID);\r\n                  if (template.varData.isCreatedVariable(varID) || template.dataSource.isCreatedFsm(varID)) {\r\n                    // \r\n                    assignment.setRightTemplateVariable(template, varID);\r\n                  }\r\n                  else {\r\n                    VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.***\", \"\"));\r\n                    return false;\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.**\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n            }\r\n            // .*\r\n            else {\r\n              if (objects.isCreated(valArray[0])) {\r\n                let aObject: VeryEngineObject = objects.getVeryObject(valArray[0]);\r\n                varID = varID.substring(1);\r\n                let rightVar: Nullable<IVeryVar> = null;\r\n                let rightTemplate: Nullable<VE_Template> = null;\r\n                if (aObject.isCreatedExpression(varID)) {\r\n                  rightVar = new VeryExpression(aObject.getExpression(varID));\r\n                }\r\n                else if (aObject.isCreatedFsm(varID)) {\r\n                  rightVar = aObject.getFsm(varID).fsmVar;\r\n                }\r\n                else if (aObject.isCreatedVariable(varID)) {\r\n                  rightVar = aObject.getVariable(varID);\r\n                }\r\n                else if (aObject.isCreatedTemplate(varID)) {\r\n                  rightTemplate = aObject.getTemplate(varID);\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*\", \"\"));\r\n                  return false;\r\n                }\r\n                // \r\n                if (rightVar !== null) {\r\n                  if (assignment.leftType === AssignType.Template) {\r\n                    VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n                    return false;\r\n                  }\r\n                  else if (assignment.leftType === AssignType.Variable) {\r\n                    if (VE_AssignmentTypeJudge.allow(assignment.leftVariable!, rightVar)) {\r\n                      assignment.setRightVariable(rightVar);\r\n                    }\r\n                    else {\r\n                      VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n                      return false;\r\n                    }\r\n                  }\r\n                  else {\r\n                    // \r\n                    assignment.setRightVariable(rightVar);\r\n                  }\r\n                }\r\n                else if (rightTemplate != null) {\r\n                  if (assignment.leftType === AssignType.Template) {\r\n                    assignment.setRightTemplate(rightTemplate);\r\n                  }\r\n                  else {\r\n                    VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n                    return false;\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          else if (valArray.length === 3)  // .*.*\r\n          {\r\n            // .*.*\r\n            if (valArray[0].startsWith(StateConst.STATE_SEPARATOR) || !valArray[1].startsWith(StateConst.STATE_SEPARATOR) || !valArray[2].startsWith(StateConst.STATE_SEPARATOR)) {\r\n              VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"1*2.*3*.*4.*.*\", \"\"));\r\n              return false;\r\n            }\r\n            else {\r\n              let templateVarID: string = valArray[1].substring(1);\r\n              varID = valArray[2].substring(1);\r\n              if (objects.isCreated(valArray[0])) {\r\n                let tObject: VeryEngineObject = objects.getVeryObject(valArray[0]);\r\n                if (tObject.isCreatedTemplate(templateVarID)) {\r\n                  let template: VE_Template = tObject.getTemplate(templateVarID);\r\n                  // \r\n                  if (template.dataSource.isCreatedFsm(varID) || template.varData.isCreatedVariable(varID)) {\r\n                    // \r\n                    assignment.setRightTemplateVariable(template, varID);\r\n                  }\r\n                  else {\r\n                    VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.*.**\", \"\"));\r\n                    return false;\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.**\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.*\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          else {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"1*2.*3*.*4.*.*\", \"\"));\r\n            return false;\r\n          }\r\n        }\r\n        else // *\r\n        {\r\n          varID = varID.substring(1);\r\n          let rightVar: Nullable<IVeryVar> = null;\r\n          let rightTemplate: Nullable<VE_Template> = null;\r\n          if (very_object.isCreatedExpression(varID)) {\r\n            rightVar = new VeryExpression(very_object.getExpression(varID));\r\n          }\r\n          else if (very_object.isCreatedFsm(varID)) {\r\n            rightVar = very_object.getFsm(varID).fsmVar;\r\n          }\r\n          else if (very_object.isCreatedVariable(varID)) {\r\n            rightVar = very_object.getVariable(varID);\r\n          }\r\n          else if (very_object.isCreatedTemplate(varID)) {\r\n            rightTemplate = very_object.getTemplate(varID);\r\n          }\r\n          else {\r\n            // \r\n            if (global_vars.isCreatedExpression(varID)) {\r\n              rightVar = new VeryExpression(global_vars.getExpression(varID));\r\n            }\r\n            else if (global_vars.isCreatedVariable(varID)) {\r\n              rightVar = global_vars.getVariable(varID);\r\n            }\r\n            else if (global_vars.isCreatedTemplate(varID)) {\r\n              rightTemplate = global_vars.getTemplate(varID);\r\n            }\r\n            else {\r\n              //\r\n              if (VerySceneVariables.Variables.isCreatedExpression(varID)) {\r\n                rightVar = new VeryExpression(VerySceneVariables.Variables.getExpression(varID));\r\n              }\r\n              else if (VerySceneVariables.Variables.isCreatedVariable(varID)) {\r\n                rightVar = VerySceneVariables.Variables.getVariable(varID);\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          // \r\n          if (rightVar != null) {\r\n            if (assignment.leftType === AssignType.Template) {\r\n              VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n              return false;\r\n            }\r\n            else if (assignment.leftType === AssignType.Variable) {\r\n              if (VE_AssignmentTypeJudge.allow(assignment.leftVariable!, rightVar)) {\r\n                assignment.setRightVariable(rightVar);\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n            else {\r\n              // \r\n              assignment.setRightVariable(rightVar);\r\n            }\r\n          }\r\n          else if (rightTemplate != null) {\r\n            if (assignment.leftType === AssignType.Template) {\r\n              assignment.setRightTemplate(rightTemplate);\r\n            }\r\n            else {\r\n              VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n              return false;\r\n            }\r\n          }\r\n          else {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n      else  // \r\n      {\r\n        if (assignment.leftType === AssignType.Template) {\r\n          if (varID.trim().toLowerCase() === \"null\") {\r\n            assignment.setRightNull();\r\n          }\r\n          else {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"null\", \"\"));\r\n            return false;\r\n          }\r\n        }\r\n        else if (assignment.leftType === AssignType.TemplateVariable) {\r\n          assignment.setRightConst(varID);\r\n        }\r\n        else {\r\n          if (assignment.leftVariable !== null) {\r\n            let errorInfo: ErrorInfo = new ErrorInfo();\r\n            let newValue: any = assignment.leftVariable.initValue(varID, errorInfo);\r\n            if (!errorInfo.isRight || !newValue) {\r\n              VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\" + errorInfo + \"\", \"\"));\r\n              return false;\r\n            }\r\n            else {\r\n              assignment.setRightConstValue(newValue);\r\n            }\r\n          }\r\n          else {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    let stateAction: VE_StateAction = new VE_StateAction();\r\n    stateAction.setAssignment(assignment);\r\n    state.addAction(stateAction);\r\n    return true;\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n  public static createInstance(project_name: string, object_id: string, var_id: string, template: VE_Template, object_name: string, error_info: ErrorInfo, destroy_on_create_new: boolean): VE_Template {\r\n\r\n\r\n    return template;\r\n  }\r\n\r\n\r\n}","export * from './loaderManager';\r\nexport * from './createInstance';","import { VeryTable } from '../index';\r\nimport { VE_Template, VE_Templates } from '../template';\r\nimport { VeryEngineObject, VE_Objects } from '../object';\r\nimport { VE_FsmData, VE_StateData, VE_StateTriggerData, VE_StateActionData } from '../dataSource';\r\nimport { VE_Manager } from '../manager';\r\nimport { VE_Variables, VeryVarManager } from '../variables';\r\nimport { VE_StringFormat } from '../utility';\r\nimport { VE_ErrorManager, VE_Error } from '../global';\r\nimport { StateConst } from '../state';\r\nimport { CreateInstance } from './createInstance';\r\nimport { GameObject } from '../babylon';\r\n\r\n\r\nexport enum AnalisysType { Global, Object, Template }\r\n\r\nexport class LoaderManager {\r\n\r\n  private _currentType: AnalisysType = AnalisysType.Global;\r\n\r\n  private _table!: VeryTable;\r\n\r\n  private _projectName: string = '';\r\n\r\n  private _lastFsmID: string = '';\r\n  private _activeTemplate: Nullable<VE_Template> = null;\r\n  private _activeObject: Nullable<VeryEngineObject> = null;\r\n  private _activeFsmData: Nullable<VE_FsmData> = null;\r\n  private _activeStateData: Nullable<VE_StateData> = null;\r\n\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public load(project_name: string, table: VeryTable): boolean {\r\n    this._projectName = project_name;\r\n    this._table = table;\r\n\r\n    // \r\n    VE_Manager.createProject(project_name);\r\n\r\n    let templates: VE_Templates = VE_Manager.templates(project_name);\r\n    let objects: VE_Objects = VE_Manager.objects(project_name);\r\n    let globalVars: VE_Variables = VE_Manager.variables(project_name);\r\n\r\n    // console.log(table);\r\n    if (table) {\r\n      for (let i: number = 1; i < table.RowCount; i++) {\r\n        // console.log(`${i+1}${table.getData(i, 0)}`);\r\n        // \r\n        if(table.getData(i, 0).startsWith('//')) {\r\n          continue;\r\n        }\r\n        // \r\n        if(table.getRow(i)!.isEmpty()) {\r\n          continue;\r\n          // console.log('' + (i + 1));\r\n        }\r\n        // 1\r\n        if (table.getData(i, 0).startsWith(\"_\")) {\r\n          this._activeFsmData = null;\r\n          this._activeStateData = null;\r\n          this._currentType = AnalisysType.Template;\r\n          let templateID = table.getData(i, 0).replace(' ', '').substring(3);\r\n          // TODO: \r\n          if (templateID.indexOf(':') > -1 || templateID.indexOf('') > -1) {\r\n\r\n          } else {\r\n            if (!VE_StringFormat.isIDLegal(templateID)) {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 0), \"\" + table.getData(i, 0) + \"\", table.ID))\r\n              return false;\r\n            }\r\n            if (!templates.isCreatedTemplate(templateID)) {\r\n              let template: VE_Template = new VE_Template(project_name, templateID);\r\n              templates.addTemplate(templateID, template);\r\n              this._activeTemplate = template;\r\n            } else {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 0), \"\" + table.getData(i, 0) + \"\", table.ID))\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        // 2\r\n        else if (table.getData(i, 0) !== '') {\r\n          this._activeFsmData = null;\r\n          this._activeStateData = null;\r\n          this._currentType = AnalisysType.Object;\r\n          let objectID: string = table.getData(i, 0);\r\n          let objName: string = '';\r\n          if (objectID.indexOf('=') > -1) {\r\n            let nameArray: string[] = objectID.split('=');\r\n            if (nameArray.length === 2) {\r\n              objectID = nameArray[0].trim();\r\n              objName = nameArray[1].trim();\r\n            } else {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 0), \"\" + table.getData(i, 0) + \"=\", table.ID))\r\n              return false;\r\n            }\r\n          }\r\n          if (!VE_StringFormat.isIDLegal(objectID)) {\r\n            VE_ErrorManager.Add(VE_Error.error(table.pos(i, 0), \"\" + table.getData(i, 0) + \"\", table.ID))\r\n            return false;\r\n          }\r\n          // GameObject\r\n          let activeGameObject: Nullable<GameObject> = null;\r\n          if (objName === '') {\r\n            activeGameObject = new GameObject(`__${objectID}_Empty`);\r\n          } else {\r\n            activeGameObject = GameObject.Find(objName);\r\n            if (activeGameObject === null) {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 0), \"\" + objName + \"\", table.ID))\r\n              return false;\r\n            }\r\n          }\r\n          if (!objects.isCreated(objectID)) {\r\n            // \r\n            let tempObject: VeryEngineObject = new VeryEngineObject(project_name, objectID, activeGameObject);\r\n            objects.add(objectID, tempObject);\r\n            this._activeObject = tempObject;\r\n          } else {\r\n            VE_ErrorManager.Add(VE_Error.error(table.pos(i, 0), \"\" + table.getData(i, 0) + \"\", table.ID))\r\n            return false;\r\n          }\r\n        }\r\n        // 3\r\n        else if (table.getData(i, 5) !== \"\" && table.getData(i, 1) === \"\" && table.getData(i, 2) === \"\" && table.getData(i, 3) === \"\" && table.getData(i, 4) === \"\" && table.getData(i, 6) === \"\" && table.getData(i, 7) === \"\" && table.getData(i, 8) === \"\") {\r\n          let paraData: string = table.getData(i, 5);\r\n          // \r\n          if (this._currentType === AnalisysType.Global) {\r\n            // \r\n            let varArray: string[] = VE_StringFormat.paraSegment(paraData);\r\n            if (varArray.length === 2 || varArray.length === 3) {\r\n              let varID: string = varArray[0].trim();\r\n              if (!VE_StringFormat.isIDLegal(varID)) {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              }\r\n              let paraArray: string[] = [varArray[1].trim()];\r\n              if (varArray.length === 2) {\r\n                paraArray[1] = '';\r\n              } else {\r\n                paraArray[1] = varArray[2].trim();\r\n              }\r\n              if (!globalVars.varData.isCreatedVariable(varID)) {\r\n                globalVars.varData.addVariable(varID, paraArray, table.pos(i, 5));\r\n              } else {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              }\r\n            } else {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n              return false;\r\n            }\r\n          }\r\n          // \r\n          else if (paraData.indexOf('=') > -1) {\r\n            let paraArray: string[] = paraData.split('=');\r\n            // \r\n            // \r\n            if (paraArray.length === 2 && paraArray[0].trim() === this._lastFsmID) {\r\n              if (this._activeFsmData === null) {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              } else {\r\n                let stateInfo: string[] = paraArray[1].trim().split(/,|/);\r\n                let stateIndex: number = StateConst.STATE_INDEX;\r\n                let stateData: Nullable<VE_StateData> = null;\r\n                if (stateInfo.length === 2) {\r\n                  stateInfo[0] = stateInfo[0].trim();\r\n                  stateInfo[1] = stateInfo[1].trim();\r\n                  if (stateInfo[1].startsWith('#')) {\r\n                    stateIndex = parseInt(stateInfo[1].substring(1));\r\n                    if (stateIndex === NaN) {\r\n                      VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"IDIDID=#ID\", table.ID))\r\n                      return false;\r\n                    }\r\n                  } else {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"IDIDID=#ID\", table.ID))\r\n                    return false;\r\n                  }\r\n                }\r\n                stateData = new VE_StateData(this._activeFsmData, stateInfo[0].trim(), false, stateIndex);\r\n                stateData.rowIndex = i;\r\n                this._activeFsmData.addState(stateData);\r\n                this._activeStateData = stateData;\r\n              }\r\n            }\r\n            // \r\n            else {\r\n              let varArray: string[] = VE_StringFormat.paraSegment(paraData);\r\n              if (varArray.length === 3) {\r\n                let varID: string = varArray[0].trim();\r\n                if (!VE_StringFormat.isIDLegal(varID)) {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                let para2Array: string[] = [varArray[1].trim(), varArray[2].trim()];\r\n                // \r\n                if (this._currentType === AnalisysType.Object) {\r\n                  if (this._activeObject!.varData.isCreatedVariable(varID)) {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeObject!.objectID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  // \r\n                  if (this._activeObject!.dataSource.isCreatedFsm(varID)) {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeObject!.objectID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  this._activeObject!.varData.addVariable(varID, para2Array, table.pos(i, 5));\r\n                }\r\n                else if (this._currentType === AnalisysType.Template) {\r\n                  if (this._activeTemplate!.varData.isCreatedVariable(varID)) {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeTemplate!.templateID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  // \r\n                  if (this._activeTemplate!.dataSource.isCreatedFsm(varID)) {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  this._activeTemplate!.varData.addVariable(varID, para2Array, table.pos(i, 5));\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n              } else {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          // \r\n          else {\r\n            let varArray: string[] = VE_StringFormat.paraSegment(paraData);\r\n            if (varArray.length === 2 || varArray.length === 3) {\r\n              let varID: string = varArray[0].trim();\r\n              if (!VE_StringFormat.isIDLegal(varID)) {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              }\r\n              let paraArray: string[] = [varArray[1].trim()];\r\n              if (varArray.length === 2) {\r\n                paraArray[1] = '';\r\n              } else {\r\n                paraArray[1] = varArray[2].trim();\r\n              }\r\n              // \r\n              if (this._currentType === AnalisysType.Object) {\r\n                if (this._activeObject!.varData.isCreatedVariable(varID)) {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeObject!.objectID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                // \r\n                if (this._activeObject!.dataSource.isCreatedFsm(varID)) {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeObject!.objectID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                this._activeObject!.varData.addVariable(varID, paraArray, table.pos(i, 5));\r\n              }\r\n              else if (this._currentType === AnalisysType.Template) {\r\n                if (this._activeTemplate!.varData.isCreatedVariable(varID)) {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeTemplate!.templateID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                // \r\n                if (this._activeTemplate!.dataSource.isCreatedFsm(varID)) {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeTemplate!.templateID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                this._activeTemplate!.varData.addVariable(varID, paraArray, table.pos(i, 5));\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              }\r\n            } else {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        // 4 +  +  +  + \r\n        else {\r\n          // \r\n          if (table.getData(i, 5) !== '') {\r\n            let paraData: string = table.getData(i, 5);\r\n            // \r\n            if (paraData.indexOf('=') > -1) {\r\n              let stateArray: string[] = paraData.split('=');\r\n              let fsmID: string = stateArray[0].trim();\r\n              // \r\n              if (stateArray.length === 2 && fsmID === this._lastFsmID) {\r\n                if (this._activeFsmData === null) {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                } else {\r\n                  let stateInfo: string[] = stateArray[1].trim().split(/,|/);\r\n                  let stateIndex: number = StateConst.STATE_INDEX;\r\n                  let stateData: Nullable<VE_StateData> = null;\r\n                  if (stateInfo.length === 2) {\r\n                    stateInfo[0] = stateInfo[0].trim();\r\n                    stateInfo[1] = stateInfo[1].trim();\r\n                    if (stateInfo[1].startsWith('#')) {\r\n                      stateIndex = parseInt(stateInfo[1].substring(1));\r\n                      if (stateIndex === NaN) {\r\n                        VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"IDIDID=#ID\", table.ID))\r\n                        return false;\r\n                      }\r\n                    } else {\r\n                      VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"IDIDID=#ID\", table.ID))\r\n                      return false;\r\n                    }\r\n                  }\r\n                  stateData = new VE_StateData(this._activeFsmData, stateInfo[0].trim(), false, stateIndex);\r\n                  stateData.rowIndex = i;\r\n                  this._activeFsmData.addState(stateData);\r\n                  this._activeStateData = stateData;\r\n                }\r\n              } else {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\" + fsmID + \"\", table.ID))\r\n                return false;\r\n              }\r\n            }\r\n            // \r\n            else {\r\n              let varArray: string[] = VE_StringFormat.paraSegment(paraData);\r\n              if (varArray.length === 2 || varArray.length === 3 || varArray.length === 4) {\r\n                let fsmID: string = varArray[0].trim();\r\n                if (!VE_StringFormat.isIDLegal(fsmID)) {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                this._lastFsmID = fsmID;\r\n                let paraArray: string[] = [varArray[1].trim()];\r\n                if (varArray.length === 2) {\r\n                  paraArray[1] = '';\r\n                } else {\r\n                  paraArray[1] = varArray[2].trim();\r\n                }\r\n                let stateIndex: number = StateConst.STATE_INDEX;\r\n                if (varArray.length === 4) {\r\n                  if (varArray[3].startsWith('#')) {\r\n                    stateIndex = parseInt(varArray[3].substring(1));\r\n                    if (stateIndex === NaN) {\r\n                      VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + varArray[3] + \"IDIDID#ID\", table.ID))\r\n                      return false;\r\n                    }\r\n                  } else {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + varArray[3] + \"IDIDID#ID\", table.ID))\r\n                    return false;\r\n                  }\r\n                }\r\n                // \r\n                if (this._currentType === AnalisysType.Object) {\r\n                  if (this._activeObject!.varData.isCreatedVariable(fsmID)) {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeObject!.objectID + \"\" + fsmID + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  // \r\n                  if (this._activeObject!.dataSource.isCreatedFsm(fsmID)) {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeObject!.objectID + \"\" + fsmID + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  // \r\n                  this._activeObject!.dataSource.createFsm(fsmID, table.pos(i, 5));\r\n                  this._activeFsmData = this._activeObject!.dataSource.getFsmData(fsmID);\r\n                  // \r\n                  if (VeryVarManager.hasVarType(paraArray[0])) {\r\n                    this._activeFsmData.initFsm(paraArray[0], paraArray[1]);\r\n                    // \r\n                    let stateData: VE_StateData = new VE_StateData(this._activeFsmData, paraArray[1], true, stateIndex);\r\n                    stateData.rowIndex = i;\r\n                    this._activeFsmData.addState(stateData);\r\n                    this._activeStateData = stateData;\r\n                  } else {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeObject!.objectID + \"\" + fsmID + \"\" + paraArray[0] + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                }\r\n                else if (this._currentType === AnalisysType.Template) {\r\n                  if (this._activeTemplate!.varData.isCreatedVariable(fsmID)) {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeTemplate!.templateID + \"\" + fsmID + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  // \r\n                  if (this._activeTemplate!.dataSource.isCreatedFsm(fsmID)) {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeTemplate!.templateID + \"\" + fsmID + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  // \r\n                  this._activeTemplate!.dataSource.createFsm(fsmID, table.pos(i, 5));\r\n                  this._activeFsmData = this._activeTemplate!.dataSource.getFsmData(fsmID);\r\n                  // \r\n                  if (VeryVarManager.hasVarType(paraArray[0])) {\r\n                    this._activeFsmData.initFsm(paraArray[0], paraArray[1]);\r\n                    // \r\n                    let stateData: VE_StateData = new VE_StateData(this._activeFsmData, paraArray[1], true, stateIndex);\r\n                    stateData.rowIndex = i;\r\n                    this._activeFsmData.addState(stateData);\r\n                    this._activeStateData = stateData;\r\n                  } else {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeTemplate!.objectID + \"\" + fsmID + \"\" + paraArray[0] + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n              } else {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n\r\n          // \r\n          if (table.getData(i, 2) !== '') {\r\n            if (this._activeFsmData === null || this._activeStateData === null) {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 2), \"\" + table.getData(i, 2) + \"\", table.ID))\r\n              return false;\r\n            }\r\n            // DataSource\r\n            let triggerID: string = table.getData(i, 2);\r\n            if (!VE_StringFormat.isIDLegal(triggerID)) {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 2), \"\" + table.getData(i, 2) + \"\", table.ID))\r\n              return false;\r\n            }\r\n            if (table.getData(i, 3) !== '') {\r\n              if (!this._activeFsmData!.dataSource.isCreatedTrigger(triggerID)) {\r\n                this._activeFsmData!.dataSource.addTrigger(triggerID, VE_StringFormat.paraSegment(table.getData(i, 3)), table.pos(i, 2));\r\n              } else {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 2), \"\" + table.getData(i, 2) + \"\", table.ID))\r\n                return false;\r\n              }\r\n            }\r\n\r\n            // StateData\r\n            let triggerData: VE_StateTriggerData = new VE_StateTriggerData(triggerID);\r\n            this._activeStateData.addTrigger(triggerData, table.pos(i, 2));\r\n\r\n            // \r\n            if (table.getData(i, 1) !== '') {\r\n              triggerData.logicalSwitch = table.getData(i, 1);\r\n            }\r\n\r\n            // \r\n            if (table.getData(i, 4) !== '') {\r\n              triggerData.logicalExp = table.getData(i, 4);\r\n            }\r\n          } else {\r\n            // \r\n            if (table.getData(i, 1) !== '') {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 1), \"\" + table.getData(i, 1) + \"\", table.ID))\r\n              return false;\r\n            }\r\n\r\n            // \r\n            if (table.getData(i, 4) !== '') {\r\n              if (this._activeFsmData === null || this._activeStateData === null) {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 4), \"\" + table.getData(i, 4) + \"\", table.ID))\r\n                return false;\r\n              }\r\n              if (this._activeStateData.logicalExp !== '') {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 4), \"\" + table.getData(i, 4) + \"12\", table.ID))\r\n                return false;\r\n              } else {\r\n                this._activeStateData.logicalExp = table.getData(i, 4);\r\n              }\r\n            }\r\n\r\n            if (table.getData(i, 3) !== '') {\r\n              VE_ErrorManager.Add(VE_Error.warning(table.pos(i, 3), \"\" + table.getData(i, 3) + \"\", table.ID))\r\n            }\r\n          }\r\n\r\n          // \r\n          if (table.getData(i, 6) !== '') {\r\n            if (this._activeFsmData === null || this._activeStateData === null) {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 6), \"\" + table.getData(i, 6) + \"\", table.ID))\r\n              return false;\r\n            }\r\n            // \r\n            let tempStr: string = table.getData(i, 6).toLowerCase();\r\n            if (tempStr.startsWith('log(') || tempStr.startsWith('log') || tempStr.startsWith('') || tempStr.startsWith('(')) {\r\n              let newActionID: string = project_name + '___' + StateConst.LogCount++;\r\n              let actionData: VE_StateActionData = new VE_StateActionData(newActionID, 'true', 'false');\r\n              this._activeStateData.addAction(actionData, table.pos(i, 6));\r\n              let actionPara: string = table.getData(i, 6).substring(4);\r\n              if (tempStr.startsWith('')) {\r\n                actionPara = table.getData(i, 6).substring(3);\r\n              }\r\n              this._activeFsmData.dataSource.addAction(newActionID, ['', '', actionPara.substring(0, actionPara.length - 1)], ['false', 'false'], table.pos(i, 6));\r\n              if (table.getData(i, 7) !== '') {\r\n                VE_ErrorManager.Add(VE_Error.warning(table.pos(i, 7), \"\" + table.getData(i, 7) + \"\", table.ID))\r\n              }\r\n            }\r\n            else if (tempStr.startsWith('error(') || tempStr.startsWith('error') || tempStr.startsWith('') || tempStr.startsWith('(')) {\r\n              let newActionID: string = project_name + '___' + StateConst.LogCount++;\r\n              let actionData: VE_StateActionData = new VE_StateActionData(newActionID, 'true', 'false');\r\n              this._activeStateData.addAction(actionData, table.pos(i, 6));\r\n              let actionPara: string = table.getData(i, 6).substring(6);\r\n              if (tempStr.startsWith('')) {\r\n                actionPara = table.getData(i, 6).substring(3);\r\n              }\r\n              this._activeFsmData.dataSource.addAction(newActionID, ['', '', actionPara.substring(0, actionPara.length - 1)], ['false', 'false'], table.pos(i, 6));\r\n              if (table.getData(i, 7) !== '') {\r\n                VE_ErrorManager.Add(VE_Error.warning(table.pos(i, 7), \"\" + table.getData(i, 7) + \"\", table.ID))\r\n              }\r\n            }\r\n            else if (tempStr.startsWith('warn(') || tempStr.startsWith('warn') || tempStr.startsWith('') || tempStr.startsWith('(')) {\r\n              let newActionID: string = project_name + '___' + StateConst.LogCount++;\r\n              let actionData: VE_StateActionData = new VE_StateActionData(newActionID, 'true', 'false');\r\n              this._activeStateData.addAction(actionData, table.pos(i, 6));\r\n              let actionPara: string = table.getData(i, 6).substring(5);\r\n              if (tempStr.startsWith('')) {\r\n                actionPara = table.getData(i, 6).substring(3);\r\n              }\r\n              this._activeFsmData.dataSource.addAction(newActionID, ['', '', actionPara.substring(0, actionPara.length - 1)], ['false', 'false'], table.pos(i, 6));\r\n              if (table.getData(i, 7) !== '') {\r\n                VE_ErrorManager.Add(VE_Error.warning(table.pos(i, 7), \"\" + table.getData(i, 7) + \"\", table.ID))\r\n              }\r\n            }\r\n            else if (table.getData(i, 6).indexOf('=') > -1) {\r\n              if (table.getData(i, 7) !== '') {\r\n                VE_ErrorManager.Add(VE_Error.warning(table.pos(i, 7), \"\" + table.getData(i, 7) + \"\", table.ID))\r\n              }\r\n\r\n              // = \r\n              let equalIndex: number = table.getData(i, 6).indexOf('=');\r\n              let actionData: VE_StateActionData = new VE_StateActionData('');\r\n              actionData.setAssignmentAction(table.getData(i, 6), table.getData(i, 6).substring(0, equalIndex).trim(), table.getData(i, 6).substring(equalIndex + 1).trim());\r\n              this._activeStateData.addAction(actionData, table.pos(i, 6));\r\n            }\r\n            else {\r\n              // ID\r\n              let actionArray: string[] = VE_StringFormat.paraSegment(table.getData(i, 6));\r\n              if (actionArray.length === 2 || actionArray.length === 3 || actionArray.length === 4) {\r\n                let actionData: VE_StateActionData;\r\n                if (actionArray.length === 2) {\r\n                  actionData = new VE_StateActionData(actionArray[0], actionArray[1]);\r\n                } else if (actionArray.length === 3) {\r\n                  actionData = new VE_StateActionData(actionArray[0], actionArray[1], actionArray[2]);\r\n                } else {\r\n                  actionData = new VE_StateActionData(actionArray[0], actionArray[1], actionArray[2], actionArray[3]);\r\n                }\r\n                this._activeStateData.addAction(actionData, table.pos(i, 6));\r\n              } else {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 6), \"\" + table.getData(i, 6) + \"IDboolbool\", table.ID))\r\n                return false;\r\n              }\r\n\r\n              // \r\n              if (table.getData(i, 7) !== '') {\r\n                if (!VE_StringFormat.isIDLegal(actionArray[0])) {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 6), \"\" + table.getData(i, 6) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                if (!this._activeFsmData.dataSource.isCreatedAction(actionArray[0])) {\r\n                  if (actionArray.length == 2) {\r\n                    this._activeFsmData.dataSource.addAction(actionArray[0], VE_StringFormat.paraSegment(table.getData(i, 7)), [actionArray[1], 'false'], table.pos(i, 6));\r\n                  } else {\r\n                    this._activeFsmData.dataSource.addAction(actionArray[0], VE_StringFormat.paraSegment(table.getData(i, 7)), [actionArray[1], actionArray[2]], table.pos(i, 6));\r\n                  }\r\n                } else {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 6), \"\" + table.getData(i, 6) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n              }\r\n            }\r\n          } else {\r\n            if (table.getData(i, 7) !== '') {\r\n              VE_ErrorManager.Add(VE_Error.warning(table.pos(i, 7), \"\" + table.getData(i, 7) + \"\", table.ID))\r\n            }\r\n          }\r\n\r\n          // \r\n          if (table.getData(i, 8) !== '') {\r\n            if (this._activeFsmData === null || this._activeStateData === null) {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 8), \"\" + table.getData(i, 8) + \"\", table.ID))\r\n              return false;\r\n            }\r\n            this._activeStateData!.addAssociatedState(table.getData(i, 8), table.pos(i, 8));\r\n          }\r\n        }\r\n      }\r\n\r\n      return CreateInstance.createProject(project_name);\r\n    } else {\r\n      VE_ErrorManager.Add(VE_Error.error('', '', 'null'));\r\n      return false;\r\n    }\r\n\r\n  }\r\n\r\n\r\n}","export * from './projects';\r\nexport * from './manager';\r\nexport * from './reset';","import { VE_Projects } from \"./projects\";\r\nimport { VE_Objects } from \"../object\";\r\nimport { VE_Templates } from \"../template\";\r\nimport { VE_Variables } from \"../variables\";\r\nimport { VE_VariableData } from \"../dataSource\";\r\n\r\nexport class VE_Manager {\r\n\r\n  public static get projects(): VE_Projects {\r\n    if(this._projects === null) {\r\n      this._projects = new VE_Projects();\r\n    }\r\n    return this._projects;\r\n  }\r\n  private static _projects: VE_Projects | null = null; \r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public static createProject(project_name: string): void {\r\n    if(!VE_Manager.projects.isCreatedObjects(project_name)) {\r\n      VE_Manager.projects.addObjects(project_name, new VE_Objects(project_name));\r\n    }\r\n    if(!VE_Manager.projects.isCreatedTemplates(project_name)) {\r\n      VE_Manager.projects.addTemplates(project_name, new VE_Templates(project_name));\r\n    }\r\n    if(!VE_Manager.projects.isCreatedVariables(project_name)) {\r\n      VE_Manager.projects.addVariables(project_name, new VE_Variables(project_name));\r\n    }\r\n  }\r\n\r\n  public static globalVarData(project_name: string): VE_VariableData {\r\n    if(!VE_Manager.projects.isCreatedGlobals(project_name)) {\r\n      VE_Manager.projects.addVariables(project_name, new VE_Variables(project_name));\r\n    }\r\n    return VE_Manager.projects.getGlobalVars(project_name);\r\n  }\r\n\r\n  public static templates(project_name: string): VE_Templates {\r\n    if(!VE_Manager.projects.isCreatedTemplates(project_name)) {\r\n      VE_Manager.projects.addTemplates(project_name, new VE_Templates(project_name));\r\n    }\r\n    return VE_Manager.projects.getTemplates(project_name);\r\n  }\r\n\r\n  public static variables(project_name: string): VE_Variables {\r\n    if(!VE_Manager.projects.isCreatedVariables(project_name)) {\r\n      VE_Manager.projects.addVariables(project_name, new VE_Variables(project_name));\r\n    }\r\n    return VE_Manager.projects.getVariables(project_name);\r\n  }\r\n\r\n  public static objects(project_name: string): VE_Objects {\r\n    if(!VE_Manager.projects.isCreatedObjects(project_name)) {\r\n      VE_Manager.projects.addObjects(project_name, new VE_Objects(project_name));\r\n    }\r\n    return VE_Manager.projects.getObjects(project_name);\r\n  }\r\n\r\n  public static clear(): void {\r\n    VE_Manager.projects.clear()\r\n    this._projects = null;\r\n  }\r\n\r\n  public static clearProject(project_name: string): void {\r\n    VE_Manager.projects.clearProject(project_name);\r\n  }\r\n\r\n\r\n}","import { VE_Objects } from \"../object\";\r\nimport { VE_VariableData } from \"../dataSource\";\r\nimport { VE_Templates } from \"../template\";\r\nimport { VE_Variables } from \"../variables\";\r\n\r\n\r\nexport class VE_Projects {\r\n\r\n  private _objects: { [key: string]: VE_Objects } = {};\r\n  private _variables: { [key: string]: VE_Variables } = {};\r\n  private _templates: { [key: string]: VE_Templates } = {};\r\n\r\n  public projects: string[] = [];\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public isCreatedObjects(project_name: string): boolean {\r\n    if(this._objects[project_name]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addObjects(project_name: string, objects: VE_Objects): void {\r\n    this._objects[project_name] = objects;\r\n  }\r\n\r\n  public getObjects(project_name: string): VE_Objects {\r\n    return this._objects[project_name];\r\n  }\r\n\r\n  public isCreatedVariables(project_name: string): boolean {\r\n    if(this._variables[project_name]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addVariables(project_name: string, variables: VE_Variables): void {\r\n    this._variables[project_name] = variables;\r\n  }\r\n\r\n  public getVariables(project_name: string): VE_Variables {\r\n    return this._variables[project_name];\r\n  }\r\n\r\n  public isCreatedTemplates(project_name: string): boolean {\r\n    if(this._templates[project_name]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTemplates(project_name: string, templates: VE_Templates): void {\r\n    this._templates[project_name] = templates;\r\n  }\r\n\r\n  public getTemplates(project_name: string): VE_Templates {\r\n    return this._templates[project_name];\r\n  }\r\n\r\n  public isCreatedGlobals(project_name: string): boolean {\r\n    if(this._variables[project_name]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getGlobalVars(project_name: string): VE_VariableData {\r\n    return this._variables[project_name].varData;\r\n  }\r\n\r\n  public clear(): void {\r\n    // TODO\r\n    this._objects = {};\r\n    this._templates = {};\r\n    this._variables = {};\r\n  }\r\n\r\n  public clearProject(project_name: string): void {\r\n    delete this._objects[project_name];\r\n    delete this._templates[project_name];\r\n    delete this._variables[project_name];\r\n  }\r\n\r\n  public sleep(): void {\r\n    \r\n  }\r\n\r\n\r\n}","import { VE_Manager } from \"./manager\";\r\n\r\nexport class VE_Reset {\r\n\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public static dispose(): void {\r\n\r\n    // \r\n    VE_Manager.clear();\r\n\r\n    // \r\n\r\n    // \r\n\r\n    // \r\n\r\n  }\r\n\r\n\r\n\r\n}","export * from './veryengineObject';\r\nexport * from './objects';","import { VeryEngineObject } from \"./veryengineObject\";\r\nimport { ArrayUtility } from \"../utility\";\r\n\r\nexport class VE_Objects {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  private _objectIDs: string[] = [];\r\n  private _objectDics: { [key: string]: VeryEngineObject } = {};\r\n\r\n  public get count(): number {\r\n    return this._objectIDs.length;\r\n  }\r\n\r\n  constructor(project_name: string) {\r\n    this._projectName = project_name;\r\n  }\r\n\r\n  public isCreated(object_id: string): boolean {\r\n    if (this._objectDics[object_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public add(object_id: string, very_object: VeryEngineObject): void {\r\n    if (!this.isCreated(object_id)) {\r\n      this._objectIDs.push(object_id);\r\n      this._objectDics[object_id] = very_object;\r\n    }\r\n  }\r\n\r\n  public getObjectID(index: number): string {\r\n    if(index >= 0 && index < this._objectIDs.length) {\r\n      return this._objectIDs[index];\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n\r\n  public getVeryObject(object_id: string): VeryEngineObject {\r\n    return this._objectDics[object_id];\r\n  }\r\n\r\n  public unloadObject(object_id: string): void {\r\n    // this._objectIDs.re\r\n    ArrayUtility.remove(this._objectIDs, object_id);\r\n    delete this._objectDics.object_id;\r\n\r\n  }\r\n\r\n  public clear(): void {\r\n    for(let i: number = 0; i < this._objectIDs.length; i++) {\r\n      let tempObject = this._objectDics[this._objectIDs[i]];\r\n      if(tempObject) {\r\n        tempObject.clear();\r\n      }\r\n    }\r\n    this._objectIDs = [];\r\n    this._objectDics = {};\r\n  }\r\n}","import { IVeryVar } from \"../variables\";\r\nimport { IExpression } from \"../expression\";\r\nimport { VE_ActionBehaviour } from \"../action\";\r\nimport { VE_TriggerBehaviour } from \"../trigger\";\r\nimport { VE_Fsm } from \"../state\";\r\nimport { VE_Template } from \"../template\";\r\nimport { VE_DataSource, VE_VariableData } from \"../dataSource\";\r\nimport { GameObject } from \"../babylon\";\r\n\r\nexport class VeryEngineObject {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = '';\r\n\r\n  public gameObject: GameObject = new GameObject('');\r\n\r\n  private _variables: { [key: string]: IVeryVar } = {};\r\n  private _expressions: { [key: string]: IExpression } = {};\r\n  private _actions: { [key: string]: VE_ActionBehaviour } = {};\r\n  private _triggers: { [key: string]: VE_TriggerBehaviour } = {};\r\n  private _fsms: { [key: string]: VE_Fsm } = {};\r\n  private _templates: { [key: string]: VE_Template } = {};\r\n\r\n  public dataSource: VE_DataSource;\r\n\r\n  public varData: VE_VariableData;\r\n\r\n\r\n\r\n  constructor(project_name: string, object_id: string, game_object: GameObject) {\r\n    this._projectName = projectName;\r\n    this._objectID = object_id;\r\n    this.gameObject = game_object;\r\n    this.dataSource = new VE_DataSource(project_name, object_id, false);\r\n    this.varData = new VE_VariableData(project_name);\r\n  }\r\n\r\n  public isCreatedFsm(fsm_id: string): boolean {\r\n    if (this._fsms[fsm_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addFsm(fsm_id: string, fsm: VE_Fsm): void {\r\n    this._fsms[fsm_id] = fsm;\r\n  }\r\n\r\n  public getFsm(fsm_id: string): VE_Fsm {\r\n    return this._fsms[fsm_id];\r\n  }\r\n\r\n  public isCreatedTrigger(trigger_id: string): boolean {\r\n    if (this._triggers[trigger_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTrigger(trigger_id: string, trigger: VE_TriggerBehaviour): void {\r\n    this._triggers[trigger_id] = trigger;\r\n  }\r\n\r\n  public getTrigger(trigger_id: string): VE_TriggerBehaviour {\r\n    return this._triggers[trigger_id];\r\n  }\r\n\r\n  public isCreatedAction(action_id: string): boolean {\r\n    if (this._actions[action_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addAction(action_id: string, action: VE_ActionBehaviour): void {\r\n    this._actions[action_id] = action;\r\n  }\r\n\r\n  public getAction(action_id: string): VE_ActionBehaviour {\r\n    return this._actions[action_id];\r\n  }\r\n\r\n  public isCreatedVariable(var_id: string): boolean {\r\n    if (this._variables[var_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addVariable(var_id: string, variable: IVeryVar): void {\r\n    this._variables[var_id] = variable;\r\n  }\r\n\r\n  public getVariable(var_id: string): IVeryVar {\r\n    return this._variables[var_id];\r\n  }\r\n\r\n  public isCreatedExpression(exp_id: string): boolean {\r\n    if (this._expressions[exp_id]) {\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public addExpression(exp_id: string, expression: IExpression): void {\r\n    this._expressions[exp_id] = expression;\r\n  }\r\n\r\n  public getExpression(exp_id: string): IExpression {\r\n    return this._expressions[exp_id];\r\n  }\r\n\r\n  public isCreatedTemplate(template_id: string): boolean {\r\n    if (this._templates[template_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTemplate(template_id: string, template: VE_Template): void {\r\n    this._templates[template_id] = template;\r\n  }\r\n\r\n  public getTemplate(template_id: string): VE_Template {\r\n    return this._templates[template_id];\r\n  }\r\n\r\n  public isCreatedVar(var_id: string): boolean {\r\n    if (this._variables[var_id] || this._expressions[var_id] || this._templates[var_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // getState(fsm_id: string, index: number): VE_State {\r\n\r\n  // }\r\n\r\n  unload(): void { }\r\n\r\n  // setUnloadCallback(callback): void {}\r\n\r\n\r\n\r\n\r\n  public clear(): void {\r\n\r\n    if (this.dataSource) {\r\n      this.dataSource.clear();\r\n    }\r\n    if (this.varData) {\r\n      this.varData.clear();\r\n    }\r\n    this._variables = {};\r\n    this._expressions = {};\r\n\r\n    if (this._templates) {\r\n      Object.keys(this._templates).forEach(key => {\r\n        this._templates[key].clear();\r\n      })\r\n      this._templates = {};\r\n    }\r\n\r\n    this._fsms = {};\r\n\r\n    if (this._actions) {\r\n      Object.keys(this._actions).forEach(key => {\r\n        this._actions[key].destroy();\r\n      })\r\n      this._actions = {};\r\n    }\r\n\r\n    if (this._triggers) {\r\n      Object.keys(this._triggers).forEach(key => {\r\n        this._triggers[key].destroy();\r\n      })\r\n      this._triggers = {};\r\n    }\r\n  }\r\n\r\n\r\n}","export * from './verySceneVariables';","import { VE_Variables } from \"../variables\";\r\n\r\nexport class VerySceneVariables {\r\n\r\n  public static get Variables(): VE_Variables {\r\n    if(VerySceneVariables._variables === null) {\r\n      VerySceneVariables._variables = new VE_Variables('__scene_varibale__');\r\n    }\r\n    return VerySceneVariables._variables;\r\n  }\r\n  private static _variables: Nullable<VE_Variables> = null;\r\n\r\n  public static get HasLoaded(): boolean {\r\n    return this._hasLoaded;\r\n  }\r\n  private static _hasLoaded: boolean = false;\r\n\r\n  public static initIfNeeded(): void {\r\n    if(!this._hasLoaded) {\r\n      console.log('TODO: ');\r\n    }\r\n  }\r\n}","import { VE_State } from \"./state\";\r\nimport { AssociatedFsmType } from \"../enum\";\r\nimport { VE_Template } from \"../template\";\r\n\r\nexport class VE_AssociatedState {\r\n\r\n  private _types: AssociatedFsmType[] = [];\r\n  private _indexs: number[] = [];\r\n\r\n  private _numberIndex: { [key: number]: number } = {};\r\n  private _states: { [key: number]: VE_State } = {};\r\n  private _templates: { [key: number]: VE_Template } = {};\r\n  private _templateIDs: { [key: number]: string } = {};\r\n\r\n  public get FromState(): VE_State {\r\n    return this._fromState;\r\n  }\r\n  private _fromState: VE_State;\r\n\r\n  constructor(from_state: VE_State) {\r\n    this._fromState = from_state;\r\n  }\r\n  \r\n  public add(state: VE_State, index: number): void {\r\n    this._types.push(AssociatedFsmType.Object);\r\n    let key: number = this._types.length;\r\n    this._indexs.push(key);\r\n    this._numberIndex[key] = index;\r\n    this._states[key] = state;\r\n  }\r\n\r\n  public addTemplate(template: VE_Template, fsm_id: string, index: number): void {\r\n    this._types.push(AssociatedFsmType.Object);\r\n    let key: number = this._types.length;\r\n    this._indexs.push(key);\r\n    this._numberIndex[key] = index;\r\n    this._templates[key] = template;\r\n    this._templateIDs[key] = fsm_id;\r\n  }\r\n\r\n  public connect(): void {\r\n\r\n  }\r\n\r\n\r\n}","import { Dictionary } from \"../utility/dictionary\";\r\nimport { VE_State } from \"./state\";\r\nimport { Time } from \"../babylon\";\r\nimport { StateConst } from \"./stateConst\";\r\nimport { IVeryVar, VeryString } from \"../variables\";\r\nimport { VeryEngineObject } from \"../object\";\r\n\r\nexport class VE_Fsm {\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = \"\";\r\n\r\n  public get ID(): string {\r\n    return this._id;\r\n  }\r\n  private _id: string = \"\";\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = \"\";\r\n\r\n  public get fsmID(): string {\r\n    return this._fsmID;\r\n  }\r\n  private _fsmID: string = \"\";\r\n\r\n  public get fsmVar(): IVeryVar {\r\n    return this._fsmVar;\r\n  }\r\n  private _fsmVar: IVeryVar;\r\n\r\n  public get VeryObject(): VeryEngineObject {\r\n    return this._veryObject;\r\n  }\r\n  private _veryObject: VeryEngineObject;\r\n\r\n  private _stateDics: Dictionary<number, VE_State> = new Dictionary<\r\n    number,\r\n    VE_State\r\n  >();\r\n  private _states: VE_State[] = [];\r\n\r\n  public get count(): number {\r\n    return this._states.length;\r\n  }\r\n\r\n  private _frameCount: number = -1;\r\n  private _triggerIDs: string[] = [];\r\n\r\n  constructor(\r\n    project_name: string,\r\n    object_id: string,\r\n    fsm_id: string,\r\n    fsm_variable: IVeryVar,\r\n    very_object: VeryEngineObject\r\n  ) {\r\n    this._projectName = project_name;\r\n    this._objectID = object_id;\r\n    this._fsmID = fsm_id;\r\n    this._fsmVar = fsm_variable;\r\n    this._veryObject = very_object;\r\n  }\r\n\r\n  public isCreatedState(state_index: number): boolean {\r\n    return this._stateDics.ContainsKey(state_index);\r\n  }\r\n\r\n  public addState(state: VE_State, state_index: number): void {\r\n    if (!this._stateDics.ContainsKey(state_index)) {\r\n      this._stateDics.Add(state_index, state);\r\n      this._states.push(state);\r\n    }\r\n  }\r\n\r\n  public getState(state_index: number): Nullable<VE_State> {\r\n    return this._stateDics.GetValue(state_index);\r\n  }\r\n\r\n  public removeState(state_index: number): boolean {\r\n    if (this.isCreatedState(state_index)) {\r\n      this._stateDics.Remove(state_index);\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public receiveEvent(trigger_id: string): boolean {\r\n    if (Time.frameCount != this._frameCount) {\r\n      this._frameCount = Time.frameCount;\r\n      this._triggerIDs = [];\r\n      this._triggerIDs.push(trigger_id);\r\n      return true;\r\n    } else {\r\n      if (trigger_id.startsWith(StateConst.ASSOCIATED_STATE_PREFIX)) {\r\n        // console.log(`ID: ${trigger_id} Return True`);\r\n        return true;\r\n      } else {\r\n        if (this._triggerIDs.indexOf(trigger_id) !== -1) {\r\n          return false;\r\n        } else {\r\n          this._triggerIDs.push(trigger_id);\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public setValue(value: any): void {\r\n    this._fsmVar.setValue(value);\r\n  }\r\n}\r\n","export * from './state';\r\nexport * from './fsm';\r\nexport * from './stateAction';\r\nexport * from './associatedState';\r\nexport * from './stateConst';","import { VE_Fsm } from \"./fsm\";\r\nimport { VE_StateAction } from \"./stateAction\";\r\nimport { VE_AssociatedState } from \"./associatedState\";\r\nimport {\r\n  AssignmentType,\r\n  StateActionType,\r\n  ActionType,\r\n  SequenceActionState\r\n} from \"../enum\";\r\nimport { VE_Template } from \"../template\";\r\nimport { IVeryVar, VeryExpression } from \"../variables\";\r\nimport { IExpression } from \"../expression\";\r\nimport { VE_SequenceActions, VE_Assignment } from \"../action\";\r\n\r\nexport class VE_State {\r\n  public get Fsm(): VE_Fsm {\r\n    return this._fsm;\r\n  }\r\n  private _fsm: VE_Fsm;\r\n\r\n  public get isInitialValue(): boolean {\r\n    return this._isInitialValue;\r\n  }\r\n  private _isInitialValue: boolean = false;\r\n\r\n  public get Value(): any {\r\n    return this._value;\r\n  }\r\n  private _value: any = \"\";\r\n\r\n  private _assignmentType: AssignmentType = AssignmentType.Const;\r\n\r\n  public get isTemplateVar(): boolean {\r\n    return this._isTemplateVar;\r\n  }\r\n  private _isTemplateVar: boolean = false;\r\n\r\n  private _template: Nullable<VE_Template> = null;\r\n  private _varID: string = \"\";\r\n  private _templateVar: Nullable<IVeryVar> = null;\r\n  private _assignmentStr: string = \"\";\r\n\r\n  public get logicalExpression(): Nullable<IExpression> {\r\n    return this._logicalExpression;\r\n  }\r\n  private _logicalExpression: Nullable<IExpression> = null;\r\n\r\n  public get index(): number {\r\n    return this._index;\r\n  }\r\n  private _index: number = 0;\r\n\r\n  public get stateVariable(): Nullable<IVeryVar> {\r\n    return this._stateVariable;\r\n  }\r\n  private _stateVariable: Nullable<IVeryVar> = null;\r\n\r\n  public logicalAssociated: Nullable<IExpression> = null;\r\n\r\n  private _stateActions: VE_StateAction[] = [];\r\n  private _assocaitedStates: VE_AssociatedState[] = [];\r\n\r\n  public get IsSequence(): boolean {\r\n    return this._isSequence;\r\n  }\r\n  private _isSequence: boolean = false;\r\n\r\n  public _sequenceActions: Nullable<VE_SequenceActions> = null;\r\n\r\n  // \r\n  // 1.\r\n\r\n  constructor(fsm: VE_Fsm, index: number) {\r\n    this._fsm = fsm;\r\n    this._index = index;\r\n  }\r\n\r\n  public setInitialValue(value: any): void {\r\n    this._value = value;\r\n    this._assignmentType = AssignmentType.Const;\r\n  }\r\n\r\n  public setSequence(): void {\r\n    this._isSequence = true;\r\n  }\r\n\r\n  public setLogicalExpression(logical_exp: IExpression): void {\r\n    this._logicalExpression = logical_exp;\r\n  }\r\n\r\n  public setTemplateInfo(\r\n    template: VE_Template,\r\n    var_id: string,\r\n    assign_str: string\r\n  ): void {\r\n    this._isTemplateVar = true;\r\n    this._template = template;\r\n    this._varID = var_id;\r\n    this._assignmentStr = assign_str;\r\n  }\r\n\r\n  public setConstValue(value: any): void {\r\n    this._value = value;\r\n    this._assignmentType = AssignmentType.Const;\r\n  }\r\n\r\n  public setStateVariable(very_var: IVeryVar): void {\r\n    this._stateVariable = very_var;\r\n    this._assignmentType = AssignmentType.Variable;\r\n  }\r\n\r\n  public addAction(state_action: VE_StateAction): void {\r\n    this._stateActions.push(state_action);\r\n    if (\r\n      state_action.type === StateActionType.Action &&\r\n      state_action.action!.isSequence\r\n    ) {\r\n      this._isSequence = true;\r\n    }\r\n  }\r\n\r\n  public addAssignment(assignment: VE_Assignment): void {\r\n    let stateAction: VE_StateAction = new VE_StateAction();\r\n    stateAction.setAssignment(assignment);\r\n    this._stateActions.push(stateAction);\r\n  }\r\n\r\n  public addAssociatedState(associated_state: VE_AssociatedState): void {\r\n    this._assocaitedStates.push(associated_state);\r\n  }\r\n\r\n  // TODO\r\n  public action(trigger_id: string): void {\r\n    // Parent\r\n    if (this._fsm.receiveEvent(trigger_id)) {\r\n      if (this._isTemplateVar) {\r\n        // TODO:null\r\n        if (this._templateVar === null) {\r\n          this.getTemplateVar();\r\n        } else {\r\n          if (this._templateVar.className === \"VeryExpression\") {\r\n            // TODO\r\n            if ((<VeryExpression>this._templateVar).isNull) {\r\n              this.getTemplateVar();\r\n            } else {\r\n              this.Fsm.setValue(this._templateVar.getValue());\r\n            }\r\n          } else {\r\n            this.Fsm.setValue(this._templateVar.getValue());\r\n          }\r\n        }\r\n      } else {\r\n        // \r\n        if (this._assignmentType == AssignmentType.Const) {\r\n          // \r\n          this.Fsm.setValue(this.Value);\r\n        } else if (this._assignmentType == AssignmentType.Variable) {\r\n          // \r\n          this.Fsm.setValue(this._stateVariable!.getValue());\r\n        } // \r\n        else {\r\n          // \r\n          // this.Fsm.setValue(this._stateExpression.evaluate());\r\n        }\r\n      }\r\n\r\n      // \r\n      for (let i: number = 0; i < this._stateActions.length; i++) {\r\n        //\r\n        if (\r\n          this._stateActions[i].type === StateActionType.Action &&\r\n          this._stateActions[i]!.action!.Type === ActionType.Animation\r\n        ) {\r\n          if (\r\n            this._stateActions[i]!.action!.SequenceState ===\r\n              SequenceActionState.Prepared ||\r\n            this._stateActions[i]!.action!.SequenceState ===\r\n              SequenceActionState.Running\r\n          ) {\r\n            console.log(\r\n              \"\" +\r\n                this._fsm.projectName +\r\n                \"\" +\r\n                this._fsm.objectID +\r\n                \"\" +\r\n                this._fsm.fsmID +\r\n                \"ID\" +\r\n                this._index +\r\n                \"\" +\r\n                this._stateActions[i]!.action!.actionID +\r\n                \"\"\r\n            );\r\n            return;\r\n          } else if (\r\n            this._stateActions[i]!.action!.SequenceState ===\r\n            SequenceActionState.Pause\r\n          ) {\r\n            console.log(\r\n              \"\" +\r\n                this._fsm.projectName +\r\n                \"\" +\r\n                this._fsm.objectID +\r\n                \"\" +\r\n                this._fsm.fsmID +\r\n                \"ID\" +\r\n                this._index +\r\n                \"\" +\r\n                this._stateActions[i]!.action!.actionID +\r\n                \"\"\r\n            );\r\n            return;\r\n          }\r\n        }\r\n      }\r\n\r\n      //, TODO: \r\n      if (this._isSequence) {\r\n        // TODO: \r\n        // this._sequenceActions = this._fsm.VeryObject.gameObject.AddComponent<\r\n        //   VE_SequenceActions\r\n        // >();\r\n        // this._sequenceActions!.sequenceAction(\r\n        //   this._stateActions,\r\n        //   this._associatedStates\r\n        // );\r\n      } else {\r\n        // \r\n        for (let i: number = 0; i < this._stateActions.length; i++) {\r\n          let stateAction: VE_StateAction = this._stateActions[i];\r\n          // \r\n          if (stateAction.type === StateActionType.Action) {\r\n            // TODO: \r\n            stateAction!.action!.action(\r\n              stateAction.enabled,\r\n              stateAction.everyFrame\r\n            );\r\n          }\r\n          // \r\n          else {\r\n            stateAction!.assignment!.assign();\r\n          }\r\n        }\r\n        // \r\n        if (this._assocaitedStates.length > 0) {\r\n          // \r\n          // \r\n          for (let i: number = 0; i < this._assocaitedStates.length; i++) {\r\n            this._assocaitedStates[i].connect();\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private getTemplateVar(): void {\r\n    if (this._template!.templateInstance === null) {\r\n      console.log(\r\n        \"\" +\r\n          this._fsm.projectName +\r\n          \"\" +\r\n          this._fsm.objectID +\r\n          \"\" +\r\n          this._fsm.fsmID +\r\n          \"\" +\r\n          this._assignmentStr +\r\n          \"\"\r\n      );\r\n      this._templateVar = null;\r\n      return;\r\n    } else {\r\n      if (this._template!.templateInstance.isCreatedVariable(this._varID)) {\r\n        this._templateVar = this._template!.templateInstance.getVariable(\r\n          this._varID\r\n        );\r\n      } else if (\r\n        this._template!.templateInstance.isCreatedExpression(this._varID)\r\n      ) {\r\n        this._templateVar = new VeryExpression(\r\n          this._template!.templateInstance.getExpression(this._varID)\r\n        );\r\n      } else if (this._template!.templateInstance.isCreatedFsm(this._varID)) {\r\n        this._templateVar = this._template!.templateInstance.getFsm(\r\n          this._varID\r\n        ).fsmVar;\r\n      } else {\r\n        console.log(\r\n          \"\" +\r\n            this._fsm.projectName +\r\n            \"\" +\r\n            this._fsm.objectID +\r\n            \"\" +\r\n            this._fsm.fsmID +\r\n            \"\" +\r\n            this._assignmentStr +\r\n            \"\" +\r\n            this._varID +\r\n            \"\"\r\n        );\r\n        this._templateVar = null;\r\n        return;\r\n      }\r\n      this._fsm.setValue(this._templateVar.getValue());\r\n    }\r\n  }\r\n}\r\n","\r\nimport { VE_ActionBehaviour } from \"../action/actionBehaviour\";\r\nimport { StateActionType } from \"../enum\";\r\nimport { VE_Assignment } from \"../action\";\r\n\r\nexport class VE_StateAction {\r\n\r\n  public get type(): StateActionType {\r\n    return this._type;\r\n  }\r\n  private _type: StateActionType = StateActionType.Action;\r\n\r\n  public get action(): Nullable<VE_ActionBehaviour> {\r\n    return this._action;\r\n  }\r\n  private _action: Nullable<VE_ActionBehaviour> = null;\r\n\r\n  public get enabled(): boolean {\r\n    return this._enabled;\r\n  }\r\n  private _enabled: boolean = false;\r\n\r\n  public get everyFrame(): boolean {\r\n    return this._everyFrame;\r\n  }\r\n  private _everyFrame: boolean = false;\r\n\r\n  public get assignment(): Nullable<VE_Assignment> {\r\n    return this._assignment;\r\n  }\r\n  private _assignment: Nullable<VE_Assignment> = null;\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public setAction(action: VE_ActionBehaviour, enabled: boolean = false, every_frame: boolean = false, sequence: boolean = false): void {\r\n    this._action = action;\r\n    this._enabled = enabled;\r\n    this._everyFrame = every_frame;\r\n    this._action.isSequence = sequence;\r\n  }\r\n\r\n  public setAssignment(assignment: VE_Assignment): void {\r\n    this._assignment = assignment;\r\n  }\r\n\r\n\r\n}","export class StateConst {\r\n\r\n  public static readonly STATE_SEPARATOR: string = '.';\r\n  public static readonly ASSOCIATED_STATE_PREFIX: string = 'Associated_State:';\r\n  public static readonly VARIABLE_SYMBOL: string = '*';\r\n  public static readonly STATE_INDEX: number = -1;\r\n  public static LogCount: number = -1;\r\n\r\n  public static AssignmentPrefix: string = \"AssignmentFormula_\";\r\n  public static AssignmentFormulaCount: number = 0;\r\n\r\n\r\n}","export * from './template';\r\nexport * from './templates';","import { VeryEngineObject } from \"../object\";\r\nimport { VE_DataSource, VE_VariableData } from \"../dataSource\";\r\n\r\nexport class VE_Template {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  public get templateID(): string {\r\n    return this._templateID;\r\n  }\r\n  private _templateID: string = '';\r\n\r\n  public get templateVarID(): string {\r\n    return this._templateVarID;\r\n  }\r\n  private _templateVarID: string = '';\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = '';\r\n\r\n  public templateInstance: VeryEngineObject | null = null;\r\n\r\n  public dataSource: VE_DataSource;\r\n\r\n  public varData: VE_VariableData;\r\n\r\n  public instanceCount(): number {\r\n    return this._instanceCount;\r\n  }\r\n  private _instanceCount: number = 0;\r\n\r\n\r\n  constructor(project_name: string, template_id: string) {\r\n    this._projectName = project_name;\r\n    this._templateID = template_id;\r\n    this.dataSource = new VE_DataSource(project_name, template_id, true);\r\n    this.varData = new VE_VariableData(project_name);\r\n  }\r\n\r\n  public setInstance(instance_obj: VeryEngineObject): void {\r\n    this.templateInstance = instance_obj;\r\n  }\r\n\r\n  public isCreatedVariable(var_id: string): boolean {\r\n    return this.varData.isCreatedVariable(var_id);\r\n  }\r\n\r\n  public addVariable(var_id: string, var_paras: string[], pos: string): void {\r\n    this.varData.addVariable(var_id, var_paras, pos);\r\n  }\r\n\r\n  public unload(): void {\r\n    //TODO: \r\n  }\r\n\r\n  public clone(object_id: string, template_var_id: string): VE_Template {\r\n    let cloneTemplate: VE_Template = new VE_Template(this._projectName, this._templateID);\r\n    cloneTemplate._objectID = object_id;\r\n    cloneTemplate._templateVarID = template_var_id;\r\n    cloneTemplate.dataSource = this.dataSource;\r\n    cloneTemplate.varData = this.varData;\r\n    cloneTemplate._instanceCount = this._instanceCount;\r\n    return cloneTemplate;\r\n  }\r\n\r\n  public clear(): void {\r\n    if (this.dataSource) {\r\n      this.dataSource.clear();\r\n    }\r\n    if (this.varData) {\r\n      this.varData.clear();\r\n    }\r\n    if (this.templateInstance) {\r\n      this.templateInstance.clear();\r\n    }\r\n  }\r\n\r\n}","import { VE_Template } from \"./template\";\r\nimport { ErrorInfo } from \"../utility\";\r\n\r\nexport class VE_Templates {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  private _templateDic: { [key: string]: VE_Template } = {};\r\n\r\n  private _instanceDic: { [key: string]: { [key: string]: VE_Template } } = {};\r\n\r\n\r\n  constructor(project_name: string) {\r\n    this._projectName = project_name;\r\n  }\r\n\r\n  public isCreatedTemplate(template_id: string): boolean {\r\n    if(this._templateDic[template_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTemplate(template_id: string, template: VE_Template): void {\r\n    this._templateDic[template_id] = template;\r\n  }\r\n\r\n  public getTemplate(template_id: string): VE_Template {\r\n    return this._templateDic[template_id];\r\n  }\r\n\r\n  public isCreatedInstance(object_id: string, var_id: string): boolean {\r\n    if(this._instanceDic[object_id] && this._instanceDic[object_id][var_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getInstance(object_id: string, var_id: string): VE_Template {\r\n    return this._instanceDic[object_id][var_id];\r\n  }\r\n\r\n  // public getState(var_id: string, state_id: string, index: number): VE_State {\r\n    \r\n  // } \r\n\r\n  public clear(): void {\r\n    if(this._templateDic) {\r\n      Object.keys(this._templateDic).forEach(key => {\r\n        this._templateDic[key].clear();\r\n      })\r\n      this._templateDic = {};\r\n    }\r\n  }\r\n\r\n  // TODO\r\n  public createInstance (object_id: string, var_id: string, template: VE_Template, object_name: string, error_info: ErrorInfo, destory_on_create_new: boolean): VE_Template\r\n  {\r\n\r\n    return new VE_Template(this._projectName, var_id);\r\n  }\r\n\r\n}","export * from './triggerBehaviour';\r\nexport * from './triggers';","import { VE_State } from \"../state/state\";\r\nimport { StateConst } from \"../state/stateConst\";\r\nimport { IExpression } from \"../expression\";\r\n\r\nexport abstract class VE_TriggerBehaviour {\r\n\r\n  public abstract get ID(): string;\r\n\r\n  protected scene!: BABYLON.Scene;\r\n\r\n  public get enabled(): boolean {\r\n    return this._enabled;\r\n  }\r\n  public set enabled(val: boolean) {\r\n    this._enabled = val;\r\n  }\r\n  private _enabled: boolean = true;\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  public get isEnabled(): boolean {\r\n    if (this._logicalSwitch) {\r\n      for (let i: number = 0; i < this._logicalSwitch.length; i++) {\r\n        if (!this._logicalSwitch[i].evaluate()) {\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // Logical\r\n  private _logicalSwitch: IExpression[] = [];\r\n  private _logicalExp: IExpression[] = [];\r\n  // State\r\n  private _triggerTargets: VE_State[] = [];\r\n\r\n  // protected GameObject ObjectInstance = null;\r\n  // protected VeryEngineObject VeryObject = null;\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = 'object-axxx';\r\n\r\n  public get triggerID(): string {\r\n    return this._triggerID;\r\n  }\r\n  private _triggerID: string = '';\r\n\r\n  private _id: string = '';\r\n\r\n  public call(): void {\r\n    console.log(this._objectID);\r\n  }\r\n\r\n\r\n  public set(scene: BABYLON.Scene): void {\r\n    this.scene = scene;\r\n  }\r\n\r\n  public setTriggerID(trigger_id: string, object_id: string): void {\r\n    this._triggerID = trigger_id;\r\n    this._objectID = object_id;\r\n    this._id = object_id + StateConst.STATE_SEPARATOR + trigger_id;\r\n  }\r\n\r\n  public addLogicalSwitch(exp: IExpression): void {\r\n    this._logicalSwitch.push(exp);\r\n  }\r\n\r\n  public addTriggerTarget(exp: IExpression, state: VE_State): void {\r\n    this._logicalExp.push(exp);\r\n    this._triggerTargets.push(state);\r\n  }\r\n\r\n  public sendEvent(): void {\r\n    if(this.isEnabled) {\r\n      this.eventProcess();\r\n    }\r\n  }\r\n\r\n  // \r\n  private eventProcess(): void {\r\n    if (this._triggerTargets) {\r\n      for (let i: number = 0; i < this._triggerTargets.length; i++) {\r\n        if (this._logicalExp[i].evaluate()) {\r\n          this._triggerTargets[i].action(this._id);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    return true;\r\n  }\r\n\r\n  public update(): void {\r\n    if(this.isEnabled) {\r\n      this.onUpdate();\r\n    }\r\n  }\r\n\r\n  public onUpdate(): void {\r\n\r\n  }\r\n\r\n  public abstract destroy(): void;\r\n\r\n\r\n}","import { VE_TriggerBehaviour } from \"./triggerBehaviour\";\r\nimport { ShowError } from \"../html\";\r\nimport { VeryEngineObject, VE_Objects } from \"../object\";\r\nimport { StateConst } from \"../state\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { GameGlobal } from \"../global\";\r\n\r\nexport class VE_Triggers {\r\n\r\n  private static _triggerDics: { [key: string]: VE_TriggerBehaviour } = {};\r\n\r\n  public static addTrigger(trigger: VE_TriggerBehaviour): void {\r\n    // \r\n    if (!GameGlobal.PlatformLoaded) {\r\n      let ids: string[] = trigger.ID.split('|');\r\n      for (let i: number = 0; i < ids.length; i++) {\r\n        let id: string = ids[i].trim().toLowerCase();\r\n        if (this._triggerDics[id]) {\r\n          ShowError.showError(`IDID${id}ID`);\r\n        } else {\r\n          this._triggerDics[id] = trigger;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public static hasTrigger(trigger_id: string): boolean {\r\n    trigger_id = trigger_id.toLowerCase();\r\n    if (this._triggerDics[trigger_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static createTrigger(trigger_id: string): VE_TriggerBehaviour {\r\n    trigger_id = trigger_id.toLowerCase();\r\n    // console.log(this._triggerDics[trigger_id]);\r\n    return Object.create(this._triggerDics[trigger_id]);\r\n  }\r\n\r\n  public static remove(trigger_id: string): void {\r\n    trigger_id = trigger_id.toLowerCase();\r\n    delete this._triggerDics[trigger_id];\r\n  }\r\n\r\n  public static findTrigger(very_object: VeryEngineObject, trigger_id: string): Nullable<VE_TriggerBehaviour> {\r\n    if (very_object.isCreatedTrigger(trigger_id)) {\r\n      return very_object.getTrigger(trigger_id);\r\n    } else {\r\n      let triggerArray: string[] = trigger_id.split(StateConst.STATE_SEPARATOR);\r\n      if (triggerArray.length === 2) {\r\n        let objects: VE_Objects = VE_Manager.objects(very_object.projectName);\r\n        let objectID: string = triggerArray[0].trim();\r\n        let triggerID: string = triggerArray[1].trim();\r\n        if (objects.isCreated(objectID)) {\r\n          let otherObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n          if (otherObject.isCreatedTrigger(triggerID)) {\r\n            return otherObject.getTrigger(triggerID);\r\n          } else {\r\n            return null;\r\n          }\r\n        } else {\r\n          return null;\r\n        }\r\n      } else {\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n  public static dispose(): void {\r\n    VE_Triggers._triggerDics = {};\r\n  }\r\n\r\n}","export class ArrayUtility {\r\n  public static remove<T>(arr: Array<T>, ele: T): void {\r\n    let index = arr.indexOf(ele);\r\n    if (index > -1) {\r\n      arr.splice(index, 1);\r\n    }\r\n  }\r\n\r\n  public static clear<T>(arr: Array<T>): void {\r\n    arr = [];\r\n  }\r\n\r\n}\r\n\r\n","/** */\r\nexport class Dictionary<KT, VT> {\r\n  private _keys: KT[] = [];\r\n  private _values: VT[] = [];\r\n  public get count(): number {\r\n    return this.Count();\r\n  }\r\n\r\n  public constructor() {\r\n  }\r\n\r\n  /**, */\r\n  public Add(key: any, value: any): number {\r\n    this._keys.push(key);\r\n    return this._values.push(value);\r\n  }\r\n\r\n  public Remove(key: any) {\r\n    var index = this._keys.indexOf(key, 0);\r\n    this._keys.splice(index, 1);\r\n    this._values.splice(index, 1);\r\n  }\r\n\r\n  private Count(): number {\r\n    return this._keys.length;\r\n  }\r\n\r\n  /**SetValue() */\r\n  public SetValue(key: any, value: any): boolean {\r\n    var index = this._keys.indexOf(key, 0);\r\n    if (index != -1) {\r\n      this._keys[index] = key;\r\n      this._values[index] = value;\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n  public GetValue(key: KT): VT | null {\r\n    var index = this._keys.indexOf(key, 0);\r\n    if (index != -1) {\r\n      return this._values[index];\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public ContainsKey(key: any): boolean {\r\n    let ks = this._keys;\r\n    for (let i = 0; i < ks.length; ++i) {\r\n      if (ks[i] == key) {\r\n        return true;;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public GetKeys(): KT[] {\r\n    return this._keys;\r\n  }\r\n\r\n  public GetValues(): VT[] {\r\n    return this._values;\r\n  }\r\n}","export class ErrorInfo {\r\n\r\n  public isRight: boolean = true;\r\n  public message: string = '';\r\n\r\n  constructor() {\r\n    \r\n  }\r\n\r\n  public clear(): void {\r\n    this.isRight = true;\r\n    this.message = '';\r\n  }\r\n\r\n}","export * from './arrayUtility';\r\nexport * from './dictionary';\r\nexport * from './errorInfo';\r\nexport * from './stringFormat';\r\nexport * from './paraParserUtility';","import { ParaType, Severity } from \"../enum\";\r\nimport { VE_ErrorManager, VE_Error } from \"../global\";\r\nimport { VeryGameObject, VeryVarManager, VarTools, IVeryVar, VeryString, VeryExpression, VeryNumber, VeryBool } from \"../variables\";\r\nimport { ErrorInfo } from \"./errorInfo\";\r\nimport { VE_Template } from \"../template\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { GameObject } from \"../babylon\";\r\nimport { VeryEngineObject } from \"../object\";\r\nimport { VE_TypeConvert } from \"./typeConvert\";\r\n\r\nexport class ParaParserUtility {\r\n\r\n  /**\r\n   * \r\n   * @param id \r\n   * @param para_type \r\n   * @param current_number \r\n   * @param required_number \r\n   */\r\n  public static ParaNumbers(id: string, para_type: ParaType, current_number: number, ...required_number: number[]): boolean {\r\n    for (let i: number = 0; i < required_number.length; i++) {\r\n      if (required_number[i] === current_number) {\r\n        return true;\r\n      }\r\n    }\r\n    let requiredStr: string = \"\";\r\n    for (let i: number = 0; i < required_number.length; i++) {\r\n      if (i === 0) {\r\n        requiredStr += (required_number[i] + 1).toString() + \"\";\r\n      }\r\n      else {\r\n        requiredStr += \"\" + (required_number[i] + 1).toString() + \"\";\r\n      }\r\n    }\r\n    if (para_type === ParaType.Action) {\r\n\r\n      VE_ErrorManager.Add(new VE_Error('', id + \"  \" + requiredStr + \"\" + (current_number + 1) + \"\", '', Severity.Error));\r\n    }\r\n    else {\r\n      VE_ErrorManager.Add(new VE_Error('', id + \"  \" + requiredStr + \"\" + (current_number + 1) + \"\", '', Severity.Error));\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * VeryGameObject\r\n   * @param project_name \r\n   * @param object_id \r\n   * @param id ID\r\n   * @param para_type \r\n   * @param very_var \r\n   * @param var_str \r\n   * @param log \r\n   * \r\n   */\r\n  public static GameObjectPara(project_name: string, object_id: string, id: string, para_type: ParaType, very_var: VeryGameObject, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVar(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        // Template\r\n        errorInfo.clear();\r\n        let template: Nullable<VE_Template> = VarTools.GetTemplate(project_name, object_id, var_str, errorInfo);\r\n        if (template === null) {\r\n          if (log) {\r\n            VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}`, '', Severity.Error));\r\n          }\r\n          return false;\r\n        }\r\n        else {\r\n          if (template.templateInstance === null) {\r\n            if (log) {\r\n              VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}GameObject`, '', Severity.Error));\r\n            }\r\n            return false;\r\n          }\r\n          else {\r\n            if (!very_var) {\r\n              very_var = new VeryGameObject();\r\n            }\r\n            very_var.value = template.templateInstance.gameObject;\r\n            return true;\r\n          }\r\n        }\r\n      }\r\n      else if (veryVar.className === 'VeryGameObject') {\r\n        very_var = <VeryGameObject>veryVar;\r\n        return true;\r\n      }\r\n      else if (veryVar.className === 'VeryString') {\r\n        let vString: VeryString = <VeryString>veryVar;\r\n        very_var.value = GameObject.Find(vString.value);\r\n        if (very_var.value === null) {\r\n          if (log) {\r\n            VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${vString.value}`, '', Severity.Error));\r\n          }\r\n          return false;\r\n        }\r\n        return true;\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}GameObject`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      if (very_var === null) {\r\n        very_var = new VeryGameObject();\r\n      }\r\n      if (var_str.toLowerCase().trim() === \"this\") {\r\n        let veryObject: VeryEngineObject = VE_Manager.objects(project_name).getVeryObject(object_id);\r\n        if (veryObject === null) {\r\n          if (log) {\r\n            VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''}  ${object_id}`, '', Severity.Error));\r\n          }\r\n          return false;\r\n        }\r\n        else {\r\n          very_var.value = veryObject.gameObject;\r\n        }\r\n      }\r\n      else if (var_str.toLowerCase().trim() === \"null\" || var_str.toLowerCase().trim() === \"none\" || var_str.toLowerCase().trim() === \"\") {\r\n        very_var.value = null;\r\n      }\r\n      else if (var_str.startsWith(\"/\")) {\r\n        let veryObject: VeryEngineObject = VE_Manager.objects(project_name).getVeryObject(object_id);\r\n        if (!veryObject) {\r\n          if (log) {\r\n            VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''}  ${object_id}`, '', Severity.Error));\r\n          }\r\n          return false;\r\n        }\r\n        else {\r\n          let parentObj: GameObject = veryObject.gameObject;\r\n          let childName: string = var_str.substring(1).trim();\r\n          // TODO: \r\n          // very_var.value = GameObject.FindChild(parentObj, childName);\r\n          if (very_var.value === null) {\r\n            if (log) {\r\n              VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${object_id}${var_str}`, '', Severity.Error));\r\n            }\r\n            return false;\r\n          }\r\n          return true;\r\n        }\r\n      }\r\n      else {\r\n        very_var.value = GameObject.Find(var_str);\r\n        if (very_var.value === null) {\r\n          if (log) {\r\n            VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''}  ${object_id}`, '', Severity.Error));\r\n          }\r\n          return false;\r\n        }\r\n      }\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public static GameObjectParaOnlyVar(project_name: string, object_id: string, id: string, para_type: ParaType, very_var: VeryGameObject, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVar(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}GameObject`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryGameObject') {\r\n        very_var = <VeryGameObject>veryVar;\r\n        return true;\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}GameObject`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      if (log) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}GameObject`, '', Severity.Error));\r\n      }\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static StringPara(project_name: string, object_id: string, id: string, para_type: ParaType, very_var: VeryString, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      return ParaParserUtility.StringParaOnlyVar(project_name, object_id, id, para_type, very_var, var_str, log);\r\n    }\r\n    else {\r\n      if (very_var === null) {\r\n        very_var = new VeryString();\r\n      }\r\n      very_var.value = var_str;\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public static StringParaWithExpression(project_name: string, object_id: string, id: string, para_type: ParaType, very_var: VeryString, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVarWithExpression(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}${errorInfo.message}`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryString') {\r\n        very_var = <VeryString>veryVar;\r\n        return true;\r\n      }\r\n      else if (veryVar.className === 'VeryExpression') {\r\n        if (veryVar.varType === 'string') {\r\n          very_var = new VeryString();\r\n          very_var.setExpression(<VeryExpression>veryVar);\r\n          return true;\r\n        }\r\n        else {\r\n          if (log) {\r\n            VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}String`, '', Severity.Error));\r\n          }\r\n          return false;\r\n        }\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}String`, '', Severity.Error));\r\n        }\r\n      }\r\n      return false;\r\n    }\r\n    else {\r\n      if (very_var === null) {\r\n        very_var = new VeryString();\r\n      }\r\n      very_var.value = var_str;\r\n      return true;\r\n    }\r\n  }\r\n\r\n\r\n  public static StringParaOnlyVar(project_name: string, object_id: string, id: string, para_type: ParaType, very_var: VeryString, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVar(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}${errorInfo.message}`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryString') {\r\n        very_var = <VeryString>veryVar;\r\n        return true;\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}String`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      if (log) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}String`, '', Severity.Error));\r\n      }\r\n      return false;\r\n    }\r\n  }\r\n\r\n\r\n  public static NumberPara(project_name: string, object_id: string, id: string, para_type: ParaType, very_var: VeryNumber, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      return ParaParserUtility.NumberParaOnlyVar(project_name, object_id, id, para_type, very_var, var_str, log);\r\n    }\r\n    else {\r\n      if (very_var === null) {\r\n        very_var = new VeryNumber();\r\n      }\r\n      very_var.value = parseFloat(var_str);\r\n      if (isNaN(very_var.value)) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}number`, '', Severity.Error));\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  public static NumberParaWithExpression(project_name: string, object_id: string, id: string, para_type: ParaType, very_var: VeryNumber, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVarWithExpression(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}${errorInfo.message}`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryNumber') {\r\n        very_var = <VeryNumber>veryVar;\r\n        return true;\r\n      }\r\n      else if (veryVar.className === 'VeryExpression') {\r\n        if (veryVar.varType === 'number') {\r\n          very_var = new VeryNumber();\r\n          very_var.setExpression(<VeryExpression>veryVar);\r\n          return true;\r\n        }\r\n        else {\r\n          if (log) {\r\n            VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}number`, '', Severity.Error));\r\n          }\r\n          return false;\r\n        }\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}number`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      if (very_var === null) {\r\n        very_var = new VeryNumber();\r\n      }\r\n      very_var.value = parseFloat(var_str);\r\n      if (isNaN(very_var.value)) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}number`, '', Severity.Error));\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public static NumberParaOnlyVar(project_name: string, object_id: string, id: string, para_type: ParaType, very_var: VeryNumber, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVar(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}${errorInfo.message}`, '', Severity.Error));\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryNumber') {\r\n        very_var = <VeryNumber>veryVar;\r\n        return true;\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}number`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      if (log) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}number`, '', Severity.Error));\r\n      }\r\n      return false;\r\n    }\r\n  }\r\n\r\n\r\n  public static BoolPara(project_name: string, object_id: string, id: string, para_type: ParaType, very_var: VeryBool, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      return ParaParserUtility.BoolParaOnlyVar(project_name, object_id, id, para_type, very_var, var_str, log);\r\n    }\r\n    else {\r\n      if (very_var === null) {\r\n        very_var = new VeryBool();\r\n      }\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      very_var.value = VE_TypeConvert.boolConvert(var_str, errorInfo);\r\n      if (errorInfo.isRight === false) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}bool`, '', Severity.Error));\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n  }\r\n\r\n\r\n  public static BoolParaWithExpression(project_name: string, object_id: string, id: string, para_type: ParaType, very_var: VeryBool, var_str: string, log: boolean = true) {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVar(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}${errorInfo.message}`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryBool') {\r\n        very_var = <VeryBool>veryVar;\r\n        return true;\r\n      }\r\n      else if (veryVar.className === 'VeryExpression') {\r\n        if (veryVar.varType == 'bool') {\r\n          very_var = new VeryBool();\r\n          very_var.setExpression(<VeryExpression>veryVar);\r\n          return true;\r\n        }\r\n        else {\r\n          if (log) {\r\n            VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}bool`, '', Severity.Error));\r\n          }\r\n          return false;\r\n        }\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}bool`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      if (very_var === null) {\r\n        very_var = new VeryBool();\r\n      }\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      very_var.value = VE_TypeConvert.boolConvert(var_str, errorInfo);\r\n      if (errorInfo.isRight === false) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}bool`, '', Severity.Error));\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public static BoolParaOnlyVar(project_name: string, object_id: string, id: string, para_type: ParaType, very_var: VeryBool, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVar(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}${errorInfo.message}`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryBool') {\r\n        very_var = <VeryBool>veryVar;\r\n        return true;\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}bool`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      if (log) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}bool`, '', Severity.Error));\r\n      }\r\n      return false;\r\n    }\r\n  }\r\n\r\n\r\n\r\n}","export class VE_StringFormat {\r\n\r\n  private static _illegalChar: { [key: string]: boolean } = {};\r\n  private static _formulaChar: { [key: string]: boolean } = {};\r\n  private static _escapeCharacters: { [key: string]: string } = {};\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public static init() {\r\n    this._escapeCharacters['n'] = '\\n';\r\n    this._escapeCharacters['b'] = '\\b';\r\n    this._escapeCharacters['r'] = '\\r';\r\n    this._escapeCharacters['t'] = '\\t';\r\n    this._escapeCharacters['v'] = '\\v';\r\n    this._escapeCharacters['f'] = '\\f';\r\n    this._escapeCharacters['0'] = '\\0';\r\n\r\n    this._illegalChar['='] = true;\r\n    this._illegalChar[','] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar[':'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['*'] = true;\r\n    this._illegalChar['('] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar[')'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['@'] = true;\r\n    this._illegalChar['#'] = true;\r\n    this._illegalChar['$'] = true;\r\n    this._illegalChar['%'] = true;\r\n    this._illegalChar['&'] = true;\r\n    this._illegalChar['^'] = true;\r\n    this._illegalChar['-'] = true;\r\n    this._illegalChar['+'] = true;\r\n    this._illegalChar['|'] = true;\r\n    this._illegalChar['/'] = true;\r\n    this._illegalChar['['] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar[']'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['{'] = true;\r\n    this._illegalChar['}'] = true;\r\n    this._illegalChar['.'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['<'] = true;\r\n    this._illegalChar['>'] = true;\r\n    this._illegalChar[';'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['?'] = true;\r\n    this._illegalChar['\\\"'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['\\''] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['!'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['`'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['~'] = true;\r\n\r\n    this._formulaChar['('] = true; this._formulaChar[')'] = true; this._formulaChar[''] = true; this._formulaChar[''] = true;\r\n    this._formulaChar['!'] = true; this._formulaChar[''] = true;\r\n    this._formulaChar['^'] = true; this._formulaChar['%'] = true; this._formulaChar['&'] = true; this._formulaChar['-'] = true; this._formulaChar['+'] = true; this._formulaChar['='] = true;\r\n    this._formulaChar['<'] = true; this._formulaChar['>'] = true; this._formulaChar['|'] = true;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param para_str \r\n   */\r\n  public static strEscapeCharacterAction(para_str: string): string {\r\n    let tmpStr: string = \"\";\r\n    for (let i: number = 0; i < para_str.length; i++) {\r\n      if (para_str[i] == '\\\\' && i != para_str.length - 1) {\r\n        tmpStr += this.getEscapeCharacter(para_str[i + 1]);\r\n        i++;\r\n      }\r\n      else {\r\n        tmpStr += para_str[i];\r\n      }\r\n    }\r\n    return tmpStr;\r\n  }\r\n\r\n  /**\r\n   *  \r\n   * @param para_str \r\n   */\r\n  public static strSubsectionAction(para_str: string): string[] {\r\n    let strBuilder: string = '';\r\n    let rStr: string[] = [];\r\n    let bracketFlag: boolean = false;\r\n    let hasQuote: boolean = false;\r\n    for (let i: number = 0; i < para_str.length; i++) {\r\n      if (para_str[i] == '\\\\') {\r\n        if (i < para_str.length - 1) {\r\n          strBuilder += para_str[i + 1];\r\n          i++;\r\n          continue;\r\n        }\r\n        else {\r\n          strBuilder += para_str[i];\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (!hasQuote && (para_str[i] === '\\\"' || para_str[i] === '')) {\r\n        hasQuote = true;\r\n        bracketFlag = true;\r\n        strBuilder += '\\\"';\r\n      }\r\n      else if (hasQuote && (para_str[i] === '\\\"' || para_str[i] === '')) {\r\n        strBuilder += '\\\"';\r\n        bracketFlag = false;\r\n        hasQuote = false;\r\n        if (strBuilder !== '') {\r\n          rStr.push(strBuilder);\r\n        }\r\n        strBuilder = '';\r\n      }\r\n      else if (para_str[i] === ',' || para_str[i] === '') {\r\n        if (!bracketFlag) {\r\n          if (strBuilder !== \"\") {\r\n            rStr.push(strBuilder);\r\n          }\r\n          strBuilder = '';\r\n        }\r\n        else {\r\n          strBuilder += para_str[i];\r\n        }\r\n      }\r\n      else if (para_str[i] === ' ') {\r\n        continue;\r\n      }\r\n      else {\r\n        strBuilder += para_str[i];\r\n      }\r\n    }\r\n    if (strBuilder !== \"\") {\r\n      rStr.push(strBuilder);\r\n    }\r\n    return rStr;\r\n  }\r\n\r\n\r\n  private static getEscapeCharacter(para_char: string): string {\r\n    if (this._escapeCharacters[para_char])\r\n      return this._escapeCharacters[para_char];\r\n    else\r\n      return para_char;\r\n  }\r\n\r\n  private static getEscapeCharacter2(para_char: string, is_escape: boolean[]): string {\r\n    if (this._escapeCharacters[para_char]) {\r\n      is_escape[0] = true;\r\n      return this._escapeCharacters[para_char];\r\n    }\r\n    else {\r\n      is_escape[0] = false;\r\n      return para_char;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \"XXX\"\"XXX\"XXX\r\n   * @param para_str \r\n   */\r\n  public static strSubsection(para_str: string): string[] {\r\n    let strBuilder: string = '';\r\n    let rStr: string[] = [];\r\n    let bracketFlag: boolean = false;\r\n    let needSpace: boolean = false;\r\n    for (let i: number = 0; i < para_str.length; i++) {\r\n      if (para_str[i] == '\\\\') {\r\n        if (i < para_str.length - 1) {\r\n          strBuilder += this.getEscapeCharacter(para_str[i + 1]);\r\n          i++;\r\n          continue;\r\n        }\r\n        else {\r\n          strBuilder += para_str[i];\r\n          break;\r\n        }\r\n      }\r\n      if (para_str[i] === '(' || para_str[i] === '' || para_str[i] === '\\\"' || para_str[i] === '') {\r\n        bracketFlag = true;\r\n        needSpace = false;\r\n      }\r\n      else if (para_str[i] === ')' || para_str[i] === '' || para_str[i] === '\\\"' || para_str[i] === '') {\r\n        bracketFlag = false;\r\n        if (strBuilder !== \"\") {\r\n          rStr.push(strBuilder);\r\n        }\r\n        strBuilder = '';\r\n        needSpace = false;\r\n      }\r\n      else if (para_str[i] === ',' || para_str[i] === '') {\r\n        if (!bracketFlag) {\r\n          if (strBuilder !== \"\") {\r\n            rStr.push(strBuilder);\r\n          }\r\n          strBuilder = '';\r\n        }\r\n        else {\r\n          strBuilder += para_str[i];\r\n        }\r\n        needSpace = false;\r\n      }\r\n      else if (para_str[i] === ' ' && !needSpace) {\r\n        continue;\r\n      }\r\n      else {\r\n        strBuilder += para_str[i];\r\n        needSpace = true;\r\n      }\r\n    }\r\n    if (strBuilder !== \"\") {\r\n      rStr.push(strBuilder);\r\n    }\r\n    return rStr;\r\n  }\r\n\r\n  /**\r\n   * $\r\n   * @param project_name \r\n   * @param para_array \r\n   */\r\n  public static getParaArrayAll(project_name: string, para_array: string[]): string[] {\r\n    let coloneStr: string[] = para_array.slice();\r\n    for (let i: number = 0; i < coloneStr.length; i++) {\r\n      if (coloneStr[i].startsWith(\"$\")) {\r\n        //\r\n        if (coloneStr[i].indexOf(\",\") > -1 || coloneStr[i].indexOf(\"\")) {\r\n          let paraArray: string[] = coloneStr[i].split(/,|/);\r\n          paraArray = this.getParaArrayAll(project_name, paraArray);\r\n          let newPara: string = '';\r\n          for (let j: number = 0; j < paraArray.length; j++) {\r\n            if (j === paraArray.length - 1) {\r\n              newPara += paraArray[j];\r\n            }\r\n            else {\r\n              newPara += paraArray[j];\r\n              newPara += \",\";\r\n            }\r\n          }\r\n          coloneStr[i] = newPara;\r\n        }\r\n        else {\r\n          // TODO\r\n          console.log(\"\" + coloneStr[i] + \"\");\r\n        }\r\n      }\r\n      else if (coloneStr[i].startsWith(\"%\")) {\r\n        //\r\n        if (coloneStr[i].indexOf(\",\") > -1 || coloneStr[i].indexOf(\"\") > -1) {\r\n          let paraArray: string[] = coloneStr[i].split(/,|/);\r\n          paraArray = this.getParaArrayAll(project_name, paraArray);\r\n          let newPara: string = '';\r\n          for (let j: number = 0; j < paraArray.length; j++) {\r\n            if (j == paraArray.length - 1) {\r\n              newPara += paraArray[j];\r\n            }\r\n            else {\r\n              newPara += paraArray[j];\r\n              newPara += \",\";\r\n            }\r\n          }\r\n          coloneStr[i] = newPara;\r\n        }\r\n        else {\r\n          // TODO\r\n          console.log(\"\" + coloneStr[i] + \"BlurVar\");\r\n        }\r\n      }\r\n      //\r\n      else if (coloneStr[i].indexOf(\",\") > -1 || coloneStr[i].indexOf(\"\") > -1) {\r\n        let paraArray: string[] = coloneStr[i].split(/,|/);\r\n        paraArray = this.getParaArrayAll(project_name, paraArray);\r\n        let newPara: string = '';\r\n        for (let j: number = 0; j < paraArray.length; j++) {\r\n          if (j == paraArray.length - 1) {\r\n            newPara += paraArray[j];\r\n          }\r\n          else {\r\n            newPara += paraArray[j];\r\n            newPara += \",\";\r\n          }\r\n        }\r\n        coloneStr[i] = newPara;\r\n      }\r\n    }\r\n    return coloneStr;\r\n  }\r\n\r\n  /**\r\n   * \r\n     1\r\n     2\r\n        1\r\n        2 +\r\n        3+ \r\n        412123\r\n    \r\n   * @param para_str \r\n   */\r\n  public static paraSegment(para_str: string): string[] {\r\n    let strBuilder = '';\r\n    let rStr: string[] = [];\r\n    let bracketFlag: boolean = false;\r\n    let innerBracket: number = 0;\r\n    let saveBracket: boolean = false;\r\n\r\n    let quotationMark: boolean = false;\r\n\r\n    for (let i: number = 0; i < para_str.length; i++) {\r\n      //\r\n      if (para_str[i] == '\\\\') {\r\n        if (i < para_str.length - 1) {\r\n          let isEscape: boolean[] = [true];\r\n          let c: string = this.getEscapeCharacter2(para_str[i + 1], isEscape);\r\n          if (isEscape[0]) {\r\n            i++;\r\n            strBuilder += c;\r\n          }\r\n          else {\r\n            i++;\r\n            strBuilder += para_str[i];\r\n          }\r\n          continue;\r\n        }\r\n        else {\r\n          strBuilder += para_str[i];\r\n          break;\r\n        }\r\n      }\r\n      if (para_str[i] === '(' || para_str[i] === '') {\r\n        if (quotationMark) {\r\n          strBuilder += para_str[i];\r\n        }\r\n        else {\r\n          if (bracketFlag) {\r\n            innerBracket++;\r\n            strBuilder += para_str[i];\r\n          }\r\n          else if (strBuilder.trim() !== \"\") {\r\n            strBuilder += para_str[i];\r\n            saveBracket = true;\r\n          }\r\n          else if (i < para_str.length - 1) {\r\n            if (this.needSaveBracket(para_str.substring(i + 1))) {\r\n              strBuilder += para_str[i];\r\n              saveBracket = true;\r\n            }\r\n          }\r\n          bracketFlag = true;\r\n        }\r\n      }\r\n      else if (para_str[i] === ')' || para_str[i] === '') {\r\n        if (quotationMark) {\r\n          strBuilder += para_str[i];\r\n        }\r\n        else {\r\n          if (innerBracket > 0) {\r\n            innerBracket--;\r\n            bracketFlag = true;\r\n            strBuilder += para_str[i];\r\n          }\r\n          else if (bracketFlag && saveBracket) {\r\n            strBuilder += para_str[i];\r\n            saveBracket = false;\r\n            bracketFlag = false;\r\n          }\r\n          else {\r\n            bracketFlag = false;\r\n          }\r\n        }\r\n      }\r\n      else if (para_str[i] === '\"') {\r\n        strBuilder += para_str[i];\r\n        quotationMark = !quotationMark;\r\n      }\r\n      else if (para_str[i] === ',' || para_str[i] === '') {\r\n        if (quotationMark) {\r\n          strBuilder += para_str[i];\r\n        }\r\n        else {\r\n          if (!bracketFlag) {\r\n            if (strBuilder !== \"\") {\r\n              rStr.push(strBuilder.trim());\r\n            }\r\n            strBuilder = '';\r\n          }\r\n          else {\r\n            strBuilder += para_str[i];\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        strBuilder += para_str[i];\r\n      }\r\n    }\r\n    if (strBuilder !== \"\") {\r\n      rStr.push(strBuilder.trim());\r\n    }\r\n    return rStr;\r\n  }\r\n\r\n\r\n  private static needSaveBracket(str: string): boolean {\r\n    let hasBracket: boolean = false;\r\n    let innerBracket: number = 0;\r\n    for (let i: number = 0; i < str.length; i++) {\r\n      if (hasBracket) {\r\n        if (str[i] === ' ') {\r\n          continue;\r\n        }\r\n        else if (str[i] === ',' || str[i] === '') {\r\n          return false;\r\n        }\r\n        else {\r\n          return true;\r\n        }\r\n      }\r\n      else {\r\n        if (str[i] === '(' || str[i] === '') {\r\n          innerBracket++;\r\n        }\r\n        else if (str[i] === ')' || str[i] === '') {\r\n          if (innerBracket > 0) {\r\n            innerBracket--;\r\n          }\r\n          else {\r\n            hasBracket = true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n\r\n  public static isIDLegal(id: string): boolean {\r\n    for (let i: number = 0; i < id.length; i++) {\r\n      if (this._illegalChar[id[i]]) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n\r\n  public static isFormulaString(var_str: string): boolean {\r\n    for (let i: number = 0; i < var_str.length; i++)\r\n    {\r\n      if (this._formulaChar[var_str[i]]) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n\r\n}\r\n\r\nVE_StringFormat.init();\r\n\r\n// console.log(VE_StringFormat.paraSegment(\", Main Camera, *\"));\r\n// console.log(VE_StringFormat.paraSegment(\", *, *, 1, *\"));\r\n\r\n// console.log(VE_StringFormat.paraSegment(\", *, Pin, Example/SpinAPin/Pin , null, (0, -6, 0), (0,0,90),false\"));","import { ErrorInfo } from \"./errorInfo\";\r\n\r\nexport class VE_TypeConvert {\r\n\r\n\r\n  public static boolConvert(info: string, errorInfo: ErrorInfo): boolean {\r\n    info = info.toLowerCase().trim();\r\n    if(info === 'true' || info === '') {\r\n      return true;\r\n    } else if(info === 'false' || info === '') {\r\n      return false;\r\n    } else {\r\n      errorInfo.isRight = false;\r\n      errorInfo.message = 'bool|' + info;\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static intConvert(info: string, errorInfo: ErrorInfo): number {\r\n    info = info.toLowerCase().trim();\r\n    let num: number = parseFloat(info);\r\n    if(isNaN(num)) {\r\n      errorInfo.isRight = false;\r\n      errorInfo.message = 'number|' + info;\r\n      return - 1;\r\n    } else {\r\n      return Math.round(num);\r\n    }\r\n  }\r\n\r\n  public static floatConvert(info: string, errorInfo: ErrorInfo): number {\r\n    info = info.toLowerCase().trim();\r\n    let num: number = parseFloat(info);\r\n    if(isNaN(num)) {\r\n      errorInfo.isRight = false;\r\n      errorInfo.message = 'number|' + info;\r\n      return - 1;\r\n    } else {\r\n      return num;\r\n    }\r\n  }\r\n\r\n\r\n}","export * from './IVeryVar';\r\nexport * from './veryExpression';\r\nexport * from './veryVarManager';\r\nexport * from './veryVariables';\r\nexport * from './variables';\r\nexport * from './varTools';","import { StateConst } from \"../state\";\r\nimport { IVeryVar } from \"./IVeryVar\";\r\nimport { ErrorInfo } from \"../utility\";\r\nimport { VerySceneVariables } from \"../scene\";\r\nimport { VE_Variables } from \"./variables\";\r\nimport { VE_Objects, VeryEngineObject } from \"../object\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { VE_Template } from \"../template\";\r\nimport { VeryExpression } from \"./veryExpression\";\r\n\r\nexport class VarTools {\r\n\r\n  /**\r\n   * ID\r\n   * @param var_id ID\r\n   */\r\n  public static IsVarID(var_id: string): boolean {\r\n    return var_id.indexOf(StateConst.VARIABLE_SYMBOL) > -1;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * 1. * -  ->  -> \r\n   * 2. .* - \r\n   * @param project_name \r\n   * @param object_id \r\n   * @param var_id ID\r\n   * @param error_info \r\n   */\r\n  public static GetVeryVar(project_name: string, object_id: string, var_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (var_id.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n      let varArray: string[] = var_id.split(StateConst.STATE_SEPARATOR);\r\n      if (varArray.length !== 2) {\r\n        error_info.isRight = false;\r\n        error_info.message = \".*ID\" + var_id + \"\";\r\n        return null;\r\n      }\r\n      else {\r\n        for (let i: number = 0; i < varArray.length; i++) {\r\n          varArray[i] = varArray[i].trim();\r\n        }\r\n        // .*\r\n        if (varArray[1].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n          let objects: VE_Objects = VE_Manager.objects(project_name);\r\n          if (objects.isCreated(varArray[0])) {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(varArray[0]);\r\n            let varID: string = varArray[1].substring(1);\r\n            if (veryObject.isCreatedVariable(varID)) {\r\n              return veryObject.getVariable(varID);\r\n            }\r\n            else if (veryObject.isCreatedFsm(varID)) {\r\n              error_info.isRight = false;\r\n              error_info.message = \"ID\" + var_id + \"\";\r\n              return null;\r\n            }\r\n            else if (veryObject.isCreatedExpression(varID)) {\r\n              error_info.isRight = false;\r\n              error_info.message = \"ID\" + var_id + \"\";\r\n              return null;\r\n            }\r\n            else if (veryObject.isCreatedTemplate(varID)) {\r\n              error_info.isRight = false;\r\n              error_info.message = \"ID\" + var_id + \"\";\r\n              return null;\r\n            }\r\n            else {\r\n              error_info.isRight = false;\r\n              error_info.message = \".*ID\" + var_id + \"\";\r\n              return null;\r\n            }\r\n          }\r\n          else {\r\n            error_info.isRight = false;\r\n            error_info.message = \".*ID\" + var_id + \"\";\r\n            return null;\r\n          }\r\n        }\r\n        else {\r\n          error_info.isRight = false;\r\n          error_info.message = \".*ID\" + var_id + \"\";\r\n          return null;\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      // *\r\n      if (var_id.startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n        var_id = var_id.substring(1);\r\n        let objects: VE_Objects = VE_Manager.objects(project_name);\r\n        if (objects.isCreated(object_id)) {\r\n          let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n          if (veryObject.isCreatedVariable(var_id)) {\r\n            return veryObject.getVariable(var_id);\r\n          }\r\n          else if (veryObject.isCreatedFsm(var_id)) {\r\n            error_info.isRight = false;\r\n            error_info.message = \"ID\" + var_id + \"\";\r\n            return null;\r\n          }\r\n          else if (veryObject.isCreatedExpression(var_id)) {\r\n            error_info.isRight = false;\r\n            error_info.message = \"ID\" + var_id + \"\";\r\n            return null;\r\n          }\r\n          else if (veryObject.isCreatedTemplate(var_id)) {\r\n            error_info.isRight = false;\r\n            error_info.message = \"ID\" + var_id + \"\";\r\n            return null;\r\n          }\r\n          else {\r\n            return VarTools.GetGlobalVar(VE_Manager.variables(project_name), var_id, error_info);\r\n          }\r\n        }\r\n        else {\r\n          return VarTools.GetGlobalVar(VE_Manager.variables(project_name), var_id, error_info);\r\n        }\r\n      }\r\n      else {\r\n        error_info.isRight = false;\r\n        error_info.message = \"*ID\" + var_id + \"\";\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param global_vars \r\n   * @param var_id ID\r\n   * @param error_info \r\n   */\r\n  public static GetGlobalVar(global_vars: VE_Variables, var_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (global_vars.isCreatedVariable(var_id)) {\r\n      return global_vars.getVariable(var_id);\r\n    }\r\n    else if (global_vars.isCreatedExpression(var_id)) {\r\n      error_info.isRight = false;\r\n      error_info.message = \"ID\" + var_id + \"\";\r\n      return null;\r\n    }\r\n    else if (global_vars.isCreatedTemplate(var_id)) {\r\n      error_info.isRight = false;\r\n      error_info.message = \"ID\" + var_id + \"\";\r\n      return null;\r\n    }\r\n    else {\r\n      return VarTools.GetSceneVar(var_id, error_info);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param var_id ID\r\n   * @param error_info \r\n   */\r\n  public static GetSceneVar(var_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (VerySceneVariables.Variables.isCreatedVariable(var_id)) {\r\n      return VerySceneVariables.Variables.getVariable(var_id);\r\n    }\r\n    else if (VerySceneVariables.Variables.isCreatedExpression(var_id)) {\r\n      error_info.isRight = false;\r\n      error_info.message = \"ID\" + var_id + \"\";\r\n      return null;\r\n    }\r\n    else {\r\n      error_info.isRight = false;\r\n      error_info.message = \"ID\" + var_id + \"\";\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * 1. * -  -> \r\n   * 2. .* - \r\n   * @param project_name \r\n   * @param object_id \r\n   * @param var_id ID\r\n   * @param error_info \r\n   */\r\n  public static GetTemplate(project_name: string, object_id: string, var_id: string, error_info: ErrorInfo): Nullable<VE_Template> {\r\n    if (var_id.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n      let varArray: string[] = var_id.split(StateConst.STATE_SEPARATOR);\r\n      if (varArray.length !== 2) {\r\n        error_info.isRight = false;\r\n        error_info.message = \".*ID\" + var_id + \"\";\r\n        return null;\r\n      }\r\n      else {\r\n        for (let i: number = 0; i < varArray.length; i++) {\r\n          varArray[i] = varArray[i].trim();\r\n        }\r\n        // .*\r\n        if (varArray[1].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n          let objects: VE_Objects = VE_Manager.objects(project_name);\r\n          if (objects.isCreated(varArray[0])) {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(varArray[0]);\r\n            let varID: string = varArray[1].substring(1);\r\n            if (veryObject.isCreatedTemplate(varID)) {\r\n              return veryObject.getTemplate(varID);\r\n            }\r\n            else {\r\n              error_info.isRight = false;\r\n              error_info.message = \".*ID\" + var_id + \"\";\r\n              return null;\r\n            }\r\n          }\r\n          else {\r\n            error_info.isRight = false;\r\n            error_info.message = \".*ID\" + var_id + \"\";\r\n            return null;\r\n          }\r\n        }\r\n        else {\r\n          error_info.isRight = false;\r\n          error_info.message = \".*ID\" + var_id + \"\";\r\n          return null;\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      // *\r\n      if (var_id.startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n        var_id = var_id.substring(1);\r\n        let objects: VE_Objects = VE_Manager.objects(project_name);\r\n        if (objects.isCreated(object_id)) {\r\n          let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n          if (veryObject.isCreatedTemplate(var_id)) {\r\n            return veryObject.getTemplate(var_id);\r\n          }\r\n        }\r\n        let globalVars: VE_Variables = VE_Manager.variables(project_name);\r\n        if (globalVars.isCreatedTemplate(var_id)) {\r\n          return globalVars.getTemplate(var_id);\r\n        }\r\n        else {\r\n          error_info.isRight = false;\r\n          error_info.message = \"*ID\" + var_id + \"\";\r\n          return null;\r\n        }\r\n      }\r\n      else {\r\n        error_info.isRight = false;\r\n        error_info.message = \"*ID\" + var_id + \"\";\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public static GetVeryVarWithExpression(project_name: string, object_id: string, var_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (var_id.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n      let varArray: string[] = var_id.split(StateConst.STATE_SEPARATOR);\r\n      if (varArray.length !== 2) {\r\n        error_info.isRight = false;\r\n        error_info.message = \".*ID\" + var_id + \"\";\r\n        return null;\r\n      }\r\n      else {\r\n        for (let i: number = 0; i < varArray.length; i++) {\r\n          varArray[i] = varArray[i].trim();\r\n        }\r\n        // .*\r\n        if (varArray[1].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n          let objects: VE_Objects = VE_Manager.objects(project_name);\r\n          if (objects.isCreated(varArray[0])) {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(varArray[0]);\r\n            let varID: string = varArray[1].substring(1);\r\n            if (veryObject.isCreatedVariable(varID)) {\r\n              return veryObject.getVariable(varID);\r\n            }\r\n            else if (veryObject.isCreatedFsm(varID)) {\r\n              return veryObject.getFsm(varID).fsmVar;\r\n            }\r\n            else if (veryObject.isCreatedExpression(varID)) {\r\n              return new VeryExpression(veryObject.getExpression(varID));\r\n            }\r\n            else if (veryObject.isCreatedTemplate(varID)) {\r\n              error_info.isRight = false;\r\n              error_info.message = \"ID\" + var_id + \"\";\r\n              return null;\r\n            }\r\n            else {\r\n              error_info.isRight = false;\r\n              error_info.message = \".*ID\" + var_id + \"\";\r\n              return null;\r\n            }\r\n          }\r\n          else {\r\n            error_info.isRight = false;\r\n            error_info.message = \".*ID\" + var_id + \"\";\r\n            return null;\r\n          }\r\n        }\r\n        else {\r\n          error_info.isRight = false;\r\n          error_info.message = \".*ID\" + var_id + \"\";\r\n          return null;\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      // *\r\n      if (var_id.startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n        var_id = var_id.substring(1);\r\n        let objects: VE_Objects = VE_Manager.objects(project_name);\r\n        if (objects.isCreated(object_id)) {\r\n          let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n          if (veryObject.isCreatedVariable(var_id)) {\r\n            return veryObject.getVariable(var_id);\r\n          }\r\n          else if (veryObject.isCreatedFsm(var_id)) {\r\n            return veryObject.getFsm(var_id).fsmVar;\r\n          }\r\n          else if (veryObject.isCreatedExpression(var_id)) {\r\n            return new VeryExpression(veryObject.getExpression(var_id));\r\n          }\r\n          else if (veryObject.isCreatedTemplate(var_id)) {\r\n            error_info.isRight = false;\r\n            error_info.message = \"ID\" + var_id + \"\";\r\n            return null;\r\n          }\r\n          else {\r\n            return VarTools.GetGlobalVarWithExpression(VE_Manager.variables(project_name), var_id, error_info);\r\n          }\r\n        }\r\n        else {\r\n          return VarTools.GetGlobalVarWithExpression(VE_Manager.variables(project_name), var_id, error_info);\r\n        }\r\n      }\r\n      else {\r\n        error_info.isRight = false;\r\n        error_info.message = \"*ID\" + var_id + \"\";\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public static GetGlobalVarWithExpression(global_vars: VE_Variables, var_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (global_vars.isCreatedVariable(var_id)) {\r\n      return global_vars.getVariable(var_id);\r\n    }\r\n    else if (global_vars.isCreatedExpression(var_id)) {\r\n      return new VeryExpression(global_vars.getExpression(var_id));\r\n    }\r\n    else if (global_vars.isCreatedTemplate(var_id)) {\r\n      error_info.isRight = false;\r\n      error_info.message = \"ID\" + var_id + \"\";\r\n      return null;\r\n    }\r\n    else {\r\n      return VarTools.GetSceneVarWithExpression(var_id, error_info);\r\n    }\r\n  }\r\n\r\n  public static GetSceneVarWithExpression(var_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (VerySceneVariables.Variables.isCreatedVariable(var_id)) {\r\n      return VerySceneVariables.Variables.getVariable(var_id);\r\n    }\r\n    else if (VerySceneVariables.Variables.isCreatedExpression(var_id)) {\r\n      return new VeryExpression(VerySceneVariables.Variables.getExpression(var_id));\r\n    }\r\n    else {\r\n      error_info.isRight = false;\r\n      error_info.message = \"ID\" + var_id + \"\";\r\n      return null;\r\n    }\r\n  }\r\n\r\n}","import { VE_VariableData } from \"../dataSource\";\r\nimport { IVeryVar } from \"./IVeryVar\";\r\nimport { VE_Template } from \"../template\";\r\nimport { IExpression } from \"../expression\";\r\n\r\nexport class VE_Variables {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  public varData: VE_VariableData;\r\n\r\n  private _veryVars: { [key: string]: IVeryVar } = {};\r\n  private _tempalteVars: { [key: string]: VE_Template } = {};\r\n  private _expressions: { [key: string]: IExpression } = {};\r\n\r\n  constructor(project_name: string) {\r\n    this._projectName = project_name;\r\n    this.varData = new VE_VariableData(project_name);\r\n  }\r\n\r\n  public isCreated(id: string): boolean {\r\n    if(this._veryVars[id] || this._tempalteVars[id] || this._expressions[id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isCreatedVariable(id: string): boolean {\r\n    if(this._veryVars[id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addVariable(id: string, very_var: IVeryVar): void {\r\n    this._veryVars[id] = very_var;\r\n  }\r\n\r\n  public getVariable(id: string): IVeryVar {\r\n    return this._veryVars[id];\r\n  }\r\n\r\n  public isCreatedTemplate(id: string): boolean {\r\n    if(this._tempalteVars[id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTemplate(id: string, template: VE_Template): void {\r\n    this._tempalteVars[id] = template;\r\n  }\r\n\r\n  public getTemplate(id: string): VE_Template {\r\n    return this._tempalteVars[id];\r\n  }\r\n\r\n  public isCreatedExpression(id: string): boolean {\r\n    if(this._expressions[id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addExpression(id: string, exp: IExpression): void {\r\n    this._expressions[id] = exp;\r\n  }\r\n\r\n  public getExpression(id: string): IExpression {\r\n    return this._expressions[id];\r\n  }\r\n\r\n\r\n  public clear(): void {\r\n    if(this.varData) {\r\n      this.varData.clear();\r\n    }\r\n    this._veryVars = {};\r\n    this._expressions = {};\r\n    this._tempalteVars = {};\r\n  }\r\n\r\n\r\n\r\n}","import { IVeryVar } from \"./IVeryVar\";\r\nimport { IExpression, ConstantExpression } from \"../expression\";\r\nimport { ErrorInfo } from \"../utility\";\r\n\r\nexport class VeryExpression implements IVeryVar {\r\n  public get varType(): string {\r\n    return this._value.expType;\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"VeryExpression\";\r\n  }\r\n\r\n  public get value(): IExpression {\r\n    return this._value;\r\n  }\r\n  public set value(val: IExpression) {\r\n    this._value = val;\r\n  }\r\n  private _value: IExpression = ConstantExpression.Empty();\r\n\r\n  public get isNull(): boolean {\r\n    return this._value === null;\r\n  }\r\n\r\n  constructor(val: IExpression) {\r\n    this._value = val;\r\n  }\r\n\r\n  public setValue(val: any) {\r\n    this._value = val;\r\n  }\r\n\r\n  // \r\n  public getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n    let newVal = parseFloat(value_str);\r\n    if (!isNaN(newVal)) {\r\n      return newVal;\r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message =\r\n        \": \" +\r\n        this.varType +\r\n        \"\" +\r\n        value_str +\r\n        \"\";\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    return new VeryExpression(this._value);\r\n  }\r\n}","import { ShowError } from \"../html/showError\";\r\nimport { IVeryVar } from \"./IVeryVar\";\r\nimport { ErrorInfo } from \"../utility\";\r\nimport { VE_Variables } from \"./variables\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { VE_Objects, VeryEngineObject } from \"../object\";\r\nimport { VE_Template } from \"../template\";\r\nimport { GameGlobal } from \"../global\";\r\nimport { VeryExpression } from \"./veryExpression\";\r\n\r\nexport class VeryVarManager {\r\n\r\n  private static _veryVarTypes: { [key: string]: IVeryVar } = {};\r\n\r\n  public static hasVarType(var_type: string): boolean {\r\n    var_type = var_type.toLowerCase();\r\n    if (this._veryVarTypes[var_type]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static addVarType(var_type: string, var_prototype: IVeryVar): void {\r\n    // \r\n    if (!GameGlobal.PlatformLoaded) {\r\n      var_type = var_type.toLowerCase().trim();\r\n      // \r\n      if (this._veryVarTypes[var_type]) {\r\n        ShowError.showError('VeryVar' + var_type + '' + var_prototype.className);\r\n      } else {\r\n        // console.log(var_proto.VarType);\r\n        this._veryVarTypes[var_type] = var_prototype;\r\n        // let a = Object.create(this.GetVarType(var_type));\r\n        // console.log(a.Value);\r\n        // a.Value = true;\r\n        // console.log(a.Value);\r\n        // a.Value = 1234;\r\n        // console.log(a.getValue());\r\n        // console.log(this.GetVarType(var_type).__proto__);\r\n      }\r\n    }\r\n  }\r\n\r\n  // TODO\r\n  public static createVar(var_type: string): IVeryVar {\r\n    var_type = var_type.toLowerCase();\r\n    return Object.create(this.getVarType(var_type));\r\n  }\r\n\r\n  public static createVariable(var_id: string, var_type: string, value: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    var_type = var_type.toLowerCase();\r\n    let variable: any;\r\n    try {\r\n      variable = Object.create(this.getVarType(var_type));\r\n      if (!variable) {\r\n        error_info.isRight = false;\r\n        error_info.message = '' + var_type;\r\n        return null;\r\n      }\r\n      let result: any = (<IVeryVar>variable).initValue(value, error_info);\r\n      if (error_info.isRight) {\r\n        (<IVeryVar>variable).setValue(result);\r\n        return <IVeryVar>variable;\r\n      } else {\r\n        return null;\r\n      }\r\n    } catch (error) {\r\n      console.log(error.message);\r\n      error_info.isRight = false;\r\n      error_info.message = '' + var_type + '' + error.message;\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static getVarType(var_type: string): any {\r\n    var_type = var_type.toLowerCase();\r\n    if (this._veryVarTypes && this._veryVarTypes[var_type]) {\r\n      return this._veryVarTypes[var_type];\r\n    }\r\n    return null;\r\n  }\r\n\r\n\r\n  public static remove(var_type: string): void {\r\n    var_type = var_type.toLowerCase();\r\n    delete this._veryVarTypes[var_type];\r\n  }\r\n\r\n  // *\r\n  // .*\r\n  public static getVariable(var_id: string, project_name: string, object_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (project_name === '') {\r\n      return this.getSceneVariable(var_id, error_info);\r\n    } else if (object_id === '') {\r\n      return this.getGlobalVariable(var_id, project_name, error_info);\r\n    } else {\r\n      let objects: VE_Objects = VE_Manager.objects(project_name);\r\n      if (objects) {\r\n        let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n        if (veryObject) {\r\n          if (veryObject.isCreatedVariable(var_id)) {\r\n            return veryObject.getVariable(var_id);\r\n          } else if (veryObject.isCreatedExpression(var_id)) {\r\n            return new VeryExpression(veryObject.getExpression(var_id));\r\n          } else if (veryObject.isCreatedFsm(var_id)) {\r\n            return veryObject.getFsm(var_id).fsmVar;\r\n          } else {\r\n            return this.getGlobalVariable(var_id, project_name, error_info);\r\n          }\r\n        } else {\r\n          return this.getGlobalVariable(var_id, project_name, error_info);\r\n        }\r\n      } else {\r\n        return this.getGlobalVariable(var_id, project_name, error_info);\r\n      }\r\n    }\r\n  }\r\n\r\n  // *.*\r\n  // .*.*\r\n  public static getTemplateVariable(template_var_id: string, var_id: string, project_name: string, object_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (project_name === '') {\r\n      // \r\n      error_info.isRight = false;\r\n      error_info.message = \"\" + template_var_id + \"\\n\";\r\n      return null;\r\n    }\r\n    else {\r\n      if (object_id !== '')  //\r\n      {\r\n        let objects: VE_Objects = VE_Manager.objects(project_name);\r\n        if (!objects) {\r\n          error_info.isRight = false;\r\n          error_info.message += \"\" + object_id + \"\\n\";\r\n          return null;\r\n        }\r\n        else {\r\n          if (objects.isCreated(object_id)) {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n            if (veryObject.isCreatedTemplate(template_var_id)) {\r\n              let template: VE_Template = veryObject.getTemplate(template_var_id);\r\n              if (template.templateInstance === null) {\r\n                error_info.isRight = false;\r\n                error_info.message += \"\" + template_var_id + \"\\n\";\r\n                return null;\r\n              }\r\n              else {\r\n                if (template.templateInstance.isCreatedVariable(var_id)) {\r\n                  return template.templateInstance.getVariable(var_id);\r\n                }\r\n                else if (template.templateInstance.isCreatedExpression(var_id)) {\r\n                  return new VeryExpression(template.templateInstance.getExpression(var_id));\r\n                }\r\n                else if (template.templateInstance.isCreatedFsm(var_id)) {\r\n                  return template.templateInstance.getFsm(var_id).fsmVar;\r\n                }\r\n                else {\r\n                  error_info.isRight = false;\r\n                  error_info.message += \"\" + template_var_id + \"\" + var_id + \"\\n\";\r\n                  return null;\r\n                }\r\n              }\r\n            }\r\n            else {\r\n              error_info.isRight = false;\r\n              error_info.message += \"\" + template_var_id + \"\\n\";\r\n              return null;\r\n            }\r\n          }\r\n          else {\r\n            error_info.isRight = false;\r\n            error_info.message += \"\" + object_id + \"\\n\";\r\n            return null;\r\n          }\r\n        }\r\n      }\r\n      // \r\n      else {\r\n        let variables: VE_Variables = VE_Manager.variables(project_name);\r\n        if (!variables) {\r\n          error_info.isRight = false;\r\n          error_info.message += \"\" + template_var_id + \"\\n\";\r\n          return null;\r\n        }\r\n        else {\r\n          if (variables.isCreatedTemplate(template_var_id)) {\r\n            let template: VE_Template = variables.getTemplate(template_var_id);\r\n            if (template.templateInstance === null) {\r\n              error_info.isRight = false;\r\n              error_info.message += \"\" + template_var_id + \"\\n\";\r\n              return null;\r\n            }\r\n            else {\r\n              if (template.templateInstance.isCreatedVariable(var_id)) {\r\n                return template.templateInstance.getVariable(var_id);\r\n              }\r\n              else if (template.templateInstance.isCreatedExpression(var_id)) {\r\n                return new VeryExpression(template.templateInstance.getExpression(var_id));\r\n              }\r\n              else if (template.templateInstance.isCreatedFsm(var_id)) {\r\n                return template.templateInstance.getFsm(var_id).fsmVar;\r\n              }\r\n              else {\r\n                error_info.isRight = false;\r\n                error_info.message += \"\" + template_var_id + \"\" + var_id + \"\\n\";\r\n                return null;\r\n              }\r\n            }\r\n          }\r\n          else {\r\n            error_info.isRight = false;\r\n            error_info.message += \"\" + template_var_id + \"\\n\";\r\n            return null;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public static getGlobalVariable(var_id: string, project_name: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (project_name === '') {\r\n      return this.getSceneVariable(var_id, error_info);\r\n    } else {\r\n      let variables: VE_Variables = VE_Manager.variables(project_name);\r\n      if (variables) {\r\n        if (variables.isCreatedVariable(var_id)) {\r\n          return variables.getVariable(var_id);\r\n        } else if (variables.isCreatedExpression(var_id)) {\r\n          return new VeryExpression(variables.getExpression(var_id));\r\n        } else {\r\n          return this.getSceneVariable(var_id, error_info);\r\n        }\r\n      } else {\r\n        return this.getSceneVariable(var_id, error_info);\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public static getSceneVariable(var_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    error_info.isRight = false;\r\n    error_info.message = ''\r\n    return null;\r\n  }\r\n\r\n  public static dispose(): void {\r\n    VeryVarManager._veryVarTypes = {};\r\n  }\r\n}\r\n","import { IVeryVar } from \"./IVeryVar\";\r\nimport { ErrorInfo } from \"../utility/errorInfo\";\r\nimport { VeryVarManager } from \"./veryVarManager\";\r\nimport { GameObject } from \"../babylon/babylonVariables\";\r\nimport { VeryExpression } from \"./veryExpression\";\r\n\r\nexport class VeryBool implements IVeryVar {\r\n  public get varType(): string {\r\n    return \"bool|\";\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"VeryBool\";\r\n  }\r\n\r\n  private _isExpression: boolean = false;\r\n  private _expression: Nullable<VeryExpression> = null;\r\n\r\n  public get value(): boolean {\r\n    if (this._isExpression) {\r\n      return this._expression!.value.evaluate();\r\n    }\r\n    return this._value;\r\n  }\r\n  public set value(val: boolean) {\r\n    this._value = val;\r\n  }\r\n  private _value: boolean = false;\r\n\r\n  constructor() {\r\n    this._value = false;\r\n  }\r\n\r\n  public setValue(val: any): void {\r\n    this._value = val;\r\n  }\r\n\r\n  public getValue(): any {\r\n    if (this._isExpression) {\r\n      return this._expression!.value.evaluate();\r\n    }\r\n    return this._value;\r\n  }\r\n\r\n  public setExpression(expression: VeryExpression): void {\r\n    this._expression = expression;\r\n    this._isExpression = true;\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n    value_str = value_str.trim();\r\n    if (value_str.toLowerCase() === \"false\" || value_str === \"\") {\r\n      return false;\r\n    } else if (value_str.toLowerCase() === \"true\" || value_str === \"\") {\r\n      return true;\r\n    } else if (\r\n      value_str === \"\" ||\r\n      value_str.toLowerCase() === \"null\" ||\r\n      value_str.toLowerCase() === \"none\"\r\n    ) {\r\n      return false;\r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message =\r\n        \": \" +\r\n        this.varType +\r\n        \"\" +\r\n        value_str +\r\n        \"\";\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    let varClone: VeryBool = new VeryBool();\r\n    varClone.setValue(this._value);\r\n    return varClone;\r\n  }\r\n}\r\n\r\nexport class VeryInt implements IVeryVar {\r\n  public get varType(): string {\r\n    return \"int|\";\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"VeryInt\";\r\n  }\r\n\r\n  public get value(): number {\r\n    return Math.round(this._value);\r\n  }\r\n  public set value(val: number) {\r\n    this._value = Math.round(val);\r\n  }\r\n  private _value: number = 0;\r\n\r\n  constructor() {\r\n    this._value = 0;\r\n  }\r\n\r\n  public getValue(): any {\r\n    return this.value;\r\n  }\r\n\r\n  public setValue(val: any): void {\r\n    this.value = val;\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n    // floatparseInt\r\n    let newFloat = parseFloat(value_str);\r\n    if (!isNaN(newFloat)) {\r\n      // float\r\n      return Math.round(newFloat);\r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message =\r\n        \": \" +\r\n        this.varType +\r\n        \"\" +\r\n        value_str +\r\n        \"\";\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    let varClone: VeryInt = new VeryInt();\r\n    varClone.setValue(this._value);\r\n    return varClone;\r\n  }\r\n}\r\n\r\nexport class VeryFloat implements IVeryVar {\r\n  public get varType(): string {\r\n    return \"float|\";\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"VeryFloat\";\r\n  }\r\n\r\n  public get value(): number {\r\n    return this._value;\r\n  }\r\n  public set value(val: number) {\r\n    this._value = val;\r\n  }\r\n  private _value: number = 0;\r\n\r\n  constructor() {\r\n    this._value = 0;\r\n  }\r\n\r\n  public setValue(val: number) {\r\n    this._value = val;\r\n  }\r\n\r\n  // \r\n  public getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n    let newVal = parseFloat(value_str);\r\n    if (!isNaN(newVal)) {\r\n      return newVal;\r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message =\r\n        \": \" +\r\n        this.varType +\r\n        \"\" +\r\n        value_str +\r\n        \"\";\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    let varClone: VeryFloat = new VeryFloat();\r\n    varClone.setValue(this._value);\r\n    return varClone;\r\n  }\r\n}\r\n\r\nexport class VeryNumber implements IVeryVar {\r\n  public get varType(): string {\r\n    return \"number|\";\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"VeryNumber\";\r\n  }\r\n\r\n  private _isExpression: boolean = false;\r\n  private _expression: Nullable<VeryExpression> = null;\r\n\r\n  public get value(): number {\r\n    if (this._isExpression && this._expression) {\r\n      return this._expression.value.evaluate();\r\n    }\r\n    return this._value;\r\n  }\r\n  public set value(val: number) {\r\n    this._value = val;\r\n  }\r\n  private _value: number = 0;\r\n\r\n  constructor() {\r\n    this._value = 0;\r\n  }\r\n\r\n  public setValue(val: number): void {\r\n    this._value = val;\r\n  }\r\n\r\n  public setExpression(expression: VeryExpression): void {\r\n    this._expression = expression;\r\n    this._isExpression = true;\r\n  }\r\n\r\n  public getValue(): any {\r\n    if (this._isExpression && this._expression) {\r\n      return this._expression.value.evaluate();\r\n    }\r\n    return this._value;\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n    let newVal = parseFloat(value_str);\r\n    if (!isNaN(newVal)) {\r\n      return newVal;\r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message =\r\n        \": \" +\r\n        this.varType +\r\n        \"\" +\r\n        value_str +\r\n        \"\";\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    let varClone: VeryNumber = new VeryNumber();\r\n    varClone.setValue(this._value);\r\n    return varClone;\r\n  }\r\n}\r\n\r\nexport class VeryString implements IVeryVar {\r\n  public get varType(): string {\r\n    return \"string|\";\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"VeryString\";\r\n  }\r\n\r\n  private _isExpression: boolean = false;\r\n  private _expression: Nullable<VeryExpression> = null;\r\n\r\n  public get value(): string {\r\n    if (this._isExpression) {\r\n      return this._expression!.value.evaluate().toString();\r\n    }\r\n    return this._value;\r\n  }\r\n  public set value(val: string) {\r\n    this._value = val;\r\n  }\r\n  private _value: string = \"\";\r\n\r\n  constructor() {\r\n    this._value = \"\";\r\n  }\r\n\r\n  public getValue(): any {\r\n    if (this._isExpression) {\r\n      return this._expression!.value.evaluate().toString();\r\n    }\r\n    return this._value;\r\n  }\r\n\r\n  public setValue(val: any): void {\r\n    this._value = val;\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n    let rValue: string;\r\n    if (\r\n      value_str.startsWith(\"'\") ||\r\n      value_str.startsWith('\"') ||\r\n      value_str.startsWith(\"\") ||\r\n      value_str.startsWith(\"\")\r\n    ) {\r\n      rValue = value_str.substring(1, value_str.length - 2);\r\n    } else {\r\n      rValue = value_str;\r\n    }\r\n    return rValue;\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    let varClone: VeryString = new VeryString();\r\n    varClone.setValue(this._value);\r\n    return varClone;\r\n  }\r\n\r\n  public setExpression(expression: VeryExpression): void {\r\n    this._isExpression = true;\r\n    this._expression = expression;\r\n  }\r\n}\r\n\r\nexport class VeryVector3 implements IVeryVar {\r\n  public get varType(): string {\r\n    return \"vector3|\";\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"VeryVector3\";\r\n  }\r\n\r\n  public get value(): BABYLON.Vector3 {\r\n    //let a: BABYLON.Vector3 = new BABYLON.Vector3 (1,1,1);\r\n    return this._value;\r\n  }\r\n  public set value(val: BABYLON.Vector3) {\r\n    this._value = val;\r\n  }\r\n  private _value: BABYLON.Vector3 = BABYLON.Vector3.Zero();\r\n\r\n  constructor() {\r\n    this._value = BABYLON.Vector3.Zero();\r\n  }\r\n\r\n  public getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  public setValue(val: any) {\r\n    this._value = val;\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n    let rValue: BABYLON.Vector3 = BABYLON.Vector3.Zero();\r\n    if (value_str === \"none\" || value_str === \"null\" || value_str === \"\") {\r\n      return rValue;\r\n    } else {\r\n      let vec3Str: string[] = value_str.split(/,|/);\r\n      if (vec3Str.length !== 3) {\r\n        error_info.isRight = false;\r\n        error_info.message =\r\n          \": \" +\r\n          this.varType +\r\n          \", : \" +\r\n          value_str +\r\n          \"Vector3|\";\r\n        return null;\r\n      } else {\r\n        let n1: number = parseFloat(vec3Str[0]);\r\n        let n2: number = parseFloat(vec3Str[1]);\r\n        let n3: number = parseFloat(vec3Str[2]);\r\n        if (isNaN(n1) || isNaN(n2) || isNaN(n3)) {\r\n          error_info.isRight = false;\r\n          error_info.message =\r\n            \": \" +\r\n            this.varType +\r\n            \", : \" +\r\n            value_str +\r\n            \"Vector3|\";\r\n          return null;\r\n        } else {\r\n          rValue = new BABYLON.Vector3(n1, n2, n3);\r\n        }\r\n      }\r\n    }\r\n    return rValue;\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    let varClone: VeryVector3 = new VeryVector3();\r\n    let r: BABYLON.Vector3 = new BABYLON.Vector3(\r\n      this._value.x,\r\n      this._value.y,\r\n      this._value.z\r\n    );\r\n    varClone.setValue(r);\r\n    return varClone;\r\n  }\r\n}\r\n\r\nexport class VeryGameObject implements IVeryVar {\r\n  public get varType(): string {\r\n    return \"GameObject|\";\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"VeryGameObject\";\r\n  }\r\n\r\n  public get value(): Nullable<GameObject> {\r\n    return this._value;\r\n  }\r\n  public set value(val: Nullable<GameObject>) {\r\n    this._value = val;\r\n  }\r\n  private _value: Nullable<GameObject> = null;\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public setValue(val: any) {\r\n    this._value = val;\r\n  }\r\n\r\n  // \r\n  public getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n\r\n    if (value_str === '' || value_str.toLowerCase() === 'null' || value_str.toLowerCase() === 'none') {\r\n      return null;\r\n    } else {\r\n      let rValue: Nullable<GameObject> = GameObject.Find(value_str);\r\n      if (rValue === null) {\r\n        error_info.isRight = false;\r\n        error_info.message =\r\n          \": \" +\r\n          this.varType +\r\n          \"\" +\r\n          value_str +\r\n          \"\";\r\n      }\r\n      return rValue;\r\n    }\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    let varClone: VeryGameObject = new VeryGameObject();\r\n    varClone.setValue(this._value);\r\n    return varClone;\r\n  }\r\n}\r\n\r\n\r\nVeryVarManager.addVarType(\"bool\", new VeryBool());\r\nVeryVarManager.addVarType('', new VeryBool());\r\n\r\nVeryVarManager.addVarType('int', new VeryInt());\r\nVeryVarManager.addVarType('float', new VeryFloat());\r\n\r\nVeryVarManager.addVarType('number', new VeryNumber());\r\nVeryVarManager.addVarType('', new VeryNumber());\r\n\r\nVeryVarManager.addVarType('string', new VeryString());\r\nVeryVarManager.addVarType('', new VeryString());\r\n\r\nVeryVarManager.addVarType('Vector3', new VeryVector3());\r\nVeryVarManager.addVarType('', new VeryVector3());\r\nVeryVarManager.addVarType('GameObject', new VeryGameObject());\r\nVeryVarManager.addVarType('', new VeryGameObject());\r\n\r\n","import { VeryTable } from \"../verytable/index\";\r\nimport { ShowError } from \"./html/showError\";\r\nimport { LoaderManager } from \"./loader/loaderManager\";\r\nimport { ErrorInfo } from \"./utility\";\r\nimport { IVeryVar, VeryVarManager, VeryBool } from \"./variables\";\r\nimport { VE_Expressions } from \"./expression\";\r\nimport { VE_ErrorManager, GameGlobal } from \"./global\";\r\nimport { VE_Reset } from \"./manager\";\r\n\r\n// entrance\r\nexport * from \"./index\";\r\n\r\nexport class VeryEngine {\r\n\r\n  \r\n\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n\r\n  public init(data: Array<Array<string>>, project_name: string): void {\r\n\r\n    // \r\n    VE_Reset.dispose();\r\n\r\n    // TODO: sTable1\r\n    let tableData: VeryTable = new VeryTable(data, 'VeRyEngine');\r\n    // console.log(tableData.pos(7, 5));\r\n    // console.log(tableData);\r\n    // console.log('');\r\n\r\n    // VeryVarManager.addVarType('bool', new VeryBool());\r\n\r\n    // let errorInfo: ErrorInfo = new ErrorInfo();\r\n    // let v1: Nullable<IVeryVar> = VeryVarManager.createVariable('a', '', '3.1415926', errorInfo);\r\n    // console.log(v1!.getValue());\r\n    // errorInfo.clear();\r\n    // let v2: Nullable<IVeryVar> = VeryVarManager.createVariable('b', '', '', errorInfo);\r\n    // console.log(v2!.getValue());\r\n    // errorInfo.clear();\r\n    // let v3: Nullable<IVeryVar> = VeryVarManager.createVariable('c', '', '1,2,3', errorInfo);\r\n    // console.log(v3!.clone());\r\n    // errorInfo.clear();\r\n    // let v4: Nullable<IVeryVar> = VeryVarManager.createVariable('c', '', 'ac1,dg2,3', errorInfo);\r\n    // console.log(v4);\r\n    // console.log(errorInfo.message);\r\n\r\n\r\n    let manager: LoaderManager = new LoaderManager();\r\n    let result: boolean = manager.load(projectName, tableData);\r\n    console.log(`${result}`);\r\n    if(!result) {\r\n      VE_ErrorManager.Print();\r\n    }\r\n\r\n    // \r\n    GameGlobal.PlatformLoaded = true;\r\n\r\n\r\n\r\n    // this.showErrorTest(tableData);\r\n  }\r\n\r\n\r\n  public showErrorTest(tableData: VeryTable): void {\r\n    // /*\r\n    ShowError.show('' + tableData.pos(7, 5));\r\n\r\n    ShowError.showError('' + tableData.pos(7, 5));\r\n\r\n    ShowError.showWarn('' + tableData.pos(7, 5));\r\n\r\n    ShowError.show('' + tableData.pos(7, 5));\r\n\r\n    ShowError.show('' + tableData.pos(7, 5));\r\n\r\n\r\n    document.getElementById(\"settingsButton\")!.addEventListener(\"click\", ShowError.close);\r\n    // */\r\n  }\r\n\r\n}","\r\nexport * from \"./veryTableRow\";\r\nexport * from \"./veryTable\";\r\nexport * from \"./veryTableSet\";\r\n","import { VeryTableRow } from \"./veryTableRow\";\r\n\r\nexport class VeryTable {\r\n  private _id: string = \"\";\r\n  public get ID(): string {\r\n    return this._id;\r\n  }\r\n  public set ID(id: string) {\r\n    this._id = id;\r\n  }\r\n\r\n  private _columnIDs: string[] = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];\r\n\r\n  private _rows: VeryTableRow[] = [];\r\n\r\n  public get RowCount(): number {\r\n    if (!this._rows) {\r\n      return 0;\r\n    } else {\r\n      return this._rows.length;\r\n    }\r\n  }\r\n\r\n  constructor(data: string[][], id = \"Sheet\") {\r\n    this._id = id;\r\n    this._rows = [];\r\n    if (data) {\r\n      for (let i = 0; i < data.length; i++) {\r\n        let newRow = new VeryTableRow(data[i]);\r\n        this._rows.push(newRow);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param row_index \r\n   * @param column_index \r\n   */\r\n  public getData(row_index: number, column_index: number): string {\r\n    // if (row_index >= 0 && row_index < this._rows.length) {\r\n    //   let row: VeryTableRow = this._rows[row_index];\r\n    //   return row.getData(column_index);\r\n    // } else {\r\n    //   return undefined;\r\n    // }\r\n    return this._rows[row_index].getData(column_index);\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param row_index \r\n   */\r\n  public getRow(row_index: number): VeryTableRow | undefined {\r\n    if (row_index >= 0 && row_index < this._rows.length) {\r\n      return this._rows[row_index];\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param row_index \r\n   * @param column_index \r\n   */\r\n  public pos(row_index: number, column_index: number): string {\r\n    // return \"\" + this.ID + \"\" + (row_index + 1) + \"\" + this.getColumnID(column_index) + \"\";\r\n    return \"\" + (row_index + 1) + \"\" + this.getColumnID(column_index) + \"\" + this.ID + \"\";\r\n  }\r\n\r\n  /**\r\n   * ID26\r\n   * @param column_index \r\n   */\r\n  private getColumnID(column_index: number): string {\r\n    if (column_index >= 0 && column_index < 26) {\r\n      return this._columnIDs[column_index];\r\n    } else if (column_index < 0) {\r\n      return 'error';\r\n    } else {\r\n      let a: number = Math.floor(column_index / 26);\r\n      let b: number = column_index % 26;\r\n      if (a === 0) {\r\n        return this._columnIDs[a];\r\n      } else {\r\n        return this._columnIDs[a - 1] + this._columnIDs[b];\r\n      }\r\n    }\r\n  }\r\n\r\n  // public addRowStringArray(row_data: string[]): void {\r\n\r\n  // }\r\n\r\n  // public addRowStrings(...strs: string[]): void {\r\n\r\n  // }\r\n\r\n  public addRow(data: VeryTableRow): void {\r\n    // \r\n    this._rows.push(data);\r\n\r\n  }\r\n\r\n\r\n}","\r\nexport class VeryTableRow {\r\n  public get Count(): number {\r\n    if (!this._rowData) {\r\n      return 0;\r\n    } else {\r\n      return this._rowData.length;\r\n    }\r\n  }\r\n\r\n  private _rowData: string[] = [];\r\n\r\n  constructor(row_data: string[]) {\r\n    // nullundefined\"\"\r\n    row_data.forEach((val, index, array) => {\r\n      if(!array[index]) {\r\n        array[index] = \"\";\r\n      }\r\n    });\r\n    this._rowData = row_data;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param column_index \r\n   */\r\n  public getData(column_index: number): string {\r\n    // if (column_index >= 0 && column_index < this.Count) {\r\n    //   return this._rowData[column_index];\r\n    // } else {\r\n    //   return undefined;\r\n    // }\r\n    return this._rowData[column_index];\r\n  }\r\n\r\n  public add(data: string): void {\r\n    this._rowData.push(data);\r\n  }\r\n\r\n  public insert(index: number, data: string): void {\r\n    // 2\r\n    this._rowData.push(data);\r\n    let tempData = this._rowData.slice(index);\r\n    tempData.push(data);\r\n    this._rowData = tempData;\r\n  }\r\n\r\n  public remove(index: number): void {\r\n    this._rowData.splice(index, 1);\r\n  }\r\n\r\n  public removeEnd(): void {\r\n    this._rowData.pop();\r\n  }\r\n\r\n  public isEmpty(): boolean {\r\n    if(!this._rowData) {\r\n      return true;\r\n    }\r\n    for(let i: number = 0; i < this._rowData.length; i++) {\r\n      if(!this._rowData[i] && this._rowData[i] !== '') {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // public\r\n\r\n  // public remove(index: number): any {\r\n\r\n  // }\r\n}","// import { VeryTableRow } from \"./veryTableRow\";\r\n/**\r\n * 1. TypeScript\r\n * 2. \r\n */\r\nimport { VeryTable } from \"./veryTable\";\r\n\r\nexport class VeryTableSet {\r\n\r\n  private _tables: VeryTable[] = [];\r\n\r\n  public get Count(): number {\r\n    if (!this._tables) {\r\n      return 0;\r\n    } else {\r\n      return this._tables.length;\r\n    }\r\n  }\r\n\r\n  constructor(tables?: VeryTable[]) {\r\n    if (tables) {\r\n      this._tables = tables;\r\n    }\r\n  }\r\n\r\n  public getTable(index: number): VeryTable | undefined {\r\n    if (index >= 0 && index < this.Count) {\r\n      return this._tables[index];\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  public addTable(table: VeryTable): void {\r\n    this._tables.push(table);\r\n  }\r\n\r\n  public removeTable(index: number): void {\r\n    if (index >= 0 && index < this.Count) {\r\n      this._tables.splice(index, 1);\r\n    }\r\n  }\r\n\r\n\r\n}"]}