{"version":3,"sources":["node_modules/_browser-pack@6.1.0@browser-pack/_prelude.js","src/game/game.ts","src/game/index.ts","src/game/scenes.ts","src/main.ts","src/veryengine/action/actionBehaviour.ts","src/veryengine/action/actions.ts","src/veryengine/action/assignment.ts","src/veryengine/action/assignmentTypeJudge.ts","src/veryengine/action/index.ts","src/veryengine/babylon/babylonVariables.ts","src/veryengine/babylon/engine.ts","src/veryengine/babylon/index.ts","src/veryengine/babylon/time.ts","src/veryengine/dataSource/dataSource.ts","src/veryengine/dataSource/fsmData.ts","src/veryengine/dataSource/index.ts","src/veryengine/dataSource/stateActionData.ts","src/veryengine/dataSource/stateData.ts","src/veryengine/dataSource/stateTriggerData.ts","src/veryengine/dataSource/variableData.ts","src/veryengine/enum/enumTypes.ts","src/veryengine/enum/index.ts","src/veryengine/expression/expChar.ts","src/veryengine/expression/expManager.ts","src/veryengine/expression/expressionEnum.ts","src/veryengine/expression/expressionParsing.ts","src/veryengine/expression/expressions.ts","src/veryengine/expression/forwardQuery.ts","src/veryengine/expression/functionExpression.ts","src/veryengine/expression/functions.ts","src/veryengine/expression/index.ts","src/veryengine/expression/positions.ts","src/veryengine/expression/scope.ts","src/veryengine/expression/token.ts","src/veryengine/expression/tokenReader.ts","src/veryengine/expression/tokenizer.ts","src/veryengine/expression/variable.ts","src/veryengine/expression/variableExpression.ts","src/veryengine/expression/veryExpressions.ts","src/veryengine/global/errorManager.ts","src/veryengine/global/gameGlobal.ts","src/veryengine/global/index.ts","src/veryengine/global/triggerGlobal.ts","src/veryengine/html/index.ts","src/veryengine/html/showError.ts","src/veryengine/index.ts","src/veryengine/library/action/action-debug.ts","src/veryengine/library/action/action-math.ts","src/veryengine/library/action/action-template.ts","src/veryengine/library/action/action-transform.ts","src/veryengine/library/action/action-vector3.ts","src/veryengine/library/action/action_time.ts","src/veryengine/library/action/index.ts","src/veryengine/library/trigger/index.ts","src/veryengine/library/trigger/trigger-collision.ts","src/veryengine/library/trigger/trigger-input.ts","src/veryengine/library/trigger/trigger-system.ts","src/veryengine/loader/createInstance.ts","src/veryengine/loader/index.ts","src/veryengine/loader/loaderManager.ts","src/veryengine/manager/index.ts","src/veryengine/manager/manager.ts","src/veryengine/manager/projects.ts","src/veryengine/manager/reset.ts","src/veryengine/object/index.ts","src/veryengine/object/objects.ts","src/veryengine/object/veryengineObject.ts","src/veryengine/scene/index.ts","src/veryengine/scene/verySceneVariables.ts","src/veryengine/state/associatedState.ts","src/veryengine/state/fsm.ts","src/veryengine/state/index.ts","src/veryengine/state/sequenceActions.ts","src/veryengine/state/state.ts","src/veryengine/state/stateAction.ts","src/veryengine/state/stateConst.ts","src/veryengine/template/index.ts","src/veryengine/template/template.ts","src/veryengine/template/templates.ts","src/veryengine/trigger/customTriggerManager.ts","src/veryengine/trigger/index.ts","src/veryengine/trigger/triggerBehaviour.ts","src/veryengine/trigger/triggers.ts","src/veryengine/utility/arrayUtility.ts","src/veryengine/utility/dictionary.ts","src/veryengine/utility/errorInfo.ts","src/veryengine/utility/index.ts","src/veryengine/utility/keyboardMap.ts","src/veryengine/utility/mathUtility.ts","src/veryengine/utility/paraParserUtility.ts","src/veryengine/utility/stringFormat.ts","src/veryengine/utility/typeConvert.ts","src/veryengine/utility/veryParas.ts","src/veryengine/variables/index.ts","src/veryengine/variables/varTools.ts","src/veryengine/variables/variables.ts","src/veryengine/variables/veryExpression.ts","src/veryengine/variables/veryVarManager.ts","src/veryengine/variables/veryVariables.ts","src/veryengine/veryEngine.ts","src/verytable/index.ts","src/verytable/veryTable.ts","src/verytable/veryTableRow.ts","src/verytable/veryTableSet.ts"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","veryEngine_1","babylon_1","Game","canvasElement","fps","this","_showFps","_canvas","BabylonEngine","Canvas","_fps","_table","document","getElementById","prototype","createScene","_engine","VE_Manager","dispose","BABYLON","Engine","engine","window","addEventListener","resize","_scene","Scene","Time","start","camera","ArcRotateCamera","Vector3","setPosition","attachControl","lowerBetaLimit","upperBetaLimit","Math","PI","lowerRadiusLimit","hideLoadingUI","SceneLoader","Append","scene","entrance","VeryEngine","console","log","hot1","countEmptyRows","init","getData","projectName","error","objects","onBeforeRenderObservable","add","count","objectID","getObjectID","getVeryObject","update","animate","_this","runRenderLoop","width","clientWidth","render","updateFpsPos","toggleDebug","scenes","debugLayer","isVisible","hide","show","embedMode","style","right","body","innerHTML","getFps","toFixed","__export","Scenes","game","game_1","dataLoaded","canvas","fpsLabel","initGame","setTimeout","enum_1","VE_ActionBehaviour","_enabled","_projectName","gameObject","veryObject","_objectID","_actionID","_erveryFrame","isSequence","_sequenceState","SequenceActionState","Initial","_sequenceAction","Object","defineProperty","val","ActionType","Normal","set","setEveryFrame","is_every_frame","setActionID","project_name","object_id","action_id","setVeryObject","very_object","action","action_val","every_frame","active","onUpdate","sequenceAction","sequence","Running","pause","Pause","resume","stop","finish","finishAction","enabled","state_1","manager_1","global_1","utility_1","VE_Actions","addAction","action_class","GameGlobal","PlatformLoaded","tempAction","constructor","ids","ID","split","id","trim","toLowerCase","_actionFunctionDics","VE_ErrorManager","Add","VE_Error","className","Severity","hasAction","createAction","action_type","action_para","init_val","error_info","isRight","message","variable","paraParser","clear","everyFrameFlag","VE_TypeConvert","boolConvert","remove","findAction","isCreatedAction","getAction","actionArray","StateConst","STATE_SEPARATOR","actionID","isCreated","otherObject","html_1","assignmentTypeJudge_1","VE_Assignment","state","total_string","_totalStr","_leftType","AssignType","Variable","_rightType","_leftVariable","_leftTemplate","_leftVarID","_rightConstStr","_rightConstValue","_rightVariable","_rightTemplate","_rightVarID","_pos","_state","setPos","pos","setLeftVariable","setLeftTemplate","template","Template","setLeftTemplateVar","var_id","TemplateVariable","setRightVariable","setRightTemplate","setRightNull","setRightTemplateVariable","setRightConst","const_str","Const","setRightConstValue","const_value","assign","rightAssignment","unload","templateInstance","ShowError","showError","Fsm","fsmID","templateVarID","isCreatedExpression","isCreatedVariable","getVariable","isCreatedFsm","getFsm","fsmVar","setValue","getValue","errorInfo","ErrorInfo","initValue","exp","getExpression","VE_AssignmentTypeJudge","allowExpression","evaluate","v","allow","first","second","varType","expType","engine_1","GameObject","name","mesh","node","_transform","Transform","transform","isEmpty","Find","getNodeByName","AbstractMesh","TransformNode","getClassName","Destroy","obj","destroy","CreateInstance","game_object","Mesh","createInstance","sourceMesh","transformNode","clone","_transformNode","_mesh","_name","_tempVec","Zero","_parent","forward","Forward","localScale","tempParent","parent","setParent","copyFrom","position","getAbsolutePosition","setAbsolutePosition","para","rotation","multiplyByFloats","parent_1","result","parent_2","parent_3","parent_4","translate","translation","relativeTo","translateRelativeTo","trans","direction","transformDirection","Space","WORLD","transformPosition","local_position","matrix","computeWorldMatrix","TransformCoordinates","local_direction","subtract","inverseTransformPosition","global_position","Matrix","Invert","inverseTransformDirection","global_direction","pointA","pointOrigin","getFrameId","getDeltaTime","_startDate","Date","_startSecond","valueOf","fsmData_1","VE_DataSource","name_id","is_template","_templateID","_isTemplate","_fsmIDs","_fsmDic","_fsmPosDic","_triggerIDs","_triggerDic","_triggerPosDic","_actionIDs","_actionDic","_actionInitValue","_actionPosDic","fsm_id","createFsm","push","VE_FsmData","getFsmData","getFsmPos","hasFsmIndex","index","getFsmID","isCreatedTrigger","trigger_id","addTrigger","trigger_data","getTrigger","getTriggerPos","hasTriggerIndex","getTriggerID","getTriggerPara","action_data","action_init_val","getActionPara","getActionPos","getActionInitVal","hasActionIndex","getActionID","data_source","_fsmType","_initialValStr","_states","_dataSource","_fsmID","initFsm","fsm_type","initial_var","addState","state_data","getStateData","VE_StateActionData","type","StateActionType","Action","totalString","varID","varValue","everyFrame","setNormalAction","setAssignmentAction","var_value","Assignment","VE_StateData","fsm_data","val_str","is_initial_value","logicalExp","rowIndex","_triggers","_triggersPos","_actions","_actionsPos","_associatedStates","_associatedStatesPos","_isSequence","_fsmData","_valStr","_isInitialValue","hasTrigger","hasAssociatedState","addAssociatedState","associated_state_data","getAssociatedState","getAssociatedStatePos","setSequence","VE_StateTriggerData","triggerID","logicalSwitch","VE_VariableData","_variableIDs","_varDics","_varPosDic","addVariable","var_paras","getVariableID","getVariableParas","getPos","AssignmentType","AssociatedFsmType","VariableScope","ParaType","ExpChar","value","line","_value","_line","getLine","isDigit","test","isLetterOrCharactor","escape","indexOf","isWhiteSpace","isNewLine","isEndOfInput","is","_i","arguments","toString","scope_1","positions_1","expressionParsing_1","ExpManager","_scope","Scope","Create","_expVariable","createVariable","errors","ParseError","NameLocation","setVariable","createExpression","exp_str","VE_ExpressionParsing","parsing","find","printError","ExpressionType","tokenizer_1","expressions_1","expressionEnum_1","functionExpression_1","functions_1","variableExpression_1","veryExpressions_1","_bracketPair","input_exp","scope","var_scope","_varScope","replace","_tokenizer","Tokenizer","parse","str","resultExp","buildExpression","current","isEnd","addError","getSource","consume","getProblemCollector","left","relationalExp","isOperator","reOrder","BinaryOperator","Or","algebraExp","LT","LT_EQ","EQ","GT_EQ","GT","NEQ","productExp","Subtract","exponentExp","Multiply","Divide","Modulo","atomExp","BinaryExpression","Not","ConstantExpression","setSeal","next","isIdentifier","isKeyword","isStartBracket","newValue","Empty","isConstant","getContents","varExpression","VE_Expressions","getParseExpression","getTemplateExpression","endBracket","expectTrigger","OPERATOR","typeStr","isBool","isNumber","parseFloat","endStart","functionCall","loc","variableID","endsWith","VariableExpression","VeryTemplateExpression","fsm","VeryVarExpression","isSpecialIdentifier","op","rightOp","isSealed","getPriority","getPriorityOp","replaceLeft","target","newLeft","getLeftExp","leftOp","setLeftExp","end_bracket","FunctionExpression","funcToken","CustomFunctions","hasFunction","fun","createFunction","setFunction","paraCount","addPara","parameterNumber","trigger","matches","getProjectCollector","Local","dictionary_1","template_1","TrueExpression","_expType","left_exp","right_exp","_op","_isSealed","_left","_right","resultAutoType","_opDic","Power","And","_priority","setRightExp","getOp","getRightExp","leftValue","rightValue","pow","l","getBoolean","x","y","z","Vector2","GetValue","Dictionary","_template","VE_Template","setTemplate","varExp","ForwardQuery","itemBuffer","endReached","problemCollector","endOfInputIndicator","undefined","nextOffset","offset","item","fetch","endOfInput","consumeNext","numberOfItems","shift","setProblemCollector","_paras","_function","func","expClone","printStr","Pow","args","NaN","Ln","Infinity","Lg","log10","Sqrt","sqrt","Abs","abs","Random","distance","random","Round","round","Sin","sin","ASin","asin","Cos","cos","ACos","acos","Tan","tan","ATan","atan","func_name","_functionsDic","addFunction","tempFunc","funcName","SeverityExp","msg","severity","_message","_severity","Warning","getPosition","getMessage","getSeverity","variable_1","_context","GetRootScope","_root","makeConstant","E","CreateWithParent","setType","Token","STRING","_source","_contents","_trigger","CreateAndFill","ch","addToTrigger","addToSource","addToContentChar","addToContent","getTokenType","setTokenType","new_type","setTrigger","setContent","content","setSource","source","EOI","symbols","isEndBracket","isStartSquareBracket","isEndSquareBracket","isStartBrace","isEndBrace","keywords","KEYWORD","values","triggers","SPECIAL_ID","isSpecialIdentifierWithContent","contents","NUMBER","BOOL","isString","forwardQuery_1","expChar_1","TokenReader","_super","_inputExp","_count","_operator","__extends","readChar","token_1","tokenReader_1","_decimalSeparator","_lineComment","_blockCommentStart","_blockCommentEnd","_brackets","_treatSinglePipeAsBracket","_specialIdStarters","_specialIdTerminators","_keywords","_keywordsCaseSensitive","_stringDelimiters","_boolConstant","isAtStartOfLineComment","skipToEndOfLine","isAtStartOfBlockComment","skipBlockComment","isAtStartOfNumber","fetchNumber","isAtStartOfIdentifier","fetchId","fetchString","isAtBracket","isAtStartOfSpecialId","fetchSpecialId","fetchOperator","hasDecimal","isIdentifierChar","specialId","handleKeywords","separator","canConsumeThisString","check_string","isAtEndOfBlockComment","in_symbol","id_token","keyword","keywordToken","addWarning","_constant","getName","scene_1","createSceneExpression","expression_str","sceneExp","errorMessage","createGlobalExpression","globalExp","Global","createLocalExpression","localExp","createFsmExpression","fsmExp","varArray","substring","startsWith","VARIABLE_SYMBOL","getParseGlobal","getParseScene","variables","VerySceneVariables","Variables","errorStr","isCreatedTemplate","getTemplate","table_name","_tableName","warning","getTableName","_errorList","GetError","Print","prefix","splice","warn","PrintWarnning","PrintError","TriggerGlobal","Init","AddKeyboard","key","_scenes","onKeyboardObservable","kbInfo","KeyboardEventTypes","KEYDOWN","_keyUpdate","event","_triggerList","RemoveKeyboard","KeyboardUpdate","_keysDic","unionID","clearProject","KEYMAP","_initialized","initZone","errorZone","showMsg","error_msg","errorContentNow","errorContentPrefix","display","closeBtn","querySelector","that","showWarn","close","TypeVar","action_1","variables_1","Action_Debug","apply","_debugMode","_typeList","_veryVarDic","_templateDic","_constDic","_separator","_strBuilder","VeryVar","para_array","ParaParserUtility","ParaNumbers","debugArray","VarTools","IsVarID","veryVar","GetVeryVarWithExpression","GetTemplate","Action_Float_Interpolate","_switch","_timer","_isLinear","_startFloat","VeryNumber","_endFloat","_timeFloat","_resultFloat","Animation","timesUp","deltaTime","FloatUitlity","Lerp","SLerp","para2","VeryParas","NumberParaWithExpression","number","para3","para4","para5","NumberParaOnlyVar","Action_CreateTemplateInstance","_templateVarID","_deriveID","VeryString","_objectInfo","_ref","VeryGameObject","_position","VeryVector3","_posX","_posY","_posZ","_isPositionVec","_angle","_angleX","_angleY","_angleZ","_isAngleVec","_destoryOnCreateNew","VeryBool","templates","emptyAngle","localEulerAngles","eulerAngles","StringParaWithExpression","string","GameObjectPara","Vector3OrNumberParaWithExpression","isVec","vector3","vecNumbers","para6","para7","BoolParaWithExpression","bool","Action_DestroyTemplateInstance","_isInstance","_instance","_templateStr","_deleteAllTemplates","unloadInstance","instances","backupInstances","forEach","Action_SetPosition","_posvalue","_posVec","_space","LOCAL","_isVec","_x","_y","_z","_axis","_trans","localPosition","oriFather","para1","BONE","Action_Translate","_refType","_translateObj","_refObj","_isDeltaTime","_vecVar","_xVar","_yVar","_zVar","_paraTime","_paraVec","Action_Vector3_Interpolate","_acceptVec","_isVec1","_vecUnit1","_vecFloat1","_isVec2","_vecUnit2","_vecFloat2","vec1","vec2","Vector3Utility","Slerp","Vector3Para","trigger_1","Action_Timer","_timerEvent","_mutiple","_totalTime","timeSet","timer","VeryTimeControl","time","reset","isTimesUp","triggerArray","VE_CustomTriggerManager","ConnectCustomTrigger","setCallback","callback","start_time","_startTime","_timeRecorder","current_time","Action_Wait","_waitTime","Trigger_MouseOver","_target","_observer","Trigger","enablePointerMoveEvents","onPointerObservable","pointInfo","PointerEventTypes","POINTERMOVE","pickInfo","pickedMesh","sendEvent","VE_TriggerBehaviour","VE_Triggers","index_1","Trigger_MouseDown","_mouseButtonIndex","_downFlag","POINTERDOWN","button","POINTERUP","Trigger_MouseUp","Trigger_MouseButton","_mouseUpdate","Trigger_Keyboard","_keyboard","VE_KeyboardMap","GetKey","Trigger_KeyDown","Trigger_KeyUp","Trigger_KeyboardCombine","_keyboards","_lastKey","all","Trigger_Start","Trigger_Continuous","Trigger_Custom","customEvent","expression_1","createProject","globalVars","varData","varPara","VeryVarManager","hasVarType","newVar","addTemplate","addExpression","k","dataSource","fsmCount","fsmData","initialValStr","VE_Fsm","addFsm","triggerCount","triggerPara","createTrigger","slice","AddTriggerEvent","actionCount","actionPara","stateData","hasStateValue","ValStr","VE_State","setConstValue","logicalAssociated","s","triggerData","triggerPos","findTrigger","addTriggerTarget","addLogicalSwitch","actionData","actionPos","enableVar","enableStr","everyFrameVar","everyFrameStr","isSequenceStr","stateAction","VE_StateAction","setAction","assignmentAction","getStateInSequence","associatedStateCount","associatedStateInfo","associatedPos","associatedState","VE_AssociatedState","multipleAssociatedState","www","stateValue","STATE_VALUE","strArray","aFsmID","stateArray","q","aObject","aObjectID","aFsm","toState","getState","global_vars","assignment","valArray","tObject","varParas","VE_StringFormat","isFormulaString","AssignmentFormulaCount","AssignmentPrefix","VeryExpression","rightVar","rightTemplate","leftType","leftVariable","setAssignment","object_name","destroy_on_create_new","AnalisysType","object_1","dataSource_1","createInstance_1","LoaderManager","_currentType","_lastFsmID","_lastObjectID","_activeTemplate","_activeObject","_activeFsmData","_activeStateData","_emptyLine","load","table","RowCount","getRow","templateID","isIDLegal","objName","nameArray","activeGameObject","tempObject","VeryEngineObject","paraData","paraSegment","paraArray","para2Array","hasState","StateCount","TriggerCount","idTemp","tempStr","newActionID","LogCount","equalIndex","actionNames","ActionCount","projects_1","_projects","VE_Projects","projects","addProject","isCreatedObjects","addObjects","VE_Objects","isCreatedTemplates","addTemplates","VE_Templates","isCreatedVariables","addVariables","VE_Variables","globalVarData","isCreatedGlobals","getGlobalVars","getTemplates","getVariables","getObjects","_objects","_variables","_templates","disposeProject","sleep","VE_Reset","addClear","_clearTotal","addProjectClear","_clearProject","_objectIDs","_objectDics","unloadObject","ArrayUtility","_expressions","_fsms","_unloadCallback","exp_id","expression","template_id","isCreatedVar","keys","setUnloadCallback","_hasLoaded","initIfNeeded","stateConst_1","from_state","_types","_indexs","_posArray","_stateValues","_templateFsmIDs","_fromState","state_value","connect","currentType","Key","ASSOCIATED_STATE_PREFIX","fsm_variable","_id","_stateDics","_frameCount","_fsmVar","_veryObject","isCreatedState","state_index","Value","removeState","receiveEvent","VE_SequenceActions","_activeActionIndex","_stateActions","_activeActions","actions","associated_states","SequenceState","Prepared","activate","checkActionsFinished","start_index","StateActions","ActiveActions","actionRecover","AssociatedStates","stateAction_1","sequenceActions_1","_assignmentType","_isTemplateVar","_varID","_templateVar","_assignmentStr","_logicalExpression","_index","_stateVariable","_sequenceActions","_fsm","setInitialValue","setLogicalExpression","logical_exp","setTemplateInfo","assign_str","setStateVariable","very_var","state_action","addAssignment","associated_state","getTemplateVar","_type","_action","_assignment","_everyFrame","STATE_INDEX","_counter","instanceArray","activeCount","addInstance","instance_obj","increase","all_instance","pop","instance","template_var_id","cloneTemplate","_instanceDic","_instanceArray","isCreatedInstance","getInstance","destory_on_create_new","errorPos","hasCreated","newObjectID","counter","bind","aTemplate","timer_event","_customTriggerStore","_delayAction","set_callback","_logicalSwitch","_logicalExp","_triggerTargets","_triggerID","isEnabled","setTriggerID","eventProcess","trigger_class","tempTrigger","_triggerFunctionDics","trigger_type","trigger_para","arr","ele","_keys","_values","Count","Remove","SetValue","ContainsKey","ks","GetKeys","GetValues","_keyMap","key_str","end","errorInfo_1","typeConvert_1","para_type","current_number","required_number","requiredStr","paras","var_str","GetVeryVar","vString","GameObjectParaOnlyVar","StringPara","StringParaOnlyVar","setExpression","NumberPara","isNaN","BoolPara","BoolParaOnlyVar","Vector3OrNumberPara","floatsArray","privateNumberPara","Vector3ParaWithExpression","privateNumberParaWithExpression","privateNumberParaOnlyVar","_escapeCharacters","_illegalChar","_formulaChar","strEscapeCharacterAction","para_str","tmpStr","getEscapeCharacter","strSubsectionAction","strBuilder","rStr","bracketFlag","hasQuote","para_char","getEscapeCharacter2","is_escape","strSubsection","needSpace","getParaArrayAll","coloneStr","newPara","j","innerBracket","saveBracket","quotationMark","isEscape","needSaveBracket","hasBracket","info","intConvert","num","floatConvert","veryExpression_1","GetGlobalVar","GetSceneVar","GetGlobalVarWithExpression","GetSceneVarWithExpression","_veryVars","_tempalteVars","value_str","newVal","var_type","_veryVarFunctions","addVarType","var_function","tempVar","getVarType","getSceneVariable","getGlobalVariable","getTemplateVariable","veryVarManager_1","babylonVariables_1","_isExpression","_expression","varClone","rValue","vec3Str","n1","n2","n3","showError_1","loaderManager_1","data","tableData","VeryTable","showErrorTest","veryTableRow_1","_columnIDs","_rows","newRow","VeryTableRow","row_index","column_index","getColumnID","floor","b","addRow","row_data","_rowData","array","insert","tempData","removeEnd","VeryTableSet","tables","_tables","getTable","addTable","removeTable"],"mappings":"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","file":"veryengine.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","///// <reference path=\"./dts/babylon.d.ts\"/>\r\n\r\nimport { VeryEngine, VE_Objects, VE_Manager } from \"../veryengine/veryEngine\";\r\n\r\nimport { BabylonEngine, Time } from \"../veryengine/babylon\";\r\n\r\nexport class Game {\r\n\tprivate _canvas: HTMLCanvasElement;\r\n\tprivate _fps: HTMLElement;\r\n\tprivate _table!: HTMLElement;\r\n\tprivate _showFps: boolean = true;\r\n\tprivate _engine!: BABYLON.Engine;\r\n\tprivate _scene!: BABYLON.Scene;\r\n\t// private _camera!: BABYLON.FreeCamera;\r\n\r\n\tconstructor(canvasElement: HTMLCanvasElement, fps: HTMLElement) {\r\n\t\tthis._canvas = canvasElement;\r\n\t\tBabylonEngine.Canvas = this._canvas;\r\n\t\tthis._fps = fps;\r\n\t\t// this._engine = new BABYLON.Engine(this._canvas, true);\r\n\t\tthis._table = document.getElementById(\"VeryTable\")!;\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\tcreateScene(): Game {\r\n\t\t// TODO\r\n\r\n\t\t// 1glTFbabylonjs\r\n\t\t// 2scene\r\n\t\t// Project:\r\n\t\t//\tproject-settings;\r\n\t\t//\tscenes:\r\n\t\t//\t\tScene1:\r\n\t\t//\t\t\tGameObjects\r\n\t\t// \r\n\t\t// \r\n\r\n\r\n\r\n\t\t// engine\r\n\t\tif (this._engine) {\r\n\t\t\t// TODO: dispose\r\n\t\t\tVE_Manager.dispose();\r\n\t\t\t// console.log(VE_Manager.projects.projects);\r\n\t\t\tthis._engine.dispose();\r\n\t\t}\r\n\t\tthis._engine = new BABYLON.Engine(this._canvas, true);\r\n\t\tBabylonEngine.Engine = this._engine;\r\n\t\t// Resize\r\n\t\tlet engine = this._engine;\r\n\t\twindow.addEventListener(\"resize\", function () {\r\n\t\t\tengine.resize();\r\n\t\t});\r\n\r\n\t\tthis._scene = new BABYLON.Scene(this._engine);\r\n\t\tBabylonEngine.Scene = this._scene;\r\n\t\tTime.start();\r\n\r\n\t\t// TODO: \r\n\t\tvar camera = new BABYLON.ArcRotateCamera(\"MainCamera\", 0, 0, 10, new BABYLON.Vector3(0, 0, 0), this._scene);\r\n\t\tcamera.setPosition(new BABYLON.Vector3(20, 200, 400));\r\n\t\tcamera.attachControl(this._canvas, true);\r\n\t\tcamera.lowerBetaLimit = 0.1;\r\n\t\tcamera.upperBetaLimit = (Math.PI / 2) * 0.99;\r\n\t\tcamera.lowerRadiusLimit = 150;\r\n\r\n\t\tlet inputMap: { [key: string]: boolean } = {};\r\n\r\n\t\t// TODO: \r\n\t\tengine.hideLoadingUI();\r\n\t\t// engine.displayLoadingUI();\r\n\r\n\t\t// TODO: scene.babylon\r\n\t\tBABYLON.SceneLoader.Append(\"./scene/\", \"scene.babylon\", this._scene, function (scene) {\r\n\t\t\t// do something with the scene\r\n\t\t\t// \r\n\t\t\t// engine.hideLoadingUI();\r\n\r\n\t\t\t// Keyboard events\r\n\t\t\t// var blue = scene.getMeshByName('blue')!;\r\n\r\n\t\t\t// scene.actionManager = new BABYLON.ActionManager(scene);\r\n\t\t\t// scene.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnKeyDownTrigger, function (evt) {\r\n\t\t\t// \tinputMap[evt.sourceEvent.key] = evt.sourceEvent.type == \"keydown\";\r\n\t\t\t// }));\r\n\t\t\t// scene.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnKeyUpTrigger, function (evt) {\r\n\t\t\t// \tinputMap[evt.sourceEvent.key] = evt.sourceEvent.type == \"keydown\";\r\n\t\t\t// }));\r\n\r\n\r\n\t\t\t// // Game/Render loop\r\n\t\t\t// scene.onBeforeRenderObservable.add(() => {\r\n\r\n\t\t\t// \tif (inputMap[\"w\"] || inputMap[\"ArrowUp\"]) {\r\n\t\t\t// \t\tblue.position.z -= 100 * engine.getDeltaTime() / 1000;\r\n\t\t\t// \t}\r\n\t\t\t// \tif (inputMap[\"a\"] || inputMap[\"ArrowLeft\"]) {\r\n\t\t\t// \t\tblue.position.x += 100 * engine.getDeltaTime() / 1000;\r\n\t\t\t// \t}\r\n\t\t\t// \tif (inputMap[\"s\"] || inputMap[\"ArrowDown\"]) {\r\n\t\t\t// \t\tblue.position.z += 100 * engine.getDeltaTime() / 1000;\r\n\t\t\t// \t}\r\n\t\t\t// \tif (inputMap[\"d\"] || inputMap[\"ArrowRight\"]) {\r\n\t\t\t// \t\tblue.position.x -= 100 * engine.getDeltaTime() / 1000;\r\n\t\t\t// \t}\r\n\t\t\t// })\r\n\r\n\t\t\t// // sphere\r\n\t\t\t// var sphere = scene.getMeshByName('sphere')!;\r\n\t\t\t// sphere.actionManager = new BABYLON.ActionManager(scene);\r\n\r\n\t\t\t// sphere.actionManager.registerAction(new BABYLON.SetValueAction(\r\n\t\t\t// \t{ trigger: BABYLON.ActionManager.OnIntersectionEnterTrigger, parameter: blue },\r\n\t\t\t// \tsphere, \"scaling\", new BABYLON.Vector3(2, 2, 2)));\r\n\r\n\t\t\t// sphere.actionManager.registerAction(new BABYLON.SetValueAction(\r\n\t\t\t// \t{ trigger: BABYLON.ActionManager.OnIntersectionExitTrigger, parameter: blue }\r\n\t\t\t// \t, sphere, \"scaling\", new BABYLON.Vector3(1, 1, 1)));\r\n\r\n\t\t\t// TODO: \r\n\t\t\t// console.log(hot1.getData());\r\n\t\t\tlet entrance: VeryEngine = new VeryEngine();\r\n\t\t\tconsole.log(`${hot1.countEmptyRows()}`);\r\n\t\t\ttry {\r\n\t\t\t\tentrance.init(hot1.getData(), projectName);\r\n\t\t\t} catch (e) { // TODO: \r\n\t\t\t\tconsole.error(e);\r\n\t\t\t}\r\n\r\n\t\t\tlet objects: VE_Objects = VE_Manager.objects(projectName);\r\n\t\t\t// \r\n\t\t\tscene.onBeforeRenderObservable.add(() => {\r\n\t\t\t\t// \r\n\t\t\t\t// Time._sum();\r\n\r\n\t\t\t\t// \r\n\t\t\t\tfor (let i: number = 0; i < objects.count; i++) {\r\n\t\t\t\t\tlet objectID: string = objects.getObjectID(i);\r\n\t\t\t\t\tobjects.getVeryObject(objectID).update();\r\n\t\t\t\t}\r\n\r\n\t\t\t})\r\n\r\n\r\n\t\t});\r\n\r\n\r\n\t\t// const lightPos = new BABYLON.Vector3(0, 1, 0);\r\n\t\t// new BABYLON.HemisphericLight('hemlight', lightPos, this._scene);\r\n\r\n\t\t// const sphereOpts = { segments: 16, diameter: 1 };\r\n\t\t// let sphere = BABYLON.MeshBuilder.CreateSphere(\r\n\t\t// \t'mainsphere',\r\n\t\t// \tsphereOpts,\r\n\t\t// \tthis._scene\r\n\t\t// );\r\n\t\t// sphere.position.y = 1;\r\n\r\n\t\t// const groundOpts = { width: 6, height: 6, subdivisions: 2 };\r\n\t\t// BABYLON.MeshBuilder.CreateGround('mainground', groundOpts, this._scene);\r\n\r\n\r\n\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\tanimate(): Game {\r\n\t\tthis._engine.runRenderLoop(() => {\r\n\t\t\tif (this._canvas.width !== this._canvas.clientWidth) {\r\n\t\t\t\tthis._engine.resize();\r\n\t\t\t}\r\n\r\n\t\t\tif (this._scene) {\r\n\t\t\t\tthis._scene.render();\r\n\t\t\t}\r\n\r\n\t\t\tif (this._showFps) {\r\n\t\t\t\tthis.updateFpsPos();\r\n\t\t\t}\r\n\r\n\r\n\t\t});\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * UI\r\n\t */\r\n\ttoggleDebug(): Game {\r\n\t\tif (this._engine) {\r\n\t\t\t// Always showing the debug layer, because you can close it by itself\r\n\t\t\tvar scene = this._engine.scenes[0];\r\n\t\t\tif (scene.debugLayer.isVisible()) {\r\n\t\t\t\tscene.debugLayer.hide();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// babylon.d.ts\r\n\t\t\t\tscene.debugLayer.show({ embedMode: true });\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * fps\r\n\t */\r\n\tupdateFpsPos(): void {\r\n\t\tif (this._fps) {\r\n\t\t\tthis._fps.style.right = document.body.clientWidth - (this._table.clientWidth + this._canvas.clientWidth) + \"px\";\r\n\r\n\t\t\tthis._fps.innerHTML = this._engine.getFps().toFixed() + \" fps\";\r\n\t\t}\r\n\t}\r\n}\r\n","export * from './game';\r\nexport * from './scenes';","export class Scenes {\r\n\r\n\r\n\r\n  public constructor() {\r\n    // connect to server\r\n    // load project data\r\n    // analysis data\r\n    // load original model\r\n    // load scene object from original model\r\n    \r\n  }\r\n\r\n\r\n\r\n\r\n}","\r\n\r\nimport { Game } from \"./game\";\r\n\r\nlet game!: Game;\r\nlet initFlag: boolean = false;\r\n\r\n/**\r\n * \r\n */\r\nfunction initGame(): void {\r\n  let canvas = <HTMLCanvasElement>document.getElementById(\"renderCanvas\");\r\n  let fpsLabel = document.getElementById(\"fpsLabel\");\r\n  if (canvas !== null && fpsLabel !== null) {\r\n    game = new Game(canvas, fpsLabel);\r\n    game.createScene().animate();  // \r\n  }\r\n}\r\n\r\nfunction runBtn(): void {\r\n  if (game) {\r\n    game.createScene().animate();\r\n  }\r\n}\r\n\r\nfunction toggleDebug(): void {\r\n  if (game) {\r\n    game.toggleDebug();\r\n  }\r\n}\r\n\r\nfunction init(): void {\r\n  // \r\n  if (dataLoaded) {\r\n    initGame();\r\n  } else {\r\n    setTimeout(init, 500);\r\n  }\r\n}\r\n\r\n// \r\ndocument.getElementById(\"runButton\")!.addEventListener(\"click\", runBtn);\r\n\r\n// \r\ndocument.getElementById(\"debugButton\")!.addEventListener(\"click\", toggleDebug);\r\n\r\n// \r\n// \r\ninit();\r\n// loadData2()\r\n//   .then(function (hot: HandTable) {\r\n//     console.log(hot.getData());\r\n//   }\r\n//   );\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import { ActionType, SequenceActionState } from \"../enum\";\r\nimport { GameObject } from \"../babylon\";\r\nimport { VeryEngineObject } from \"../object\";\r\nimport { VE_SequenceActions } from \"../state\";\r\n\r\nexport abstract class VE_ActionBehaviour {\r\n\r\n  /**\r\n   * IDIDID|\r\n   */\r\n  public abstract get ID(): string;\r\n\r\n  /**\r\n   * \r\n   */\r\n  public abstract get className(): string;\r\n\r\n  /**\r\n   * \r\n   */\r\n  public get scene(): BABYLON.Scene {\r\n    return this._scene;\r\n  }\r\n  private _scene!: BABYLON.Scene;\r\n\r\n  /**\r\n   * \r\n   */\r\n  public get enabled(): boolean {\r\n    return this._enabled;\r\n  }\r\n  public set enabled(val: boolean) {\r\n    this._enabled = val;\r\n  }\r\n  private _enabled: boolean = true;\r\n\r\n  /**\r\n   * \r\n   */\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  };\r\n  private _projectName: string = '';\r\n\r\n  /**\r\n   * GameObject\r\n   */\r\n  protected gameObject: Nullable<GameObject> = null;\r\n\r\n  /**\r\n   * \r\n   */\r\n  protected veryObject: Nullable<VeryEngineObject> = null;\r\n\r\n  /**\r\n   * \r\n   */\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  };\r\n  private _objectID: string = '';\r\n\r\n  /**\r\n   * \r\n   */\r\n  public get actionID(): string {\r\n    return this._actionID;\r\n  }\r\n  private _actionID: string = '';\r\n\r\n  /**\r\n   * \r\n   */\r\n  public get type(): ActionType {\r\n    return ActionType.Normal;\r\n  }\r\n\r\n  private _erveryFrame: boolean = false;\r\n  /**\r\n   * \r\n   */\r\n  public get everyFrame(): boolean {\r\n    return this._erveryFrame;\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public isSequence: boolean = false;\r\n\r\n  /**\r\n   * \r\n   */\r\n  public get SequenceState(): SequenceActionState {\r\n    return this._sequenceState;\r\n  }\r\n  public set SequenceState(val: SequenceActionState) {\r\n    this._sequenceState = val;\r\n  }\r\n  private _sequenceState: SequenceActionState = SequenceActionState.Initial;\r\n\r\n  private _sequenceAction: Nullable<VE_SequenceActions> = null;\r\n\r\n  /**\r\n   * \r\n   * @param scene \r\n   */\r\n  public set(scene: BABYLON.Scene): void {\r\n    this._scene = scene;\r\n  }\r\n\r\n  public setEveryFrame(is_every_frame: boolean): void {\r\n    this._erveryFrame = is_every_frame;\r\n  }\r\n\r\n  public setActionID(project_name: string, object_id: string, action_id: string): void {\r\n    this._projectName = project_name;\r\n    this._objectID = object_id;\r\n    this._actionID = action_id;\r\n  }\r\n\r\n  public setVeryObject(very_object: VeryEngineObject): void {\r\n    this.veryObject = very_object;\r\n    this.gameObject = very_object.gameObject;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param para_array 1ID2\r\n   */\r\n  public abstract paraParser(para_array: string[]): boolean;\r\n\r\n  /**\r\n   * \r\n   * @param action_val /\r\n   * @param every_frame \r\n   */\r\n  public action(action_val: boolean, every_frame: boolean): void {\r\n    this._enabled = action_val;\r\n    this._erveryFrame = every_frame;\r\n    if (this._enabled) {\r\n      this.active()\r\n      if (!this._erveryFrame) {\r\n        this.onUpdate();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param sequence \r\n   * @param action_val /\r\n   * @param every_frame \r\n   */\r\n  public sequenceAction(sequence: VE_SequenceActions, action_val: boolean, every_frame: boolean): void {\r\n    this._sequenceAction = sequence;\r\n    this._sequenceState = SequenceActionState.Running;\r\n    this.action(action_val, every_frame);\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public abstract active(): void;\r\n\r\n  /**\r\n   * UnityUpdateupdateeveryFrame\r\n   */\r\n  public update(): void {\r\n    if (this._enabled && this._erveryFrame) {\r\n      this.onUpdate();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * everyFrame\r\n   */\r\n  public onUpdate(): void {\r\n\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public pause(): void {\r\n    this._sequenceState = SequenceActionState.Pause;\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public resume(): void {\r\n    this._sequenceState = SequenceActionState.Running;\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public stop(): void {\r\n    this._sequenceState = SequenceActionState.Initial;\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public finish(): void {\r\n    this._sequenceState = SequenceActionState.Initial;\r\n    if (this._sequenceAction !== null) {\r\n      this._sequenceAction.finishAction(this);\r\n      this._sequenceAction = null;\r\n    }\r\n    this.enabled = false;\r\n  }\r\n\r\n  /**\r\n   * callbackdestroy\r\n   */\r\n  public abstract destroy(): void;\r\n\r\n\r\n}","import { VE_ActionBehaviour } from \"./actionBehaviour\";\r\nimport { VeryEngineObject, VE_Objects } from \"../object\";\r\nimport { StateConst } from \"../state\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { GameGlobal, VE_ErrorManager, VE_Error } from \"../global\";\r\nimport { ErrorInfo, VE_TypeConvert } from \"../utility\";\r\nimport { BabylonEngine } from \"../babylon\";\r\nimport { Severity } from \"../enum\";\r\n\r\nexport class VE_Actions {\r\n\r\n  // private static _actionDics: { [key: string]: VE_ActionBehaviour } = {};\r\n\r\n  private static _actionFunctionDics: { [key: string]: Function } = {};\r\n\r\n  // public static addAction(action: VE_ActionBehaviour): void {\r\n  //   // \r\n  //   if (!GameGlobal.PlatformLoaded) {\r\n  //     let ids: string[] = action.ID.split('|');\r\n  //     for (let i: number = 0; i < ids.length; i++) {\r\n  //       let id: string = ids[i].trim().toLowerCase();\r\n  //       if (this._actionDics[id]) {\r\n  //         ShowError.showError(`IDID${id}ID`);\r\n  //       } else {\r\n  //         this._actionDics[id] = action;\r\n  //       }\r\n  //     }\r\n  //   }\r\n  // }\r\n\r\n  public static addAction(action_class: Function): void {\r\n    // \r\n    if (!GameGlobal.PlatformLoaded) {\r\n      let tempAction: any = new action_class.prototype.constructor();\r\n      // console.log(`ID  ${tempAction.ID}  ${tempAction.className} `);\r\n      let ids: string[] = tempAction.ID.split('|');\r\n      for (let i: number = 0; i < ids.length; i++) {\r\n        let id: string = ids[i].trim().toLowerCase();\r\n        if (this._actionFunctionDics[id]) {\r\n          VE_ErrorManager.Add(new VE_Error('', `IDID${id}${tempAction.className}ID`, '', Severity.Error));\r\n        } else {\r\n          this._actionFunctionDics[id] = action_class;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public static hasAction(action_id: string): boolean {\r\n    action_id = action_id.toLowerCase();\r\n    if (this._actionFunctionDics[action_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static createAction(very_object: VeryEngineObject, action_id: string, action_type: string, action_para: string[], init_val: string[], error_info: ErrorInfo): Nullable<VE_ActionBehaviour> {\r\n    action_type = action_type.toLowerCase();\r\n    if (!this._actionFunctionDics[action_type]) {\r\n      error_info.isRight = false;\r\n      error_info.message = `` + action_type;\r\n      return null;\r\n    }\r\n    // console.log(this._actionFunctionDics[action_type]);\r\n    let variable: any;\r\n    try {\r\n      // variable = Object.create(this._actionDics[action_type]);\r\n      // newObject.createprototype\r\n      variable = new this._actionFunctionDics[action_type].prototype.constructor();\r\n      if (!variable) {\r\n        error_info.isRight = false;\r\n        error_info.message = '' + action_type;\r\n        return null;\r\n      }\r\n\r\n      let action: VE_ActionBehaviour = <VE_ActionBehaviour>variable;\r\n      action.set(BabylonEngine.Scene);\r\n      action.setVeryObject(very_object);\r\n      action.setActionID(very_object.projectName, very_object.objectID, action_id);\r\n      if (!action.paraParser(action_para)) {\r\n        error_info.isRight = false;\r\n        error_info.message = \"\";\r\n        return null;\r\n      }\r\n      // TODO:\r\n      error_info.clear();\r\n      let everyFrameFlag = VE_TypeConvert.boolConvert(init_val[1], error_info);\r\n      if(!error_info.isRight) {\r\n        error_info.isRight = false;\r\n        error_info.message = \"booltruefalse\";\r\n        return null;\r\n      }\r\n      action.setEveryFrame(everyFrameFlag);\r\n      action.enabled = false;\r\n      return action;\r\n    } catch (error) {\r\n      console.error(`${error.message}`);\r\n      error_info.isRight = false;\r\n      error_info.message = '' + action_type + '' + error.message;\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static remove(action_type: string): void {\r\n    action_type = action_type.toLowerCase();\r\n    delete this._actionFunctionDics[action_type];\r\n  }\r\n\r\n  public static findAction(very_object: VeryEngineObject, action_id: string): Nullable<VE_ActionBehaviour> {\r\n    if (very_object.isCreatedAction(action_id)) {\r\n      return very_object.getAction(action_id);\r\n    }\r\n    else {\r\n      let actionArray: string[] = action_id.split(StateConst.STATE_SEPARATOR);\r\n      if (actionArray.length === 2) {\r\n        let objects: VE_Objects = VE_Manager.objects(very_object.projectName);\r\n        let objectID: string = actionArray[0].trim();\r\n        let actionID: string = actionArray[1].trim();\r\n        if (objects.isCreated(objectID)) {\r\n          let otherObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n          if (otherObject.isCreatedAction(actionID)) {\r\n            return otherObject.getAction(actionID);\r\n          }\r\n          else {\r\n            return null;\r\n          }\r\n        }\r\n        else {\r\n          return null;\r\n        }\r\n      }\r\n      else {\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public static dispose(): void {\r\n    VE_Actions._actionFunctionDics = {};\r\n  }\r\n}","import { VE_State } from \"../state\";\r\nimport { AssignType } from \"../enum\";\r\nimport { IVeryVar } from \"../variables\";\r\nimport { VE_Template } from \"../template\";\r\nimport { ShowError } from \"../html\";\r\nimport { ErrorInfo } from \"../utility\";\r\nimport { IExpression } from \"../expression\";\r\nimport { VE_AssignmentTypeJudge } from \"./assignmentTypeJudge\";\r\n\r\nexport class VE_Assignment {\r\n\r\n  public get state(): VE_State {\r\n    return this._state;\r\n  }\r\n  private _state: VE_State;\r\n\r\n  private _totalStr: string = '';\r\n\r\n  public get leftType(): AssignType {\r\n    return this._leftType;\r\n  }\r\n  private _leftType: AssignType = AssignType.Variable;\r\n\r\n  public get rightType(): AssignType {\r\n    return this._rightType;\r\n  }\r\n  private _rightType: AssignType = AssignType.Variable;\r\n\r\n  public get leftVariable(): Nullable<IVeryVar> {\r\n    return this._leftVariable;\r\n  }\r\n  private _leftVariable: Nullable<IVeryVar> = null;\r\n  private _leftTemplate: Nullable<VE_Template> = null;\r\n  private _leftVarID: string = '';\r\n\r\n  private _rightConstStr: string = '';\r\n  private _rightConstValue: any = null;\r\n  public get rightVariable(): Nullable<IVeryVar> {\r\n    return this._leftVariable;\r\n  }\r\n  private _rightVariable: Nullable<IVeryVar> = null;\r\n  private _rightTemplate: Nullable<VE_Template> = null;\r\n  private _rightVarID: string = '';\r\n\r\n  private _pos: string = '';\r\n\r\n  constructor(state: VE_State, total_string: string) {\r\n    this._state = state;\r\n    this._totalStr = total_string;\r\n  }\r\n\r\n  public setPos(pos: string): void {\r\n    this._pos = pos;\r\n  }\r\n\r\n  public setLeftVariable(variable: IVeryVar): void {\r\n    this._leftType = AssignType.Variable;\r\n    this._leftVariable = variable;\r\n  }\r\n\r\n  public setLeftTemplate(template: VE_Template): void {\r\n    this._leftType = AssignType.Template;\r\n    this._leftTemplate = template;\r\n  }\r\n\r\n  public setLeftTemplateVar(template: VE_Template, var_id: string): void {\r\n    this._leftType = AssignType.TemplateVariable;\r\n    this._leftTemplate = template;\r\n    this._leftVarID = var_id;\r\n  }\r\n\r\n  public setRightVariable(variable: IVeryVar): void {\r\n    this._rightType = AssignType.Variable;\r\n    this._rightVariable = variable;\r\n  }\r\n\r\n  public setRightTemplate(template: VE_Template): void {\r\n    this._rightType = AssignType.Template;\r\n    this._rightTemplate = template;\r\n  }\r\n\r\n  public setRightNull(): void {\r\n    this._rightType = AssignType.Template;\r\n    this._rightTemplate = null;\r\n  }\r\n\r\n  public setRightTemplateVariable(template: VE_Template, var_id: string): void {\r\n    this._rightType = AssignType.TemplateVariable;\r\n    this._rightTemplate = template;\r\n    this._rightVarID = var_id;\r\n  }\r\n\r\n  public setRightConst(const_str: string): void {\r\n    this._rightType = AssignType.Const;\r\n    this._rightConstStr = const_str;\r\n  }\r\n\r\n  public setRightConstValue(const_value: any) {\r\n    this._rightType = AssignType.Const;\r\n    this._rightConstValue = const_value;\r\n  }\r\n\r\n  public finish(): void {\r\n\r\n  }\r\n\r\n  public assign(): void {\r\n    // \r\n    if (this._leftType === AssignType.Variable) {\r\n      this.rightAssignment();\r\n    }\r\n    // \r\n    else if (this._leftType === AssignType.Template) {\r\n      if (this._rightTemplate == null) {\r\n        if (this._leftTemplate !== null) {\r\n          this._leftTemplate.unload();\r\n        }\r\n      }\r\n      else {\r\n        this._leftTemplate = this._rightTemplate;\r\n      }\r\n    }\r\n    // .\r\n    else {\r\n      if (this._leftTemplate!.templateInstance !== null) {\r\n        if (this._leftTemplate!.templateInstance.isCreatedExpression(this._leftVarID)) {\r\n          ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n          return;\r\n        }\r\n        else if (this._leftTemplate!.templateInstance.isCreatedVariable(this._leftVarID)) {\r\n          this._leftVariable = this._leftTemplate!.templateInstance.getVariable(this._leftVarID);\r\n          this.rightAssignment();\r\n        }\r\n        else if (this._leftTemplate!.templateInstance.isCreatedFsm(this._leftVarID)) {\r\n          this._leftVariable = this._leftTemplate!.templateInstance.getFsm(this._leftVarID).fsmVar;\r\n          this.rightAssignment();\r\n        }\r\n        else {\r\n          ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n          return;\r\n        }\r\n      }\r\n      else {\r\n        ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._leftTemplate!.templateVarID);\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n  private rightAssignment(): void {\r\n    // \r\n    if (this._rightType === AssignType.Variable) {\r\n      this._leftVariable!.setValue(this._rightVariable!.getValue());\r\n    }\r\n    // \r\n    else if (this._rightType === AssignType.Const) {\r\n      if (this._rightConstValue === null) {\r\n        let errorInfo: ErrorInfo = new ErrorInfo();\r\n        this._rightConstValue = this._leftVariable!.initValue(this._rightConstStr, errorInfo);\r\n        if (!errorInfo.isRight) {\r\n          ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightConstStr);\r\n          return;\r\n        }\r\n        else {\r\n          //UnityEngine.Debug.Log(\"1 - \" + _totalStr + \"\" + this._rightConstValue);\r\n          this._leftVariable!.setValue(this._rightConstValue);\r\n        }\r\n      }\r\n      else {\r\n        //UnityEngine.Debug.Log(\"2 - \" + _totalStr + \"\" + this._rightConstValue);\r\n        this._leftVariable!.setValue(this._rightConstValue);\r\n      }\r\n    }\r\n    else  //.\r\n    {\r\n      if (this._rightTemplate!.templateInstance != null) {\r\n        if (this._rightTemplate!.templateInstance.isCreatedExpression(this._rightVarID)) {\r\n          let exp: IExpression = this._rightTemplate!.templateInstance.getExpression(this._rightVarID);\r\n          if (VE_AssignmentTypeJudge.allowExpression(this._leftVariable!, exp)) {\r\n            this._leftVariable!.setValue(exp.evaluate());\r\n          }\r\n          else {\r\n            ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n            return;\r\n          }\r\n        }\r\n        else if (this._rightTemplate!.templateInstance.isCreatedVariable(this._rightVarID)) {\r\n          let v: IVeryVar = this._rightTemplate!.templateInstance.getVariable(this._rightVarID);\r\n          if (VE_AssignmentTypeJudge.allow(this._leftVariable!, v)) {\r\n            this._leftVariable!.setValue(v.getValue());\r\n          }\r\n          else {\r\n            ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n            return;\r\n          }\r\n        }\r\n        else if (this._rightTemplate!.templateInstance.isCreatedFsm(this._rightVarID)) {\r\n          let v: IVeryVar = this._rightTemplate!.templateInstance.getFsm(this._rightVarID).fsmVar;\r\n          if (VE_AssignmentTypeJudge.allow(this._leftVariable!, v)) {\r\n            this._leftVariable!.setValue(v.getValue());\r\n          }\r\n          else {\r\n            ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n            return;\r\n          }\r\n        }\r\n        else {\r\n          ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n          return;\r\n        }\r\n      }\r\n      else {\r\n        ShowError.showError('' + this._pos + \"\" + this.state.Fsm.projectName + \"\" + this.state.Fsm.objectID + \"\" + this.state.Fsm.fsmID + \"\" + this._totalStr + \"\" + this._rightTemplate!.templateVarID);\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n}","import { IVeryVar } from \"../variables\";\r\nimport { IExpression } from \"../expression\";\r\n\r\nexport class VE_AssignmentTypeJudge {\r\n\r\n  public static allow(first: IVeryVar, second: IVeryVar): boolean {\r\n    if (first.varType === second.varType) {\r\n      return true;\r\n    }\r\n    else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static allowExpression(first: IVeryVar, second: IExpression): boolean {\r\n    if (first.varType === second.expType) {\r\n      return true;\r\n    }\r\n    else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n}","export * from './actionBehaviour';\r\nexport * from './assignment';\r\nexport * from './actions';","import { BabylonEngine } from \"./engine\";\r\n\r\n\r\nexport class GameObject {\r\n\r\n\r\n  public get gameObject(): GameObject {\r\n    return this;\r\n  }\r\n\r\n  public get transform(): Transform {\r\n    return this._transform;\r\n  }\r\n  public set transform(val: Transform) {\r\n    this._transform = val;\r\n  }\r\n  private _transform: Transform;\r\n\r\n  public get name(): string {\r\n    return this.transform.name;\r\n  }\r\n  public set name(val: string) {\r\n    this.transform.name = val;\r\n  }\r\n\r\n  public get isEmpty(): boolean {\r\n    return this._transform.isEmpty;\r\n  }\r\n\r\n  public get mesh(): Nullable<BABYLON.AbstractMesh> {\r\n    return this._transform.mesh;\r\n  }\r\n\r\n  constructor(name?: string, mesh: Nullable<BABYLON.AbstractMesh> = null, node: Nullable<BABYLON.TransformNode> = null) {\r\n    if (mesh) {\r\n      this._transform = new Transform('', mesh);\r\n    } else {\r\n      if (node) {\r\n        this._transform = new Transform('', null, node);\r\n      } else if (name) {\r\n        this._transform = new Transform(name);\r\n      } else {\r\n        this._transform = new Transform();\r\n      }\r\n    }\r\n  }\r\n\r\n  // TODO\r\n  public static Find(name: string, scene?: BABYLON.Scene): Nullable<GameObject> {\r\n    if (!scene) {\r\n      scene = BabylonEngine.Scene;\r\n    }\r\n    let node: Nullable<BABYLON.Node> = scene.getNodeByName(name);\r\n    if (!node) {\r\n      return null;\r\n    } else {\r\n      if (node instanceof BABYLON.AbstractMesh) {\r\n        return new GameObject('', <BABYLON.AbstractMesh>node);\r\n      } else if (node instanceof BABYLON.TransformNode) {\r\n        return new GameObject('', null, <BABYLON.TransformNode>node);\r\n      } else {\r\n        console.error('GameObject.Find' + node.getClassName());\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n  // TODO\r\n  public static Destroy(obj: GameObject): void {\r\n    if(obj) {\r\n      obj.transform.destroy();\r\n    }\r\n  }\r\n\r\n\r\n  public static CreateInstance(game_object: GameObject): Nullable<GameObject> {\r\n    if (!game_object) {\r\n      return null;\r\n    }\r\n\r\n    if (game_object.isEmpty) {\r\n      return new GameObject();\r\n    } else {\r\n      if (game_object.transform.mesh) {\r\n        let tempMesh: BABYLON.AbstractMesh;\r\n        if (game_object.transform.mesh instanceof BABYLON.Mesh) {\r\n          tempMesh = (<BABYLON.Mesh>game_object.transform.mesh).createInstance(game_object.name + '_instance');\r\n        } else {\r\n          tempMesh = (<BABYLON.InstancedMesh>game_object.transform.mesh).sourceMesh.createInstance(game_object.name + '_instance');\r\n        }\r\n        return new GameObject('', tempMesh);\r\n      } else {\r\n        let newNode: Nullable<BABYLON.TransformNode> = game_object.transform.transformNode!.clone(game_object.name + '_intance');\r\n        return new GameObject('', null, newNode);\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  // public static empty(name: string): GameObject {\r\n\r\n  // }\r\n\r\n}\r\n\r\n\r\nexport class Transform {\r\n\r\n  // public get gameObject(): GameObject {\r\n  //   return this._gameObject;\r\n  // }\r\n  // private _gameObject: GameObject;\r\n\r\n  private _transformNode: BABYLON.Nullable<BABYLON.TransformNode> = null;\r\n  private _mesh: BABYLON.Nullable<BABYLON.AbstractMesh> = null;\r\n\r\n  public get transformNode(): Nullable<BABYLON.TransformNode> {\r\n    if (this._mesh) {\r\n      return this._mesh;\r\n    } else if (this._transformNode) {\r\n      return this._transformNode;\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public get mesh(): Nullable<BABYLON.AbstractMesh> {\r\n    return this._mesh;\r\n  }\r\n\r\n  public get isMesh(): boolean {\r\n    if (this._mesh) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public get isEmpty(): boolean {\r\n    if (this._transformNode || this._mesh) {\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  // public get parent(): Nullable<BABYLON.TransformNode>\r\n\r\n  public get name(): string {\r\n    return this._name;\r\n  }\r\n  public set name(val: string) {\r\n    if (this._transformNode) {\r\n      this._transformNode.name = val;\r\n    }\r\n    if (this._mesh) {\r\n      this._mesh.name = val;\r\n    }\r\n    this._name = val;\r\n  }\r\n  private _name: string = '';\r\n\r\n  private _tempVec: BABYLON.Vector3 = BABYLON.Vector3.Zero();\r\n\r\n  public get parent(): Nullable<Transform> {\r\n    return this._parent;\r\n  }\r\n  private _parent: Nullable<Transform> = null;\r\n\r\n  public set parent(val: Nullable<Transform>) {\r\n    if (!this.isEmpty) {\r\n      if (val && !val.isEmpty) {\r\n        this._transformNode!.setParent(val.transformNode);\r\n        this._parent = val;\r\n      } else {\r\n        this._transformNode!.setParent(null);\r\n        this._parent = null;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public get localPosition(): BABYLON.Vector3 {\r\n    if (this.isEmpty) {\r\n      return BABYLON.Vector3.Zero();\r\n    } else {\r\n      this._tempVec.copyFrom(this.transformNode!.position);\r\n      return this._tempVec;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public set localPosition(val: BABYLON.Vector3) {\r\n    if (!this.isEmpty) {\r\n      this.transformNode!.position = val;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public get position(): BABYLON.Vector3 {\r\n    if (this.isEmpty) {\r\n      return BABYLON.Vector3.Zero();\r\n    } else {\r\n      this._tempVec.copyFrom(this.transformNode!.getAbsolutePosition());\r\n      return this._tempVec;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public set position(val: BABYLON.Vector3) {\r\n    if (!this.isEmpty) {\r\n      this.transformNode!.setAbsolutePosition(val);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public get localEulerAngles(): BABYLON.Vector3 {\r\n    if (this.isEmpty) {\r\n      return BABYLON.Vector3.Zero();\r\n    } else {\r\n      let para: number = 180 / Math.PI;\r\n      return this.transformNode!.rotation.multiplyByFloats(para, para, para);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public set localEulerAngles(val: BABYLON.Vector3) {\r\n    if (!this.isEmpty) {\r\n      let para: number = Math.PI / 180;\r\n      this.transformNode!.rotation = val.multiplyByFloats(para, para, para);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public get localRotation(): BABYLON.Vector3 {\r\n    if (this.isEmpty) {\r\n      return BABYLON.Vector3.Zero();\r\n    } else {\r\n      this._tempVec.copyFrom(this.transformNode!.rotation);\r\n      return this._tempVec;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public set localRotation(val: BABYLON.Vector3) {\r\n    if (!this.isEmpty) {\r\n      this.transformNode!.rotation = val;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public get eulerAngles(): BABYLON.Vector3 {\r\n    if (this.isEmpty) {\r\n      return BABYLON.Vector3.Zero();\r\n    } else {\r\n      let parent: Nullable<BABYLON.Node> = this.transformNode!.parent;\r\n      let para: number = 180 / Math.PI;\r\n      this.transformNode!.setParent(null);\r\n      let result: BABYLON.Vector3 = this.transformNode!.rotation.multiplyByFloats(para, para, para);\r\n      this.transformNode!.setParent(parent);\r\n      return result;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public set eulerAngles(val: BABYLON.Vector3) {\r\n    if (!this.isEmpty) {\r\n      let parent: Nullable<BABYLON.Node> = this.transformNode!.parent;\r\n      let para: number = Math.PI / 180;\r\n      this.transformNode!.setParent(null);\r\n      this.transformNode!.rotation = val.multiplyByFloats(para, para, para);\r\n      this.transformNode!.setParent(parent);\r\n\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public get rotation(): BABYLON.Vector3 {\r\n    if (this.isEmpty) {\r\n      return BABYLON.Vector3.Zero();\r\n    } else {\r\n      let parent: Nullable<BABYLON.Node> = this.transformNode!.parent;\r\n      this.transformNode!.setParent(null);\r\n      this._tempVec.copyFrom(this.transformNode!.rotation);\r\n      this.transformNode!.setParent(parent);\r\n      return this._tempVec;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public set rotation(val: BABYLON.Vector3) {\r\n    if (!this.isEmpty) {\r\n      let parent: Nullable<BABYLON.Node> = this.transformNode!.parent;\r\n      this.transformNode!.setParent(null);\r\n      this.transformNode!.rotation = val;\r\n      this.transformNode!.setParent(parent);\r\n    }\r\n  }\r\n\r\n\r\n  public get childCount(): number {\r\n    return 0;\r\n  }\r\n\r\n  public forward: BABYLON.Vector3 = BABYLON.Vector3.Forward();\r\n\r\n\r\n  public get hierarchyCount(): number {\r\n    return 0;\r\n  }\r\n\r\n  public localScale: BABYLON.Vector3 = new BABYLON.Vector3(1, 1, 1);\r\n\r\n\r\n\r\n  constructor(name?: string, mesh: Nullable<BABYLON.AbstractMesh> = null, node: Nullable<BABYLON.TransformNode> = null) {\r\n    if (mesh) {\r\n      this._mesh = mesh;\r\n      this._transformNode = mesh;\r\n      this._name = mesh.name;\r\n    } else {\r\n      if (node) {\r\n        this._mesh = null;\r\n        this._transformNode = node;\r\n        this._name = node.name;\r\n      } else if (name) {\r\n        this._mesh = null;\r\n        this._transformNode = new BABYLON.TransformNode(name);\r\n        this._name = name;\r\n      } else {\r\n        this._mesh = null;\r\n        this._transformNode = null;\r\n        this._name = '';\r\n      }\r\n    }\r\n\r\n    // \r\n    if (this._transformNode) {\r\n      let tempParent: Nullable<BABYLON.Node> = this._transformNode.parent;\r\n      if (tempParent) {\r\n        if (tempParent instanceof BABYLON.AbstractMesh) {\r\n          this._parent = new Transform(tempParent.name, <BABYLON.AbstractMesh>tempParent);\r\n        } else {\r\n          this._parent = new Transform(tempParent.name, null, <BABYLON.TransformNode>tempParent);\r\n        }\r\n      }\r\n    } else {\r\n      this._parent = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param translation \r\n   * @param relativeTo LOCALWORLD\r\n   */\r\n  public translate(translation: BABYLON.Vector3, relativeTo: BABYLON.Space): void {\r\n    if (this.transformNode) {\r\n      this.transformNode.translate(translation, 1, relativeTo);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * null\r\n   * @param translation \r\n   * @param trans \r\n   */\r\n  public translateRelativeTo(translation: BABYLON.Vector3, trans: Transform): void {\r\n    if (this.transformNode) {\r\n      let direction: BABYLON.Vector3 = translation.clone();\r\n      if (trans && trans.transformNode) {\r\n        direction = this.transformDirection(direction);\r\n      }\r\n      this.transformNode.translate(direction, 1, BABYLON.Space.WORLD);\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  /**\r\n   * \r\n   * @param local_position \r\n   * Vector3\r\n   */\r\n  public transformPosition(local_position: BABYLON.Vector3): BABYLON.Vector3 {\r\n    if (this.transformNode) {\r\n      let matrix: BABYLON.Matrix = this.transformNode.computeWorldMatrix();\r\n      return BABYLON.Vector3.TransformCoordinates(local_position, matrix);\r\n    } else {\r\n      return local_position;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param local_direction \r\n   * Vector3\r\n   */\r\n  public transformDirection(local_direction: BABYLON.Vector3): BABYLON.Vector3 {\r\n    if (this.transformNode) {\r\n      let matrix: BABYLON.Matrix = this.transformNode.computeWorldMatrix();\r\n      return BABYLON.Vector3.TransformCoordinates(local_direction, matrix).subtract(this.transformNode.getAbsolutePosition());\r\n    } else {\r\n      return local_direction;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param global_position \r\n   * Vector3\r\n   */\r\n  public inverseTransformPosition(global_position: BABYLON.Vector3): BABYLON.Vector3 {\r\n    if (this.transformNode) {\r\n      let matrix: BABYLON.Matrix = BABYLON.Matrix.Invert(this.transformNode.computeWorldMatrix());\r\n      return BABYLON.Vector3.TransformCoordinates(global_position, matrix);\r\n    } else {\r\n      return global_position;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param global_direction \r\n   * Vector3\r\n   */\r\n  public inverseTransformDirection(global_direction: BABYLON.Vector3): BABYLON.Vector3 {\r\n    if (this.transformNode) {\r\n      let matrix: BABYLON.Matrix = BABYLON.Matrix.Invert(this.transformNode.computeWorldMatrix());\r\n      let pointA: BABYLON.Vector3 = BABYLON.Vector3.TransformCoordinates(global_direction, matrix);\r\n      let pointOrigin: BABYLON.Vector3 = BABYLON.Vector3.TransformCoordinates(BABYLON.Vector3.Zero(), matrix);\r\n      return pointA.subtract(pointOrigin);\r\n    } else {\r\n      return global_direction;\r\n    }\r\n  }\r\n\r\n\r\n  public destroy(): void {\r\n    if(this.mesh) this.mesh.dispose();\r\n    if(this.transformNode) this.transformNode.dispose();\r\n  }\r\n\r\n}\r\n\r\n\r\n// let trans: Transform = new Transform();\r\n// let trans2: Transform = new Transform(null, null, 'my name');\r\n// let trans3: Transform = new Transform(new BABYLON.TransformNode('a', null));","export class BabylonEngine {\r\n  public static Canvas: HTMLCanvasElement;\r\n  public static Engine: BABYLON.Engine;\r\n  public static Scene: BABYLON.Scene;\r\n}","export * from './babylonVariables';\r\nexport * from './time';\r\nexport * from './engine';","import { BabylonEngine } from \"./engine\";\r\n\r\nexport class Time {\r\n\r\n  /**\r\n   * IDScene\r\n   */\r\n  public static get frameCounter(): number {\r\n    return BabylonEngine.Scene.getFrameId();\r\n  }\r\n  // private static _frame: number = 0;\r\n  // public static _sum(): void {\r\n  //   this._frame++;\r\n  // }\r\n\r\n  /**\r\n   * s\r\n   */\r\n  public static get deltaTime(): number {\r\n    // return 1.0 / GameGlobal.Engine.getFps();\r\n    return BabylonEngine.Engine.getDeltaTime() * 0.001;\r\n  }\r\n\r\n  private static _startDate: Date;\r\n  private static _startSecond: number;\r\n\r\n  /**\r\n   * Scenetime\r\n   */\r\n  public static start(): void {\r\n    this._startDate = new Date();\r\n    this._startSecond = this._startDate.valueOf() / 1000;\r\n  }\r\n\r\n  /**\r\n   * scenes\r\n   */\r\n  public static get time(): number {\r\n    return (new Date()).valueOf() / 1000 - this._startSecond;\r\n  }\r\n\r\n\r\n}","import { VE_FsmData } from \"./fsmData\";\r\n\r\nexport class VE_DataSource {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = '';\r\n\r\n  public get templateID(): string {\r\n    return this._templateID;\r\n  }\r\n  private _templateID: string = '';\r\n\r\n  public get isTemplate(): boolean {\r\n    return this._isTemplate;\r\n  }\r\n  private _isTemplate: boolean = false;\r\n\r\n  public get id(): string {\r\n    if (this._isTemplate) {\r\n      return this._templateID;\r\n    } else {\r\n      return this._objectID;\r\n    }\r\n  }\r\n\r\n  private _fsmIDs: string[] = [];\r\n  private _fsmDic: { [key: string]: VE_FsmData } = {};\r\n  private _fsmPosDic: { [key: string]: string } = {};\r\n\r\n  private _triggerIDs: string[] = [];\r\n  private _triggerDic: { [key: string]: string[] } = {};\r\n  private _triggerPosDic: { [key: string]: string } = {};\r\n\r\n  private _actionIDs: string[] = [];\r\n  private _actionDic: { [key: string]: string[] } = {};\r\n  private _actionInitValue: { [key: string]: string[] } = {};\r\n  private _actionPosDic: { [key: string]: string } = {};\r\n\r\n  public get triggerCount(): number {\r\n    return this._triggerIDs.length;\r\n  }\r\n\r\n  public get actionCount(): number {\r\n    return this._actionIDs.length;\r\n  }\r\n\r\n  public get fsmCount(): number {\r\n    return this._fsmIDs.length;\r\n  }\r\n\r\n\r\n  constructor(project_name: string, name_id: string, is_template: boolean) {\r\n    this._projectName = project_name;\r\n    this._isTemplate = is_template;\r\n    if(is_template) {\r\n      this._templateID = name_id;\r\n    } else {\r\n      this._objectID = name_id;\r\n    }\r\n  }\r\n\r\n  public isCreatedFsm(fsm_id: string): boolean {\r\n    if(this._fsmDic[fsm_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public createFsm(fsm_id: string, pos: string): void {\r\n    this._fsmIDs.push(fsm_id);\r\n    this._fsmDic[fsm_id] = new VE_FsmData(fsm_id, this);\r\n    this._fsmPosDic[fsm_id] = pos;\r\n  }\r\n\r\n  public getFsmData(fsm_id: string): VE_FsmData {\r\n    return this._fsmDic[fsm_id];\r\n  }\r\n\r\n  public getFsmPos(fsm_id: string): string {\r\n    return this._fsmPosDic[fsm_id];\r\n  }\r\n\r\n  public hasFsmIndex(index: number): boolean {\r\n    if(index >= 0 && index < this._fsmIDs.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getFsmID(index: number): string {\r\n    return this._fsmIDs[index];\r\n  }\r\n\r\n  public isCreatedTrigger(trigger_id: string): boolean {\r\n    if(this._triggerDic[trigger_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTrigger(trigger_id: string, trigger_data: string[], pos: string): void {\r\n    this._triggerIDs.push(trigger_id);\r\n    this._triggerDic[trigger_id] = trigger_data;\r\n    this._triggerPosDic[trigger_id] = pos;\r\n  }\r\n\r\n  public getTrigger(trigger_id: string): string[] {\r\n    return this._triggerDic[trigger_id];\r\n  }\r\n\r\n  public getTriggerPos(trigger_id: string): string {\r\n    return this._triggerPosDic[trigger_id];\r\n  }\r\n\r\n  public hasTriggerIndex(index: number): boolean {\r\n    if(index >=0 && index < this._triggerIDs.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getTriggerID(index: number): string {\r\n    return this._triggerIDs[index];\r\n  }\r\n\r\n  public getTriggerPara(trigger_id: string): string[] {\r\n    return this._triggerDic[trigger_id];\r\n  }\r\n\r\n  public isCreatedAction(action_id: string): boolean {\r\n    if(this._actionDic[action_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addAction(action_id: string, action_data: string[], action_init_val: string[], pos: string): void {\r\n    this._actionIDs.push(action_id);\r\n    this._actionDic[action_id] = action_data;\r\n    this._actionInitValue[action_id] = action_init_val;\r\n    this._actionPosDic[action_id] = pos;\r\n  }\r\n\r\n  public getActionPara(action_id: string): string[] {\r\n    return this._actionDic[action_id];\r\n  }\r\n\r\n  public getActionPos(action_id: string): string {\r\n    return this._actionPosDic[action_id];\r\n  }\r\n\r\n  public getActionInitVal(action_id: string): string[] {\r\n    return this._actionInitValue[action_id];\r\n  }\r\n\r\n  public hasActionIndex(index: number): boolean {\r\n    if(index >= 0 && index < this._actionIDs.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getActionID(index: number): string {\r\n    return this._actionIDs[index];\r\n  }\r\n\r\n  public clear(): void {\r\n    this._fsmIDs = [];\r\n    this._fsmDic = {};\r\n    this._triggerIDs = [];\r\n    this._triggerDic = {};\r\n    this._actionIDs = [];\r\n    this._actionDic = {};\r\n    this._actionInitValue = {};\r\n  }\r\n\r\n\r\n\r\n}","import { VE_DataSource, VE_StateData } from \"./index\";\r\n\r\nexport class VE_FsmData {\r\n  public get dataSource(): VE_DataSource {\r\n    return this._dataSource;\r\n  }\r\n  private _dataSource: VE_DataSource;\r\n\r\n  public get fsmID(): string {\r\n    return this._fsmID;\r\n  }\r\n  private _fsmID: string;\r\n\r\n  public get fsmType(): string {\r\n    return this._fsmType;\r\n  }\r\n  private _fsmType: string = '';\r\n\r\n  public get initialValStr(): string {\r\n    return this._initialValStr;\r\n  }\r\n  private _initialValStr: string = '';\r\n\r\n  private _states: VE_StateData[] = [];\r\n\r\n  public get count(): number {\r\n    return this._states.length;\r\n  }\r\n\r\n  constructor(fsm_id: string, data_source: VE_DataSource) {\r\n    this._dataSource = data_source;\r\n    this._fsmID = fsm_id;\r\n  }\r\n\r\n  public initFsm(fsm_type: string, initial_var: string): void {\r\n    this._fsmType = fsm_type;\r\n    this._initialValStr = initial_var;\r\n  }\r\n\r\n  public addState(state_data: VE_StateData): void {\r\n    this._states.push(state_data);\r\n  }\r\n\r\n  public getStateData(index: number): VE_StateData {\r\n    return this._states[index];\r\n  }\r\n\r\n}","export * from './variableData';\r\nexport * from './fsmData';\r\nexport * from './stateActionData';\r\nexport * from './stateTriggerData';\r\nexport * from './stateData';\r\nexport * from './dataSource';\r\n\r\n","import { StateActionType } from \"../enum\";\r\n\r\nexport class VE_StateActionData {\r\n\r\n  public actionID: string;\r\n  // 1///2true/false3/bool\r\n  public enabled: string;\r\n  public everyFrame: string;\r\n  public isSequence: string;\r\n  public type: StateActionType;\r\n  public totalString: string = '';\r\n  public varID: string = '';\r\n  public varValue: string = '';\r\n\r\n  constructor(action_id: string, enabled: string = 'false', every_frame: string = 'false', sequence: string = 'false', type: StateActionType = StateActionType.Action) {\r\n    this.actionID = action_id;\r\n    this.enabled = enabled;\r\n    this.everyFrame = every_frame;\r\n    this.isSequence = sequence;\r\n    this.type = type;\r\n  }\r\n\r\n  public setNormalAction(action_id: string, enabled: string = 'false', every_frame: string = 'false', sequence: string = 'false'): void {\r\n    this.actionID = action_id;\r\n    this.enabled = enabled;\r\n    this.everyFrame = every_frame;\r\n    this.isSequence = sequence;\r\n    this.type = StateActionType.Action;\r\n  }\r\n\r\n  public setAssignmentAction(total_string: string, var_id: string, var_value: string): void {\r\n    this.totalString = total_string;\r\n    this.varID = var_id;\r\n    this.varValue = var_value;\r\n    this.type = StateActionType.Assignment;\r\n  }\r\n\r\n}","import { VE_FsmData } from \"./index\";\r\nimport { StateConst } from \"../state\";\r\nimport { VE_StateTriggerData } from \"./stateTriggerData\";\r\nimport { VE_StateActionData } from \"./stateActionData\";\r\n\r\nexport class VE_StateData {\r\n\r\n  public get fsmData(): VE_FsmData {\r\n    return this._fsmData;\r\n  }\r\n  private _fsmData: VE_FsmData;\r\n\r\n  public get ValStr(): string {\r\n    return this._valStr;\r\n  }\r\n  private _valStr: string;\r\n\r\n  public get isInitialValue(): boolean {\r\n    return this._isInitialValue;\r\n  }\r\n  private _isInitialValue: boolean;\r\n\r\n  public logicalExp: string = '';\r\n\r\n  public rowIndex: number = -1;\r\n\r\n  private _triggers: VE_StateTriggerData[] = [];\r\n  private _triggersPos: string[] = [];\r\n  private _actions: VE_StateActionData[] = [];\r\n  private _actionsPos: string[] = [];\r\n  private _associatedStates: string[] = [];\r\n  private _associatedStatesPos: string[] = [];\r\n\r\n  public get isSequence(): boolean {\r\n    return this._isSequence;\r\n  }\r\n  private _isSequence: boolean = false;\r\n\r\n  public get triggerCount(): number {\r\n    return this._triggers.length;\r\n  }\r\n\r\n  public get actionCount(): number {\r\n    return this._actions.length;\r\n  }\r\n\r\n  public get associatedStateCount(): number {\r\n    return this._associatedStates.length;\r\n  }\r\n\r\n  constructor(fsm_data: VE_FsmData, val_str: string, is_initial_value: boolean) {\r\n    this._fsmData = fsm_data;\r\n    this._valStr = val_str;\r\n    this._isInitialValue = is_initial_value;\r\n  }\r\n\r\n  public hasTrigger(index: number): boolean {\r\n    if(index >= 0 && index < this._triggers.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTrigger(trigger_data: VE_StateTriggerData, pos: string): void {\r\n    this._triggers.push(trigger_data);\r\n    this._triggersPos.push(pos);\r\n  }\r\n\r\n  public getTrigger(index: number): VE_StateTriggerData {\r\n    return this._triggers[index];\r\n  }\r\n\r\n  public getTriggerPos(index: number): string {\r\n    return this._triggersPos[index];\r\n  }\r\n\r\n  public hasAction(index: number): boolean {\r\n    if(index >= 0 && index < this._actions.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addAction(action_data: VE_StateActionData, pos: string): void {\r\n    this._actions.push(action_data);\r\n    this._actionsPos.push(pos);\r\n  }\r\n\r\n  public getAction(index: number): VE_StateActionData {\r\n    return this._actions[index];\r\n  }\r\n\r\n  public getActionPos(index: number): string {\r\n    return this._actionsPos[index];\r\n  }\r\n\r\n  public hasAssociatedState(index: number): boolean {\r\n    if(index >= 0 && index < this._associatedStates.length) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addAssociatedState(associated_state_data: string, pos: string): void {\r\n    this._associatedStates.push(associated_state_data);\r\n    this._associatedStatesPos.push(pos);\r\n  }\r\n\r\n  public getAssociatedState(index: number): string {\r\n    return this._associatedStates[index];\r\n  }\r\n\r\n  public getAssociatedStatePos(index: number): string {\r\n    return this._associatedStatesPos[index];\r\n  }\r\n\r\n  public setSequence(): void {\r\n    this._isSequence = true;\r\n  }\r\n\r\n}","export class VE_StateTriggerData {\r\n\r\n  public triggerID: string;\r\n  public logicalSwitch: string;\r\n  public logicalExp: string;\r\n\r\n  public static get Empty(): VE_StateTriggerData {\r\n    return new VE_StateTriggerData('');\r\n  }\r\n\r\n  constructor(trigger_id: string) {\r\n    this.triggerID = trigger_id;\r\n    this.logicalSwitch = '';\r\n    this.logicalExp = '';\r\n   }\r\n}","export class VE_VariableData {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  private _variableIDs: string[] = [];\r\n  private _varDics: { [key: string]: string[] } = {};\r\n  private _varPosDic: { [key: string]: string } = {};\r\n\r\n  public get count(): number {\r\n    return this._variableIDs.length;\r\n  }\r\n\r\n  constructor(project_name: string) {\r\n    this._projectName = project_name;\r\n  }\r\n\r\n  public isCreatedVariable(var_id: string): boolean {\r\n    if (this._varDics[var_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addVariable(var_id: string, var_paras: string[], pos: string): void {\r\n    this._varDics[var_id] = var_paras;\r\n    this._variableIDs.push(var_id);\r\n    this._varPosDic[var_id] = pos;\r\n  }\r\n\r\n  public getVariableID(index: number): string {\r\n    if (index >= 0 && index < this._variableIDs.length) {\r\n      return this._variableIDs[index];\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n\r\n  public getVariableParas(var_id: string): string[] {\r\n    return this._varDics[var_id];\r\n  }\r\n\r\n  public getPos(var_id: string): string {\r\n    return this._varPosDic[var_id];\r\n  }\r\n\r\n  public clear(): void {\r\n    this._variableIDs = [];\r\n    this._varDics = {};\r\n  }\r\n}","\r\n\r\n\r\nexport enum ActionType {\r\n  Normal, Animation\r\n}\r\n\r\nexport enum SequenceActionState {\r\n  Initial, Prepared, Running, Pause\r\n}\r\n\r\nexport enum StateActionType {\r\n  Action, Assignment\r\n}\r\n\r\nexport enum AssignType {\r\n  Variable = 0,\r\n  Template,\r\n  TemplateVariable,\r\n  Const,\r\n}\r\n\r\nexport enum AssignmentType {\r\n  Const = 0,\r\n  Variable,\r\n  Expression\r\n}\r\n\r\nexport enum AssociatedFsmType {\r\n  Object = 0,\r\n  Template\r\n}\r\n\r\nexport enum VariableScope {\r\n  Local = 0,\r\n  Fsm,\r\n  Global,\r\n  Scene\r\n}\r\n\r\nexport enum Severity {\r\n  Warning,\r\n  Error\r\n}\r\n\r\nexport enum ParaType {\r\n  Action = 0,\r\n  Trigger\r\n}\r\n\r\n","export * from './enumTypes';","import { IPosition } from \"./positions\";\r\n\r\nexport class ExpChar implements IPosition {\r\n\r\n  private _value: string = '';\r\n  private _line: number = 0;\r\n  private _pos: number = 0;\r\n\r\n\r\n  constructor(value: string, line: number, pos: number) {\r\n    this._value = value;\r\n    this._line = line;\r\n    this._pos = pos;\r\n  }\r\n\r\n  public getValue(): string {\r\n    return this._value;\r\n  }\r\n\r\n  public getLine(): number {\r\n    return this._line;\r\n  }\r\n\r\n  public getPos(): number {\r\n\r\n    return this._pos;\r\n  }\r\n\r\n  public isDigit(): boolean {\r\n    return (/\\d/).test(this._value);\r\n  }\r\n\r\n  public isLetterOrCharactor(): boolean {\r\n    if((/[]/).test(this._value)) {\r\n      return false;\r\n    }\r\n    var result: boolean = (/[a-zA-Z]/).test(this._value);\r\n    // \r\n    if (!result) {\r\n      result = escape(this._value).indexOf('%u') > -1;\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public isWhiteSpace(): boolean {\r\n    return this._value === ' ';\r\n  }\r\n\r\n  public isNewLine(): boolean {\r\n    return this._value === '\\n';\r\n  }\r\n\r\n  public isEndOfInput(): boolean {\r\n    return this._value === '\\0';\r\n  }\r\n\r\n  public is(...val: string[]): boolean {\r\n    for (let i: number = 0; i < val.length; i++) {\r\n      if (val[i] === this._value && val[i] !== '\\0') {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public toString(): string {\r\n    return this._value;\r\n  }\r\n\r\n}\r\n\r\n","import { Scope } from \"./scope\";\r\nimport { IExpression } from \"./expressions\";\r\nimport { ParseError, NameLocation } from \"./positions\";\r\nimport { VE_ExpressionParsing } from \"./expressionParsing\";\r\nimport { VariableScope } from \"../enum\";\r\nimport { Variable } from \"./variable\";\r\nimport { ShowError } from \"../html\";\r\n\r\nexport class ExpManager {\r\n\r\n  private static _scope: Scope;\r\n  private static _expVariable: { [key: string]: IExpression } = {};\r\n\r\n  public static errors: ParseError[] = [];\r\n\r\n  private static _projectName = '';\r\n  private static _objectID = '';\r\n\r\n  public static init() {\r\n    this._scope = Scope.Create();\r\n  }\r\n\r\n  public static isCreated(name_id: string): boolean {\r\n    if (this._scope.isCreated(name_id)) {\r\n      return true;\r\n    }\r\n    if (this._expVariable[name_id]) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public static isCreatedVariable(name_id: string): boolean {\r\n    if (this._scope.isCreated(name_id)) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static isCreatedExpression(name_id: string): boolean {\r\n    if (this._expVariable[name_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static createVariable(name_id: string, type: string, value: any): boolean {\r\n    this.errors = [];\r\n    if (this.isCreated(name_id)) {\r\n      this.errors.push(ParseError.Error(new NameLocation(name_id), `${name_id}${type}`));\r\n      return false;\r\n    }\r\n    this._scope.setVariable(name_id, type, value);\r\n    return true;\r\n  }\r\n\r\n  public static createExpression(name_id: string, exp_str: string): boolean {\r\n    this.errors = [];\r\n    if (this.isCreated(name_id)) {\r\n      this.errors.push(ParseError.Error(new NameLocation(name_id), `${name_id}${exp_str}`));\r\n      return false;\r\n    }\r\n    let exp: IExpression = VE_ExpressionParsing.parsing(name_id, exp_str, this._scope, this._projectName, '', '', VariableScope.Scene);\r\n    if (VE_ExpressionParsing.errors.length > 0) {\r\n      for (let i: number = 0; i < VE_ExpressionParsing.errors.length; i++) {\r\n        this.errors.push(VE_ExpressionParsing.errors[i]);\r\n      }\r\n      return false;\r\n    }\r\n    this._expVariable[name_id] = exp;\r\n    return true;\r\n  }\r\n\r\n  public static getValue(name_id: string): any {\r\n    if (this.isCreated(name_id)) {\r\n      if (this.isCreatedVariable(name_id)) {\r\n        return this._scope.find(name_id)!.getValue();\r\n      } else {\r\n        return this._expVariable[name_id].evaluate();\r\n      }\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static getExpression(name_id: string): IExpression | null {\r\n    if (this._expVariable[name_id]) {\r\n      return this._expVariable[name_id];\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static getVariable(name_id: string): Variable | null {\r\n    if (this.isCreatedVariable(name_id)) {\r\n      return this._scope.find(name_id);\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n\r\n  public static printError(): void {\r\n    if (this.errors.length > 0) {\r\n      for (let i: number = 0; i < this.errors.length; i++) {\r\n        console.error(this.errors[i].toString());\r\n        ShowError.showError(this.errors[i].toString());\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n}\r\n\r\nExpManager.init();\r\n\r\n// try {\r\n//   ExpManager.createVariable('first', 'number', 1);\r\n//   ExpManager.createVariable('second', 'number', 2);\r\n//   ExpManager.createVariable('third', 'bool', true);\r\n//   console.log(ExpManager.getValue('third'));\r\n\r\n//   // ExpManager.createExpression('add', '(1 + first + second * (first + second + 3)) / 2');\r\n//   // ExpManager.createExpression('add', 'cos(PI/2) + sin(PI/2)');\r\n//   // console.log(ExpManager.getExpression('add')!.toString());\r\n//   // console.log(' ' + ExpManager.getExpression('add')!.evaluate());\r\n\r\n//   // ExpManager.createExpression('exp1', 'second + 2 * second + abs(-10)');\r\n//   ExpManager.createExpression('exp1', 'first * second + second > 10');\r\n//   console.log('2 ' + ExpManager.getExpression('exp1')!.evaluate());\r\n\r\n//   // ExpManager.createExpression('multiply', 'x * y');\r\n//   // ExpManager.createExpression('substract', 'x - y');\r\n\r\n//   // console.log(ExpManager.getExpression('add')!.evaluate());\r\n\r\n//   // console.log(ExpManager.getExpression('multiply')!.evaluate());\r\n//   // console.log(ExpManager.getExpression('substract')!.evaluate());\r\n\r\n// }\r\n// catch {\r\n\r\n// }\r\n\r\n// ExpManager.printError();\r\n\r\n\r\n","export enum ExpressionType {\r\n  ID, SPECIAL_ID, KEYWORD, STRING, NUMBER, BOOL, OPERATOR, INTEGER, FLOAT, DOUBLE, EOI\r\n}","import { Scope } from \"./scope\";\r\nimport { Tokenizer } from \"./tokenizer\";\r\nimport { ParseError, IPosition } from \"./positions\";\r\nimport { IExpression, BinaryOperator, BinaryExpression, ConstantExpression, VeryTemplateExpression, VeryVarExpression } from \"./expressions\";\r\nimport { ExpressionType } from \"./expressionEnum\";\r\nimport { FunctionExpression } from \"./functionExpression\";\r\nimport { Token } from \"./token\";\r\nimport { IFunction, CustomFunctions } from \"./functions\";\r\nimport { Variable } from \"./variable\";\r\nimport { VariableExpression } from \"./variableExpression\";\r\nimport { VariableScope } from \"../enum\";\r\nimport { VE_Expressions } from \"./veryExpressions\";\r\nimport { VE_Objects, VeryEngineObject } from \"../object\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { VE_Fsm } from \"../state\";\r\n\r\n\r\n\r\nexport class VE_ExpressionParsing {\r\n\r\n  private static _bracketPair: { [key: string]: string } = {};\r\n\r\n  private static _scope: Scope;\r\n  private static _tokenizer: Tokenizer;\r\n\r\n  public static errors: ParseError[] = [];\r\n\r\n  private static _projectName: string = '';\r\n  private static _objectID: string = '';\r\n  private static _fsmID = '';\r\n\r\n  private static _varScope: VariableScope = VariableScope.Local;\r\n\r\n\r\n  public static init(): void {\r\n    this._bracketPair['('] = ')';\r\n    this._bracketPair['['] = ']';\r\n    this._bracketPair['{'] = '}';\r\n    this._bracketPair[''] = '';\r\n    this._bracketPair[''] = '';\r\n  }\r\n\r\n  public static parsing(name_id: string, input_exp: string, scope: Scope, project_name: string, object_id: string, fsm_id: string, var_scope: VariableScope): IExpression {\r\n    this._scope = scope;\r\n    this._projectName = project_name;\r\n    this._objectID = object_id;\r\n    this._fsmID = fsm_id;\r\n    this._varScope = var_scope;\r\n    input_exp = this.replace(input_exp);\r\n    // console.warn(` ${input_exp}`);\r\n    this._tokenizer = new Tokenizer(input_exp);\r\n    // while(!this._tokenizer.current().isEnd()) {\r\n    //   console.log(this._tokenizer.consume());\r\n    // }\r\n    this.errors = [];\r\n    return this.parse();\r\n  }\r\n\r\n  private static replace(str: string): string {\r\n    str = str.replace(//g, '(');\r\n    str = str.replace(//g, ')');\r\n    str = str.replace(//g, '!');\r\n    return str;\r\n  }\r\n\r\n  private static parse(): IExpression {\r\n    let resultExp: IExpression = this.buildExpression();\r\n    // console.log(this._tokenizer.current());\r\n    if (!this._tokenizer.current().isEnd()) {\r\n      this._tokenizer.addError(this._tokenizer.current(), `${this._tokenizer.current().getSource()} `);\r\n      this._tokenizer.consume();\r\n    }\r\n    this.errors = this._tokenizer.getProblemCollector();\r\n    return resultExp;\r\n  }\r\n\r\n\r\n  private static buildExpression(): IExpression {\r\n    let left: IExpression = this.relationalExp();\r\n    if (this._tokenizer.current().isOperator('&&')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.buildExpression();\r\n      return this.reOrder(left, right, BinaryOperator.Add);\r\n    }\r\n    if (this._tokenizer.current().isOperator('||')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.buildExpression();\r\n      return this.reOrder(left, right, BinaryOperator.Or);\r\n    }\r\n    return left;\r\n  }\r\n\r\n\r\n  private static relationalExp(): IExpression {\r\n    let left: IExpression = this.algebraExp();\r\n    if (this._tokenizer.current().isOperator('<')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.LT);\r\n    }\r\n    if (this._tokenizer.current().isOperator('<=')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.LT_EQ);\r\n    }\r\n    if (this._tokenizer.current().isOperator('==')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.EQ);\r\n    }\r\n    if (this._tokenizer.current().isOperator('>=')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.GT_EQ);\r\n    }\r\n    if (this._tokenizer.current().isOperator('>')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.GT);\r\n    }\r\n    if (this._tokenizer.current().isOperator('!=')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.relationalExp();\r\n      return this.reOrder(left, right, BinaryOperator.NEQ);\r\n    }\r\n    return left;\r\n  }\r\n\r\n  private static algebraExp(): IExpression {\r\n    let left: IExpression = this.productExp();\r\n    if (this._tokenizer.current().isOperator('+')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.algebraExp();\r\n      return this.reOrder(left, right, BinaryOperator.Add);\r\n    }\r\n    if (this._tokenizer.current().isOperator('-')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.algebraExp();\r\n      return this.reOrder(left, right, BinaryOperator.Subtract);\r\n    }\r\n    return left;\r\n  }\r\n\r\n  private static productExp(): IExpression {\r\n    let left: IExpression = this.exponentExp();\r\n    if (this._tokenizer.current().isOperator('*')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.productExp();\r\n      return this.reOrder(left, right, BinaryOperator.Multiply);\r\n    }\r\n    if (this._tokenizer.current().isOperator('/')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.productExp();\r\n      return this.reOrder(left, right, BinaryOperator.Divide);\r\n    }\r\n    if (this._tokenizer.current().isOperator('%')) {\r\n      this._tokenizer.consume();\r\n      let right: IExpression = this.productExp();\r\n      return this.reOrder(left, right, BinaryOperator.Modulo);\r\n    }\r\n    return left;\r\n  }\r\n\r\n  // TODO\r\n  private static exponentExp(): IExpression {\r\n    let left: IExpression = this.atomExp();\r\n    if (this._tokenizer.current().isOperator('!', '')) {\r\n      left = new BinaryExpression(left, left, BinaryOperator.Not);\r\n    }\r\n    return left;\r\n  }\r\n\r\n  private static atomExp(): IExpression {\r\n    // console.warn(this._tokenizer.current());\r\n    // -\r\n    if (this._tokenizer.current().isOperator('-')) {\r\n      this._tokenizer.consume();\r\n      let result: BinaryExpression = new BinaryExpression(new ConstantExpression(0, 'number'), this.atomExp(), BinaryOperator.Subtract);\r\n      result.setSeal();\r\n      return result;\r\n    }\r\n    // \r\n    if (this._tokenizer.current().isOperator('!', '') && (this._tokenizer.next().isIdentifier() || this._tokenizer.next().isKeyword() || this._tokenizer.next().isStartBracket())) {\r\n      this._tokenizer.consume();\r\n      let newValue: IExpression = this.atomExp();\r\n      if (newValue.expType === 'bool') {\r\n        let notExp: BinaryExpression = new BinaryExpression(newValue, newValue, BinaryOperator.Not);\r\n        return notExp;\r\n      } else {\r\n        \r\n        this._tokenizer.addError(this._tokenizer.current(), '(!)bool');\r\n        return ConstantExpression.Empty();\r\n      }\r\n    }\r\n    // +\r\n    if (this._tokenizer.current().isOperator('+') && this._tokenizer.next().isStartBracket()) {\r\n      this._tokenizer.consume();\r\n    }\r\n    // +\r\n    if (this._tokenizer.current().isOperator('+') && this._tokenizer.next().isConstant()) {\r\n      this._tokenizer.consume();\r\n    }\r\n    // +\r\n    if (this._tokenizer.current().isOperator('+') && this._tokenizer.next().isIdentifier()) {\r\n      this._tokenizer.consume();\r\n    }\r\n\r\n    // VeryVar\r\n    // \r\n    // 1**null2.**null3*.*4.*.*\r\n\r\n    // 1.*==null\r\n    // 2..*\r\n    if (this._tokenizer.current().isOperator(\"*\") && this._tokenizer.next().isIdentifier())  //*VeryVarVeryVarExpression\r\n    {\r\n      this._tokenizer.consume();\r\n      let varID: string = \"*\" + this._tokenizer.current().getContents();\r\n      let varExpression: Nullable<IExpression> = VE_Expressions.getParseExpression(this._projectName, this._objectID, varID, this._varScope);\r\n      if (varExpression === null) {\r\n        // \r\n        let templateExpression: Nullable<VeryTemplateExpression> = VE_Expressions.getTemplateExpression(this._projectName, this._objectID, varID, this._varScope);\r\n        if (templateExpression === null) {\r\n          this._tokenizer.addError(this._tokenizer.current(), \"VeryVar\" + varID + \"VeryVar\");\r\n          this._tokenizer.consume();\r\n          return ConstantExpression.Empty();\r\n        }\r\n        else {\r\n          //UnityEngine.Debug.LogError(\"\" + _tokenizer.current());\r\n          // this._tokenizer.consume();\r\n          // return templateExpression;\r\n          // TODO: \r\n          this._tokenizer.addError(this._tokenizer.current(), \"VeryVar\" + varID + \"\");\r\n          this._tokenizer.consume();\r\n          return ConstantExpression.Empty();\r\n        }\r\n      }\r\n      else {\r\n        this._tokenizer.consume();\r\n        return varExpression;\r\n      }\r\n    }\r\n\r\n    // \r\n    if (this._tokenizer.current().isStartBracket()) {\r\n      let endBracket: string = this._bracketPair[this._tokenizer.consume().getTrigger()];\r\n      let result: IExpression = this.buildExpression();\r\n      if (result.className === 'BinaryExpression') {\r\n        (<BinaryExpression>result).setSeal();\r\n      }\r\n      this.expectTrigger(ExpressionType.OPERATOR, endBracket); // \r\n      return result;\r\n    }\r\n    // \r\n    if (this._tokenizer.current().isConstant()) {\r\n      let value: any;\r\n      let typeStr: string = 'string';\r\n      if (this._tokenizer.current().isBool()) {\r\n        value = this._tokenizer.current().getContents().toLowerCase() === 'true' ? true : false;\r\n        typeStr = 'bool';\r\n      } else if (this._tokenizer.current().isNumber()) {\r\n        value = parseFloat(this._tokenizer.current().getContents());\r\n        typeStr = 'number';\r\n        // console.log('' + value);\r\n      } else {\r\n        value = this._tokenizer.current().getContents();\r\n        typeStr = 'string';\r\n      }\r\n      this._tokenizer.consume();\r\n      let constantExp: IExpression = new ConstantExpression(value, typeStr);\r\n      return constantExp;\r\n    }\r\n    // \r\n    if (this._tokenizer.current().isIdentifier()) {\r\n      if (this._tokenizer.next().isStartBracket()) { // \r\n        // \r\n        let endStart: string = this._bracketPair[this._tokenizer.next().getTrigger()];\r\n        return this.functionCall(endStart);\r\n      } else { // \r\n        // VryVar\r\n        let varValue: Variable | null;\r\n        let loc: IPosition = this._tokenizer.current();\r\n        let variableID: string = this._tokenizer.consume().getContents();\r\n        if (variableID.endsWith('.') && this._tokenizer.current().isOperator('*') && this._tokenizer.next().isIdentifier()) { // .*\r\n          // VeryVar.*\r\n          this._tokenizer.consume();\r\n          let varID: string = variableID + '*' + this._tokenizer.current().getContents();\r\n          let varExpression: Nullable<IExpression> = VE_Expressions.getParseExpression(this._projectName, this._objectID, varID, this._varScope);\r\n          if (varExpression === null) {\r\n            // TODO\r\n            let templateExpression: Nullable<VeryTemplateExpression> = VE_Expressions.getTemplateExpression(this._projectName, this._objectID, varID, this._varScope);\r\n            if (templateExpression === null) {\r\n              this._tokenizer.addError(loc, `VeryVar${varID}VeryVar`);\r\n            } else {\r\n              this._tokenizer.addError(this._tokenizer.current(), \"VeryVar\" + varID + \"\");\r\n            }\r\n            this._tokenizer.consume();\r\n            return ConstantExpression.Empty();\r\n          } else {\r\n            this._tokenizer.consume();\r\n            return varExpression;\r\n          }\r\n          // return ConstantExpression.Empty();\r\n        } else {\r\n          // \r\n          varValue = this._scope.find(variableID);\r\n          // console.log(variableID + '  ---  ' + varValue);\r\n          if (varValue === null) {\r\n            this._tokenizer.addError(loc, `${variableID}`);\r\n            return ConstantExpression.Empty();\r\n          } else {\r\n            return new VariableExpression(varValue);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    // TODO\r\n    if (this._tokenizer.current().isKeyword()) {\r\n      // this\r\n      if (this._tokenizer.current().getContents().toLowerCase().trim() === \"this\") {\r\n        if (this._varScope === VariableScope.Fsm && this._fsmID !== \"\") {\r\n          // \r\n          let objects: VE_Objects = VE_Manager.objects(this._projectName);\r\n          if (objects !== null) {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(this._objectID);\r\n            if (veryObject != null) {\r\n              let fsm: VE_Fsm = veryObject.getFsm(this._fsmID);\r\n              if (fsm != null) {\r\n                this._tokenizer.consume();\r\n                return new VeryVarExpression(fsm.fsmVar);\r\n              }\r\n            }\r\n          }\r\n        }\r\n        this._tokenizer.addError(this._tokenizer.current(), \"this\");\r\n        this._tokenizer.consume();\r\n        return ConstantExpression.Empty();\r\n      }\r\n      //   == null \r\n      else if (this._tokenizer.current().getContents().toLowerCase().trim() === \"null\" || this._tokenizer.current().getContents().toLowerCase().trim() === \"none\") {\r\n        //UnityEngine.Debug.LogError(\"\" + _tokenizer.current());\r\n        this._tokenizer.consume();\r\n        // TODO: \r\n        return new VeryTemplateExpression();\r\n      }\r\n      else {\r\n        this._tokenizer.addError(this._tokenizer.current(), \"\" + this._tokenizer.current().getContents() + \"\");\r\n        this._tokenizer.consume();\r\n        return ConstantExpression.Empty();\r\n      }\r\n    }\r\n\r\n    // \r\n    if (this._tokenizer.current().isSpecialIdentifier()) {\r\n      this._tokenizer.addError(this._tokenizer.current(), `ID${this._tokenizer.current().getSource()}`);\r\n      this._tokenizer.consume();\r\n      return ConstantExpression.Empty();\r\n    }\r\n\r\n    // \r\n    // console.warn(this._tokenizer.current());\r\n    this._tokenizer.addError(this._tokenizer.current(), `${this._tokenizer.current().getSource()}`);\r\n    this._tokenizer.consume();\r\n\r\n    return ConstantExpression.Empty();\r\n  }\r\n\r\n  private static reOrder(left: IExpression, right: IExpression, op: BinaryOperator): IExpression {\r\n    if (right.className === 'BinaryExpression') {\r\n      let rightOp: BinaryExpression = <BinaryExpression>right;\r\n      if (!rightOp.isSealed() && rightOp.getPriority() === rightOp.getPriorityOp(op)) {\r\n        this.replaceLeft(rightOp, left, op);\r\n        return right;\r\n      }\r\n    }\r\n    return new BinaryExpression(left, right, op);\r\n  }\r\n\r\n  private static replaceLeft(target: BinaryExpression, newLeft: IExpression, op: BinaryOperator): void {\r\n    if (target.getLeftExp().className === 'BinaryExpression') {\r\n      let leftOp: BinaryExpression = <BinaryExpression>target.getLeftExp();\r\n      if (!leftOp.isSealed() && leftOp.getPriority() === leftOp.getPriorityOp(op)) {\r\n        this.replaceLeft(leftOp, newLeft, op);\r\n        return;\r\n      }\r\n    }\r\n    target.setLeftExp(new BinaryExpression(newLeft, target.getLeftExp(), op));\r\n  }\r\n\r\n  private static functionCall(end_bracket: string): IExpression {\r\n    let call: FunctionExpression = new FunctionExpression();\r\n    let funcToken: Token = this._tokenizer.consume();\r\n    if (!CustomFunctions.hasFunction(funcToken.getContents())) {\r\n      this._tokenizer.addError(funcToken, `${funcToken.getContents()}`);\r\n      return ConstantExpression.Empty();\r\n    }\r\n    let fun: IFunction = CustomFunctions.createFunction(funcToken.getContents());\r\n    call.setFunction(fun);\r\n    this._tokenizer.consume(); // \r\n    while (!this._tokenizer.current().isOperator(end_bracket) && !this._tokenizer.current().isEnd()) {\r\n      if (call.paraCount() !== 0) {\r\n        this.expectTrigger(ExpressionType.OPERATOR, ',');\r\n      }\r\n      call.addPara(this.buildExpression());\r\n    }\r\n    this.expectTrigger(ExpressionType.OPERATOR, end_bracket);\r\n    call.evaluate();\r\n    if (call.paraCount() > fun.parameterNumber() && fun.parameterNumber() >= 0) {\r\n      this._tokenizer.addError(funcToken, `${funcToken.getContents()}Max${fun.parameterNumber()}${call.paraCount()}`);\r\n      return ConstantExpression.Empty();\r\n    }\r\n    return call;\r\n  }\r\n\r\n  private static expectTrigger(type: ExpressionType, trigger: string): void {\r\n    if (this._tokenizer.current().matches(type, trigger)) {\r\n      this._tokenizer.consume();\r\n    } else {\r\n      this._tokenizer.addError(this._tokenizer.current(), `${trigger}${this._tokenizer.current().getTrigger()}`);\r\n    }\r\n  }\r\n\r\n  public static getProjectCollector(): ParseError[] {\r\n    return this._tokenizer.getProblemCollector();\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\n\r\nVE_ExpressionParsing.init();","import { Dictionary } from \"../utility/dictionary\";\r\nimport { IVeryVar } from \"../variables\";\r\nimport { VE_Template } from \"../template\";\r\n\r\nexport interface IExpression {\r\n  expType: string;\r\n  className: string;\r\n  evaluate(): any;\r\n  clone(): IExpression;\r\n}\r\n\r\nexport class TrueExpression implements IExpression {\r\n  public get expType(): string {\r\n    return 'bool';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'TrueExpression';\r\n  }\r\n\r\n  public get value(): boolean {\r\n    return true;\r\n  }\r\n\r\n  constructor() {\r\n  }\r\n\r\n  public evaluate(): any {\r\n    return true;\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let exp: TrueExpression = new TrueExpression();\r\n    return exp;\r\n  }\r\n\r\n  public toString(): string {\r\n    return 'true';\r\n  }\r\n}\r\n\r\nexport class ConstantExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    return this._expType;\r\n  }\r\n  private _expType: string = 'string';\r\n\r\n  public get className(): string {\r\n    return 'ConstantExpression';\r\n  }\r\n\r\n  private _value: any;\r\n\r\n  constructor(value: any, type: string) {\r\n    this._value = value;\r\n    this._expType = type;\r\n  }\r\n\r\n  public evaluate(): any {\r\n    return this._value;\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let expClone: ConstantExpression = new ConstantExpression(this._value, this._expType);\r\n    return expClone;\r\n  }\r\n\r\n  public static Empty(): ConstantExpression {\r\n    return new ConstantExpression(null, 'string');\r\n  }\r\n\r\n  public isEmpty(): boolean {\r\n    if (this._expType === 'string' && this._value === null) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public toString(): string {\r\n    if (this._value !== null) {\r\n      return this._value.toString();\r\n    } else {\r\n      return 'null';\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport enum BinaryOperator {\r\n  Add = '+', Subtract = '-', Multiply = '*', Divide = '/', Modulo = '%', Power = '^', LT = '<', LT_EQ = '<=', EQ = '=', GT_EQ = '>=', GT = '>', NEQ = '!=', And = '&&', Or = '||', Not = '!'\r\n}\r\n\r\nexport class BinaryExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    return this._expType;\r\n  }\r\n  private _expType = '';\r\n\r\n  public get className(): string {\r\n    return 'BinaryExpression';\r\n  }\r\n\r\n  public isRight: boolean = true;\r\n\r\n  private _op: BinaryOperator = BinaryOperator.EQ;\r\n\r\n  private _left: IExpression;\r\n  private _right: IExpression;\r\n  private _isSealed: boolean = false;\r\n\r\n  private static _opDic: { [key: string]: BinaryOperator } = {};\r\n\r\n  private static _priority: Dictionary<BinaryOperator, number> = new Dictionary<BinaryOperator, number>();\r\n\r\n  // private static _priorityKey: BinaryOperator[] = [BinaryOperator.Not, BinaryOperator.Power, BinaryOperator.Multiply, BinaryOperator.Divide, BinaryOperator.Modulo, BinaryOperator.Add, BinaryOperator.Subtract, BinaryOperator.LT, BinaryOperator.LT_EQ, BinaryOperator.EQ, BinaryOperator.GT_EQ, BinaryOperator.GT, BinaryOperator.NEQ, BinaryOperator.And, BinaryOperator.Or];\r\n\r\n  // private static _priorityValue: number[] = [2, 3, 4, 4, 4, 5, 5, 6, 6, 6, 6, 6, 6, 7, 7];\r\n\r\n  public static init(): void {\r\n    this._opDic[\"+\"] = BinaryOperator.Add;\r\n    this._opDic[\"-\"] = BinaryOperator.Subtract;\r\n    this._opDic[\"*\"] = BinaryOperator.Multiply;\r\n    this._opDic[\"/\"] = BinaryOperator.Divide;\r\n    this._opDic[\"%\"] = BinaryOperator.Modulo;\r\n    this._opDic[\"**\"] = BinaryOperator.Power;\r\n    this._opDic[\"^\"] = BinaryOperator.Power;\r\n    this._opDic[\"<\"] = BinaryOperator.LT;\r\n    this._opDic[\"<=\"] = BinaryOperator.LT_EQ;\r\n    this._opDic[\"==\"] = BinaryOperator.EQ;\r\n    this._opDic[\">=\"] = BinaryOperator.GT_EQ;\r\n    this._opDic[\">\"] = BinaryOperator.GT;\r\n    this._opDic[\"!=\"] = BinaryOperator.NEQ;\r\n    this._opDic[\"&&\"] = BinaryOperator.And;\r\n    this._opDic[\"||\"] = BinaryOperator.Or;\r\n    this._opDic[\"!\"] = BinaryOperator.Not;\r\n    this._opDic[\"\"] = BinaryOperator.Not;\r\n\r\n    this._priority.Add(BinaryOperator.Not, 2);\r\n    this._priority.Add(BinaryOperator.Power, 3);\r\n    this._priority.Add(BinaryOperator.Multiply, 4); this._priority.Add(BinaryOperator.Divide, 4); this._priority.Add(BinaryOperator.Modulo, 4);\r\n    this._priority.Add(BinaryOperator.Add, 5); this._priority.Add(BinaryOperator.Subtract, 5);\r\n    this._priority.Add(BinaryOperator.LT, 6); this._priority.Add(BinaryOperator.LT_EQ, 6); this._priority.Add(BinaryOperator.EQ, 6); this._priority.Add(BinaryOperator.GT_EQ, 6); this._priority.Add(BinaryOperator.GT, 6); this._priority.Add(BinaryOperator.NEQ, 6);\r\n    this._priority.Add(BinaryOperator.And, 7); this._priority.Add(BinaryOperator.Or, 7);\r\n  }\r\n\r\n  constructor(left_exp: IExpression, right_exp: IExpression, op: BinaryOperator) {\r\n    this._left = left_exp;\r\n    this._right = right_exp;\r\n    this._op = op;\r\n    // console.log(this._left);\r\n    // console.log(this._right);\r\n    this._expType = this.resultAutoType(left_exp, right_exp, op);\r\n    if (this._expType === 'null') {\r\n      // TODO\r\n      this.isRight = false;\r\n      console.error(\"\" + left_exp.expType + \"\" + right_exp.expType + \"\" + op.toString());\r\n    }\r\n  }\r\n\r\n  private resultAutoType(left: IExpression, right: IExpression, op: BinaryOperator): string {\r\n    if (op === BinaryOperator.Add) {\r\n      if (left.expType === 'string' || right.expType === 'string') {\r\n        return 'string';\r\n      }\r\n      else if (left.expType === 'bool' || right.expType === 'bool') {\r\n        return 'null';\r\n      }\r\n      else if (left.expType === 'number' || right.expType === 'number') {\r\n        return 'number';\r\n      }\r\n      else if (left.expType === 'vector3' || right.expType === 'vector3') {\r\n        return 'vector3';\r\n      }\r\n      else if (left.expType === 'vector2' || right.expType === 'vector2') {\r\n        return 'vector2';\r\n      }\r\n      else {\r\n        return 'null';\r\n      }\r\n    } else if (op === BinaryOperator.Divide || op === BinaryOperator.Multiply || op === BinaryOperator.Modulo || op === BinaryOperator.Power || op === BinaryOperator.Subtract) {\r\n      if (left.expType === 'string' || right.expType === 'string' || left.expType === 'bool' || left.expType === 'bool') {\r\n        return 'null';\r\n      }\r\n      else if (left.expType === 'vector3' && right.expType === 'vector3' && op === BinaryOperator.Subtract) {\r\n        return 'vector3';\r\n      }\r\n      else if (left.expType === 'vector2' && right.expType === 'vector2' && op === BinaryOperator.Subtract) {\r\n        return 'vector2';\r\n      }\r\n      else if ((left.expType === 'number' && right.expType === 'vector3' && op === BinaryOperator.Multiply) || (left.expType === 'vector3' && right.expType === 'number' && op == BinaryOperator.Multiply)) {\r\n        return 'vector3';\r\n      }\r\n      else if ((left.expType === 'number' && right.expType === 'vector2' && op === BinaryOperator.Multiply) || (left.expType === 'vector2' && right.expType === 'number' && op == BinaryOperator.Multiply)) {\r\n        return 'vector2';\r\n      }\r\n      else if (left.expType === 'vector3' && right.expType === 'number' && op === BinaryOperator.Divide) {\r\n        return 'vector3';\r\n      }\r\n      else if (left.expType === 'vector2' && right.expType === 'number' && op === BinaryOperator.Divide) {\r\n        return 'vector2';\r\n      }\r\n      else if (left.expType === 'number' || right.expType === 'number') {\r\n        return 'number';\r\n      }\r\n      else {\r\n        return 'null';\r\n      }\r\n    } else if (op === BinaryOperator.LT || op === BinaryOperator.LT_EQ || op === BinaryOperator.GT_EQ || op === BinaryOperator.GT) {\r\n      if (left.expType === 'string' || right.expType === 'string' || left.expType === 'bool' || right.expType === 'bool') {\r\n        return 'null';\r\n      } else {\r\n        return 'bool';\r\n      }\r\n    } else if (op === BinaryOperator.NEQ || op === BinaryOperator.EQ) {\r\n      if (right.expType !== left.expType) {\r\n        return 'null';\r\n      } else {\r\n        return 'bool';\r\n      }\r\n    } else if (op === BinaryOperator.Not) {\r\n      if (right.expType !== 'bool') {\r\n        return 'null';\r\n      } else {\r\n        return 'bool';\r\n      }\r\n    } else {\r\n      return 'string';\r\n    }\r\n  }\r\n\r\n  public setLeftExp(left_exp: IExpression): void {\r\n    this._left = left_exp;\r\n  }\r\n\r\n  public setRightExp(right_exp: IExpression): void {\r\n    this._right = right_exp;\r\n  }\r\n\r\n  public getOp(): BinaryOperator {\r\n    return this._op;\r\n  }\r\n\r\n  public getLeftExp(): IExpression {\r\n    return this._left;\r\n  }\r\n\r\n  public getRightExp(): IExpression {\r\n    return this._right;\r\n  }\r\n\r\n  public isSealed(): boolean {\r\n    return this._isSealed;\r\n  }\r\n\r\n  public setSeal(): void {\r\n    this._isSealed = true;\r\n  }\r\n\r\n  public toString(): string {\r\n    return \"(\" + this._left.toString() + \" \" + this._op.toString() + \" \" + this._right.toString() + \")\";\r\n    // return this._left.toString() + this._op.toString() + this._right.toString();\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let expClone: BinaryExpression = new BinaryExpression(this._left.clone(), this._right.clone(), this._op);\r\n    return expClone;\r\n  }\r\n\r\n  public evaluate(): any {\r\n    if (this._expType === 'null') {\r\n      return null;\r\n    }\r\n    if (this._left.className === 'FunctionExpression') {\r\n      this._left.evaluate();\r\n    }\r\n    if (this._right.className === 'FunctionExpression') {\r\n      this._right.evaluate();\r\n    }\r\n    this._expType = this.resultAutoType(this._left, this._right, this._op);\r\n    let leftValue: any = this._left.evaluate();\r\n    let rightValue: any = this._right.evaluate();\r\n    if (leftValue === null || rightValue === null) {\r\n      return null;\r\n    }\r\n    if (this._op === BinaryOperator.Add) {\r\n      if (this._expType === 'string') {\r\n        return leftValue.toString() + rightValue.toString();\r\n      } else if (this._expType === 'number') {\r\n        return leftValue + rightValue;\r\n      } else if (this._expType === 'vector3') {\r\n        return (<BABYLON.Vector3>leftValue).add((<BABYLON.Vector3>rightValue));\r\n      } else if (this._expType === 'vector2') {\r\n        return (<BABYLON.Vector2>leftValue).add((<BABYLON.Vector2>rightValue));\r\n      } else {\r\n        return null;\r\n      }\r\n    } else if (this._op === BinaryOperator.Subtract) {\r\n      if (this._expType === 'number') {\r\n        return leftValue - rightValue;\r\n      } else if (this._expType === 'vector3') {\r\n        return (<BABYLON.Vector3>leftValue).subtract((<BABYLON.Vector3>rightValue));\r\n      } else if (this._expType === 'vector2') {\r\n        return (<BABYLON.Vector2>leftValue).subtract((<BABYLON.Vector2>rightValue));\r\n      } else {\r\n        return null;\r\n      }\r\n    } else if (this._op === BinaryOperator.Multiply) {\r\n      if (this._expType === 'number') {\r\n        return leftValue * rightValue;\r\n      } else if (this._expType === 'vector3') {\r\n        if (typeof (leftValue) === 'number') {\r\n          return (<BABYLON.Vector3>rightValue).multiplyByFloats(leftValue, leftValue, leftValue);\r\n        } else if (typeof (rightValue) === 'number') {\r\n          return (<BABYLON.Vector3>leftValue).multiplyByFloats(rightValue, rightValue, rightValue);\r\n        } else {\r\n          return null;\r\n        }\r\n      } else if (this._expType === 'vector2') {\r\n        if (typeof (leftValue) === 'number') {\r\n          return (<BABYLON.Vector2>rightValue).multiplyByFloats(leftValue, leftValue);\r\n        } else if (typeof (rightValue) === 'number') {\r\n          return (<BABYLON.Vector2>leftValue).multiplyByFloats(rightValue, rightValue);\r\n        } else {\r\n          return null;\r\n        }\r\n      }\r\n    } else if (this._op === BinaryOperator.Divide) {\r\n      if (this._expType === 'number') {\r\n        return leftValue / rightValue;\r\n      } else if (this._expType === 'vector3') {\r\n        if (typeof (rightValue) === 'number') {\r\n          return new BABYLON.Vector3((<BABYLON.Vector3>leftValue).x / rightValue, (<BABYLON.Vector3>leftValue).y / rightValue, (<BABYLON.Vector3>leftValue).z / rightValue);\r\n        } else {\r\n          return null;\r\n        }\r\n      } else if (this._expType === 'vector2') {\r\n        if (typeof (rightValue) === 'number') {\r\n          return new BABYLON.Vector2((<BABYLON.Vector2>leftValue).x / rightValue, (<BABYLON.Vector2>leftValue).y / rightValue);\r\n        } else {\r\n          return null;\r\n        }\r\n      }\r\n    } else if (this._op === BinaryOperator.Modulo) {\r\n      if (typeof (leftValue) === 'number' && typeof (rightValue) === 'number') {\r\n        return leftValue % rightValue;\r\n      } else {\r\n        return null;\r\n      }\r\n    } else if (this._op === BinaryOperator.Power) {\r\n      if (typeof (leftValue) === 'number' && typeof (rightValue) === 'number') {\r\n        return Math.pow(leftValue, rightValue);\r\n      } else {\r\n        return null;\r\n      }\r\n    } else if (this._op === BinaryOperator.And) {\r\n      let l: boolean = this.getBoolean(leftValue);\r\n      let r: boolean = this.getBoolean(rightValue);\r\n      return l && r;\r\n    } else if (this._op === BinaryOperator.Or) {\r\n      let l: boolean = this.getBoolean(leftValue);\r\n      let r: boolean = this.getBoolean(rightValue);\r\n      return l || r;\r\n    } else if (this._op === BinaryOperator.LT) {\r\n      return leftValue < rightValue;\r\n    } else if (this._op === BinaryOperator.LT_EQ) {\r\n      return leftValue <= rightValue;\r\n    } else if (this._op === BinaryOperator.GT_EQ) {\r\n      return leftValue >= rightValue;\r\n    } else if (this._op === BinaryOperator.GT) {\r\n      return leftValue > rightValue;\r\n    } else if (this._op === BinaryOperator.EQ) {\r\n      return leftValue === rightValue;\r\n    } else if (this._op === BinaryOperator.NEQ) {\r\n      return leftValue !== rightValue;\r\n    } else if (this._op === BinaryOperator.Not) {\r\n      return !this.getBoolean(rightValue);\r\n    } else {\r\n      return !this.getBoolean(leftValue);\r\n    }\r\n  }\r\n\r\n  private getBoolean(value: any): boolean {\r\n    if (typeof (value) === 'number') {\r\n      if (value === 0) {\r\n        return false;\r\n      } else {\r\n        return true;\r\n      }\r\n    } else if (typeof (value) === 'string') {\r\n      if (value === '') {\r\n        return false;\r\n      } else {\r\n        return true;\r\n      }\r\n    } else if (typeof (value) === 'boolean') {\r\n      return value;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getPriority(): number {\r\n    // let p: number = BinaryExpression._priorityKey.indexOf(this._op);\r\n    // if(p > -1) {\r\n    //   return BinaryExpression._priorityValue[p];\r\n    // } else {\r\n    //   return 100;\r\n    // }\r\n    let p: number | null = BinaryExpression._priority.GetValue(this._op);\r\n    if (p === null) {\r\n      return 100;\r\n    } else {\r\n      return p;\r\n    }\r\n  }\r\n\r\n  public getPriorityOp(op: BinaryOperator): number {\r\n    // let p: number = BinaryExpression._priorityKey.indexOf(op);\r\n    // if(p > -1) {\r\n    //   return BinaryExpression._priorityValue[p];\r\n    // } else {\r\n    //   return 100;\r\n    // }\r\n    let p: number | null = BinaryExpression._priority.GetValue(op);\r\n    if (p === null) {\r\n      return 100;\r\n    } else {\r\n      return p;\r\n    }\r\n  }\r\n}\r\n\r\nexport class VeryVarExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    if (this._value) {\r\n      return this._value.varType;\r\n    } else {\r\n      return 'null';\r\n    }\r\n  }\r\n\r\n  private _value: IVeryVar;\r\n\r\n  public get className(): string {\r\n    return 'VeryVarExpression';\r\n  }\r\n\r\n  public get value(): IVeryVar {\r\n    return this._value;\r\n  }\r\n\r\n  constructor(value: IVeryVar) {\r\n    this._value = value;\r\n  }\r\n\r\n  public evaluate(): any {\r\n    return this._value.getValue();\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let expClone: VeryVarExpression = new VeryVarExpression(this._value.clone());\r\n    return expClone;\r\n  }\r\n\r\n  public toString(): string {\r\n    if (this._value) {\r\n      return this._value.toString();\r\n    } else {\r\n      return 'null';\r\n    }\r\n  }\r\n}\r\n\r\nexport class VeryTemplateExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    return 'bool';\r\n  }\r\n\r\n  private _isTemplate: boolean = false;\r\n  private _template: VE_Template;\r\n\r\n  public get className(): string {\r\n    return 'VeryTemplateExpression';\r\n  }\r\n\r\n  // public get value(): IVeryVar {\r\n  //   return this._value;\r\n  // }\r\n\r\n  // TODO \r\n  constructor() {\r\n    this._template = new VE_Template('', '');\r\n  }\r\n\r\n  public setTemplate(template: VE_Template): void {\r\n    this._isTemplate = true;\r\n    this._template = template;\r\n  }\r\n\r\n  public evaluate(): any {\r\n    if (this._isTemplate) {\r\n      if (!this._template) {\r\n        return false;\r\n      }\r\n      else {\r\n        return this._template.templateInstance !== null;\r\n      }\r\n    }\r\n    else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let varExp: VeryTemplateExpression = new VeryTemplateExpression();\r\n    varExp._template = this._template;\r\n    varExp._isTemplate = this._isTemplate;\r\n    return varExp;\r\n  }\r\n\r\n  public toString(): string {\r\n    if (this._isTemplate) {\r\n      if (!this._template) {\r\n        return \"false\";\r\n      }\r\n      else {\r\n        return (this._template.templateInstance === null).toString();\r\n      }\r\n    }\r\n    else {\r\n      return \"false\";\r\n    }\r\n  }\r\n}\r\n\r\n\r\nBinaryExpression.init();","import { ParseError } from \"./positions\";\r\n\r\nexport abstract class ForwardQuery<T> {\r\n\r\n  protected itemBuffer: Array<T> = [];\r\n\r\n  protected endReached: boolean = false;\r\n\r\n  protected problemCollector: Array<ParseError> = [];\r\n\r\n  protected endOfInputIndicator: T | undefined = undefined;\r\n\r\n  public next(): T {\r\n    return this.nextOffset(1);\r\n  }\r\n\r\n  public nextOffset(offset: number): T {\r\n    while (this.itemBuffer.length <= offset && !this.endReached) {\r\n      let item: T | undefined = this.fetch();\r\n      if (item !== undefined) {\r\n        this.itemBuffer.push(item);\r\n      } else {\r\n        this.endReached = true;\r\n      }\r\n    }\r\n    if (offset >= this.itemBuffer.length) {\r\n      if (this.endOfInputIndicator === undefined) {\r\n        this.endOfInputIndicator = this.endOfInput();\r\n      }\r\n      return this.endOfInputIndicator;\r\n    } else {\r\n      return this.itemBuffer[offset];\r\n    }\r\n  }\r\n\r\n  public current(): T {\r\n    return this.nextOffset(0);\r\n  }\r\n\r\n  protected abstract endOfInput(): T;\r\n\r\n  protected abstract fetch(): T | undefined;\r\n\r\n  public consume(): T {\r\n    let result: T = this.current();\r\n    this.consumeNext(1);\r\n    return result;\r\n  }\r\n\r\n  public consumeNext(numberOfItems: number): void {\r\n    if (numberOfItems < 0) {\r\n      return;\r\n    }\r\n    while (numberOfItems-- > 0) {\r\n      if (this.itemBuffer.length !== 0) {\r\n        this.itemBuffer.shift();\r\n      } else {\r\n        if (this.endReached) {\r\n          return;\r\n        } else {\r\n          let item: T | undefined = this.fetch();\r\n          if (item === undefined) {\r\n            this.endReached = true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public getProblemCollector(): Array<ParseError> {\r\n    return this.problemCollector;\r\n  }\r\n\r\n  public setProblemCollector(problemCollector: Array<ParseError>): void {\r\n    this.problemCollector = problemCollector;\r\n  }\r\n\r\n\r\n}","import { IExpression } from \"./expressions\";\r\nimport { IFunction } from \"./functions\";\r\n\r\nexport class FunctionExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    return this._function.expType;\r\n  }\r\n\r\n  public get className(): string {\r\n    return this._function.className;\r\n  }\r\n\r\n  private _function!: IFunction;\r\n  private _paras: IExpression[] = [];\r\n\r\n  public setFunction(func: IFunction): void {\r\n    this._function = func;\r\n  }\r\n\r\n  public addPara(exp: IExpression): void {\r\n    this._paras.push(exp);\r\n  }\r\n\r\n  public paraCount(): number {\r\n    return this._paras.length;\r\n  }\r\n\r\n  public evaluate(): any {\r\n    let r: any = null;\r\n    try {\r\n      r = this._function.evaluate(this._paras);\r\n    } catch (e) {\r\n      console.error('' + e);\r\n      return null;\r\n    }\r\n    return r;\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let expClone: FunctionExpression = new FunctionExpression();\r\n    expClone._function = this._function;\r\n    for (let i: number = 0; i < this._paras.length; i++) {\r\n      expClone._paras.push(this._paras[i].clone());\r\n    }\r\n    return expClone;\r\n  }\r\n\r\n  public toString(): string {\r\n    let printStr: string = this._function.className + '(';\r\n    for(let i: number = 0; i < this._paras.length; i++) {\r\n      if(i > 0) {\r\n        printStr += ',' + this._paras[i].toString();\r\n      } else {\r\n        printStr += this._paras[i].toString();\r\n      }\r\n    }\r\n    return printStr + ')';\r\n  }\r\n\r\n}","import { IExpression } from \"./expressions\";\r\nimport { ShowError } from \"../html\";\r\nimport { VE_ErrorManager, VE_Error } from \"../global\";\r\nimport { Severity } from \"../enum\";\r\n\r\nexport interface IFunction {\r\n  expType: string;\r\n  className: string;\r\n  parameterNumber(): number;\r\n  evaluate(args: Array<IExpression>): any;\r\n}\r\n\r\nexport class Pow implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'pow';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 2;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.pow(args[0].evaluate(), args[1].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Pow1${args[0].expType}1${args[0].evaluate()}2${args[1].expType}2${args[1].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Ln implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'ln';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.log(args[0].evaluate());\r\n    if (value === NaN || value === Infinity) {\r\n      ShowError.showError(`Ln${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Lg implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'lg';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.log10(args[0].evaluate());\r\n    if (value === NaN || value === Infinity) {\r\n      ShowError.showError(`Lg${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Sqrt implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'sqrt';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.sqrt(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Sqrt${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Abs implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'abs';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.abs(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Abs${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Random implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'random';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 2;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let start: number = args[0].evaluate();\r\n    let distance: number = args[1].evaluate() - args[0].evaluate();\r\n    let value: number = Math.random() * distance + start;\r\n    if (value === NaN) {\r\n      ShowError.showError(`Random1${args[0].expType}1${args[0].evaluate()}2${args[1].expType}2${args[1].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Round implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'round';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.round(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Round${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Sin implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'sin';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.sin(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Sin${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class ASin implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'asin';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.asin(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`ASin${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Cos implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'cos';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.cos(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Cos${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class ACos implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'acos';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.acos(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`ACos${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class Tan implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'tan';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.tan(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`Tan${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nexport class ATan implements IFunction {\r\n\r\n  public get expType(): string {\r\n    return 'number';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'atan';\r\n  }\r\n\r\n  public parameterNumber(): number {\r\n    return 1;\r\n  }\r\n\r\n  public evaluate(args: IExpression[]): any {\r\n    let value: number = Math.atan(args[0].evaluate());\r\n    if (value === NaN) {\r\n      ShowError.showError(`ATan${args[0].expType}${args[0].evaluate()}`);\r\n      return undefined;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\n\r\nexport class CustomFunctions {\r\n\r\n  // private static _functions: {[key:string]: IFunction} = {};\r\n\r\n  private static _functionsDic: { [key: string]: Function } = {};\r\n\r\n  public static hasFunction(func_name: string): boolean {\r\n    func_name = func_name.toLowerCase();\r\n    if (this._functionsDic[func_name]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // public static addFunction(func: IFunction): void {\r\n  //   let funcName: string = func.className.toLowerCase();\r\n  //   if(this._functions[funcName]) {\r\n  //     ShowError.showError(`IDID${funcName}ID`);\r\n  //   } else {\r\n  //     this._functions[funcName] = func;\r\n  //   }\r\n  // }\r\n\r\n  public static addFunction(func: Function): void {\r\n    let tempFunc: any = new func.prototype.constructor();\r\n    let funcName: string = tempFunc.className.toLowerCase();\r\n    if (this._functionsDic[funcName]) {\r\n      VE_ErrorManager.Add(new VE_Error('', `IDID${tempFunc.className}ID`, '', Severity.Error));\r\n    } else {\r\n      this._functionsDic[funcName] = func;\r\n    }\r\n  }\r\n\r\n  public static createFunction(func_name: string): IFunction {\r\n    let tempFunc: any = new this._functionsDic[func_name.trim().toLowerCase()].prototype.constructor();\r\n    return <IFunction>tempFunc;\r\n  }\r\n\r\n  public static remove(func_name: string): void {\r\n    func_name = func_name.toLowerCase();\r\n    delete this._functionsDic[func_name];\r\n  }\r\n}\r\n\r\n\r\nCustomFunctions.addFunction(Pow);\r\nCustomFunctions.addFunction(Ln);\r\nCustomFunctions.addFunction(Lg);\r\nCustomFunctions.addFunction(Sqrt);\r\nCustomFunctions.addFunction(Abs);\r\nCustomFunctions.addFunction(Random);\r\nCustomFunctions.addFunction(Round);\r\nCustomFunctions.addFunction(Sin);\r\nCustomFunctions.addFunction(ASin);\r\nCustomFunctions.addFunction(Cos);\r\nCustomFunctions.addFunction(ACos);\r\nCustomFunctions.addFunction(Tan);\r\nCustomFunctions.addFunction(ATan);\r\n\r\n","export * from './expressionEnum';\r\nexport * from './expressions';\r\nexport * from './functions';\r\nexport * from './positions';\r\nexport * from './expChar';\r\nexport * from './token';\r\nexport * from './forwardQuery';\r\nexport * from './tokenizer';\r\nexport * from './tokenReader';\r\nexport * from './variable';\r\nexport * from './variableExpression';\r\nexport * from './scope';\r\nexport * from './functionExpression';\r\nexport * from './expressionParsing';\r\nexport * from './expManager';\r\nexport * from './veryExpressions';","export interface IPosition {\r\n  getValue(): string;\r\n  getLine(): number;\r\n  getPos(): number;\r\n}\r\n\r\n\r\nexport class NameLocation implements IPosition {\r\n\r\n  private _value: string = '';\r\n  private _line: number = 0;\r\n  private _pos: number = 0;\r\n\r\n\r\n  constructor(value: string) {\r\n    this._value = value;\r\n    this._line = 1;\r\n    this._pos = 1;\r\n  }\r\n\r\n\r\n  public getValue(): string {\r\n    return this._value;\r\n  }\r\n\r\n  public getLine(): number {\r\n    return this._line;\r\n  }  \r\n  \r\n  \r\n  public getPos(): number {\r\n    return this._pos;\r\n  }\r\n}\r\n\r\nexport enum SeverityExp{\r\n  Warning,\r\n  Error\r\n}\r\n\r\nexport class ParseError{\r\n\r\n  private _pos: IPosition;\r\n  private _message: string;\r\n  private _severity: SeverityExp;\r\n\r\n  constructor(pos: IPosition, msg: string, severity: SeverityExp) {\r\n    this._pos = pos;\r\n    this._message = msg;\r\n    this._severity = severity;\r\n  }\r\n\r\n  public static Warning(pos: IPosition, msg: string): ParseError {\r\n    let message: string = msg;\r\n    if(pos.getLine() > 0) {\r\n      message = ` >>> ${pos.getPos()}${msg}`;\r\n    }\r\n    return new ParseError(pos, message, SeverityExp.Warning);\r\n  }\r\n\r\n  public static Error(pos: IPosition, msg: string): ParseError {\r\n    let message: string = msg;\r\n    if(pos.getLine() > 0) {\r\n      message = ` >>> ${pos.getPos()}${msg}`;\r\n    }\r\n    return new ParseError(pos, message, SeverityExp.Error);\r\n  }\r\n\r\n  public getPosition(): IPosition {\r\n    return this._pos;\r\n  }\r\n\r\n  public getMessage(): string {\r\n    return this._message;\r\n  }\r\n\r\n  public getSeverity(): SeverityExp {\r\n    return this._severity;\r\n  }\r\n\r\n  public toString(): string {\r\n    return `${this._severity.toString()}${this._message}`;\r\n  }\r\n\r\n}","import { Variable } from \"./variable\";\r\n\r\nexport class Scope {\r\n\r\n  private _parent: Scope | undefined = undefined;\r\n\r\n  private _context: { [key: string]: Variable } = {};\r\n\r\n  private static _root: Scope;\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public static Create(): Scope {\r\n    let result: Scope = new Scope();\r\n    result._parent = Scope.GetRootScope();\r\n    return result;\r\n  }\r\n\r\n  public static GetRootScope(): Scope {\r\n    if (Scope._root === undefined) {\r\n      Scope._root = new Scope();\r\n      Scope._root.setVariable(\"PI\", 'number', Math.PI).makeConstant(Math.PI);\r\n      Scope._root.setVariable(\"EULER\", 'number', Math.E).makeConstant(Math.E);\r\n    }\r\n    return Scope._root;\r\n  }\r\n\r\n  public static CreateWithParent(parent: Scope): Scope {\r\n    let result: Scope = Scope.Create();\r\n    result._parent = parent;\r\n    return result;\r\n  }\r\n\r\n  public find(name: string): Variable | null {\r\n    if (this._context[name]) {\r\n      return this._context[name];\r\n    }\r\n    if (this._parent !== undefined) {\r\n      return this._parent.find(name);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  public setVariable(name: string, type: string, value: any): Variable {\r\n    let result: Variable | null = this.find(name);\r\n    if (result !== null) {\r\n      result.setType(type);\r\n      result.setValue(value);\r\n      return result;\r\n    }\r\n    return this.createVariable(name, type, value);\r\n  }\r\n\r\n  public createVariable(name: string, type: string, value: any): Variable {\r\n    if (this._context[name]) {\r\n      this._context[name].setType(type);\r\n      this._context[name].setValue(value);\r\n      return this._context[name];\r\n    }\r\n    let result: Variable = new Variable(name, type, value);\r\n    this._context[name] = result;\r\n    return result;\r\n  }\r\n\r\n\r\n  public setValue(name: string, value: any): void {\r\n    if (this._context[name]) {\r\n      this._context[name].setValue(value);\r\n    }\r\n  }\r\n\r\n  public isCreated(name: string): boolean {\r\n    if (this._context[name]) {\r\n      return true;\r\n    }\r\n    if (this._parent !== undefined) {\r\n      if (this._parent.find(name) !== null) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public clear(): void {\r\n    this._context = {};\r\n  }\r\n\r\n}","import { IPosition } from \"./positions\";\r\nimport { ExpressionType } from \"./expressionEnum\";\r\nimport { ExpChar } from \"./expChar\";\r\n\r\nexport class Token implements IPosition {\r\n\r\n  public type: ExpressionType = ExpressionType.STRING;\r\n\r\n  private _source: string = '';\r\n  private _contents: string = '';\r\n  private _trigger: string = '';\r\n\r\n  private _line: number = 0;\r\n  private _pos: number = 0;\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public static Create(type: ExpressionType, pos: IPosition): Token {\r\n    let result: Token = new Token();\r\n    result.type = type;\r\n    result._line = pos.getLine();\r\n    result._pos = pos.getPos();\r\n    return result;\r\n  }\r\n\r\n  public static CreateAndFill(type: ExpressionType, ch: ExpChar): Token {\r\n    let result: Token = new Token();\r\n    result.type = type;\r\n    result._line = ch.getLine();\r\n    result._pos = ch.getPos();\r\n    result._contents = ch.getValue();\r\n    result._trigger = ch.getValue();\r\n    result._source = ch.toString();\r\n    return result;\r\n  }\r\n\r\n  public addToTrigger(ch: ExpChar): Token {\r\n    this._trigger += ch.getValue();\r\n    this._source += ch.getValue();\r\n    return this;\r\n  }\r\n\r\n  public addToSource(ch: ExpChar): Token {\r\n    this._source += ch.getValue();\r\n    return this;\r\n  }\r\n\r\n  public addToContentChar(ch: ExpChar): Token {\r\n    this.addToContent(ch.getValue());\r\n    return this;\r\n  }\r\n\r\n  public addToContent(ch: string): Token {\r\n    this._contents += ch;\r\n    this._source += ch;\r\n    return this;\r\n  }\r\n\r\n  public getTrigger(): string {\r\n    return this._trigger;\r\n  }\r\n\r\n  public getTokenType(): ExpressionType {\r\n    return this.type;\r\n  }\r\n\r\n  public getContents(): string {\r\n    return this._contents;\r\n  }\r\n\r\n  public getSource(): string {\r\n    return this._source;\r\n  }\r\n\r\n  public getValue(): string {\r\n    return this._source;\r\n  }\r\n\r\n  public getLine(): number {\r\n    return this._line;\r\n  }\r\n\r\n  public getPos(): number {\r\n    return this._pos;\r\n  }\r\n\r\n  public setTokenType(new_type: ExpressionType): void {\r\n    this.type = new_type;\r\n  }\r\n\r\n  public setTrigger(trigger: string): void {\r\n    this._trigger = trigger;\r\n  }\r\n\r\n  public setContent(content: string): void {\r\n    this._contents = content;\r\n  }\r\n\r\n  public setSource(source: string): void {\r\n    this._source = source;\r\n  }\r\n\r\n  public isEnd(): boolean {\r\n    return this.type === ExpressionType.EOI;\r\n  }\r\n\r\n  public is(type: ExpressionType): boolean {\r\n    return this.type === type;\r\n  }\r\n\r\n  public matches(type: ExpressionType, trigger: string): boolean {\r\n    if (!this.is(type)) {\r\n      return false;\r\n    }\r\n    if (trigger === '') {\r\n      return false;\r\n    }\r\n    return this.getTrigger() === trigger;\r\n  }\r\n\r\n  public isOperator(...symbols: string[]): boolean {\r\n    if (symbols.length === 0) {\r\n      return this.is(ExpressionType.OPERATOR);\r\n    }\r\n    for (let i: number = 0; i < symbols.length; i++) {\r\n      if (this.matches(ExpressionType.OPERATOR, symbols[i])) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public isStartBracket(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === '(' || this._trigger === '') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isEndBracket(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === ')' || this._trigger === '') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isStartSquareBracket(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === '[' || this._trigger === '') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isEndSquareBracket(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === ']' || this._trigger === '') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isStartBrace(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === '{') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isEndBrace(): boolean {\r\n    if (this.is(ExpressionType.OPERATOR)) {\r\n      if (this._trigger === '}') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isKeyword(...keywords: string[]): boolean {\r\n    if (keywords.length === 0) {\r\n      return this.is(ExpressionType.KEYWORD);\r\n    }\r\n    for (let i: number = 0; i < keywords.length; i++) {\r\n      if (this.matches(ExpressionType.KEYWORD, keywords[i])) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public isIdentifier(...values: string[]): boolean {\r\n    if (values.length === 0) {\r\n      return this.is(ExpressionType.ID);\r\n    }\r\n    for (let i: number = 0; i < values.length; i++) {\r\n      if (this.matches(ExpressionType.ID, values[i])) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public isSpecialIdentifier(...triggers: string[]): boolean {\r\n    if (triggers.length === 0) {\r\n      return this.is(ExpressionType.SPECIAL_ID);\r\n    }\r\n    for (let i: number = 0; i < triggers.length; i++) {\r\n      if (this.matches(ExpressionType.SPECIAL_ID, triggers[i])) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public isSpecialIdentifierWithContent(trigger: string, ...contents: string[]): boolean {\r\n    if (!this.matches(ExpressionType.SPECIAL_ID, trigger)) {\r\n      return false;\r\n    }\r\n    if (contents.length === 0) {\r\n      return true;\r\n    }\r\n    for (let i: number = 0; i < contents.length; i++) {\r\n      if (this.getContents() === contents[i]) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public isNumber(): boolean {\r\n    return this.is(ExpressionType.NUMBER);\r\n  }\r\n\r\n  public isBool(): boolean {\r\n    return this.is(ExpressionType.BOOL);\r\n  }\r\n\r\n  public isString(): boolean {\r\n    return this.is(ExpressionType.STRING);\r\n  }\r\n\r\n  public isConstant(): boolean {\r\n    return this.isNumber() || this.isBool() || this.isString();\r\n  }\r\n\r\n  public toString(): string {\r\n    return this.getTokenType().toString() + ': ' + this.getContents() + ' (' + this._line + ': ' + this._pos + '), Trigger: ' + this.getTrigger();\r\n  }\r\n\r\n\r\n\r\n\r\n}","import { ForwardQuery } from \"./forwardQuery\";\r\nimport { ExpChar } from \"./expChar\";\r\n\r\nexport class TokenReader extends ForwardQuery<ExpChar> {\r\n\r\n  private _inputExp: string = '';\r\n  private _line: number = 1;\r\n  private _pos: number = 0;\r\n  private _count: number = 0;\r\n  private _operator: number = 0;\r\n\r\n  constructor(input_exp: string) {\r\n    super();\r\n    if (input_exp === '') {\r\n\r\n    }\r\n    this._inputExp = input_exp;\r\n    this._count = input_exp.length;\r\n    this._operator = 0;\r\n  }\r\n\r\n  protected endOfInput(): ExpChar {\r\n    return new ExpChar('\\0', this._line, this._pos);\r\n  }\r\n\r\n\r\n  protected fetch(): ExpChar | undefined {\r\n    if (this._operator <= this._count - 1) {\r\n      let readChar: string = this._inputExp[this._operator];\r\n      this._operator++;\r\n      if (readChar === '\\n') {\r\n        this._line++;\r\n        this._pos = 0;\r\n      }\r\n      this._pos++;\r\n      return new ExpChar(readChar, this._line, this._pos);\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  public toString(): string {\r\n    if (this.itemBuffer.length === 0) {\r\n      return this._line + ':' + this._pos + ': Buffer empty';\r\n    }\r\n    if (this.itemBuffer.length < 2) {\r\n      return this._line + ':' + this._pos + ': ' + this.current().toString();\r\n    }\r\n    return this._line + ':' + this._pos + ': ' + this.current().toString() + ', ' + this.next().toString();\r\n  }\r\n\r\n}","import { ForwardQuery } from \"./forwardQuery\";\r\nimport { Token } from \"./token\";\r\nimport { TokenReader } from \"./tokenReader\";\r\nimport { ExpressionType } from \"./expressionEnum\";\r\nimport { ParseError, IPosition } from \"./positions\";\r\nimport { ExpChar } from \"./expChar\";\r\n\r\nexport class Tokenizer extends ForwardQuery<Token> {\r\n\r\n  private _inputExp: TokenReader;\r\n\r\n  private _decimalSeparator: string = '.';\r\n  private _lineComment: string = '//';\r\n  private _blockCommentStart: string = '/*';\r\n  private _blockCommentEnd: string = '*/';\r\n  private _brackets: string[] = ['(', ')', '', '', '[', ']', '{', '}', '', ''];\r\n  private _treatSinglePipeAsBracket: boolean = true;\r\n  private _specialIdStarters: string[] = [];\r\n  private _specialIdTerminators: string[] = [];\r\n  private _keywords: { [key: string]: string } = {};\r\n  private _keywordsCaseSensitive: boolean = false;\r\n  private _stringDelimiters: { [key: string]: string } = {};\r\n  private _boolConstant: string[] = [];\r\n\r\n  constructor(input_exp: string) {\r\n    super();\r\n    this._inputExp = new TokenReader(input_exp);\r\n    this._stringDelimiters = {};\r\n    this._stringDelimiters['\\\"'] = '\\\\';\r\n    this._stringDelimiters['\\''] = '\\0';\r\n    this._boolConstant = [];\r\n    this._boolConstant.push('false');\r\n    this._boolConstant.push('true');\r\n    this._keywords = {};\r\n    this._keywords['this'] = 'this';\r\n    this._keywords['null'] = 'null';\r\n    this._keywords['none'] = 'none';\r\n    this._keywords['undefined'] = 'undefined';\r\n  }\r\n\r\n  public endOfInput(): Token {\r\n    return Token.CreateAndFill(ExpressionType.EOI, this._inputExp.current());\r\n  }\r\n\r\n  public fetch(): Token | undefined {\r\n    // \r\n    while (this._inputExp.current().isWhiteSpace()) {\r\n      this._inputExp.consume();\r\n    }\r\n\r\n    // \r\n    if (this._inputExp.current().isEndOfInput()) {\r\n      return undefined;\r\n    }\r\n\r\n    // \r\n    if (this.isAtStartOfLineComment(true)) {\r\n      this.skipToEndOfLine();\r\n      return this.fetch();\r\n    }\r\n\r\n    // \r\n    if (this.isAtStartOfBlockComment(true)) {\r\n      this.skipBlockComment();\r\n      return this.fetch();\r\n    }\r\n\r\n    // \r\n    if (this.isAtStartOfNumber()) {\r\n      return this.fetchNumber();\r\n    }\r\n\r\n    // \r\n    if (this.isAtStartOfIdentifier()) {\r\n      return this.fetchId();\r\n    }\r\n\r\n    // \r\n    if (this._stringDelimiters[this._inputExp.current().getValue()]) {\r\n      return this.fetchString();\r\n    }\r\n\r\n    //\r\n    if (this.isAtBracket(false)) {\r\n      return Token.CreateAndFill(ExpressionType.OPERATOR, this._inputExp.consume());\r\n    }\r\n\r\n    // ID$Test$\r\n    if (this.isAtStartOfSpecialId()) {\r\n      return this.fetchSpecialId();\r\n    }\r\n\r\n    // \r\n    if (this.isOperator(this._inputExp.current())) {\r\n      return this.fetchOperator();\r\n    }\r\n\r\n    //\r\n    this.problemCollector.push(ParseError.Error(this._inputExp.current(), \": \" + this._inputExp.current().getValue()));\r\n\r\n    this._inputExp.consume();\r\n    return this.fetch();\r\n  }\r\n\r\n  private fetchNumber(): Token {\r\n    let result: Token = Token.Create(ExpressionType.NUMBER, this._inputExp.current());\r\n    result.addToContentChar(this._inputExp.consume());\r\n    let hasDecimal: boolean = false;\r\n    while (this._inputExp.current().isDigit() || this._inputExp.current().is(this._decimalSeparator)) {\r\n      if (this._inputExp.current().is(this._decimalSeparator)) {\r\n        if (hasDecimal) {\r\n          this.problemCollector.push(ParseError.Error(this._inputExp.current(), \"\"));\r\n        }\r\n        hasDecimal = true;\r\n        result.addToContentChar(this._inputExp.consume());\r\n      } else {\r\n        result.addToContentChar(this._inputExp.consume());\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  private fetchId(): Token {\r\n    let result: Token = Token.Create(ExpressionType.ID, this._inputExp.current());\r\n    result.addToContentChar(this._inputExp.consume());\r\n    while (this.isIdentifierChar(this._inputExp.current())) {\r\n      result.addToContentChar(this._inputExp.consume());\r\n    }\r\n    //UnityEngine.Debug.LogWarning(result.GetContents());\r\n    if (!this._inputExp.current().isEndOfInput() && this._specialIdTerminators.indexOf(this._inputExp.current().getValue()) > -1) {\r\n      let specialId: Token = Token.Create(ExpressionType.SPECIAL_ID, result);\r\n      specialId.setTrigger(this._inputExp.current().getValue());\r\n      specialId.setContent(result.getContents());\r\n      specialId.setSource(result.getContents());\r\n      specialId.addToSource(this._inputExp.current());\r\n      this._inputExp.consume();\r\n      return this.handleKeywords(specialId);\r\n    }\r\n    return this.handleKeywords(result);\r\n  }\r\n\r\n  private fetchString(): Token {\r\n    //\r\n    let separator: string = this._inputExp.current().getValue();\r\n    //\r\n    //char escapeChar = _stringDelimiters[_inputExp.current().GetValue()];\r\n    let result: Token = Token.Create(ExpressionType.STRING, this._inputExp.current());\r\n    result.addToTrigger(this._inputExp.consume());\r\n    while (!this._inputExp.current().isNewLine() && !this._inputExp.current().is(separator) && !this._inputExp.current().isEndOfInput()) {\r\n      result.addToContentChar(this._inputExp.consume());\r\n    }\r\n    if (this._inputExp.current().is(separator)) {\r\n      result.addToSource(this._inputExp.consume());\r\n    }\r\n    else {\r\n      this.problemCollector.push(ParseError.Error(this._inputExp.current(), \"\"));\r\n    }\r\n    return result;\r\n  }\r\n\r\n  private isAtStartOfLineComment(consume: boolean): boolean {\r\n    if (this._lineComment !== '') {\r\n      return this.canConsumeThisString(this._lineComment, consume);\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  private canConsumeThisString(check_string: string, consume: boolean): boolean {\r\n    for (let i: number = 0; i < check_string.length; i++) {\r\n      //next//\r\n      if (!(this._inputExp.nextOffset(i).is(check_string[i]))) {\r\n        return false;\r\n      }\r\n    }\r\n    if (consume) {\r\n      this._inputExp.consumeNext(check_string.length);\r\n    }\r\n    return true;\r\n  }\r\n\r\n  private skipToEndOfLine(): void {\r\n    while (!this._inputExp.current().isEndOfInput() && !this._inputExp.current().isNewLine()) {\r\n      this._inputExp.consume();\r\n    }\r\n  }\r\n\r\n  private isAtStartOfBlockComment(consume: boolean): boolean {\r\n    return this.canConsumeThisString(this._blockCommentStart, consume);\r\n  }\r\n\r\n  private skipBlockComment(): void {\r\n    while (!this._inputExp.current().isEndOfInput()) {\r\n      if (this.isAtEndOfBlockComment()) {\r\n        return;\r\n      }\r\n      this._inputExp.consume();\r\n    }\r\n    this.problemCollector.push(ParseError.Error(this._inputExp.current(), ''));\r\n  }\r\n\r\n  private isAtEndOfBlockComment(): boolean {\r\n    return this.canConsumeThisString(this._blockCommentEnd, true);\r\n  }\r\n\r\n  private isAtStartOfNumber(): boolean {\r\n    if (this._inputExp.current().isDigit()) {\r\n      return true;\r\n    } else if (this._inputExp.current().is('.') && this._inputExp.next().isDigit()) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  private isAtStartOfIdentifier(): boolean {\r\n    return this._inputExp.current().isLetterOrCharactor() || this._inputExp.current().is('_') || this._inputExp.current().is('#');\r\n  }\r\n\r\n  private isIdentifierChar(current: ExpChar): boolean {\r\n    return current.isDigit() || current.isLetterOrCharactor() || current.is('_') || current.is('.') || current.is('#') || current.is(':') || current.is('');\r\n  }\r\n\r\n  private isAtBracket(in_symbol: boolean): boolean {\r\n    let r: boolean = true;\r\n    for (let i: number = 0; i < this._brackets.length; i++) {\r\n      if (!this._inputExp.current().is(this._brackets[i])) {\r\n        r = false;\r\n      }\r\n    }\r\n    if (r) {\r\n      return true;\r\n    }\r\n    if (!in_symbol && this._treatSinglePipeAsBracket && this._inputExp.current().is('|') && this._inputExp.next().is('|')) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private isAtStartOfSpecialId(): boolean {\r\n    return this._specialIdStarters.indexOf(this._inputExp.current().getValue()) > -1;\r\n  }\r\n\r\n  private fetchSpecialId(): Token {\r\n    let result: Token = Token.Create(ExpressionType.SPECIAL_ID, this._inputExp.current());\r\n    result.addToTrigger(this._inputExp.consume());\r\n    while (this.isIdentifierChar(this._inputExp.current())) {\r\n      result.addToContentChar(this._inputExp.consume());\r\n    }\r\n    return this.handleKeywords(result);\r\n  }\r\n\r\n  private handleKeywords(id_token: Token): Token {\r\n    let keyword: string = \"\";\r\n    if (this._keywordsCaseSensitive) {\r\n      if (this._keywords[id_token.getContents()]) {\r\n        keyword = this._keywords[id_token.getContents()];\r\n      }\r\n    } else {\r\n      if (this._keywords[id_token.getContents().toLowerCase()]) {\r\n        keyword = this._keywords[id_token.getContents().toLowerCase()];\r\n      }\r\n    }\r\n    if (keyword != \"\") { //\r\n      let keywordToken: Token = Token.Create(ExpressionType.KEYWORD, id_token);\r\n      keywordToken.setTrigger(keyword);\r\n      keywordToken.setContent(id_token.getContents());\r\n      keywordToken.setSource(id_token.getSource());\r\n      return keywordToken;\r\n    } else if (!id_token.is(ExpressionType.SPECIAL_ID)) { //bool\r\n      keyword = id_token.getContents().toLowerCase();\r\n      if (this._boolConstant.indexOf(keyword) > -1) {\r\n        id_token.setTokenType(ExpressionType.BOOL);\r\n      }\r\n    }\r\n    return id_token;\r\n  }\r\n\r\n  private isOperator(ch: ExpChar): boolean {\r\n    if (ch.isEndOfInput() || ch.isDigit() || ch.isLetterOrCharactor() || ch.isWhiteSpace()) {\r\n      return false;\r\n    }\r\n\r\n    // let c: string = ch.getValue();\r\n    // if (char.IsControl(c)) {\r\n    // \treturn false;\r\n    // }\r\n\r\n    if (this.isAtBracket(true) || this.isAtStartOfBlockComment(false) || this.isAtStartOfLineComment(false) || this.isAtStartOfNumber() || this.isAtStartOfIdentifier() || this._stringDelimiters[ch.getValue()]) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  private fetchOperator(): Token {\r\n    let result: Token = Token.Create(ExpressionType.OPERATOR, this._inputExp.current());\r\n    result.addToTrigger(this._inputExp.consume());\r\n    if (result.isOperator(\"*\") && this._inputExp.current().is('*')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\"&\") && this._inputExp.current().is('&')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\"|\") && this._inputExp.current().is('|')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\"<\") && this._inputExp.current().is('=')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\">\") && this._inputExp.current().is('=')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if ((result.isOperator(\"!\") || result.isOperator(\"\")) && this._inputExp.current().is('=')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    else if (result.isOperator(\"=\") && this._inputExp.current().is('=')) {\r\n      result.addToTrigger(this._inputExp.consume());\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public addError(pos: IPosition, msg: string): void {\r\n    this.getProblemCollector().push(ParseError.Error(pos, msg));\r\n  }\r\n\r\n  public addWarning(pos: IPosition, msg: string): void {\r\n    this.getProblemCollector().push(ParseError.Warning(pos, msg));\r\n  }\r\n\r\n\r\n\r\n}","export class Variable {\r\n\r\n  public get expType(): string {\r\n    return this._expType;\r\n  }\r\n  private _expType: string = 'string';\r\n\r\n  private _value: any = null;\r\n\r\n  private _name: string = '';\r\n\r\n  private _constant: boolean = false;\r\n\r\n  constructor(name: string, type: string, value: any) {\r\n    this._name = name;\r\n    this._expType = type;\r\n    this._value = value;\r\n  }\r\n\r\n  public setType(type: string): void {\r\n    if(!this._constant) {\r\n      this._expType = type;\r\n    }\r\n  }\r\n\r\n  public setValue(value: any): void {\r\n    if(!this._constant) {\r\n      this._value = value;\r\n    }\r\n  }\r\n\r\n  public makeConstant(value: any): void {\r\n    this.setValue(value);\r\n    this._constant = true;\r\n  }\r\n\r\n  public getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  public getName(): string {\r\n    return this._name;\r\n  }\r\n\r\n  public isConstant(): boolean {\r\n    return this._constant;\r\n  }\r\n\r\n  public toString(): string {\r\n    return `Type: ${this._expType} --- ${this._name}: ${this._value.toString()}`;\r\n  }\r\n\r\n}","import { IExpression } from \"./expressions\";\r\nimport { Variable } from \"./variable\";\r\n\r\nexport class VariableExpression implements IExpression {\r\n\r\n  public get expType(): string {\r\n    return this._value.expType;\r\n  }  \r\n\r\n  public get className(): string {\r\n    return 'VariableExpression';\r\n  }\r\n\r\n  private _value: Variable;\r\n  \r\n  constructor(value: Variable) {\r\n    this._value = value;\r\n  }\r\n  \r\n  public evaluate(): any {\r\n    return this._value.getValue();\r\n  }\r\n\r\n  public toString(): string {\r\n    return this._value.getName();\r\n  }\r\n\r\n  public clone(): IExpression {\r\n    let expClone: VariableExpression = new VariableExpression(this._value);\r\n    return expClone;\r\n  }\r\n  \r\n\r\n}","import { Scope } from \"./scope\";\r\nimport { ErrorInfo } from \"../utility\";\r\nimport { IExpression, VeryVarExpression, VeryTemplateExpression } from \"./expressions\";\r\nimport { VE_ExpressionParsing } from \"./expressionParsing\";\r\nimport { VariableScope } from \"../enum\";\r\nimport { ParseError } from \"./positions\";\r\nimport { VerySceneVariables } from \"../scene\";\r\nimport { IVeryVar, VE_Variables } from \"../variables\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { StateConst } from \"../state\";\r\nimport { VE_Objects, VeryEngineObject } from \"../object\";\r\nimport { Variable } from \"./variable\";\r\nimport { VE_Template } from \"../template\";\r\n\r\n\r\nexport class VE_Expressions {\r\n\r\n  public static _scope: Scope = Scope.Create();\r\n\r\n  // 1 - \r\n  // 2 -  + \r\n  // 3 -  +  +  + \r\n  // 4 -  +  +  + \r\n  // 5 -  +  +  + bool\r\n  // 6 - \r\n\r\n\r\n  // TODO == GameObject\r\n  // \r\n  public static createSceneExpression(name_id: string, expression_str: string, error_info: ErrorInfo): IExpression {\r\n    let sceneExp: IExpression = VE_ExpressionParsing.parsing(name_id, expression_str, VE_Expressions._scope, '', '', '', VariableScope.Scene);\r\n    if (VE_ExpressionParsing.errors.length > 0) {\r\n      error_info.isRight = false;\r\n      error_info.message = VE_Expressions.errorMessage(VE_ExpressionParsing.errors);\r\n    }\r\n    return sceneExp;\r\n  }\r\n\r\n  // \r\n  public static createGlobalExpression(name_id: string, expression_str: string, project_name: string, error_info: ErrorInfo): IExpression {\r\n    let globalExp: IExpression = VE_ExpressionParsing.parsing(name_id, expression_str, VE_Expressions._scope, project_name, '', '', VariableScope.Global);\r\n    if (VE_ExpressionParsing.errors.length > 0) {\r\n      error_info.isRight = false;\r\n      error_info.message = VE_Expressions.errorMessage(VE_ExpressionParsing.errors);\r\n    }\r\n    return globalExp;\r\n  }\r\n\r\n  // \r\n  public static createLocalExpression(name_id: string, expression_str: string, project_name: string, object_id: string, error_info: ErrorInfo): IExpression {\r\n    let localExp: IExpression = VE_ExpressionParsing.parsing(name_id, expression_str, VE_Expressions._scope, project_name, object_id, '', VariableScope.Local);\r\n    if (VE_ExpressionParsing.errors.length > 0) {\r\n      error_info.isRight = false;\r\n      error_info.message = VE_Expressions.errorMessage(VE_ExpressionParsing.errors);\r\n    }\r\n    return localExp;\r\n  }\r\n\r\n  // \r\n  public static createFsmExpression(name_id: string, expression_str: string, project_name: string, object_id: string, fsm_id: string, error_info: ErrorInfo): IExpression {\r\n    let fsmExp: IExpression = VE_ExpressionParsing.parsing(name_id, expression_str, VE_Expressions._scope, project_name, object_id, fsm_id, VariableScope.Fsm);\r\n    if (VE_ExpressionParsing.errors.length > 0) {\r\n      error_info.isRight = false;\r\n      error_info.message = VE_Expressions.errorMessage(VE_ExpressionParsing.errors);\r\n    }\r\n    return fsmExp;\r\n  }\r\n\r\n\r\n  // \r\n  public static getParseExpression(project_name: string, object_id: string, var_id: string, var_scope: VariableScope): Nullable<IExpression> {\r\n    // TODO: \r\n    // .*\r\n    if (var_id.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n      let varArray: string[] = var_id.split(StateConst.STATE_SEPARATOR);\r\n      if (varArray.length !== 2) {\r\n        return null;\r\n      } else {\r\n        object_id = varArray[0].trim();\r\n        var_id = varArray[1].trim().substring(1);\r\n        if (var_scope === VariableScope.Local || var_scope === VariableScope.Fsm) {\r\n          //  +  +  + \r\n          // 1. \r\n          // 2. \r\n          // 3. \r\n          // 4. \r\n          let objects: VE_Objects = VE_Manager.objects(project_name);\r\n          if (!objects) {\r\n            return null;\r\n          } else {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n            if (!veryObject) {\r\n              return null;\r\n            } else {\r\n              // \r\n              if (veryObject.isCreatedVariable(var_id)) {\r\n                let v: IVeryVar = veryObject.getVariable(var_id);\r\n                return new VeryVarExpression(v);\r\n              }\r\n              // \r\n              else if (veryObject.isCreatedExpression(var_id)) {\r\n                return veryObject.getExpression(var_id);\r\n              }\r\n              // \r\n              else if (veryObject.isCreatedFsm(var_id)) {\r\n                let v: IVeryVar = veryObject.getFsm(var_id).fsmVar;\r\n                return new VeryVarExpression(v);\r\n              }\r\n              else {\r\n                // \r\n                return null;\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          return null;\r\n        }\r\n      }\r\n    }\r\n    // *\r\n    else {\r\n      if (var_id.startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n        var_id = var_id.substring(1);\r\n        if (var_scope === VariableScope.Local || var_scope === VariableScope.Fsm) {\r\n          //  +  +  + \r\n          // 1. \r\n          // 2. \r\n          // 3. \r\n          // 4. \r\n          let objects: VE_Objects = VE_Manager.objects(project_name);\r\n          if (!objects) {\r\n            return null;\r\n          } else {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n            if (!veryObject) {\r\n              return null;\r\n            } else {\r\n              //\r\n              if (veryObject.isCreatedVariable(var_id)) {\r\n                let v: IVeryVar = veryObject.getVariable(var_id);\r\n                return new VeryVarExpression(v);\r\n              }\r\n              //\r\n              else if (veryObject.isCreatedExpression(var_id)) {\r\n                return veryObject.getExpression(var_id);\r\n              }\r\n              //\r\n              else if (veryObject.isCreatedFsm(var_id)) {\r\n                let v: IVeryVar = veryObject.getFsm(var_id).fsmVar;\r\n                return new VeryVarExpression(v);\r\n              }\r\n              else {\r\n                //\r\n                return this.getParseGlobal(project_name, var_id);\r\n              }\r\n            }\r\n          }\r\n        } else if (var_scope === VariableScope.Global) {\r\n          // \r\n          return this.getParseGlobal(project_name, var_id);\r\n        } else {\r\n          // \r\n          return this.getParseScene(var_id);\r\n        }\r\n      } else {\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n  private static getParseGlobal(project_name: string, var_id: string): Nullable<IExpression> {\r\n    // \r\n    let variables: VE_Variables = VE_Manager.variables(project_name);\r\n    if (!variables) {\r\n      return null;\r\n    } else {\r\n      if (variables.isCreatedVariable(var_id)) {\r\n        let v: IVeryVar = variables.getVariable(var_id);\r\n        return new VeryVarExpression(v);\r\n      } else if (variables.isCreatedExpression(var_id)) {\r\n        return variables.getExpression(var_id);\r\n      } else {\r\n        // \r\n        return this.getParseScene(var_id);\r\n      }\r\n    }\r\n  }\r\n\r\n  // \r\n  private static getParseScene(var_id: string): Nullable<IExpression> {\r\n    // \r\n    if (VerySceneVariables.Variables.isCreated(var_id)) {\r\n      let v: IVeryVar = VerySceneVariables.Variables.getVariable(var_id);\r\n      return new VeryVarExpression(v);\r\n    } else if (VerySceneVariables.Variables.isCreatedExpression(var_id)) {\r\n      return VerySceneVariables.Variables.getExpression(var_id);\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  private static errorMessage(errors: ParseError[]): string {\r\n    let errorStr: string = '';\r\n    for (let i: number = 0; i < errors.length; i++) {\r\n      errorStr += `\\n(${(i+1)}) ${errors[i].getMessage()} ;`;\r\n    }\r\n    errorStr += '\\n';\r\n    return errorStr;\r\n  }\r\n\r\n\r\n  public static getTemplateExpression(project_name: string, object_id: string, var_id: string, var_scope: VariableScope): Nullable<VeryTemplateExpression> {\r\n    // .*\r\n    if (var_id.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n      let varArray: string[] = var_id.split(StateConst.STATE_SEPARATOR);\r\n      if (varArray.length !== 2) {\r\n        //error_info = \".*ID\" + var_id + \"\";\r\n        return null;\r\n      }\r\n      else {\r\n        object_id = varArray[0].trim();\r\n        var_id = varArray[1].trim().substring(1);\r\n        if (var_scope === VariableScope.Local || var_scope === VariableScope.Fsm) {\r\n          let objects: VE_Objects = VE_Manager.objects(project_name);\r\n          if (!objects) {\r\n            return null;\r\n          }\r\n          else {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n            if (!veryObject) {\r\n              return null;\r\n            }\r\n            else {\r\n              // \r\n              if (veryObject.isCreatedTemplate(var_id)) {\r\n                let template: VE_Template = veryObject.getTemplate(var_id);\r\n                let r = new VeryTemplateExpression();\r\n                r.setTemplate(template);\r\n                return r;\r\n              }\r\n              else {\r\n                // \r\n                return null;\r\n              }\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          return null;\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      // *\r\n      if (var_id.startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n        var_id = var_id.substring(1);\r\n        if (var_scope === VariableScope.Local || var_scope === VariableScope.Fsm) {\r\n          let objects: VE_Objects = VE_Manager.objects(project_name);\r\n          if (!objects) {\r\n            return null;\r\n          }\r\n          else {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n            if (!veryObject) {\r\n              return null;\r\n            }\r\n            else {\r\n              // \r\n              if (veryObject.isCreatedTemplate(var_id)) {\r\n                let template: VE_Template = veryObject.getTemplate(var_id);\r\n                let r: VeryTemplateExpression = new VeryTemplateExpression();\r\n                r.setTemplate(template);\r\n                return r;\r\n              }\r\n              else {\r\n                // \r\n                let variables: VE_Variables = VE_Manager.variables(project_name);\r\n                if (!variables) {\r\n                  return null;\r\n                }\r\n                else {\r\n                  if (variables.isCreatedTemplate(var_id)) {\r\n                    let template: VE_Template = variables.getTemplate(var_id);\r\n                    let r: VeryTemplateExpression = new VeryTemplateExpression();\r\n                    r.setTemplate(template);\r\n                    return r;\r\n                  }\r\n                  else {\r\n                    // \r\n                    return null;\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        else if (var_scope === VariableScope.Global) {\r\n          // \r\n          let variables: VE_Variables = VE_Manager.variables(project_name);\r\n          if (!variables) {\r\n            return null;\r\n          }\r\n          else {\r\n            if (variables.isCreatedTemplate(var_id)) {\r\n              let template: VE_Template = variables.getTemplate(var_id);\r\n              let r: VeryTemplateExpression = new VeryTemplateExpression();\r\n              r.setTemplate(template);\r\n              return r;\r\n            }\r\n            else {\r\n              //\r\n              return null;\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          return null;\r\n        }\r\n      }\r\n      else {\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\r\n\r\n","import { Severity } from \"../enum\";\r\n\r\nexport class VE_Error {\r\n  private _pos: string = '';\r\n  private _message: string = '';\r\n  private _tableName: string = '';\r\n  private _severity: Severity = Severity.Error;\r\n\r\n  /**\r\n   * \r\n   * @param pos \r\n   * @param message \r\n   * @param table_name \r\n   * @param severity \r\n   */\r\n  constructor(pos: string, message: string, table_name: string, severity: Severity) {\r\n    this._pos = pos;\r\n    this._message = message;\r\n    this._severity = severity;\r\n    this._tableName = table_name;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param pos \r\n   * @param msg \r\n   * @param table_name \r\n   */\r\n  public static warning(pos: string, msg: string, table_name: string): VE_Error {\r\n    return new VE_Error(pos, msg, table_name, Severity.Warning);\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param pos \r\n   * @param msg \r\n   * @param table_name \r\n   */\r\n  public static error(pos: string, msg: string, table_name: string): VE_Error {\r\n    return new VE_Error(pos, msg, table_name, Severity.Error);\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public getPos(): string {\r\n    return this._pos;\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public getMessage(): string {\r\n    return this._message;\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public getTableName(): string {\r\n    return this._tableName;\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public getSeverity(): Severity {\r\n    return this._severity;\r\n  }\r\n\r\n  public toString(): string {\r\n    return \"\" + this._pos + \"\" + this._message + \"\" + this._tableName;\r\n  }\r\n}\r\n\r\n\r\nexport class VE_ErrorManager {\r\n\r\n  private static _errorList: VE_Error[] = [];\r\n\r\n  /// <summary>\r\n  /// \r\n  /// </summary>\r\n  public static get Count() {\r\n    return this._errorList.length;\r\n  }\r\n\r\n  /// <summary>\r\n  /// \r\n  /// </summary>\r\n  /// <param name=\"error\"></param>\r\n  public static Add(error: VE_Error): void {\r\n    this._errorList.push(error);\r\n  }\r\n\r\n  /// <summary>\r\n  /// \r\n  /// </summary>\r\n  /// <param name=\"index\"></param>\r\n  /// <returns></returns>\r\n  public static GetError(index: number): VE_Error {\r\n    return this._errorList[index];\r\n  }\r\n\r\n  /// <summary>\r\n  /// TODO: \r\n  /// </summary>\r\n  /// <param name=\"prefix\"></param>\r\n  public static Print(prefix?: string): void {\r\n    if (prefix) {\r\n      for (let i: number = 0; i < this._errorList.length; i++) {\r\n        if (this._errorList[i].getSeverity() === Severity.Error) {\r\n          console.error(' >>> ' + prefix + \" -> \" + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n        else if (this._errorList[i].getSeverity() === Severity.Warning) {\r\n          console.warn(' >>> ' + prefix + \" -> \" + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n    } else {\r\n      for (let i: number = 0; i < this._errorList.length; i++) {\r\n        if (this._errorList[i].getSeverity() === Severity.Error) {\r\n          console.error(' >>> ' + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n        else if (this._errorList[i].getSeverity() === Severity.Warning) {\r\n          console.warn(' >>> ' + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /// <summary>\r\n  /// \r\n  /// </summary>\r\n  /// <param name=\"prefix\"></param>\r\n  public static PrintWarnning(prefix?: string): void {\r\n    if (prefix) {\r\n      for (let i: number = 0; i < this._errorList.length; i++) {\r\n        if (this._errorList[i].getSeverity() === Severity.Warning) {\r\n          console.warn(' >>> ' + prefix + \" -> \" + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n    } else {\r\n      for (let i: number = 0; i < this._errorList.length; i++) {\r\n        if (this._errorList[i].getSeverity() === Severity.Warning) {\r\n          console.warn(' >>> ' + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /// <summary>\r\n  /// \r\n  /// </summary>\r\n  /// <param name=\"prefix\"></param>\r\n  public static PrintError(prefix: string): void {\r\n    if (prefix) {\r\n      for (let i: number = 0; i < this._errorList.length; i++) {\r\n        if (this._errorList[i].getSeverity() === Severity.Error) {\r\n          console.error(' >>> ' + prefix + \" -> \" + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n    } else {\r\n      for (let i: number = 0; i < this._errorList.length; i++) {\r\n        if (this._errorList[i].getSeverity() === Severity.Error) {\r\n          console.error(' >>> ' + prefix + \" -> \" + this._errorList[i].toString());\r\n          this._errorList.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}","export class GameGlobal {\r\n\r\n  \r\n  public static PlatformLoaded: boolean = false;\r\n  \r\n\r\n}","export * from './gameGlobal';\r\nexport * from './errorManager';\r\nexport * from './triggerGlobal';","import { VE_TriggerBehaviour } from \"../trigger\";\r\n\r\nexport class TriggerGlobal {\r\n\r\n  private static KEYMAP: {[key: string]: string} = {};\r\n  private static _keyUpdate: {[key: string]: boolean} = {};\r\n\r\n  private static _keysDic: { [key: string]: string } = {};\r\n\r\n  private static _triggerList: VE_TriggerBehaviour[] = [];\r\n\r\n  private static _scenes: BABYLON.Scene[] = [];\r\n  private static _initialized: boolean = false;\r\n\r\n  public static Init(): void {\r\n    \r\n\r\n  }\r\n\r\n  public static AddKeyboard(key: string, trigger: VE_TriggerBehaviour): void {\r\n    // TODO\r\n    // \r\n    if(this._scenes.indexOf(trigger.scene) === -1) {\r\n      this._scenes.push(trigger.scene);\r\n      trigger.scene.onKeyboardObservable.add( kbInfo => {\r\n        if(kbInfo.type === BABYLON.KeyboardEventTypes.KEYDOWN) {\r\n          this._keyUpdate[kbInfo.event.key.toLowerCase()] = true;\r\n        } else {\r\n          this._keyUpdate[kbInfo.event.key.toLowerCase()] = false;\r\n        }\r\n      });\r\n    }\r\n    this._triggerList.push(trigger);\r\n    // this._keysDic\r\n\r\n  }\r\n\r\n\r\n  public static RemoveKeyboard(trigger_id: string): void {\r\n\r\n  }\r\n\r\n  // \r\n\r\n  public static KeyboardUpdate(): void {\r\n\r\n    \r\n\r\n    for(let i = 0; i < this._triggerList.length; i++) {\r\n      if(this._triggerList[i].enabled) {\r\n        if(this._keyUpdate[this._keysDic[this._triggerList[i].unionID]]) {\r\n\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public static clear(): void {\r\n\r\n  }\r\n\r\n  public static clearProject(project_name: string): void {\r\n    this._scenes[0].onKeyboardObservable.clear();\r\n  }\r\n\r\n}","export * from './showError';","export class ShowError {\r\n\r\n  public static errorContentPrefix: string = '<div class=\"alert alert-error\"><button type=\"button\" class=\"close\" data-dismiss=\"alert\">&times;</button>';\r\n  public static errorContentNow: string;\r\n  public static errorZone: HTMLElement;\r\n\r\n  public static initZone(): void {\r\n    if (!this.errorZone) {\r\n      this.errorZone = document.getElementById(\"errorZone\")!;\r\n    }\r\n  }\r\n  /**\r\n   * \r\n   * TODO: logerrorwarn\r\n   * @param error_msg \r\n   */\r\n  private static showMsg(prefix: string, error_msg: string): void {\r\n    this.initZone();\r\n    if (!this.errorContentNow) {\r\n      this.errorContentNow = this.errorContentPrefix;\r\n    }\r\n    this.errorContentNow += prefix + error_msg + \"<br/>\";\r\n    this.errorZone.style.display = \"block\";\r\n    this.errorZone.innerHTML = this.errorContentNow + '</div>';\r\n    // Close button error\r\n    let closeBtn = this.errorZone.querySelector(\".close\")!;\r\n    let that = this;\r\n    closeBtn.addEventListener(\"click\", function () {\r\n      that.errorZone.style.display = \"none\";\r\n    });\r\n  }\r\n\r\n  public static show(error_msg: string): void {\r\n    this.showMsg('>>>', error_msg);\r\n  }\r\n\r\n  public static showError(error_msg: string): void {\r\n    this.showMsg('>>>', error_msg);\r\n  }\r\n\r\n  public static showWarn(error_msg: string): void {\r\n    this.showMsg('>>>', error_msg);\r\n  }\r\n\r\n  public static clear(): void {\r\n    ShowError.initZone();\r\n    ShowError.errorContentNow = ShowError.errorContentPrefix;\r\n    ShowError.errorZone.innerHTML = ShowError.errorContentNow + '</div>';\r\n    // Close button error\r\n    let closeBtn = ShowError.errorZone.querySelector(\".close\")!;\r\n    let that = ShowError;\r\n    closeBtn.addEventListener(\"click\", function () {\r\n      that.errorZone.style.display = \"none\";\r\n    });\r\n  }\r\n\r\n  public static close(): void {\r\n    ShowError.initZone();\r\n    if(ShowError.errorZone.style.display === \"none\") {\r\n      ShowError.errorZone.style.display = \"block\";\r\n    } else {\r\n      ShowError.errorZone.style.display = \"none\";\r\n    }\r\n  }\r\n}","export * from './utility/index';\r\n\r\nexport * from './action/index';\r\nexport * from './dataSource/index';\r\nexport * from './enum/index';\r\nexport * from './expression/index';\r\nexport * from './global/index';\r\nexport * from './html/index';\r\nexport * from './manager/index';\r\nexport * from './object/index';\r\nexport * from './state/index';\r\nexport * from './template/index';\r\nexport * from './trigger/index';\r\nexport * from './loader/index';\r\n\r\nexport * from './variables/index';\r\nexport * from './scene/index';\r\n\r\nexport * from '../verytable/index';\r\n\r\nexport * from './library/action/index';\r\nexport * from './library/trigger/index';\r\n","import { VE_ActionBehaviour, VE_Actions } from \"../../action\";\r\nimport { IVeryVar, VarTools } from \"../../variables\";\r\nimport { VE_Template } from \"../../template\";\r\nimport { ParaParserUtility, ErrorInfo } from \"../../utility\";\r\nimport { ParaType, Severity } from \"../../enum\";\r\nimport { VE_ErrorManager, VE_Error } from \"../../global\";\r\n\r\nenum TypeVar { VeryVar, Template, Const };\r\n\r\nexport class Action_Debug extends VE_ActionBehaviour {\r\n\r\n  public get ID(): string {\r\n    return 'Debug|';\r\n  };\r\n\r\n  public get className(): string {\r\n    return 'Action_Debug';\r\n  };\r\n\r\n  private _debugMode: number = 0;\r\n\r\n  private _typeList: Array<TypeVar> = [];\r\n  private _veryVarDic: { [key: number]: IVeryVar } = {};\r\n  private _templateDic: { [key: number]: VE_Template } = {};\r\n  private _constDic: { [key: number]: string } = {};\r\n\r\n  private _separator: string = \" \";\r\n\r\n  private _strBuilder: string = '';\r\n\r\n  public active(): void {\r\n\r\n  }\r\n\r\n  public onUpdate(): void {\r\n    this._strBuilder = '';\r\n    for (let i: number = 0; i < this._typeList.length; i++) {\r\n      if (this._typeList[i] === TypeVar.Const) {\r\n        this._strBuilder += this._constDic[i];\r\n      }\r\n      else if (this._typeList[i] === TypeVar.VeryVar) {\r\n        this._strBuilder += this._veryVarDic[i].getValue();\r\n      }\r\n      else if (this._typeList[i] === TypeVar.Template) { // TODO\r\n        //this._templateDic[i].\r\n        //_strBuilder.Append(_toString.GetString(_blueVarDic[i].VarType, _blueVarDic[i].GetValue()));\r\n      }\r\n      this._strBuilder += this._separator;\r\n    }\r\n    this._strBuilder = this._strBuilder.trim();\r\n    if (this._debugMode === 0) {\r\n      // console.log(` >>> ${this._strBuilder}`);\r\n      console.log(this._strBuilder);\r\n    }\r\n    else if (this._debugMode == 1) {\r\n      // console.warn(` >>> ${this._strBuilder}`);\r\n      console.warn(this._strBuilder);\r\n    }\r\n    else if (this._debugMode == 2) {\r\n      // console.error(` >>> ${this._strBuilder}`);\r\n      console.error(this._strBuilder);\r\n    }\r\n  }\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    if (!ParaParserUtility.ParaNumbers(this.ID, ParaType.Action, para_array.length, 2)) {\r\n      return false;\r\n    } else {\r\n      // 1\r\n      if (para_array[0].toLowerCase() === \"log\" || para_array[0] === \"\") {\r\n        this._debugMode = 0;\r\n      }\r\n      else if (para_array[0].toLowerCase() === \"warn\" || para_array[0] === \"\") {\r\n        this._debugMode = 1;\r\n      }\r\n      else if (para_array[0].toLowerCase() === \"error\" || para_array[0] === \"\") {\r\n        this._debugMode = 2;\r\n      }\r\n      else {\r\n        VE_ErrorManager.Add(new VE_Error('', this.ID + \"  LogWarnError \" + para_array[0] + \"\", '', Severity.Error));\r\n        return false;\r\n      }\r\n\r\n      // 2\r\n      //12*3.*4*5.*6*.*7.*.*\r\n      let debugArray: string[] = para_array[1].split('+');\r\n      for (let i: number = 0; i < debugArray.length; i++) {\r\n        debugArray[i] = debugArray[i].trim();\r\n        if (VarTools.IsVarID(debugArray[i])) {\r\n          let errorInfo: ErrorInfo = new ErrorInfo();\r\n          let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVarWithExpression(this.projectName, this.objectID, debugArray[i], errorInfo);\r\n          if (veryVar === null) {\r\n            errorInfo.clear();\r\n            let template: Nullable<VE_Template> = VarTools.GetTemplate(this.projectName, this.objectID, debugArray[i], errorInfo);\r\n            if (template === null) {\r\n              VE_ErrorManager.Add(new VE_Error('', this.ID + \"  \" + debugArray[i] + \"\", '', Severity.Error));\r\n              this._constDic[this._typeList.length] = debugArray[i];\r\n              this._typeList.push(TypeVar.Const);\r\n            }\r\n            else {\r\n              this._templateDic[this._typeList.length] = template;\r\n              this._typeList.push(TypeVar.Template);\r\n            }\r\n          }\r\n          else {\r\n            this._veryVarDic[this._typeList.length] = veryVar;\r\n            this._typeList.push(TypeVar.VeryVar);\r\n          }\r\n        }\r\n        else {\r\n          this._constDic[this._typeList.length] = debugArray[i];\r\n          this._typeList.push(TypeVar.Const);\r\n        }\r\n      }\r\n\r\n      return true;\r\n    }\r\n  }\r\n\r\n\r\n  public destroy(): void {\r\n\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\nVE_Actions.addAction(Action_Debug);","import { VE_ActionBehaviour, VE_Actions } from \"../../action\";\r\nimport { ActionType, ParaType, Severity } from \"../../enum\";\r\nimport { ParaParserUtility, VeryParas, FloatUitlity } from \"../../utility\";\r\nimport { VeryNumber } from \"../../variables\";\r\nimport { VE_ErrorManager, VE_Error } from \"../../global\";\r\nimport { Time } from \"../../babylon\";\r\n\r\nexport class Action_Float_Interpolate extends VE_ActionBehaviour {\r\n\r\n  public get ID(): string {\r\n    return \"Float_Interpolate|\";\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"Action_Float_Interpolate\";\r\n  }\r\n\r\n  public get type(): ActionType {\r\n    return ActionType.Animation;\r\n  }\r\n\r\n  private _switch: boolean = false;\r\n  private _timer: number = 0;\r\n  private _isLinear: boolean = true;\r\n\r\n  private _startFloat: VeryNumber = new VeryNumber();\r\n  private _endFloat: VeryNumber = new VeryNumber();\r\n  private _timeFloat: VeryNumber = new VeryNumber();\r\n  private _resultFloat: VeryNumber = new VeryNumber();\r\n\r\n  public active(): void {\r\n    if (this._timeFloat.value === 0) {\r\n      this.timesUp();\r\n    }\r\n    else {\r\n      this._timer = 0;\r\n      this._switch = true;\r\n    }\r\n  }\r\n\r\n  public pause(): void {\r\n    this._switch = false;\r\n    super.pause();\r\n  }\r\n\r\n  public resume(): void {\r\n    this._switch = true;\r\n    super.resume();\r\n  }\r\n\r\n  public stop(): void {\r\n    this.timesUp();\r\n    super.stop();\r\n  }\r\n\r\n  private timesUp(): void {\r\n    this._switch = false;\r\n    this._timer = 0;\r\n    this.finish();\r\n  }\r\n\r\n  public update(): void {\r\n    if (this._switch) {\r\n      this._timer += Time.deltaTime;\r\n      if (this._timer > this._timeFloat.value) {\r\n        this._switch = false;\r\n        this._timer = 0;\r\n        if (this._isLinear) {\r\n\r\n          this._resultFloat.value = FloatUitlity.Lerp(this._startFloat.value, this._endFloat.value, 1);\r\n        }\r\n        else {\r\n          this._resultFloat.value = FloatUitlity.SLerp(this._startFloat.value, this._endFloat.value, 1);\r\n        }\r\n        this.timesUp();\r\n      }\r\n      else {\r\n        if (this._isLinear) {\r\n          this._resultFloat.value = FloatUitlity.Lerp(this._startFloat.value, this._endFloat.value, this._timer / this._timeFloat.value);\r\n        }\r\n        else {\r\n          this._resultFloat.value = FloatUitlity.SLerp(this._startFloat.value, this._endFloat.value, this._timer / this._timeFloat.value);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    if (!ParaParserUtility.ParaNumbers(this.ID, ParaType.Action, para_array.length, 5)) {\r\n      return false;\r\n    } else {\r\n      // 1\r\n      if (para_array[0].toLowerCase() === \"linear\" || para_array[0] === \"\") {\r\n        this._isLinear = true;\r\n      }\r\n      else if (para_array[0].toLowerCase() === \"smooth\" || para_array[0] === \"\") {\r\n        this._isLinear = false;\r\n      }\r\n      else {\r\n        VE_ErrorManager.Add(new VE_Error('', this.ID + \"  LogWarnError \" + para_array[0] + \"\", '', Severity.Error));\r\n        return false;\r\n      }\r\n\r\n      // 2\r\n      let para2 = new VeryParas();\r\n      if (!ParaParserUtility.NumberParaWithExpression(this.projectName, this.objectID, this.ID, ParaType.Action, para2, para_array[1])) {\r\n        return false;\r\n      }\r\n      this._startFloat = para2.number;\r\n\r\n      // 3\r\n      let para3 = new VeryParas();\r\n      if (!ParaParserUtility.NumberParaWithExpression(this.projectName, this.objectID, this.ID, ParaType.Action, para3, para_array[2])) {\r\n        return false;\r\n      }\r\n      this._endFloat = para3.number;\r\n\r\n      // 4\r\n      let para4 = new VeryParas();\r\n      if (!ParaParserUtility.NumberParaWithExpression(this.projectName, this.objectID, this.ID, ParaType.Action, para4, para_array[3])) {\r\n        return false;\r\n      }\r\n      this._timeFloat = para4.number;\r\n\r\n      // 5\r\n      let para5 = new VeryParas();\r\n      if (!ParaParserUtility.NumberParaOnlyVar(this.projectName, this.objectID, this.ID, ParaType.Action, para5, para_array[4])) {\r\n        return false;\r\n      }\r\n      this._resultFloat = para5.number;\r\n\r\n      return true;\r\n    }\r\n  }\r\n\r\n\r\n  public destroy(): void {\r\n\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\nVE_Actions.addAction(Action_Float_Interpolate);","import { VE_ActionBehaviour, VE_Actions } from '../../action';\r\nimport { ParaParserUtility, ErrorInfo, VeryParas } from '../../utility';\r\nimport { ParaType, Severity } from '../../enum';\r\nimport { VE_Template } from '../../template';\r\nimport { VeryString, VeryGameObject, VeryVector3, VeryNumber, VeryBool, VarTools } from '../../variables';\r\nimport { VE_ErrorManager, VE_Error } from '../../global';\r\nimport { VE_Manager } from '../../manager';\r\nimport { GameObject } from '../../babylon';\r\nimport { VeryEngineObject } from '../../object';\r\n\r\nexport class Action_CreateTemplateInstance extends VE_ActionBehaviour {\r\n\r\n  public get ID(): string {\r\n    return '|Create_Instance';\r\n  };\r\n\r\n  public get className(): string {\r\n    return 'Action_CreateTemplateInstance';\r\n  };\r\n\r\n\r\n  private _template: Nullable<VE_Template> = null;\r\n  private _templateVarID: string = '';\r\n  // TODO: \r\n  private _deriveID: VeryString = new VeryString();\r\n  private _objectInfo: VeryString = new VeryString();\r\n  private _ref: VeryGameObject = new VeryGameObject();\r\n\r\n  private _position: VeryVector3 = new VeryVector3();\r\n  private _posX: VeryNumber = new VeryNumber();\r\n  private _posY: VeryNumber = new VeryNumber();\r\n  private _posZ: VeryNumber = new VeryNumber();\r\n  private _isPositionVec: boolean = true;\r\n\r\n  private _angle: VeryVector3 = new VeryVector3();\r\n  private _angleX: VeryNumber = new VeryNumber();\r\n  private _angleY: VeryNumber = new VeryNumber();\r\n  private _angleZ: VeryNumber = new VeryNumber();\r\n  private _isAngleVec: boolean = true;\r\n\r\n  private _destoryOnCreateNew: VeryBool = new VeryBool();\r\n\r\n\r\n\r\n  public active(): void {\r\n    if (this._template === null) return;\r\n    let errorInfo: ErrorInfo = new ErrorInfo();\r\n    let template: Nullable<VE_Template> = VE_Manager.templates(this.projectName).createInstance(this.objectID, this._templateVarID, this._template, this._objectInfo.value, errorInfo, this._destoryOnCreateNew.value);\r\n    if (template === null || template.templateInstance === null) {\r\n      console.error(this.ID + \"  \" + errorInfo.message);\r\n      return;\r\n    }\r\n    if (this._ref.value !== null) {\r\n      if (this._isPositionVec) {\r\n        template.templateInstance.gameObject.transform.position = this._ref.value.transform.transformPosition(this._position.value);\r\n      }\r\n      else {\r\n        template.templateInstance.gameObject.transform.position = this._ref.value.transform.transformPosition(new BABYLON.Vector3(this._posX.value, this._posY.value, this._posZ.value));\r\n      }\r\n\r\n      let emptyAngle: GameObject = new GameObject(\"Angle__Empty\");\r\n      emptyAngle.transform.parent = this._ref.value.transform;\r\n      if (this._isAngleVec) {\r\n        emptyAngle.transform.localEulerAngles = this._angle.value;\r\n      }\r\n      else {\r\n        emptyAngle.transform.localEulerAngles = new BABYLON.Vector3(this._angleX.value, this._angleY.value, this._angleZ.value);\r\n      }\r\n      template.templateInstance.gameObject.transform.eulerAngles = emptyAngle.transform.eulerAngles;\r\n      GameObject.Destroy(emptyAngle);\r\n    }\r\n    else {\r\n      if (this._isPositionVec) {\r\n        template.templateInstance.gameObject.transform.position = this._position.value;\r\n      }\r\n      else {\r\n        template.templateInstance.gameObject.transform.position = new BABYLON.Vector3(this._posX.value, this._posY.value, this._posZ.value);\r\n      }\r\n\r\n      if (this._isAngleVec) {\r\n        template.templateInstance.gameObject.transform.eulerAngles = this._angle.value;\r\n      }\r\n      else {\r\n        template.templateInstance.gameObject.transform.eulerAngles = new BABYLON.Vector3(this._angleX.value, this._angleY.value, this._angleZ.value);\r\n      }\r\n    }\r\n  }\r\n\r\n  // 1.\r\n  // 2.\r\n  // 3.\r\n  // 4.\r\n  // 5.\r\n  // 6.\r\n  public paraParser(para_array: string[]): boolean {\r\n    if (!ParaParserUtility.ParaNumbers(this.ID, ParaType.Action, para_array.length, 6, 7)) {\r\n      return false;\r\n    } else {\r\n\r\n      // 11*2.*\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      this._templateVarID = para_array[0];\r\n      this._template = VarTools.GetTemplate(this.projectName, this.objectID, para_array[0], errorInfo);\r\n      if (this._template === null) {\r\n        VE_ErrorManager.Add(new VE_Error('', this.ID + \"  \" + para_array[0] + \" \" + errorInfo.message, '', Severity.Error));\r\n        return false;\r\n      }\r\n\r\n      // 2 \r\n      let para2: VeryParas = new VeryParas();\r\n      if (!ParaParserUtility.StringParaWithExpression(this.projectName, this.objectID, this.ID, ParaType.Action, para2, para_array[1])) {\r\n        return false;\r\n      }\r\n      this._deriveID = para2.string;\r\n\r\n      // 3 1prefab23GameObject Name\r\n      let para3: VeryParas = new VeryParas();\r\n      if (!ParaParserUtility.StringParaWithExpression(this.projectName, this.objectID, this.ID, ParaType.Action, para3, para_array[2])) {\r\n        return false;\r\n      }\r\n      this._objectInfo = para3.string;\r\n\r\n      // 4 \r\n      let para4: VeryParas = new VeryParas();\r\n      if (!ParaParserUtility.GameObjectPara(this.projectName, this.objectID, this.ID, ParaType.Action, para4, para_array[3])) {\r\n        return false;\r\n      }\r\n      this._ref = para4.gameObject;\r\n\r\n      // 5 \r\n      let para5: VeryParas = new VeryParas();\r\n      if (!ParaParserUtility.Vector3OrNumberParaWithExpression(this.projectName, this.objectID, this.ID, ParaType.Action, para5, para_array[4])) {\r\n        return false;\r\n      }\r\n      this._isPositionVec = para5.isVec;\r\n      this._position = para5.vector3;\r\n      this._posX = para5.vecNumbers[0];\r\n      this._posY = para5.vecNumbers[1];\r\n      this._posZ = para5.vecNumbers[2];\r\n\r\n      // 6 \r\n      let para6: VeryParas = new VeryParas();\r\n      if (!ParaParserUtility.Vector3OrNumberParaWithExpression(this.projectName, this.objectID, this.ID, ParaType.Action, para6, para_array[5])) {\r\n        return false;\r\n      }\r\n      this._isAngleVec = para6.isVec;\r\n      this._angle = para6.vector3;\r\n      this._angleX = para6.vecNumbers[0];\r\n      this._angleY = para6.vecNumbers[1];\r\n      this._angleZ = para6.vecNumbers[2];\r\n\r\n      // 7 \r\n      if (para_array.length > 6) {\r\n        let para7: VeryParas = new VeryParas();\r\n        if (!ParaParserUtility.BoolParaWithExpression(this.projectName, this.objectID, this.ID, ParaType.Action, para7, para_array[6])) {\r\n          return false;\r\n        }\r\n        this._destoryOnCreateNew = para7.bool;\r\n      } else {\r\n        this._destoryOnCreateNew.value = true;\r\n      }\r\n\r\n      return true;\r\n    }\r\n  }\r\n\r\n\r\n  public destroy(): void {\r\n\r\n  }\r\n\r\n}\r\n\r\n\r\nexport class Action_DestroyTemplateInstance extends VE_ActionBehaviour {\r\n\r\n  public get ID(): string {\r\n    return '|Destroy_Instance';\r\n  };\r\n\r\n  public get className(): string {\r\n    return 'Action_DestroyTemplateInstance';\r\n  };\r\n\r\n  private _isInstance: boolean = true;\r\n  private _template: Nullable<VE_Template> = null;\r\n  private _instance: Nullable<VeryEngineObject> = null;\r\n  private _templateStr: string = \"\";\r\n\r\n  private _deleteAllTemplates: VeryBool = new VeryBool();\r\n\r\n  public active(): void {\r\n    if (this._isInstance) {\r\n      if (this._instance !== null) {\r\n        if (this._instance.template !== null) {\r\n          this._instance.template.unloadInstance(this._instance);\r\n          if (this._deleteAllTemplates.value) {\r\n            let instances: VeryEngineObject[] = this._instance.template.backupInstances;\r\n            if (instances) {\r\n              instances.forEach((value: VeryEngineObject) => {\r\n                value.unload();\r\n              });\r\n            }\r\n            this._instance.template.unload(true);\r\n          }\r\n        }\r\n        this._instance.unload();\r\n      }\r\n    }\r\n    else {\r\n      if (this._template === null || this._template.templateInstance === null) {\r\n        console.error(this.ID + \" \" + this._templateStr + \"\");\r\n        return;\r\n      }\r\n      if (this._deleteAllTemplates.value) {\r\n        let instances: VeryEngineObject[] = this._template.backupInstances;\r\n        if (instances) {\r\n          instances.forEach((value: VeryEngineObject) => {\r\n            value.unload();\r\n          });\r\n        }\r\n        this._template.unload(true);\r\n      } else {\r\n        this._template.templateInstance.unload();\r\n        this._template.unload();\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    if (!ParaParserUtility.ParaNumbers(this.ID, ParaType.Action, para_array.length, 1, 2)) {\r\n      return false;\r\n    } else {\r\n      // 1\r\n      if (para_array[0].toLowerCase() === \"this\") {\r\n        this._instance = this.veryObject;\r\n        this._isInstance = true;\r\n      }\r\n      else {\r\n        this._isInstance = false;\r\n        this._templateStr = para_array[0];\r\n        // *&.*\r\n        let errorInfo: ErrorInfo = new ErrorInfo();\r\n        this._template = VarTools.GetTemplate(this.projectName, this.objectID, para_array[0], errorInfo);\r\n        if (this._template === null) {\r\n          VE_ErrorManager.Add(new VE_Error('', this.ID + \"  \" + errorInfo.message + '', '', Severity.Error));\r\n          return false;\r\n        }\r\n        //if (this._template.TemplateInstance == null)\r\n        //{\r\n        //    Debug.LogError(this.ID + \" \" + para_array[0] + \"\");\r\n        //    return false;\r\n        //}\r\n        //this._instance = this._template.TemplateInstance;\r\n      }\r\n\r\n      if (para_array.length > 1) {\r\n        // 2 \r\n        let para2: VeryParas = new VeryParas();\r\n        if (!ParaParserUtility.BoolParaWithExpression(this.projectName, this.objectID, this.ID, ParaType.Action, para2, para_array[1])) {\r\n          return false;\r\n        }\r\n        this._deleteAllTemplates = para2.bool;\r\n      } else {\r\n        this._deleteAllTemplates.value = false;\r\n      }\r\n\r\n      return true;\r\n    }\r\n  }\r\n\r\n\r\n  public destroy(): void {\r\n\r\n  }\r\n\r\n}\r\n\r\n\r\nVE_Actions.addAction(Action_CreateTemplateInstance);\r\nVE_Actions.addAction(Action_DestroyTemplateInstance);","import { VE_ActionBehaviour, VE_Actions } from '../../action';\r\nimport { VeryGameObject, VeryBool, VeryVector3, VeryNumber } from '../../variables';\r\nimport { Time, Transform } from '../../babylon';\r\nimport { ParaParserUtility, VeryParas } from '../../utility';\r\nimport { ParaType, Severity } from '../../enum';\r\nimport { VE_ErrorManager, VE_Error } from '../../global';\r\n\r\nexport class Action_SetPosition extends VE_ActionBehaviour {\r\n\r\n\r\n  public get ID(): string {\r\n    return 'Set_Position|';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'Action_SetPosition';\r\n  }\r\n\r\n\r\n  private _posvalue: VeryNumber = new VeryNumber();\r\n  private _posVec: VeryVector3 = new VeryVector3();\r\n\r\n  private _space: BABYLON.Space = BABYLON.Space.LOCAL;\r\n\r\n  private _isVec: boolean = false;\r\n  private _x: VeryNumber = new VeryNumber();\r\n  private _y: VeryNumber = new VeryNumber();\r\n  private _z: VeryNumber = new VeryNumber();\r\n\r\n  private _axis: number = 0;\r\n\r\n  private _trans: VeryGameObject = new VeryGameObject();\r\n  private _ref: VeryGameObject = new VeryGameObject();\r\n\r\n  public active(): void {\r\n\r\n  }\r\n\r\n  public onUpdate(): void {\r\n    if (this._trans !== null && this._trans.value !== null) {\r\n      if (this._space === BABYLON.Space.LOCAL) {\r\n        if (this._axis === 0) {\r\n          this._trans.value.transform.localPosition = new BABYLON.Vector3(this._posvalue.value, this._trans.value.transform.localPosition.y, this._trans.value.transform.localPosition.z);\r\n        }\r\n        else if (this._axis === 1) {\r\n          this._trans.value.transform.localPosition = new BABYLON.Vector3(this._trans.value.transform.localPosition.x, this._posvalue.value, this._trans.value.transform.localPosition.z);\r\n        }\r\n        else if (this._axis === 2) {\r\n          this._trans.value.transform.localPosition = new BABYLON.Vector3(this._trans.value.transform.localPosition.x, this._trans.value.transform.localPosition.y, this._posvalue.value);\r\n        }\r\n        else {\r\n          if (this._isVec) {\r\n            this._trans.value.transform.localPosition = this._posVec.value;\r\n          }\r\n          else {\r\n            this._trans.value.transform.localPosition = new BABYLON.Vector3(this._x.value, this._y.value, this._z.value);\r\n          }\r\n        }\r\n      }\r\n      else if (this._space === BABYLON.Space.WORLD) {\r\n        if (this._axis === 0) {\r\n          this._trans.value.transform.position = new BABYLON.Vector3(this._posvalue.value, this._trans.value.transform.position.y, this._trans.value.transform.position.z);\r\n        }\r\n        else if (this._axis === 1) {\r\n          this._trans.value.transform.position = new BABYLON.Vector3(this._trans.value.transform.position.x, this._posvalue.value, this._trans.value.transform.position.z);\r\n        }\r\n        else if (this._axis === 2) {\r\n          this._trans.value.transform.position = new BABYLON.Vector3(this._trans.value.transform.position.x, this._trans.value.transform.position.y, this._posvalue.value);\r\n        }\r\n        else {\r\n          if (this._isVec) {\r\n            this._trans.value.transform.position = this._posVec.value;\r\n          }\r\n          else {\r\n            this._trans.value.transform.position = new BABYLON.Vector3(this._x.value, this._y.value, this._z.value);\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        if (this._ref.value !== null) {\r\n          let oriFather: Nullable<Transform> = this._trans.value.transform.parent;\r\n          this._trans.value.transform.parent = this._ref.value.transform;\r\n          if (this._axis === 0)  //X\r\n          {\r\n            this._trans.value.transform.localPosition = new BABYLON.Vector3(this._posvalue.value, this._trans.value.transform.localPosition.y, this._trans.value.transform.localPosition.z);\r\n          }\r\n          else if (this._axis === 1)  //Y\r\n          {\r\n            this._trans.value.transform.localPosition = new BABYLON.Vector3(this._trans.value.transform.localPosition.x, this._posvalue.value, this._trans.value.transform.localPosition.z);\r\n          }\r\n          else if (this._axis === 2)  //Z\r\n          {\r\n            this._trans.value.transform.localPosition = new BABYLON.Vector3(this._trans.value.transform.localPosition.x, this._trans.value.transform.localPosition.y, this._posvalue.value);\r\n          }\r\n          else {\r\n            if (this._isVec) {\r\n              this._trans.value.transform.localPosition = this._posVec.value;\r\n            }\r\n            else {\r\n              this._trans.value.transform.localPosition = new BABYLON.Vector3(this._x.value, this._y.value, this._z.value);\r\n            }\r\n          }\r\n          this._trans.value.transform.parent = oriFather;\r\n        }\r\n        else {\r\n          console.warn(this.ID + \" \");\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    if (!ParaParserUtility.ParaNumbers(this.ID, ParaType.Action, para_array.length, 4)) {\r\n      return false;\r\n    } else {\r\n      // 1\r\n      let para1: VeryParas = new VeryParas();\r\n      if (!ParaParserUtility.GameObjectPara(this.projectName, this.objectID, this.ID, ParaType.Action, para1, para_array[0])) {\r\n        return false;\r\n      }\r\n      this._trans = para1.gameObject;\r\n\r\n      // 2\r\n      // \r\n      if (para_array[1].toLowerCase() === \"self\" || para_array[1] === \"\") {\r\n        this._space = BABYLON.Space.LOCAL;\r\n      }\r\n      else if (para_array[1].toLowerCase() === \"world\" || para_array[1] === \"\") {\r\n        this._space = BABYLON.Space.WORLD;\r\n      }\r\n      else {\r\n        this._space = BABYLON.Space.BONE;\r\n        let para2: VeryParas = new VeryParas();\r\n        if (!ParaParserUtility.GameObjectPara(this.projectName, this.objectID, this.ID, ParaType.Action, para2, para_array[1])) {\r\n          return false;\r\n        }\r\n        this._ref = para2.gameObject;\r\n        if (this._ref.value === null) {\r\n          VE_ErrorManager.Add(new VE_Error('', this.ID + \"   \" + para_array[1] + \"\", '', Severity.Error));\r\n          return false;\r\n        }\r\n      }\r\n\r\n      // 3\r\n      if (para_array[2].toLowerCase() === \"x\") {\r\n        this._axis = 0;\r\n      }\r\n      else if (para_array[2].toLowerCase() === \"y\") {\r\n        this._axis = 1;\r\n      }\r\n      else if (para_array[2].toLowerCase() === \"z\") {\r\n        this._axis = 2;\r\n      }\r\n      else if (para_array[2].toLowerCase() === \"vector3\") {\r\n        this._axis = 3;\r\n      }\r\n      else {\r\n        VE_ErrorManager.Add(new VE_Error('', this.ID + \" xyzvector3\" + para_array[2] + \"\", '', Severity.Error));\r\n        return false;\r\n      }\r\n\r\n      // 4\r\n      if (this._axis === 3) {\r\n        let para4: VeryParas = new VeryParas();\r\n        if (!ParaParserUtility.Vector3OrNumberParaWithExpression(this.projectName, this.objectID, this.ID, ParaType.Action, para4, para_array[3])) {\r\n          return false;\r\n        }\r\n        this._isVec = para4.isVec;\r\n        this._posVec = para4.vector3;\r\n        this._x = para4.vecNumbers[0];\r\n        this._y = para4.vecNumbers[1];\r\n        this._z = para4.vecNumbers[2];\r\n      }\r\n      else {\r\n        let para4: VeryParas = new VeryParas();\r\n        if (!ParaParserUtility.NumberParaWithExpression(this.projectName, this.objectID, this.ID, ParaType.Action, para4, para_array[3])) {\r\n          return false;\r\n        }\r\n        this._posvalue = para4.number;\r\n      }\r\n\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public destroy(): void {\r\n\r\n  }\r\n\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport class Action_Translate extends VE_ActionBehaviour {\r\n\r\n  public get ID(): string {\r\n    return '|Translate';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'Action_Translate';\r\n  }\r\n\r\n  private _refType: BABYLON.Space = BABYLON.Space.LOCAL;\r\n\r\n  private _translateObj: VeryGameObject = new VeryGameObject();\r\n  private _refObj: VeryGameObject = new VeryGameObject();\r\n\r\n  private _isDeltaTime: VeryBool = new VeryBool();\r\n\r\n  private _isVec: boolean = true;\r\n  private _vecVar: VeryVector3 = new VeryVector3();\r\n  private _xVar: VeryNumber = new VeryNumber();\r\n  private _yVar: VeryNumber = new VeryNumber();\r\n  private _zVar: VeryNumber = new VeryNumber();\r\n\r\n  private _paraTime: number = 1;\r\n  private _paraVec: VeryVector3 = new VeryVector3();\r\n\r\n  public active(): void {\r\n    // console.log(this.actionID);\r\n  }\r\n\r\n\r\n  public onUpdate(): void {\r\n    if (!this._translateObj || !this._translateObj.value) {\r\n      return;\r\n    } else {\r\n      // \r\n      if (this._isDeltaTime && this._isDeltaTime.value) {\r\n        this._paraTime = Time.deltaTime;\r\n      } else {\r\n        this._paraTime = 1;\r\n      }\r\n\r\n      // \r\n      if (this._isVec) {\r\n        // \r\n        this._paraVec.value.copyFrom(this._vecVar.value);\r\n      } else {\r\n        this._paraVec.value.x = this._xVar.value;\r\n        this._paraVec.value.y = this._yVar.value;\r\n        this._paraVec.value.z = this._zVar.value;\r\n      }\r\n      this._paraVec.value = this._paraVec.value.multiplyByFloats(this._paraTime, this._paraTime, this._paraTime);\r\n\r\n      // \r\n      if (this._refType === BABYLON.Space.LOCAL || this._refType === BABYLON.Space.WORLD) {\r\n        this._translateObj.value.transform.translate(this._paraVec.value, this._refType);\r\n      }\r\n      // \r\n      else {\r\n        if (this._refObj && this._refObj.value) {\r\n          this._translateObj.value.transform.translateRelativeTo(this._paraVec.value, this._refObj.value.transform);\r\n        } else {\r\n          this._translateObj.value.transform.translate(this._paraVec.value, BABYLON.Space.WORLD);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    if (!ParaParserUtility.ParaNumbers(this.ID, ParaType.Action, para_array.length, 4)) {\r\n      return false;\r\n    } else {\r\n      // 1\r\n      let para1: VeryParas = new VeryParas();\r\n      if (!ParaParserUtility.GameObjectPara(this.projectName, this.objectID, this.ID, ParaType.Action, para1, para_array[0])) {\r\n        return false;\r\n      }\r\n      this._translateObj = para1.gameObject;\r\n\r\n      // 2\r\n      let para2: VeryParas = new VeryParas();\r\n      if (!ParaParserUtility.Vector3OrNumberParaWithExpression(this.projectName, this.objectID, this.ID, ParaType.Action, para2, para_array[1])) {\r\n        return false;\r\n      }\r\n      this._vecVar = para2.vector3;\r\n      this._xVar = para2.vecNumbers[0];\r\n      this._yVar = para2.vecNumbers[1];\r\n      this._zVar = para2.vecNumbers[2];\r\n      this._isVec = para2.isVec;\r\n\r\n      // 3\r\n      if (para_array[2].toLowerCase() === \"world\" || para_array[2] === \"\") {\r\n        this._refType = BABYLON.Space.WORLD;\r\n      }\r\n      else if (para_array[2].toLowerCase() === \"self\" || para_array[2] === \"\") {\r\n        this._refType = BABYLON.Space.LOCAL;\r\n      }\r\n      else {\r\n      let para3: VeryParas = new VeryParas();\r\n        if (!ParaParserUtility.GameObjectPara(this.projectName, this.objectID, this.ID, ParaType.Action, para3, para_array[2])) {\r\n          return false;\r\n        }\r\n        this._refObj = para3.gameObject;\r\n        if (this._refObj.value === null) {\r\n          VE_ErrorManager.Add(new VE_Error('', this.ID + \"   \" + para_array[2] + \"\", '', Severity.Error));\r\n        }\r\n      }\r\n\r\n      // 4\r\n      let para4: VeryParas = new VeryParas();\r\n      if (!ParaParserUtility.BoolParaWithExpression(this.projectName, this.objectID, this.ID, ParaType.Action, para4, para_array[3])) {\r\n        return false;\r\n      }\r\n      this._isDeltaTime = para4.bool;\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public destroy(): void {\r\n    // \r\n  }\r\n\r\n\r\n}\r\n\r\nVE_Actions.addAction(Action_SetPosition);\r\nVE_Actions.addAction(Action_Translate);\r\n\r\n","import { VE_ActionBehaviour, VE_Actions } from \"../../action\";\r\nimport { Vector3Utility, ParaParserUtility, VeryParas } from \"../../utility\";\r\nimport { ParaType, ActionType, Severity } from \"../../enum\";\r\nimport { VeryVector3, VeryNumber } from \"../../variables\";\r\nimport { VE_ErrorManager, VE_Error } from \"../../global\";\r\nimport { Time } from \"../../babylon\";\r\n\r\nexport class Action_Vector3_Interpolate extends VE_ActionBehaviour {\r\n\r\n  public get ID(): string {\r\n    return \"Vector3_Interpolate|\";\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"Action_Vector3_Interpolate\";\r\n  }\r\n\r\n  public get type(): ActionType {\r\n    return ActionType.Animation;\r\n  }\r\n\r\n  private _switch: boolean = false;\r\n  private _timer: number = 0;\r\n  private _isLinear: boolean = true;\r\n\r\n  private _acceptVec: VeryVector3 = new VeryVector3();\r\n\r\n  private _timeFloat: VeryNumber = new VeryNumber();\r\n\r\n  private _isVec1: boolean = false;\r\n  private _vecUnit1: VeryVector3 = new VeryVector3();\r\n  private _vecFloat1: VeryNumber[] = [];\r\n\r\n  private _isVec2: boolean = false;\r\n  private _vecUnit2: VeryVector3 = new VeryVector3();\r\n  private _vecFloat2: VeryNumber[] = [];\r\n\r\n\r\n  public active(): void {\r\n    if (this._timeFloat.value === 0) {\r\n      this.timesUp();\r\n    }\r\n    else {\r\n      this._timer = 0;\r\n      this._switch = true;\r\n    }\r\n  }\r\n\r\n\r\n  public onUpdate(): void {\r\n    if (this._switch) {\r\n      this._timer += Time.deltaTime;\r\n\r\n      let vec1: BABYLON.Vector3 = this._vecUnit1.value;\r\n      if (!this._isVec1) {\r\n        vec1 = new BABYLON.Vector3(this._vecFloat1[0].value, this._vecFloat1[1].value, this._vecFloat1[2].value);\r\n      }\r\n\r\n      let vec2: BABYLON.Vector3 = this._vecUnit2.value;\r\n      if (!this._isVec2) {\r\n        vec2 = new BABYLON.Vector3(this._vecFloat2[0].value, this._vecFloat2[1].value, this._vecFloat2[2].value);\r\n      }\r\n\r\n      if (this._timer > this._timeFloat.value) {\r\n        this._switch = false;\r\n        this._timer = 0;\r\n        if (this._isLinear) {\r\n          this._acceptVec.value = BABYLON.Vector3.Lerp(vec1, vec2, 1);\r\n        }\r\n        else {\r\n          this._acceptVec.value = Vector3Utility.Slerp(vec1, vec2, 1);\r\n        }\r\n        this._acceptVec.value.set(vec2.x, vec2.y, vec2.z);\r\n        this.timesUp();\r\n      }\r\n      else {\r\n        if (this._isLinear) {\r\n          this._acceptVec.value = BABYLON.Vector3.Lerp(vec1, vec2, this._timer / this._timeFloat.value);\r\n        }\r\n        else {\r\n          this._acceptVec.value = Vector3Utility.Slerp(vec1, vec2, this._timer / this._timeFloat.value);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public pause(): void {\r\n    this._switch = false;\r\n    super.pause();\r\n  }\r\n\r\n  public resume(): void {\r\n    this._switch = true;\r\n    super.resume();\r\n  }\r\n\r\n  public stop(): void {\r\n    this.timesUp();\r\n    super.stop();\r\n  }\r\n\r\n  private timesUp(): void {\r\n    this._switch = false;\r\n    this._timer = 0;\r\n    this.finish();\r\n  }\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    if (!ParaParserUtility.ParaNumbers(this.ID, ParaType.Action, para_array.length, 5)) {\r\n      return false;\r\n    } else {\r\n      // 1\r\n      if (para_array[0].toLowerCase() === \"linear\" || para_array[0] === \"\") {\r\n        this._isLinear = true;\r\n      }\r\n      else if (para_array[0].toLowerCase() === \"smooth\" || para_array[0] === \"\") {\r\n        this._isLinear = false;\r\n      }\r\n      else {\r\n        VE_ErrorManager.Add(new VE_Error('', this.ID + \"  LogWarnError \" + para_array[0] + \"\", '', Severity.Error));\r\n        return false;\r\n      }\r\n\r\n      // 2\r\n      let para2 = new VeryParas();\r\n      if (!ParaParserUtility.Vector3OrNumberParaWithExpression(this.projectName, this.objectID, this.ID, ParaType.Action, para2, para_array[1])) {\r\n        return false;\r\n      }\r\n      this._isVec1 = para2.isVec;\r\n      this._vecFloat1 = para2.vecNumbers;\r\n      this._vecUnit1 = para2.vector3;\r\n\r\n      // 3\r\n      let para3 = new VeryParas();\r\n      if (!ParaParserUtility.Vector3OrNumberParaWithExpression(this.projectName, this.objectID, this.ID, ParaType.Action, para3, para_array[2])) {\r\n        return false;\r\n      }\r\n      this._isVec2 = para3.isVec;\r\n      this._vecFloat2 = para3.vecNumbers;\r\n      this._vecUnit2 = para3.vector3;\r\n\r\n      // 4\r\n      let para4 = new VeryParas();\r\n      if (!ParaParserUtility.NumberParaWithExpression(this.projectName, this.objectID, this.ID, ParaType.Action, para4, para_array[3])) {\r\n        return false;\r\n      }\r\n      this._timeFloat = para4.number;\r\n\r\n      // 5\r\n      let para5 = new VeryParas();\r\n      if (!ParaParserUtility.Vector3Para(this.projectName, this.objectID, this.ID, ParaType.Action, para5, para_array[4])) {\r\n        return false;\r\n      }\r\n      this._acceptVec = para5.vector3;\r\n\r\n      return true;\r\n    }\r\n  }\r\n\r\n\r\n  public destroy(): void {\r\n\r\n  }\r\n\r\n\r\n}\r\n\r\n\r\nVE_Actions.addAction(Action_Vector3_Interpolate);","import { VE_ActionBehaviour, VE_Actions } from \"../../action\";\r\nimport { ParaType, ActionType } from \"../../enum\";\r\nimport { ParaParserUtility, VeryParas } from \"../../utility\";\r\nimport { VeryBool, VeryNumber } from \"../../variables\";\r\nimport { Time } from \"../../babylon\";\r\nimport { VE_CustomTriggerManager } from \"../../trigger\";\r\n\r\nexport class Action_Timer extends VE_ActionBehaviour {\r\n\r\n  public get ID(): string {\r\n    return \"Timer|\";\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"Action_Timer\";\r\n  }\r\n\r\n  private _switch: VeryBool = new VeryBool();\r\n\r\n  private _timerEvent: (() => void) | null = null;\r\n\r\n  // \r\n  private _mutiple: VeryBool = new VeryBool();\r\n\r\n  private _totalTime: VeryNumber = new VeryNumber();\r\n\r\n  private _timer: VeryTimeControl[] = [];\r\n\r\n\r\n  public active(): void {\r\n    if (this._switch.value) {\r\n      this.timeSet();\r\n    }\r\n    else {\r\n      this._timer = [];\r\n    }\r\n  }\r\n\r\n  private timeSet(): void {\r\n    if (this._mutiple.value) {\r\n      let timer: VeryTimeControl = new VeryTimeControl(this._totalTime.value, Time.time);\r\n      this._timer.push(timer);\r\n    }\r\n    else {\r\n      if (this._timer.length == 0) {\r\n        let timer: VeryTimeControl = new VeryTimeControl(this._totalTime.value, Time.time);\r\n        this._timer.push(timer);\r\n      }\r\n      else {\r\n        this._timer[0].reset(this._totalTime.value, Time.time);\r\n      }\r\n    }\r\n  }\r\n\r\n  public update(): void {\r\n    if (this._timer.length > 0) {\r\n      for (let i: number = 0; i < this._timer.length; i++) {\r\n        if (this._timer[i].isTimesUp(Time.time)) {\r\n          if (this._timer.length > i) {\r\n            this._timer.splice(i, 1);\r\n            i--;\r\n          }\r\n          this.timesUp();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // \r\n  private timesUp(): void {\r\n    if (this._timerEvent !== null) {\r\n      this._timerEvent();\r\n      this.finish();\r\n    }\r\n  }\r\n\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    if (!ParaParserUtility.ParaNumbers(this.ID, ParaType.Action, para_array.length, 3, 4)) {\r\n      return false;\r\n    } else {\r\n      // 1\r\n      let para1: VeryParas = new VeryParas();\r\n      if (!ParaParserUtility.BoolParaWithExpression(this.projectName, this.objectID, this.ID, ParaType.Action, para1, para_array[0])) {\r\n        return false;\r\n      }\r\n      this._switch = para1.bool;\r\n\r\n      // 2ID\r\n      let triggerArray: string[] = para_array[1].split(/,|/);\r\n      for (let i: number = 0; i < triggerArray.length; i++) {\r\n        VE_CustomTriggerManager.ConnectCustomTrigger(this.projectName, this.objectID, triggerArray[i].trim(), this.setCallback);\r\n      }\r\n\r\n      // 3\r\n      let para3: VeryParas = new VeryParas();\r\n      if (!ParaParserUtility.NumberParaWithExpression(this.projectName, this.objectID, this.ID, ParaType.Action, para3, para_array[2])) {\r\n        return false;\r\n      }\r\n      this._totalTime = para3.number;\r\n\r\n      if (para_array.length > 3) {\r\n        // 4 \r\n        let para4: VeryParas = new VeryParas();\r\n        if (!ParaParserUtility.BoolParaWithExpression(this.projectName, this.objectID, this.ID, ParaType.Action, para4, para_array[3])) {\r\n          return false;\r\n        }\r\n        this._mutiple = para4.bool;\r\n      } else {\r\n        this._mutiple.value = true;\r\n      }\r\n\r\n      return true;\r\n    }\r\n  }\r\n\r\n\r\n  private setCallback(callback: () => void): void {\r\n    this._timerEvent = callback;\r\n  }\r\n\r\n\r\n  public destroy(): void {\r\n\r\n  }\r\n\r\n\r\n}\r\n\r\n\r\nexport class VeryTimeControl {\r\n  private _totalTime: number;\r\n  private _startTime: number;\r\n  private _timeRecorder: number;\r\n\r\n  public constructor(time: number, start_time: number) {\r\n    if (time < 0) {\r\n      time = 0;\r\n    }\r\n    this._totalTime = time;\r\n    this._startTime = start_time;\r\n    this._timeRecorder = 0;\r\n  }\r\n\r\n  public isTimesUp(current_time: number): boolean {\r\n    this._timeRecorder = current_time - this._startTime;\r\n\r\n    if (this._timeRecorder >= this._totalTime) {\r\n      return true;\r\n    }\r\n    else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public reset(time: number, start_time: number): void {\r\n    if (time < 0) {\r\n      time = 0;\r\n    }\r\n    this._totalTime = time;\r\n    this._startTime = start_time;\r\n    this._timeRecorder = 0;\r\n  }\r\n}\r\n\r\n\r\nexport class Action_Wait extends VE_ActionBehaviour {\r\n\r\n  public get ID(): string {\r\n    return \"Wait|\";\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"Action_Wait\";\r\n  }\r\n\r\n  public get type(): ActionType {\r\n    return ActionType.Animation;\r\n  }\r\n\r\n  private _waitTime: VeryNumber = new VeryNumber();\r\n\r\n  private _timer: number = 0;\r\n  private _switch: boolean = false;\r\n\r\n  public active(): void {\r\n    if (this._waitTime.value === 0) {\r\n      this.timesUp();\r\n    }\r\n    else {\r\n      this._switch = true;\r\n      this._timer = 0;\r\n    }\r\n  }\r\n\r\n  public update(): void {\r\n    if (this._switch) {\r\n      this._timer += Time.deltaTime;\r\n      if (this._timer > this._waitTime.value) {\r\n        this.timesUp();\r\n      }\r\n    }\r\n  }\r\n\r\n  public pause(): void {\r\n    this._switch = false;\r\n    super.pause();\r\n  }\r\n\r\n  public resume(): void {\r\n    this._switch = true;\r\n    super.resume();\r\n  }\r\n\r\n  public stop(): void {\r\n    this.timesUp();\r\n    super.stop();\r\n  }\r\n\r\n  private timesUp(): void {\r\n    this._switch = false;\r\n    this._timer = 0;\r\n    this.finish();\r\n  }\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    if (!ParaParserUtility.ParaNumbers(this.ID, ParaType.Action, para_array.length, 1)) {\r\n      return false;\r\n    } else {\r\n      // 1 \r\n      let para1: VeryParas = new VeryParas();\r\n      if (!ParaParserUtility.NumberParaWithExpression(this.projectName, this.objectID, this.ID, ParaType.Action, para1, para_array[0])) {\r\n        return false;\r\n      }\r\n      this._waitTime = para1.number;\r\n\r\n      return true;\r\n    }\r\n  }\r\n\r\n\r\n  public destroy(): void {\r\n\r\n  }\r\n\r\n}\r\n\r\n\r\nVE_Actions.addAction(Action_Timer);\r\nVE_Actions.addAction(Action_Wait);","export * from './action-transform';\r\nexport * from './action-debug';\r\nexport * from './action-vector3';\r\nexport * from './action-template';\r\nexport * from './action_time';\r\nexport * from './action-math';","export * from './trigger-input';\r\nexport * from './trigger-system';\r\nexport * from './trigger-collision';","import { VE_TriggerBehaviour, VE_Triggers } from \"../../trigger\";\r\nimport { VeryGameObject } from \"../../variables\";\r\nimport { ParaParserUtility, VeryParas } from \"../../utility\";\r\nimport { ParaType, Severity } from \"../../enum\";\r\nimport { VE_ErrorManager, VE_Error } from \"../../global\";\r\n\r\nexport class Trigger_MouseOver extends VE_TriggerBehaviour {\r\n\r\n  public get ID(): string {\r\n    return 'On_Mouse_Over|';\r\n  };\r\n\r\n  public get className(): string {\r\n    return 'Trigger_MouseOver';\r\n  };\r\n\r\n  private _target: VeryGameObject = new VeryGameObject();\r\n\r\n  private _observer: Nullable<BABYLON.Observer<BABYLON.PointerInfo>> = null;\r\n\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n\r\n    if (!ParaParserUtility.ParaNumbers(this.ID, ParaType.Trigger, para_array.length, 0, 1)) {\r\n      return false;\r\n    }\r\n    else {\r\n\r\n      if (para_array.length > 0) {\r\n        // 1 \r\n        let para1: VeryParas = new VeryParas();\r\n        if (!ParaParserUtility.GameObjectPara(this.projectName, this.objectID, this.ID, ParaType.Trigger, para1, para_array[0])) {\r\n          return false;\r\n        }\r\n        this._target = para1.gameObject;\r\n      } else {\r\n        // \r\n        this._target.value = this.gameObject;\r\n      }\r\n\r\n      if (this._target.value === null) {\r\n        VE_ErrorManager.Add(new VE_Error('', this.ID + \"  \" + para_array[0] + \"012leftrightmiddle\", '', Severity.Error));\r\n        return false;\r\n      } else {\r\n        if (this._target.value.transform.mesh === null) {\r\n\r\n        } else {\r\n          // \r\n          this._target.value.transform.mesh.enablePointerMoveEvents = true;\r\n        }\r\n      }\r\n\r\n      this._observer = this.scene.onPointerObservable.add((pointInfo: BABYLON.PointerInfo) => {\r\n        if (pointInfo.type === BABYLON.PointerEventTypes.POINTERMOVE) {\r\n          if (pointInfo.pickInfo !== null && pointInfo.pickInfo.pickedMesh !== null && this._target.value) {\r\n            if (pointInfo.pickInfo.pickedMesh === this._target.value.transform.mesh) {\r\n              this.sendEvent();\r\n            }\r\n          }\r\n        }\r\n      });\r\n\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public destroy(): void {\r\n    if (this._observer) {\r\n      this._scene.onPointerObservable.remove(this._observer);\r\n    }\r\n    this._observer = null;\r\n  }\r\n\r\n}\r\n\r\nVE_Triggers.addTrigger(Trigger_MouseOver);","import { VE_TriggerBehaviour } from '../../index';\r\nimport { VE_Triggers } from '../../trigger';\r\nimport { ParaParserUtility, VE_KeyboardMap } from '../../utility';\r\nimport { ParaType, Severity } from '../../enum';\r\nimport { VE_ErrorManager, VE_Error } from '../../global';\r\n\r\n// \r\nexport class Trigger_MouseDown extends VE_TriggerBehaviour {\r\n\r\n  public get ID(): string {\r\n    return 'Mouse_Down|';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'Trigger_MouseDown';\r\n  }\r\n\r\n  private _mouseButtonIndex: number = 0;\r\n  private _downFlag: boolean = false;\r\n\r\n  private _observer: Nullable<BABYLON.Observer<BABYLON.PointerInfo>> = null;\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    if (!ParaParserUtility.ParaNumbers(this.ID, ParaType.Trigger, para_array.length, 1)) {\r\n      return false;\r\n    } else {\r\n      // 1\r\n      if (para_array[0] === \"0\" || para_array[0].toLowerCase() === \"left\" || para_array[0] === \"\") {\r\n        this._mouseButtonIndex = 0;\r\n      }\r\n      else if (para_array[0] === \"1\" || para_array[0].toLowerCase() === \"right\" || para_array[0] === \"\") {\r\n        this._mouseButtonIndex = 2;\r\n      }\r\n      else if (para_array[0] === \"2\" || para_array[0].toLowerCase() === \"middle\" || para_array[0] === \"\") {\r\n        this._mouseButtonIndex = 1;\r\n      }\r\n      else {\r\n        VE_ErrorManager.Add(new VE_Error('', this.ID + \"  \" + para_array[0] + \"012leftrightmiddle\", '', Severity.Error));\r\n        return false;\r\n      }\r\n\r\n      this._observer = this._scene.onPointerObservable.add(pointInfo => {\r\n        if (pointInfo.type === BABYLON.PointerEventTypes.POINTERDOWN) {\r\n          if (!this._downFlag && pointInfo.event.button === this._mouseButtonIndex) {\r\n            this._downFlag = true;\r\n            this.sendEvent();\r\n          }\r\n        } else if (pointInfo.type === BABYLON.PointerEventTypes.POINTERUP) {\r\n          if (this._downFlag && pointInfo.event.button === this._mouseButtonIndex) {\r\n            this._downFlag = false;\r\n          }\r\n        }\r\n      });\r\n\r\n      return true;\r\n    }\r\n\r\n  }\r\n\r\n  public destroy(): void {\r\n    if (this._observer) {\r\n      this._scene.onPointerObservable.remove(this._observer);\r\n    }\r\n    this._observer = null;\r\n  }\r\n\r\n}\r\n\r\n// \r\nexport class Trigger_MouseUp extends VE_TriggerBehaviour {\r\n\r\n  public get ID(): string {\r\n    return 'Mouse_Up|';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'Trigger_MouseUp';\r\n  }\r\n\r\n  private _mouseButtonIndex: number = 0;\r\n  private _downFlag: boolean = false;\r\n\r\n  private _observer: Nullable<BABYLON.Observer<BABYLON.PointerInfo>> = null;\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    if (!ParaParserUtility.ParaNumbers(this.ID, ParaType.Trigger, para_array.length, 1)) {\r\n      return false;\r\n    } else {\r\n      // 1\r\n      if (para_array[0] === \"0\" || para_array[0].toLowerCase() === \"left\" || para_array[0] === \"\") {\r\n        this._mouseButtonIndex = 0;\r\n      }\r\n      else if (para_array[0] === \"1\" || para_array[0].toLowerCase() === \"right\" || para_array[0] === \"\") {\r\n        this._mouseButtonIndex = 2;\r\n      }\r\n      else if (para_array[0] === \"2\" || para_array[0].toLowerCase() === \"middle\" || para_array[0] === \"\") {\r\n        this._mouseButtonIndex = 1;\r\n      }\r\n      else {\r\n        VE_ErrorManager.Add(new VE_Error('', this.ID + \"  \" + para_array[0] + \"012leftrightmiddle\", '', Severity.Error));\r\n        return false;\r\n      }\r\n\r\n      this._observer = this._scene.onPointerObservable.add(pointInfo => {\r\n        if (pointInfo.type === BABYLON.PointerEventTypes.POINTERDOWN) {\r\n          if (!this._downFlag && pointInfo.event.button === this._mouseButtonIndex) {\r\n            this._downFlag = true;\r\n          }\r\n        } else if (pointInfo.type === BABYLON.PointerEventTypes.POINTERUP) {\r\n          if (this._downFlag && pointInfo.event.button === this._mouseButtonIndex) {\r\n            this._downFlag = false;\r\n            this.sendEvent();\r\n          }\r\n        }\r\n      });\r\n\r\n      return true;\r\n    }\r\n\r\n  }\r\n\r\n  public destroy(): void {\r\n    if (this._observer) {\r\n      this._scene.onPointerObservable.remove(this._observer);\r\n    }\r\n    this._observer = null;\r\n  }\r\n\r\n}\r\n\r\n// \r\nexport class Trigger_MouseButton extends VE_TriggerBehaviour {\r\n\r\n  public get ID(): string {\r\n    return 'Mouse_Button|';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'Trigger_MouseButton';\r\n  }\r\n\r\n  private _mouseButtonIndex: number = 0;\r\n  private _mouseUpdate: { [key: number]: boolean } = {};\r\n  private _observer: Nullable<BABYLON.Observer<BABYLON.PointerInfo>> = null;\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    if (!ParaParserUtility.ParaNumbers(this.ID, ParaType.Trigger, para_array.length, 1)) {\r\n      return false;\r\n    } else {\r\n      // 1\r\n      if (para_array[0] === \"0\" || para_array[0].toLowerCase() === \"left\" || para_array[0] === \"\") {\r\n        this._mouseButtonIndex = 0;\r\n      }\r\n      else if (para_array[0] === \"1\" || para_array[0].toLowerCase() === \"right\" || para_array[0] === \"\") {\r\n        this._mouseButtonIndex = 2;\r\n      }\r\n      else if (para_array[0] === \"2\" || para_array[0].toLowerCase() === \"middle\" || para_array[0] === \"\") {\r\n        this._mouseButtonIndex = 1;\r\n      }\r\n      else {\r\n        VE_ErrorManager.Add(new VE_Error('', this.ID + \"  \" + para_array[0] + \"012leftrightmiddle\", '', Severity.Error));\r\n        return false;\r\n      }\r\n\r\n      this._observer = this._scene.onPointerObservable.add(pointInfo => {\r\n        if (pointInfo.type === BABYLON.PointerEventTypes.POINTERDOWN) {\r\n          this._mouseUpdate[pointInfo.event.button] = true;\r\n        } else if (pointInfo.type === BABYLON.PointerEventTypes.POINTERUP) {\r\n          this._mouseUpdate[pointInfo.event.button] = false;\r\n        }\r\n      });\r\n\r\n      return true;\r\n    }\r\n\r\n  }\r\n\r\n  public onUpdate(): void {\r\n    if (this._mouseUpdate[this._mouseButtonIndex]) {\r\n      this.sendEvent();\r\n    }\r\n  }\r\n\r\n  public destroy(): void {\r\n    if (this._observer) {\r\n      this._scene.onPointerObservable.remove(this._observer);\r\n    }\r\n    this._observer = null;\r\n  }\r\n\r\n}\r\n\r\n// \r\nexport class Trigger_Keyboard extends VE_TriggerBehaviour {\r\n\r\n  public get ID(): string {\r\n    return '|Key_Button';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'Trigger_Keyboard';\r\n  }\r\n\r\n  private _keyboard: string = '';\r\n  private _keyUpdate: { [key: string]: boolean } = {};\r\n  private _observer: Nullable<BABYLON.Observer<BABYLON.KeyboardInfo>> = null;\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n\r\n    if (!ParaParserUtility.ParaNumbers(this.ID, ParaType.Trigger, para_array.length, 1)) {\r\n      return false;\r\n    } else {\r\n      // 1\r\n      this._keyboard = VE_KeyboardMap.GetKey(para_array[0]).toLowerCase();\r\n      if (this._keyboard === 'null') {\r\n        VE_ErrorManager.Add(new VE_Error('', this.ID + \"  \" + para_array[0] + \"\", '', Severity.Error));\r\n        return false;\r\n      }\r\n\r\n      this._observer = this.scene.onKeyboardObservable.add(kbInfo => {\r\n        if (kbInfo.type === BABYLON.KeyboardEventTypes.KEYDOWN) {\r\n          this._keyUpdate[kbInfo.event.key.toLowerCase()] = true;\r\n        } else {\r\n          this._keyUpdate[kbInfo.event.key.toLowerCase()] = false;\r\n        }\r\n      });\r\n\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public onUpdate(): void {\r\n    if (this._keyUpdate[this._keyboard]) {\r\n      // console.log(this.triggerID);\r\n      this.sendEvent();\r\n    }\r\n  }\r\n\r\n  public destroy(): void {\r\n    if (this._observer) {\r\n      this._scene.onKeyboardObservable.remove(this._observer);\r\n    }\r\n    this._observer = null;\r\n  }\r\n\r\n\r\n}\r\n\r\n// \r\nexport class Trigger_KeyDown extends VE_TriggerBehaviour {\r\n\r\n  public get ID(): string {\r\n    return '|Key_Down';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'Trigger_KeyDown';\r\n  }\r\n\r\n  private _keyboard: string = '';\r\n  private _downFlag: boolean = false;\r\n\r\n  private _observer: Nullable<BABYLON.Observer<BABYLON.KeyboardInfo>> = null;\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n\r\n    if (!ParaParserUtility.ParaNumbers(this.ID, ParaType.Trigger, para_array.length, 1)) {\r\n      return false;\r\n    } else {\r\n      // 1\r\n      this._keyboard = VE_KeyboardMap.GetKey(para_array[0]).toLowerCase();\r\n      if (this._keyboard === 'null') {\r\n        VE_ErrorManager.Add(new VE_Error('', this.ID + \"  \" + para_array[0] + \"\", '', Severity.Error));\r\n        return false;\r\n      }\r\n\r\n      this._observer = this.scene.onKeyboardObservable.add(kbInfo => {\r\n        if (kbInfo.type === BABYLON.KeyboardEventTypes.KEYDOWN) {\r\n          if (!this._downFlag && kbInfo.event.key.toLowerCase() === this._keyboard) {\r\n            this._downFlag = true;\r\n            this.sendEvent();\r\n          }\r\n        } else {\r\n          if (this._downFlag && kbInfo.event.key.toLowerCase() === this._keyboard) {\r\n            this._downFlag = false;\r\n          }\r\n        }\r\n      });\r\n\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public destroy(): void {\r\n    if (this._observer) {\r\n      this._scene.onKeyboardObservable.remove(this._observer);\r\n    }\r\n    this._observer = null;\r\n  }\r\n\r\n\r\n}\r\n\r\n// \r\nexport class Trigger_KeyUp extends VE_TriggerBehaviour {\r\n\r\n  public get ID(): string {\r\n    return '|Key_Up';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'Trigger_KeyUp';\r\n  }\r\n\r\n  private _keyboard: string = '';\r\n  private _downFlag: boolean = false;\r\n\r\n  private _observer: Nullable<BABYLON.Observer<BABYLON.KeyboardInfo>> = null;\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n\r\n    if (!ParaParserUtility.ParaNumbers(this.ID, ParaType.Trigger, para_array.length, 1)) {\r\n      return false;\r\n    } else {\r\n      // 1\r\n      this._keyboard = VE_KeyboardMap.GetKey(para_array[0]).toLowerCase();\r\n      if (this._keyboard === 'null') {\r\n        VE_ErrorManager.Add(new VE_Error('', this.ID + \"  \" + para_array[0] + \"\", '', Severity.Error));\r\n        return false;\r\n      }\r\n\r\n      this._observer = this.scene.onKeyboardObservable.add(kbInfo => {\r\n        if (kbInfo.type === BABYLON.KeyboardEventTypes.KEYDOWN) {\r\n          if (!this._downFlag && kbInfo.event.key.toLowerCase() === this._keyboard) {\r\n            this._downFlag = true;\r\n          }\r\n        } else {\r\n          if (this._downFlag && kbInfo.event.key.toLowerCase() === this._keyboard) {\r\n            this._downFlag = false;\r\n            this.sendEvent();\r\n          }\r\n        }\r\n      });\r\n\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public destroy(): void {\r\n    if (this._observer) {\r\n      this._scene.onKeyboardObservable.remove(this._observer);\r\n    }\r\n    this._observer = null;\r\n  }\r\n\r\n\r\n}\r\n\r\n// \r\nexport class Trigger_KeyboardCombine extends VE_TriggerBehaviour {\r\n\r\n  public get ID(): string {\r\n    return 'Key_Combination|';\r\n  }\r\n\r\n  public get className(): string {\r\n    return 'Trigger_KeyboardCombine';\r\n  }\r\n\r\n  private _keyboards: string[] = [];\r\n  private _lastKey: string = '';\r\n  private _downFlag: boolean = false;\r\n  private _trigger: boolean = false;\r\n\r\n  private _keyUpdate: { [key: string]: boolean } = {};\r\n  private _observer: Nullable<BABYLON.Observer<BABYLON.KeyboardInfo>> = null;\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n\r\n    if (para_array.length < 2) {\r\n      VE_ErrorManager.Add(new VE_Error('', this.ID + \"  2\", '', Severity.Error));\r\n      return false;\r\n    } else {\r\n      // n\r\n      for (let i: number = 0; i < para_array.length; i++) {\r\n        let key: string = VE_KeyboardMap.GetKey(para_array[i]).toLowerCase();\r\n        if (key === 'null') {\r\n          VE_ErrorManager.Add(new VE_Error('', this.ID + \"  \" + para_array[i] + \"\", '', Severity.Error));\r\n          return false;\r\n        }\r\n        this._keyboards.push(key);\r\n      }\r\n      this._lastKey = this._keyboards[this._keyboards.length - 1];\r\n\r\n      this._observer = this.scene.onKeyboardObservable.add(kbInfo => {\r\n        if (kbInfo.type === BABYLON.KeyboardEventTypes.KEYDOWN) {\r\n          if (!this._downFlag && this._lastKey === kbInfo.event.key.toLowerCase()) {\r\n            this._downFlag = true;\r\n            this._trigger = true;\r\n          }\r\n          this._keyUpdate[kbInfo.event.key.toLowerCase()] = true;\r\n        } else {\r\n          if (this._downFlag && this._lastKey === kbInfo.event.key.toLowerCase()) {\r\n            this._downFlag = false;\r\n            this._trigger = false;\r\n          }\r\n          this._keyUpdate[kbInfo.event.key.toLowerCase()] = false;\r\n        }\r\n      });\r\n\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public onUpdate(): void {\r\n    if (this._keyboards && this._keyboards.length > 0) {\r\n      let all: boolean = true;\r\n      for (let i: number = 0; i < this._keyboards.length; i++) {\r\n        if (i === this._keyboards.length - 1) {\r\n          if (all && this._downFlag && this._trigger) {\r\n            this._trigger = false;\r\n            this.sendEvent();\r\n          }\r\n        } else {\r\n          if (!this._keyUpdate[this._keyboards[i]]) {\r\n            all = false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    // if (this._keyUpdate[this._keyboard]) {\r\n    //   // console.log(this.triggerID);\r\n    //   this.sendEvent();\r\n    // }\r\n  }\r\n\r\n  public destroy(): void {\r\n    if (this._observer) {\r\n      this._scene.onKeyboardObservable.remove(this._observer);\r\n    }\r\n    this._observer = null;\r\n  }\r\n\r\n\r\n}\r\n\r\n\r\n// Mouse Input\r\nVE_Triggers.addTrigger(Trigger_MouseDown);\r\nVE_Triggers.addTrigger(Trigger_MouseUp);\r\nVE_Triggers.addTrigger(Trigger_MouseButton);\r\n\r\n// Keyboard Input\r\nVE_Triggers.addTrigger(Trigger_Keyboard);\r\nVE_Triggers.addTrigger(Trigger_KeyDown);\r\nVE_Triggers.addTrigger(Trigger_KeyUp);\r\nVE_Triggers.addTrigger(Trigger_KeyboardCombine);","import { VE_TriggerBehaviour, VE_Triggers } from \"../../trigger\";\r\n\r\nexport class Trigger_Start extends VE_TriggerBehaviour {\r\n\r\n  public get ID(): string {\r\n    return 'Start|';\r\n  };\r\n\r\n  public get className(): string {\r\n    return 'Trigger_Start';\r\n  };\r\n\r\n  private _observer: Nullable<BABYLON.Observer<BABYLON.Scene>> = null;\r\n\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    this._observer = this.scene.onBeforeRenderObservable.add(() => {\r\n      this.sendEvent();\r\n      this.destroy();\r\n    });\r\n    return true;\r\n  }\r\n\r\n\r\n  public destroy(): void {\r\n    if (this._observer) {\r\n      this.scene.onBeforeRenderObservable.remove(this._observer);\r\n    }\r\n    this._observer = null;\r\n  }\r\n\r\n\r\n}\r\n\r\nexport class Trigger_Continuous extends VE_TriggerBehaviour {\r\n\r\n  public get ID(): string {\r\n    return 'Continuous|';\r\n  };\r\n\r\n  public get className(): string {\r\n    return 'Trigger_Continuous';\r\n  };\r\n\r\n  private _observer: Nullable<BABYLON.Observer<BABYLON.Scene>> = null;\r\n\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    this._observer = this.scene.onBeforeRenderObservable.add(() => {\r\n      this.sendEvent();\r\n    });\r\n    return true;\r\n  }\r\n\r\n\r\n  public destroy(): void {\r\n    if (this._observer) {\r\n      this.scene.onBeforeRenderObservable.remove(this._observer);\r\n    }\r\n    this._observer = null;\r\n  }\r\n\r\n\r\n}\r\n\r\nexport class Trigger_Custom extends VE_TriggerBehaviour {\r\n  public get ID(): string {\r\n    return '|Custom';\r\n  };\r\n\r\n  public get className(): string {\r\n    return 'Trigger_Custom';\r\n  };\r\n\r\n  public customEvent(): void {\r\n    this.sendEvent();\r\n  }\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    return true;\r\n  }\r\n\r\n  public destroy(): void {\r\n  }\r\n}\r\n\r\n\r\nVE_Triggers.addTrigger(Trigger_Start);\r\nVE_Triggers.addTrigger(Trigger_Continuous);\r\nVE_Triggers.addTrigger(Trigger_Custom);","import { VE_Templates, VE_Template } from \"../template\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { VE_Objects, VeryEngineObject } from \"../object\";\r\nimport { VE_Variables, VeryVarManager, IVeryVar, VeryExpression, VeryString, VarTools, VeryBool } from \"../variables\";\r\nimport { ErrorInfo, VE_StringFormat } from \"../utility\";\r\nimport { VE_ErrorManager, VE_Error } from \"../global\";\r\nimport { VE_Expressions, IExpression } from \"../expression\";\r\nimport { VE_FsmData, VE_StateData, VE_StateTriggerData, VE_StateActionData } from \"../dataSource\";\r\nimport { VE_Fsm, VE_State, VE_StateAction, VE_AssociatedState, StateConst } from \"../state\";\r\nimport { VE_Triggers, VE_TriggerBehaviour, VE_CustomTriggerManager } from \"../trigger\";\r\nimport { VE_Actions, VE_ActionBehaviour, VE_Assignment } from \"../action\";\r\nimport { StateActionType, AssignType } from \"../enum\";\r\nimport { VE_TypeConvert } from \"../utility/typeConvert\";\r\nimport { VE_AssignmentTypeJudge } from \"../action/assignmentTypeJudge\";\r\nimport { VerySceneVariables } from \"../scene\";\r\nimport { Trigger_Custom } from \"../library/trigger\";\r\n\r\nexport class CreateInstance {\r\n\r\n\r\n\r\n\r\n\r\n  public static createProject(project_name: string): boolean {\r\n    let templates: VE_Templates = VE_Manager.templates(project_name);\r\n    let objects: VE_Objects = VE_Manager.objects(project_name);\r\n    let globalVars: VE_Variables = VE_Manager.variables(project_name);\r\n\r\n    // 1. \r\n    // (1).\r\n    for (let i: number = 0; i < globalVars.varData.count; i++) {\r\n      let varID: string = globalVars.varData.getVariableID(i);\r\n      let varPara: string[] = globalVars.varData.getVariableParas(varID);\r\n      // 1.2.3.\r\n      // 1.\r\n      if (varPara[0] === \"\" || varPara[0].toLowerCase() === \"expression\") {\r\n        continue;\r\n      }\r\n      // 2.IVeryVar\r\n      else if (VeryVarManager.hasVarType(varPara[0])) {\r\n        let errorInfo: ErrorInfo = new ErrorInfo();\r\n        let newVar: Nullable<IVeryVar> = VeryVarManager.createVariable(varID, varPara[0], varPara[1], errorInfo);\r\n        // TODO: ListDictionary\r\n        if (!errorInfo.isRight || newVar === null) {\r\n          VE_ErrorManager.Add(VE_Error.error(globalVars.varData.getPos(varID), \"\" + project_name + \"\" + varID + \"\" + varPara[0] + \"\" + varPara[1] + \"\" + errorInfo.message + \"\", ''));\r\n          return false;\r\n        } else {\r\n          globalVars.addVariable(varID, newVar);\r\n        }\r\n      }\r\n      // 3.\r\n      else if (templates.isCreatedTemplate(varPara[0])) {\r\n        globalVars.addTemplate(varID, templates.getTemplate(varPara[0]).clone('__global__', varID));\r\n      }\r\n      // \r\n      else {\r\n        VE_ErrorManager.Add(VE_Error.error(globalVars.varData.getPos(varID), \"\" + project_name + \"\" + varID + \"\" + varPara[0] + \"\" + varPara[1] + \"\", ''));\r\n        return false;\r\n      }\r\n    }\r\n\r\n    // (2).\r\n    for (let i: number = 0; i < globalVars.varData.count; i++) {\r\n      let varID: string = globalVars.varData.getVariableID(i);\r\n      let varPara: string[] = globalVars.varData.getVariableParas(varID);\r\n      // \r\n      // 1.\r\n      if (varPara[0] === \"\" || varPara[0].toLowerCase() === \"expression\") {\r\n        // \r\n        let errorInfo: ErrorInfo = new ErrorInfo();\r\n        let globalExp: IExpression = VE_Expressions.createGlobalExpression(varID, varPara[1], project_name, errorInfo);\r\n        if (!errorInfo.isRight || globalExp === null) {\r\n          VE_ErrorManager.Add(VE_Error.error(globalVars.varData.getPos(varID), \"\" + project_name + \"\" + varID + \",\" + varPara[0] + \",\" + varPara[1] + \"\\n\" + errorInfo.message, \"\"));\r\n          return false;\r\n        }\r\n        globalVars.addExpression(varID, globalExp);\r\n      }\r\n      else {\r\n        continue;\r\n      }\r\n    }\r\n\r\n    // 2. ----\r\n    // 1.\r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.varData.count; k++) {\r\n        // (1). \r\n        let varID: string = veryObject.varData.getVariableID(k);\r\n        let varPara: string[] = veryObject.varData.getVariableParas(varID);\r\n        // 1.2.3.\r\n        // 1.\r\n        if (varPara[0] === \"\" || varPara[0].toLowerCase().trim() === \"expression\") {\r\n          continue;\r\n        }\r\n        // 2.IVeryVar\r\n        else if (VeryVarManager.hasVarType(varPara[0])) {\r\n          let errorInfo: ErrorInfo = new ErrorInfo();\r\n          let newVar: Nullable<IVeryVar> = VeryVarManager.createVariable(varID, varPara[0], varPara[1], errorInfo);\r\n          // TODO: ListDictionary\r\n          if (newVar === null || !errorInfo.isRight) {\r\n            VE_ErrorManager.Add(VE_Error.error(veryObject.varData.getPos(varID), \"\" + project_name + \"\" + varID + \"\" + varPara[0] + \"\" + varPara[1] + \"\" + errorInfo.message + \"\", ''));\r\n            return false;\r\n          } else {\r\n            globalVars.addVariable(varID, newVar);\r\n          }\r\n        }\r\n        // 3.\r\n        else if (templates.isCreatedTemplate(varPara[0])) {\r\n          veryObject.addTemplate(varID, templates.getTemplate(varPara[0]).clone(objectID, varID));\r\n        }\r\n        // \r\n        else {\r\n          VE_ErrorManager.Add(VE_Error.error(veryObject.varData.getPos(varID), \"\" + project_name + \"\" + objectID + \"\" + varID + \",\" + varPara[0] + \",\" + varPara[1] + \"\", \"\"));\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    // 3.   \r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.dataSource.fsmCount; k++) {\r\n        let fsmID: string = veryObject.dataSource.getFsmID(k);\r\n        let fsmData: VE_FsmData = veryObject.dataSource.getFsmData(fsmID);\r\n        // string\r\n        let newVar: VeryString = new VeryString();\r\n        newVar.setValue(fsmData.initialValStr);\r\n        /* *\r\n        let errorInfo: ErrorInfo = new ErrorInfo();\r\n        let newVar: Nullable<IVeryVar> = VeryVarManager.createVariable(fsmID, fsmData.fsmType, fsmData.initialValStr, errorInfo);\r\n        // TODO: ListDictionary\r\n        if (newVar === null || !errorInfo.isRight) {\r\n          VE_ErrorManager.Add(VE_Error.error(veryObject.dataSource.getFsmPos(fsmID), \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + errorInfo.message + \"\", ''));\r\n          return false;\r\n        }\r\n        */\r\n        // \r\n        let fsm: VE_Fsm = new VE_Fsm(project_name, objectID, fsmID, newVar, veryObject);\r\n        veryObject.addFsm(fsmID, fsm);\r\n      }\r\n    }\r\n    // \r\n    // 4. \r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.varData.count; k++) {\r\n        // (1). \r\n        let varID: string = veryObject.varData.getVariableID(k);\r\n        let varPara: string[] = veryObject.varData.getVariableParas(varID);\r\n        // 1.2.3.\r\n        // 1.\r\n        if (varPara[0] === \"\" || varPara[0].toLowerCase().trim() === \"expression\") {\r\n          // \r\n          let errorInfo: ErrorInfo = new ErrorInfo();\r\n          let newVar: IExpression = VE_Expressions.createLocalExpression(varID, varPara[1], project_name, objectID, errorInfo);\r\n          if (!errorInfo.isRight || newVar === null) {\r\n            VE_ErrorManager.Add(VE_Error.error(veryObject.varData.getPos(varID), \"\" + project_name + \"\" + objectID + \"\" + varID + \",\" + varPara[0] + \",\" + varPara[1] + \"\\n\" + errorInfo.message, ''));\r\n            return false;\r\n          }\r\n          veryObject.addExpression(varID, newVar);\r\n        }\r\n        else {\r\n          continue;\r\n        }\r\n      }\r\n    }\r\n\r\n    // TODO: UI\r\n\r\n    // 5. \r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.dataSource.triggerCount; k++) {\r\n        let triggerID: string = veryObject.dataSource.getTriggerID(k);\r\n        //Debug.Log(\"ID\" + triggerID);\r\n        let triggerPara: string[] = veryObject.dataSource.getTriggerPara(triggerID);\r\n\r\n        if (!VE_Triggers.hasTrigger(triggerPara[0])) {\r\n          VE_ErrorManager.Add(VE_Error.error(veryObject.dataSource.getTriggerPos(triggerID), \"\" + project_name + \"\" + objectID + \"\" + triggerID + \"\" + triggerPara[0] + \"\", \"\"));\r\n          return false;\r\n        } else {\r\n          // Trigger\r\n          let errorInfo: ErrorInfo = new ErrorInfo();\r\n          let trigger: Nullable<VE_TriggerBehaviour> = VE_Triggers.createTrigger(veryObject, triggerID, triggerPara[0], triggerPara.slice(1), errorInfo);\r\n\r\n          if (!errorInfo.isRight || trigger === null) {\r\n            VE_ErrorManager.Add(VE_Error.error(veryObject.dataSource.getTriggerPos(triggerID), \"\" + project_name + \"\" + objectID + \"\" + triggerID + \"\" + errorInfo.message + \"\", \"\"));\r\n            return false;\r\n          }\r\n          // \r\n          if (trigger.className === \"Trigger_Custom\") {\r\n            VE_CustomTriggerManager.AddTriggerEvent(project_name, objectID, triggerID, (<Trigger_Custom>trigger).customEvent);\r\n          }\r\n          veryObject.addTrigger(triggerID, trigger!);\r\n        }\r\n      }\r\n    }\r\n\r\n    // 6. \r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.dataSource.actionCount; k++) {\r\n        let actionID: string = veryObject.dataSource.getActionID(k);\r\n        let actionPara: string[] = veryObject.dataSource.getActionPara(actionID);\r\n        // console.log(actionID);\r\n        // console.log(actionPara);\r\n        if (!VE_Actions.hasAction(actionPara[0])) {\r\n          VE_ErrorManager.Add(VE_Error.error(veryObject.dataSource.getActionPos(actionID), \"\" + project_name + \"\" + objectID + \"\" + actionID + \"\" + actionPara[0] + \"\", \"\"));\r\n          return false;\r\n        } else {\r\n          // Action\r\n          let errorInfo: ErrorInfo = new ErrorInfo();\r\n          let action: Nullable<VE_ActionBehaviour> = VE_Actions.createAction(veryObject, actionID, actionPara[0], actionPara.slice(1), veryObject.dataSource.getActionInitVal(actionID), errorInfo);\r\n\r\n          if (!errorInfo.isRight || action === null) {\r\n            VE_ErrorManager.Add(VE_Error.error(veryObject.dataSource.getActionPos(actionID), \"\" + project_name + \"\" + objectID + \"\" + actionID + \"\" + errorInfo.message + \"\", \"\"));\r\n            return false;\r\n          }\r\n\r\n          veryObject.addAction(actionID, action!);\r\n        }\r\n      }\r\n    }\r\n\r\n    // 7.    +  + \r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.dataSource.fsmCount; k++) {\r\n        let fsmID: string = veryObject.dataSource.getFsmID(k);\r\n        let fsmData: VE_FsmData = veryObject.dataSource.getFsmData(fsmID);\r\n        // \r\n        let fsm: VE_Fsm = veryObject.getFsm(fsmID);\r\n        // \r\n        for (let p: number = 0; p < fsmData.count; p++) {\r\n          let stateData: VE_StateData = fsmData.getStateData(p);\r\n          if (fsm.hasStateValue(stateData.ValStr)) {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\" + stateData.rowIndex + \"F\", \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\", \"\"));\r\n            return false;\r\n          }\r\n          // \r\n          let state: VE_State = new VE_State(fsm, fsm.count + 1);\r\n          state.setConstValue(stateData.ValStr);\r\n\r\n          /*\r\n          if (stateData.isInitialValue) {\r\n            state.setInitialValue(fsm.fsmVar.getValue());\r\n          }\r\n          else {\r\n            // TODO: \r\n            // if (!this.stateAssignment(project_name, objectID, fsmID, globalVars, objects, veryObject, fsm, stateData, state)) {\r\n            //   return false;\r\n            // }\r\n          }\r\n          */\r\n\r\n          // \r\n          if (stateData.isSequence) {\r\n            state.setSequence();\r\n          }\r\n\r\n          // \r\n          if (stateData.logicalExp !== '') {\r\n            let errorInfo: ErrorInfo = new ErrorInfo();\r\n            let logicalExp: IExpression = VE_Expressions.createFsmExpression('', stateData.logicalExp, project_name, objectID, fsmID, errorInfo);\r\n            if (!errorInfo.isRight || logicalExp === null) {\r\n              VE_ErrorManager.Add(VE_Error.error(\"\" + stateData.rowIndex.toString() + \"E\", \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + stateData.logicalExp + \"\\n\" + errorInfo.message, \"\"));\r\n              return false;\r\n            }\r\n            state.logicalAssociated = logicalExp;\r\n          }\r\n\r\n          // \r\n          for (let s: number = 0; s < stateData.triggerCount; s++) {\r\n            let triggerData: VE_StateTriggerData = stateData.getTrigger(s);\r\n            let triggerPos: string = stateData.getTriggerPos(s);\r\n            // \r\n            let trigger: Nullable<VE_TriggerBehaviour> = VE_Triggers.findTrigger(veryObject, triggerData.triggerID);\r\n            if (trigger === null) {\r\n              VE_ErrorManager.Add(VE_Error.error(triggerPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + triggerData.triggerID + \"\", \"\"));\r\n              return false;\r\n            }\r\n            // \r\n            let logicalExp: Nullable<IExpression> = null;\r\n            // Debug.LogWarning(\"\" + triggerData.LogicalExp);\r\n            if (triggerData.logicalExp !== '') {\r\n              // \r\n              let errorInfo: ErrorInfo = new ErrorInfo();\r\n              logicalExp = VE_Expressions.createFsmExpression('', triggerData.logicalExp, project_name, objectID, fsmID, errorInfo);\r\n              // Debug.LogWarning(logicalExp);\r\n              if (!errorInfo.isRight || logicalExp === null) {\r\n                VE_ErrorManager.Add(VE_Error.error(triggerPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + triggerData.logicalExp + \"\\n\" + errorInfo.message, \"\"));\r\n                return false;\r\n              }\r\n            }\r\n            // console.log(state);\r\n            // console.log(trigger);\r\n            trigger.addTriggerTarget(logicalExp, state);\r\n            // \r\n            if (triggerData.logicalSwitch !== '') {\r\n              // \r\n              let errorInfo: ErrorInfo = new ErrorInfo();\r\n              let logicalSwitch: IExpression = VE_Expressions.createFsmExpression('', triggerData.logicalSwitch, project_name, objectID, fsmID, errorInfo);\r\n              if (!errorInfo.isRight || logicalSwitch === null) {\r\n                VE_ErrorManager.Add(VE_Error.error(triggerPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + triggerData.logicalSwitch + \"\\n\" + errorInfo.message, \"\"));\r\n                return false;\r\n              }\r\n              trigger.addLogicalSwitch(logicalSwitch);\r\n            }\r\n          }\r\n\r\n          // \r\n          for (let s: number = 0; s < stateData.actionCount; s++) {\r\n            let actionData: VE_StateActionData = stateData.getAction(s);\r\n            let actionPos: string = stateData.getActionPos(s);\r\n            // \r\n            if (actionData.type === StateActionType.Action) {\r\n              // \r\n              let action: Nullable<VE_ActionBehaviour> = VE_Actions.findAction(veryObject, actionData.actionID);\r\n              if (action === null) {\r\n                VE_ErrorManager.Add(VE_Error.error(actionPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + actionData.actionID + \"\", \"\"));\r\n                return false;\r\n              }\r\n              // bool\r\n              // \r\n              let errorInfo: ErrorInfo = new ErrorInfo();\r\n              let enableVar: Nullable<IVeryVar> = null;\r\n              let enableStr: string = actionData.enabled.trim().toLowerCase();\r\n              if (enableStr === 'false' || enableStr === '') {\r\n                enableVar = new VeryBool();\r\n                enableVar.setValue(false);\r\n              } else if (enableStr === 'true' || enableStr === '') {\r\n                enableVar = new VeryBool();\r\n                enableVar.setValue(true);\r\n              } else {\r\n                // 1*2.*boolean\r\n                if (actionData.enabled.indexOf(StateConst.VARIABLE_SYMBOL) > -1) {\r\n                  errorInfo.clear();\r\n                  enableVar = VarTools.GetVeryVarWithExpression(project_name, objectID, actionData.enabled, errorInfo);\r\n                  if (!errorInfo.isRight || enableVar === null) {\r\n                    VE_ErrorManager.Add(VE_Error.error(actionPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + actionData.actionID + \"\" + actionData.enabled + \"\" + errorInfo.message, \"\"));\r\n                    return false;\r\n                  }\r\n                  if (enableVar.varType !== 'bool') {\r\n                    VE_ErrorManager.Add(VE_Error.error(actionPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + actionData.actionID + \"\" + actionData.enabled + \"bool\" + enableVar.varType, \"\"));\r\n                    return false;\r\n                  }\r\n\r\n                } else {\r\n                  VE_ErrorManager.Add(VE_Error.error(actionPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + actionData.actionID + \"\" + actionData.enabled + \"/true/false*.*bool\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n\r\n              // \r\n              let everyFrameVar: Nullable<IVeryVar> = null;\r\n              let everyFrameStr: string = actionData.everyFrame.trim().toLowerCase();\r\n              if (everyFrameStr === 'false' || everyFrameStr === '') {\r\n                everyFrameVar = new VeryBool();\r\n                everyFrameVar.setValue(false);\r\n              } else if (everyFrameStr === 'true' || everyFrameStr === '') {\r\n                everyFrameVar = new VeryBool();\r\n                everyFrameVar.setValue(true);\r\n              } else {\r\n                // 1*2.*boolean\r\n                if (actionData.everyFrame.indexOf(StateConst.VARIABLE_SYMBOL) > -1) {\r\n                  errorInfo.clear();\r\n                  everyFrameVar = VarTools.GetVeryVarWithExpression(project_name, objectID, actionData.everyFrame, errorInfo);\r\n                  if (!errorInfo.isRight || everyFrameVar === null) {\r\n                    VE_ErrorManager.Add(VE_Error.error(actionPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + actionData.actionID + \"\" + actionData.everyFrame + \"\" + errorInfo.message, \"\"));\r\n                    return false;\r\n                  }\r\n                  if (everyFrameVar.varType !== 'bool') {\r\n                    VE_ErrorManager.Add(VE_Error.error(actionPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + actionData.actionID + \"\" + actionData.everyFrame + \"bool\" + everyFrameVar.varType, \"\"));\r\n                    return false;\r\n                  }\r\n\r\n                } else {\r\n                  VE_ErrorManager.Add(VE_Error.error(actionPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + actionData.actionID + \"\" + actionData.everyFrame + \"/true/false*.*bool\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n\r\n              // \r\n              let isSequenceStr: string = actionData.isSequence.trim().toLowerCase();\r\n              let isSequence: boolean = false;\r\n              if (isSequenceStr === 'false' || isSequenceStr === '') {\r\n                isSequence = false;\r\n              } else if (isSequenceStr === 'true' || isSequenceStr === '') {\r\n                isSequence = true;\r\n              } else {\r\n                VE_ErrorManager.Add(VE_Error.error(actionPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + actionData.actionID + \"\" + actionData.isSequence + \"/false/true\", \"\"));\r\n                return false;\r\n              }\r\n\r\n              // \r\n              let stateAction: VE_StateAction = new VE_StateAction();\r\n              stateAction.setAction(action, enableVar, everyFrameVar, isSequence);\r\n              state.addAction(stateAction);\r\n            }\r\n            // \r\n            else {\r\n              // TODO\r\n              if (!this.assignmentAction(project_name, objectID, fsmID, globalVars, objects, veryObject, actionData, state)) {\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n\r\n          fsm.addState(state);\r\n\r\n          /*\r\n          // \r\n          if (fsm.isCreatedState(stateData.stateIndex)) {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\" + stateData.rowIndex.toString() + \"I\", \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + stateData.ValStr + \"ID\", \"\"));\r\n            return false;\r\n          }\r\n          else {\r\n            fsm.addState(state, stateData.stateIndex);\r\n          }\r\n          */\r\n        }\r\n      }\r\n    }\r\n\r\n    // 8.   \r\n    for (let i: number = 0; i < objects.count; i++) {\r\n      let objectID: string = objects.getObjectID(i);\r\n      let veryObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n      for (let k: number = 0; k < veryObject.dataSource.fsmCount; k++) {\r\n        let fsmID: string = veryObject.dataSource.getFsmID(k);\r\n        let fsmData: VE_FsmData = veryObject.dataSource.getFsmData(fsmID);\r\n        // \r\n        let fsm: VE_Fsm = veryObject.getFsm(fsmID);\r\n        // \r\n        for (let p: number = 0; p < fsmData.count; p++) {\r\n          let stateData: VE_StateData = fsmData.getStateData(p);\r\n          let state: Nullable<VE_State> = fsm.getStateInSequence(p);\r\n          // \r\n          for (let s: number = 0; s < stateData.associatedStateCount; s++) {\r\n            let associatedStateInfo: string = stateData.getAssociatedState(s);\r\n            let associatedPos: string = stateData.getAssociatedStatePos(s);\r\n            let associatedState: VE_AssociatedState = new VE_AssociatedState(state!);\r\n            let multipleAssociatedState: string[] = associatedStateInfo.split(/,|/);\r\n            for (let www: number = 0; www < multipleAssociatedState.length; www++) {\r\n              associatedStateInfo = multipleAssociatedState[www].trim();\r\n              // let stateIndex: number = StateConst.STATE_INDEX;\r\n\r\n              let stateValue: string = StateConst.STATE_VALUE;\r\n\r\n              let strArray: string[] = associatedStateInfo.split('=');\r\n              if (strArray.length === 1) {\r\n              }\r\n              else if (strArray.length === 2) {\r\n                stateValue = strArray[1].trim();\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \" = \", \"\"));\r\n                return false;\r\n              }\r\n\r\n              // 1. \r\n              // 2. .\r\n              // 3. *.\r\n              // 4. .*.\r\n\r\n              let aFsmID: string = strArray[0].trim();\r\n              if (aFsmID.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n                let stateArray: string[] = aFsmID.split(StateConst.STATE_SEPARATOR);\r\n                for (let q: number = 0; q < stateArray.length; q++) {\r\n                  stateArray[q] = stateArray[q].trim();\r\n                }\r\n                // .*.\r\n                if (stateArray.length === 3) {\r\n                  if (objects.isCreated(stateArray[0])) {\r\n                    let aObject: VeryEngineObject = objects.getVeryObject(stateArray[0]);\r\n                    if (stateArray[1].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n                      let varID: string = stateArray[1].substring(1);\r\n                      if (aObject.isCreatedTemplate(varID)) {\r\n                        let template: VE_Template = aObject.getTemplate(varID);\r\n                        if (template.dataSource.isCreatedFsm(stateArray[2])) {\r\n                          associatedState.addTemplate(template, stateArray[2], stateValue, associatedPos);\r\n                          // VE_AssociatedState associatedState = new VE_AssociatedState(state, template, stateArray[2], stateIndex);\r\n                          // state.AddAssociatedState(associatedState);\r\n                        }\r\n                        else {\r\n                          VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".*.\", \"\"));\r\n                          return false;\r\n                        }\r\n                      }\r\n                      else {\r\n                        VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".*.\", \"\"));\r\n                        return false;\r\n                      }\r\n                    }\r\n                    else {\r\n                      VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".*.\", \"\"));\r\n                      return false;\r\n                    }\r\n                  }\r\n                  else {\r\n                    VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".*.\", \"\"));\r\n                    return false;\r\n                  }\r\n                }\r\n                else if (stateArray.length === 2) {\r\n                  let aObjectID: string = stateArray[0].trim();\r\n                  aFsmID = stateArray[1].trim();\r\n                  // *.\r\n                  if (aObjectID.startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n                    aObjectID = aObjectID.substring(1);\r\n                    if (veryObject.isCreatedTemplate(aObjectID)) {\r\n                      let template: VE_Template = veryObject.getTemplate(aObjectID);\r\n                      if (template.dataSource.isCreatedFsm(stateArray[1])) {\r\n                        associatedState.addTemplate(template, stateArray[1], stateValue, associatedPos);\r\n                        // VE_AssociatedState associatedState = new VE_AssociatedState(state, template, stateArray[1], stateIndex);\r\n                        // state.AddAssociatedState(associatedState);\r\n                      }\r\n                      else {\r\n                        VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"*.\", \"\"));\r\n                        return false;\r\n                      }\r\n                    }\r\n                    else {\r\n                      if (globalVars.isCreatedTemplate(aObjectID)) {\r\n                        let template: VE_Template = globalVars.getTemplate(aObjectID);\r\n                        if (template.dataSource.isCreatedFsm(stateArray[1])) {\r\n                          associatedState.addTemplate(template, stateArray[1], stateValue, associatedPos);\r\n                          // VE_AssociatedState associatedState = new VE_AssociatedState(state, template, stateArray[1], stateIndex);\r\n                          // state.AddAssociatedState(associatedState);\r\n                        }\r\n                        else {\r\n                          VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"*.\", \"\"));\r\n                          return false;\r\n                        }\r\n                      }\r\n                      else {\r\n                        VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"*.\", \"\"));\r\n                        return false;\r\n                      }\r\n                    }\r\n                  }\r\n                  // .\r\n                  else {\r\n                    let aObject: VeryEngineObject = objects.getVeryObject(aObjectID);\r\n                    if (aObject === null) {\r\n                      VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".\", \"\"));\r\n                      return false;\r\n                    }\r\n                    let aFsm: VE_Fsm = aObject.getFsm(aFsmID);\r\n                    if (aFsm === null) {\r\n                      VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".\", \"\"));\r\n                      return false;\r\n                    }\r\n                    let toState: Nullable<VE_State> = aFsm.getState(stateValue);\r\n                    if (toState === null) {\r\n                      VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \".\", \"\"));\r\n                      return false;\r\n                    }\r\n                    associatedState.add(toState, stateValue, associatedPos);\r\n                    // VE_AssociatedState associatedState = new VE_AssociatedState(state, toState);\r\n                    // state.AddAssociatedState(associatedState);\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              //\r\n              else {\r\n                let aFsm: VE_Fsm = veryObject.getFsm(aFsmID);\r\n                if (aFsm === null) {\r\n                  VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"\", \"\"));\r\n                  return false;\r\n                }\r\n                let toState: Nullable<VE_State> = aFsm.getState(stateValue);\r\n                if (toState === null) {\r\n                  VE_ErrorManager.Add(VE_Error.error(associatedPos, \"\" + project_name + \"\" + objectID + \"\" + fsmID + \"\" + associatedStateInfo + \"\", \"\"));\r\n                  return false;\r\n                }\r\n\r\n                associatedState.add(toState, stateValue, associatedPos);\r\n                //VE_AssociatedState associatedState = new VE_AssociatedState(state, toState);\r\n                //state.AddAssociatedState(associatedState);\r\n              }\r\n            }\r\n            state!.addAssociatedState(associatedState);\r\n\r\n          }\r\n\r\n        }\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n  private static stateAssignment(project_name: string, object_id: string, fsm_id: string, global_vars: VE_Variables, objects: VE_Objects, very_object: VeryEngineObject, fsm: VE_Fsm, state_data: VE_StateData, state: VE_State): boolean {\r\n    // \r\n    // \r\n    let assignStr: string = state_data.ValStr;\r\n    // *\r\n    // .*\r\n    // *.*\r\n    // .*.*\r\n    if (assignStr.indexOf(StateConst.VARIABLE_SYMBOL) > -1)  // \r\n    {\r\n      if (assignStr.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n        let valArray: string[] = assignStr.split(StateConst.STATE_SEPARATOR);\r\n        for (let q: number = 0; q < valArray.length; q++) {\r\n          valArray[q] = valArray[q].trim();\r\n        }\r\n        if (valArray.length === 2) {\r\n          if (!valArray[1].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"1*2.*3*.*4.*.*\", \"\"));\r\n            return false;\r\n          }\r\n          else {\r\n            // *.*\r\n            if (valArray[0].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n              let templateVarID: string = valArray[0].substring(1);\r\n              let varID: string = valArray[1].substring(1);\r\n              if (very_object.isCreatedTemplate(templateVarID)) {\r\n                let template: VE_Template = very_object.getTemplate(templateVarID);\r\n                if (template.varData.isCreatedVariable(varID) || template.dataSource.isCreatedFsm(varID)) {\r\n                  state.setTemplateInfo(template, varID, assignStr);\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"*.***\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                if (global_vars.isCreatedTemplate(templateVarID)) {\r\n                  let template: VE_Template = global_vars.getTemplate(templateVarID);\r\n                  if (template.varData.isCreatedVariable(varID) || template.dataSource.isCreatedFsm(varID)) {\r\n                    state.setTemplateInfo(template, varID, assignStr);\r\n                  }\r\n                  else {\r\n                    VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"*.***\", \"\"));\r\n                    return false;\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"*.**\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n            }\r\n            // .*\r\n            else {\r\n              if (valArray[0] === object_id && valArray[1].substring(1) === fsm_id) {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \".*\", \"\"));\r\n                return false;\r\n              }\r\n              let errorInfo: ErrorInfo = new ErrorInfo();\r\n\r\n              let veryVar: Nullable<IVeryVar> = VeryVarManager.getVariable(valArray[1].substring(1), project_name, valArray[0], errorInfo);\r\n              if (!errorInfo.isRight || veryVar === null) {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \".**\" + valArray[1] + \"\" + errorInfo.message, \"\"));\r\n                return false;\r\n              }\r\n              else {\r\n                // \r\n                if (VE_AssignmentTypeJudge.allow(fsm.fsmVar, veryVar)) {\r\n                  state.setStateVariable(veryVar);\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \".*\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        else if (valArray.length === 3) {\r\n          // .*.*\r\n          if (valArray[0].startsWith(StateConst.STATE_SEPARATOR) || !valArray[1].startsWith(StateConst.STATE_SEPARATOR) || !valArray[2].startsWith(StateConst.STATE_SEPARATOR)) {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"1*2.*3*.*4.*.*\", \"\"));\r\n            return false;\r\n          }\r\n          else {\r\n            let templateVarID: string = valArray[1].substring(1);\r\n            let varID: string = valArray[2].substring(1);\r\n            if (objects.isCreated(valArray[0])) {\r\n              let tObject: VeryEngineObject = objects.getVeryObject(valArray[0]);\r\n              if (tObject.isCreatedTemplate(templateVarID)) {\r\n                let template: VE_Template = tObject.getTemplate(templateVarID);\r\n                if (template.varData.isCreatedVariable(varID) || template.dataSource.isCreatedFsm(varID)) {\r\n                  state.setTemplateInfo(template, varID, assignStr);\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \".*.*.**\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \".*.**\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n            else {\r\n              VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \".*.*\", \"\"));\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"1*2.*3*.*4.*.*\", \"\"));\r\n          return false;\r\n        }\r\n      }\r\n      else {\r\n        // *\r\n        let varID: string = assignStr.substring(1);\r\n        if (varID == fsm_id) {\r\n          VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"*\", \"\"));\r\n          return false;\r\n        }\r\n        let errorInfo: ErrorInfo = new ErrorInfo();\r\n        let stateVar: Nullable<IVeryVar> = VeryVarManager.getVariable(varID, project_name, object_id, errorInfo);\r\n        if (stateVar === null) {\r\n          VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"\" + errorInfo.message, \"\"));\r\n          return false;\r\n        }\r\n        else {\r\n          //\r\n          if (VE_AssignmentTypeJudge.allow(fsm.fsmVar, stateVar)) {\r\n            state.setStateVariable(stateVar);\r\n          }\r\n          else {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"*\", \"\"));\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    //\r\n    else {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let val: any = fsm.fsmVar.initValue(assignStr, errorInfo);\r\n      if (!errorInfo.isRight) {\r\n        VE_ErrorManager.Add(VE_Error.error(\"\" + state_data.rowIndex + \"F\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + state_data.ValStr + \"\", \"\"));\r\n        return false;\r\n      }\r\n      state.setConstValue(val);\r\n    }\r\n    return true;\r\n  }\r\n  **/\r\n\r\n  private static assignmentAction(project_name: string, object_id: string, fsm_id: string, global_vars: VE_Variables, objects: VE_Objects, very_object: VeryEngineObject, action_data: VE_StateActionData, state: VE_State): boolean {\r\n    // \r\n    let assignment: VE_Assignment = new VE_Assignment(state, action_data.totalString);\r\n    let varID: string = action_data.varID;\r\n    // Debug.LogWarning(\"\" + action_data.TotalString);\r\n    // 1 1*2.*3*.*4.*.*\r\n    if (varID.indexOf(StateConst.VARIABLE_SYMBOL) > -1)  // \r\n    {\r\n      if (varID.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n        let valArray: string[] = varID.split(StateConst.STATE_SEPARATOR);\r\n        for (let q: number = 0; q < valArray.length; q++) {\r\n          valArray[q] = valArray[q].trim();\r\n        }\r\n        // .* or *.*\r\n        if (valArray.length === 2) {\r\n          // *.*\r\n          if (valArray[0].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n            let templateVarID: string = valArray[0].substring(1);\r\n            varID = valArray[1].substring(1);\r\n            if (very_object.isCreatedTemplate(templateVarID)) {\r\n              let template: VE_Template = very_object.getTemplate(templateVarID);\r\n              if (template.varData.isCreatedVariable(varID)) {\r\n                let varPara: string[] = template.varData.getVariableParas(varID);\r\n                if (varPara[1].toLowerCase() === \"expression\" || varPara[1].toLowerCase() === \"\") {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.*\", \"\"));\r\n                  return false;\r\n                }\r\n                else {\r\n                  assignment.setLeftTemplateVar(template, varID);\r\n                }\r\n              }\r\n              else if (template.dataSource.isCreatedFsm(varID)) {\r\n                assignment.setLeftTemplateVar(template, varID);\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.***\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n            else {\r\n              if (global_vars.isCreatedTemplate(templateVarID)) {\r\n                let template: VE_Template = global_vars.getTemplate(templateVarID);\r\n                if (template.varData.isCreatedVariable(varID)) {\r\n                  let varPara: string[] = template.varData.getVariableParas(varID);\r\n                  if (varPara[1].toLowerCase() === \"expression\" || varPara[1].toLowerCase() === \"\") {\r\n                    VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.*\", \"\"));\r\n                    return false;\r\n                  }\r\n                  else {\r\n                    assignment.setLeftTemplateVar(template, varID);\r\n                  }\r\n                }\r\n                else if (template.dataSource.isCreatedFsm(varID)) {\r\n                  assignment.setLeftTemplateVar(template, varID);\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.***\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.**\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          //.*\r\n          else {\r\n            if (objects.isCreated(valArray[0])) {\r\n              let aObject: VeryEngineObject = objects.getVeryObject(valArray[0]);\r\n              varID = varID.substring(1);\r\n              if (aObject.isCreatedExpression(varID)) {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*\", \"\"));\r\n                return false;\r\n              }\r\n              else if (aObject.isCreatedFsm(varID)) {\r\n                let v: IVeryVar = aObject.getFsm(varID).fsmVar;\r\n                assignment.setLeftVariable(v);\r\n              }\r\n              else if (aObject.isCreatedVariable(varID)) {\r\n                let v: IVeryVar = aObject.getVariable(varID);\r\n                assignment.setLeftVariable(v);\r\n              }\r\n              else if (aObject.isCreatedTemplate(varID)) {\r\n                let template: VE_Template = aObject.getTemplate(varID);\r\n                assignment.setLeftTemplate(template);\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n            else {\r\n              VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*\", \"\"));\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        else if (valArray.length === 3)  // .*.*\r\n        {\r\n          // .*.*\r\n          if (valArray[0].startsWith(StateConst.STATE_SEPARATOR) || !valArray[1].startsWith(StateConst.STATE_SEPARATOR) || !valArray[2].startsWith(StateConst.STATE_SEPARATOR)) {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"1*2.*3*.*4.*.*\", \"\"));\r\n            return false;\r\n          }\r\n          else {\r\n            let templateVarID: string = valArray[1].substring(1);\r\n            varID = valArray[2].substring(1);\r\n            if (objects.isCreated(valArray[0])) {\r\n              let tObject: VeryEngineObject = objects.getVeryObject(valArray[0]);\r\n              if (tObject.isCreatedTemplate(templateVarID)) {\r\n                let template: VE_Template = tObject.getTemplate(templateVarID);\r\n                if (template.dataSource.isCreatedFsm(varID)) {\r\n                  assignment.setLeftTemplateVar(template, varID);\r\n                }\r\n                else if (template.varData.isCreatedVariable(varID)) {\r\n                  let varParas: string[] = template.varData.getVariableParas(varID);\r\n                  if (varParas[1].toLowerCase() === \"expression\" || varParas[1].toLowerCase() === \"\") {\r\n                    VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.*.*.*\", \"\"));\r\n                    return false;\r\n                  }\r\n                  else {\r\n                    assignment.setLeftTemplateVar(template, varID);\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.*.**\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.**\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n            else {\r\n              VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.*\", \"\"));\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"1*2.*3*.*4.*.*\", \"\"));\r\n          return false;\r\n        }\r\n      }\r\n      else // *\r\n      {\r\n        varID = varID.substring(1);\r\n        if (very_object.isCreatedExpression(varID)) {\r\n          VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*\", \"\"));\r\n          return false;\r\n        }\r\n        else if (very_object.isCreatedFsm(varID)) {\r\n          let v: IVeryVar = very_object.getFsm(varID).fsmVar;\r\n          assignment.setLeftVariable(v);\r\n        }\r\n        else if (very_object.isCreatedVariable(varID)) {\r\n          let v: IVeryVar = very_object.getVariable(varID);\r\n          assignment.setLeftVariable(v);\r\n        }\r\n        else if (very_object.isCreatedTemplate(varID)) {\r\n          let template: VE_Template = very_object.getTemplate(varID);\r\n          assignment.setLeftTemplate(template);\r\n        }\r\n        else {\r\n          // \r\n          if (global_vars.isCreatedExpression(varID)) {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*\", \"\"));\r\n            return false;\r\n          }\r\n          else if (global_vars.isCreatedVariable(varID)) {\r\n            let v: IVeryVar = global_vars.getVariable(varID);\r\n            assignment.setLeftVariable(v);\r\n          }\r\n          else if (global_vars.isCreatedTemplate(varID)) {\r\n            let template: VE_Template = global_vars.getTemplate(varID);\r\n            assignment.setLeftTemplate(template);\r\n          }\r\n          else {\r\n            // \r\n            // if (VerySceneVariables.Variables.isCreatedExpression(varID)) {\r\n            //   VE_ErrorManager.Add(VE_Error.Error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.TotalString + \"*\", \"\"));\r\n            //   return false;\r\n            // }\r\n            // else if (VerySceneVariables.Variables.IsCreatedVariable(varID)) {\r\n            //   IVeryVar v = VerySceneVariables.Variables.GetVariable(varID);\r\n            //   assignment.SetLeft(v);\r\n            // }\r\n            // else {\r\n            //   VE_ErrorManager.Add(VE_Error.Error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.TotalString + \"*\", \"\"));\r\n            //   return false;\r\n            // }\r\n            VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*\", \"\"));\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n      return false;\r\n    }\r\n\r\n\r\n    // 2 1*2.*3*.*4.*.*5\r\n    varID = action_data.varValue.trim();\r\n\r\n    // \r\n    if (varID.startsWith(\"\\\"\") || varID.startsWith(\"'\") || varID.startsWith(\"\") || varID.startsWith(\"\")) {\r\n      assignment.setRightConst(varID.substring(1, varID.length - 2).trim());\r\n    }\r\n    else if (VE_StringFormat.isFormulaString(varID))  // \r\n    {\r\n      // Debug.LogError(varID);\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      StateConst.AssignmentFormulaCount++;\r\n      let localExp: IExpression = VE_Expressions.createLocalExpression(StateConst.AssignmentPrefix + StateConst.AssignmentFormulaCount.toString(), varID, project_name, object_id, errorInfo);\r\n      if (!errorInfo.isRight || localExp === null) {\r\n        // errorInfo = \"\\n\" + errorInfo + \"\" + errorPos;\r\n        // return null;\r\n        VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\" + errorInfo.message, \"\"));\r\n        return false;\r\n      }\r\n      assignment.setRightVariable(new VeryExpression(localExp));\r\n    }\r\n    else {\r\n      if (varID.indexOf(StateConst.VARIABLE_SYMBOL) > -1)  // \r\n      {\r\n        if (varID.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n          let valArray: string[] = varID.split(StateConst.STATE_SEPARATOR);\r\n          for (let q: number = 0; q < valArray.length; q++) {\r\n            valArray[q] = valArray[q].trim();\r\n          }\r\n          // .* or *.*\r\n          if (valArray.length === 2) {\r\n            // *.*\r\n            if (valArray[0].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n              let templateVarID: string = valArray[0].substring(1);\r\n              varID = valArray[1].substring(1);\r\n              if (very_object.isCreatedTemplate(templateVarID)) {\r\n                let template: VE_Template = very_object.getTemplate(templateVarID);\r\n                if (template.varData.isCreatedVariable(varID) || template.dataSource.isCreatedFsm(varID)) {\r\n                  // \r\n                  assignment.setRightTemplateVariable(template, varID);\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.***\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                if (global_vars.isCreatedTemplate(templateVarID)) {\r\n                  let template: VE_Template = global_vars.getTemplate(templateVarID);\r\n                  if (template.varData.isCreatedVariable(varID) || template.dataSource.isCreatedFsm(varID)) {\r\n                    // \r\n                    assignment.setRightTemplateVariable(template, varID);\r\n                  }\r\n                  else {\r\n                    VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.***\", \"\"));\r\n                    return false;\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*.**\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n            }\r\n            // .*\r\n            else {\r\n              if (objects.isCreated(valArray[0])) {\r\n                let aObject: VeryEngineObject = objects.getVeryObject(valArray[0]);\r\n                varID = varID.substring(1);\r\n                let rightVar: Nullable<IVeryVar> = null;\r\n                let rightTemplate: Nullable<VE_Template> = null;\r\n                if (aObject.isCreatedExpression(varID)) {\r\n                  rightVar = new VeryExpression(aObject.getExpression(varID));\r\n                }\r\n                else if (aObject.isCreatedFsm(varID)) {\r\n                  rightVar = aObject.getFsm(varID).fsmVar;\r\n                }\r\n                else if (aObject.isCreatedVariable(varID)) {\r\n                  rightVar = aObject.getVariable(varID);\r\n                }\r\n                else if (aObject.isCreatedTemplate(varID)) {\r\n                  rightTemplate = aObject.getTemplate(varID);\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*\", \"\"));\r\n                  return false;\r\n                }\r\n                // \r\n                if (rightVar !== null) {\r\n                  if (assignment.leftType === AssignType.Template) {\r\n                    VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n                    return false;\r\n                  }\r\n                  else if (assignment.leftType === AssignType.Variable) {\r\n                    if (VE_AssignmentTypeJudge.allow(assignment.leftVariable!, rightVar)) {\r\n                      assignment.setRightVariable(rightVar);\r\n                    }\r\n                    else {\r\n                      VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n                      return false;\r\n                    }\r\n                  }\r\n                  else {\r\n                    // \r\n                    assignment.setRightVariable(rightVar);\r\n                  }\r\n                }\r\n                else if (rightTemplate != null) {\r\n                  if (assignment.leftType === AssignType.Template) {\r\n                    assignment.setRightTemplate(rightTemplate);\r\n                  }\r\n                  else {\r\n                    VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n                    return false;\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          else if (valArray.length === 3)  // .*.*\r\n          {\r\n            // .*.*\r\n            if (valArray[0].startsWith(StateConst.STATE_SEPARATOR) || !valArray[1].startsWith(StateConst.STATE_SEPARATOR) || !valArray[2].startsWith(StateConst.STATE_SEPARATOR)) {\r\n              VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"1*2.*3*.*4.*.*\", \"\"));\r\n              return false;\r\n            }\r\n            else {\r\n              let templateVarID: string = valArray[1].substring(1);\r\n              varID = valArray[2].substring(1);\r\n              if (objects.isCreated(valArray[0])) {\r\n                let tObject: VeryEngineObject = objects.getVeryObject(valArray[0]);\r\n                if (tObject.isCreatedTemplate(templateVarID)) {\r\n                  let template: VE_Template = tObject.getTemplate(templateVarID);\r\n                  // \r\n                  if (template.dataSource.isCreatedFsm(varID) || template.varData.isCreatedVariable(varID)) {\r\n                    // \r\n                    assignment.setRightTemplateVariable(template, varID);\r\n                  }\r\n                  else {\r\n                    VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.*.**\", \"\"));\r\n                    return false;\r\n                  }\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.**\", \"\"));\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \".*.*\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          else {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"1*2.*3*.*4.*.*\", \"\"));\r\n            return false;\r\n          }\r\n        }\r\n        else // *\r\n        {\r\n          varID = varID.substring(1);\r\n          let rightVar: Nullable<IVeryVar> = null;\r\n          let rightTemplate: Nullable<VE_Template> = null;\r\n          if (very_object.isCreatedExpression(varID)) {\r\n            rightVar = new VeryExpression(very_object.getExpression(varID));\r\n          }\r\n          else if (very_object.isCreatedFsm(varID)) {\r\n            rightVar = very_object.getFsm(varID).fsmVar;\r\n          }\r\n          else if (very_object.isCreatedVariable(varID)) {\r\n            rightVar = very_object.getVariable(varID);\r\n          }\r\n          else if (very_object.isCreatedTemplate(varID)) {\r\n            rightTemplate = very_object.getTemplate(varID);\r\n          }\r\n          else {\r\n            // \r\n            if (global_vars.isCreatedExpression(varID)) {\r\n              rightVar = new VeryExpression(global_vars.getExpression(varID));\r\n            }\r\n            else if (global_vars.isCreatedVariable(varID)) {\r\n              rightVar = global_vars.getVariable(varID);\r\n            }\r\n            else if (global_vars.isCreatedTemplate(varID)) {\r\n              rightTemplate = global_vars.getTemplate(varID);\r\n            }\r\n            else {\r\n              //\r\n              if (VerySceneVariables.Variables.isCreatedExpression(varID)) {\r\n                rightVar = new VeryExpression(VerySceneVariables.Variables.getExpression(varID));\r\n              }\r\n              else if (VerySceneVariables.Variables.isCreatedVariable(varID)) {\r\n                rightVar = VerySceneVariables.Variables.getVariable(varID);\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"*\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          // \r\n          if (rightVar != null) {\r\n            if (assignment.leftType === AssignType.Template) {\r\n              VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n              return false;\r\n            }\r\n            else if (assignment.leftType === AssignType.Variable) {\r\n              if (VE_AssignmentTypeJudge.allow(assignment.leftVariable!, rightVar)) {\r\n                assignment.setRightVariable(rightVar);\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n                return false;\r\n              }\r\n            }\r\n            else {\r\n              // \r\n              assignment.setRightVariable(rightVar);\r\n            }\r\n          }\r\n          else if (rightTemplate != null) {\r\n            if (assignment.leftType === AssignType.Template) {\r\n              assignment.setRightTemplate(rightTemplate);\r\n            }\r\n            else {\r\n              VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n              return false;\r\n            }\r\n          }\r\n          else {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n      else  // \r\n      {\r\n        if (assignment.leftType === AssignType.Template) {\r\n          if (varID.trim().toLowerCase() === \"null\") {\r\n            assignment.setRightNull();\r\n          }\r\n          else {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"null\", \"\"));\r\n            return false;\r\n          }\r\n        }\r\n        else if (assignment.leftType === AssignType.TemplateVariable) {\r\n          assignment.setRightConst(varID);\r\n        }\r\n        else {\r\n          if (assignment.leftVariable !== null) {\r\n            let errorInfo: ErrorInfo = new ErrorInfo();\r\n            let newValue: any = assignment.leftVariable.initValue(varID, errorInfo);\r\n            if (!errorInfo.isRight || newValue === null) {\r\n              VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\" + errorInfo.message + \"\", \"\"));\r\n              return false;\r\n            }\r\n            else {\r\n              assignment.setRightConstValue(newValue);\r\n            }\r\n          }\r\n          else {\r\n            VE_ErrorManager.Add(VE_Error.error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.totalString + \"\", \"\"));\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    let stateAction: VE_StateAction = new VE_StateAction();\r\n    stateAction.setAssignment(assignment);\r\n    state.addAction(stateAction);\r\n    return true;\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n  public static createInstance(project_name: string, object_id: string, var_id: string, template: VE_Template, object_name: string, error_info: ErrorInfo, destroy_on_create_new: boolean): VE_Template {\r\n\r\n\r\n    return template;\r\n  }\r\n\r\n\r\n}","export * from './loaderManager';\r\nexport * from './createInstance';","import { VeryTable } from '../index';\r\nimport { VE_Template, VE_Templates } from '../template';\r\nimport { VeryEngineObject, VE_Objects } from '../object';\r\nimport { VE_FsmData, VE_StateData, VE_StateTriggerData, VE_StateActionData } from '../dataSource';\r\nimport { VE_Manager } from '../manager';\r\nimport { VE_Variables, VeryVarManager } from '../variables';\r\nimport { VE_StringFormat } from '../utility';\r\nimport { VE_ErrorManager, VE_Error } from '../global';\r\nimport { StateConst } from '../state';\r\nimport { CreateInstance } from './createInstance';\r\nimport { GameObject } from '../babylon';\r\n\r\n\r\nexport enum AnalisysType { Global, Object, Template }\r\n\r\nexport class LoaderManager {\r\n\r\n  private _currentType: AnalisysType = AnalisysType.Global;\r\n\r\n  private _table!: VeryTable;\r\n\r\n  private _projectName: string = '';\r\n\r\n  private _lastFsmID: string = '';\r\n  private _lastObjectID: string = '';\r\n  private _activeTemplate: Nullable<VE_Template> = null;\r\n  private _activeObject: Nullable<VeryEngineObject> = null;\r\n  private _activeFsmData: Nullable<VE_FsmData> = null;\r\n  private _activeStateData: Nullable<VE_StateData> = null;\r\n  private _emptyLine: boolean = false;\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public load(project_name: string, table: VeryTable): boolean {\r\n    this._projectName = project_name;\r\n    this._table = table;\r\n\r\n    // \r\n    VE_Manager.createProject(project_name);\r\n\r\n    let templates: VE_Templates = VE_Manager.templates(project_name);\r\n    let objects: VE_Objects = VE_Manager.objects(project_name);\r\n    let globalVars: VE_Variables = VE_Manager.variables(project_name);\r\n\r\n    // console.log(table);\r\n    if (table) {\r\n      for (let i: number = 1; i < table.RowCount; i++) {\r\n        // console.log(`${i+1}${table.getData(i, 0)}`);\r\n        // \r\n        if (table.getData(i, 0).startsWith('//')) {\r\n          continue;\r\n        }\r\n        // \r\n        if (table.getRow(i)!.isEmpty()) {\r\n          // console.log('' + (i + 1));\r\n          // TODO\r\n          this._emptyLine = true;\r\n          continue;\r\n        }\r\n        // 1\r\n        if (table.getData(i, 0).startsWith(\"_\")) {\r\n          this._activeFsmData = null;\r\n          this._activeStateData = null;\r\n          this._currentType = AnalisysType.Template;\r\n          let templateID = table.getData(i, 0).replace(/ /g, '').substring(3);\r\n          // TODO: \r\n          if (templateID.indexOf(':') > -1 || templateID.indexOf('') > -1) {\r\n\r\n          } else {\r\n            if (!VE_StringFormat.isIDLegal(templateID)) {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 0), \"\" + table.getData(i, 0) + \"\", table.ID))\r\n              return false;\r\n            }\r\n            if (!templates.isCreatedTemplate(templateID)) {\r\n              this._lastObjectID = templateID;\r\n              this._emptyLine = true;\r\n              let template: VE_Template = new VE_Template(project_name, templateID);\r\n              templates.addTemplate(templateID, template);\r\n              this._activeTemplate = template;\r\n            } else {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 0), \"\" + table.getData(i, 0) + \"\", table.ID))\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        // 2\r\n        else if (table.getData(i, 0) !== '') {\r\n          this._activeFsmData = null;\r\n          this._activeStateData = null;\r\n          this._currentType = AnalisysType.Object;\r\n          let objectID: string = table.getData(i, 0);\r\n          let objName: string = '';\r\n          if (objectID.indexOf('=') > -1) {\r\n            let nameArray: string[] = objectID.split('=');\r\n            if (nameArray.length === 2) {\r\n              objectID = nameArray[0].trim();\r\n              objName = nameArray[1].trim();\r\n            } else {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 0), \"\" + table.getData(i, 0) + \"=\", table.ID))\r\n              return false;\r\n            }\r\n          }\r\n\r\n          if (!VE_StringFormat.isIDLegal(objectID)) {\r\n            VE_ErrorManager.Add(VE_Error.error(table.pos(i, 0), \"\" + table.getData(i, 0) + \"\", table.ID))\r\n            return false;\r\n          }\r\n          // GameObject\r\n          let activeGameObject: Nullable<GameObject> = null;\r\n          if (objName === '') {\r\n            activeGameObject = new GameObject(`__${objectID}_Empty`);\r\n          } else {\r\n            activeGameObject = GameObject.Find(objName);\r\n            if (activeGameObject === null) {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 0), \"\" + objName + \"\", table.ID))\r\n              return false;\r\n            }\r\n          }\r\n          this._lastObjectID = objectID;\r\n          this._emptyLine = true;\r\n          if (!objects.isCreated(objectID)) {\r\n            // \r\n            let tempObject: VeryEngineObject = new VeryEngineObject(project_name, objectID, activeGameObject);\r\n            objects.add(objectID, tempObject);\r\n            this._activeObject = tempObject;\r\n          } else {\r\n            VE_ErrorManager.Add(VE_Error.error(table.pos(i, 0), \"\" + table.getData(i, 0) + \"\", table.ID))\r\n            return false;\r\n          }\r\n        }\r\n        // 3\r\n        else if (table.getData(i, 5) !== \"\" && table.getData(i, 1) === \"\" && table.getData(i, 2) === \"\" && table.getData(i, 3) === \"\" && table.getData(i, 4) === \"\" && table.getData(i, 6) === \"\" && table.getData(i, 7) === \"\" && table.getData(i, 8) === \"\") {\r\n          let paraData: string = table.getData(i, 5);\r\n          // \r\n          if (this._currentType === AnalisysType.Global) {\r\n            this._emptyLine = true;\r\n            // \r\n            let varArray: string[] = VE_StringFormat.paraSegment(paraData);\r\n            if (varArray.length === 2 || varArray.length === 3) {\r\n              let varID: string = varArray[0].trim();\r\n              if (!VE_StringFormat.isIDLegal(varID)) {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              }\r\n              let paraArray: string[] = [varArray[1].trim()];\r\n              if (varArray.length === 2) {\r\n                paraArray[1] = '';\r\n              } else {\r\n                paraArray[1] = varArray[2].trim();\r\n              }\r\n              if (!globalVars.varData.isCreatedVariable(varID)) {\r\n                globalVars.varData.addVariable(varID, paraArray, table.pos(i, 5));\r\n              } else {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              }\r\n            } else {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n              return false;\r\n            }\r\n          }\r\n          // \r\n          else if (paraData.indexOf('=') > -1) {\r\n            let paraArray: string[] = paraData.split('=');\r\n            // \r\n            // \r\n            if (paraArray.length === 2 && paraArray[0].trim() === this._lastFsmID) {\r\n              this._emptyLine = false;\r\n              if (this._activeFsmData === null) {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              } else {\r\n                // let stateInfo: string[] = paraArray[1].trim().split(/,|/);\r\n                // let stateIndex: number = StateConst.STATE_INDEX;\r\n                // let stateData: Nullable<VE_StateData> = null;\r\n                // if (stateInfo.length === 2) {\r\n                //   stateInfo[0] = stateInfo[0].trim();\r\n                //   stateInfo[1] = stateInfo[1].trim();\r\n                //   if (stateInfo[1].startsWith('#')) {\r\n                //     stateIndex = parseInt(stateInfo[1].substring(1));\r\n                //     if (stateIndex === NaN) {\r\n                //       VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"IDIDID=#ID\", table.ID))\r\n                //       return false;\r\n                //     }\r\n                //   } else {\r\n                //     VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"IDIDID=#ID\", table.ID))\r\n                //     return false;\r\n                //   }\r\n                // }\r\n                let stateData: VE_StateData = new VE_StateData(this._activeFsmData, paraArray[1].trim(), false);\r\n                stateData.rowIndex = i;\r\n                this._activeFsmData.addState(stateData);\r\n                this._activeStateData = stateData;\r\n              }\r\n            }\r\n            // \r\n            else {\r\n              this._emptyLine = true;\r\n              let varArray: string[] = VE_StringFormat.paraSegment(paraData);\r\n              if (varArray.length === 3) {\r\n                let varID: string = varArray[0].trim();\r\n                if (!VE_StringFormat.isIDLegal(varID)) {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                let para2Array: string[] = [varArray[1].trim(), varArray[2].trim()];\r\n                // \r\n                if (this._currentType === AnalisysType.Object) {\r\n                  if (this._activeObject!.varData.isCreatedVariable(varID)) {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeObject!.objectID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  // \r\n                  if (this._activeObject!.dataSource.isCreatedFsm(varID)) {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeObject!.objectID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  this._activeObject!.varData.addVariable(varID, para2Array, table.pos(i, 5));\r\n                }\r\n                else if (this._currentType === AnalisysType.Template) {\r\n                  if (this._activeTemplate!.varData.isCreatedVariable(varID)) {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeTemplate!.templateID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  // \r\n                  if (this._activeTemplate!.dataSource.isCreatedFsm(varID)) {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  this._activeTemplate!.varData.addVariable(varID, para2Array, table.pos(i, 5));\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n              } else {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          // \r\n          else {\r\n            this._emptyLine = true;\r\n            let varArray: string[] = VE_StringFormat.paraSegment(paraData);\r\n            if (varArray.length === 2 || varArray.length === 3) {\r\n              let varID: string = varArray[0].trim();\r\n              if (!VE_StringFormat.isIDLegal(varID)) {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              }\r\n              let paraArray: string[] = [varArray[1].trim()];\r\n              if (varArray.length === 2) {\r\n                paraArray[1] = '';\r\n              } else {\r\n                paraArray[1] = varArray[2].trim();\r\n              }\r\n              // \r\n              if (this._currentType === AnalisysType.Object) {\r\n                if (this._activeObject!.varData.isCreatedVariable(varID)) {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeObject!.objectID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                // \r\n                if (this._activeObject!.dataSource.isCreatedFsm(varID)) {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeObject!.objectID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                this._activeObject!.varData.addVariable(varID, paraArray, table.pos(i, 5));\r\n              }\r\n              else if (this._currentType === AnalisysType.Template) {\r\n                if (this._activeTemplate!.varData.isCreatedVariable(varID)) {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeTemplate!.templateID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                // \r\n                if (this._activeTemplate!.dataSource.isCreatedFsm(varID)) {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._activeTemplate!.templateID + \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                this._activeTemplate!.varData.addVariable(varID, paraArray, table.pos(i, 5));\r\n              }\r\n              else {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                return false;\r\n              }\r\n            } else {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        // 4 +  +  +  + \r\n        else {\r\n          // \r\n          let hasState: boolean = false;\r\n          let paraData: string = table.getData(i, 5);\r\n          if (paraData !== '') {\r\n            hasState = true;\r\n            this._emptyLine = false;\r\n          }\r\n          // \r\n          else {\r\n            if (this._emptyLine) {\r\n              this._emptyLine = false;\r\n              hasState = true;\r\n              paraData = (this._lastObjectID + '__' + StateConst.StateCount++) + ',' + StateConst.STATE_VALUE;\r\n            }\r\n          }\r\n\r\n          // string\r\n          if (hasState) {\r\n            // \r\n            if (paraData.indexOf('=') > -1) {\r\n              let stateArray: string[] = paraData.split('=');\r\n              let fsmID: string = stateArray[0].trim();\r\n              // \r\n              if (stateArray.length === 2 && fsmID === this._lastFsmID) {\r\n                if (this._activeFsmData === null) {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                } else {\r\n                  // let stateIndex: number = StateConst.STATE_INDEX;\r\n                  let stateData: VE_StateData = new VE_StateData(this._activeFsmData, stateArray[1].trim(), false);\r\n                  stateData.rowIndex = i;\r\n                  this._activeFsmData.addState(stateData);\r\n                  this._activeStateData = stateData;\r\n                }\r\n              } else {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\" + fsmID + \"\", table.ID))\r\n                return false;\r\n              }\r\n            }\r\n            // \r\n            else {\r\n              let varArray: string[] = VE_StringFormat.paraSegment(paraData);\r\n              if (varArray.length === 2) {\r\n                let fsmID: string = varArray[0].trim();\r\n                if (!VE_StringFormat.isIDLegal(fsmID)) {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n                varArray[1] = varArray[1].trim();\r\n                this._lastFsmID = fsmID;\r\n                // let stateIndex: number = StateConst.STATE_INDEX;\r\n                // \r\n                if (this._currentType === AnalisysType.Object) {\r\n                  if (this._activeObject!.varData.isCreatedVariable(fsmID)) {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._lastObjectID + \"\" + fsmID + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  // \r\n                  if (this._activeObject!.dataSource.isCreatedFsm(fsmID)) {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._lastObjectID + \"\" + fsmID + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  // \r\n                  this._activeObject!.dataSource.createFsm(fsmID, table.pos(i, 5));\r\n                  this._activeFsmData = this._activeObject!.dataSource.getFsmData(fsmID);\r\n                  // \r\n                  this._activeFsmData.initFsm('string', varArray[1]);\r\n                  // \r\n                  let stateData: VE_StateData = new VE_StateData(this._activeFsmData, varArray[1], true);\r\n                  stateData.rowIndex = i;\r\n                  this._activeFsmData.addState(stateData);\r\n                  this._activeStateData = stateData;\r\n                }\r\n                else if (this._currentType === AnalisysType.Template) {\r\n                  if (this._activeTemplate!.varData.isCreatedVariable(fsmID)) {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._lastObjectID + \"\" + fsmID + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  // \r\n                  if (this._activeTemplate!.dataSource.isCreatedFsm(fsmID)) {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + this._lastObjectID + \"\" + fsmID + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  // \r\n                  this._activeTemplate!.dataSource.createFsm(fsmID, table.pos(i, 5));\r\n                  this._activeFsmData = this._activeTemplate!.dataSource.getFsmData(fsmID);\r\n                  // \r\n                  this._activeFsmData.initFsm('string', varArray[1]);\r\n                  // \r\n                  let stateData: VE_StateData = new VE_StateData(this._activeFsmData, varArray[1], true);\r\n                  stateData.rowIndex = i;\r\n                  this._activeFsmData.addState(stateData);\r\n                  this._activeStateData = stateData;\r\n                }\r\n                else {\r\n                  VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID))\r\n                  return false;\r\n                }\r\n              } else {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 5), \"\" + table.getData(i, 5) + \"\", table.ID));\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n\r\n          // \r\n          if (table.getData(i, 2) !== '' || table.getData(i, 3) !== '') {\r\n            if (this._activeFsmData === null || this._activeStateData === null) {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 2), \"\" + table.getData(i, 2) + \"\", table.ID));\r\n              return false;\r\n            }\r\n            // DataSource\r\n            let triggerID: string = table.getData(i, 2);\r\n            if (table.getData(i, 2) === '') {\r\n              triggerID = this._lastObjectID + '_' + this._lastFsmID + '__' + StateConst.TriggerCount++;\r\n            }\r\n            let idTemp: string = triggerID.replace(/./g, '');\r\n            if (!VE_StringFormat.isIDLegal(idTemp)) {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 2), \"\" + table.getData(i, 2) + \"\", table.ID))\r\n              return false;\r\n            }\r\n\r\n            if (table.getData(i, 3) !== '') {\r\n              if (!this._activeFsmData!.dataSource.isCreatedTrigger(triggerID)) {\r\n                this._activeFsmData!.dataSource.addTrigger(triggerID, VE_StringFormat.paraSegment(table.getData(i, 3)), table.pos(i, 2));\r\n              } else {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 2), \"\" + table.getData(i, 2) + \"\", table.ID))\r\n                return false;\r\n              }\r\n            }\r\n\r\n            // StateData\r\n            let triggerData: VE_StateTriggerData = new VE_StateTriggerData(triggerID);\r\n            this._activeStateData.addTrigger(triggerData, table.pos(i, 2));\r\n\r\n            // \r\n            if (table.getData(i, 1) !== '') {\r\n              triggerData.logicalSwitch = table.getData(i, 1);\r\n            }\r\n\r\n            // \r\n            if (table.getData(i, 4) !== '') {\r\n              triggerData.logicalExp = table.getData(i, 4);\r\n            }\r\n          } else {\r\n            // \r\n            if (table.getData(i, 1) !== '') {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 1), \"\" + table.getData(i, 1) + \"\", table.ID))\r\n              return false;\r\n            }\r\n\r\n            //  --- \r\n            if (table.getData(i, 4) !== '') {\r\n              if (this._activeFsmData === null || this._activeStateData === null) {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 4), \"\" + table.getData(i, 4) + \"\", table.ID))\r\n                return false;\r\n              }\r\n              if (this._activeStateData.logicalExp !== '') {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 4), \"\" + table.getData(i, 4) + \"12\", table.ID))\r\n                return false;\r\n              } else {\r\n                this._activeStateData.logicalExp = table.getData(i, 4);\r\n              }\r\n            }\r\n\r\n            // if (table.getData(i, 3) !== '') {\r\n            //   VE_ErrorManager.Add(VE_Error.warning(table.pos(i, 3), \"\" + table.getData(i, 3) + \"\", table.ID))\r\n            // }\r\n          }\r\n\r\n          // \r\n          if (table.getData(i, 6) !== '' || table.getData(i, 7) !== '') {\r\n            if (this._activeFsmData === null || this._activeStateData === null) {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 6), \"\" + table.getData(i, 6) + \"\", table.ID))\r\n              return false;\r\n            }\r\n\r\n            // 32\r\n            if (table.getData(i, 7) !== '') {\r\n              // log\r\n              let tempStr: string = table.getData(i, 7).toLowerCase();\r\n              if (tempStr.startsWith('log(') || tempStr.startsWith('log') || tempStr.startsWith('') || tempStr.startsWith('(')) {\r\n                let newActionID: string = project_name + '__log__' + StateConst.LogCount++;\r\n                let actionData: VE_StateActionData = new VE_StateActionData(newActionID, 'true', 'false');\r\n                this._activeStateData.addAction(actionData, table.pos(i, 7));\r\n                let actionPara: string = table.getData(i, 7).substring(4);\r\n                if (tempStr.startsWith('')) {\r\n                  actionPara = table.getData(i, 7).substring(3);\r\n                }\r\n                this._activeFsmData.dataSource.addAction(newActionID, ['', '', actionPara.substring(0, actionPara.length - 1)], ['true', 'false'], table.pos(i, 7));\r\n                if (table.getData(i, 6) !== '') {\r\n                  VE_ErrorManager.Add(VE_Error.warning(table.pos(i, 6), \"\" + table.getData(i, 6) + \"\", table.ID))\r\n                }\r\n              }\r\n              else if (tempStr.startsWith('error(') || tempStr.startsWith('error') || tempStr.startsWith('') || tempStr.startsWith('(')) {\r\n                let newActionID: string = project_name + '__log__' + StateConst.LogCount++;\r\n                let actionData: VE_StateActionData = new VE_StateActionData(newActionID, 'true', 'false');\r\n                this._activeStateData.addAction(actionData, table.pos(i, 7));\r\n                let actionPara: string = table.getData(i, 7).substring(6);\r\n                if (tempStr.startsWith('')) {\r\n                  actionPara = table.getData(i, 7).substring(3);\r\n                }\r\n                this._activeFsmData.dataSource.addAction(newActionID, ['', '', actionPara.substring(0, actionPara.length - 1)], ['true', 'false'], table.pos(i, 7));\r\n                if (table.getData(i, 6) !== '') {\r\n                  VE_ErrorManager.Add(VE_Error.warning(table.pos(i, 6), \"\" + table.getData(i, 6) + \"\", table.ID))\r\n                }\r\n              }\r\n              else if (tempStr.startsWith('warn(') || tempStr.startsWith('warn') || tempStr.startsWith('') || tempStr.startsWith('(')) {\r\n                let newActionID: string = project_name + '__log__' + StateConst.LogCount++;\r\n                let actionData: VE_StateActionData = new VE_StateActionData(newActionID, 'true', 'false');\r\n                this._activeStateData.addAction(actionData, table.pos(i, 7));\r\n                let actionPara: string = table.getData(i, 7).substring(5);\r\n                if (tempStr.startsWith('')) {\r\n                  actionPara = table.getData(i, 7).substring(3);\r\n                }\r\n                this._activeFsmData.dataSource.addAction(newActionID, ['', '', actionPara.substring(0, actionPara.length - 1)], ['true', 'false'], table.pos(i, 7));\r\n                if (table.getData(i, 6) !== '') {\r\n                  VE_ErrorManager.Add(VE_Error.warning(table.pos(i, 6), \"\" + table.getData(i, 6) + \"\", table.ID))\r\n                }\r\n              }\r\n              else {\r\n                // ID\r\n                let actionArray: string[] = VE_StringFormat.paraSegment(table.getData(i, 7));\r\n                // TODO  \r\n                // = \r\n                if (actionArray.length === 1 && actionArray[0].indexOf('=') > -1) {\r\n                  if (table.getData(i, 6) !== '') {\r\n                    VE_ErrorManager.Add(VE_Error.warning(table.pos(i, 6), \"\" + table.getData(i, 6) + \"\", table.ID))\r\n                  }\r\n\r\n                  // = \r\n                  let equalIndex: number = table.getData(i, 7).indexOf('=');\r\n                  let actionData: VE_StateActionData = new VE_StateActionData('');\r\n                  actionData.setAssignmentAction(table.getData(i, 7), table.getData(i, 7).substring(0, equalIndex).trim(), table.getData(i, 7).substring(equalIndex + 1).trim());\r\n                  this._activeStateData.addAction(actionData, table.pos(i, 7));\r\n                } else {\r\n\r\n                  let actionNames: string[];\r\n                  if (table.getData(i, 6) !== '') {\r\n                    actionNames = VE_StringFormat.paraSegment(table.getData(i, 6));\r\n                  } else {\r\n                    actionNames = [this._lastObjectID + '_' + this._lastFsmID + '__' + StateConst.ActionCount++, 'true', 'false', 'false'];\r\n                  }\r\n\r\n                  // console.log(actionArray);\r\n                  if (actionNames.length === 2 || actionNames.length === 3 || actionNames.length === 4) {\r\n                    let actionData: VE_StateActionData;\r\n                    if (actionNames.length === 2) {\r\n                      actionData = new VE_StateActionData(actionNames[0], actionNames[1]);\r\n                    } else if (actionNames.length === 3) {\r\n                      actionData = new VE_StateActionData(actionNames[0], actionNames[1], actionNames[2]);\r\n                    } else {\r\n                      actionData = new VE_StateActionData(actionNames[0], actionNames[1], actionNames[2], actionNames[3]);\r\n                    }\r\n                    this._activeStateData.addAction(actionData, table.pos(i, 6));\r\n                  } else {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 6), \"\" + table.getData(i, 6) + \"IDboolbool\", table.ID))\r\n                    return false;\r\n                  }\r\n\r\n                  // \r\n                  if (!VE_StringFormat.isIDLegal(actionNames[0])) {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 6), \"\" + table.getData(i, 6) + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                  if (!this._activeFsmData.dataSource.isCreatedAction(actionNames[0])) {\r\n                    if (actionNames.length == 2) {\r\n                      this._activeFsmData.dataSource.addAction(actionNames[0], VE_StringFormat.paraSegment(table.getData(i, 7)), [actionNames[1], 'false'], table.pos(i, 6));\r\n                    } else {\r\n                      this._activeFsmData.dataSource.addAction(actionNames[0], VE_StringFormat.paraSegment(table.getData(i, 7)), [actionNames[1], actionNames[2]], table.pos(i, 6));\r\n                    }\r\n                  } else {\r\n                    VE_ErrorManager.Add(VE_Error.error(table.pos(i, 6), \"\" + table.getData(i, 6) + \"\", table.ID))\r\n                    return false;\r\n                  }\r\n                }\r\n              }\r\n            } else {\r\n              // \r\n              let actionArray: string[] = VE_StringFormat.paraSegment(table.getData(i, 6));\r\n              // console.log(actionArray);\r\n              if (actionArray.length === 2 || actionArray.length === 3 || actionArray.length === 4) {\r\n                let actionData: VE_StateActionData;\r\n                if (actionArray.length === 2) {\r\n                  actionData = new VE_StateActionData(actionArray[0], actionArray[1]);\r\n                } else if (actionArray.length === 3) {\r\n                  actionData = new VE_StateActionData(actionArray[0], actionArray[1], actionArray[2]);\r\n                } else {\r\n                  actionData = new VE_StateActionData(actionArray[0], actionArray[1], actionArray[2], actionArray[3]);\r\n                }\r\n                this._activeStateData.addAction(actionData, table.pos(i, 6));\r\n              } else {\r\n                VE_ErrorManager.Add(VE_Error.error(table.pos(i, 6), \"\" + table.getData(i, 6) + \"IDboolbool\", table.ID))\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n\r\n          // \r\n          if (table.getData(i, 8) !== '') {\r\n            if (this._activeFsmData === null || this._activeStateData === null) {\r\n              VE_ErrorManager.Add(VE_Error.error(table.pos(i, 8), \"\" + table.getData(i, 8) + \"\", table.ID))\r\n              return false;\r\n            }\r\n            this._activeStateData!.addAssociatedState(table.getData(i, 8), table.pos(i, 8));\r\n          }\r\n        }\r\n      }\r\n\r\n      return CreateInstance.createProject(project_name);\r\n    } else {\r\n      VE_ErrorManager.Add(VE_Error.error('', '', 'null'));\r\n      return false;\r\n    }\r\n\r\n  }\r\n\r\n\r\n}","export * from './projects';\r\nexport * from './manager';\r\nexport * from './reset';","import { VE_Projects } from \"./projects\";\r\nimport { VE_Objects } from \"../object\";\r\nimport { VE_Templates } from \"../template\";\r\nimport { VE_Variables } from \"../variables\";\r\nimport { VE_VariableData } from \"../dataSource\";\r\nimport { StateConst } from \"../state\";\r\n\r\nexport class VE_Manager {\r\n\r\n  public static get projects(): VE_Projects {\r\n    if (this._projects === null) {\r\n      this._projects = new VE_Projects();\r\n    }\r\n    return this._projects;\r\n  }\r\n  private static _projects: VE_Projects | null = null;\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public static createProject(project_name: string): void {\r\n    VE_Manager.projects.addProject(project_name);\r\n    if (!VE_Manager.projects.isCreatedObjects(project_name)) {\r\n      VE_Manager.projects.addObjects(project_name, new VE_Objects(project_name));\r\n    }\r\n    if (!VE_Manager.projects.isCreatedTemplates(project_name)) {\r\n      VE_Manager.projects.addTemplates(project_name, new VE_Templates(project_name));\r\n    }\r\n    if (!VE_Manager.projects.isCreatedVariables(project_name)) {\r\n      VE_Manager.projects.addVariables(project_name, new VE_Variables(project_name));\r\n    }\r\n  }\r\n\r\n  public static globalVarData(project_name: string): VE_VariableData {\r\n    if (!VE_Manager.projects.isCreatedGlobals(project_name)) {\r\n      VE_Manager.projects.addVariables(project_name, new VE_Variables(project_name));\r\n    }\r\n    return VE_Manager.projects.getGlobalVars(project_name);\r\n  }\r\n\r\n  public static templates(project_name: string): VE_Templates {\r\n    if (!VE_Manager.projects.isCreatedTemplates(project_name)) {\r\n      VE_Manager.projects.addTemplates(project_name, new VE_Templates(project_name));\r\n    }\r\n    return VE_Manager.projects.getTemplates(project_name);\r\n  }\r\n\r\n  public static variables(project_name: string): VE_Variables {\r\n    if (!VE_Manager.projects.isCreatedVariables(project_name)) {\r\n      VE_Manager.projects.addVariables(project_name, new VE_Variables(project_name));\r\n    }\r\n    return VE_Manager.projects.getVariables(project_name);\r\n  }\r\n\r\n  public static objects(project_name: string): VE_Objects {\r\n    if (!VE_Manager.projects.isCreatedObjects(project_name)) {\r\n      VE_Manager.projects.addObjects(project_name, new VE_Objects(project_name));\r\n    }\r\n    return VE_Manager.projects.getObjects(project_name);\r\n  }\r\n\r\n  public static clear(): void {\r\n    VE_Manager.projects.clear()\r\n    this._projects = null;\r\n  }\r\n\r\n  public static clearProject(project_name: string): void {\r\n    VE_Manager.projects.clearProject(project_name);\r\n  }\r\n\r\n  public static dispose(): void {\r\n    if (VE_Manager.projects) {\r\n      VE_Manager.clear();\r\n      StateConst.LogCount = 0;\r\n      StateConst.AssignmentFormulaCount = 0;\r\n      StateConst.TriggerCount = 0;\r\n      StateConst.ActionCount = 0;\r\n      StateConst.StateCount = 0;\r\n    }\r\n  }\r\n\r\n}","import { VE_Objects } from \"../object\";\r\nimport { VE_VariableData } from \"../dataSource\";\r\nimport { VE_Templates } from \"../template\";\r\nimport { VE_Variables } from \"../variables\";\r\n\r\n\r\nexport class VE_Projects {\r\n\r\n  private _objects: { [key: string]: VE_Objects } = {};\r\n  private _variables: { [key: string]: VE_Variables } = {};\r\n  private _templates: { [key: string]: VE_Templates } = {};\r\n\r\n  public projects: string[] = [];\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public addProject(project_name: string): void {\r\n    if (this.projects.indexOf(project_name) === -1) {\r\n      this.projects.push(project_name);\r\n    }\r\n  }\r\n\r\n  public isCreatedObjects(project_name: string): boolean {\r\n    if (this._objects[project_name]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addObjects(project_name: string, objects: VE_Objects): void {\r\n    this._objects[project_name] = objects;\r\n  }\r\n\r\n  public getObjects(project_name: string): VE_Objects {\r\n    return this._objects[project_name];\r\n  }\r\n\r\n  public isCreatedVariables(project_name: string): boolean {\r\n    if (this._variables[project_name]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addVariables(project_name: string, variables: VE_Variables): void {\r\n    this._variables[project_name] = variables;\r\n  }\r\n\r\n  public getVariables(project_name: string): VE_Variables {\r\n    return this._variables[project_name];\r\n  }\r\n\r\n  public isCreatedTemplates(project_name: string): boolean {\r\n    if (this._templates[project_name]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTemplates(project_name: string, templates: VE_Templates): void {\r\n    this._templates[project_name] = templates;\r\n  }\r\n\r\n  public getTemplates(project_name: string): VE_Templates {\r\n    return this._templates[project_name];\r\n  }\r\n\r\n  public isCreatedGlobals(project_name: string): boolean {\r\n    if (this._variables[project_name]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getGlobalVars(project_name: string): VE_VariableData {\r\n    return this._variables[project_name].varData;\r\n  }\r\n\r\n  public clear(): void {\r\n    for (let i: number = 0; i < this.projects.length; i++) {\r\n      this.disposeProject(this.projects[i]);\r\n    }\r\n    this.projects = [];\r\n  }\r\n\r\n\r\n\r\n  public clearProject(project_name: string): void {\r\n    this.disposeProject(project_name);\r\n    let index: number = this.projects.indexOf(project_name);\r\n    if (index > -1) {\r\n      this.projects.splice(index, 1);\r\n    }\r\n  }\r\n\r\n  private disposeProject(project_name: string): void {\r\n    if (this._objects[project_name]) {\r\n      this._objects[project_name].clear();\r\n    }\r\n    delete this._objects[project_name];\r\n    if (this._templates[project_name]) {\r\n      this._templates[project_name].clear();\r\n    }\r\n    delete this._templates[project_name];\r\n    if (this._variables[project_name]) {\r\n      this._variables[project_name].clear();\r\n    }\r\n    delete this._variables[project_name];\r\n  }\r\n\r\n  public sleep(): void {\r\n\r\n  }\r\n\r\n  public dispose(): void {\r\n    this.clear();\r\n  }\r\n\r\n}","import { VE_Manager } from \"./manager\";\r\n\r\nexport class VE_Reset {\r\n\r\n  private static _clearTotal: (() => void)[] = [];\r\n  private static _clearProject: ((project_name: string) => void)[] = [];\r\n\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public static dispose(): void {\r\n\r\n    // \r\n    VE_Manager.clear();\r\n\r\n    // \r\n\r\n    // \r\n\r\n    // \r\n\r\n  }\r\n\r\n  public static addClear(callback: () => void): void {\r\n    this._clearTotal.push(callback);\r\n  }\r\n\r\n  public static addProjectClear(callback: (project_name: string) => void): void {\r\n    this._clearProject.push(callback);\r\n  }\r\n\r\n  public static clear(): void {\r\n    this._clearTotal.forEach((value => {\r\n      value();\r\n    }))\r\n  }\r\n\r\n  public static clearProject(project_name: string): void {\r\n    this._clearProject.forEach((value, index: number) => {\r\n      value(project_name);\r\n    })\r\n  }\r\n\r\n\r\n}","export * from './veryengineObject';\r\nexport * from './objects';","import { VeryEngineObject } from \"./veryengineObject\";\r\nimport { ArrayUtility } from \"../utility\";\r\n\r\nexport class VE_Objects {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  private _objectIDs: string[] = [];\r\n  private _objectDics: { [key: string]: VeryEngineObject } = {};\r\n\r\n  public get count(): number {\r\n    return this._objectIDs.length;\r\n  }\r\n\r\n  constructor(project_name: string) {\r\n    this._projectName = project_name;\r\n  }\r\n\r\n  public isCreated(object_id: string): boolean {\r\n    if (this._objectDics[object_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public add(object_id: string, very_object: VeryEngineObject): void {\r\n    if (!this.isCreated(object_id)) {\r\n      this._objectIDs.push(object_id);\r\n      this._objectDics[object_id] = very_object;\r\n    }\r\n  }\r\n\r\n  public getObjectID(index: number): string {\r\n    if(index >= 0 && index < this._objectIDs.length) {\r\n      return this._objectIDs[index];\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n\r\n  public getVeryObject(object_id: string): VeryEngineObject {\r\n    return this._objectDics[object_id];\r\n  }\r\n\r\n  public unloadObject(object_id: string): void {\r\n    ArrayUtility.remove(this._objectIDs, object_id);\r\n    delete this._objectDics.object_id;\r\n\r\n  }\r\n\r\n  public clear(): void {\r\n    for(let i: number = 0; i < this._objectIDs.length; i++) {\r\n      let tempObject = this._objectDics[this._objectIDs[i]];\r\n      if(tempObject) {\r\n        tempObject.clear();\r\n      }\r\n    }\r\n    this._objectIDs = [];\r\n    this._objectDics = {};\r\n  }\r\n}","import { IVeryVar } from \"../variables\";\r\nimport { IExpression } from \"../expression\";\r\nimport { VE_ActionBehaviour } from \"../action\";\r\nimport { VE_TriggerBehaviour } from \"../trigger\";\r\nimport { VE_Fsm } from \"../state\";\r\nimport { VE_Template } from \"../template\";\r\nimport { VE_DataSource, VE_VariableData } from \"../dataSource\";\r\nimport { GameObject } from \"../babylon\";\r\n\r\nexport class VeryEngineObject {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = '';\r\n\r\n  public gameObject: GameObject;\r\n\r\n  public template: Nullable<VE_Template> = null;\r\n\r\n  private _variables: { [key: string]: IVeryVar } = {};\r\n  private _expressions: { [key: string]: IExpression } = {};\r\n  private _actions: { [key: string]: VE_ActionBehaviour } = {};\r\n  private _triggers: { [key: string]: VE_TriggerBehaviour } = {};\r\n  private _fsms: { [key: string]: VE_Fsm } = {};\r\n  private _templates: { [key: string]: VE_Template } = {};\r\n\r\n  public dataSource: VE_DataSource;\r\n\r\n  public varData: VE_VariableData;\r\n\r\n  private _unloadCallback: ((object_id: string) => void) | null = null;\r\n\r\n  constructor(project_name: string, object_id: string, game_object: GameObject) {\r\n    this._projectName = projectName;\r\n    this._objectID = object_id;\r\n    this.gameObject = game_object;\r\n    this.dataSource = new VE_DataSource(project_name, object_id, false);\r\n    this.varData = new VE_VariableData(project_name);\r\n  }\r\n\r\n  public isCreatedFsm(fsm_id: string): boolean {\r\n    if (this._fsms[fsm_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addFsm(fsm_id: string, fsm: VE_Fsm): void {\r\n    this._fsms[fsm_id] = fsm;\r\n  }\r\n\r\n  public getFsm(fsm_id: string): VE_Fsm {\r\n    return this._fsms[fsm_id];\r\n  }\r\n\r\n  public isCreatedTrigger(trigger_id: string): boolean {\r\n    if (this._triggers[trigger_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTrigger(trigger_id: string, trigger: VE_TriggerBehaviour): void {\r\n    this._triggers[trigger_id] = trigger;\r\n  }\r\n\r\n  public getTrigger(trigger_id: string): VE_TriggerBehaviour {\r\n    return this._triggers[trigger_id];\r\n  }\r\n\r\n  public isCreatedAction(action_id: string): boolean {\r\n    if (this._actions[action_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addAction(action_id: string, action: VE_ActionBehaviour): void {\r\n    this._actions[action_id] = action;\r\n  }\r\n\r\n  public getAction(action_id: string): VE_ActionBehaviour {\r\n    return this._actions[action_id];\r\n  }\r\n\r\n  public isCreatedVariable(var_id: string): boolean {\r\n    if (this._variables[var_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addVariable(var_id: string, variable: IVeryVar): void {\r\n    this._variables[var_id] = variable;\r\n  }\r\n\r\n  public getVariable(var_id: string): IVeryVar {\r\n    return this._variables[var_id];\r\n  }\r\n\r\n  public isCreatedExpression(exp_id: string): boolean {\r\n    if (this._expressions[exp_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addExpression(exp_id: string, expression: IExpression): void {\r\n    this._expressions[exp_id] = expression;\r\n  }\r\n\r\n  public getExpression(exp_id: string): IExpression {\r\n    return this._expressions[exp_id];\r\n  }\r\n\r\n  public isCreatedTemplate(template_id: string): boolean {\r\n    if (this._templates[template_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTemplate(template_id: string, template: VE_Template): void {\r\n    this._templates[template_id] = template;\r\n  }\r\n\r\n  public getTemplate(template_id: string): VE_Template {\r\n    return this._templates[template_id];\r\n  }\r\n\r\n  public isCreatedVar(var_id: string): boolean {\r\n    if (this._variables[var_id] || this._expressions[var_id] || this._templates[var_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public update(): void {\r\n    // trigger update\r\n    Object.keys(this._triggers).forEach(key => {\r\n      this._triggers[key].update();\r\n    })\r\n    // action update\r\n    Object.keys(this._actions).forEach(key => {\r\n      this._actions[key].update();\r\n    })\r\n    // TODO: template\r\n\r\n  }\r\n\r\n  // getState(fsm_id: string, index: number): VE_State {\r\n\r\n  // }\r\n\r\n\r\n  public unload(): void {\r\n    if (this._unloadCallback != null) {\r\n      this._unloadCallback(this._objectID);\r\n      this.clear();\r\n      if (this.gameObject) {\r\n        GameObject.Destroy(this.gameObject);\r\n      }\r\n    }\r\n  }\r\n\r\n  public setUnloadCallback(callback: (id: string) => void): void {\r\n    this._unloadCallback = callback;\r\n  }\r\n\r\n  public clear(): void {\r\n\r\n    if (this.dataSource) {\r\n      this.dataSource.clear();\r\n    }\r\n    if (this.varData) {\r\n      this.varData.clear();\r\n    }\r\n    this._variables = {};\r\n    this._expressions = {};\r\n\r\n    if (this._templates) {\r\n      Object.keys(this._templates).forEach(key => {\r\n        this._templates[key].clear();\r\n      })\r\n      this._templates = {};\r\n    }\r\n\r\n    this._fsms = {};\r\n    this.template = null;\r\n\r\n    if (this._actions) {\r\n      Object.keys(this._actions).forEach(key => {\r\n        this._actions[key].destroy();\r\n      })\r\n      this._actions = {};\r\n    }\r\n\r\n    if (this._triggers) {\r\n      Object.keys(this._triggers).forEach(key => {\r\n        this._triggers[key].destroy();\r\n      })\r\n      this._triggers = {};\r\n    }\r\n  }\r\n\r\n\r\n}","export * from './verySceneVariables';","import { VE_Variables } from \"../variables\";\r\n\r\nexport class VerySceneVariables {\r\n\r\n  public static get Variables(): VE_Variables {\r\n    if(VerySceneVariables._variables === null) {\r\n      VerySceneVariables._variables = new VE_Variables('__scene_varibale__');\r\n    }\r\n    return VerySceneVariables._variables;\r\n  }\r\n  private static _variables: Nullable<VE_Variables> = null;\r\n\r\n  public static get HasLoaded(): boolean {\r\n    return this._hasLoaded;\r\n  }\r\n  private static _hasLoaded: boolean = false;\r\n\r\n  public static initIfNeeded(): void {\r\n    if(!this._hasLoaded) {\r\n      console.log('TODO: ');\r\n    }\r\n  }\r\n}","import { VE_State } from \"./state\";\r\nimport { AssociatedFsmType } from \"../enum\";\r\nimport { VE_Template } from \"../template\";\r\nimport { StateConst } from \"./stateConst\";\r\nimport { VE_Fsm } from \"./fsm\";\r\n\r\nexport class VE_AssociatedState {\r\n\r\n  private _types: AssociatedFsmType[] = [];\r\n  private _indexs: number[] = [];\r\n\r\n  private _posArray: string[] = [];\r\n\r\n  private _stateValues: { [key: number]: string } = {};\r\n  private _states: { [key: number]: VE_State } = {};\r\n  private _templates: { [key: number]: VE_Template } = {};\r\n  private _templateFsmIDs: { [key: number]: string } = {};\r\n\r\n  public get FromState(): VE_State {\r\n    return this._fromState;\r\n  }\r\n  private _fromState: VE_State;\r\n\r\n  constructor(from_state: VE_State) {\r\n    this._fromState = from_state;\r\n  }\r\n\r\n  public add(state: VE_State, state_value: string, pos: string): void {\r\n    this._types.push(AssociatedFsmType.Object);\r\n    let key: number = this._types.length;\r\n    this._indexs.push(key);\r\n    this._stateValues[key] = state_value;\r\n    this._states[key] = state;\r\n    this._posArray.push(pos);\r\n  }\r\n\r\n  public addTemplate(template: VE_Template, fsm_id: string, state_value: string, pos: string): void {\r\n    this._types.push(AssociatedFsmType.Template);\r\n    let key: number = this._types.length;\r\n    this._indexs.push(key);\r\n    this._stateValues[key] = state_value;\r\n    this._templates[key] = template;\r\n    this._templateFsmIDs[key] = fsm_id;\r\n    this._posArray.push(pos);\r\n  }\r\n\r\n  public connect(): void {\r\n    for (let i: number = 0; i < this._types.length; i++) {\r\n      let currentType: AssociatedFsmType = this._types[i];\r\n      let Key: number = this._indexs[i];\r\n\r\n      // \r\n      if (currentType === AssociatedFsmType.Object) {\r\n        let toState: VE_State = this._states[Key];\r\n        if (toState.logicalAssociated === null || toState.logicalAssociated.evaluate() === true) {\r\n          toState.action(StateConst.ASSOCIATED_STATE_PREFIX + this._fromState.Fsm.ID);\r\n          // \r\n          return;\r\n        }\r\n      }\r\n      // State\r\n      else {\r\n        let template: VE_Template = this._templates[Key];\r\n        let fsmID: string = this._templateFsmIDs[Key];\r\n        let stateValue: string = this._stateValues[Key];\r\n\r\n        if (template.templateInstance !== null) {\r\n          if (template.templateInstance.isCreatedFsm(fsmID)) {\r\n            let fsm: VE_Fsm = template.templateInstance.getFsm(fsmID);\r\n            let toState: Nullable<VE_State> = fsm.getState(stateValue);\r\n            if (toState !== null) {\r\n              toState.action(StateConst.ASSOCIATED_STATE_PREFIX + this._fromState.Fsm.ID);\r\n              //\r\n              return;\r\n            }\r\n            else {\r\n              console.error(' >>> ' + this._posArray[i] + '' + \"\" + this._fromState.Fsm.projectName + \"\" + this._fromState.Fsm.objectID + \"\" + this._fromState.Fsm.fsmID + \"\" + template.templateVarID + \"\" + fsmID + \"\" + stateValue + \"\");\r\n              return;\r\n            }\r\n          }\r\n          else {\r\n            console.error(' >>> ' + this._posArray[i] + '' + \"\" + this._fromState.Fsm.projectName + \"\" + this._fromState.Fsm.objectID + \"\" + this._fromState.Fsm.fsmID + \"\" + template.templateVarID + \"\" + fsmID + \"\");\r\n            return;\r\n          }\r\n        }\r\n        else {\r\n          console.error(' >>> ' + this._posArray[i] + '' + \"\" + this._fromState.Fsm.projectName + \"\" + this._fromState.Fsm.objectID + \"\" + this._fromState.Fsm.fsmID + \"\" + template.templateVarID + \"\");\r\n          return;\r\n        }\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n\r\n}","import { VE_State } from \"./state\";\r\nimport { BabylonEngine } from \"../babylon\";\r\nimport { StateConst } from \"./stateConst\";\r\nimport { IVeryVar, VeryString } from \"../variables\";\r\nimport { VeryEngineObject } from \"../object\";\r\n\r\nexport class VE_Fsm {\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = \"\";\r\n\r\n  public get ID(): string {\r\n    return this._id;\r\n  }\r\n  private _id: string = \"\";\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = \"\";\r\n\r\n  public get fsmID(): string {\r\n    return this._fsmID;\r\n  }\r\n  private _fsmID: string = \"\";\r\n\r\n  public get fsmVar(): VeryString {\r\n    return this._fsmVar;\r\n  }\r\n  private _fsmVar: VeryString;\r\n\r\n  public get VeryObject(): VeryEngineObject {\r\n    return this._veryObject;\r\n  }\r\n  private _veryObject: VeryEngineObject;\r\n\r\n  private _stateDics: { [key: number]: VE_State } = {};\r\n  private _states: VE_State[] = [];\r\n\r\n  public get count(): number {\r\n    return this._states.length;\r\n  }\r\n\r\n  private _frameCount: number = -1;\r\n  private _triggerIDs: string[] = [];\r\n\r\n  constructor(\r\n    project_name: string,\r\n    object_id: string,\r\n    fsm_id: string,\r\n    fsm_variable: VeryString,\r\n    very_object: VeryEngineObject\r\n  ) {\r\n    this._projectName = project_name;\r\n    this._objectID = object_id;\r\n    this._fsmID = fsm_id;\r\n    this._fsmVar = fsm_variable;\r\n    this._veryObject = very_object;\r\n  }\r\n\r\n  public isCreatedState(state_index: number): boolean {\r\n    if (this._stateDics[state_index]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addState(state: VE_State): void {\r\n    this._states.push(state);\r\n  }\r\n\r\n  public getState(state_value: string): Nullable<VE_State> {\r\n    for(let i: number = 0; i < this._states.length; i++) {\r\n      if(this._states[i].Value === state_value) {\r\n        return this._states[i];\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  // public getState(state_index: number): Nullable<VE_State> {\r\n  //   if (state_index === StateConst.STATE_INDEX) {\r\n  //     return this._states[0];\r\n  //   } else {\r\n  //     if (this._stateDics[state_index]) {\r\n  //       return this._stateDics[state_index];\r\n  //     } else {\r\n  //       return null;\r\n  //     }\r\n  //   }\r\n  // }\r\n\r\n  public getStateInSequence(index: number): Nullable<VE_State> {\r\n    if (index >= 0 && index < this._states.length) {\r\n      return this._states[index];\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public removeState(state_index: number): void {\r\n    delete this._stateDics[state_index];\r\n  }\r\n\r\n  public receiveEvent(trigger_id: string): boolean {\r\n\r\n    if (BabylonEngine.Scene.getFrameId() != this._frameCount) {\r\n      this._frameCount = BabylonEngine.Scene.getFrameId();\r\n      this._triggerIDs = [];\r\n      this._triggerIDs.push(trigger_id);\r\n      return true;\r\n    } else {\r\n      if (trigger_id.startsWith(StateConst.ASSOCIATED_STATE_PREFIX)) {\r\n        // console.log(`ID: ${trigger_id} Return True`);\r\n        return true;\r\n      } else {\r\n        if (this._triggerIDs.indexOf(trigger_id) !== -1) {\r\n          return false;\r\n        } else {\r\n          this._triggerIDs.push(trigger_id);\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public setValue(value: any): void {\r\n    this._fsmVar.setValue(value);\r\n  }\r\n\r\n  public hasStateValue(val: string): boolean {\r\n    for (let i = 0; i < this._states.length; i++) {\r\n      if (this._states[i].Value === val) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n}\r\n","export * from './state';\r\nexport * from './fsm';\r\nexport * from './stateAction';\r\nexport * from './associatedState';\r\nexport * from './stateConst';\r\nexport * from './sequenceActions';","import { SequenceActionState, StateActionType, ActionType } from \"../enum\";\r\nimport { VE_StateAction } from \"./stateAction\";\r\nimport { VE_AssociatedState } from \"./associatedState\";\r\nimport { VE_ActionBehaviour } from \"../action\";\r\nimport { BabylonEngine } from \"../babylon\";\r\n\r\nexport class VE_SequenceActions {\r\n\r\n  public get sequenceState(): SequenceActionState {\r\n    return this._sequenceState;\r\n  }\r\n  private _sequenceState: SequenceActionState = SequenceActionState.Initial;\r\n\r\n  private _activeActionIndex: number = -1;\r\n\r\n  public get StateActions(): VE_StateAction[] {\r\n    return this._stateActions;\r\n  }\r\n  private _stateActions: VE_StateAction[] = [];\r\n\r\n  public get ActiveActions(): VE_StateAction[] {\r\n    return this._activeActions;\r\n  }\r\n  private _activeActions: VE_StateAction[] = [];\r\n\r\n  public get AssociatedStates(): VE_AssociatedState[] {\r\n    return this._associatedStates;\r\n  }\r\n  private _associatedStates: VE_AssociatedState[] = [];\r\n\r\n  private _observer: Nullable<BABYLON.Observer<BABYLON.Scene>> = null;\r\n\r\n\r\n  public sequenceAction(actions: VE_StateAction[], associated_states: VE_AssociatedState[]) {\r\n    //this._actionDic.Clear();\r\n    this._activeActions = [];\r\n    this._stateActions = [];\r\n    this._associatedStates = [];\r\n    this._sequenceState = SequenceActionState.Running;\r\n    for (let i: number = 0; i < actions.length; i++) {\r\n      if (actions[i].type === StateActionType.Action && actions[i].action!.type === ActionType.Animation) {\r\n        actions[i].action!.SequenceState = SequenceActionState.Prepared;\r\n      }\r\n      this._stateActions.push(actions[i]);\r\n    }\r\n    for (let i: number = 0; i < associated_states.length; i++) {\r\n      this._associatedStates.push(associated_states[i]);\r\n    }\r\n    if (this.activate(0)) {\r\n      this.checkActionsFinished();\r\n    }\r\n\r\n    this._observer = BabylonEngine.Scene.onBeforeRenderObservable.add(() => {\r\n      this.update();\r\n    });\r\n  }\r\n\r\n  private activate(start_index: number): boolean {\r\n    for (let i: number = start_index; i < this.StateActions.length; i++) {\r\n      this._activeActionIndex = i;\r\n      if (this.StateActions[i].type === StateActionType.Assignment) {\r\n        this.StateActions[i].assignment!.assign();\r\n      }\r\n      else {\r\n        let action: VE_ActionBehaviour = this.StateActions[i].action!;\r\n        if (action.type === ActionType.Normal || !action.isSequence) {\r\n          action.action(this.StateActions[i].enabled.getValue(), this.StateActions[i].everyFrame.getValue());\r\n        }\r\n        else {\r\n          this.ActiveActions.push(this.StateActions[i]);\r\n          action.sequenceAction(this, this.StateActions[i].enabled.getValue(), this.StateActions[i].everyFrame.getValue());\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n\r\n  public pause(): void {\r\n    if (this.ActiveActions.length > 0) {\r\n      this._sequenceState = SequenceActionState.Pause;\r\n      this.ActiveActions[0].action!.pause();\r\n    }\r\n  }\r\n\r\n  public resume(): void {\r\n    if (this.ActiveActions.length > 0) {\r\n      this._sequenceState = SequenceActionState.Running;\r\n      this.ActiveActions[0].action!.resume();\r\n    }\r\n  }\r\n\r\n\r\n  public stop(): void {\r\n    if (this.ActiveActions.length > 0) {\r\n      this._sequenceState = SequenceActionState.Initial;\r\n      this.ActiveActions[0].action!.stop();\r\n      this.actionRecover();\r\n      // \r\n      this.destroy();\r\n    }\r\n  }\r\n\r\n  private checkActionsFinished(): void {\r\n    if (this.ActiveActions.length == 0 && (++this._activeActionIndex >= this.StateActions.length || this.activate(this._activeActionIndex))) {\r\n      this._sequenceState = SequenceActionState.Initial;\r\n      this.actionRecover();\r\n      // Debug.Log(this.AssociatedStates.Count);\r\n      // \r\n      if (this.AssociatedStates.length > 0) {\r\n        for (let i: number = 0; i < this.AssociatedStates.length; i++) {\r\n          this.AssociatedStates[i].connect();\r\n        }\r\n        // \r\n        this.destroy();\r\n      }\r\n    }\r\n  }\r\n\r\n  private actionRecover(): void {\r\n    for (let i: number = 0; i < this.StateActions.length; i++) {\r\n      if (this.StateActions[i].type === StateActionType.Action && this.StateActions[i].action!.type === ActionType.Animation) {\r\n        this.StateActions[i].action!.SequenceState = SequenceActionState.Initial;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public finishAction(action: VE_ActionBehaviour): void {\r\n    if (this.ActiveActions.length > 0) {\r\n      for (let i: number = 0; i < this.ActiveActions.length; i++) {\r\n        if (this.ActiveActions[i].type === StateActionType.Action && this.ActiveActions[i].action === action) {\r\n          this._activeActions.splice(i, 1);\r\n          return;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  private update(): void {\r\n    if (this._sequenceState === SequenceActionState.Running) {\r\n      // this.StateTime += Time.deltaTime;\r\n      this.checkActionsFinished();\r\n    }\r\n  }\r\n\r\n  public destroy(): void {\r\n    if (this._observer) {\r\n      BabylonEngine.Scene.onBeforeRenderObservable.remove(this._observer);\r\n    }\r\n    this._observer = null;\r\n  }\r\n\r\n}","import { VE_Fsm } from \"./fsm\";\r\nimport { VE_StateAction } from \"./stateAction\";\r\nimport { VE_AssociatedState } from \"./associatedState\";\r\nimport {\r\n  AssignmentType,\r\n  StateActionType,\r\n  ActionType,\r\n  SequenceActionState\r\n} from \"../enum\";\r\nimport { VE_Template } from \"../template\";\r\nimport { IVeryVar, VeryExpression } from \"../variables\";\r\nimport { IExpression } from \"../expression\";\r\nimport { VE_Assignment } from \"../action\";\r\nimport { VE_SequenceActions } from \"./sequenceActions\";\r\n\r\nexport class VE_State {\r\n  public get Fsm(): VE_Fsm {\r\n    return this._fsm;\r\n  }\r\n  private _fsm: VE_Fsm;\r\n\r\n  public get isInitialValue(): boolean {\r\n    return this._isInitialValue;\r\n  }\r\n  private _isInitialValue: boolean = false;\r\n\r\n  public get Value(): string {\r\n    return this._value;\r\n  }\r\n  private _value: string = \"\";\r\n\r\n  private _assignmentType: AssignmentType = AssignmentType.Const;\r\n\r\n  public get isTemplateVar(): boolean {\r\n    return this._isTemplateVar;\r\n  }\r\n  private _isTemplateVar: boolean = false;\r\n\r\n  private _template: Nullable<VE_Template> = null;\r\n  private _varID: string = \"\";\r\n  private _templateVar: Nullable<IVeryVar> = null;\r\n  private _assignmentStr: string = \"\";\r\n\r\n  public get logicalExpression(): Nullable<IExpression> {\r\n    return this._logicalExpression;\r\n  }\r\n  private _logicalExpression: Nullable<IExpression> = null;\r\n\r\n  public get index(): number {\r\n    return this._index;\r\n  }\r\n  private _index: number = 0;\r\n\r\n  public get stateVariable(): Nullable<IVeryVar> {\r\n    return this._stateVariable;\r\n  }\r\n  private _stateVariable: Nullable<IVeryVar> = null;\r\n\r\n  public logicalAssociated: Nullable<IExpression> = null;\r\n\r\n  private _stateActions: VE_StateAction[] = [];\r\n  private _associatedStates: VE_AssociatedState[] = [];\r\n\r\n  public get IsSequence(): boolean {\r\n    return this._isSequence;\r\n  }\r\n  private _isSequence: boolean = false;\r\n\r\n  public _sequenceActions: VE_SequenceActions = new VE_SequenceActions();\r\n\r\n  // \r\n  // 1.\r\n\r\n  constructor(fsm: VE_Fsm, index: number) {\r\n    this._fsm = fsm;\r\n    this._index = index;\r\n  }\r\n\r\n  public setInitialValue(value: any): void {\r\n    this._value = value;\r\n    this._assignmentType = AssignmentType.Const;\r\n  }\r\n\r\n  public setSequence(): void {\r\n    this._isSequence = true;\r\n  }\r\n\r\n  public setLogicalExpression(logical_exp: IExpression): void {\r\n    this._logicalExpression = logical_exp;\r\n  }\r\n\r\n  public setTemplateInfo(\r\n    template: VE_Template,\r\n    var_id: string,\r\n    assign_str: string\r\n  ): void {\r\n    this._isTemplateVar = true;\r\n    this._template = template;\r\n    this._varID = var_id;\r\n    this._assignmentStr = assign_str;\r\n  }\r\n\r\n  public setConstValue(value: any): void {\r\n    this._value = value;\r\n    this._assignmentType = AssignmentType.Const;\r\n  }\r\n\r\n  public setStateVariable(very_var: IVeryVar): void {\r\n    this._stateVariable = very_var;\r\n    this._assignmentType = AssignmentType.Variable;\r\n  }\r\n\r\n  public addAction(state_action: VE_StateAction): void {\r\n    this._stateActions.push(state_action);\r\n    if (\r\n      state_action.type === StateActionType.Action &&\r\n      state_action.action!.isSequence\r\n    ) {\r\n      this._isSequence = true;\r\n    }\r\n  }\r\n\r\n  public addAssignment(assignment: VE_Assignment): void {\r\n    let stateAction: VE_StateAction = new VE_StateAction();\r\n    stateAction.setAssignment(assignment);\r\n    this._stateActions.push(stateAction);\r\n  }\r\n\r\n  public addAssociatedState(associated_state: VE_AssociatedState): void {\r\n    this._associatedStates.push(associated_state);\r\n  }\r\n\r\n\r\n  public action(trigger_id: string): void {\r\n    // Parent\r\n    if (this._fsm.receiveEvent(trigger_id)) {\r\n      // \r\n      this.Fsm.setValue(this.Value);\r\n\r\n      if (!this._isSequence) {\r\n        // \r\n        for (let i: number = 0; i < this._stateActions.length; i++) {\r\n          let stateAction: VE_StateAction = this._stateActions[i];\r\n          // \r\n          if (stateAction.type === StateActionType.Action) {\r\n            // TODO: \r\n            stateAction!.action!.action(\r\n              stateAction.enabled.getValue(),\r\n              stateAction.everyFrame.getValue()\r\n            );\r\n          }\r\n          // \r\n          else {\r\n            stateAction!.assignment!.assign();\r\n          }\r\n        }\r\n        // \r\n        if (this._associatedStates.length > 0) {\r\n          // \r\n          // \r\n          for (let i: number = 0; i < this._associatedStates.length; i++) {\r\n            this._associatedStates[i].connect();\r\n          }\r\n        }\r\n      } else {\r\n        // \r\n        for (let i: number = 0; i < this._stateActions.length; i++) {\r\n          //\r\n          if (this._stateActions[i].type === StateActionType.Action && this._stateActions[i]!.action!.type === ActionType.Animation\r\n          ) {\r\n            if (this._stateActions[i]!.action!.SequenceState === SequenceActionState.Prepared || this._stateActions[i]!.action!.SequenceState === SequenceActionState.Running\r\n            ) {\r\n              console.error(\r\n                \" >>> \" +\r\n                this._fsm.projectName +\r\n                \"\" +\r\n                this._fsm.objectID +\r\n                \"\" +\r\n                this._fsm.fsmID +\r\n                \"ID\" +\r\n                this._index +\r\n                \"\" +\r\n                this._stateActions[i]!.action!.actionID +\r\n                \"\"\r\n              );\r\n              return;\r\n            } else if (this._stateActions[i]!.action!.SequenceState === SequenceActionState.Pause) {\r\n              console.error(\r\n                \" >>> \" +\r\n                this._fsm.projectName +\r\n                \"\" +\r\n                this._fsm.objectID +\r\n                \"\" +\r\n                this._fsm.fsmID +\r\n                \"ID\" +\r\n                this._index +\r\n                \"\" +\r\n                this._stateActions[i]!.action!.actionID +\r\n                \"\"\r\n              );\r\n              return;\r\n            }\r\n          }\r\n        }\r\n\r\n        this._sequenceActions!.sequenceAction(this._stateActions, this._associatedStates);\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  /*\r\n  // TODO\r\n  public action(trigger_id: string): void {\r\n    // Parent\r\n    if (this._fsm.receiveEvent(trigger_id)) {\r\n      if (this._isTemplateVar) {\r\n        // TODO:null\r\n        if (this._templateVar === null) {\r\n          this.getTemplateVar();\r\n        } else {\r\n          if (this._templateVar.className === \"VeryExpression\") {\r\n            // TODO\r\n            if ((<VeryExpression>this._templateVar).isNull) {\r\n              this.getTemplateVar();\r\n            } else {\r\n              this.Fsm.setValue(this._templateVar.getValue());\r\n            }\r\n          } else {\r\n            this.Fsm.setValue(this._templateVar.getValue());\r\n          }\r\n        }\r\n      } else {\r\n        // \r\n        if (this._assignmentType == AssignmentType.Const) {\r\n          // \r\n          this.Fsm.setValue(this.Value);\r\n        } else if (this._assignmentType == AssignmentType.Variable) {\r\n          // \r\n          this.Fsm.setValue(this._stateVariable!.getValue());\r\n        } // \r\n        else {\r\n          // \r\n          // this.Fsm.setValue(this._stateExpression.evaluate());\r\n        }\r\n      }\r\n\r\n      // \r\n      for (let i: number = 0; i < this._stateActions.length; i++) {\r\n        //\r\n        if (\r\n          this._stateActions[i].type === StateActionType.Action &&\r\n          this._stateActions[i]!.action!.Type === ActionType.Animation\r\n        ) {\r\n          if (\r\n            this._stateActions[i]!.action!.SequenceState ===\r\n            SequenceActionState.Prepared ||\r\n            this._stateActions[i]!.action!.SequenceState ===\r\n            SequenceActionState.Running\r\n          ) {\r\n            console.error(\r\n              \" >>> \" +\r\n              this._fsm.projectName +\r\n              \"\" +\r\n              this._fsm.objectID +\r\n              \"\" +\r\n              this._fsm.fsmID +\r\n              \"ID\" +\r\n              this._index +\r\n              \"\" +\r\n              this._stateActions[i]!.action!.actionID +\r\n              \"\"\r\n            );\r\n            return;\r\n          } else if (\r\n            this._stateActions[i]!.action!.SequenceState ===\r\n            SequenceActionState.Pause\r\n          ) {\r\n            console.error(\r\n              \" >>> \" +\r\n              this._fsm.projectName +\r\n              \"\" +\r\n              this._fsm.objectID +\r\n              \"\" +\r\n              this._fsm.fsmID +\r\n              \"ID\" +\r\n              this._index +\r\n              \"\" +\r\n              this._stateActions[i]!.action!.actionID +\r\n              \"\"\r\n            );\r\n            return;\r\n          }\r\n        }\r\n\r\n        //, TODO: \r\n        if (this._isSequence) {\r\n          // TODO: \r\n          console.log('');\r\n          // this._sequenceActions = this._fsm.VeryObject.gameObject.AddComponent<\r\n          //   VE_SequenceActions\r\n          // >();\r\n          // this._sequenceActions!.sequenceAction(\r\n          //   this._stateActions,\r\n          //   this._associatedStates\r\n          // );\r\n        } else {\r\n          // \r\n          for (let i: number = 0; i < this._stateActions.length; i++) {\r\n            let stateAction: VE_StateAction = this._stateActions[i];\r\n            // \r\n            if (stateAction.type === StateActionType.Action) {\r\n              // TODO: \r\n              stateAction!.action!.action(\r\n                stateAction.enabled,\r\n                stateAction.everyFrame\r\n              );\r\n            }\r\n            // \r\n            else {\r\n              stateAction!.assignment!.assign();\r\n            }\r\n          }\r\n          // \r\n          if (this._assocaitedStates.length > 0) {\r\n            // \r\n            // \r\n            for (let i: number = 0; i < this._assocaitedStates.length; i++) {\r\n              this._assocaitedStates[i].connect();\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  */\r\n\r\n  private getTemplateVar(): void {\r\n    if (this._template!.templateInstance === null) {\r\n      console.error(\r\n        \" >>> \" +\r\n        this._fsm.projectName +\r\n        \"\" +\r\n        this._fsm.objectID +\r\n        \"\" +\r\n        this._fsm.fsmID +\r\n        \"\" +\r\n        this._assignmentStr +\r\n        \"\"\r\n      );\r\n      this._templateVar = null;\r\n      return;\r\n    } else {\r\n      if (this._template!.templateInstance.isCreatedVariable(this._varID)) {\r\n        this._templateVar = this._template!.templateInstance.getVariable(\r\n          this._varID\r\n        );\r\n      } else if (\r\n        this._template!.templateInstance.isCreatedExpression(this._varID)\r\n      ) {\r\n        this._templateVar = new VeryExpression(\r\n          this._template!.templateInstance.getExpression(this._varID)\r\n        );\r\n      } else if (this._template!.templateInstance.isCreatedFsm(this._varID)) {\r\n        this._templateVar = this._template!.templateInstance.getFsm(\r\n          this._varID\r\n        ).fsmVar;\r\n      } else {\r\n        console.error(\r\n          \" >>> \" +\r\n          this._fsm.projectName +\r\n          \"\" +\r\n          this._fsm.objectID +\r\n          \"\" +\r\n          this._fsm.fsmID +\r\n          \"\" +\r\n          this._assignmentStr +\r\n          \"\" +\r\n          this._varID +\r\n          \"\"\r\n        );\r\n        this._templateVar = null;\r\n        return;\r\n      }\r\n      this._fsm.setValue(this._templateVar.getValue());\r\n    }\r\n  }\r\n}\r\n","\r\nimport { VE_ActionBehaviour } from \"../action/actionBehaviour\";\r\nimport { StateActionType } from \"../enum\";\r\nimport { VE_Assignment } from \"../action\";\r\nimport { IVeryVar, VeryBool } from \"../variables\";\r\n\r\nexport class VE_StateAction {\r\n\r\n  public get type(): StateActionType {\r\n    return this._type;\r\n  }\r\n  private _type: StateActionType = StateActionType.Action;\r\n\r\n  public get action(): Nullable<VE_ActionBehaviour> {\r\n    return this._action;\r\n  }\r\n  private _action: Nullable<VE_ActionBehaviour> = null;\r\n\r\n  public get enabled(): IVeryVar {\r\n    return this._enabled;\r\n  }\r\n  private _enabled: IVeryVar;\r\n\r\n  public get everyFrame(): IVeryVar {\r\n    return this._everyFrame;\r\n  }\r\n  private _everyFrame: IVeryVar;\r\n\r\n  public get assignment(): Nullable<VE_Assignment> {\r\n    return this._assignment;\r\n  }\r\n  private _assignment: Nullable<VE_Assignment> = null;\r\n\r\n  constructor() {\r\n    this._enabled = new VeryBool();\r\n    this._everyFrame = new VeryBool();\r\n  }\r\n\r\n  public setAction(action: VE_ActionBehaviour, enabled: IVeryVar = new VeryBool(), every_frame: IVeryVar = new VeryBool(), sequence: boolean = false): void {\r\n    this._action = action;\r\n    this._enabled = enabled;\r\n    this._everyFrame = every_frame;\r\n    this._action.isSequence = sequence;\r\n    this._type = StateActionType.Action; \r\n  }\r\n\r\n  public setAssignment(assignment: VE_Assignment): void {\r\n    this._assignment = assignment;\r\n    this._type = StateActionType.Assignment; \r\n  }\r\n\r\n\r\n}","export class StateConst {\r\n\r\n  public static readonly STATE_SEPARATOR: string = '.';\r\n  public static readonly ASSOCIATED_STATE_PREFIX: string = ':';\r\n  public static readonly VARIABLE_SYMBOL: string = '*';\r\n  public static readonly STATE_INDEX: number = -1;\r\n  public static LogCount: number = 0;\r\n\r\n  public static readonly AssignmentPrefix: string = '_';\r\n  public static AssignmentFormulaCount: number = 0;\r\n\r\n  public static TriggerCount: number = 0;\r\n  public static ActionCount: number = 0;\r\n  public static StateCount: number = 0;\r\n  public static readonly STATE_VALUE: string = '';\r\n\r\n}","export * from './template';\r\nexport * from './templates';","import { VeryEngineObject } from \"../object\";\r\nimport { VE_DataSource, VE_VariableData } from \"../dataSource\";\r\n\r\nexport class VE_Template {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  public get templateID(): string {\r\n    return this._templateID;\r\n  }\r\n  private _templateID: string = '';\r\n\r\n  public get templateVarID(): string {\r\n    return this._templateVarID;\r\n  }\r\n  private _templateVarID: string = '';\r\n\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = '';\r\n\r\n  public templateInstance: Nullable<VeryEngineObject> = null;\r\n\r\n  public dataSource: VE_DataSource;\r\n\r\n  public varData: VE_VariableData;\r\n\r\n  public get counter(): number {\r\n    return this._counter;\r\n  }\r\n  private _counter: number = 0;\r\n\r\n  public backupInstances: VeryEngineObject[] = [];\r\n\r\n  public activeCount(): number {\r\n    return this.backupInstances.length;\r\n  }\r\n\r\n  public instanceArray: VE_Template[] = [];\r\n\r\n  constructor(project_name: string, template_id: string) {\r\n    this._projectName = project_name;\r\n    this._templateID = template_id;\r\n    this.dataSource = new VE_DataSource(project_name, template_id, true);\r\n    this.varData = new VE_VariableData(project_name);\r\n  }\r\n\r\n  public addInstance(instance_obj: VeryEngineObject): void {\r\n    this.templateInstance = instance_obj;\r\n    this.backupInstances.push(instance_obj);\r\n  }\r\n\r\n  public isCreatedVariable(var_id: string): boolean {\r\n    return this.varData.isCreatedVariable(var_id);\r\n  }\r\n\r\n  public addVariable(var_id: string, var_paras: string[], pos: string): void {\r\n    this.varData.addVariable(var_id, var_paras, pos);\r\n  }\r\n\r\n  public increase(): void {\r\n    this._counter++;\r\n  }\r\n\r\n  public unload(all_instance: boolean = false): void {\r\n    if (all_instance) {\r\n      this.backupInstances = [];\r\n    } else {\r\n      this.backupInstances.pop();\r\n    }\r\n    this.templateInstance = null;\r\n  }\r\n\r\n  public unloadInstance(instance: VeryEngineObject): void {\r\n    let index: number = this.backupInstances.indexOf(instance);\r\n    if (index > -1) {\r\n      this.backupInstances.splice(index, 1);\r\n    }\r\n  }\r\n\r\n  public clone(object_id: string, template_var_id: string): VE_Template {\r\n    let cloneTemplate: VE_Template = new VE_Template(this._projectName, this._templateID);\r\n    cloneTemplate._objectID = object_id;\r\n    cloneTemplate._templateVarID = template_var_id;\r\n    cloneTemplate.dataSource = this.dataSource;\r\n    cloneTemplate.varData = this.varData;\r\n    cloneTemplate._counter = this._counter;\r\n    return cloneTemplate;\r\n  }\r\n\r\n  public clear(): void {\r\n    if (this.dataSource) {\r\n      this.dataSource.clear();\r\n    }\r\n    if (this.varData) {\r\n      this.varData.clear();\r\n    }\r\n    if (this.templateInstance) {\r\n      this.templateInstance.clear();\r\n    }\r\n  }\r\n\r\n}","import { VE_Template } from \"./template\";\r\nimport { ErrorInfo, VE_StringFormat } from \"../utility\";\r\nimport { StateConst, VE_Fsm, VE_State, VE_StateAction, VE_AssociatedState } from \"../state\";\r\nimport { GameObject } from \"../babylon\";\r\nimport { VE_Objects, VeryEngineObject } from \"../object\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { VeryVarManager, IVeryVar, VeryString, VeryBool, VarTools, VE_Variables, VeryExpression } from \"../variables\";\r\nimport { VE_FsmData, VE_StateData, VE_StateTriggerData, VE_StateActionData } from \"../dataSource\";\r\nimport { VE_Expressions, IExpression } from \"../expression\";\r\nimport { VE_Triggers, VE_TriggerBehaviour, VE_CustomTriggerManager } from \"../trigger\";\r\nimport { Trigger_Custom } from \"../library/trigger\";\r\nimport { VE_Actions, VE_ActionBehaviour, VE_Assignment } from \"../action\";\r\nimport { StateActionType, AssignType } from \"../enum\";\r\nimport { VerySceneVariables } from \"../scene\";\r\nimport { VE_AssignmentTypeJudge } from \"../action/assignmentTypeJudge\";\r\n\r\nexport class VE_Templates {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  private _templateDic: { [key: string]: VE_Template } = {};\r\n\r\n  private _instanceDic: { [key: string]: { [key: string]: VE_Template } } = {};\r\n\r\n  // \r\n  private _instanceArray: { [key: string]: { [key: string]: VE_Template[] } } = {};\r\n\r\n\r\n  constructor(project_name: string) {\r\n    this._projectName = project_name;\r\n  }\r\n\r\n  public isCreatedTemplate(template_id: string): boolean {\r\n    if (this._templateDic[template_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTemplate(template_id: string, template: VE_Template): void {\r\n    this._templateDic[template_id] = template;\r\n  }\r\n\r\n  public getTemplate(template_id: string): VE_Template {\r\n    return this._templateDic[template_id];\r\n  }\r\n\r\n  public isCreatedInstance(object_id: string, var_id: string): boolean {\r\n    if (this._instanceDic[object_id] && this._instanceDic[object_id][var_id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public getInstance(object_id: string, var_id: string): VE_Template {\r\n    return this._instanceDic[object_id][var_id];\r\n  }\r\n\r\n  // public getState(var_id: string, state_id: string, index: number): VE_State {\r\n\r\n  // } \r\n\r\n  public clear(): void {\r\n    if (this._templateDic) {\r\n      Object.keys(this._templateDic).forEach(key => {\r\n        this._templateDic[key].clear();\r\n      })\r\n      this._templateDic = {};\r\n    }\r\n  }\r\n\r\n  // TODO\r\n  public createInstance(object_id: string, var_id: string, template: VE_Template, object_name: string, error_info: ErrorInfo, destory_on_create_new: boolean): Nullable<VE_Template> {\r\n\r\n    let errorPos: string = \"\" + this._projectName + \"\" + object_id + \"\" + var_id + \"\" + template.templateID + \"\";\r\n\r\n    // \r\n    if (template.templateInstance !== null && destory_on_create_new) {\r\n      template.templateInstance.unload();\r\n      template.unload();\r\n    }\r\n\r\n    // 1GameObject312ResourcesPrefabprefab + 3null\r\n    let gameObject: Nullable<GameObject> = null;\r\n    let hasCreated: boolean = false;\r\n    let newObjectID: string = template.templateID + \"_\" + var_id.replace(StateConst.VARIABLE_SYMBOL, \"\");\r\n    if (object_name === '' || object_name.toLowerCase() === \"null\" || object_name.toLowerCase() === \"none\") {\r\n      gameObject = new GameObject(newObjectID + \"_Empty\");\r\n      hasCreated = true;\r\n    }\r\n    else {\r\n      gameObject = GameObject.Find(object_name);\r\n      if (gameObject === null) {\r\n        error_info.isRight = false;\r\n        error_info.message = \"Resources\" + object_name + \"\" + errorPos;\r\n        return null;\r\n      }\r\n      // TODO: prefab\r\n      /*\r\n      try {\r\n        gameObject = Resources.Load(object_name) as GameObject;\r\n        if (gameObject == null) {\r\n          gameObject = GameObjectTools.FindGameObject(object_name);\r\n          if (gameObject == null) {\r\n            error_info = \"TResources\" + object_name + \"\" + errorPos;\r\n            return null;\r\n          }\r\n        }\r\n      }\r\n      catch\r\n      {\r\n        gameObject = GameObjectTools.FindGameObject(object_name);\r\n        if (gameObject == null) {\r\n          error_info = \"TResources\" + object_name + \"\" + errorPos;\r\n          return null;\r\n        }\r\n      }\r\n      */\r\n    }\r\n    // \r\n    if (!hasCreated) {\r\n      gameObject = GameObject.CreateInstance(gameObject);\r\n    }\r\n    // gameObject!.SetActive(true);\r\n    gameObject!.name += \"_\" + template.counter;\r\n    newObjectID += \"_\" + template.counter;\r\n    template.increase();\r\n    // Object\r\n    let instance: VeryEngineObject = new VeryEngineObject(this._projectName, newObjectID, gameObject!);\r\n    template.addInstance(instance);\r\n    instance.template = template;\r\n\r\n    let objects: VE_Objects = VE_Manager.objects(this._projectName);\r\n    // \r\n    objects.add(newObjectID, instance);\r\n\r\n    // Objects\r\n    instance.setUnloadCallback(objects.unloadObject.bind(objects));\r\n\r\n    // 2Template\r\n    // 11.2.3.\r\n    for (let i: number = 0; i < template.varData.count; i++) {\r\n      let varID: string = template.varData.getVariableID(i);\r\n      let varPara: string[] = template.varData.getVariableParas(varID);\r\n      // 1.2.3.\r\n      // 1.\r\n      if (varPara[0] === \"\" || varPara[0].toLowerCase() === \"expression\") {\r\n        continue;\r\n      }\r\n      // 2.IVeryVar\r\n      else if (VeryVarManager.hasVarType(varPara[0])) {\r\n        let errorInfo: ErrorInfo = new ErrorInfo();\r\n        let newVar: Nullable<IVeryVar> = VeryVarManager.createVariable(varID, varPara[0], varPara[1], errorInfo);\r\n        // TODO: List\r\n        // if (isRight && newVar.VarType == VeryList._varType) {\r\n        //   ((VeryList)newVar ).SetChildValue(this._projectName, newObjectID, ref isRight, ref errorInfo);\r\n        // }\r\n        // // TODO: Dictionary\r\n        // if (isRight && newVar.VarType == VeryDictionary._varType) {\r\n        //   ((VeryDictionary)newVar ).SetChildValue(this._projectName, newObjectID, ref isRight, ref errorInfo);\r\n        // }\r\n        if (!errorInfo.isRight || newVar === null) {\r\n          error_info.isRight = false;\r\n          error_info.message = \"\" + varID + \"\" + varPara[0] + \"\" + varPara[1] + \"\" + errorInfo.message + \"\" + errorPos;\r\n          return null;\r\n        }\r\n        else {\r\n          instance.addVariable(varID, newVar);\r\n        }\r\n      }\r\n      // 3.\r\n      else if (this.isCreatedTemplate(varPara[0])) {\r\n        instance.addTemplate(varID, this.getTemplate(varPara[0]).clone(newObjectID, varID));\r\n      }\r\n      // \r\n      else {\r\n        error_info.isRight = false;\r\n        error_info.message = \"\" + varID + \",\" + varPara[0] + \",\" + varPara[1] + \"\" + errorPos;\r\n        return null;\r\n      }\r\n    }\r\n\r\n    // 2\r\n    for (let i: number = 0; i < template.dataSource.fsmCount; i++) {\r\n      let fsmID: string = template.dataSource.getFsmID(i);\r\n      let fsmData: VE_FsmData = template.dataSource.getFsmData(fsmID);\r\n      // string\r\n      let newVar: VeryString = new VeryString();\r\n      newVar.setValue(fsmData.initialValStr);\r\n      // \r\n      let fsm: VE_Fsm = new VE_Fsm(this.projectName, newObjectID, fsmID, newVar, instance);\r\n      instance.addFsm(fsmID, fsm);\r\n    }\r\n\r\n    // 3\r\n    for (let i: number = 0; i < template.varData.count; i++) {\r\n      let varID: string = template.varData.getVariableID(i);\r\n      let varPara: string[] = template.varData.getVariableParas(varID);\r\n      // 1.2.3.\r\n      // 1.\r\n      if (varPara[0] === \"\" || varPara[0].toLowerCase() === \"expression\") {\r\n        // \r\n        let errorInfo: ErrorInfo = new ErrorInfo();\r\n        let localExp: IExpression = VE_Expressions.createLocalExpression(varID, varPara[1], this._projectName, newObjectID, errorInfo);\r\n        if (!errorInfo.isRight || localExp === null) {\r\n          error_info.isRight = false;\r\n          error_info.message = \"\\n\" + errorInfo.message + \"\" + errorPos;\r\n          return null;\r\n        } else {\r\n          instance.addExpression(varID, localExp);\r\n        }\r\n      }\r\n      else {\r\n        continue;\r\n      }\r\n    }\r\n\r\n    // UGUI\r\n\r\n    // 4\r\n    for (let i: number = 0; i < template.dataSource.triggerCount; i++) {\r\n      let triggerID: string = template.dataSource.getTriggerID(i);\r\n      let triggerPara: string[] = template.dataSource.getTriggerPara(triggerID);\r\n      if (!VE_Triggers.hasTrigger(triggerPara[0])) {\r\n        error_info.isRight = false;\r\n        error_info.message = \"\" + triggerID + \"\" + triggerPara[0] + \"\" + errorPos;\r\n        return null;\r\n      }\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let trigger: Nullable<VE_TriggerBehaviour> = VE_Triggers.createTrigger(instance, triggerID, triggerPara[0], triggerPara.slice(1), errorInfo);\r\n      if (!errorInfo.isRight || trigger === null) {\r\n        error_info.isRight = false;\r\n        error_info.message = \"\" + triggerID + \"\" + errorInfo + \"\" + errorPos;\r\n        return null;\r\n      } else {\r\n        // \r\n        if (trigger.className === \"Trigger_Custom\") {\r\n          VE_CustomTriggerManager.AddTriggerEvent(this._projectName, newObjectID, triggerID, (<Trigger_Custom>trigger).customEvent);\r\n        }\r\n        instance.addTrigger(triggerID, trigger);\r\n      }\r\n    }\r\n\r\n    // 5\r\n    for (let i: number = 0; i < template.dataSource.actionCount; i++) {\r\n      let actionID: string = template.dataSource.getActionID(i);\r\n      let actionPara: string[] = template.dataSource.getActionPara(actionID);\r\n      if (!VE_Actions.hasAction(actionPara[0])) {\r\n        error_info.isRight = false;\r\n        error_info.message = \"\" + actionID + \"\" + actionPara[0] + \"\" + errorPos;\r\n        return null;\r\n      }\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let action: Nullable<VE_ActionBehaviour> = VE_Actions.createAction(instance, actionID, actionPara[0], actionPara.slice(1), template.dataSource.getActionInitVal(actionID), errorInfo);\r\n      if (!errorInfo.isRight || action === null) {\r\n        error_info.isRight = false;\r\n        error_info.message = \"\" + actionID + \"\" + errorInfo + \"\" + errorPos;\r\n        return null;\r\n      }\r\n      instance.addAction(actionID, action);\r\n    }\r\n\r\n    // 6 +  + \r\n    for (let i: number = 0; i < template.dataSource.fsmCount; i++) {\r\n      let fsmID: string = template.dataSource.getFsmID(i);\r\n      let fsmData: VE_FsmData = template.dataSource.getFsmData(fsmID);\r\n      // \r\n      let fsm: VE_Fsm = instance.getFsm(fsmID);\r\n      // \r\n      for (let p: number = 0; p < fsmData.count; p++) {\r\n        let stateData: VE_StateData = fsmData.getStateData(p);\r\n        let state: VE_State = new VE_State(fsm, fsm.count + 1);\r\n        // \r\n        state.setConstValue(stateData.ValStr);\r\n\r\n        // // \r\n        // if (stateData.IsInitialValue) {\r\n        //   state.SetInitialValue(fsm.FsmVar.GetValue());\r\n        // }\r\n        // else {\r\n        //   //\r\n        //   if (!StateAssignment(this._projectName, newObjectID, fsmID, VE_Manager.Variables(this._projectName), instance, fsm, stateData, state, ref error_info)) {\r\n        //     error_info += errorPos;\r\n        //     return null;\r\n        //   }\r\n        // }\r\n\r\n        // \r\n        if (stateData.isSequence) {\r\n          state.setSequence();\r\n        }\r\n\r\n        // \r\n        if (stateData.logicalExp !== '') {\r\n          let errorInfo: ErrorInfo = new ErrorInfo();\r\n          let logicalExp: IExpression = VE_Expressions.createFsmExpression('', stateData.logicalExp, this._projectName, newObjectID, fsmID, errorInfo);\r\n          if (!errorInfo.isRight || logicalExp === null) {\r\n            error_info.isRight = false;\r\n            error_info.message = \"\" + stateData.logicalExp + \"\\n\" + errorInfo.message + \"\" + fsmID + \"\" + errorPos;\r\n            return null;\r\n          }\r\n          state.logicalAssociated = logicalExp;\r\n        }\r\n\r\n        // \r\n        for (let s: number = 0; s < stateData.triggerCount; s++) {\r\n          let triggerData: VE_StateTriggerData = stateData.getTrigger(s);\r\n          // \r\n          let trigger: Nullable<VE_TriggerBehaviour> = VE_Triggers.findTrigger(instance, triggerData.triggerID);\r\n          if (trigger === null) {\r\n            error_info.isRight = false;\r\n            error_info.message = \"ID\" + triggerData.triggerID + \"\" + fsmID + \"\" + errorPos;\r\n            return null;\r\n          }\r\n          // \r\n          let logicalExp: Nullable<IExpression> = null;\r\n          if (triggerData.logicalExp !== '') {\r\n            // \r\n            let errorInfo: ErrorInfo = new ErrorInfo();\r\n            logicalExp = VE_Expressions.createFsmExpression('', triggerData.logicalExp, this._projectName, newObjectID, fsmID, errorInfo);\r\n            if (!errorInfo.isRight || logicalExp === null) {\r\n              error_info.isRight = false;\r\n              error_info.message = \"\" + triggerData.logicalExp + \"\\n\" + errorInfo.message + \"\" + fsmID + \"\" + errorPos;\r\n              return null;\r\n            }\r\n          }\r\n          trigger.addTriggerTarget(logicalExp, state);\r\n\r\n          // \r\n          if (triggerData.logicalSwitch !== '') {\r\n            // \r\n            let errorInfo: ErrorInfo = new ErrorInfo();\r\n            let logicalSwitch: IExpression = VE_Expressions.createFsmExpression('', triggerData.logicalSwitch, this._projectName, newObjectID, fsmID, errorInfo);\r\n            if (logicalSwitch == null) {\r\n              error_info.isRight = false;\r\n              error_info.message = \"\" + triggerData.logicalSwitch + \"\\n\" + errorInfo.message + \"\" + fsmID + \"\" + errorPos;\r\n              return null;\r\n            }\r\n            trigger.addLogicalSwitch(logicalSwitch);\r\n          }\r\n        }\r\n        // \r\n        for (let s: number = 0; s < stateData.actionCount; s++) {\r\n          let actionData: VE_StateActionData = stateData.getAction(s);\r\n          // \r\n          if (actionData.type === StateActionType.Action) {\r\n            // \r\n            let action: Nullable<VE_ActionBehaviour> = VE_Actions.findAction(instance, actionData.actionID);\r\n            if (action === null) {\r\n              error_info.isRight = false;\r\n              error_info.message = \"ID\" + actionData.actionID + \"\" + fsmID + \"\" + errorPos;\r\n              return null;\r\n            }\r\n\r\n            // bool\r\n            // \r\n            let errorInfo: ErrorInfo = new ErrorInfo();\r\n            let enableVar: Nullable<IVeryVar> = null;\r\n            let enableStr: string = actionData.enabled.trim().toLowerCase();\r\n            if (enableStr === 'false' || enableStr === '') {\r\n              enableVar = new VeryBool();\r\n              enableVar.setValue(false);\r\n            } else if (enableStr === 'true' || enableStr === '') {\r\n              enableVar = new VeryBool();\r\n              enableVar.setValue(true);\r\n            } else {\r\n              // 1*2.*boolean\r\n              if (actionData.enabled.indexOf(StateConst.VARIABLE_SYMBOL) > -1) {\r\n                errorInfo.clear();\r\n                enableVar = VarTools.GetVeryVarWithExpression(this.projectName, newObjectID, actionData.enabled, errorInfo);\r\n                if (!errorInfo.isRight || enableVar === null) {\r\n                  error_info.isRight = false;\r\n                  error_info.message = \"\" + errorInfo.message + \"\" + errorPos;\r\n                  return null;\r\n                }\r\n                if (enableVar.varType !== 'bool') {\r\n                  error_info.isRight = false;\r\n                  error_info.message = \"bool\" + enableVar.varType + \"\" + errorPos;\r\n                  return null;\r\n                }\r\n              } else {\r\n                error_info.isRight = false;\r\n                error_info.message = \"/true/false*.*bool\" + actionData.enabled + \"\" + errorPos;\r\n                return null;\r\n              }\r\n            }\r\n\r\n            // \r\n            let everyFrameVar: Nullable<IVeryVar> = null;\r\n            let everyFrameStr: string = actionData.everyFrame.trim().toLowerCase();\r\n            if (everyFrameStr === 'false' || everyFrameStr === '') {\r\n              everyFrameVar = new VeryBool();\r\n              everyFrameVar.setValue(false);\r\n            } else if (everyFrameStr === 'true' || everyFrameStr === '') {\r\n              everyFrameVar = new VeryBool();\r\n              everyFrameVar.setValue(true);\r\n            } else {\r\n              // 1*2.*boolean\r\n              if (actionData.everyFrame.indexOf(StateConst.VARIABLE_SYMBOL) > -1) {\r\n                errorInfo.clear();\r\n                everyFrameVar = VarTools.GetVeryVarWithExpression(this.projectName, newObjectID, actionData.everyFrame, errorInfo);\r\n                if (!errorInfo.isRight || everyFrameVar === null) {\r\n                  error_info.isRight = false;\r\n                  error_info.message = \"\" + errorInfo.message + \"\" + errorPos;\r\n                  return null;\r\n                }\r\n                if (everyFrameVar.varType !== 'bool') {\r\n                  error_info.isRight = false;\r\n                  error_info.message = \"bool\" + everyFrameVar.varType + \"\" + errorPos;\r\n                  return null;\r\n                }\r\n              } else {\r\n                error_info.isRight = false;\r\n                error_info.message = \"/true/false*.*bool\" + actionData.everyFrame + \"\" + errorPos;\r\n                return null;\r\n              }\r\n            }\r\n\r\n            //\r\n            let isSequenceStr: string = actionData.isSequence.trim().toLowerCase();\r\n            let isSequence: boolean = false;\r\n            if (isSequenceStr === 'false' || isSequenceStr === '') {\r\n              isSequence = false;\r\n            } else if (isSequenceStr === 'true' || isSequenceStr === '') {\r\n              isSequence = true;\r\n            } else {\r\n              error_info.isRight = false;\r\n              error_info.message = \"/false/true\" + actionData.everyFrame + \"\" + errorPos;\r\n              return null;\r\n            }\r\n\r\n            // \r\n            let stateAction: VE_StateAction = new VE_StateAction();\r\n            stateAction.setAction(action, enableVar, everyFrameVar, isSequence);\r\n            state.addAction(stateAction);\r\n          }\r\n\r\n          // \r\n          else {\r\n            // \r\n            if (!this.assignmentAction(this._projectName, newObjectID, fsmID, VE_Manager.variables(this._projectName), instance, actionData, state, error_info)) {\r\n              error_info.message += errorPos;\r\n              return null;\r\n            }\r\n          }\r\n        }\r\n\r\n        /* \r\n        // \r\n        if (fsm.isCreatedState(stateData.StateIndex)) {\r\n          error_info = \"ID\" + fsmID + \"\" + stateData.ValStr + \"\";\r\n          return null;\r\n        }\r\n        else {\r\n          fsm.addState(state, stateData.stateIndex);\r\n        }\r\n        */\r\n\r\n      }\r\n    }\r\n\r\n    // 7\r\n    for (let i: number = 0; i < template.dataSource.fsmCount; i++) {\r\n      let fsmID: string = template.dataSource.getFsmID(i);\r\n      let fsmData: VE_FsmData = template.dataSource.getFsmData(fsmID);\r\n      // \r\n      let fsm: VE_Fsm = instance.getFsm(fsmID);\r\n      // \r\n      for (let p: number = 0; p < fsmData.count; p++) {\r\n        let stateData: VE_StateData = fsmData.getStateData(p);\r\n        let state: Nullable<VE_State> = fsm.getStateInSequence(p);\r\n\r\n        // \r\n        for (let s: number = 0; s < stateData.associatedStateCount; s++) {\r\n          let associatedStateInfo: string = stateData.getAssociatedState(s);\r\n          let associatedState: VE_AssociatedState = new VE_AssociatedState(state!);\r\n          let multipleAssociatedState: string[] = associatedStateInfo.split(/,|/);\r\n\r\n          for (let www: number = 0; www < multipleAssociatedState.length; www++) {\r\n            associatedStateInfo = multipleAssociatedState[www].trim();\r\n\r\n            let stateValue: string = StateConst.STATE_VALUE;\r\n\r\n            let strArray: string[] = associatedStateInfo.split('=');\r\n            if (strArray.length === 1) {\r\n            }\r\n            else if (strArray.length === 2) {\r\n              stateValue = strArray[1].trim();\r\n            }\r\n            else {\r\n              error_info.isRight = false;\r\n              error_info.message = \" = \" + errorPos;\r\n              return null;\r\n            }\r\n\r\n            // 1. \r\n            // 2. .\r\n            // 3. *.\r\n            // 4. .*.\r\n\r\n            let aFsmID: string = strArray[0].trim();\r\n            if (aFsmID.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n              let stateArray: string[] = aFsmID.split(StateConst.STATE_SEPARATOR[0]);\r\n              for (let q: number = 0; q < stateArray.length; q++) {\r\n                stateArray[q] = stateArray[q].trim();\r\n              }\r\n              // .*.\r\n              if (stateArray.length === 3) {\r\n                if (objects.isCreated(stateArray[0])) {\r\n                  let aObject: VeryEngineObject = objects.getVeryObject(stateArray[0]);\r\n                  if (stateArray[1].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n                    let varID: string = stateArray[1].substring(1);\r\n                    if (aObject.isCreatedTemplate(varID)) {\r\n                      let aTemplate: VE_Template = aObject.getTemplate(varID);\r\n                      if (aTemplate.dataSource.isCreatedFsm(stateArray[2])) {\r\n                        associatedState.addTemplate(aTemplate, stateArray[2], stateValue, errorPos);\r\n                        //VE_AssociatedState associatedState = new VE_AssociatedState(state, aTemplate, stateArray[2], stateIndex);\r\n                        //state.AddAssociatedState(associatedState);\r\n                      }\r\n                      else {\r\n                        error_info.isRight = false;\r\n                        error_info.message = \".*.\" + fsmID + \"\" + associatedStateInfo + \"\" + errorPos;\r\n                        return null;\r\n                      }\r\n                    }\r\n                    else {\r\n                      error_info.isRight = false;\r\n                      error_info.message = \".*.\" + fsmID + \"\" + associatedStateInfo + \"\" + errorPos;\r\n                      return null;\r\n                    }\r\n                  }\r\n                  else {\r\n                    error_info.isRight = false;\r\n                    error_info.message = \".*.\" + fsmID + \"\" + associatedStateInfo + \"\" + errorPos;\r\n                    return null;\r\n                  }\r\n                }\r\n                else {\r\n                  error_info.isRight = false;\r\n                  error_info.message = \".*.\" + fsmID + \"\" + associatedStateInfo + \"\" + errorPos;\r\n                  return null;\r\n                }\r\n\r\n                error_info.isRight = false;\r\n                error_info.message = \"12.3*.4.*.\" + fsmID + \"\" + associatedStateInfo + \"\" + errorPos;\r\n                return null;\r\n              }\r\n              else if (stateArray.length === 2) {\r\n                let aObjectID: string = stateArray[0].trim();\r\n                aFsmID = stateArray[1].trim();\r\n                // *.\r\n                if (aObjectID.startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n                  aObjectID = aObjectID.substring(1);\r\n                  if (instance.isCreatedTemplate(aObjectID)) {\r\n                    let aTemplate: VE_Template = instance.getTemplate(aObjectID);\r\n                    if (aTemplate.dataSource.isCreatedFsm(stateArray[1])) {\r\n                      associatedState.addTemplate(aTemplate, stateArray[1], stateValue, errorPos);\r\n                      //VE_AssociatedState associatedState = new VE_AssociatedState(state, aTemplate, stateArray[1], stateIndex);\r\n                      //state.AddAssociatedState(associatedState);\r\n                    }\r\n                    else {\r\n                      error_info.isRight = false;\r\n                      error_info.message = \"*.\" + fsmID + \"\" + associatedStateInfo + \"\" + errorPos;\r\n                      return null;\r\n                    }\r\n                  }\r\n                  else {\r\n                    let globalVars: VE_Variables = VE_Manager.variables(this._projectName);\r\n                    if (globalVars.isCreatedTemplate(aObjectID)) {\r\n                      let aTemplate: VE_Template = globalVars.getTemplate(aObjectID);\r\n                      if (aTemplate.dataSource.isCreatedFsm(stateArray[1])) {\r\n                        associatedState.addTemplate(aTemplate, stateArray[1], stateValue, errorPos);\r\n                        //VE_AssociatedState associatedState = new VE_AssociatedState(state, aTemplate, stateArray[1], stateIndex);\r\n                        //state.AddAssociatedState(associatedState);\r\n                      }\r\n                      else {\r\n                        error_info.isRight = false;\r\n                        error_info.message = \"*.\" + fsmID + \"\" + associatedStateInfo + \"\" + errorPos;\r\n                        return null;\r\n                      }\r\n                    }\r\n                    else {\r\n                      error_info.isRight = false;\r\n                      error_info.message = \"*.*\" + fsmID + \"\" + associatedStateInfo + \"\" + errorPos;\r\n                      return null;\r\n                    }\r\n                  }\r\n                }\r\n                // .\r\n                else {\r\n                  let aObject: VeryEngineObject = objects.getVeryObject(aObjectID);\r\n                  if (aObject === null) {\r\n                    error_info.isRight = false;\r\n                    error_info.message = \".\" + fsmID + \"\" + associatedStateInfo + \"\" + errorPos;\r\n                    return null;\r\n                  }\r\n                  let aFsm: VE_Fsm = aObject.getFsm(aFsmID);\r\n                  if (aFsm === null) {\r\n                    error_info.isRight = false;\r\n                    error_info.message = \".\" + fsmID + \"\" + associatedStateInfo + \"\" + errorPos;\r\n                    return null;\r\n                  }\r\n                  let toState: Nullable<VE_State> = aFsm.getState(stateValue);\r\n                  if (toState === null) {\r\n                    error_info.isRight = false;\r\n                    error_info.message = \".\" + fsmID + \"\" + associatedStateInfo + \"\" + errorPos;\r\n                    return null;\r\n                  }\r\n                  associatedState.add(toState, stateValue, errorPos);\r\n                  //VE_AssociatedState associatedState = new VE_AssociatedState(state, toState);\r\n                  //state.AddAssociatedState(associatedState);\r\n                }\r\n              }\r\n              else {\r\n                error_info.isRight = false;\r\n                error_info.message = \"12.3*.4.*.\" + fsmID + \"\" + associatedStateInfo + \"\" + errorPos;\r\n                return null;\r\n              }\r\n            }\r\n            // \r\n            else {\r\n              let aFsm: VE_Fsm = instance.getFsm(aFsmID);\r\n              if (aFsm === null) {\r\n                error_info.isRight = false;\r\n                error_info.message = \"\" + fsmID + \"\" + associatedStateInfo + \"\" + errorPos;\r\n                return null;\r\n              }\r\n              let toState: Nullable<VE_State> = aFsm.getState(stateValue);\r\n              if (toState === null) {\r\n                error_info.isRight = false;\r\n                error_info.message = \"\" + fsmID + \"\" + associatedStateInfo + \"\" + errorPos;\r\n                return null;\r\n              }\r\n              associatedState.add(toState, stateValue, errorPos);\r\n              //VE_AssociatedState associatedState = new VE_AssociatedState(state, toState);\r\n              //state.AddAssociatedState(associatedState);\r\n            }\r\n          }\r\n\r\n          state!.addAssociatedState(associatedState);\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n    return template;\r\n  }\r\n\r\n  private assignmentAction(project_name: string, object_id: string, fsm_id: string, global_vars: VE_Variables, very_object: VeryEngineObject, action_data: VE_StateActionData, state: VE_State, error_info: ErrorInfo): boolean {\r\n    // \r\n    let assignment: VE_Assignment = new VE_Assignment(state, action_data.totalString);\r\n    let varID: string = action_data.varID;\r\n    // Debug.LogWarning(\"\" + action_data.TotalString);\r\n    // 1 1*2.*3*.*4.*.*\r\n    if (varID.indexOf(StateConst.VARIABLE_SYMBOL) > -1)  // \r\n    {\r\n      if (varID.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n        let valArray: string[] = varID.split(StateConst.STATE_SEPARATOR);\r\n        for (let q: number = 0; q < valArray.length; q++) {\r\n          valArray[q] = valArray[q].trim();\r\n        }\r\n        // .* or *.*\r\n        if (valArray.length === 2) {\r\n          // *.*\r\n          if (valArray[0].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n            let templateVarID: string = valArray[0].substring(1);\r\n            varID = valArray[1].substring(1);\r\n            if (very_object.isCreatedTemplate(templateVarID)) {\r\n              let template: VE_Template = very_object.getTemplate(templateVarID);\r\n              if (template.varData.isCreatedVariable(varID)) {\r\n                let varPara: string[] = template.varData.getVariableParas(varID);\r\n                if (varPara[1].toLowerCase() === \"expression\" || varPara[1].toLowerCase() === \"\") {\r\n                  error_info.isRight = false;\r\n                  error_info.message = \"*.*\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n                  return false;\r\n                }\r\n                else {\r\n                  assignment.setLeftTemplateVar(template, varID);\r\n                }\r\n              }\r\n              else if (template.dataSource.isCreatedFsm(varID)) {\r\n                assignment.setLeftTemplateVar(template, varID);\r\n              }\r\n              else {\r\n                error_info.isRight = false;\r\n                error_info.message = \"*.***\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n                return false;\r\n              }\r\n            }\r\n            else {\r\n              if (global_vars.isCreatedTemplate(templateVarID)) {\r\n                let template: VE_Template = global_vars.getTemplate(templateVarID);\r\n                if (template.varData.isCreatedVariable(varID)) {\r\n                  let varPara: string[] = template.varData.getVariableParas(varID);\r\n                  if (varPara[1].toLowerCase() === \"expression\" || varPara[1].toLowerCase() === \"\") {\r\n                    error_info.isRight = false;\r\n                    error_info.message = \"*.*\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n                    return false;\r\n                  }\r\n                  else {\r\n                    assignment.setLeftTemplateVar(template, varID);\r\n                  }\r\n                }\r\n                else if (template.dataSource.isCreatedFsm(varID)) {\r\n                  assignment.setLeftTemplateVar(template, varID);\r\n                }\r\n                else {\r\n                  error_info.isRight = false;\r\n                  error_info.message = \"*.**\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                error_info.isRight = false;\r\n                error_info.message = \"*.***\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          //.*\r\n          else {\r\n            let objects: VE_Objects = VE_Manager.objects(project_name);\r\n            if (objects.isCreated(valArray[0])) {\r\n              let aObject: VeryEngineObject = objects.getVeryObject(valArray[0]);\r\n              varID = varID.substring(1);\r\n              if (aObject.isCreatedExpression(varID)) {\r\n                error_info.isRight = false;\r\n                error_info.message = \".*\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n                return false;\r\n              }\r\n              else if (aObject.isCreatedFsm(varID)) {\r\n                let v: IVeryVar = aObject.getFsm(varID).fsmVar;\r\n                assignment.setLeftVariable(v);\r\n              }\r\n              else if (aObject.isCreatedVariable(varID)) {\r\n                let v: IVeryVar = aObject.getVariable(varID);\r\n                assignment.setLeftVariable(v);\r\n              }\r\n              else if (aObject.isCreatedTemplate(varID)) {\r\n                let template: VE_Template = aObject.getTemplate(varID);\r\n                assignment.setLeftTemplate(template);\r\n              }\r\n              else {\r\n                error_info.isRight = false;\r\n                error_info.message = \".*\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n                return false;\r\n              }\r\n            }\r\n            else {\r\n              error_info.isRight = false;\r\n              error_info.message = \".*\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        else if (valArray.length === 3)  // .*.*\r\n        {\r\n          // .*.*\r\n          if (valArray[0].startsWith(StateConst.STATE_SEPARATOR) || !valArray[1].startsWith(StateConst.STATE_SEPARATOR) || !valArray[2].startsWith(StateConst.STATE_SEPARATOR)) {\r\n            error_info.isRight = false;\r\n            error_info.message = \"1*2.*3*.*4.*.*\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n            return false;\r\n          }\r\n          else {\r\n            let templateVarID: string = valArray[1].substring(1);\r\n            varID = valArray[2].substring(1);\r\n            let objects: VE_Objects = VE_Manager.objects(project_name);\r\n            if (objects.isCreated(valArray[0])) {\r\n              let tObject: VeryEngineObject = objects.getVeryObject(valArray[0]);\r\n              if (tObject.isCreatedTemplate(templateVarID)) {\r\n                let template: VE_Template = tObject.getTemplate(templateVarID);\r\n                if (template.dataSource.isCreatedFsm(varID)) {\r\n                  assignment.setLeftTemplateVar(template, varID);\r\n                }\r\n                else if (template.varData.isCreatedVariable(varID)) {\r\n                  let varParas: string[] = template.varData.getVariableParas(varID);\r\n                  if (varParas[1].toLowerCase() === \"expression\" || varParas[1].toLowerCase() === \"\") {\r\n                    error_info.isRight = false;\r\n                    error_info.message = \".*.*.*.*\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n                    return false;\r\n                  }\r\n                  else {\r\n                    assignment.setLeftTemplateVar(template, varID);\r\n                  }\r\n                }\r\n                else {\r\n                  error_info.isRight = false;\r\n                  error_info.message = \".*.*.**\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                error_info.isRight = false;\r\n                error_info.message = \".*.**\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n                return false;\r\n              }\r\n            }\r\n            else {\r\n              error_info.isRight = false;\r\n              error_info.message = \".*.*\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          error_info.isRight = false;\r\n          error_info.message = \"1*2.*3*.*4.*.*\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n          return false;\r\n        }\r\n      }\r\n      else // *\r\n      {\r\n        varID = varID.substring(1);\r\n        if (very_object.isCreatedExpression(varID)) {\r\n          error_info.isRight = false;\r\n          error_info.message = \"*\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n          return false;\r\n        }\r\n        else if (very_object.isCreatedFsm(varID)) {\r\n          let v: IVeryVar = very_object.getFsm(varID).fsmVar;\r\n          assignment.setLeftVariable(v);\r\n        }\r\n        else if (very_object.isCreatedVariable(varID)) {\r\n          let v: IVeryVar = very_object.getVariable(varID);\r\n          assignment.setLeftVariable(v);\r\n        }\r\n        else if (very_object.isCreatedTemplate(varID)) {\r\n          let template: VE_Template = very_object.getTemplate(varID);\r\n          assignment.setLeftTemplate(template);\r\n        }\r\n        else {\r\n          // \r\n          if (global_vars.isCreatedExpression(varID)) {\r\n            error_info.isRight = false;\r\n            error_info.message = \"*\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n            return false;\r\n          }\r\n          else if (global_vars.isCreatedVariable(varID)) {\r\n            let v: IVeryVar = global_vars.getVariable(varID);\r\n            assignment.setLeftVariable(v);\r\n          }\r\n          else if (global_vars.isCreatedTemplate(varID)) {\r\n            let template: VE_Template = global_vars.getTemplate(varID);\r\n            assignment.setLeftTemplate(template);\r\n          }\r\n          else {\r\n            // \r\n            // if (VerySceneVariables.Variables.isCreatedExpression(varID)) {\r\n            //   VE_ErrorManager.Add(VE_Error.Error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.TotalString + \"*\", \"\"));\r\n            //   return false;\r\n            // }\r\n            // else if (VerySceneVariables.Variables.IsCreatedVariable(varID)) {\r\n            //   IVeryVar v = VerySceneVariables.Variables.GetVariable(varID);\r\n            //   assignment.SetLeft(v);\r\n            // }\r\n            // else {\r\n            //   VE_ErrorManager.Add(VE_Error.Error(\"\", \"\" + project_name + \"\" + object_id + \"\" + fsm_id + \"\" + action_data.TotalString + \"*\", \"\"));\r\n            //   return false;\r\n            // }\r\n            error_info.isRight = false;\r\n            error_info.message = \"*\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      error_info.isRight = false;\r\n      error_info.message = \"\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n      return false;\r\n    }\r\n\r\n\r\n    // 2 1*2.*3*.*4.*.*5\r\n    varID = action_data.varValue.trim();\r\n\r\n    // \r\n    if (varID.startsWith(\"\\\"\") || varID.startsWith(\"'\") || varID.startsWith(\"\") || varID.startsWith(\"\")) {\r\n      assignment.setRightConst(varID.substring(1, varID.length - 2).trim());\r\n    }\r\n    else if (VE_StringFormat.isFormulaString(varID))  // \r\n    {\r\n      // Debug.LogError(varID);\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      StateConst.AssignmentFormulaCount++;\r\n      let localExp: IExpression = VE_Expressions.createLocalExpression(StateConst.AssignmentPrefix + StateConst.AssignmentFormulaCount.toString(), varID, project_name, object_id, errorInfo);\r\n      if (!errorInfo.isRight || localExp === null) {\r\n        // errorInfo = \"\\n\" + errorInfo + \"\" + errorPos;\r\n        // return null;\r\n        error_info.isRight = false;\r\n        error_info.message = \"\" + errorInfo.message;\r\n        return false;\r\n      }\r\n      assignment.setRightVariable(new VeryExpression(localExp));\r\n    }\r\n    else {\r\n      if (varID.indexOf(StateConst.VARIABLE_SYMBOL) > -1)  // \r\n      {\r\n        if (varID.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n          let valArray: string[] = varID.split(StateConst.STATE_SEPARATOR);\r\n          for (let q: number = 0; q < valArray.length; q++) {\r\n            valArray[q] = valArray[q].trim();\r\n          }\r\n          // .* or *.*\r\n          if (valArray.length === 2) {\r\n            // *.*\r\n            if (valArray[0].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n              let templateVarID: string = valArray[0].substring(1);\r\n              varID = valArray[1].substring(1);\r\n              if (very_object.isCreatedTemplate(templateVarID)) {\r\n                let template: VE_Template = very_object.getTemplate(templateVarID);\r\n                if (template.varData.isCreatedVariable(varID) || template.dataSource.isCreatedFsm(varID)) {\r\n                  // \r\n                  assignment.setRightTemplateVariable(template, varID);\r\n                }\r\n                else {\r\n                  error_info.isRight = false;\r\n                  error_info.message = \"*.***\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                if (global_vars.isCreatedTemplate(templateVarID)) {\r\n                  let template: VE_Template = global_vars.getTemplate(templateVarID);\r\n                  if (template.varData.isCreatedVariable(varID) || template.dataSource.isCreatedFsm(varID)) {\r\n                    // \r\n                    assignment.setRightTemplateVariable(template, varID);\r\n                  }\r\n                  else {\r\n                    error_info.isRight = false;\r\n                    error_info.message = \"*.***\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n                    return false;\r\n                  }\r\n                }\r\n                else {\r\n                  error_info.isRight = false;\r\n                  error_info.message = \"*.**\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n                  return false;\r\n                }\r\n              }\r\n            }\r\n            // .*\r\n            else {\r\n              let objects: VE_Objects = VE_Manager.objects(project_name);\r\n              if (objects.isCreated(valArray[0])) {\r\n                let aObject: VeryEngineObject = objects.getVeryObject(valArray[0]);\r\n                varID = varID.substring(1);\r\n                let rightVar: Nullable<IVeryVar> = null;\r\n                let rightTemplate: Nullable<VE_Template> = null;\r\n                if (aObject.isCreatedExpression(varID)) {\r\n                  rightVar = new VeryExpression(aObject.getExpression(varID));\r\n                }\r\n                else if (aObject.isCreatedFsm(varID)) {\r\n                  rightVar = aObject.getFsm(varID).fsmVar;\r\n                }\r\n                else if (aObject.isCreatedVariable(varID)) {\r\n                  rightVar = aObject.getVariable(varID);\r\n                }\r\n                else if (aObject.isCreatedTemplate(varID)) {\r\n                  rightTemplate = aObject.getTemplate(varID);\r\n                }\r\n                else {\r\n                  error_info.isRight = false;\r\n                  error_info.message = \".*\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n                  return false;\r\n                }\r\n                // \r\n                if (rightVar !== null) {\r\n                  if (assignment.leftType === AssignType.Template) {\r\n                    error_info.isRight = false;\r\n                    error_info.message = \"\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n                    return false;\r\n                  }\r\n                  else if (assignment.leftType === AssignType.Variable) {\r\n                    if (VE_AssignmentTypeJudge.allow(assignment.leftVariable!, rightVar)) {\r\n                      assignment.setRightVariable(rightVar);\r\n                    }\r\n                    else {\r\n                      error_info.isRight = false;\r\n                      error_info.message = \".*\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n                      return false;\r\n                    }\r\n                  }\r\n                  else {\r\n                    // \r\n                    assignment.setRightVariable(rightVar);\r\n                  }\r\n                }\r\n                else if (rightTemplate != null) {\r\n                  if (assignment.leftType === AssignType.Template) {\r\n                    assignment.setRightTemplate(rightTemplate);\r\n                  }\r\n                  else {\r\n                    error_info.isRight = false;\r\n                    error_info.message = \"\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n                    return false;\r\n                  }\r\n                }\r\n                else {\r\n                  error_info.isRight = false;\r\n                  error_info.message = \".*\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                error_info.isRight = false;\r\n                error_info.message = \".*\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          else if (valArray.length === 3)  // .*.*\r\n          {\r\n            // .*.*\r\n            if (valArray[0].startsWith(StateConst.STATE_SEPARATOR) || !valArray[1].startsWith(StateConst.STATE_SEPARATOR) || !valArray[2].startsWith(StateConst.STATE_SEPARATOR)) {\r\n              error_info.isRight = false;\r\n              error_info.message = \"1*2.*3*.*4.*.*\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n              return false;\r\n            }\r\n            else {\r\n              let templateVarID: string = valArray[1].substring(1);\r\n              varID = valArray[2].substring(1);\r\n              let objects: VE_Objects = VE_Manager.objects(project_name);\r\n              if (objects.isCreated(valArray[0])) {\r\n                let tObject: VeryEngineObject = objects.getVeryObject(valArray[0]);\r\n                if (tObject.isCreatedTemplate(templateVarID)) {\r\n                  let template: VE_Template = tObject.getTemplate(templateVarID);\r\n                  // \r\n                  if (template.dataSource.isCreatedFsm(varID) || template.varData.isCreatedVariable(varID)) {\r\n                    // \r\n                    assignment.setRightTemplateVariable(template, varID);\r\n                  }\r\n                  else {\r\n                    error_info.isRight = false;\r\n                    error_info.message = \".*.*.**\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n                    return false;\r\n                  }\r\n                }\r\n                else {\r\n                  error_info.isRight = false;\r\n                  error_info.message = \".*.**\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n                  return false;\r\n                }\r\n              }\r\n              else {\r\n                error_info.isRight = false;\r\n                error_info.message = \".*.*\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          else {\r\n            error_info.isRight = false;\r\n            error_info.message = \"1*2.*3*.*4.*.*\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n            return false;\r\n          }\r\n        }\r\n        else // *\r\n        {\r\n          varID = varID.substring(1);\r\n          let rightVar: Nullable<IVeryVar> = null;\r\n          let rightTemplate: Nullable<VE_Template> = null;\r\n          if (very_object.isCreatedExpression(varID)) {\r\n            rightVar = new VeryExpression(very_object.getExpression(varID));\r\n          }\r\n          else if (very_object.isCreatedFsm(varID)) {\r\n            rightVar = very_object.getFsm(varID).fsmVar;\r\n          }\r\n          else if (very_object.isCreatedVariable(varID)) {\r\n            rightVar = very_object.getVariable(varID);\r\n          }\r\n          else if (very_object.isCreatedTemplate(varID)) {\r\n            rightTemplate = very_object.getTemplate(varID);\r\n          }\r\n          else {\r\n            // \r\n            if (global_vars.isCreatedExpression(varID)) {\r\n              rightVar = new VeryExpression(global_vars.getExpression(varID));\r\n            }\r\n            else if (global_vars.isCreatedVariable(varID)) {\r\n              rightVar = global_vars.getVariable(varID);\r\n            }\r\n            else if (global_vars.isCreatedTemplate(varID)) {\r\n              rightTemplate = global_vars.getTemplate(varID);\r\n            }\r\n            else {\r\n              //\r\n              if (VerySceneVariables.Variables.isCreatedExpression(varID)) {\r\n                rightVar = new VeryExpression(VerySceneVariables.Variables.getExpression(varID));\r\n              }\r\n              else if (VerySceneVariables.Variables.isCreatedVariable(varID)) {\r\n                rightVar = VerySceneVariables.Variables.getVariable(varID);\r\n              }\r\n              else {\r\n                error_info.isRight = false;\r\n                error_info.message = \"*\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          // \r\n          if (rightVar != null) {\r\n            if (assignment.leftType === AssignType.Template) {\r\n              error_info.isRight = false;\r\n              error_info.message = \"*\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n              return false;\r\n            }\r\n            else if (assignment.leftType === AssignType.Variable) {\r\n              if (VE_AssignmentTypeJudge.allow(assignment.leftVariable!, rightVar)) {\r\n                assignment.setRightVariable(rightVar);\r\n              }\r\n              else {\r\n                error_info.isRight = false;\r\n                error_info.message = \"*\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n                return false;\r\n              }\r\n            }\r\n            else {\r\n              // \r\n              assignment.setRightVariable(rightVar);\r\n            }\r\n          }\r\n          else if (rightTemplate != null) {\r\n            if (assignment.leftType === AssignType.Template) {\r\n              assignment.setRightTemplate(rightTemplate);\r\n            }\r\n            else {\r\n              error_info.isRight = false;\r\n              error_info.message = \"*\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n              return false;\r\n            }\r\n          }\r\n          else {\r\n            error_info.isRight = false;\r\n            error_info.message = \"*\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n      else  // \r\n      {\r\n        if (assignment.leftType === AssignType.Template) {\r\n          if (varID.trim().toLowerCase() === \"null\") {\r\n            assignment.setRightNull();\r\n          }\r\n          else {\r\n            error_info.isRight = false;\r\n            error_info.message = \"null\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n            return false;\r\n          }\r\n        }\r\n        else if (assignment.leftType === AssignType.TemplateVariable) {\r\n          assignment.setRightConst(varID);\r\n        }\r\n        else {\r\n          if (assignment.leftVariable !== null) {\r\n            let errorInfo: ErrorInfo = new ErrorInfo();\r\n            let newValue: any = assignment.leftVariable.initValue(varID, errorInfo);\r\n            if (!errorInfo.isRight || newValue === null) {\r\n              error_info.isRight = false;\r\n              error_info.message = \"\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n              return false;\r\n            }\r\n            else {\r\n              assignment.setRightConstValue(newValue);\r\n            }\r\n          }\r\n          else {\r\n            error_info.isRight = false;\r\n            error_info.message = \"\" + fsm_id + \"\" + action_data.totalString + \"\";\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    let stateAction: VE_StateAction = new VE_StateAction();\r\n    stateAction.setAssignment(assignment);\r\n    state.addAction(stateAction);\r\n    return true;\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n}","export class VE_CustomTriggerManager {\r\n\r\n  //  \r\n  private static _customTriggerStore: { [key: string]: { [key: string]: { [key: string]: () => void } } } = {};\r\n\r\n  //\r\n  private static _delayAction: { [key: string]: { [key: string]: { [key: string]: ((callback: () => void) => void)[] } } } = {};\r\n\r\n  public static AddTriggerEvent(project_name: string, object_id: string, trigger_id: string, timer_event: () => void): void {\r\n    if (!this._customTriggerStore[project_name]) {\r\n      this._customTriggerStore[project_name] = {};\r\n    }\r\n    if (!this._customTriggerStore[project_name][object_id]) {\r\n      this._customTriggerStore[project_name][object_id] = {};\r\n    }\r\n    this._customTriggerStore[project_name][object_id][trigger_id] = timer_event;\r\n    // \r\n    if (this._delayAction[project_name] && this._delayAction[project_name][object_id] && this._delayAction[project_name][object_id][trigger_id]) {\r\n      this._delayAction[project_name][object_id][trigger_id].forEach(value => {\r\n        value(timer_event);\r\n      });\r\n      delete this._delayAction[project_name][object_id][trigger_id];\r\n    }\r\n  }\r\n\r\n  // delay\r\n  public static ConnectCustomTrigger(project_name: string, object_id: string, trigger_id: string, set_callback: (callback: () => void) => void): void {\r\n    if (this._customTriggerStore[project_name] && this._customTriggerStore[project_name][object_id] && this._customTriggerStore[project_name][object_id][trigger_id]) {\r\n      set_callback(this._customTriggerStore[project_name][object_id][trigger_id]);\r\n    } else {\r\n      if (!this._delayAction[project_name]) {\r\n        this._delayAction[project_name] = {};\r\n      }\r\n      if (!this._delayAction[project_name][object_id]) {\r\n        this._delayAction[project_name][object_id] = {};\r\n      }\r\n      if (!this._delayAction[project_name][object_id][trigger_id]) {\r\n        this._delayAction[project_name][object_id][trigger_id] = [set_callback];\r\n      } else {\r\n        this._delayAction[project_name][object_id][trigger_id].push(set_callback);\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n}","export * from './triggerBehaviour';\r\nexport * from './triggers';\r\nexport * from './customTriggerManager';","import { VE_State } from \"../state/state\";\r\nimport { StateConst } from \"../state/stateConst\";\r\nimport { IExpression } from \"../expression\";\r\nimport { VeryEngineObject } from \"../object\";\r\nimport { GameObject } from \"../babylon\";\r\n\r\nexport abstract class VE_TriggerBehaviour {\r\n\r\n  /**\r\n   * IDIDID|\r\n   */\r\n  public abstract get ID(): string;\r\n\r\n  /**\r\n   * \r\n   */\r\n  public abstract get className(): string;\r\n\r\n  /**\r\n   * \r\n   */\r\n  public get scene(): BABYLON.Scene {\r\n    return this._scene;\r\n  }\r\n  public _scene!: BABYLON.Scene;\r\n\r\n  /**\r\n   * \r\n   */\r\n  public get enabled(): boolean {\r\n    return this._enabled && this.isEnabled;\r\n  }\r\n  public set enabled(val: boolean) {\r\n    this._enabled = val;\r\n  }\r\n  private _enabled: boolean = true;\r\n\r\n  /**\r\n   * \r\n   */\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  /**\r\n   * \r\n   */\r\n  public get isEnabled(): boolean {\r\n    if (this._logicalSwitch) {\r\n      for (let i: number = 0; i < this._logicalSwitch.length; i++) {\r\n        if (this._logicalSwitch[i] && !this._logicalSwitch[i].evaluate()) {\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // Logical\r\n  private _logicalSwitch: IExpression[] = [];\r\n  private _logicalExp: Nullable<IExpression>[] = [];\r\n  // State\r\n  private _triggerTargets: VE_State[] = [];\r\n\r\n  protected gameObject: Nullable<GameObject> = null;\r\n\r\n  /**\r\n   * \r\n   */\r\n  protected veryObject: Nullable<VeryEngineObject> = null;\r\n\r\n  /**\r\n   * \r\n   */\r\n  public get objectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = 'object-axxx';\r\n\r\n  /**\r\n   * \r\n   */\r\n  public get triggerID(): string {\r\n    return this._triggerID;\r\n  }\r\n  private _triggerID: string = '';\r\n\r\n  /**\r\n   * .\r\n   */\r\n  public get unionID(): string {\r\n    return this._id;\r\n  }\r\n  private _id: string = '';\r\n\r\n  /**\r\n   * \r\n   * @param scene \r\n   */\r\n  public set(scene: BABYLON.Scene): void {\r\n    this._scene = scene;\r\n  }\r\n\r\n  public setTriggerID(project_name: string, trigger_id: string, object_id: string): void {\r\n    this._projectName = project_name;\r\n    this._triggerID = trigger_id;\r\n    this._objectID = object_id;\r\n    this._id = object_id + StateConst.STATE_SEPARATOR + trigger_id;\r\n  }\r\n\r\n  public addLogicalSwitch(exp: IExpression): void {\r\n    this._logicalSwitch.push(exp);\r\n  }\r\n\r\n  public addTriggerTarget(exp: Nullable<IExpression>, state: VE_State): void {\r\n    this._logicalExp.push(exp);\r\n    this._triggerTargets.push(state);\r\n  }\r\n\r\n  public setVeryObject(very_object: VeryEngineObject): void {\r\n    this.veryObject = very_object;\r\n    this.gameObject = very_object.gameObject;\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public sendEvent(): void {\r\n    if(this.isEnabled) {\r\n      this.eventProcess();\r\n    }\r\n  }\r\n\r\n  // \r\n  private eventProcess(): void {\r\n    if (this._triggerTargets) {\r\n      // console.log(`ID: ${this.triggerID} --- Count: ${this._triggerTargets.length}`);\r\n      for (let i: number = 0; i < this._triggerTargets.length; i++) {\r\n        if (this._logicalExp[i] === null || this._logicalExp[i]!.evaluate()) {\r\n          this._triggerTargets[i].action(this._id);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param para_array 1ID2\r\n   */\r\n  public abstract paraParser(para_array: string[]): boolean;\r\n\r\n  /**\r\n   * UnityUpdateupdate  \r\n   */\r\n  public update(): void {\r\n    if (this.isEnabled) {\r\n      this.onUpdate();\r\n    }\r\n  }\r\n\r\n  /**\r\n   *   \r\n   */\r\n  public onUpdate(): void {\r\n\r\n  }\r\n\r\n  /**\r\n   * callbackdestroy\r\n   */\r\n  public abstract destroy(): void;\r\n\r\n\r\n}","import { VE_TriggerBehaviour } from \"./triggerBehaviour\";\r\nimport { VeryEngineObject, VE_Objects } from \"../object\";\r\nimport { StateConst } from \"../state\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { GameGlobal, VE_ErrorManager, VE_Error } from \"../global\";\r\nimport { ErrorInfo } from \"../utility\";\r\nimport { BabylonEngine } from \"../babylon\";\r\nimport { Severity } from \"../enum\";\r\n\r\nexport class VE_Triggers {\r\n\r\n  // private static _triggerDics: { [key: string]: VE_TriggerBehaviour } = {};\r\n\r\n  private static _triggerFunctionDics: { [key: string]: Function } = {};\r\n\r\n  // public static addTrigger(trigger: VE_TriggerBehaviour): void {\r\n  //   // \r\n  //   if (!GameGlobal.PlatformLoaded) {\r\n  //     let ids: string[] = trigger.ID.split('|');\r\n  //     for (let i: number = 0; i < ids.length; i++) {\r\n  //       let id: string = ids[i].trim().toLowerCase();\r\n  //       if (this._triggerDics[id]) {\r\n  //         ShowError.showError(`IDID${id}ID`);\r\n  //       } else {\r\n  //         this._triggerDics[id] = trigger;\r\n  //       }\r\n  //     }\r\n  //   }\r\n  // }\r\n\r\n  public static addTrigger(trigger_class: Function): void {\r\n    // \r\n    if (!GameGlobal.PlatformLoaded) {\r\n      let tempTrigger: any = new trigger_class.prototype.constructor();\r\n      // console.log(`ID  ${tempTrigger.ID}  ${tempTrigger.className} `);\r\n      let ids: string[] = tempTrigger.ID.split('|');\r\n      for (let i: number = 0; i < ids.length; i++) {\r\n        let id: string = ids[i].trim().toLowerCase();\r\n        if (this._triggerFunctionDics[id]) {\r\n          VE_ErrorManager.Add(new VE_Error('', `IDID${id}${tempTrigger.className}ID`, '', Severity.Error));\r\n        } else {\r\n          this._triggerFunctionDics[id] = trigger_class;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public static hasTrigger(trigger_type: string): boolean {\r\n    trigger_type = trigger_type.toLowerCase();\r\n    if (this._triggerFunctionDics[trigger_type]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static createTrigger(very_object: VeryEngineObject, trigger_id: string, trigger_type: string, trigger_para: string[], error_info: ErrorInfo): Nullable<VE_TriggerBehaviour> {\r\n    trigger_type = trigger_type.toLowerCase();\r\n    // console.log(this._triggerFunctionDics[trigger_type]);\r\n    if (!this._triggerFunctionDics[trigger_type]) {\r\n      error_info.isRight = false;\r\n      error_info.message = `` + trigger_type;\r\n      return null;\r\n    }\r\n    let variable: any;\r\n    try {\r\n      // newObject.createprototype\r\n      variable = new this._triggerFunctionDics[trigger_type].prototype.constructor();\r\n\r\n      if (!variable) {\r\n        error_info.isRight = false;\r\n        error_info.message = `` + trigger_type;\r\n        return null;\r\n      }\r\n\r\n      let trigger: VE_TriggerBehaviour = <VE_TriggerBehaviour>variable;\r\n      trigger.set(BabylonEngine.Scene);\r\n      trigger.setVeryObject(very_object);\r\n      trigger.setTriggerID(very_object.projectName, trigger_id, very_object.objectID);\r\n      if (!trigger.paraParser(trigger_para)) {\r\n        error_info.isRight = false;\r\n        error_info.message = \"\";\r\n        return null;\r\n      }\r\n      return trigger;\r\n    } catch (error) {\r\n      console.error(`${error.message}`);\r\n      error_info.isRight = false;\r\n      error_info.message = '' + trigger_type + '' + error.message;\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static remove(trigger_type: string): void {\r\n    trigger_type = trigger_type.toLowerCase();\r\n    delete this._triggerFunctionDics[trigger_type];\r\n  }\r\n\r\n  public static findTrigger(very_object: VeryEngineObject, trigger_id: string): Nullable<VE_TriggerBehaviour> {\r\n    if (very_object.isCreatedTrigger(trigger_id)) {\r\n      return very_object.getTrigger(trigger_id);\r\n    } else {\r\n      let triggerArray: string[] = trigger_id.split(StateConst.STATE_SEPARATOR);\r\n      if (triggerArray.length === 2) {\r\n        let objects: VE_Objects = VE_Manager.objects(very_object.projectName);\r\n        let objectID: string = triggerArray[0].trim();\r\n        let triggerID: string = triggerArray[1].trim();\r\n        if (objects.isCreated(objectID)) {\r\n          let otherObject: VeryEngineObject = objects.getVeryObject(objectID);\r\n          if (otherObject.isCreatedTrigger(triggerID)) {\r\n            return otherObject.getTrigger(triggerID);\r\n          } else {\r\n            return null;\r\n          }\r\n        } else {\r\n          return null;\r\n        }\r\n      } else {\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n  public static dispose(): void {\r\n    VE_Triggers._triggerFunctionDics = {};\r\n  }\r\n\r\n}","export class ArrayUtility {\r\n  public static remove<T>(arr: Array<T>, ele: T): void {\r\n    let index = arr.indexOf(ele);\r\n    if (index > -1) {\r\n      arr.splice(index, 1);\r\n    }\r\n  }\r\n\r\n  public static clear<T>(arr: Array<T>): void {\r\n    arr = [];\r\n  }\r\n\r\n  // public static T[] RemoveAt<T>(T[] array, int index) {\r\n  //   List < T > list = new List<T>(array);\r\n  //   list.RemoveAt(index);\r\n  //   return list.ToArray();\r\n  // }\r\n\r\n}\r\n\r\n","/** */\r\nexport class Dictionary<KT, VT> {\r\n  private _keys: KT[] = [];\r\n  private _values: VT[] = [];\r\n  public get count(): number {\r\n    return this.Count();\r\n  }\r\n\r\n  public constructor() {\r\n  }\r\n\r\n  /**, */\r\n  public Add(key: any, value: any): number {\r\n    this._keys.push(key);\r\n    return this._values.push(value);\r\n  }\r\n\r\n  public Remove(key: any) {\r\n    var index = this._keys.indexOf(key, 0);\r\n    this._keys.splice(index, 1);\r\n    this._values.splice(index, 1);\r\n  }\r\n\r\n  private Count(): number {\r\n    return this._keys.length;\r\n  }\r\n\r\n  /**SetValue() */\r\n  public SetValue(key: any, value: any): boolean {\r\n    var index = this._keys.indexOf(key, 0);\r\n    if (index != -1) {\r\n      this._keys[index] = key;\r\n      this._values[index] = value;\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n  public GetValue(key: KT): VT | null {\r\n    var index = this._keys.indexOf(key, 0);\r\n    if (index != -1) {\r\n      return this._values[index];\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public ContainsKey(key: any): boolean {\r\n    let ks = this._keys;\r\n    for (let i = 0; i < ks.length; ++i) {\r\n      if (ks[i] == key) {\r\n        return true;;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public GetKeys(): KT[] {\r\n    return this._keys;\r\n  }\r\n\r\n  public GetValues(): VT[] {\r\n    return this._values;\r\n  }\r\n}","export class ErrorInfo {\r\n\r\n  public isRight: boolean = true;\r\n  public message: string = '';\r\n\r\n  constructor() {\r\n    \r\n  }\r\n\r\n  public clear(): void {\r\n    this.isRight = true;\r\n    this.message = '';\r\n  }\r\n\r\n}","export * from './arrayUtility';\r\nexport * from './dictionary';\r\nexport * from './errorInfo';\r\nexport * from './stringFormat';\r\nexport * from './paraParserUtility';\r\nexport * from './keyboardMap';\r\nexport * from './typeConvert';\r\nexport * from './mathUtility';\r\nexport * from './veryParas';","export class VE_KeyboardMap {\r\n\r\n  private static _keyMap: { [key: string]: string } = {};\r\n  private static _initialized = false;\r\n\r\n  private static init(): void {\r\n    this._keyMap['backspace'] = 'Backspace';\r\n    this._keyMap[''] = 'Backspace';\r\n    this._keyMap['tab'] = 'Tab';\r\n    this._keyMap['enter'] = 'Enter';\r\n    this._keyMap[''] = 'Enter';\r\n    this._keyMap['shift'] = 'Shift';\r\n    this._keyMap['control'] = 'Control';\r\n    this._keyMap['ctrl'] = 'Control';\r\n    this._keyMap['alt'] = 'Alt';\r\n    this._keyMap['pause'] = 'Pause';\r\n    this._keyMap['capsLock'] = 'CapsLock';\r\n    this._keyMap['escape'] = 'Escape';\r\n    this._keyMap['pageup'] = 'PageUp';\r\n    this._keyMap[''] = 'PageUp';\r\n    this._keyMap['pagedown'] = 'PageDown';\r\n    this._keyMap[''] = 'PageDown';\r\n    this._keyMap['end'] = 'End';\r\n    this._keyMap['home'] = 'Home';\r\n    this._keyMap['arrowleft'] = 'ArrowLeft';\r\n    this._keyMap[''] = 'ArrowLeft';\r\n    this._keyMap['arrowup'] = 'ArrowUp';\r\n    this._keyMap[''] = 'ArrowUp';\r\n    this._keyMap['arrowright'] = 'ArrowRight';\r\n    this._keyMap[''] = 'ArrowRight';\r\n    this._keyMap['arrowdown'] = 'ArrowDown';\r\n    this._keyMap[''] = 'ArrowDown';\r\n    this._keyMap['insert'] = 'Insert';\r\n    this._keyMap[''] = 'Insert';\r\n    this._keyMap['delete'] = 'Delete';\r\n    this._keyMap[''] = 'Delete';\r\n    this._keyMap['0'] = '0';\r\n    this._keyMap['1'] = '1';\r\n    this._keyMap['2'] = '2';\r\n    this._keyMap['3'] = '3';\r\n    this._keyMap['4'] = '4';\r\n    this._keyMap['5'] = '5';\r\n    this._keyMap['6'] = '6';\r\n    this._keyMap['7'] = '7';\r\n    this._keyMap['8'] = '8';\r\n    this._keyMap['9'] = '9';\r\n    this._keyMap[')'] = ')';\r\n    this._keyMap[''] = ')';\r\n    this._keyMap['!'] = '!';\r\n    this._keyMap[''] = '!';\r\n    this._keyMap['@'] = '@';\r\n    this._keyMap['#'] = '#';\r\n    this._keyMap['$'] = '$';\r\n    this._keyMap[''] = '$';\r\n    this._keyMap['%'] = '%';\r\n    this._keyMap['^'] = '^';\r\n    this._keyMap[''] = '^';\r\n    this._keyMap['&'] = '&';\r\n    this._keyMap['*'] = '*';\r\n    this._keyMap['('] = '(';\r\n    this._keyMap[''] = '(';\r\n    this._keyMap['meta'] = 'meta';\r\n    this._keyMap['windows'] = 'meta';\r\n    this._keyMap['contextmenu'] = 'ContextMenu';\r\n    this._keyMap[''] = 'ContextMenu';\r\n    this._keyMap['f1'] = 'F1';\r\n    this._keyMap['f2'] = 'F2';\r\n    this._keyMap['f3'] = 'F3';\r\n    this._keyMap['f4'] = 'F4';\r\n    this._keyMap['f5'] = 'F5';\r\n    this._keyMap['f6'] = 'F6';\r\n    this._keyMap['f7'] = 'F7';\r\n    this._keyMap['f8'] = 'F8';\r\n    this._keyMap['f9'] = 'F9';\r\n    this._keyMap['f10'] = 'F10';\r\n    this._keyMap['f11'] = 'F11';\r\n    this._keyMap['f12'] = 'F12';\r\n    this._keyMap['scrolllock'] = 'ScrollLock';\r\n    this._keyMap[';'] = ';';\r\n    this._keyMap[''] = ';';\r\n    this._keyMap[':'] = ':';\r\n    this._keyMap[''] = ':';\r\n    this._keyMap['='] = '=';\r\n    this._keyMap['+'] = '+';\r\n    this._keyMap['-'] = '-';\r\n    this._keyMap['_'] = '_';\r\n    this._keyMap[''] = '_';\r\n    this._keyMap[','] = ',';\r\n    this._keyMap[''] = ',';\r\n    this._keyMap['<'] = '<';\r\n    this._keyMap[''] = '<';\r\n    this._keyMap['.'] = '.';\r\n    this._keyMap[''] = '.';\r\n    this._keyMap['>'] = '>';\r\n    this._keyMap[''] = '>';\r\n    this._keyMap['?'] = '?';\r\n    this._keyMap[''] = '?';\r\n    this._keyMap['/'] = '/';\r\n    this._keyMap['`'] = '`';\r\n    this._keyMap[''] = '`';\r\n    this._keyMap['~'] = '~';\r\n    this._keyMap['|'] = '|';\r\n    this._keyMap['\\\\'] = '\\\\';\r\n    this._keyMap['\\\\'] = '\\\\';\r\n    this._keyMap['numlock'] = 'NumLock';\r\n    this._keyMap['a'] = 'a';\r\n    this._keyMap['b'] = 'b';\r\n    this._keyMap['c'] = 'c';\r\n    this._keyMap['d'] = 'd';\r\n    this._keyMap['e'] = 'e';\r\n    this._keyMap['f'] = 'f';\r\n    this._keyMap['g'] = 'g';\r\n    this._keyMap['h'] = 'h';\r\n    this._keyMap['i'] = 'i';\r\n    this._keyMap['j'] = 'j';\r\n    this._keyMap['k'] = 'k';\r\n    this._keyMap['l'] = 'l';\r\n    this._keyMap['m'] = 'm';\r\n    this._keyMap['n'] = 'n';\r\n    this._keyMap['o'] = 'o';\r\n    this._keyMap['p'] = 'p';\r\n    this._keyMap['q'] = 'q';\r\n    this._keyMap['r'] = 'r';\r\n    this._keyMap['s'] = 's';\r\n    this._keyMap['t'] = 't';\r\n    this._keyMap['u'] = 'u';\r\n    this._keyMap['v'] = 'v';\r\n    this._keyMap['w'] = 'w';\r\n    this._keyMap['x'] = 'x';\r\n    this._keyMap['y'] = 'y';\r\n    this._keyMap['z'] = 'z';\r\n    \r\n\r\n  }\r\n\r\n  public static GetKey(key_str: string): string {\r\n    if(!this._initialized) {\r\n      this.init();\r\n      this._initialized = true;\r\n    }\r\n    key_str = key_str.trim().toLowerCase();\r\n    if (this._keyMap[key_str]) {\r\n      return this._keyMap[key_str];\r\n    } else {\r\n      return 'null';\r\n    }\r\n  }\r\n\r\n\r\n\r\n}","\r\nexport class Vector3Utility {\r\n\r\n\r\n  /**\r\n   * Vector3\r\n   * @param start \r\n   * @param end \r\n   * @param t 0~1\r\n   * Vector3\r\n   */\r\n  public static Slerp(start: BABYLON.Vector3, end: BABYLON.Vector3, t: number): BABYLON.Vector3 {\r\n    if (t < 0) {\r\n      t = 0;\r\n    } else if (t > 1) {\r\n      t = 1;\r\n    }\r\n    // sin\r\n    let result: BABYLON.Vector3 = new BABYLON.Vector3();\r\n    let para: number = (Math.sin(Math.PI * (t - 0.5)) + 1) * 0.5;\r\n    result.x = start.x + (end.x - start.x) * para;\r\n    result.y = start.y + (end.y - start.y) * para;\r\n    result.z = start.z + (end.z - start.z) * para;\r\n\r\n\r\n    return result;\r\n  }\r\n\r\n}\r\n\r\nexport class FloatUitlity {\r\n\r\n\r\n  public static Lerp(start: number, end: number, t: number): number {\r\n    if (t < 0) {\r\n      t = 0;\r\n    } else if (t > 1) {\r\n      t = 1;\r\n    }\r\n    return start + (end - start) * t;\r\n  }\r\n\r\n  public static SLerp(start: number, end: number, t: number): number {\r\n    if (t < 0) {\r\n      t = 0;\r\n    } else if (t > 1) {\r\n      t = 1;\r\n    }\r\n    // sin\r\n    let para: number = (Math.sin(Math.PI * (t - 0.5)) + 1) * 0.5;\r\n    return start + (end - start) * para;\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n}","import { ParaType, Severity } from \"../enum\";\r\nimport { VE_ErrorManager, VE_Error } from \"../global\";\r\nimport { VeryGameObject, VeryVarManager, VarTools, IVeryVar, VeryString, VeryExpression, VeryNumber, VeryBool, VeryVector3 } from \"../variables\";\r\nimport { ErrorInfo } from \"./errorInfo\";\r\nimport { VE_Template } from \"../template\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { GameObject } from \"../babylon\";\r\nimport { VeryEngineObject } from \"../object\";\r\nimport { VE_TypeConvert } from \"./typeConvert\";\r\nimport { VeryParas } from \"./veryParas\";\r\n\r\nexport class ParaParserUtility {\r\n\r\n  /**\r\n   * \r\n   * @param id \r\n   * @param para_type \r\n   * @param current_number \r\n   * @param required_number \r\n   */\r\n  public static ParaNumbers(id: string, para_type: ParaType, current_number: number, ...required_number: number[]): boolean {\r\n    for (let i: number = 0; i < required_number.length; i++) {\r\n      if (required_number[i] === current_number) {\r\n        return true;\r\n      }\r\n    }\r\n    let requiredStr: string = \"\";\r\n    for (let i: number = 0; i < required_number.length; i++) {\r\n      if (i === 0) {\r\n        requiredStr += (required_number[i] + 1).toString() + \"\";\r\n      }\r\n      else {\r\n        requiredStr += \"\" + (required_number[i] + 1).toString() + \"\";\r\n      }\r\n    }\r\n    if (para_type === ParaType.Action) {\r\n\r\n      VE_ErrorManager.Add(new VE_Error('', id + \"  \" + requiredStr + \"\" + (current_number + 1) + \"\", '', Severity.Error));\r\n    }\r\n    else {\r\n      VE_ErrorManager.Add(new VE_Error('', id + \"  \" + requiredStr + \"\" + (current_number + 1) + \"\", '', Severity.Error));\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * VeryGameObject\r\n   * @param project_name \r\n   * @param object_id \r\n   * @param id ID\r\n   * @param para_type \r\n   * @param very_var \r\n   * @param var_str \r\n   * @param log \r\n   * \r\n   */\r\n  public static GameObjectPara(project_name: string, object_id: string, id: string, para_type: ParaType, paras: VeryParas, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVar(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        // Template\r\n        errorInfo.clear();\r\n        let template: Nullable<VE_Template> = VarTools.GetTemplate(project_name, object_id, var_str, errorInfo);\r\n        if (template === null) {\r\n          if (log) {\r\n            VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}`, '', Severity.Error));\r\n          }\r\n          return false;\r\n        }\r\n        else {\r\n          if (template.templateInstance === null) {\r\n            if (log) {\r\n              VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}GameObject`, '', Severity.Error));\r\n            }\r\n            return false;\r\n          }\r\n          else {\r\n            paras.gameObject.value = template.templateInstance.gameObject;\r\n            return true;\r\n          }\r\n        }\r\n      }\r\n      else if (veryVar.className === 'VeryGameObject') {\r\n        paras.gameObject = <VeryGameObject>veryVar;\r\n        return true;\r\n      }\r\n      else if (veryVar.className === 'VeryString') {\r\n        let vString: VeryString = <VeryString>veryVar;\r\n        paras.gameObject.value = GameObject.Find(vString.value);\r\n        if (paras.gameObject.value === null) {\r\n          if (log) {\r\n            VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${vString.value}`, '', Severity.Error));\r\n          }\r\n          return false;\r\n        }\r\n        return true;\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}GameObject`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      if (var_str.toLowerCase().trim() === \"this\") {\r\n        let veryObject: VeryEngineObject = VE_Manager.objects(project_name).getVeryObject(object_id);\r\n        if (veryObject === null) {\r\n          if (log) {\r\n            VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''}  ${object_id}`, '', Severity.Error));\r\n          }\r\n          return false;\r\n        }\r\n        else {\r\n          paras.gameObject.value = veryObject.gameObject;\r\n        }\r\n      }\r\n      else if (var_str.toLowerCase().trim() === \"null\" || var_str.toLowerCase().trim() === \"none\" || var_str.toLowerCase().trim() === \"\") {\r\n        paras.gameObject.value = null;\r\n      }\r\n      else if (var_str.startsWith(\"/\")) {\r\n        let veryObject: VeryEngineObject = VE_Manager.objects(project_name).getVeryObject(object_id);\r\n        if (!veryObject) {\r\n          if (log) {\r\n            VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''}  ${object_id}`, '', Severity.Error));\r\n          }\r\n          return false;\r\n        }\r\n        else {\r\n          let parentObj: GameObject = veryObject.gameObject;\r\n          let childName: string = var_str.substring(1).trim();\r\n          // TODO: \r\n          // very_var.value = GameObject.FindChild(parentObj, childName);\r\n          if (paras.gameObject.value === null) {\r\n            if (log) {\r\n              VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${object_id}${var_str}`, '', Severity.Error));\r\n            }\r\n            return false;\r\n          }\r\n          return true;\r\n        }\r\n      }\r\n      else {\r\n        paras.gameObject.value = GameObject.Find(var_str);\r\n        if (paras.gameObject.value === null) {\r\n          if (log) {\r\n            VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''}  ${object_id}`, '', Severity.Error));\r\n          }\r\n          return false;\r\n        }\r\n      }\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public static GameObjectParaOnlyVar(project_name: string, object_id: string, id: string, para_type: ParaType, paras: VeryParas, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVar(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}GameObject`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryGameObject') {\r\n        paras.gameObject = <VeryGameObject>veryVar;\r\n        return true;\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}GameObject`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      if (log) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}GameObject`, '', Severity.Error));\r\n      }\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static StringPara(project_name: string, object_id: string, id: string, para_type: ParaType, paras: VeryParas, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      return ParaParserUtility.StringParaOnlyVar(project_name, object_id, id, para_type, paras, var_str, log);\r\n    }\r\n    else {\r\n      paras.string.value = var_str;\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public static StringParaWithExpression(project_name: string, object_id: string, id: string, para_type: ParaType, paras: VeryParas, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVarWithExpression(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}${errorInfo.message}`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryString') {\r\n        paras.string = <VeryString>veryVar;\r\n        return true;\r\n      }\r\n      else if (veryVar.className === 'VeryExpression') {\r\n        if (veryVar.varType === 'string') {\r\n          paras.string.setExpression(<VeryExpression>veryVar);\r\n          return true;\r\n        }\r\n        else {\r\n          if (log) {\r\n            VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}String`, '', Severity.Error));\r\n          }\r\n          return false;\r\n        }\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}String`, '', Severity.Error));\r\n        }\r\n      }\r\n      return false;\r\n    }\r\n    else {\r\n      paras.string.value = var_str;\r\n      return true;\r\n    }\r\n  }\r\n\r\n\r\n  public static StringParaOnlyVar(project_name: string, object_id: string, id: string, para_type: ParaType, paras: VeryParas, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVar(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}${errorInfo.message}`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryString') {\r\n        paras.string = <VeryString>veryVar;\r\n        return true;\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}String`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      if (log) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}String`, '', Severity.Error));\r\n      }\r\n      return false;\r\n    }\r\n  }\r\n\r\n\r\n  public static NumberPara(project_name: string, object_id: string, id: string, para_type: ParaType, paras: VeryParas, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      return ParaParserUtility.NumberParaOnlyVar(project_name, object_id, id, para_type, paras, var_str, log);\r\n    }\r\n    else {\r\n      paras.number.value = parseFloat(var_str);\r\n      if (isNaN(paras.number.value)) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}number`, '', Severity.Error));\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  public static NumberParaWithExpression(project_name: string, object_id: string, id: string, para_type: ParaType, paras: VeryParas, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVarWithExpression(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}${errorInfo.message}`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryNumber') {\r\n        paras.number = <VeryNumber>veryVar;\r\n        return true;\r\n      }\r\n      else if (veryVar.className === 'VeryExpression') {\r\n        if (veryVar.varType === 'number') {\r\n          paras.number.setExpression(<VeryExpression>veryVar);\r\n          return true;\r\n        }\r\n        else {\r\n          if (log) {\r\n            VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}number`, '', Severity.Error));\r\n          }\r\n          return false;\r\n        }\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}number`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      paras.number.value = parseFloat(var_str);\r\n      if (isNaN(paras.number.value)) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}number`, '', Severity.Error));\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public static NumberParaOnlyVar(project_name: string, object_id: string, id: string, para_type: ParaType, paras: VeryParas, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVar(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}${errorInfo.message}`, '', Severity.Error));\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryNumber') {\r\n        paras.number = <VeryNumber>veryVar;\r\n        return true;\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}number`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      if (log) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}number`, '', Severity.Error));\r\n      }\r\n      return false;\r\n    }\r\n  }\r\n\r\n\r\n  public static BoolPara(project_name: string, object_id: string, id: string, para_type: ParaType, paras: VeryParas, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      return ParaParserUtility.BoolParaOnlyVar(project_name, object_id, id, para_type, paras, var_str, log);\r\n    }\r\n    else {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      paras.bool.value = VE_TypeConvert.boolConvert(var_str, errorInfo);\r\n      if (errorInfo.isRight === false) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}bool`, '', Severity.Error));\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n  }\r\n\r\n\r\n  public static BoolParaWithExpression(project_name: string, object_id: string, id: string, para_type: ParaType, paras: VeryParas, var_str: string, log: boolean = true) {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVar(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}${errorInfo.message}`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryBool') {\r\n        paras.bool = <VeryBool>veryVar;\r\n        return true;\r\n      }\r\n      else if (veryVar.className === 'VeryExpression') {\r\n        if (veryVar.varType === 'bool') {\r\n          paras.bool.setExpression(<VeryExpression>veryVar);\r\n          return true;\r\n        }\r\n        else {\r\n          if (log) {\r\n            VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}bool`, '', Severity.Error));\r\n          }\r\n          return false;\r\n        }\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}bool`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      paras.bool.value = VE_TypeConvert.boolConvert(var_str, errorInfo);\r\n      if (errorInfo.isRight === false) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}bool`, '', Severity.Error));\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public static BoolParaOnlyVar(project_name: string, object_id: string, id: string, para_type: ParaType, paras: VeryParas, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVar(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}${errorInfo.message}`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryBool') {\r\n        paras.bool = <VeryBool>veryVar;\r\n        return true;\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}bool`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      if (log) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}bool`, '', Severity.Error));\r\n      }\r\n      return false;\r\n    }\r\n  }\r\n\r\n\r\n  public static Vector3Para(project_name: string, object_id: string, id: string, para_type: ParaType, paras: VeryParas, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVar(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}${errorInfo.message}`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryVector3') {\r\n        paras.vector3 = <VeryVector3>veryVar;\r\n        return true;\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}Vector3`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      if (log) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}Vector3`, '', Severity.Error));\r\n      }\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static Vector3OrNumberPara(project_name: string, object_id: string, id: string, para_type: ParaType, paras: VeryParas, var_str: string, log: boolean = true): boolean {\r\n    if (var_str.indexOf(\",\") > -1 || var_str.indexOf(\"\") > -1) {\r\n      paras.isVec = false;\r\n      let floatsArray: string[] = var_str.split(/,|/);\r\n      if (floatsArray.length === 3) {\r\n        if (!this.privateNumberPara(project_name, object_id, id, para_type, paras, floatsArray[0].trim(), 0, log)) {\r\n          return false;\r\n        }\r\n        if (!this.privateNumberPara(project_name, object_id, id, para_type, paras, floatsArray[1].trim(), 1, log)) {\r\n          return false;\r\n        }\r\n        if (!this.privateNumberPara(project_name, object_id, id, para_type, paras, floatsArray[2].trim(), 2, log)) {\r\n          return false;\r\n        }\r\n        return true;\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}1, 2, 3number`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      paras.isVec = true;\r\n      return this.Vector3Para(project_name, object_id, id, para_type, paras, var_str, log);\r\n    }\r\n  }\r\n\r\n\r\n  public static Vector3ParaWithExpression(project_name: string, object_id: string, id: string, para_type: ParaType, paras: VeryParas, var_str: string, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVarWithExpression(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}${errorInfo.message}`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryVector3') {\r\n        paras.vector3 = <VeryVector3>veryVar;\r\n        return true;\r\n      }\r\n      else if (veryVar.className === 'VeryExpression') {\r\n        if (veryVar.varType === 'Vector3') {\r\n          paras.vector3.setExpression(<VeryExpression>veryVar);\r\n          return true;\r\n        }\r\n        else {\r\n          if (log) {\r\n            VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}Vector3`, '', Severity.Error));\r\n          }\r\n          return false;\r\n        }\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}Vector3`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      if (log) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}Vector3`, '', Severity.Error));\r\n      }\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static Vector3OrNumberParaWithExpression(project_name: string, object_id: string, id: string, para_type: ParaType, paras: VeryParas, var_str: string, log: boolean = true): boolean {\r\n    if (var_str.indexOf(\",\") > -1 || var_str.indexOf(\"\") > -1) {\r\n      paras.isVec = false;\r\n      let floatsArray: string[] = var_str.split(/,|/);\r\n      if (floatsArray.length === 3) {\r\n        if (!this.privateNumberParaWithExpression(project_name, object_id, id, para_type, paras, floatsArray[0].trim(), 0, log)) {\r\n          return false;\r\n        }\r\n        if (!this.privateNumberParaWithExpression(project_name, object_id, id, para_type, paras, floatsArray[1].trim(), 1, log)) {\r\n          return false;\r\n        }\r\n        if (!this.privateNumberParaWithExpression(project_name, object_id, id, para_type, paras, floatsArray[2].trim(), 2, log)) {\r\n          return false;\r\n        }\r\n        return true;\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}1, 2, 3Vector3`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      paras.isVec = true;\r\n      return this.Vector3ParaWithExpression(project_name, object_id, id, para_type, paras, var_str, log);\r\n    }\r\n  }\r\n\r\n  private static privateNumberParaWithExpression(project_name: string, object_id: string, id: string, para_type: ParaType, paras: VeryParas, var_str: string, index: number, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVarWithExpression(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}${errorInfo.message}`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryNumber') {\r\n        paras.vecNumbers[index] = <VeryNumber>veryVar;\r\n        return true;\r\n      }\r\n      else if (veryVar.className === 'VeryExpression') {\r\n        if (veryVar.varType === 'number') {\r\n          paras.vecNumbers[index].setExpression(<VeryExpression>veryVar);\r\n          return true;\r\n        }\r\n        else {\r\n          if (log) {\r\n            VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}number`, '', Severity.Error));\r\n          }\r\n          return false;\r\n        }\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}number`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      paras.vecNumbers[index].value = parseFloat(var_str);\r\n      if (isNaN(paras.vecNumbers[index].value)) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}number`, '', Severity.Error));\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n  }\r\n\r\n  private static privateNumberPara(project_name: string, object_id: string, id: string, para_type: ParaType, paras: VeryParas, var_str: string, index: number, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      return ParaParserUtility.privateNumberParaOnlyVar(project_name, object_id, id, para_type, paras, var_str, index, log);\r\n    }\r\n    else {\r\n      paras.vecNumbers[index].value = parseFloat(var_str);\r\n      if (isNaN(paras.vecNumbers[index].value)) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}number`, '', Severity.Error));\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  private static privateNumberParaOnlyVar(project_name: string, object_id: string, id: string, para_type: ParaType, paras: VeryParas, var_str: string, index: number, log: boolean = true): boolean {\r\n    if (VarTools.IsVarID(var_str)) {\r\n      let errorInfo: ErrorInfo = new ErrorInfo();\r\n      let veryVar: Nullable<IVeryVar> = VarTools.GetVeryVar(project_name, object_id, var_str, errorInfo);\r\n      if (veryVar === null) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}${errorInfo.message}`, '', Severity.Error));\r\n        return false;\r\n      }\r\n      else if (veryVar.className === 'VeryNumber') {\r\n        paras.vecNumbers[index] = <VeryNumber>veryVar;\r\n        return true;\r\n      }\r\n      else {\r\n        if (log) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}number`, '', Severity.Error));\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      if (log) {\r\n        VE_ErrorManager.Add(new VE_Error('', `${id}  ${para_type === ParaType.Action ? '' : ''} ${var_str}number`, '', Severity.Error));\r\n      }\r\n      return false;\r\n    }\r\n  }\r\n\r\n\r\n}","export class VE_StringFormat {\r\n\r\n  private static _illegalChar: { [key: string]: boolean } = {};\r\n  private static _formulaChar: { [key: string]: boolean } = {};\r\n  private static _escapeCharacters: { [key: string]: string } = {};\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public static init() {\r\n    this._escapeCharacters['n'] = '\\n';\r\n    this._escapeCharacters['b'] = '\\b';\r\n    this._escapeCharacters['r'] = '\\r';\r\n    this._escapeCharacters['t'] = '\\t';\r\n    this._escapeCharacters['v'] = '\\v';\r\n    this._escapeCharacters['f'] = '\\f';\r\n    this._escapeCharacters['0'] = '\\0';\r\n\r\n    this._illegalChar['='] = true;\r\n    this._illegalChar[','] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar[':'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['*'] = true;\r\n    this._illegalChar['('] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar[')'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['@'] = true;\r\n    this._illegalChar['#'] = true;\r\n    this._illegalChar['$'] = true;\r\n    this._illegalChar['%'] = true;\r\n    this._illegalChar['&'] = true;\r\n    this._illegalChar['^'] = true;\r\n    this._illegalChar['-'] = true;\r\n    this._illegalChar['+'] = true;\r\n    this._illegalChar['|'] = true;\r\n    this._illegalChar['/'] = true;\r\n    this._illegalChar['['] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar[']'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['{'] = true;\r\n    this._illegalChar['}'] = true;\r\n    this._illegalChar['.'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['<'] = true;\r\n    this._illegalChar['>'] = true;\r\n    this._illegalChar[';'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['?'] = true;\r\n    this._illegalChar['\\\"'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['\\''] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['!'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['`'] = true;\r\n    this._illegalChar[''] = true;\r\n    this._illegalChar['~'] = true;\r\n\r\n    this._formulaChar['('] = true; this._formulaChar[')'] = true; this._formulaChar[''] = true; this._formulaChar[''] = true;\r\n    this._formulaChar['!'] = true; this._formulaChar[''] = true;\r\n    this._formulaChar['^'] = true; this._formulaChar['%'] = true; this._formulaChar['&'] = true; this._formulaChar['-'] = true; this._formulaChar['+'] = true; this._formulaChar['='] = true;\r\n    this._formulaChar['<'] = true; this._formulaChar['>'] = true; this._formulaChar['|'] = true;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param para_str \r\n   */\r\n  public static strEscapeCharacterAction(para_str: string): string {\r\n    let tmpStr: string = \"\";\r\n    for (let i: number = 0; i < para_str.length; i++) {\r\n      if (para_str[i] == '\\\\' && i != para_str.length - 1) {\r\n        tmpStr += this.getEscapeCharacter(para_str[i + 1]);\r\n        i++;\r\n      }\r\n      else {\r\n        tmpStr += para_str[i];\r\n      }\r\n    }\r\n    return tmpStr;\r\n  }\r\n\r\n  /**\r\n   *  \r\n   * @param para_str \r\n   */\r\n  public static strSubsectionAction(para_str: string): string[] {\r\n    let strBuilder: string = '';\r\n    let rStr: string[] = [];\r\n    let bracketFlag: boolean = false;\r\n    let hasQuote: boolean = false;\r\n    for (let i: number = 0; i < para_str.length; i++) {\r\n      if (para_str[i] == '\\\\') {\r\n        if (i < para_str.length - 1) {\r\n          strBuilder += para_str[i + 1];\r\n          i++;\r\n          continue;\r\n        }\r\n        else {\r\n          strBuilder += para_str[i];\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (!hasQuote && (para_str[i] === '\\\"' || para_str[i] === '')) {\r\n        hasQuote = true;\r\n        bracketFlag = true;\r\n        strBuilder += '\\\"';\r\n      }\r\n      else if (hasQuote && (para_str[i] === '\\\"' || para_str[i] === '')) {\r\n        strBuilder += '\\\"';\r\n        bracketFlag = false;\r\n        hasQuote = false;\r\n        if (strBuilder !== '') {\r\n          rStr.push(strBuilder);\r\n        }\r\n        strBuilder = '';\r\n      }\r\n      else if (para_str[i] === ',' || para_str[i] === '') {\r\n        if (!bracketFlag) {\r\n          if (strBuilder !== \"\") {\r\n            rStr.push(strBuilder);\r\n          }\r\n          strBuilder = '';\r\n        }\r\n        else {\r\n          strBuilder += para_str[i];\r\n        }\r\n      }\r\n      else if (para_str[i] === ' ') {\r\n        continue;\r\n      }\r\n      else {\r\n        strBuilder += para_str[i];\r\n      }\r\n    }\r\n    if (strBuilder !== \"\") {\r\n      rStr.push(strBuilder);\r\n    }\r\n    return rStr;\r\n  }\r\n\r\n\r\n  private static getEscapeCharacter(para_char: string): string {\r\n    if (this._escapeCharacters[para_char])\r\n      return this._escapeCharacters[para_char];\r\n    else\r\n      return para_char;\r\n  }\r\n\r\n  private static getEscapeCharacter2(para_char: string, is_escape: boolean[]): string {\r\n    if (this._escapeCharacters[para_char]) {\r\n      is_escape[0] = true;\r\n      return this._escapeCharacters[para_char];\r\n    }\r\n    else {\r\n      is_escape[0] = false;\r\n      return para_char;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \"XXX\"\"XXX\"XXX\r\n   * @param para_str \r\n   */\r\n  public static strSubsection(para_str: string): string[] {\r\n    let strBuilder: string = '';\r\n    let rStr: string[] = [];\r\n    let bracketFlag: boolean = false;\r\n    let needSpace: boolean = false;\r\n    for (let i: number = 0; i < para_str.length; i++) {\r\n      if (para_str[i] == '\\\\') {\r\n        if (i < para_str.length - 1) {\r\n          strBuilder += this.getEscapeCharacter(para_str[i + 1]);\r\n          i++;\r\n          continue;\r\n        }\r\n        else {\r\n          strBuilder += para_str[i];\r\n          break;\r\n        }\r\n      }\r\n      if (para_str[i] === '(' || para_str[i] === '' || para_str[i] === '\\\"' || para_str[i] === '') {\r\n        bracketFlag = true;\r\n        needSpace = false;\r\n      }\r\n      else if (para_str[i] === ')' || para_str[i] === '' || para_str[i] === '\\\"' || para_str[i] === '') {\r\n        bracketFlag = false;\r\n        if (strBuilder !== \"\") {\r\n          rStr.push(strBuilder);\r\n        }\r\n        strBuilder = '';\r\n        needSpace = false;\r\n      }\r\n      else if (para_str[i] === ',' || para_str[i] === '') {\r\n        if (!bracketFlag) {\r\n          if (strBuilder !== \"\") {\r\n            rStr.push(strBuilder);\r\n          }\r\n          strBuilder = '';\r\n        }\r\n        else {\r\n          strBuilder += para_str[i];\r\n        }\r\n        needSpace = false;\r\n      }\r\n      else if (para_str[i] === ' ' && !needSpace) {\r\n        continue;\r\n      }\r\n      else {\r\n        strBuilder += para_str[i];\r\n        needSpace = true;\r\n      }\r\n    }\r\n    if (strBuilder !== \"\") {\r\n      rStr.push(strBuilder);\r\n    }\r\n    return rStr;\r\n  }\r\n\r\n  /**\r\n   * $\r\n   * @param project_name \r\n   * @param para_array \r\n   */\r\n  public static getParaArrayAll(project_name: string, para_array: string[]): string[] {\r\n    let coloneStr: string[] = para_array.slice();\r\n    for (let i: number = 0; i < coloneStr.length; i++) {\r\n      if (coloneStr[i].startsWith(\"$\")) {\r\n        //\r\n        if (coloneStr[i].indexOf(\",\") > -1 || coloneStr[i].indexOf(\"\")) {\r\n          let paraArray: string[] = coloneStr[i].split(/,|/);\r\n          paraArray = this.getParaArrayAll(project_name, paraArray);\r\n          let newPara: string = '';\r\n          for (let j: number = 0; j < paraArray.length; j++) {\r\n            if (j === paraArray.length - 1) {\r\n              newPara += paraArray[j];\r\n            }\r\n            else {\r\n              newPara += paraArray[j];\r\n              newPara += \",\";\r\n            }\r\n          }\r\n          coloneStr[i] = newPara;\r\n        }\r\n        else {\r\n          // TODO\r\n          console.error(\"\" + coloneStr[i] + \"\");\r\n        }\r\n      }\r\n      else if (coloneStr[i].startsWith(\"%\")) {\r\n        //\r\n        if (coloneStr[i].indexOf(\",\") > -1 || coloneStr[i].indexOf(\"\") > -1) {\r\n          let paraArray: string[] = coloneStr[i].split(/,|/);\r\n          paraArray = this.getParaArrayAll(project_name, paraArray);\r\n          let newPara: string = '';\r\n          for (let j: number = 0; j < paraArray.length; j++) {\r\n            if (j == paraArray.length - 1) {\r\n              newPara += paraArray[j];\r\n            }\r\n            else {\r\n              newPara += paraArray[j];\r\n              newPara += \",\";\r\n            }\r\n          }\r\n          coloneStr[i] = newPara;\r\n        }\r\n        else {\r\n          // TODO\r\n          console.error(\"\" + coloneStr[i] + \"BlurVar\");\r\n        }\r\n      }\r\n      //\r\n      else if (coloneStr[i].indexOf(\",\") > -1 || coloneStr[i].indexOf(\"\") > -1) {\r\n        let paraArray: string[] = coloneStr[i].split(/,|/);\r\n        paraArray = this.getParaArrayAll(project_name, paraArray);\r\n        let newPara: string = '';\r\n        for (let j: number = 0; j < paraArray.length; j++) {\r\n          if (j == paraArray.length - 1) {\r\n            newPara += paraArray[j];\r\n          }\r\n          else {\r\n            newPara += paraArray[j];\r\n            newPara += \",\";\r\n          }\r\n        }\r\n        coloneStr[i] = newPara;\r\n      }\r\n    }\r\n    return coloneStr;\r\n  }\r\n\r\n  /**\r\n   * \r\n     1\r\n     2\r\n        1\r\n        2 +\r\n        3+ \r\n        412123\r\n    \r\n   * @param para_str \r\n   */\r\n  public static paraSegment(para_str: string): string[] {\r\n    let strBuilder = '';\r\n    let rStr: string[] = [];\r\n    let bracketFlag: boolean = false;\r\n    let innerBracket: number = 0;\r\n    let saveBracket: boolean = false;\r\n\r\n    let quotationMark: boolean = false;\r\n\r\n    for (let i: number = 0; i < para_str.length; i++) {\r\n      //\r\n      if (para_str[i] == '\\\\') {\r\n        if (i < para_str.length - 1) {\r\n          let isEscape: boolean[] = [true];\r\n          let c: string = this.getEscapeCharacter2(para_str[i + 1], isEscape);\r\n          if (isEscape[0]) {\r\n            i++;\r\n            strBuilder += c;\r\n          }\r\n          else {\r\n            i++;\r\n            strBuilder += para_str[i];\r\n          }\r\n          continue;\r\n        }\r\n        else {\r\n          strBuilder += para_str[i];\r\n          break;\r\n        }\r\n      }\r\n      if (para_str[i] === '(' || para_str[i] === '') {\r\n        if (quotationMark) {\r\n          strBuilder += para_str[i];\r\n        }\r\n        else {\r\n          if (bracketFlag) {\r\n            innerBracket++;\r\n            strBuilder += para_str[i];\r\n          }\r\n          else if (strBuilder.trim() !== \"\") {\r\n            strBuilder += para_str[i];\r\n            saveBracket = true;\r\n          }\r\n          else if (i < para_str.length - 1) {\r\n            if (this.needSaveBracket(para_str.substring(i + 1))) {\r\n              strBuilder += para_str[i];\r\n              saveBracket = true;\r\n            }\r\n          }\r\n          bracketFlag = true;\r\n        }\r\n      }\r\n      else if (para_str[i] === ')' || para_str[i] === '') {\r\n        if (quotationMark) {\r\n          strBuilder += para_str[i];\r\n        }\r\n        else {\r\n          if (innerBracket > 0) {\r\n            innerBracket--;\r\n            bracketFlag = true;\r\n            strBuilder += para_str[i];\r\n          }\r\n          else if (bracketFlag && saveBracket) {\r\n            strBuilder += para_str[i];\r\n            saveBracket = false;\r\n            bracketFlag = false;\r\n          }\r\n          else {\r\n            bracketFlag = false;\r\n          }\r\n        }\r\n      }\r\n      else if (para_str[i] === '\"' || para_str[i] === '\\'' || para_str[i] === '' || para_str[i] === '' || para_str[i] === '' || para_str[i] === '') {\r\n        strBuilder += para_str[i];\r\n        quotationMark = !quotationMark;\r\n      }\r\n      else if (para_str[i] === ',' || para_str[i] === '') {\r\n        if (quotationMark) {\r\n          strBuilder += para_str[i];\r\n        }\r\n        else {\r\n          if (!bracketFlag) {\r\n            if (strBuilder !== \"\") {\r\n              rStr.push(strBuilder.trim());\r\n            }\r\n            strBuilder = '';\r\n          }\r\n          else {\r\n            strBuilder += para_str[i];\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        strBuilder += para_str[i];\r\n      }\r\n    }\r\n    if (strBuilder !== \"\") {\r\n      rStr.push(strBuilder.trim());\r\n    }\r\n    return rStr;\r\n  }\r\n\r\n\r\n  private static needSaveBracket(str: string): boolean {\r\n    let hasBracket: boolean = false;\r\n    let innerBracket: number = 0;\r\n    for (let i: number = 0; i < str.length; i++) {\r\n      if (hasBracket) {\r\n        if (str[i] === ' ') {\r\n          continue;\r\n        }\r\n        else if (str[i] === ',' || str[i] === '') {\r\n          return false;\r\n        }\r\n        else {\r\n          return true;\r\n        }\r\n      }\r\n      else {\r\n        if (str[i] === '(' || str[i] === '') {\r\n          innerBracket++;\r\n        }\r\n        else if (str[i] === ')' || str[i] === '') {\r\n          if (innerBracket > 0) {\r\n            innerBracket--;\r\n          }\r\n          else {\r\n            hasBracket = true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n\r\n  public static isIDLegal(id: string): boolean {\r\n    for (let i: number = 0; i < id.length; i++) {\r\n      if (this._illegalChar[id[i]]) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n\r\n  public static isFormulaString(var_str: string): boolean {\r\n    for (let i: number = 0; i < var_str.length; i++)\r\n    {\r\n      if (this._formulaChar[var_str[i]]) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n\r\n}\r\n\r\nVE_StringFormat.init();\r\n\r\n// console.log(VE_StringFormat.paraSegment(\", Main Camera, *\"));\r\n// console.log(VE_StringFormat.paraSegment(`, *Float1, *Float2, 0.0001, >=`));\r\n// console.log(VE_StringFormat.paraSegment(`.*1 = 'ksd./,.34'`));\r\n\r\n// console.log(VE_StringFormat.paraSegment(\", *, Pin, Example/SpinAPin/Pin , null, (0, -6, 0), (0,0,90),false\"));","import { ErrorInfo } from \"./errorInfo\";\r\n\r\nexport class VE_TypeConvert {\r\n\r\n\r\n  public static boolConvert(info: string, errorInfo: ErrorInfo): boolean {\r\n    info = info.toLowerCase().trim();\r\n    if(info === 'true' || info === '') {\r\n      return true;\r\n    } else if(info === 'false' || info === '') {\r\n      return false;\r\n    } else {\r\n      errorInfo.isRight = false;\r\n      errorInfo.message = 'bool|' + info;\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static intConvert(info: string, errorInfo: ErrorInfo): number {\r\n    info = info.toLowerCase().trim();\r\n    let num: number = parseFloat(info);\r\n    if(isNaN(num)) {\r\n      errorInfo.isRight = false;\r\n      errorInfo.message = 'number|' + info;\r\n      return - 1;\r\n    } else {\r\n      return Math.round(num);\r\n    }\r\n  }\r\n\r\n  public static floatConvert(info: string, errorInfo: ErrorInfo): number {\r\n    info = info.toLowerCase().trim();\r\n    let num: number = parseFloat(info);\r\n    if(isNaN(num)) {\r\n      errorInfo.isRight = false;\r\n      errorInfo.message = 'number|' + info;\r\n      return - 1;\r\n    } else {\r\n      return num;\r\n    }\r\n  }\r\n\r\n\r\n}","import { VeryGameObject, VeryBool, VeryNumber, VeryString, VeryVector3 } from \"../variables\";\r\n\r\nexport class VeryParas {\r\n\r\n  public gameObject: VeryGameObject = new VeryGameObject();\r\n\r\n  public bool: VeryBool = new VeryBool();\r\n\r\n  public number: VeryNumber = new VeryNumber();\r\n\r\n  public string: VeryString = new VeryString();\r\n\r\n  public vector3: VeryVector3 = new VeryVector3();\r\n\r\n  public vecNumbers: VeryNumber[] = [new VeryNumber(), new VeryNumber(), new VeryNumber()];\r\n\r\n  public isVec: boolean = true;\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n\r\n  public clear(): void {\r\n\r\n  }\r\n\r\n\r\n\r\n}\r\n","export * from './IVeryVar';\r\nexport * from './veryExpression';\r\nexport * from './veryVarManager';\r\nexport * from './veryVariables';\r\nexport * from './variables';\r\nexport * from './varTools';","import { StateConst } from \"../state\";\r\nimport { IVeryVar } from \"./IVeryVar\";\r\nimport { ErrorInfo } from \"../utility\";\r\nimport { VerySceneVariables } from \"../scene\";\r\nimport { VE_Variables } from \"./variables\";\r\nimport { VE_Objects, VeryEngineObject } from \"../object\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { VE_Template } from \"../template\";\r\nimport { VeryExpression } from \"./veryExpression\";\r\n\r\nexport class VarTools {\r\n\r\n  /**\r\n   * ID\r\n   * @param var_id ID\r\n   */\r\n  public static IsVarID(var_id: string): boolean {\r\n    return var_id.indexOf(StateConst.VARIABLE_SYMBOL) > -1;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * 1. * -  ->  -> \r\n   * 2. .* - \r\n   * @param project_name \r\n   * @param object_id \r\n   * @param var_id ID\r\n   * @param error_info \r\n   */\r\n  public static GetVeryVar(project_name: string, object_id: string, var_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (var_id.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n      let varArray: string[] = var_id.split(StateConst.STATE_SEPARATOR);\r\n      if (varArray.length !== 2) {\r\n        error_info.isRight = false;\r\n        error_info.message = \".*ID\" + var_id + \"\";\r\n        return null;\r\n      }\r\n      else {\r\n        for (let i: number = 0; i < varArray.length; i++) {\r\n          varArray[i] = varArray[i].trim();\r\n        }\r\n        // .*\r\n        if (varArray[1].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n          let objects: VE_Objects = VE_Manager.objects(project_name);\r\n          if (objects.isCreated(varArray[0])) {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(varArray[0]);\r\n            let varID: string = varArray[1].substring(1);\r\n            if (veryObject.isCreatedVariable(varID)) {\r\n              return veryObject.getVariable(varID);\r\n            }\r\n            else if (veryObject.isCreatedFsm(varID)) {\r\n              error_info.isRight = false;\r\n              error_info.message = \"ID\" + var_id + \"\";\r\n              return null;\r\n            }\r\n            else if (veryObject.isCreatedExpression(varID)) {\r\n              error_info.isRight = false;\r\n              error_info.message = \"ID\" + var_id + \"\";\r\n              return null;\r\n            }\r\n            else if (veryObject.isCreatedTemplate(varID)) {\r\n              error_info.isRight = false;\r\n              error_info.message = \"ID\" + var_id + \"\";\r\n              return null;\r\n            }\r\n            else {\r\n              error_info.isRight = false;\r\n              error_info.message = \".*ID\" + var_id + \"\";\r\n              return null;\r\n            }\r\n          }\r\n          else {\r\n            error_info.isRight = false;\r\n            error_info.message = \".*ID\" + var_id + \"\";\r\n            return null;\r\n          }\r\n        }\r\n        else {\r\n          error_info.isRight = false;\r\n          error_info.message = \".*ID\" + var_id + \"\";\r\n          return null;\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      // *\r\n      if (var_id.startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n        var_id = var_id.substring(1);\r\n        let objects: VE_Objects = VE_Manager.objects(project_name);\r\n        if (objects.isCreated(object_id)) {\r\n          let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n          if (veryObject.isCreatedVariable(var_id)) {\r\n            return veryObject.getVariable(var_id);\r\n          }\r\n          else if (veryObject.isCreatedFsm(var_id)) {\r\n            error_info.isRight = false;\r\n            error_info.message = \"ID\" + var_id + \"\";\r\n            return null;\r\n          }\r\n          else if (veryObject.isCreatedExpression(var_id)) {\r\n            error_info.isRight = false;\r\n            error_info.message = \"ID\" + var_id + \"\";\r\n            return null;\r\n          }\r\n          else if (veryObject.isCreatedTemplate(var_id)) {\r\n            error_info.isRight = false;\r\n            error_info.message = \"ID\" + var_id + \"\";\r\n            return null;\r\n          }\r\n          else {\r\n            return VarTools.GetGlobalVar(VE_Manager.variables(project_name), var_id, error_info);\r\n          }\r\n        }\r\n        else {\r\n          return VarTools.GetGlobalVar(VE_Manager.variables(project_name), var_id, error_info);\r\n        }\r\n      }\r\n      else {\r\n        error_info.isRight = false;\r\n        error_info.message = \"*ID\" + var_id + \"\";\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param global_vars \r\n   * @param var_id ID\r\n   * @param error_info \r\n   */\r\n  public static GetGlobalVar(global_vars: VE_Variables, var_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (global_vars.isCreatedVariable(var_id)) {\r\n      return global_vars.getVariable(var_id);\r\n    }\r\n    else if (global_vars.isCreatedExpression(var_id)) {\r\n      error_info.isRight = false;\r\n      error_info.message = \"ID\" + var_id + \"\";\r\n      return null;\r\n    }\r\n    else if (global_vars.isCreatedTemplate(var_id)) {\r\n      error_info.isRight = false;\r\n      error_info.message = \"ID\" + var_id + \"\";\r\n      return null;\r\n    }\r\n    else {\r\n      return VarTools.GetSceneVar(var_id, error_info);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param var_id ID\r\n   * @param error_info \r\n   */\r\n  public static GetSceneVar(var_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (VerySceneVariables.Variables.isCreatedVariable(var_id)) {\r\n      return VerySceneVariables.Variables.getVariable(var_id);\r\n    }\r\n    else if (VerySceneVariables.Variables.isCreatedExpression(var_id)) {\r\n      error_info.isRight = false;\r\n      error_info.message = \"ID\" + var_id + \"\";\r\n      return null;\r\n    }\r\n    else {\r\n      error_info.isRight = false;\r\n      error_info.message = \"ID\" + var_id + \"\";\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * 1. * -  -> \r\n   * 2. .* - \r\n   * @param project_name \r\n   * @param object_id \r\n   * @param var_id ID\r\n   * @param error_info \r\n   */\r\n  public static GetTemplate(project_name: string, object_id: string, var_id: string, error_info: ErrorInfo): Nullable<VE_Template> {\r\n    if (var_id.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n      let varArray: string[] = var_id.split(StateConst.STATE_SEPARATOR);\r\n      if (varArray.length !== 2) {\r\n        error_info.isRight = false;\r\n        error_info.message = \".*ID\" + var_id + \"\";\r\n        return null;\r\n      }\r\n      else {\r\n        for (let i: number = 0; i < varArray.length; i++) {\r\n          varArray[i] = varArray[i].trim();\r\n        }\r\n        // .*\r\n        if (varArray[1].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n          let objects: VE_Objects = VE_Manager.objects(project_name);\r\n          if (objects.isCreated(varArray[0])) {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(varArray[0]);\r\n            let varID: string = varArray[1].substring(1);\r\n            if (veryObject.isCreatedTemplate(varID)) {\r\n              return veryObject.getTemplate(varID);\r\n            }\r\n            else {\r\n              error_info.isRight = false;\r\n              error_info.message = \".*ID\" + var_id + \"\";\r\n              return null;\r\n            }\r\n          }\r\n          else {\r\n            error_info.isRight = false;\r\n            error_info.message = \".*ID\" + var_id + \"\";\r\n            return null;\r\n          }\r\n        }\r\n        else {\r\n          error_info.isRight = false;\r\n          error_info.message = \".*ID\" + var_id + \"\";\r\n          return null;\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      // *\r\n      if (var_id.startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n        var_id = var_id.substring(1);\r\n        let objects: VE_Objects = VE_Manager.objects(project_name);\r\n        if (objects.isCreated(object_id)) {\r\n          let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n          if (veryObject.isCreatedTemplate(var_id)) {\r\n            return veryObject.getTemplate(var_id);\r\n          }\r\n        }\r\n        let globalVars: VE_Variables = VE_Manager.variables(project_name);\r\n        if (globalVars.isCreatedTemplate(var_id)) {\r\n          return globalVars.getTemplate(var_id);\r\n        }\r\n        else {\r\n          error_info.isRight = false;\r\n          error_info.message = \"*ID\" + var_id + \"\";\r\n          return null;\r\n        }\r\n      }\r\n      else {\r\n        error_info.isRight = false;\r\n        error_info.message = \"*ID\" + var_id + \"\";\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public static GetVeryVarWithExpression(project_name: string, object_id: string, var_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (var_id.indexOf(StateConst.STATE_SEPARATOR) > -1) {\r\n      let varArray: string[] = var_id.split(StateConst.STATE_SEPARATOR);\r\n      if (varArray.length !== 2) {\r\n        error_info.isRight = false;\r\n        error_info.message = \".*ID\" + var_id + \"\";\r\n        return null;\r\n      }\r\n      else {\r\n        for (let i: number = 0; i < varArray.length; i++) {\r\n          varArray[i] = varArray[i].trim();\r\n        }\r\n        // .*\r\n        if (varArray[1].startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n          let objects: VE_Objects = VE_Manager.objects(project_name);\r\n          if (objects.isCreated(varArray[0])) {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(varArray[0]);\r\n            let varID: string = varArray[1].substring(1);\r\n            if (veryObject.isCreatedVariable(varID)) {\r\n              return veryObject.getVariable(varID);\r\n            }\r\n            else if (veryObject.isCreatedFsm(varID)) {\r\n              return veryObject.getFsm(varID).fsmVar;\r\n            }\r\n            else if (veryObject.isCreatedExpression(varID)) {\r\n              return new VeryExpression(veryObject.getExpression(varID));\r\n            }\r\n            else if (veryObject.isCreatedTemplate(varID)) {\r\n              error_info.isRight = false;\r\n              error_info.message = \"ID\" + var_id + \"\";\r\n              return null;\r\n            }\r\n            else {\r\n              error_info.isRight = false;\r\n              error_info.message = \".*ID\" + var_id + \"\";\r\n              return null;\r\n            }\r\n          }\r\n          else {\r\n            error_info.isRight = false;\r\n            error_info.message = \".*ID\" + var_id + \"\";\r\n            return null;\r\n          }\r\n        }\r\n        else {\r\n          error_info.isRight = false;\r\n          error_info.message = \".*ID\" + var_id + \"\";\r\n          return null;\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      // *\r\n      if (var_id.startsWith(StateConst.VARIABLE_SYMBOL)) {\r\n        var_id = var_id.substring(1);\r\n        let objects: VE_Objects = VE_Manager.objects(project_name);\r\n        if (objects.isCreated(object_id)) {\r\n          let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n          if (veryObject.isCreatedVariable(var_id)) {\r\n            return veryObject.getVariable(var_id);\r\n          }\r\n          else if (veryObject.isCreatedFsm(var_id)) {\r\n            return veryObject.getFsm(var_id).fsmVar;\r\n          }\r\n          else if (veryObject.isCreatedExpression(var_id)) {\r\n            return new VeryExpression(veryObject.getExpression(var_id));\r\n          }\r\n          else if (veryObject.isCreatedTemplate(var_id)) {\r\n            error_info.isRight = false;\r\n            error_info.message = \"ID\" + var_id + \"\";\r\n            return null;\r\n          }\r\n          else {\r\n            return VarTools.GetGlobalVarWithExpression(VE_Manager.variables(project_name), var_id, error_info);\r\n          }\r\n        }\r\n        else {\r\n          return VarTools.GetGlobalVarWithExpression(VE_Manager.variables(project_name), var_id, error_info);\r\n        }\r\n      }\r\n      else {\r\n        error_info.isRight = false;\r\n        error_info.message = \"*ID\" + var_id + \"\";\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public static GetGlobalVarWithExpression(global_vars: VE_Variables, var_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (global_vars.isCreatedVariable(var_id)) {\r\n      return global_vars.getVariable(var_id);\r\n    }\r\n    else if (global_vars.isCreatedExpression(var_id)) {\r\n      return new VeryExpression(global_vars.getExpression(var_id));\r\n    }\r\n    else if (global_vars.isCreatedTemplate(var_id)) {\r\n      error_info.isRight = false;\r\n      error_info.message = \"ID\" + var_id + \"\";\r\n      return null;\r\n    }\r\n    else {\r\n      return VarTools.GetSceneVarWithExpression(var_id, error_info);\r\n    }\r\n  }\r\n\r\n  public static GetSceneVarWithExpression(var_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (VerySceneVariables.Variables.isCreatedVariable(var_id)) {\r\n      return VerySceneVariables.Variables.getVariable(var_id);\r\n    }\r\n    else if (VerySceneVariables.Variables.isCreatedExpression(var_id)) {\r\n      return new VeryExpression(VerySceneVariables.Variables.getExpression(var_id));\r\n    }\r\n    else {\r\n      error_info.isRight = false;\r\n      error_info.message = \"ID\" + var_id + \"\";\r\n      return null;\r\n    }\r\n  }\r\n\r\n}","import { VE_VariableData } from \"../dataSource\";\r\nimport { IVeryVar } from \"./IVeryVar\";\r\nimport { VE_Template } from \"../template\";\r\nimport { IExpression } from \"../expression\";\r\n\r\nexport class VE_Variables {\r\n\r\n  public get projectName(): string {\r\n    return this._projectName;\r\n  }\r\n  private _projectName: string = '';\r\n\r\n  public varData: VE_VariableData;\r\n\r\n  private _veryVars: { [key: string]: IVeryVar } = {};\r\n  private _tempalteVars: { [key: string]: VE_Template } = {};\r\n  private _expressions: { [key: string]: IExpression } = {};\r\n\r\n  constructor(project_name: string) {\r\n    this._projectName = project_name;\r\n    this.varData = new VE_VariableData(project_name);\r\n  }\r\n\r\n  public isCreated(id: string): boolean {\r\n    if(this._veryVars[id] || this._tempalteVars[id] || this._expressions[id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public isCreatedVariable(id: string): boolean {\r\n    if(this._veryVars[id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addVariable(id: string, very_var: IVeryVar): void {\r\n    this._veryVars[id] = very_var;\r\n  }\r\n\r\n  public getVariable(id: string): IVeryVar {\r\n    return this._veryVars[id];\r\n  }\r\n\r\n  public isCreatedTemplate(id: string): boolean {\r\n    if(this._tempalteVars[id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addTemplate(id: string, template: VE_Template): void {\r\n    this._tempalteVars[id] = template;\r\n  }\r\n\r\n  public getTemplate(id: string): VE_Template {\r\n    return this._tempalteVars[id];\r\n  }\r\n\r\n  public isCreatedExpression(id: string): boolean {\r\n    if(this._expressions[id]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addExpression(id: string, exp: IExpression): void {\r\n    this._expressions[id] = exp;\r\n  }\r\n\r\n  public getExpression(id: string): IExpression {\r\n    return this._expressions[id];\r\n  }\r\n\r\n\r\n  public clear(): void {\r\n    if(this.varData) {\r\n      this.varData.clear();\r\n    }\r\n    this._veryVars = {};\r\n    this._expressions = {};\r\n    this._tempalteVars = {};\r\n  }\r\n\r\n\r\n\r\n}","import { IVeryVar } from \"./IVeryVar\";\r\nimport { IExpression, ConstantExpression } from \"../expression\";\r\nimport { ErrorInfo } from \"../utility\";\r\n\r\nexport class VeryExpression implements IVeryVar {\r\n  public get varType(): string {\r\n    return this._value.expType;\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"VeryExpression\";\r\n  }\r\n\r\n  public get ID(): string {\r\n    return \"VeryExpression|\";\r\n  }\r\n\r\n  public name: string = '';\r\n\r\n  public get value(): IExpression {\r\n    return this._value;\r\n  }\r\n  public set value(val: IExpression) {\r\n    this._value = val;\r\n  }\r\n  private _value: IExpression = ConstantExpression.Empty();\r\n\r\n  public get isNull(): boolean {\r\n    return this._value === null;\r\n  }\r\n\r\n  constructor(val: IExpression) {\r\n    this._value = val;\r\n  }\r\n\r\n  public setValue(val: any) {\r\n    this._value = val;\r\n  }\r\n\r\n  // \r\n  public getValue(): any {\r\n    return this._value.evaluate();\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n    let newVal = parseFloat(value_str);\r\n    if (!isNaN(newVal)) {\r\n      return newVal;\r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message =\r\n        \": \" +\r\n        this.varType +\r\n        \"\" +\r\n        value_str +\r\n        \"\";\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    return new VeryExpression(this._value);\r\n  }\r\n}","import { ShowError } from \"../html/showError\";\r\nimport { IVeryVar } from \"./IVeryVar\";\r\nimport { ErrorInfo } from \"../utility\";\r\nimport { VE_Variables } from \"./variables\";\r\nimport { VE_Manager } from \"../manager\";\r\nimport { VE_Objects, VeryEngineObject } from \"../object\";\r\nimport { VE_Template } from \"../template\";\r\nimport { GameGlobal, VE_ErrorManager, VE_Error } from \"../global\";\r\nimport { VeryExpression } from \"./veryExpression\";\r\nimport { Severity } from \"../enum\";\r\n\r\nexport class VeryVarManager {\r\n\r\n  // private static _veryVarTypes: { [key: string]: IVeryVar } = {};\r\n\r\n  private static _veryVarFunctions: { [key: string]: Function } = {};\r\n\r\n  public static hasVarType(var_type: string): boolean {\r\n    var_type = var_type.toLowerCase();\r\n    if (this._veryVarFunctions[var_type]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // public static addVarType(var_type: string, var_prototype: IVeryVar): void {\r\n  //   // \r\n  //   if (!GameGlobal.PlatformLoaded) {\r\n  //     var_type = var_type.toLowerCase().trim();\r\n  //     // \r\n  //     if (this._veryVarTypes[var_type]) {\r\n  //       ShowError.showError('VeryVar' + var_type + '' + var_prototype.className);\r\n  //     } else {\r\n  //       // console.log(var_proto.VarType);\r\n  //       this._veryVarTypes[var_type] = var_prototype;\r\n  //       // let a = Object.create(this.GetVarType(var_type));\r\n  //       // console.log(a.Value);\r\n  //       // a.Value = true;\r\n  //       // console.log(a.Value);\r\n  //       // a.Value = 1234;\r\n  //       // console.log(a.getValue());\r\n  //       // console.log(this.GetVarType(var_type).__proto__);\r\n  //     }\r\n  //   }\r\n  // }\r\n\r\n  public static addVarType(var_function: Function): void {\r\n    // \r\n    if (!GameGlobal.PlatformLoaded) {\r\n      let tempVar: any = new var_function.prototype.constructor();\r\n      // console.log(`ID  ${tempVar.ID}  ${tempVar.className} `);\r\n      let ids: string[] = tempVar.ID.split('|');\r\n      for (let i: number = 0; i < ids.length; i++) {\r\n        let id: string = ids[i].trim().toLowerCase();\r\n        if (this._veryVarFunctions[id]) {\r\n          VE_ErrorManager.Add(new VE_Error('', `${id}${tempVar.className}`, '', Severity.Error));\r\n        } else {\r\n          this._veryVarFunctions[id] = var_function;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public static createVariable(var_id: string, var_type: string, value: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    var_type = var_type.toLowerCase();\r\n    if (!this._veryVarFunctions[var_type]) {\r\n      error_info.isRight = false;\r\n      error_info.message = `` + var_type;\r\n      return null;\r\n    }\r\n\r\n    let variable: any;\r\n    try {\r\n      // variable = Object.create(this.getVarType(var_type));\r\n      // newObject.createprototype\r\n      variable = new this._veryVarFunctions[var_type].prototype.constructor();\r\n\r\n      if (!variable) {\r\n        error_info.isRight = false;\r\n        error_info.message = '' + var_type;\r\n        return null;\r\n      }\r\n      let result: any = (<IVeryVar>variable).initValue(value, error_info);\r\n      if (error_info.isRight) {\r\n        (<IVeryVar>variable).setValue(result);\r\n        (<IVeryVar>variable).name = var_id;\r\n        return <IVeryVar>variable;\r\n      } else {\r\n        return null;\r\n      }\r\n    } catch (error) {\r\n      console.log(`${error.message}`);\r\n      error_info.isRight = false;\r\n      error_info.message = '' + var_type + '' + error.message;\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static getVarType(var_type: string): any {\r\n    var_type = var_type.toLowerCase();\r\n    if (this._veryVarFunctions && this._veryVarFunctions[var_type]) {\r\n      return this._veryVarFunctions[var_type];\r\n    }\r\n    return null;\r\n  }\r\n\r\n\r\n  public static remove(var_type: string): void {\r\n    var_type = var_type.toLowerCase();\r\n    delete this._veryVarFunctions[var_type];\r\n  }\r\n\r\n  // *\r\n  // .*\r\n  public static getVariable(var_id: string, project_name: string, object_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (project_name === '') {\r\n      return this.getSceneVariable(var_id, error_info);\r\n    } else if (object_id === '') {\r\n      return this.getGlobalVariable(var_id, project_name, error_info);\r\n    } else {\r\n      let objects: VE_Objects = VE_Manager.objects(project_name);\r\n      if (objects) {\r\n        let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n        if (veryObject) {\r\n          if (veryObject.isCreatedVariable(var_id)) {\r\n            return veryObject.getVariable(var_id);\r\n          } else if (veryObject.isCreatedExpression(var_id)) {\r\n            return new VeryExpression(veryObject.getExpression(var_id));\r\n          } else if (veryObject.isCreatedFsm(var_id)) {\r\n            return veryObject.getFsm(var_id).fsmVar;\r\n          } else {\r\n            return this.getGlobalVariable(var_id, project_name, error_info);\r\n          }\r\n        } else {\r\n          return this.getGlobalVariable(var_id, project_name, error_info);\r\n        }\r\n      } else {\r\n        return this.getGlobalVariable(var_id, project_name, error_info);\r\n      }\r\n    }\r\n  }\r\n\r\n  // *.*\r\n  // .*.*\r\n  public static getTemplateVariable(template_var_id: string, var_id: string, project_name: string, object_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (project_name === '') {\r\n      // \r\n      error_info.isRight = false;\r\n      error_info.message = \"\" + template_var_id + \"\\n\";\r\n      return null;\r\n    }\r\n    else {\r\n      if (object_id !== '')  //\r\n      {\r\n        let objects: VE_Objects = VE_Manager.objects(project_name);\r\n        if (!objects) {\r\n          error_info.isRight = false;\r\n          error_info.message += \"\" + object_id + \"\\n\";\r\n          return null;\r\n        }\r\n        else {\r\n          if (objects.isCreated(object_id)) {\r\n            let veryObject: VeryEngineObject = objects.getVeryObject(object_id);\r\n            if (veryObject.isCreatedTemplate(template_var_id)) {\r\n              let template: VE_Template = veryObject.getTemplate(template_var_id);\r\n              if (template.templateInstance === null) {\r\n                error_info.isRight = false;\r\n                error_info.message += \"\" + template_var_id + \"\\n\";\r\n                return null;\r\n              }\r\n              else {\r\n                if (template.templateInstance.isCreatedVariable(var_id)) {\r\n                  return template.templateInstance.getVariable(var_id);\r\n                }\r\n                else if (template.templateInstance.isCreatedExpression(var_id)) {\r\n                  return new VeryExpression(template.templateInstance.getExpression(var_id));\r\n                }\r\n                else if (template.templateInstance.isCreatedFsm(var_id)) {\r\n                  return template.templateInstance.getFsm(var_id).fsmVar;\r\n                }\r\n                else {\r\n                  error_info.isRight = false;\r\n                  error_info.message += \"\" + template_var_id + \"\" + var_id + \"\\n\";\r\n                  return null;\r\n                }\r\n              }\r\n            }\r\n            else {\r\n              error_info.isRight = false;\r\n              error_info.message += \"\" + template_var_id + \"\\n\";\r\n              return null;\r\n            }\r\n          }\r\n          else {\r\n            error_info.isRight = false;\r\n            error_info.message += \"\" + object_id + \"\\n\";\r\n            return null;\r\n          }\r\n        }\r\n      }\r\n      // \r\n      else {\r\n        let variables: VE_Variables = VE_Manager.variables(project_name);\r\n        if (!variables) {\r\n          error_info.isRight = false;\r\n          error_info.message += \"\" + template_var_id + \"\\n\";\r\n          return null;\r\n        }\r\n        else {\r\n          if (variables.isCreatedTemplate(template_var_id)) {\r\n            let template: VE_Template = variables.getTemplate(template_var_id);\r\n            if (template.templateInstance === null) {\r\n              error_info.isRight = false;\r\n              error_info.message += \"\" + template_var_id + \"\\n\";\r\n              return null;\r\n            }\r\n            else {\r\n              if (template.templateInstance.isCreatedVariable(var_id)) {\r\n                return template.templateInstance.getVariable(var_id);\r\n              }\r\n              else if (template.templateInstance.isCreatedExpression(var_id)) {\r\n                return new VeryExpression(template.templateInstance.getExpression(var_id));\r\n              }\r\n              else if (template.templateInstance.isCreatedFsm(var_id)) {\r\n                return template.templateInstance.getFsm(var_id).fsmVar;\r\n              }\r\n              else {\r\n                error_info.isRight = false;\r\n                error_info.message += \"\" + template_var_id + \"\" + var_id + \"\\n\";\r\n                return null;\r\n              }\r\n            }\r\n          }\r\n          else {\r\n            error_info.isRight = false;\r\n            error_info.message += \"\" + template_var_id + \"\\n\";\r\n            return null;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public static getGlobalVariable(var_id: string, project_name: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    if (project_name === '') {\r\n      return this.getSceneVariable(var_id, error_info);\r\n    } else {\r\n      let variables: VE_Variables = VE_Manager.variables(project_name);\r\n      if (variables) {\r\n        if (variables.isCreatedVariable(var_id)) {\r\n          return variables.getVariable(var_id);\r\n        } else if (variables.isCreatedExpression(var_id)) {\r\n          return new VeryExpression(variables.getExpression(var_id));\r\n        } else {\r\n          return this.getSceneVariable(var_id, error_info);\r\n        }\r\n      } else {\r\n        return this.getSceneVariable(var_id, error_info);\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public static getSceneVariable(var_id: string, error_info: ErrorInfo): Nullable<IVeryVar> {\r\n    error_info.isRight = false;\r\n    error_info.message = ''\r\n    return null;\r\n  }\r\n\r\n  public static dispose(): void {\r\n    VeryVarManager._veryVarFunctions = {};\r\n  }\r\n}\r\n","import { IVeryVar } from \"./IVeryVar\";\r\nimport { ErrorInfo } from \"../utility/errorInfo\";\r\nimport { VeryVarManager } from \"./veryVarManager\";\r\nimport { GameObject } from \"../babylon/babylonVariables\";\r\nimport { VeryExpression } from \"./veryExpression\";\r\n\r\nexport class VeryBool implements IVeryVar {\r\n  public get varType(): string {\r\n    return \"bool\";\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"VeryBool\";\r\n  }\r\n\r\n  public get ID(): string {\r\n    return 'bool|';\r\n  }\r\n\r\n  public name: string = '';\r\n\r\n  private _isExpression: boolean = false;\r\n  private _expression: Nullable<VeryExpression> = null;\r\n\r\n  public get value(): boolean {\r\n    if (this._isExpression) {\r\n      return this._expression!.value.evaluate();\r\n    }\r\n    return this._value;\r\n  }\r\n  public set value(val: boolean) {\r\n    this._value = val;\r\n  }\r\n  private _value: boolean = false;\r\n\r\n  constructor() {\r\n    this._value = false;\r\n  }\r\n\r\n  public setValue(val: any): void {\r\n    this._value = val;\r\n  }\r\n\r\n  public getValue(): any {\r\n    if (this._isExpression) {\r\n      return this._expression!.value.evaluate();\r\n    }\r\n    return this._value;\r\n  }\r\n\r\n  public setExpression(expression: VeryExpression): void {\r\n    this._expression = expression;\r\n    this._isExpression = true;\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n    value_str = value_str.trim();\r\n    if (value_str.toLowerCase() === \"false\" || value_str === \"\") {\r\n      return false;\r\n    } else if (value_str.toLowerCase() === \"true\" || value_str === \"\") {\r\n      return true;\r\n    } else if (\r\n      value_str === \"\" ||\r\n      value_str.toLowerCase() === \"null\" ||\r\n      value_str.toLowerCase() === \"none\"\r\n    ) {\r\n      return false;\r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message =\r\n        \": \" +\r\n        this.varType +\r\n        \"\" +\r\n        value_str +\r\n        \"\";\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    let varClone: VeryBool = new VeryBool();\r\n    varClone.setValue(this._value);\r\n    return varClone;\r\n  }\r\n}\r\n\r\nexport class VeryNumber implements IVeryVar {\r\n  public get varType(): string {\r\n    return \"number\";\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"VeryNumber\";\r\n  }\r\n\r\n  public get ID(): string {\r\n    return 'number|';\r\n  }\r\n\r\n  public name: string = '';\r\n\r\n  private _isExpression: boolean = false;\r\n  private _expression: Nullable<VeryExpression> = null;\r\n\r\n  public get value(): number {\r\n    if (this._isExpression && this._expression) {\r\n      return this._expression.value.evaluate();\r\n    }\r\n    return this._value;\r\n  }\r\n  public set value(val: number) {\r\n    this._value = val;\r\n  }\r\n  private _value: number = 0;\r\n\r\n  constructor() {\r\n    this._value = 0;\r\n  }\r\n\r\n  public setValue(val: number): void {\r\n    this._value = val;\r\n  }\r\n\r\n  public setExpression(expression: VeryExpression): void {\r\n    this._expression = expression;\r\n    this._isExpression = true;\r\n  }\r\n\r\n  public getValue(): any {\r\n    if (this._isExpression && this._expression) {\r\n      return this._expression.value.evaluate();\r\n    }\r\n    return this._value;\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n    let newVal = parseFloat(value_str);\r\n    if (!isNaN(newVal)) {\r\n      return newVal;\r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message =\r\n        \": \" +\r\n        this.varType +\r\n        \"\" +\r\n        value_str +\r\n        \"\";\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    let varClone: VeryNumber = new VeryNumber();\r\n    varClone.setValue(this._value);\r\n    return varClone;\r\n  }\r\n}\r\n\r\nexport class VeryString implements IVeryVar {\r\n  public get varType(): string {\r\n    return \"string\";\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"VeryString\";\r\n  }\r\n\r\n  public get ID(): string {\r\n    return 'string|';\r\n  }\r\n\r\n  public name: string = '';\r\n\r\n  private _isExpression: boolean = false;\r\n  private _expression: Nullable<VeryExpression> = null;\r\n\r\n  public get value(): string {\r\n    if (this._isExpression) {\r\n      return this._expression!.value.evaluate().toString();\r\n    }\r\n    return this._value;\r\n  }\r\n  public set value(val: string) {\r\n    this._value = val;\r\n  }\r\n  private _value: string = \"\";\r\n\r\n  constructor() {\r\n    this._value = \"\";\r\n  }\r\n\r\n  public getValue(): any {\r\n    if (this._isExpression) {\r\n      return this._expression!.value.evaluate().toString();\r\n    }\r\n    return this._value;\r\n  }\r\n\r\n  public setValue(val: any): void {\r\n    this._value = val;\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n    let rValue: string;\r\n    if (\r\n      value_str.startsWith(\"'\") ||\r\n      value_str.startsWith('\"') ||\r\n      value_str.startsWith(\"\") ||\r\n      value_str.startsWith(\"\")\r\n    ) {\r\n      rValue = value_str.substring(1, value_str.length - 2);\r\n    } else {\r\n      rValue = value_str;\r\n    }\r\n    return rValue;\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    let varClone: VeryString = new VeryString();\r\n    varClone.setValue(this._value);\r\n    return varClone;\r\n  }\r\n\r\n  public setExpression(expression: VeryExpression): void {\r\n    this._isExpression = true;\r\n    this._expression = expression;\r\n  }\r\n}\r\n\r\nexport class VeryVector3 implements IVeryVar {\r\n  public get varType(): string {\r\n    return \"Vector3\";\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"VeryVector3\";\r\n  }\r\n\r\n  public get ID(): string {\r\n    return 'Vector3|';\r\n  }\r\n\r\n  public name: string = '';\r\n\r\n  private _isExpression: boolean = false;\r\n  private _expression: Nullable<VeryExpression> = null;\r\n\r\n  public get value(): BABYLON.Vector3 {\r\n    if (this._isExpression && this._expression) {\r\n      return this._expression.value.evaluate();\r\n    }\r\n    return this._value;\r\n  }\r\n  public set value(val: BABYLON.Vector3) {\r\n    this._value = val;\r\n  }\r\n  private _value: BABYLON.Vector3 = BABYLON.Vector3.Zero();\r\n\r\n  constructor() {\r\n    this._value = BABYLON.Vector3.Zero();\r\n  }\r\n\r\n  public getValue(): any {\r\n    if (this._isExpression && this._expression) {\r\n      return this._expression.value.evaluate();\r\n    }\r\n    return this._value;\r\n  }\r\n\r\n  public setValue(val: any) {\r\n    this._value = val;\r\n  }\r\n\r\n  public setExpression(expression: VeryExpression): void {\r\n    this._isExpression = true;\r\n    this._expression = expression;\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n    let rValue: BABYLON.Vector3 = BABYLON.Vector3.Zero();\r\n    if (value_str === \"none\" || value_str === \"null\" || value_str === \"\") {\r\n      return rValue;\r\n    } else {\r\n      let vec3Str: string[] = value_str.split(/,|/);\r\n      if (vec3Str.length !== 3) {\r\n        error_info.isRight = false;\r\n        error_info.message =\r\n          \": \" +\r\n          this.varType +\r\n          \", : \" +\r\n          value_str +\r\n          \"Vector3|\";\r\n        return null;\r\n      } else {\r\n        let n1: number = parseFloat(vec3Str[0]);\r\n        let n2: number = parseFloat(vec3Str[1]);\r\n        let n3: number = parseFloat(vec3Str[2]);\r\n        if (isNaN(n1) || isNaN(n2) || isNaN(n3)) {\r\n          error_info.isRight = false;\r\n          error_info.message =\r\n            \": \" +\r\n            this.varType +\r\n            \", : \" +\r\n            value_str +\r\n            \"Vector3|\";\r\n          return null;\r\n        } else {\r\n          rValue = new BABYLON.Vector3(n1, n2, n3);\r\n        }\r\n      }\r\n    }\r\n    return rValue;\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    let varClone: VeryVector3 = new VeryVector3();\r\n    let r: BABYLON.Vector3 = new BABYLON.Vector3(\r\n      this._value.x,\r\n      this._value.y,\r\n      this._value.z\r\n    );\r\n    varClone.setValue(r);\r\n    return varClone;\r\n  }\r\n}\r\n\r\nexport class VeryGameObject implements IVeryVar {\r\n  public get varType(): string {\r\n    return \"GameObject\";\r\n  }\r\n\r\n  public get className(): string {\r\n    return \"VeryGameObject\";\r\n  }\r\n\r\n  public get ID(): string {\r\n    return 'GameObject|';\r\n  }\r\n\r\n  public name: string = '';\r\n\r\n  public get value(): Nullable<GameObject> {\r\n    return this._value;\r\n  }\r\n  public set value(val: Nullable<GameObject>) {\r\n    this._value = val;\r\n  }\r\n  private _value: Nullable<GameObject> = null;\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public setValue(val: any) {\r\n    this._value = val;\r\n  }\r\n\r\n  // \r\n  public getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  public initValue(value_str: string, error_info: ErrorInfo): any {\r\n\r\n    if (value_str === '' || value_str.toLowerCase() === 'null' || value_str.toLowerCase() === 'none') {\r\n      return null;\r\n    } else {\r\n      let rValue: Nullable<GameObject> = GameObject.Find(value_str);\r\n      if (rValue === null) {\r\n        error_info.isRight = false;\r\n        error_info.message =\r\n          \": \" +\r\n          this.varType +\r\n          \"\" +\r\n          value_str +\r\n          \"\";\r\n      }\r\n      return rValue;\r\n    }\r\n  }\r\n\r\n  public clone(): IVeryVar {\r\n    let varClone: VeryGameObject = new VeryGameObject();\r\n    varClone.setValue(this._value);\r\n    return varClone;\r\n  }\r\n}\r\n\r\n\r\nVeryVarManager.addVarType(VeryBool);\r\nVeryVarManager.addVarType(VeryNumber);\r\nVeryVarManager.addVarType(VeryString);\r\nVeryVarManager.addVarType(VeryVector3);\r\nVeryVarManager.addVarType(VeryGameObject);\r\n\r\n","import { VeryTable } from \"../verytable/index\";\r\nimport { ShowError } from \"./html/showError\";\r\nimport { LoaderManager } from \"./loader/loaderManager\";\r\nimport { ErrorInfo } from \"./utility\";\r\nimport { IVeryVar, VeryVarManager, VeryBool } from \"./variables\";\r\nimport { VE_Expressions } from \"./expression\";\r\nimport { VE_ErrorManager, GameGlobal } from \"./global\";\r\nimport { VE_Reset } from \"./manager\";\r\n\r\n// entrance\r\nexport * from \"./index\";\r\n\r\nexport class VeryEngine {\r\n  \r\n\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n\r\n  public init(data: Array<Array<string>>, project_name: string): void {\r\n\r\n    // \r\n    VE_Reset.dispose();\r\n\r\n    // TODO: sTable1\r\n    let tableData: VeryTable = new VeryTable(data, 'VeRyEngine');\r\n    // console.log(tableData.pos(7, 5));\r\n    // console.log(tableData);\r\n    // console.log('');\r\n\r\n    // VeryVarManager.addVarType('bool', new VeryBool());\r\n\r\n    // let errorInfo: ErrorInfo = new ErrorInfo();\r\n    // let v1: Nullable<IVeryVar> = VeryVarManager.createVariable('a', '', '3.1415926', errorInfo);\r\n    // console.log(v1!.getValue());\r\n    // errorInfo.clear();\r\n    // let v2: Nullable<IVeryVar> = VeryVarManager.createVariable('b', '', '', errorInfo);\r\n    // console.log(v2!.getValue());\r\n    // errorInfo.clear();\r\n    // let v3: Nullable<IVeryVar> = VeryVarManager.createVariable('c', '', '1,2,3', errorInfo);\r\n    // console.log(v3!.clone());\r\n    // errorInfo.clear();\r\n    // let v4: Nullable<IVeryVar> = VeryVarManager.createVariable('c', '', 'ac1,dg2,3', errorInfo);\r\n    // console.log(v4);\r\n    // console.log(errorInfo.message);\r\n\r\n\r\n    let manager: LoaderManager = new LoaderManager();\r\n    let result: boolean = manager.load(projectName, tableData);\r\n    console.log(`${result}`);\r\n    if(!result) {\r\n      VE_ErrorManager.Print();\r\n    }\r\n\r\n    // \r\n    GameGlobal.PlatformLoaded = true;\r\n\r\n\r\n\r\n    // this.showErrorTest(tableData);\r\n  }\r\n\r\n\r\n  public showErrorTest(tableData: VeryTable): void {\r\n    // /*\r\n    ShowError.show('' + tableData.pos(7, 5));\r\n\r\n    ShowError.showError('' + tableData.pos(7, 5));\r\n\r\n    ShowError.showWarn('' + tableData.pos(7, 5));\r\n\r\n    ShowError.show('' + tableData.pos(7, 5));\r\n\r\n    ShowError.show('' + tableData.pos(7, 5));\r\n\r\n\r\n    document.getElementById(\"settingsButton\")!.addEventListener(\"click\", ShowError.close);\r\n    // */\r\n  }\r\n\r\n}","\r\nexport * from \"./veryTableRow\";\r\nexport * from \"./veryTable\";\r\nexport * from \"./veryTableSet\";\r\n","import { VeryTableRow } from \"./veryTableRow\";\r\n\r\nexport class VeryTable {\r\n  private _id: string = \"\";\r\n  public get ID(): string {\r\n    return this._id;\r\n  }\r\n  public set ID(id: string) {\r\n    this._id = id;\r\n  }\r\n\r\n  private _columnIDs: string[] = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];\r\n\r\n  private _rows: VeryTableRow[] = [];\r\n\r\n  public get RowCount(): number {\r\n    if (!this._rows) {\r\n      return 0;\r\n    } else {\r\n      return this._rows.length;\r\n    }\r\n  }\r\n\r\n  constructor(data: string[][], id = \"Sheet\") {\r\n    this._id = id;\r\n    this._rows = [];\r\n    if (data) {\r\n      for (let i = 0; i < data.length; i++) {\r\n        let newRow = new VeryTableRow(data[i]);\r\n        this._rows.push(newRow);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param row_index \r\n   * @param column_index \r\n   */\r\n  public getData(row_index: number, column_index: number): string {\r\n    // if (row_index >= 0 && row_index < this._rows.length) {\r\n    //   let row: VeryTableRow = this._rows[row_index];\r\n    //   return row.getData(column_index);\r\n    // } else {\r\n    //   return undefined;\r\n    // }\r\n    return this._rows[row_index].getData(column_index);\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param row_index \r\n   */\r\n  public getRow(row_index: number): VeryTableRow | undefined {\r\n    if (row_index >= 0 && row_index < this._rows.length) {\r\n      return this._rows[row_index];\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param row_index \r\n   * @param column_index \r\n   */\r\n  public pos(row_index: number, column_index: number): string {\r\n    // return \"\" + this.ID + \"\" + (row_index + 1) + \"\" + this.getColumnID(column_index) + \"\";\r\n    return \"\" + (row_index + 1) + \"\" + this.getColumnID(column_index) + \"\" + this.ID + \"\";\r\n  }\r\n\r\n  /**\r\n   * ID26\r\n   * @param column_index \r\n   */\r\n  private getColumnID(column_index: number): string {\r\n    if (column_index >= 0 && column_index < 26) {\r\n      return this._columnIDs[column_index];\r\n    } else if (column_index < 0) {\r\n      return 'error';\r\n    } else {\r\n      let a: number = Math.floor(column_index / 26);\r\n      let b: number = column_index % 26;\r\n      if (a === 0) {\r\n        return this._columnIDs[a];\r\n      } else {\r\n        return this._columnIDs[a - 1] + this._columnIDs[b];\r\n      }\r\n    }\r\n  }\r\n\r\n  // public addRowStringArray(row_data: string[]): void {\r\n\r\n  // }\r\n\r\n  // public addRowStrings(...strs: string[]): void {\r\n\r\n  // }\r\n\r\n  public addRow(data: VeryTableRow): void {\r\n    // \r\n    this._rows.push(data);\r\n\r\n  }\r\n\r\n\r\n}","\r\nexport class VeryTableRow {\r\n  public get Count(): number {\r\n    if (!this._rowData) {\r\n      return 0;\r\n    } else {\r\n      return this._rowData.length;\r\n    }\r\n  }\r\n\r\n  private _rowData: string[] = [];\r\n\r\n  constructor(row_data: string[]) {\r\n    // nullundefined\"\"\r\n    row_data.forEach((val, index, array) => {\r\n      if(!array[index]) {\r\n        array[index] = \"\";\r\n      }\r\n    });\r\n    this._rowData = row_data;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param column_index \r\n   */\r\n  public getData(column_index: number): string {\r\n    // if (column_index >= 0 && column_index < this.Count) {\r\n    //   return this._rowData[column_index];\r\n    // } else {\r\n    //   return undefined;\r\n    // }\r\n    return this._rowData[column_index];\r\n  }\r\n\r\n  public add(data: string): void {\r\n    this._rowData.push(data);\r\n  }\r\n\r\n  public insert(index: number, data: string): void {\r\n    // 2\r\n    this._rowData.push(data);\r\n    let tempData = this._rowData.slice(index);\r\n    tempData.push(data);\r\n    this._rowData = tempData;\r\n  }\r\n\r\n  public remove(index: number): void {\r\n    this._rowData.splice(index, 1);\r\n  }\r\n\r\n  public removeEnd(): void {\r\n    this._rowData.pop();\r\n  }\r\n\r\n  public isEmpty(): boolean {\r\n    if(!this._rowData) {\r\n      return true;\r\n    }\r\n    for(let i: number = 0; i < this._rowData.length; i++) {\r\n      if(this._rowData[i] === '' || this._rowData[i] === null || this._rowData[i] === undefined) {\r\n        continue;\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // public\r\n\r\n  // public remove(index: number): any {\r\n\r\n  // }\r\n}","// import { VeryTableRow } from \"./veryTableRow\";\r\n/**\r\n * 1. TypeScript\r\n * 2. \r\n */\r\nimport { VeryTable } from \"./veryTable\";\r\n\r\nexport class VeryTableSet {\r\n\r\n  private _tables: VeryTable[] = [];\r\n\r\n  public get Count(): number {\r\n    if (!this._tables) {\r\n      return 0;\r\n    } else {\r\n      return this._tables.length;\r\n    }\r\n  }\r\n\r\n  constructor(tables?: VeryTable[]) {\r\n    if (tables) {\r\n      this._tables = tables;\r\n    }\r\n  }\r\n\r\n  public getTable(index: number): VeryTable | undefined {\r\n    if (index >= 0 && index < this.Count) {\r\n      return this._tables[index];\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  public addTable(table: VeryTable): void {\r\n    this._tables.push(table);\r\n  }\r\n\r\n  public removeTable(index: number): void {\r\n    if (index >= 0 && index < this.Count) {\r\n      this._tables.splice(index, 1);\r\n    }\r\n  }\r\n\r\n\r\n}"]}