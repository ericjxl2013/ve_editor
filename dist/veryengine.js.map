{"version":3,"sources":["node_modules/_browser-pack@6.1.0@browser-pack/_prelude.js","src/game.ts","src/main.ts","src/veryengine/action/actionBehaviour.ts","src/veryengine/action/actions.ts","src/veryengine/action/assignment.ts","src/veryengine/action/index.ts","src/veryengine/enum/actionType.ts","src/veryengine/enum/index.ts","src/veryengine/enum/stateActionType.ts","src/veryengine/expression/index.ts","src/veryengine/expression/trueTree.ts","src/veryengine/global/gameGlobal.ts","src/veryengine/global/index.ts","src/veryengine/global/time.ts","src/veryengine/html/index.ts","src/veryengine/html/showError.ts","src/veryengine/index.ts","src/veryengine/object/index.ts","src/veryengine/object/objects.ts","src/veryengine/state/fsm.ts","src/veryengine/state/index.ts","src/veryengine/state/state.ts","src/veryengine/state/stateAction.ts","src/veryengine/state/stateConst.ts","src/veryengine/template/index.ts","src/veryengine/template/templates.ts","src/veryengine/trigger/index.ts","src/veryengine/trigger/triggerBehaviour.ts","src/veryengine/trigger/triggers.ts","src/veryengine/utility/dictionary.ts","src/veryengine/utility/errorInfo.ts","src/veryengine/utility/index.ts","src/veryengine/variables/index.ts","src/veryengine/variables/veryVarManager.ts","src/veryengine/variables/veryVariables.ts","src/veryengine/veryEngine.ts","src/verytable/index.ts","src/verytable/veryTable.ts","src/verytable/veryTableRow.ts","src/verytable/veryTableSet.ts"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","veryEngine_1","gameGlobal_1","Game","canvasElement","fps","this","_showFps","_canvas","GameGlobal","Canvas","_fps","_table","document","getElementById","prototype","createScene","_engine","dispose","BABYLON","Engine","engine","window","addEventListener","resize","_scene","Scene","camera","ArcRotateCamera","Vector3","setPosition","attachControl","lowerBetaLimit","upperBetaLimit","Math","PI","lowerRadiusLimit","displayLoadingUI","SceneLoader","Append","scene","hideLoadingUI","VeryEngine","init","hot1","getData","projectName","onBeforeRenderObservable","add","Time","_sum","animate","_this","runRenderLoop","width","clientWidth","render","updateFpsPos","toggleDebug","scenes","debugLayer","isVisible","hide","show","embedMode","style","right","body","innerHTML","getFps","toFixed","game","canvas","fpsLabel","game_1","__importDefault","default","actionType_1","VE_ActionBehaviour","ProjectName","ObjectID","ActionID","_erveryFrame","Object","defineProperty","ActionType","Normal","SetEveryFrame","is_every_frame","SetActionID","object_id","action_id","ParaParser","para_array","Update","OnUpdate","VE_Actions","VE_Assignment","__export","StateActionType","TrueTree","evaluate","clone","_frame","getDeltaTime","ShowError","initZone","errorZone","showMsg","prefix","error_msg","errorContentNow","errorContentPrefix","display","closeBtn","querySelector","that","showError","showWarn","clear","close","VE_Objects","dictionary_1","VE_Fsm","_id","_objectID","_fsmID","_stateDics","Dictionary","_states","hasState","state_value","ContainsKey","addState","state","Add","push","getState","GetValue","removeState","Remove","VE_State","fsm","_value","_stateActions","_assocaitedStates","_isSequence","_fsm","setValue","addAction","state_action","Mesh","bind","action","trigger_id","stateActionType_1","VE_StateAction","enabled","every_frame","is_sequence","_type","Action","_action","StateConst","STATE_SEPARATOR","VE_Templates","stateConst_1","VE_TriggerBehaviour","_logicalSwitch","_logicalExp","_triggerTargets","_triggerID","setTriggerID","addLogicalSwitch","exp","addTriggerTarget","sendEvent","eventProcess","paraParser","VE_Triggers","_keys","_values","Count","key","value","index","indexOf","splice","SetValue","ks","GetKeys","GetValues","ErrorInfo","isRight","message","showError_1","VeryVarManager","HasVarType","var_type","VeryVarTypes","AddVarType","var_proto","CreateVar","create","GetVarType","veryVarManager_1","VeryBool","VarType","val","getValue","initValue","value_str","error_info","toLowerCase","VeryInt","round","Value","newFloat","parseFloat","isNaN","VeryFloat","newVal","VeryNumber","VeryString","startsWith","substr","VeryVector3","Zero","index_1","data","project_name","tableData","VeryTable","console","log","pos","showErrorTest","veryTableRow_1","id","_columnIDs","_rows","newRow","VeryTableRow","row_index","column_index","getRow","ID","getColumnID","floor","b","addRow","row_data","_rowData","insert","tempData","slice","remove","removeEnd","pop","VeryTableSet","tables","_tables","getTable","addTable","table","removeTable"],"mappings":"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","file":"veryengine.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","/// <reference path=\"./dts/babylon.d.ts\"/>\r\n\r\nimport { VeryEngine, Time } from \"./veryengine/veryEngine\";\r\nimport { GameGlobal } from \"./veryengine/global/gameGlobal\";\r\n\r\nexport default class Game {\r\n\tprivate _canvas: HTMLCanvasElement;\r\n\tprivate _fps: HTMLElement;\r\n\tprivate _table!: HTMLElement;\r\n\tprivate _showFps: boolean = true;\r\n\tprivate _engine!: BABYLON.Engine;\r\n\tprivate _scene!: BABYLON.Scene;\r\n\t// private _camera!: BABYLON.FreeCamera;\r\n\r\n\tconstructor(canvasElement: HTMLCanvasElement, fps: HTMLElement) {\r\n\t\tthis._canvas = canvasElement;\r\n\t\tGameGlobal.Canvas = this._canvas;\r\n\t\tthis._fps = fps;\r\n\t\t// this._engine = new BABYLON.Engine(this._canvas, true);\r\n\t\tthis._table = document.getElementById(\"VeryTable\")!;\r\n\t}\r\n\r\n\t/**\r\n\t * 创建场景，并且启动\r\n\t */\r\n\tcreateScene(): Game {\r\n\t\t// 假设有运行中的engine，先停止，重新初始化\r\n\t\tif (this._engine) {\r\n\t\t\tthis._engine.dispose();\r\n\t\t}\r\n\t\tthis._engine = new BABYLON.Engine(this._canvas, true);\r\n\t\tGameGlobal.Engine = this._engine;\r\n\t\t// Resize\r\n\t\tlet engine = this._engine;\r\n\t\twindow.addEventListener(\"resize\", function () {\r\n\t\t\tengine.resize();\r\n\t\t});\r\n\r\n\t\tthis._scene = new BABYLON.Scene(this._engine);\r\n\t\tGameGlobal.Scene = this._scene;\r\n\r\n\t\t// 设定相机\r\n\t\tvar camera = new BABYLON.ArcRotateCamera(\"MainCamera\", 0, 0, 10, new BABYLON.Vector3(0, 0, 0), this._scene);\r\n    camera.setPosition(new BABYLON.Vector3(20, 200, 400));\r\n    camera.attachControl(this._canvas, true);\r\n    camera.lowerBetaLimit = 0.1;\r\n    camera.upperBetaLimit = (Math.PI / 2) * 0.99;\r\n    camera.lowerRadiusLimit = 150;\r\n\r\n\t\t// 加载过度动画开\r\n\t\tengine.displayLoadingUI();\r\n\r\n\t\t// 加载scene.babylon场景文件\r\n\t\tBABYLON.SceneLoader.Append(\"./scene/\", \"scene.babylon\", this._scene, function (scene) {\r\n\t\t\t\t// do something with the scene\r\n\t\t\t\t// 加载过度动画关\r\n\t\t\t\tengine.hideLoadingUI();\r\n\t\t});\r\n\r\n\r\n\t\t// const lightPos = new BABYLON.Vector3(0, 1, 0);\r\n\t\t// new BABYLON.HemisphericLight('hemlight', lightPos, this._scene);\r\n\r\n\t\t// const sphereOpts = { segments: 16, diameter: 1 };\r\n\t\t// let sphere = BABYLON.MeshBuilder.CreateSphere(\r\n\t\t// \t'mainsphere',\r\n\t\t// \tsphereOpts,\r\n\t\t// \tthis._scene\r\n\t\t// );\r\n\t\t// sphere.position.y = 1;\r\n\r\n\t\t// const groundOpts = { width: 6, height: 6, subdivisions: 2 };\r\n\t\t// BABYLON.MeshBuilder.CreateGround('mainground', groundOpts, this._scene);\r\n\r\n\t\t// 表格加载测试\r\n\t\t// console.log(hot1.getData());\r\n\t\tlet entrance: VeryEngine = new VeryEngine();\r\n\t\tentrance.init(hot1.getData(), projectName);\r\n\r\n\t\t// 全局渲染帧循环\r\n\t\tthis._scene.onBeforeRenderObservable.add(() => {\r\n\t\t\t// 添加帧函数\r\n\t\t\tTime._sum();\r\n\t\t})\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * 启动渲染循环；\r\n\t */\r\n\tanimate(): Game {\r\n\t\tthis._engine.runRenderLoop(() => {\r\n\t\t\tif (this._canvas.width !== this._canvas.clientWidth) {\r\n\t\t\t\tthis._engine.resize();\r\n\t\t\t}\r\n\r\n\t\t\tif (this._scene) {\r\n\t\t\t\tthis._scene.render();\r\n\t\t\t}\r\n\r\n\t\t\tif (this._showFps) {\r\n\t\t\t\tthis.updateFpsPos();\r\n\t\t\t}\r\n\r\n\r\n\t\t});\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * 属性编辑器UI界面控制；\r\n\t */\r\n\ttoggleDebug(): Game {\r\n\t\tif (this._engine) {\r\n\t\t\t// Always showing the debug layer, because you can close it by itself\r\n\t\t\tvar scene = this._engine.scenes[0];\r\n\t\t\tif (scene.debugLayer.isVisible()) {\r\n\t\t\t\tscene.debugLayer.hide();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// 此处修改了babylon.d.ts文件\r\n\t\t\t\tscene.debugLayer.show({ embedMode: true });\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * 更新fps显示及显示位置\r\n\t */\r\n\tupdateFpsPos(): void {\r\n\t\tif (this._fps) {\r\n\t\t\tthis._fps.style.right = document.body.clientWidth - (this._table.clientWidth + this._canvas.clientWidth) + \"px\";\r\n\r\n\t\t\tthis._fps.innerHTML = this._engine.getFps().toFixed() + \" fps\";\r\n\t\t}\r\n\t}\r\n}\r\n","import Game from \"./game\";\r\n\r\nlet game!:Game;\r\n/**\r\n * 初始化入口；\r\n */\r\nfunction initGame(): void {\r\n  let canvas = <HTMLCanvasElement>document.getElementById(\"renderCanvas\");\r\n  let fpsLabel = document.getElementById(\"fpsLabel\");\r\n  if(canvas !== null && fpsLabel !== null) {\r\n    game = new Game(canvas, fpsLabel);\r\n    game.createScene().animate();  // 链式调用\r\n  }\r\n}\r\n\r\nfunction runBtn(): void {\r\n  if(game) {\r\n    game.createScene().animate();\r\n  }\r\n}\r\n\r\nfunction toggleDebug(): void {\r\n  if(game) {\r\n    game.toggleDebug();\r\n  }\r\n}\r\n\r\n// 关联按钮\r\ndocument.getElementById(\"runButton\")!.addEventListener(\"click\", runBtn);\r\n\r\n// 关联按钮\r\ndocument.getElementById(\"debugButton\")!.addEventListener(\"click\", toggleDebug);\r\n\r\n// 启动引擎\r\ninitGame();\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import { ActionType } from \"../enum/actionType\";\r\n\r\nexport abstract class VE_ActionBehaviour {\r\n\r\n  abstract get ID(): string;\r\n\r\n  ProjectName: string = '';\r\n\r\n  // protected GameObject ObjectInstance = null;\r\n  // protected VeryEngineObject VeryObject = null;\r\n\r\n  ObjectID: string = '';\r\n  ActionID: string = '';\r\n\r\n  get Type(): ActionType {\r\n    return ActionType.Normal;\r\n  }\r\n\r\n  private _erveryFrame: boolean = false;\r\n  get EveryFrame(): boolean {\r\n    return this._erveryFrame;\r\n  }\r\n\r\n  /*\r\n  public bool IsSequence = false;\r\n\r\n  public SequenceActionState SequenceState\r\n  {\r\n    get { return this._sequenceState; }\r\n    set { this._sequenceState = value; }\r\n  }\r\n  private SequenceActionState _sequenceState = SequenceActionState.Initial;\r\n\r\n  private VE_SequenceActions _sequenceAction = null;\r\n  */\r\n\r\n  SetEveryFrame(is_every_frame: boolean): void {\r\n    this._erveryFrame = is_every_frame;\r\n  }\r\n\r\n  SetActionID(object_id: string, action_id: string): void {\r\n    this.ObjectID = object_id;\r\n    this.ActionID = action_id;\r\n  }\r\n\r\n  // SetVeryObject(): void {}\r\n\r\n  ParaParser(para_array: string[]): boolean {\r\n    if (para_array) { }\r\n    return true;\r\n  }\r\n\r\n  // Action(): void {}\r\n\r\n  abstract Active(): void;\r\n\r\n\r\n  Update(): void {\r\n    \r\n  }\r\n\r\n  OnUpdate(): void {\r\n\r\n  }\r\n\r\n\r\n}","export class VE_Actions {\r\n\r\n  constructor() {\r\n    \r\n  }\r\n\r\n\r\n}","export class VE_Assignment {\r\n  constructor() {\r\n    \r\n  }\r\n}","export * from './actionBehaviour';\r\nexport * from './assignment';\r\nexport * from './actions';","export enum ActionType {\r\n  Normal, Animation\r\n}","export * from './actionType';\r\nexport * from './stateActionType';","export enum StateActionType {\r\n  Action, Assignment\r\n}","export * from './expressionTree';\r\nexport * from './trueTree';","import { ExpressTree } from \"./expressionTree\";\r\n\r\nexport class TrueTree implements ExpressTree {\r\n  public get expType(): string {\r\n    return 'bool';\r\n  }\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  evaluate(): any {\r\n    return true;\r\n  }\r\n  clone(): ExpressTree {\r\n    let exp: TrueTree  = new TrueTree();\r\n    return exp;\r\n  }\r\n}","export class GameGlobal {\r\n\r\n  public static Canvas: HTMLCanvasElement;\r\n  public static Engine: BABYLON.Engine;\r\n  public static Scene: BABYLON.Scene;\r\n  \r\n\r\n}","export * from './gameGlobal';\r\nexport * from './time';","import { GameGlobal } from \"./gameGlobal\";\r\n\r\nexport class Time {\r\n  \r\n  public static get frameCount(): number {\r\n    return this._frame;\r\n  }\r\n  private static _frame: number = 0;\r\n\r\n\r\n  public static get deltaTime(): number {\r\n    // return 1.0 / GameGlobal.Engine.getFps();\r\n    return GameGlobal.Engine.getDeltaTime();\r\n  }\r\n\r\n  public static _sum(): void {\r\n    this._frame++;\r\n  }\r\n}","export * from './showError';","export class ShowError {\r\n\r\n  public static errorContentPrefix: string = '<div class=\"alert alert-error\"><button type=\"button\" class=\"close\" data-dismiss=\"alert\">&times;</button>';\r\n  public static errorContentNow: string;\r\n  public static errorZone: HTMLElement;\r\n\r\n  public static initZone(): void {\r\n    if (!this.errorZone) {\r\n      this.errorZone = document.getElementById(\"errorZone\")!;\r\n    }\r\n  }\r\n  /**\r\n   * 报错信息显示；\r\n   * TODO: log、error、warn信息分颜色显示，支持滚动栏，不然报错信息多了以后无法查看；\r\n   * @param error_msg 报错或警告信息；\r\n   */\r\n  private static showMsg(prefix: string, error_msg: string): void {\r\n    this.initZone();\r\n    if (!this.errorContentNow) {\r\n      this.errorContentNow = this.errorContentPrefix;\r\n    }\r\n    this.errorContentNow += prefix + error_msg + \"<br/>\";\r\n    this.errorZone.style.display = \"block\";\r\n    this.errorZone.innerHTML = this.errorContentNow + '</div>';\r\n    // Close button error\r\n    let closeBtn = this.errorZone.querySelector(\".close\")!;\r\n    let that = this;\r\n    closeBtn.addEventListener(\"click\", function () {\r\n      that.errorZone.style.display = \"none\";\r\n    });\r\n  }\r\n\r\n  public static show(error_msg: string): void {\r\n    this.showMsg('打印信息>>>', error_msg);\r\n  }\r\n\r\n  public static showError(error_msg: string): void {\r\n    this.showMsg('错误信息>>>', error_msg);\r\n  }\r\n\r\n  public static showWarn(error_msg: string): void {\r\n    this.showMsg('警告信息>>>', error_msg);\r\n  }\r\n\r\n  public static clear(): void {\r\n    ShowError.initZone();\r\n    ShowError.errorContentNow = ShowError.errorContentPrefix;\r\n    ShowError.errorZone.innerHTML = ShowError.errorContentNow + '</div>';\r\n    // Close button error\r\n    let closeBtn = ShowError.errorZone.querySelector(\".close\")!;\r\n    let that = ShowError;\r\n    closeBtn.addEventListener(\"click\", function () {\r\n      that.errorZone.style.display = \"none\";\r\n    });\r\n  }\r\n\r\n  public static close(): void {\r\n    ShowError.initZone();\r\n    if(ShowError.errorZone.style.display === \"none\") {\r\n      ShowError.errorZone.style.display = \"block\";\r\n    } else {\r\n      ShowError.errorZone.style.display = \"none\";\r\n    }\r\n  }\r\n}","export * from './action/index';\r\nexport * from './enum/index';\r\nexport * from './expression/index';\r\nexport * from './global/index';\r\nexport * from './html/index';\r\nexport * from './object/index';\r\nexport * from './state/index';\r\nexport * from './template/index';\r\nexport * from './trigger/index';\r\nexport * from './utility/index';\r\nexport * from './variables/index';\r\nexport * from '../verytable/index';\r\n","export * from './objects';","export class VE_Objects {\r\n  \r\n}","import { Dictionary } from \"../utility/dictionary\";\r\nimport { VE_State } from \"./state\";\r\n\r\nexport class VE_Fsm {\r\n\r\n  public get ID(): string {\r\n    return this._id;\r\n  }\r\n  private _id: string = '';\r\n\r\n  public get ObjectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = '';\r\n\r\n  public get FsmID(): string {\r\n    return this._fsmID;\r\n  }\r\n  private _fsmID: string = '';\r\n\r\n  private _stateDics: Dictionary<string, VE_State> = new Dictionary<string, VE_State>();\r\n  private _states: VE_State[] = [];\r\n \r\n  constructor() {\r\n    // this._stateDics.TryGetValue(1);\r\n  }\r\n\r\n  hasState(state_value: string): boolean {\r\n    return this._stateDics.ContainsKey(state_value);\r\n  }\r\n\r\n  addState(state_value: string, state: VE_State): void {\r\n    if (!this._stateDics.ContainsKey(state_value)) {\r\n      this._stateDics.Add(state_value, state);\r\n      this._states.push(state);\r\n    }\r\n  }\r\n\r\n  getState(state_value: string): VE_State | null {\r\n    return this._stateDics.GetValue(state_value);\r\n  }\r\n \r\n  removeState(state_value: string): boolean {\r\n    if (this.hasState(state_value)) {\r\n      this._stateDics.Remove(state_value);\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // receiveEvent(trigger_id: string): boolean {\r\n\r\n  // }\r\n\r\n}","export * from './state';\r\nexport * from './fsm';\r\nexport * from './stateAction';","import { VE_Fsm } from \"./fsm\";\r\nimport { VE_StateAction } from \"./stateAction\";\r\nimport { VE_AssociatedState } from \"./associatedState\";\r\n\r\nexport class VE_State {\r\n  public get Fsm(): VE_Fsm {\r\n    return this._fsm;\r\n  }\r\n  private _fsm: VE_Fsm;\r\n\r\n  public get Value(): string {\r\n    return this._value;\r\n  }\r\n  private _value: string = \"空状态\";\r\n\r\n  private _stateActions: VE_StateAction[] = [];\r\n  private _assocaitedStates: VE_AssociatedState[] = [];\r\n\r\n  public get IsSequence(): boolean {\r\n    return this._isSequence;\r\n  }\r\n  private _isSequence: boolean = false;\r\n\r\n  constructor(fsm: VE_Fsm, state_value: string = \"空状态\") {\r\n    this._fsm = fsm;\r\n    this._value = state_value;\r\n  }\r\n\r\n  setValue(state_value: string): void {\r\n    this._value = state_value;\r\n  }\r\n\r\n  addAction(state_action: VE_StateAction): void {\r\n    this._stateActions.push(state_action);\r\n    BABYLON.Mesh.bind;\r\n  }\r\n\r\n  public action(trigger_id: string): void {\r\n    \r\n  }\r\n}\r\n","import { StateActionType } from \"../enum/stateActionType\";\r\nimport { VE_ActionBehaviour } from \"../action/actionBehaviour\";\r\n\r\nexport class VE_StateAction {\r\n\r\n  public get Type(): StateActionType {\r\n    return this._type;\r\n  }\r\n  private _type: StateActionType = StateActionType.Action;\r\n\r\n  public get Action(): VE_ActionBehaviour {\r\n    return this._action;\r\n  }\r\n  private _action: VE_ActionBehaviour;\r\n\r\n  constructor(action: VE_ActionBehaviour, enabled: boolean, every_frame: boolean = false, is_sequence: boolean = false) {\r\n    this._action = action;\r\n  }\r\n\r\n\r\n\r\n\r\n}","export class StateConst {\r\n\r\n  public static readonly STATE_SEPARATOR = '.';\r\n  \r\n}","export * from './templates';","export class VE_Templates {\r\n  \r\n}","export * from './triggerBehaviour';\r\nexport * from './triggers';","import { VE_State } from \"../state/state\";\r\nimport { StateConst } from \"../state/stateConst\";\r\nimport { ExpressTree } from \"../expression\";\r\n\r\nexport abstract class VE_TriggerBehaviour {\r\n\r\n  abstract get ID(): string;\r\n\r\n  ProjectName: string = '';\r\n\r\n  public get IsEnabled(): boolean {\r\n    if (this._logicalSwitch) {\r\n      for (let i: number = 0; i < this._logicalSwitch.length; i++) {\r\n        if (!this._logicalSwitch[i].evaluate()) {\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // Logical\r\n  private _logicalSwitch: ExpressTree[] = [];\r\n  private _logicalExp: ExpressTree[] = [];\r\n  // State\r\n  private _triggerTargets: VE_State[] = [];\r\n\r\n  // protected GameObject ObjectInstance = null;\r\n  // protected VeryEngineObject VeryObject = null;\r\n\r\n  public get ObjectID(): string {\r\n    return this._objectID;\r\n  }\r\n  private _objectID: string = '';\r\n\r\n  public get TriggerID(): string {\r\n    return this._triggerID;\r\n  }\r\n  private _triggerID: string = '';\r\n\r\n  private _id: string = '';\r\n\r\n  public setTriggerID(trigger_id: string, object_id: string): void {\r\n    this._triggerID = trigger_id;\r\n    this._objectID = object_id;\r\n    this._id = object_id + StateConst.STATE_SEPARATOR + trigger_id;\r\n  }\r\n\r\n  public addLogicalSwitch(exp: ExpressTree): void {\r\n    this._logicalSwitch.push(exp);\r\n  }\r\n\r\n  public addTriggerTarget(exp: ExpressTree, state: VE_State): void {\r\n    this._logicalExp.push(exp);\r\n    this._triggerTargets.push(state);\r\n  }\r\n\r\n  public sendEvent(): void {\r\n    this.eventProcess();\r\n  }\r\n\r\n  // 关联具体响应\r\n  private eventProcess(): void {\r\n    if (this._triggerTargets) {\r\n      for (let i: number = 0; i < this._triggerTargets.length; i++) {\r\n        if (this._logicalExp[i].evaluate()) {\r\n          this._triggerTargets[i].action(this._id);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public paraParser(para_array: string[]): boolean {\r\n    return true;\r\n  }\r\n\r\n\r\n}","export class VE_Triggers {\r\n\r\n  \r\n\r\n}","/**字典数据结构类 */\r\nexport class Dictionary<KT, VT> {\r\n  private _keys: KT[] = [];\r\n  private _values: VT[] = [];\r\n  public get count(): number {\r\n    return this.Count();\r\n  }\r\n\r\n  public constructor() {\r\n  }\r\n\r\n  /**给字典增加一条数据,返回字典的长度 */\r\n  public Add(key: any, value: any): number {\r\n    this._keys.push(key);\r\n    return this._values.push(value);\r\n  }\r\n\r\n  public Remove(key: any) {\r\n    var index = this._keys.indexOf(key, 0);\r\n    this._keys.splice(index, 1);\r\n    this._values.splice(index, 1);\r\n  }\r\n\r\n  private Count(): number {\r\n    return this._keys.length;\r\n  }\r\n\r\n  /**直接使用SetValue()修改已经存在的字典数据项 */\r\n  public SetValue(key: any, value: any): boolean {\r\n    var index = this._keys.indexOf(key, 0);\r\n    if (index != -1) {\r\n      this._keys[index] = key;\r\n      this._values[index] = value;\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n\t/**\r\n\t *返回字典数据；\r\n\t */\r\n  public GetValue(key: KT): VT | null {\r\n    var index = this._keys.indexOf(key, 0);\r\n    if (index != -1) {\r\n      return this._values[index];\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public ContainsKey(key: any): boolean {\r\n    let ks = this._keys;\r\n    for (let i = 0; i < ks.length; ++i) {\r\n      if (ks[i] == key) {\r\n        return true;;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public GetKeys(): KT[] {\r\n    return this._keys;\r\n  }\r\n\r\n  public GetValues(): VT[] {\r\n    return this._values;\r\n  }\r\n}","export class ErrorInfo {\r\n\r\n  isRight: boolean = true;\r\n  message: string = '';\r\n\r\n  constructor() {\r\n    \r\n  }\r\n\r\n  clear(): void {\r\n    this.isRight = true;\r\n    this.message = '';\r\n  }\r\n\r\n}","export * from './dictionary';\r\nexport * from './errorInfo';","export * from \"./IVeryVar\";\r\nexport * from \"./veryVarManager\";\r\nexport * from \"./veryVariables\";","import { ShowError } from \"../html/showError\";\r\nimport { IVeryVar } from \"./IVeryVar\";\r\nimport { VeryBool } from \"./veryBool\";\r\n\r\nexport class VeryVarManager {\r\n  \r\n  public static VeryVarTypes: { [key: string]: IVeryVar } = {};\r\n\r\n  public static HasVarType(var_type: string): boolean {\r\n    if(this.VeryVarTypes[var_type]) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static AddVarType(var_type: string, var_proto: IVeryVar): void {\r\n    // 由于直接访问，所以在这里直接报错\r\n    if(this.VeryVarTypes[var_type]) {\r\n      ShowError.showError('VeryVar变量初始化错误，变量类型重复，当前变量名：' +  var_type + '，当前变量类型：' + var_proto);\r\n    } else {\r\n      // console.log(var_proto.VarType);\r\n      this.VeryVarTypes[var_type] = var_proto;\r\n      // let a = Object.create(this.GetVarType(var_type));\r\n      // console.log(a.Value);\r\n      // a.Value = true;\r\n      // console.log(a.Value);\r\n      // a.Value = 1234;\r\n      // console.log(a.getValue());\r\n      // console.log(this.GetVarType(var_type).__proto__);\r\n    }\r\n  }\r\n\r\n  // TODO\r\n  public static CreateVar(var_type: string): IVeryVar {\r\n    return Object.create(this.GetVarType(var_type));\r\n  }\r\n\r\n  public static GetVarType(var_type: string): any {\r\n      if (this.VeryVarTypes && this.VeryVarTypes[var_type]) {\r\n          return this.VeryVarTypes[var_type];\r\n      }\r\n      return null;\r\n  }\r\n\r\n\r\n\r\n}","import { IVeryVar } from \"./IVeryVar\";\r\nimport { ErrorInfo } from \"../utility/errorInfo\";\r\nimport { VeryVarManager } from \"./veryVarManager\";\r\n\r\nexport class VeryBool implements IVeryVar {\r\n\r\n  VarType: string = 'Bool';\r\n\r\n  public get Value(): boolean {\r\n    return this._value;\r\n  }\r\n  public set Value(val: boolean) {\r\n    this._value = val;\r\n  }\r\n  private _value: boolean = false;\r\n\r\n  constructor() {\r\n    this._value = false;\r\n  }\r\n\r\n  setValue(val: any): void {\r\n    this._value = val;\r\n  }\r\n\r\n  getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  initValue(value_str: string, error_info: ErrorInfo): any {\r\n    if(value_str.toLowerCase() === 'false') {\r\n      return false;\r\n    } else if(value_str.toLowerCase() === 'true'){\r\n      return true;\r\n    } \r\n    else if(value_str === '' || value_str.toLowerCase() === 'null' || value_str.toLowerCase() === 'none') {\r\n      return false;\r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message = 'Type: ' + this.VarType + '，值：' + value_str + '，该变量值和类型不匹配，转化错误，请检查！'\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport class VeryInt implements IVeryVar {\r\n\r\n  VarType: string = 'Int';\r\n\r\n  public get Value(): number {\r\n    return Math.round(this._value);\r\n  }\r\n  public set Value(val: number) {\r\n    this._value = Math.round(val);\r\n  }\r\n  private _value: number = 0;\r\n\r\n  constructor() {\r\n    this._value = 0;\r\n  }\r\n\r\n  getValue(): any {\r\n    return this.Value;\r\n  }\r\n\r\n  setValue(val: any): void {\r\n    this.Value = val;\r\n  }\r\n\r\n  initValue(value_str: string, error_info: ErrorInfo):any {\r\n    // 先转化为float，直接使用parseInt没有四舍五入的效果\r\n    let newFloat = parseFloat(value_str);\r\n    if(!isNaN(newFloat)) {\r\n      // 可对float进行四舍五入\r\n      return Math.round(newFloat);\r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message = 'Type: ' + this.VarType + '，值：' + value_str + '，该变量值和类型不匹配，转化错误，请检查！'\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport class VeryFloat implements IVeryVar {\r\n\r\n  VarType: string = 'Float';\r\n\r\n  public get Value(): number {\r\n    return this._value;\r\n  }\r\n  public set Value(val: number) {\r\n    this._value = val;\r\n  }\r\n  private _value: number = 0;\r\n\r\n  constructor() {\r\n    this._value = 0;\r\n  }\r\n\r\n  setValue(val: number) {\r\n    this._value = val;\r\n  }\r\n\r\n  // 之后可能会有公式的情况\r\n  getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  initValue(value_str: string, error_info: ErrorInfo): any {\r\n    let newVal = parseFloat(value_str);\r\n    if(!isNaN(newVal)) {\r\n      return newVal;\r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message = 'Type: ' + this.VarType + '，值：' + value_str + '，该变量值和类型不匹配，转化错误，请检查！'\r\n      return undefined;\r\n    }\r\n  }\r\n}\r\n\r\nexport class VeryNumber implements IVeryVar {\r\n\r\n  VarType: string = 'Number';\r\n\r\n  public get Value(): number {\r\n    return this._value;\r\n  }\r\n  public set Value(val: number) {\r\n    this._value = val;\r\n  }\r\n  private _value: number = 0;\r\n\r\n  constructor() {\r\n    this._value = 0;\r\n  }\r\n\r\n  setValue(val: number) {\r\n    this._value = val;\r\n  }\r\n\r\n  // 之后可能会有公式的情况\r\n  getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  initValue(value_str: string, error_info: ErrorInfo): any {\r\n    let newVal = parseFloat(value_str);\r\n    if(!isNaN(newVal)) {\r\n      return newVal;\r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message = 'Type: ' + this.VarType + '，值：' + value_str + '，该变量值和类型不匹配，转化错误，请检查！'\r\n      return undefined;\r\n    }\r\n  }\r\n}\r\n\r\nexport class VeryString implements IVeryVar {\r\n\r\n  VarType: string = 'String';\r\n\r\n  public get Value(): string {\r\n    return this._value;\r\n  }\r\n  public set Value(val: string) {\r\n    this._value = val;\r\n  }\r\n  private _value: string = '';\r\n\r\n  constructor() {\r\n    this._value = '';\r\n  }\r\n\r\n  getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  setValue(val: any): void {\r\n    this._value = val;\r\n  }\r\n\r\n  initValue(value_str: string, error_info: ErrorInfo): any {\r\n    if (value_str.startsWith('\\'') || value_str.startsWith('\"') || value_str.startsWith('“') || value_str.startsWith('‘')) {\r\n      this._value = value_str.substr(1, value_str.length - 2);\r\n    } else {\r\n      this._value = value_str;\r\n    } \r\n    error_info.isRight = true;\r\n  }\r\n}\r\n\r\nexport class VeryVector3 implements IVeryVar {\r\n\r\n  VarType: string = 'Vector3';\r\n\r\n  public get Value(): BABYLON.Vector3 {\r\n    //let a: BABYLON.Vector3 = new BABYLON.Vector3 (1,1,1);\r\n    return this._value;\r\n  }\r\n  public set Value(val:BABYLON.Vector3) {\r\n    this._value = val;\r\n  }\r\n  private _value: BABYLON.Vector3 = BABYLON.Vector3.Zero();\r\n\r\n\r\n  constructor() {\r\n    this._value = BABYLON.Vector3.Zero();\r\n  }\r\n\r\n  getValue(): any {\r\n    return this._value;\r\n  }\r\n\r\n  setValue(val: any) {\r\n    this._value = val;\r\n  }\r\n\r\n  initValue(value_str: string, error_info: ErrorInfo): any {\r\n    if(value_str === 'none' || value_str === 'null') {\r\n      \r\n    } else {\r\n      error_info.isRight = false;\r\n      error_info.message = 'Type: ' + this.VarType + '，值：' + value_str + '，该变量值和类型不匹配，转化错误，请检查！'\r\n    }\r\n  }\r\n}\r\n\r\nVeryVarManager.AddVarType('bool', new VeryBool());\r\nVeryVarManager.AddVarType('开关', new VeryBool());\r\n\r\nVeryVarManager.AddVarType('int', new VeryInt());\r\nVeryVarManager.AddVarType('float', new VeryFloat());\r\n\r\nVeryVarManager.AddVarType('number', new VeryNumber());\r\nVeryVarManager.AddVarType('数字', new VeryNumber());\r\n\r\nVeryVarManager.AddVarType('string', new VeryString());\r\nVeryVarManager.AddVarType('字符串', new VeryString());\r\nVeryVarManager.AddVarType('vector3', new VeryVector3());\r\nVeryVarManager.AddVarType('响应', new VeryVector3());","import { VeryTable } from \"../verytable/index\";\r\nimport { ShowError } from \"./html/showError\";\r\n\r\n// 导出entrance\r\nexport * from \"./index\";\r\n\r\nexport class VeryEngine {\r\n\r\n\r\n  constructor() {\r\n\r\n\r\n  }\r\n\r\n\r\n  init(data: Array<Array<string>>, project_name: string): void {\r\n    // TODO: 之后可能会变成多个Table，暂时未1个\r\n    let tableData: VeryTable = new VeryTable(data);\r\n    console.log(tableData.pos(7, 5));\r\n\r\n\r\n\r\n\r\n    // this.showErrorTest(tableData);\r\n  }\r\n\r\n\r\n  showErrorTest(tableData: VeryTable): void {\r\n    // /*\r\n    ShowError.show('大股东萨芬个是电饭锅三分隔收费的发大股东萨芬个是电饭锅三分隔收费的发大股东萨芬个是电饭锅三分隔收费的发大股东萨芬个是电饭锅三分隔收费的发大股东萨芬个是电饭锅三分隔收费的发大股东萨芬个是电饭锅三分隔收费的发，错误位置：' + tableData.pos(7, 5));\r\n\r\n    ShowError.showError('大股东萨芬个是电饭锅三分隔收费的发，错误位置：' + tableData.pos(7, 5));\r\n\r\n    ShowError.showWarn('大股东萨芬个是电饭锅三分隔收费的发，错误位置：' + tableData.pos(7, 5));\r\n\r\n    ShowError.show('大股东萨芬个是电饭锅三分隔收费的发，错误位置：' + tableData.pos(7, 5));\r\n\r\n    ShowError.show('大股东萨芬个是电饭锅三分隔收费的发，错误位置：' + tableData.pos(7, 5));\r\n\r\n\r\n    document.getElementById(\"settingsButton\")!.addEventListener(\"click\", ShowError.close);\r\n    // */\r\n  }\r\n\r\n}","\r\nexport * from \"./veryTableRow\";\r\nexport * from \"./veryTable\";\r\nexport * from \"./veryTableSet\";\r\n","import { VeryTableRow } from \"./veryTableRow\";\r\n\r\nexport class VeryTable {\r\n  private _id: string = \"\";\r\n  public get ID(): string {\r\n    return this._id;\r\n  }\r\n  public set ID(id: string) {\r\n    this._id = id;\r\n  }\r\n\r\n  private _columnIDs: string[] = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];\r\n\r\n  private _rows: VeryTableRow[] = [];\r\n\r\n  public get RowCount(): number {\r\n    if (!this._rows) {\r\n      return 0;\r\n    } else {\r\n      return this._rows.length;\r\n    }\r\n  }\r\n\r\n  constructor(data: string[][], id = \"默认Sheet\") {\r\n    this._id = id;\r\n    this._rows = [];\r\n    if (data) {\r\n      for (let i = 0; i < data.length; i++) {\r\n        let newRow = new VeryTableRow(data[i]);\r\n        this._rows.push(newRow);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 根据行序号和列序号获取表格数据\r\n   * @param row_index 行序号\r\n   * @param column_index 列序号\r\n   */\r\n  public getData(row_index: number, column_index: number): string | undefined {\r\n    if (row_index >= 0 && row_index < this._rows.length) {\r\n      let row: VeryTableRow = this._rows[row_index];\r\n      return row.getData(column_index);\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 根据行号返回行数据\r\n   * @param row_index 行序号\r\n   */\r\n  public getRow(row_index: number): VeryTableRow | undefined {\r\n    if (row_index >= 0 && row_index < this._rows.length) {\r\n      return this._rows[row_index];\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取表格位置\r\n   * @param row_index 行序号\r\n   * @param column_index 列序号\r\n   */\r\n  public pos(row_index: number, column_index: number): string {\r\n    return \"表名：\" + this.ID + \"，位置：（\" + (row_index + 1) + \"，\" + this.getColumnID(column_index) + \"）\";\r\n  }\r\n\r\n  /**\r\n   * 根据列序号获取列ID，序号超过26以后，需要进行计算\r\n   * @param column_index 列序号\r\n   */\r\n  private getColumnID(column_index: number): string {\r\n    if (column_index >= 0 && column_index < 26) {\r\n      return this._columnIDs[column_index];\r\n    } else if (column_index < 0) {\r\n      return 'error';\r\n    } else {\r\n      let a: number = Math.floor(column_index / 26);\r\n      let b: number = column_index % 26;\r\n      if (a === 0) {\r\n        return this._columnIDs[a];\r\n      } else {\r\n        return this._columnIDs[a - 1] + this._columnIDs[b];\r\n      }\r\n    }\r\n  }\r\n\r\n  // public addRowStringArray(row_data: string[]): void {\r\n\r\n  // }\r\n\r\n  // public addRowStrings(...strs: string[]): void {\r\n\r\n  // }\r\n\r\n  public addRow(data: VeryTableRow): void {\r\n    // \r\n    this._rows.push(data);\r\n\r\n  }\r\n\r\n\r\n}","\r\nexport class VeryTableRow {\r\n  public get Count(): number {\r\n    if (!this._rowData) {\r\n      return 0;\r\n    } else {\r\n      return this._rowData.length;\r\n    }\r\n  }\r\n\r\n  private _rowData: string[] = [];\r\n\r\n  constructor(row_data: string[]) {\r\n    this._rowData = row_data;\r\n  }\r\n\r\n  /**\r\n   * 根据列序号获取表格数据\r\n   * @param column_index 列序号\r\n   */\r\n  public getData(column_index: number): string | undefined {\r\n    if (column_index >= 0 && column_index < this.Count) {\r\n      return this._rowData[column_index];\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  public add(data: string): void {\r\n    this._rowData.push(data);\r\n  }\r\n\r\n  public insert(index: number, data: string): void {\r\n    // 先将数组一分为二，在第2个\r\n    this._rowData.push(data);\r\n    let tempData = this._rowData.slice(index);\r\n    tempData.push(data);\r\n    this._rowData = tempData;\r\n  }\r\n\r\n  public remove(index: number): void {\r\n    this._rowData.splice(index, 1);\r\n  }\r\n\r\n  public removeEnd(): void {\r\n    this._rowData.pop();\r\n  }\r\n\r\n\r\n\r\n  // public\r\n\r\n  // public remove(index: number): any {\r\n\r\n  // }\r\n}","// import { VeryTableRow } from \"./veryTableRow\";\r\n/**\r\n * 1. 主要使用TypeScript进行开发，掌握其一般开发流程，从项目建立到发布最终的生产代码（打包、合并、编译等）；\r\n * 2. 实际使用过程：在浏览器代码中，点击运行代码\r\n */\r\nimport { VeryTable } from \"./veryTable\";\r\n\r\nexport class VeryTableSet {\r\n\r\n  private _tables: VeryTable[] = [];\r\n\r\n  public get Count(): number {\r\n    if (!this._tables) {\r\n      return 0;\r\n    } else {\r\n      return this._tables.length;\r\n    }\r\n  }\r\n\r\n  constructor(tables?: VeryTable[]) {\r\n    if (tables) {\r\n      this._tables = tables;\r\n    }\r\n  }\r\n\r\n  public getTable(index: number): VeryTable | undefined {\r\n    if (index >= 0 && index < this.Count) {\r\n      return this._tables[index];\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  public addTable(table: VeryTable): void {\r\n    this._tables.push(table);\r\n  }\r\n\r\n  public removeTable(index: number): void {\r\n    if (index >= 0 && index < this.Count) {\r\n      this._tables.splice(index, 1);\r\n    }\r\n  }\r\n\r\n\r\n}"]}